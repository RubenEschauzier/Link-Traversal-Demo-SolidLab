(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const t of r)if(t.type==="childList")for(const i of t.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function u(r){const t={};return r.integrity&&(t.integrity=r.integrity),r.referrerPolicy&&(t.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?t.credentials="include":r.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function n(r){if(r.ep)return;r.ep=!0;const t=u(r);fetch(r.href,t)}})();var nb=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mve(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}function VF(a){if(Object.prototype.hasOwnProperty.call(a,"__esModule"))return a;var e=a.default;if(typeof e=="function"){var u=function n(){var r=!1;try{r=this instanceof n}catch{}return r?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};u.prototype=e.prototype}else u={};return Object.defineProperty(u,"__esModule",{value:!0}),Object.keys(a).forEach(function(n){var r=Object.getOwnPropertyDescriptor(a,n);Object.defineProperty(u,n,r.get?r:{enumerable:!0,get:function(){return a[n]}})}),u}var z5={exports:{}},Av={};var l$;function BAe(){if(l$)return Av;l$=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function u(n,r,t){var i=null;if(t!==void 0&&(i=""+t),r.key!==void 0&&(i=""+r.key),"key"in r){t={};for(var o in r)o!=="key"&&(t[o]=r[o])}else t=r;return r=t.ref,{$$typeof:a,type:n,key:i,ref:r!==void 0?r:null,props:t}}return Av.Fragment=e,Av.jsx=u,Av.jsxs=u,Av}var d$;function UAe(){return d$||(d$=1,z5.exports=BAe()),z5.exports}var Ge=UAe(),G5={exports:{}},Gt={};var f$;function QAe(){if(f$)return Gt;f$=1;var a=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),n=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),t=Symbol.for("react.consumer"),i=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),l=Symbol.for("react.suspense"),s=Symbol.for("react.memo"),c=Symbol.for("react.lazy"),d=Symbol.for("react.activity"),f=Symbol.iterator;function p(te){return te===null||typeof te!="object"?null:(te=f&&te[f]||te["@@iterator"],typeof te=="function"?te:null)}var h={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,v={};function m(te,se,pe){this.props=te,this.context=se,this.refs=v,this.updater=pe||h}m.prototype.isReactComponent={},m.prototype.setState=function(te,se){if(typeof te!="object"&&typeof te!="function"&&te!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,te,se,"setState")},m.prototype.forceUpdate=function(te){this.updater.enqueueForceUpdate(this,te,"forceUpdate")};function T(){}T.prototype=m.prototype;function w(te,se,pe){this.props=te,this.context=se,this.refs=v,this.updater=pe||h}var E=w.prototype=new T;E.constructor=w,g(E,m.prototype),E.isPureReactComponent=!0;var S=Array.isArray;function N(){}var j={H:null,A:null,T:null,S:null},q=Object.prototype.hasOwnProperty;function O(te,se,pe){var le=pe.ref;return{$$typeof:a,type:te,key:se,ref:le!==void 0?le:null,props:pe}}function I(te,se){return O(te.type,se,te.props)}function A(te){return typeof te=="object"&&te!==null&&te.$$typeof===a}function P(te){var se={"=":"=0",":":"=2"};return"$"+te.replace(/[=:]/g,function(pe){return se[pe]})}var C=/\/+/g;function B(te,se){return typeof te=="object"&&te!==null&&te.key!=null?P(""+te.key):se.toString(36)}function H(te){switch(te.status){case"fulfilled":return te.value;case"rejected":throw te.reason;default:switch(typeof te.status=="string"?te.then(N,N):(te.status="pending",te.then(function(se){te.status==="pending"&&(te.status="fulfilled",te.value=se)},function(se){te.status==="pending"&&(te.status="rejected",te.reason=se)})),te.status){case"fulfilled":return te.value;case"rejected":throw te.reason}}throw te}function V(te,se,pe,le,Ee){var Oe=typeof te;(Oe==="undefined"||Oe==="boolean")&&(te=null);var Ie=!1;if(te===null)Ie=!0;else switch(Oe){case"bigint":case"string":case"number":Ie=!0;break;case"object":switch(te.$$typeof){case a:case e:Ie=!0;break;case c:return Ie=te._init,V(Ie(te._payload),se,pe,le,Ee)}}if(Ie)return Ee=Ee(te),Ie=le===""?"."+B(te,0):le,S(Ee)?(pe="",Ie!=null&&(pe=Ie.replace(C,"$&/")+"/"),V(Ee,se,pe,"",function(ee){return ee})):Ee!=null&&(A(Ee)&&(Ee=I(Ee,pe+(Ee.key==null||te&&te.key===Ee.key?"":(""+Ee.key).replace(C,"$&/")+"/")+Ie)),se.push(Ee)),1;Ie=0;var Ae=le===""?".":le+":";if(S(te))for(var be=0;be<te.length;be++)le=te[be],Oe=Ae+B(le,be),Ie+=V(le,se,pe,Oe,Ee);else if(be=p(te),typeof be=="function")for(te=be.call(te),be=0;!(le=te.next()).done;)le=le.value,Oe=Ae+B(le,be++),Ie+=V(le,se,pe,Oe,Ee);else if(Oe==="object"){if(typeof te.then=="function")return V(H(te),se,pe,le,Ee);throw se=String(te),Error("Objects are not valid as a React child (found: "+(se==="[object Object]"?"object with keys {"+Object.keys(te).join(", ")+"}":se)+"). If you meant to render a collection of children, use an array instead.")}return Ie}function G(te,se,pe){if(te==null)return te;var le=[],Ee=0;return V(te,le,"","",function(Oe){return se.call(pe,Oe,Ee++)}),le}function Z(te){if(te._status===-1){var se=te._result;se=se(),se.then(function(pe){(te._status===0||te._status===-1)&&(te._status=1,te._result=pe)},function(pe){(te._status===0||te._status===-1)&&(te._status=2,te._result=pe)}),te._status===-1&&(te._status=0,te._result=se)}if(te._status===1)return te._result.default;throw te._result}var ae=typeof reportError=="function"?reportError:function(te){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var se=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof te=="object"&&te!==null&&typeof te.message=="string"?String(te.message):String(te),error:te});if(!window.dispatchEvent(se))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",te);return}console.error(te)},W={map:G,forEach:function(te,se,pe){G(te,function(){se.apply(this,arguments)},pe)},count:function(te){var se=0;return G(te,function(){se++}),se},toArray:function(te){return G(te,function(se){return se})||[]},only:function(te){if(!A(te))throw Error("React.Children.only expected to receive a single React element child.");return te}};return Gt.Activity=d,Gt.Children=W,Gt.Component=m,Gt.Fragment=u,Gt.Profiler=r,Gt.PureComponent=w,Gt.StrictMode=n,Gt.Suspense=l,Gt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=j,Gt.__COMPILER_RUNTIME={__proto__:null,c:function(te){return j.H.useMemoCache(te)}},Gt.cache=function(te){return function(){return te.apply(null,arguments)}},Gt.cacheSignal=function(){return null},Gt.cloneElement=function(te,se,pe){if(te==null)throw Error("The argument must be a React element, but you passed "+te+".");var le=g({},te.props),Ee=te.key;if(se!=null)for(Oe in se.key!==void 0&&(Ee=""+se.key),se)!q.call(se,Oe)||Oe==="key"||Oe==="__self"||Oe==="__source"||Oe==="ref"&&se.ref===void 0||(le[Oe]=se[Oe]);var Oe=arguments.length-2;if(Oe===1)le.children=pe;else if(1<Oe){for(var Ie=Array(Oe),Ae=0;Ae<Oe;Ae++)Ie[Ae]=arguments[Ae+2];le.children=Ie}return O(te.type,Ee,le)},Gt.createContext=function(te){return te={$$typeof:i,_currentValue:te,_currentValue2:te,_threadCount:0,Provider:null,Consumer:null},te.Provider=te,te.Consumer={$$typeof:t,_context:te},te},Gt.createElement=function(te,se,pe){var le,Ee={},Oe=null;if(se!=null)for(le in se.key!==void 0&&(Oe=""+se.key),se)q.call(se,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(Ee[le]=se[le]);var Ie=arguments.length-2;if(Ie===1)Ee.children=pe;else if(1<Ie){for(var Ae=Array(Ie),be=0;be<Ie;be++)Ae[be]=arguments[be+2];Ee.children=Ae}if(te&&te.defaultProps)for(le in Ie=te.defaultProps,Ie)Ee[le]===void 0&&(Ee[le]=Ie[le]);return O(te,Oe,Ee)},Gt.createRef=function(){return{current:null}},Gt.forwardRef=function(te){return{$$typeof:o,render:te}},Gt.isValidElement=A,Gt.lazy=function(te){return{$$typeof:c,_payload:{_status:-1,_result:te},_init:Z}},Gt.memo=function(te,se){return{$$typeof:s,type:te,compare:se===void 0?null:se}},Gt.startTransition=function(te){var se=j.T,pe={};j.T=pe;try{var le=te(),Ee=j.S;Ee!==null&&Ee(pe,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(N,ae)}catch(Oe){ae(Oe)}finally{se!==null&&pe.types!==null&&(se.types=pe.types),j.T=se}},Gt.unstable_useCacheRefresh=function(){return j.H.useCacheRefresh()},Gt.use=function(te){return j.H.use(te)},Gt.useActionState=function(te,se,pe){return j.H.useActionState(te,se,pe)},Gt.useCallback=function(te,se){return j.H.useCallback(te,se)},Gt.useContext=function(te){return j.H.useContext(te)},Gt.useDebugValue=function(){},Gt.useDeferredValue=function(te,se){return j.H.useDeferredValue(te,se)},Gt.useEffect=function(te,se){return j.H.useEffect(te,se)},Gt.useEffectEvent=function(te){return j.H.useEffectEvent(te)},Gt.useId=function(){return j.H.useId()},Gt.useImperativeHandle=function(te,se,pe){return j.H.useImperativeHandle(te,se,pe)},Gt.useInsertionEffect=function(te,se){return j.H.useInsertionEffect(te,se)},Gt.useLayoutEffect=function(te,se){return j.H.useLayoutEffect(te,se)},Gt.useMemo=function(te,se){return j.H.useMemo(te,se)},Gt.useOptimistic=function(te,se){return j.H.useOptimistic(te,se)},Gt.useReducer=function(te,se,pe){return j.H.useReducer(te,se,pe)},Gt.useRef=function(te){return j.H.useRef(te)},Gt.useState=function(te){return j.H.useState(te)},Gt.useSyncExternalStore=function(te,se,pe){return j.H.useSyncExternalStore(te,se,pe)},Gt.useTransition=function(){return j.H.useTransition()},Gt.version="19.2.3",Gt}var p$;function L7(){return p$||(p$=1,G5.exports=QAe()),G5.exports}var We=L7();const VAe=mve(We);var $5={exports:{}},Ov={},X5={exports:{}},K5={};var h$;function HAe(){return h$||(h$=1,(function(a){function e(V,G){var Z=V.length;V.push(G);e:for(;0<Z;){var ae=Z-1>>>1,W=V[ae];if(0<r(W,G))V[ae]=G,V[Z]=W,Z=ae;else break e}}function u(V){return V.length===0?null:V[0]}function n(V){if(V.length===0)return null;var G=V[0],Z=V.pop();if(Z!==G){V[0]=Z;e:for(var ae=0,W=V.length,te=W>>>1;ae<te;){var se=2*(ae+1)-1,pe=V[se],le=se+1,Ee=V[le];if(0>r(pe,Z))le<W&&0>r(Ee,pe)?(V[ae]=Ee,V[le]=Z,ae=le):(V[ae]=pe,V[se]=Z,ae=se);else if(le<W&&0>r(Ee,Z))V[ae]=Ee,V[le]=Z,ae=le;else break e}}return G}function r(V,G){var Z=V.sortIndex-G.sortIndex;return Z!==0?Z:V.id-G.id}if(a.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var t=performance;a.unstable_now=function(){return t.now()}}else{var i=Date,o=i.now();a.unstable_now=function(){return i.now()-o}}var l=[],s=[],c=1,d=null,f=3,p=!1,h=!1,g=!1,v=!1,m=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;function E(V){for(var G=u(s);G!==null;){if(G.callback===null)n(s);else if(G.startTime<=V)n(s),G.sortIndex=G.expirationTime,e(l,G);else break;G=u(s)}}function S(V){if(g=!1,E(V),!h)if(u(l)!==null)h=!0,N||(N=!0,P());else{var G=u(s);G!==null&&H(S,G.startTime-V)}}var N=!1,j=-1,q=5,O=-1;function I(){return v?!0:!(a.unstable_now()-O<q)}function A(){if(v=!1,N){var V=a.unstable_now();O=V;var G=!0;try{e:{h=!1,g&&(g=!1,T(j),j=-1),p=!0;var Z=f;try{t:{for(E(V),d=u(l);d!==null&&!(d.expirationTime>V&&I());){var ae=d.callback;if(typeof ae=="function"){d.callback=null,f=d.priorityLevel;var W=ae(d.expirationTime<=V);if(V=a.unstable_now(),typeof W=="function"){d.callback=W,E(V),G=!0;break t}d===u(l)&&n(l),E(V)}else n(l);d=u(l)}if(d!==null)G=!0;else{var te=u(s);te!==null&&H(S,te.startTime-V),G=!1}}break e}finally{d=null,f=Z,p=!1}G=void 0}}finally{G?P():N=!1}}}var P;if(typeof w=="function")P=function(){w(A)};else if(typeof MessageChannel<"u"){var C=new MessageChannel,B=C.port2;C.port1.onmessage=A,P=function(){B.postMessage(null)}}else P=function(){m(A,0)};function H(V,G){j=m(function(){V(a.unstable_now())},G)}a.unstable_IdlePriority=5,a.unstable_ImmediatePriority=1,a.unstable_LowPriority=4,a.unstable_NormalPriority=3,a.unstable_Profiling=null,a.unstable_UserBlockingPriority=2,a.unstable_cancelCallback=function(V){V.callback=null},a.unstable_forceFrameRate=function(V){0>V||125<V?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<V?Math.floor(1e3/V):5},a.unstable_getCurrentPriorityLevel=function(){return f},a.unstable_next=function(V){switch(f){case 1:case 2:case 3:var G=3;break;default:G=f}var Z=f;f=G;try{return V()}finally{f=Z}},a.unstable_requestPaint=function(){v=!0},a.unstable_runWithPriority=function(V,G){switch(V){case 1:case 2:case 3:case 4:case 5:break;default:V=3}var Z=f;f=V;try{return G()}finally{f=Z}},a.unstable_scheduleCallback=function(V,G,Z){var ae=a.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?ae+Z:ae):Z=ae,V){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=Z+W,V={id:c++,callback:G,priorityLevel:V,startTime:Z,expirationTime:W,sortIndex:-1},Z>ae?(V.sortIndex=Z,e(s,V),u(l)===null&&V===u(s)&&(g?(T(j),j=-1):g=!0,H(S,Z-ae))):(V.sortIndex=W,e(l,V),h||p||(h=!0,N||(N=!0,P()))),V},a.unstable_shouldYield=I,a.unstable_wrapCallback=function(V){var G=f;return function(){var Z=f;f=G;try{return V.apply(this,arguments)}finally{f=Z}}}})(K5)),K5}var y$;function kAe(){return y$||(y$=1,X5.exports=HAe()),X5.exports}var J5={exports:{}},Fa={};var m$;function zAe(){if(m$)return Fa;m$=1;var a=L7();function e(l){var s="https://react.dev/errors/"+l;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)s+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+l+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function u(){}var n={d:{f:u,r:function(){throw Error(e(522))},D:u,C:u,L:u,m:u,X:u,S:u,M:u},p:0,findDOMNode:null},r=Symbol.for("react.portal");function t(l,s,c){var d=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:d==null?null:""+d,children:l,containerInfo:s,implementation:c}}var i=a.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function o(l,s){if(l==="font")return"";if(typeof s=="string")return s==="use-credentials"?s:""}return Fa.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=n,Fa.createPortal=function(l,s){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)throw Error(e(299));return t(l,s,null,c)},Fa.flushSync=function(l){var s=i.T,c=n.p;try{if(i.T=null,n.p=2,l)return l()}finally{i.T=s,n.p=c,n.d.f()}},Fa.preconnect=function(l,s){typeof l=="string"&&(s?(s=s.crossOrigin,s=typeof s=="string"?s==="use-credentials"?s:"":void 0):s=null,n.d.C(l,s))},Fa.prefetchDNS=function(l){typeof l=="string"&&n.d.D(l)},Fa.preinit=function(l,s){if(typeof l=="string"&&s&&typeof s.as=="string"){var c=s.as,d=o(c,s.crossOrigin),f=typeof s.integrity=="string"?s.integrity:void 0,p=typeof s.fetchPriority=="string"?s.fetchPriority:void 0;c==="style"?n.d.S(l,typeof s.precedence=="string"?s.precedence:void 0,{crossOrigin:d,integrity:f,fetchPriority:p}):c==="script"&&n.d.X(l,{crossOrigin:d,integrity:f,fetchPriority:p,nonce:typeof s.nonce=="string"?s.nonce:void 0})}},Fa.preinitModule=function(l,s){if(typeof l=="string")if(typeof s=="object"&&s!==null){if(s.as==null||s.as==="script"){var c=o(s.as,s.crossOrigin);n.d.M(l,{crossOrigin:c,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0})}}else s==null&&n.d.M(l)},Fa.preload=function(l,s){if(typeof l=="string"&&typeof s=="object"&&s!==null&&typeof s.as=="string"){var c=s.as,d=o(c,s.crossOrigin);n.d.L(l,c,{crossOrigin:d,integrity:typeof s.integrity=="string"?s.integrity:void 0,nonce:typeof s.nonce=="string"?s.nonce:void 0,type:typeof s.type=="string"?s.type:void 0,fetchPriority:typeof s.fetchPriority=="string"?s.fetchPriority:void 0,referrerPolicy:typeof s.referrerPolicy=="string"?s.referrerPolicy:void 0,imageSrcSet:typeof s.imageSrcSet=="string"?s.imageSrcSet:void 0,imageSizes:typeof s.imageSizes=="string"?s.imageSizes:void 0,media:typeof s.media=="string"?s.media:void 0})}},Fa.preloadModule=function(l,s){if(typeof l=="string")if(s){var c=o(s.as,s.crossOrigin);n.d.m(l,{as:typeof s.as=="string"&&s.as!=="script"?s.as:void 0,crossOrigin:c,integrity:typeof s.integrity=="string"?s.integrity:void 0})}else n.d.m(l)},Fa.requestFormReset=function(l){n.d.r(l)},Fa.unstable_batchedUpdates=function(l,s){return l(s)},Fa.useFormState=function(l,s,c){return i.H.useFormState(l,s,c)},Fa.useFormStatus=function(){return i.H.useHostTransitionStatus()},Fa.version="19.2.3",Fa}var b$;function GAe(){if(b$)return J5.exports;b$=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),J5.exports=zAe(),J5.exports}var g$;function $Ae(){if(g$)return Ov;g$=1;var a=kAe(),e=L7(),u=GAe();function n(y){var b="https://react.dev/errors/"+y;if(1<arguments.length){b+="?args[]="+encodeURIComponent(arguments[1]);for(var x=2;x<arguments.length;x++)b+="&args[]="+encodeURIComponent(arguments[x])}return"Minified React error #"+y+"; visit "+b+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(y){return!(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)}function t(y){var b=y,x=y;if(y.alternate)for(;b.return;)b=b.return;else{y=b;do b=y,(b.flags&4098)!==0&&(x=b.return),y=b.return;while(y)}return b.tag===3?x:null}function i(y){if(y.tag===13){var b=y.memoizedState;if(b===null&&(y=y.alternate,y!==null&&(b=y.memoizedState)),b!==null)return b.dehydrated}return null}function o(y){if(y.tag===31){var b=y.memoizedState;if(b===null&&(y=y.alternate,y!==null&&(b=y.memoizedState)),b!==null)return b.dehydrated}return null}function l(y){if(t(y)!==y)throw Error(n(188))}function s(y){var b=y.alternate;if(!b){if(b=t(y),b===null)throw Error(n(188));return b!==y?null:y}for(var x=y,M=b;;){var U=x.return;if(U===null)break;var z=U.alternate;if(z===null){if(M=U.return,M!==null){x=M;continue}break}if(U.child===z.child){for(z=U.child;z;){if(z===x)return l(U),y;if(z===M)return l(U),b;z=z.sibling}throw Error(n(188))}if(x.return!==M.return)x=U,M=z;else{for(var ie=!1,_e=U.child;_e;){if(_e===x){ie=!0,x=U,M=z;break}if(_e===M){ie=!0,M=U,x=z;break}_e=_e.sibling}if(!ie){for(_e=z.child;_e;){if(_e===x){ie=!0,x=z,M=U;break}if(_e===M){ie=!0,M=z,x=U;break}_e=_e.sibling}if(!ie)throw Error(n(189))}}if(x.alternate!==M)throw Error(n(190))}if(x.tag!==3)throw Error(n(188));return x.stateNode.current===x?y:b}function c(y){var b=y.tag;if(b===5||b===26||b===27||b===6)return y;for(y=y.child;y!==null;){if(b=c(y),b!==null)return b;y=y.sibling}return null}var d=Object.assign,f=Symbol.for("react.element"),p=Symbol.for("react.transitional.element"),h=Symbol.for("react.portal"),g=Symbol.for("react.fragment"),v=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),T=Symbol.for("react.consumer"),w=Symbol.for("react.context"),E=Symbol.for("react.forward_ref"),S=Symbol.for("react.suspense"),N=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),q=Symbol.for("react.lazy"),O=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),A=Symbol.iterator;function P(y){return y===null||typeof y!="object"?null:(y=A&&y[A]||y["@@iterator"],typeof y=="function"?y:null)}var C=Symbol.for("react.client.reference");function B(y){if(y==null)return null;if(typeof y=="function")return y.$$typeof===C?null:y.displayName||y.name||null;if(typeof y=="string")return y;switch(y){case g:return"Fragment";case m:return"Profiler";case v:return"StrictMode";case S:return"Suspense";case N:return"SuspenseList";case O:return"Activity"}if(typeof y=="object")switch(y.$$typeof){case h:return"Portal";case w:return y.displayName||"Context";case T:return(y._context.displayName||"Context")+".Consumer";case E:var b=y.render;return y=y.displayName,y||(y=b.displayName||b.name||"",y=y!==""?"ForwardRef("+y+")":"ForwardRef"),y;case j:return b=y.displayName||null,b!==null?b:B(y.type)||"Memo";case q:b=y._payload,y=y._init;try{return B(y(b))}catch{}}return null}var H=Array.isArray,V=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,G=u.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Z={pending:!1,data:null,method:null,action:null},ae=[],W=-1;function te(y){return{current:y}}function se(y){0>W||(y.current=ae[W],ae[W]=null,W--)}function pe(y,b){W++,ae[W]=y.current,y.current=b}var le=te(null),Ee=te(null),Oe=te(null),Ie=te(null);function Ae(y,b){switch(pe(Oe,b),pe(Ee,y),pe(le,null),b.nodeType){case 9:case 11:y=(y=b.documentElement)&&(y=y.namespaceURI)?PG(y):0;break;default:if(y=b.tagName,b=b.namespaceURI)b=PG(b),y=jG(b,y);else switch(y){case"svg":y=1;break;case"math":y=2;break;default:y=0}}se(le),pe(le,y)}function be(){se(le),se(Ee),se(Oe)}function ee(y){y.memoizedState!==null&&pe(Ie,y);var b=le.current,x=jG(b,y.type);b!==x&&(pe(Ee,y),pe(le,x))}function _(y){Ee.current===y&&(se(le),se(Ee)),Ie.current===y&&(se(Ie),Tv._currentValue=Z)}var F,D;function L(y){if(F===void 0)try{throw Error()}catch(x){var b=x.stack.trim().match(/\n( *(at )?)/);F=b&&b[1]||"",D=-1<x.stack.indexOf(`
    at`)?" (<anonymous>)":-1<x.stack.indexOf("@")?"@unknown:0:0":""}return`
`+F+y+D}var Q=!1;function Y(y,b){if(!y||Q)return"";Q=!0;var x=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var M={DetermineComponentFrameRoot:function(){try{if(b){var mt=function(){throw Error()};if(Object.defineProperty(mt.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(mt,[])}catch(ut){var rt=ut}Reflect.construct(y,[],mt)}else{try{mt.call()}catch(ut){rt=ut}y.call(mt.prototype)}}else{try{throw Error()}catch(ut){rt=ut}(mt=y())&&typeof mt.catch=="function"&&mt.catch(function(){})}}catch(ut){if(ut&&rt&&typeof ut.stack=="string")return[ut.stack,rt.stack]}return[null,null]}};M.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var U=Object.getOwnPropertyDescriptor(M.DetermineComponentFrameRoot,"name");U&&U.configurable&&Object.defineProperty(M.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var z=M.DetermineComponentFrameRoot(),ie=z[0],_e=z[1];if(ie&&_e){var Be=ie.split(`
`),et=_e.split(`
`);for(U=M=0;M<Be.length&&!Be[M].includes("DetermineComponentFrameRoot");)M++;for(;U<et.length&&!et[U].includes("DetermineComponentFrameRoot");)U++;if(M===Be.length||U===et.length)for(M=Be.length-1,U=et.length-1;1<=M&&0<=U&&Be[M]!==et[U];)U--;for(;1<=M&&0<=U;M--,U--)if(Be[M]!==et[U]){if(M!==1||U!==1)do if(M--,U--,0>U||Be[M]!==et[U]){var ct=`
`+Be[M].replace(" at new "," at ");return y.displayName&&ct.includes("<anonymous>")&&(ct=ct.replace("<anonymous>",y.displayName)),ct}while(1<=M&&0<=U);break}}}finally{Q=!1,Error.prepareStackTrace=x}return(x=y?y.displayName||y.name:"")?L(x):""}function $(y,b){switch(y.tag){case 26:case 27:case 5:return L(y.type);case 16:return L("Lazy");case 13:return y.child!==b&&b!==null?L("Suspense Fallback"):L("Suspense");case 19:return L("SuspenseList");case 0:case 15:return Y(y.type,!1);case 11:return Y(y.type.render,!1);case 1:return Y(y.type,!0);case 31:return L("Activity");default:return""}}function ue(y){try{var b="",x=null;do b+=$(y,x),x=y,y=y.return;while(y);return b}catch(M){return`
Error generating stack: `+M.message+`
`+M.stack}}var ne=Object.prototype.hasOwnProperty,ce=a.unstable_scheduleCallback,Se=a.unstable_cancelCallback,xe=a.unstable_shouldYield,Ce=a.unstable_requestPaint,Ve=a.unstable_now,Ke=a.unstable_getCurrentPriorityLevel,Ye=a.unstable_ImmediatePriority,oe=a.unstable_UserBlockingPriority,X=a.unstable_NormalPriority,J=a.unstable_LowPriority,he=a.unstable_IdlePriority,ve=a.log,ye=a.unstable_setDisableYieldValue,re=null,Ne=null;function Le(y){if(typeof ve=="function"&&ye(y),Ne&&typeof Ne.setStrictMode=="function")try{Ne.setStrictMode(re,y)}catch{}}var Pe=Math.clz32?Math.clz32:k,Fe=Math.log,R=Math.LN2;function k(y){return y>>>=0,y===0?32:31-(Fe(y)/R|0)|0}var K=256,de=262144,ge=4194304;function Ue(y){var b=y&42;if(b!==0)return b;switch(y&-y){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return y&261888;case 262144:case 524288:case 1048576:case 2097152:return y&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return y&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return y}}function je(y,b,x){var M=y.pendingLanes;if(M===0)return 0;var U=0,z=y.suspendedLanes,ie=y.pingedLanes;y=y.warmLanes;var _e=M&134217727;return _e!==0?(M=_e&~z,M!==0?U=Ue(M):(ie&=_e,ie!==0?U=Ue(ie):x||(x=_e&~y,x!==0&&(U=Ue(x))))):(_e=M&~z,_e!==0?U=Ue(_e):ie!==0?U=Ue(ie):x||(x=M&~y,x!==0&&(U=Ue(x)))),U===0?0:b!==0&&b!==U&&(b&z)===0&&(z=U&-U,x=b&-b,z>=x||z===32&&(x&4194048)!==0)?b:U}function ze(y,b){return(y.pendingLanes&~(y.suspendedLanes&~y.pingedLanes)&b)===0}function at(y,b){switch(y){case 1:case 2:case 4:case 8:case 64:return b+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return b+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function fe(){var y=ge;return ge<<=1,(ge&62914560)===0&&(ge=4194304),y}function Te(y){for(var b=[],x=0;31>x;x++)b.push(y);return b}function qe(y,b){y.pendingLanes|=b,b!==268435456&&(y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0)}function it(y,b,x,M,U,z){var ie=y.pendingLanes;y.pendingLanes=x,y.suspendedLanes=0,y.pingedLanes=0,y.warmLanes=0,y.expiredLanes&=x,y.entangledLanes&=x,y.errorRecoveryDisabledLanes&=x,y.shellSuspendCounter=0;var _e=y.entanglements,Be=y.expirationTimes,et=y.hiddenUpdates;for(x=ie&~x;0<x;){var ct=31-Pe(x),mt=1<<ct;_e[ct]=0,Be[ct]=-1;var rt=et[ct];if(rt!==null)for(et[ct]=null,ct=0;ct<rt.length;ct++){var ut=rt[ct];ut!==null&&(ut.lane&=-536870913)}x&=~mt}M!==0&&Me(y,M,0),z!==0&&U===0&&y.tag!==0&&(y.suspendedLanes|=z&~(ie&~b))}function Me(y,b,x){y.pendingLanes|=b,y.suspendedLanes&=~b;var M=31-Pe(b);y.entangledLanes|=b,y.entanglements[M]=y.entanglements[M]|1073741824|x&261930}function st(y,b){var x=y.entangledLanes|=b;for(y=y.entanglements;x;){var M=31-Pe(x),U=1<<M;U&b|y[M]&b&&(y[M]|=b),x&=~U}}function tt(y,b){var x=b&-b;return x=(x&42)!==0?1:Ot(x),(x&(y.suspendedLanes|b))!==0?0:x}function Ot(y){switch(y){case 2:y=1;break;case 8:y=4;break;case 32:y=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:y=128;break;case 268435456:y=134217728;break;default:y=0}return y}function yt(y){return y&=-y,2<y?8<y?(y&134217727)!==0?32:268435456:8:2}function bt(){var y=G.p;return y!==0?y:(y=window.event,y===void 0?32:n$(y.type))}function Tt(y,b){var x=G.p;try{return G.p=y,b()}finally{G.p=x}}var xt=Math.random().toString(36).slice(2),wt="__reactFiber$"+xt,gt="__reactProps$"+xt,lr="__reactContainer$"+xt,ht="__reactEvents$"+xt,Re="__reactListeners$"+xt,Qe="__reactHandles$"+xt,ke="__reactResources$"+xt,vt="__reactMarker$"+xt;function St(y){delete y[wt],delete y[gt],delete y[ht],delete y[Re],delete y[Qe]}function Qt(y){var b=y[wt];if(b)return b;for(var x=y.parentNode;x;){if(b=x[lr]||x[wt]){if(x=b.alternate,b.child!==null||x!==null&&x.child!==null)for(y=QG(y);y!==null;){if(x=y[wt])return x;y=QG(y)}return b}y=x,x=y.parentNode}return null}function Tr(y){if(y=y[wt]||y[lr]){var b=y.tag;if(b===5||b===6||b===13||b===31||b===26||b===27||b===3)return y}return null}function pr(y){var b=y.tag;if(b===5||b===26||b===27||b===6)return y.stateNode;throw Error(n(33))}function aa(y){var b=y[ke];return b||(b=y[ke]={hoistableStyles:new Map,hoistableScripts:new Map}),b}function hr(y){y[vt]=!0}var Ir=new Set,fa={};function Or(y,b){xn(y,b),xn(y+"Capture",b)}function xn(y,b){for(fa[y]=b,y=0;y<b.length;y++)Ir.add(b[y])}var hn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),_i={},Rn={};function yo(y){return ne.call(Rn,y)?!0:ne.call(_i,y)?!1:hn.test(y)?Rn[y]=!0:(_i[y]=!0,!1)}function yn(y,b,x){if(yo(b))if(x===null)y.removeAttribute(b);else{switch(typeof x){case"undefined":case"function":case"symbol":y.removeAttribute(b);return;case"boolean":var M=b.toLowerCase().slice(0,5);if(M!=="data-"&&M!=="aria-"){y.removeAttribute(b);return}}y.setAttribute(b,""+x)}}function Nn(y,b,x){if(x===null)y.removeAttribute(b);else{switch(typeof x){case"undefined":case"function":case"symbol":case"boolean":y.removeAttribute(b);return}y.setAttribute(b,""+x)}}function $r(y,b,x,M){if(M===null)y.removeAttribute(x);else{switch(typeof M){case"undefined":case"function":case"symbol":case"boolean":y.removeAttribute(x);return}y.setAttributeNS(b,x,""+M)}}function mn(y){switch(typeof y){case"bigint":case"boolean":case"number":case"string":case"undefined":return y;case"object":return y;default:return""}}function bn(y){var b=y.type;return(y=y.nodeName)&&y.toLowerCase()==="input"&&(b==="checkbox"||b==="radio")}function Il(y,b,x){var M=Object.getOwnPropertyDescriptor(y.constructor.prototype,b);if(!y.hasOwnProperty(b)&&typeof M<"u"&&typeof M.get=="function"&&typeof M.set=="function"){var U=M.get,z=M.set;return Object.defineProperty(y,b,{configurable:!0,get:function(){return U.call(this)},set:function(ie){x=""+ie,z.call(this,ie)}}),Object.defineProperty(y,b,{enumerable:M.enumerable}),{getValue:function(){return x},setValue:function(ie){x=""+ie},stopTracking:function(){y._valueTracker=null,delete y[b]}}}}function Dl(y){if(!y._valueTracker){var b=bn(y)?"checked":"value";y._valueTracker=Il(y,b,""+y[b])}}function zi(y){if(!y)return!1;var b=y._valueTracker;if(!b)return!0;var x=b.getValue(),M="";return y&&(M=bn(y)?y.checked?"true":"false":y.value),y=M,y!==x?(b.setValue(y),!0):!1}function nn(y){if(y=y||(typeof document<"u"?document:void 0),typeof y>"u")return null;try{return y.activeElement||y.body}catch{return y.body}}var P1=/[\n"\\]/g;function Ia(y){return y.replace(P1,function(b){return"\\"+b.charCodeAt(0).toString(16)+" "})}function Gi(y,b,x,M,U,z,ie,_e){y.name="",ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"?y.type=ie:y.removeAttribute("type"),b!=null?ie==="number"?(b===0&&y.value===""||y.value!=b)&&(y.value=""+mn(b)):y.value!==""+mn(b)&&(y.value=""+mn(b)):ie!=="submit"&&ie!=="reset"||y.removeAttribute("value"),b!=null?dc(y,ie,mn(b)):x!=null?dc(y,ie,mn(x)):M!=null&&y.removeAttribute("value"),U==null&&z!=null&&(y.defaultChecked=!!z),U!=null&&(y.checked=U&&typeof U!="function"&&typeof U!="symbol"),_e!=null&&typeof _e!="function"&&typeof _e!="symbol"&&typeof _e!="boolean"?y.name=""+mn(_e):y.removeAttribute("name")}function j1(y,b,x,M,U,z,ie,_e){if(z!=null&&typeof z!="function"&&typeof z!="symbol"&&typeof z!="boolean"&&(y.type=z),b!=null||x!=null){if(!(z!=="submit"&&z!=="reset"||b!=null)){Dl(y);return}x=x!=null?""+mn(x):"",b=b!=null?""+mn(b):x,_e||b===y.value||(y.value=b),y.defaultValue=b}M=M??U,M=typeof M!="function"&&typeof M!="symbol"&&!!M,y.checked=_e?y.checked:!!M,y.defaultChecked=!!M,ie!=null&&typeof ie!="function"&&typeof ie!="symbol"&&typeof ie!="boolean"&&(y.name=ie),Dl(y)}function dc(y,b,x){b==="number"&&nn(y.ownerDocument)===y||y.defaultValue===""+x||(y.defaultValue=""+x)}function xu(y,b,x,M){if(y=y.options,b){b={};for(var U=0;U<x.length;U++)b["$"+x[U]]=!0;for(x=0;x<y.length;x++)U=b.hasOwnProperty("$"+y[x].value),y[x].selected!==U&&(y[x].selected=U),U&&M&&(y[x].defaultSelected=!0)}else{for(x=""+mn(x),b=null,U=0;U<y.length;U++){if(y[U].value===x){y[U].selected=!0,M&&(y[U].defaultSelected=!0);return}b!==null||y[U].disabled||(b=y[U])}b!==null&&(b.selected=!0)}}function M1(y,b,x){if(b!=null&&(b=""+mn(b),b!==y.value&&(y.value=b),x==null)){y.defaultValue!==b&&(y.defaultValue=b);return}y.defaultValue=x!=null?""+mn(x):""}function Ru(y,b,x,M){if(b==null){if(M!=null){if(x!=null)throw Error(n(92));if(H(M)){if(1<M.length)throw Error(n(93));M=M[0]}x=M}x==null&&(x=""),b=x}x=mn(b),y.defaultValue=x,M=y.textContent,M===x&&M!==""&&M!==null&&(y.value=M),Dl(y)}function rs(y,b){if(b){var x=y.firstChild;if(x&&x===y.lastChild&&x.nodeType===3){x.nodeValue=b;return}}y.textContent=b}var C1=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function mo(y,b,x){var M=b.indexOf("--")===0;x==null||typeof x=="boolean"||x===""?M?y.setProperty(b,""):b==="float"?y.cssFloat="":y[b]="":M?y.setProperty(b,x):typeof x!="number"||x===0||C1.has(b)?b==="float"?y.cssFloat=x:y[b]=(""+x).trim():y[b]=x+"px"}function Fl(y,b,x){if(b!=null&&typeof b!="object")throw Error(n(62));if(y=y.style,x!=null){for(var M in x)!x.hasOwnProperty(M)||b!=null&&b.hasOwnProperty(M)||(M.indexOf("--")===0?y.setProperty(M,""):M==="float"?y.cssFloat="":y[M]="");for(var U in b)M=b[U],b.hasOwnProperty(U)&&x[U]!==M&&mo(y,U,M)}else for(var z in b)b.hasOwnProperty(z)&&mo(y,z,b[z])}function fc(y){if(y.indexOf("-")===-1)return!1;switch(y){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vN=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ns=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function as(y){return ns.test(""+y)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":y}function $i(){}var Pl=null;function is(y){return y=y.target||y.srcElement||window,y.correspondingUseElement&&(y=y.correspondingUseElement),y.nodeType===3?y.parentNode:y}var Xi=null,us=null;function L1(y){var b=Tr(y);if(b&&(y=b.stateNode)){var x=y[gt]||null;e:switch(y=b.stateNode,b.type){case"input":if(Gi(y,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name),b=x.name,x.type==="radio"&&b!=null){for(x=y;x.parentNode;)x=x.parentNode;for(x=x.querySelectorAll('input[name="'+Ia(""+b)+'"][type="radio"]'),b=0;b<x.length;b++){var M=x[b];if(M!==y&&M.form===y.form){var U=M[gt]||null;if(!U)throw Error(n(90));Gi(M,U.value,U.defaultValue,U.defaultValue,U.checked,U.defaultChecked,U.type,U.name)}}for(b=0;b<x.length;b++)M=x[b],M.form===y.form&&zi(M)}break e;case"textarea":M1(y,x.value,x.defaultValue);break e;case"select":b=x.value,b!=null&&xu(y,!!x.multiple,b,!1)}}}var Rb=!1;function jl(y,b,x){if(Rb)return y(b,x);Rb=!0;try{var M=y(b);return M}finally{if(Rb=!1,(Xi!==null||us!==null)&&(yI(),Xi&&(b=Xi,y=us,us=Xi=null,L1(b),y)))for(b=0;b<y.length;b++)L1(y[b])}}function Ti(y,b){var x=y.stateNode;if(x===null)return null;var M=x[gt]||null;if(M===null)return null;x=M[b];e:switch(b){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(M=!M.disabled)||(y=y.type,M=!(y==="button"||y==="input"||y==="select"||y==="textarea")),y=!M;break e;default:y=!1}if(y)return null;if(x&&typeof x!="function")throw Error(n(231,b,typeof x));return x}var Ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Nb=!1;if(Ki)try{var os={};Object.defineProperty(os,"passive",{get:function(){Nb=!0}}),window.addEventListener("test",os,os),window.removeEventListener("test",os,os)}catch{Nb=!1}var Nu=null,bo=null,Ml=null;function Ji(){if(Ml)return Ml;var y,b=bo,x=b.length,M,U="value"in Nu?Nu.value:Nu.textContent,z=U.length;for(y=0;y<x&&b[y]===U[y];y++);var ie=x-y;for(M=1;M<=ie&&b[x-M]===U[z-M];M++);return Ml=U.slice(y,1<M?1-M:void 0)}function Cl(y){var b=y.keyCode;return"charCode"in y?(y=y.charCode,y===0&&b===13&&(y=13)):y=b,y===10&&(y=13),32<=y||y===13?y:0}function ni(){return!0}function ss(){return!1}function Kn(y){function b(x,M,U,z,ie){this._reactName=x,this._targetInst=U,this.type=M,this.nativeEvent=z,this.target=ie,this.currentTarget=null;for(var _e in y)y.hasOwnProperty(_e)&&(x=y[_e],this[_e]=x?x(z):z[_e]);return this.isDefaultPrevented=(z.defaultPrevented!=null?z.defaultPrevented:z.returnValue===!1)?ni:ss,this.isPropagationStopped=ss,this}return d(b.prototype,{preventDefault:function(){this.defaultPrevented=!0;var x=this.nativeEvent;x&&(x.preventDefault?x.preventDefault():typeof x.returnValue!="unknown"&&(x.returnValue=!1),this.isDefaultPrevented=ni)},stopPropagation:function(){var x=this.nativeEvent;x&&(x.stopPropagation?x.stopPropagation():typeof x.cancelBubble!="unknown"&&(x.cancelBubble=!0),this.isPropagationStopped=ni)},persist:function(){},isPersistent:ni}),b}var pa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(y){return y.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ll=Kn(pa),go=d({},pa,{view:0,detail:0}),_N=Kn(go),Ib,ql,vo,cs=d({},go,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:an,button:0,buttons:0,relatedTarget:function(y){return y.relatedTarget===void 0?y.fromElement===y.srcElement?y.toElement:y.fromElement:y.relatedTarget},movementX:function(y){return"movementX"in y?y.movementX:(y!==vo&&(vo&&y.type==="mousemove"?(Ib=y.screenX-vo.screenX,ql=y.screenY-vo.screenY):ql=Ib=0,vo=y),Ib)},movementY:function(y){return"movementY"in y?y.movementY:ql}}),TN=Kn(cs),ZP=d({},cs,{dataTransfer:0}),e8=Kn(ZP),wN=d({},go,{relatedTarget:0}),pc=Kn(wN),SN=d({},pa,{animationName:0,elapsedTime:0,pseudoElement:0}),EN=Kn(SN),AN=d({},pa,{clipboardData:function(y){return"clipboardData"in y?y.clipboardData:window.clipboardData}}),t8=Kn(AN),ls=d({},pa,{data:0}),q1=Kn(ls),ON={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ha={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ds={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function hc(y){var b=this.nativeEvent;return b.getModifierState?b.getModifierState(y):(y=ds[y])?!!b[y]:!1}function an(){return hc}var Wi=d({},go,{key:function(y){if(y.key){var b=ON[y.key]||y.key;if(b!=="Unidentified")return b}return y.type==="keypress"?(y=Cl(y),y===13?"Enter":String.fromCharCode(y)):y.type==="keydown"||y.type==="keyup"?ha[y.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:an,charCode:function(y){return y.type==="keypress"?Cl(y):0},keyCode:function(y){return y.type==="keydown"||y.type==="keyup"?y.keyCode:0},which:function(y){return y.type==="keypress"?Cl(y):y.type==="keydown"||y.type==="keyup"?y.keyCode:0}}),Bl=Kn(Wi),B1=d({},cs,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ln=Kn(B1),yc=d({},go,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:an}),mc=Kn(yc),U1=d({},pa,{propertyName:0,elapsedTime:0,pseudoElement:0}),fs=Kn(U1),bc=d({},cs,{deltaX:function(y){return"deltaX"in y?y.deltaX:"wheelDeltaX"in y?-y.wheelDeltaX:0},deltaY:function(y){return"deltaY"in y?y.deltaY:"wheelDeltaY"in y?-y.wheelDeltaY:"wheelDelta"in y?-y.wheelDelta:0},deltaZ:0,deltaMode:0}),Q1=Kn(bc),Yi=d({},pa,{newState:0,oldState:0}),r8=Kn(Yi),V1=[9,13,27,32],wi=Ki&&"CompositionEvent"in window,Iu=null;Ki&&"documentMode"in document&&(Iu=document.documentMode);var xN=Ki&&"TextEvent"in window&&!Iu,RN=Ki&&(!wi||Iu&&8<Iu&&11>=Iu),NN=" ",IN=!1;function Db(y,b){switch(y){case"keyup":return V1.indexOf(b.keyCode)!==-1;case"keydown":return b.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function H1(y){return y=y.detail,typeof y=="object"&&"data"in y?y.data:null}var gc=!1;function n8(y,b){switch(y){case"compositionend":return H1(b);case"keypress":return b.which!==32?null:(IN=!0,NN);case"textInput":return y=b.data,y===NN&&IN?null:y;default:return null}}function k1(y,b){if(gc)return y==="compositionend"||!wi&&Db(y,b)?(y=Ji(),Ml=bo=Nu=null,gc=!1,y):null;switch(y){case"paste":return null;case"keypress":if(!(b.ctrlKey||b.altKey||b.metaKey)||b.ctrlKey&&b.altKey){if(b.char&&1<b.char.length)return b.char;if(b.which)return String.fromCharCode(b.which)}return null;case"compositionend":return RN&&b.locale!=="ko"?null:b.data;default:return null}}var vc={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Fb(y){var b=y&&y.nodeName&&y.nodeName.toLowerCase();return b==="input"?!!vc[y.type]:b==="textarea"}function DN(y,b,x,M){Xi?us?us.push(M):us=[M]:Xi=M,b=wI(b,"onChange"),0<b.length&&(x=new Ll("onChange","change",null,x,M),y.push({event:x,listeners:b}))}var ps=null,hs=null;function FN(y){xG(y,0)}function Pb(y){var b=pr(y);if(zi(b))return y}function _c(y,b){if(y==="change")return b}var z1=!1;if(Ki){var Ul;if(Ki){var jb="oninput"in document;if(!jb){var Mb=document.createElement("div");Mb.setAttribute("oninput","return;"),jb=typeof Mb.oninput=="function"}Ul=jb}else Ul=!1;z1=Ul&&(!document.documentMode||9<document.documentMode)}function PN(){ps&&(ps.detachEvent("onpropertychange",Xt),hs=ps=null)}function Xt(y){if(y.propertyName==="value"&&Pb(hs)){var b=[];DN(b,hs,y,is(y)),jl(FN,b)}}function ot(y,b,x){y==="focusin"?(PN(),ps=b,hs=x,ps.attachEvent("onpropertychange",Xt)):y==="focusout"&&PN()}function nt(y){if(y==="selectionchange"||y==="keyup"||y==="keydown")return Pb(hs)}function dt(y,b){if(y==="click")return Pb(b)}function _t(y,b){if(y==="input"||y==="change")return Pb(b)}function Pt(y,b){return y===b&&(y!==0||1/y===1/b)||y!==y&&b!==b}var Nt=typeof Object.is=="function"?Object.is:Pt;function me(y,b){if(Nt(y,b))return!0;if(typeof y!="object"||y===null||typeof b!="object"||b===null)return!1;var x=Object.keys(y),M=Object.keys(b);if(x.length!==M.length)return!1;for(M=0;M<x.length;M++){var U=x[M];if(!ne.call(b,U)||!Nt(y[U],b[U]))return!1}return!0}function Da(y){for(;y&&y.firstChild;)y=y.firstChild;return y}function we(y,b){var x=Da(y);y=0;for(var M;x;){if(x.nodeType===3){if(M=y+x.textContent.length,y<=b&&M>=b)return{node:x,offset:b-y};y=M}e:{for(;x;){if(x.nextSibling){x=x.nextSibling;break e}x=x.parentNode}x=void 0}x=Da(x)}}function Du(y,b){return y&&b?y===b?!0:y&&y.nodeType===3?!1:b&&b.nodeType===3?Du(y,b.parentNode):"contains"in y?y.contains(b):y.compareDocumentPosition?!!(y.compareDocumentPosition(b)&16):!1:!1}function Ql(y){y=y!=null&&y.ownerDocument!=null&&y.ownerDocument.defaultView!=null?y.ownerDocument.defaultView:window;for(var b=nn(y.document);b instanceof y.HTMLIFrameElement;){try{var x=typeof b.contentWindow.location.href=="string"}catch{x=!1}if(x)y=b.contentWindow;else break;b=nn(y.document)}return b}function Tc(y){var b=y&&y.nodeName&&y.nodeName.toLowerCase();return b&&(b==="input"&&(y.type==="text"||y.type==="search"||y.type==="tel"||y.type==="url"||y.type==="password")||b==="textarea"||y.contentEditable==="true")}var Cb=Ki&&"documentMode"in document&&11>=document.documentMode,Qr=null,ai=null,Si=null,_o=!1;function Lb(y,b,x){var M=x.window===x?x.document:x.nodeType===9?x:x.ownerDocument;_o||Qr==null||Qr!==nn(M)||(M=Qr,"selectionStart"in M&&Tc(M)?M={start:M.selectionStart,end:M.selectionEnd}:(M=(M.ownerDocument&&M.ownerDocument.defaultView||window).getSelection(),M={anchorNode:M.anchorNode,anchorOffset:M.anchorOffset,focusNode:M.focusNode,focusOffset:M.focusOffset}),Si&&me(Si,M)||(Si=M,M=wI(ai,"onSelect"),0<M.length&&(b=new Ll("onSelect","select",null,b,x),y.push({event:b,listeners:M}),b.target=Qr)))}function Zi(y,b){var x={};return x[y.toLowerCase()]=b.toLowerCase(),x["Webkit"+y]="webkit"+b,x["Moz"+y]="moz"+b,x}var Ht={animationend:Zi("Animation","AnimationEnd"),animationiteration:Zi("Animation","AnimationIteration"),animationstart:Zi("Animation","AnimationStart"),transitionrun:Zi("Transition","TransitionRun"),transitionstart:Zi("Transition","TransitionStart"),transitioncancel:Zi("Transition","TransitionCancel"),transitionend:Zi("Transition","TransitionEnd")},yr={},kt={};Ki&&(kt=document.createElement("div").style,"AnimationEvent"in window||(delete Ht.animationend.animation,delete Ht.animationiteration.animation,delete Ht.animationstart.animation),"TransitionEvent"in window||delete Ht.transitionend.transition);function un(y){if(yr[y])return yr[y];if(!Ht[y])return y;var b=Ht[y],x;for(x in b)if(b.hasOwnProperty(x)&&x in kt)return yr[y]=b[x];return y}var qn=un("animationend"),Vl=un("animationiteration"),eu=un("animationstart"),jN=un("transitionrun"),qb=un("transitionstart"),G1=un("transitioncancel"),ys=un("transitionend"),ok=new Map,a8="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");a8.push("scrollEnd");function Fu(y,b){ok.set(y,b),Or(b,[y])}var MN=typeof reportError=="function"?reportError:function(y){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var b=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof y=="object"&&y!==null&&typeof y.message=="string"?String(y.message):String(y),error:y});if(!window.dispatchEvent(b))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",y);return}console.error(y)},tu=[],Bb=0,i8=0;function CN(){for(var y=Bb,b=i8=Bb=0;b<y;){var x=tu[b];tu[b++]=null;var M=tu[b];tu[b++]=null;var U=tu[b];tu[b++]=null;var z=tu[b];if(tu[b++]=null,M!==null&&U!==null){var ie=M.pending;ie===null?U.next=U:(U.next=ie.next,ie.next=U),M.pending=U}z!==0&&sk(x,U,z)}}function LN(y,b,x,M){tu[Bb++]=y,tu[Bb++]=b,tu[Bb++]=x,tu[Bb++]=M,i8|=M,y.lanes|=M,y=y.alternate,y!==null&&(y.lanes|=M)}function u8(y,b,x,M){return LN(y,b,x,M),qN(y)}function Hl(y,b){return LN(y,null,null,b),qN(y)}function sk(y,b,x){y.lanes|=x;var M=y.alternate;M!==null&&(M.lanes|=x);for(var U=!1,z=y.return;z!==null;)z.childLanes|=x,M=z.alternate,M!==null&&(M.childLanes|=x),z.tag===22&&(y=z.stateNode,y===null||y._visibility&1||(U=!0)),y=z,z=z.return;return y.tag===3?(z=y.stateNode,U&&b!==null&&(U=31-Pe(x),y=z.hiddenUpdates,M=y[U],M===null?y[U]=[b]:M.push(b),b.lane=x|536870912),z):null}function qN(y){if(50<hv)throw hv=0,y5=null,Error(n(185));for(var b=y.return;b!==null;)y=b,b=y.return;return y.tag===3?y.stateNode:null}var Ub={};function wEe(y,b,x,M){this.tag=y,this.key=x,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=b,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=M,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ei(y,b,x,M){return new wEe(y,b,x,M)}function o8(y){return y=y.prototype,!(!y||!y.isReactComponent)}function ms(y,b){var x=y.alternate;return x===null?(x=Ei(y.tag,b,y.key,y.mode),x.elementType=y.elementType,x.type=y.type,x.stateNode=y.stateNode,x.alternate=y,y.alternate=x):(x.pendingProps=b,x.type=y.type,x.flags=0,x.subtreeFlags=0,x.deletions=null),x.flags=y.flags&65011712,x.childLanes=y.childLanes,x.lanes=y.lanes,x.child=y.child,x.memoizedProps=y.memoizedProps,x.memoizedState=y.memoizedState,x.updateQueue=y.updateQueue,b=y.dependencies,x.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext},x.sibling=y.sibling,x.index=y.index,x.ref=y.ref,x.refCleanup=y.refCleanup,x}function ck(y,b){y.flags&=65011714;var x=y.alternate;return x===null?(y.childLanes=0,y.lanes=b,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=x.childLanes,y.lanes=x.lanes,y.child=x.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=x.memoizedProps,y.memoizedState=x.memoizedState,y.updateQueue=x.updateQueue,y.type=x.type,b=x.dependencies,y.dependencies=b===null?null:{lanes:b.lanes,firstContext:b.firstContext}),y}function BN(y,b,x,M,U,z){var ie=0;if(M=y,typeof y=="function")o8(y)&&(ie=1);else if(typeof y=="string")ie=xAe(y,x,le.current)?26:y==="html"||y==="head"||y==="body"?27:5;else e:switch(y){case O:return y=Ei(31,x,b,U),y.elementType=O,y.lanes=z,y;case g:return kl(x.children,U,z,b);case v:ie=8,U|=24;break;case m:return y=Ei(12,x,b,U|2),y.elementType=m,y.lanes=z,y;case S:return y=Ei(13,x,b,U),y.elementType=S,y.lanes=z,y;case N:return y=Ei(19,x,b,U),y.elementType=N,y.lanes=z,y;default:if(typeof y=="object"&&y!==null)switch(y.$$typeof){case w:ie=10;break e;case T:ie=9;break e;case E:ie=11;break e;case j:ie=14;break e;case q:ie=16,M=null;break e}ie=29,x=Error(n(130,y===null?"null":typeof y,"")),M=null}return b=Ei(ie,x,b,U),b.elementType=y,b.type=M,b.lanes=z,b}function kl(y,b,x,M){return y=Ei(7,y,M,b),y.lanes=x,y}function s8(y,b,x){return y=Ei(6,y,null,b),y.lanes=x,y}function lk(y){var b=Ei(18,null,null,0);return b.stateNode=y,b}function c8(y,b,x){return b=Ei(4,y.children!==null?y.children:[],y.key,b),b.lanes=x,b.stateNode={containerInfo:y.containerInfo,pendingChildren:null,implementation:y.implementation},b}var dk=new WeakMap;function ru(y,b){if(typeof y=="object"&&y!==null){var x=dk.get(y);return x!==void 0?x:(b={value:y,source:b,stack:ue(b)},dk.set(y,b),b)}return{value:y,source:b,stack:ue(b)}}var Qb=[],Vb=0,UN=null,$1=0,nu=[],au=0,wc=null,To=1,wo="";function bs(y,b){Qb[Vb++]=$1,Qb[Vb++]=UN,UN=y,$1=b}function fk(y,b,x){nu[au++]=To,nu[au++]=wo,nu[au++]=wc,wc=y;var M=To;y=wo;var U=32-Pe(M)-1;M&=~(1<<U),x+=1;var z=32-Pe(b)+U;if(30<z){var ie=U-U%5;z=(M&(1<<ie)-1).toString(32),M>>=ie,U-=ie,To=1<<32-Pe(b)+U|x<<U|M,wo=z+y}else To=1<<z|x<<U|M,wo=y}function l8(y){y.return!==null&&(bs(y,1),fk(y,1,0))}function d8(y){for(;y===UN;)UN=Qb[--Vb],Qb[Vb]=null,$1=Qb[--Vb],Qb[Vb]=null;for(;y===wc;)wc=nu[--au],nu[au]=null,wo=nu[--au],nu[au]=null,To=nu[--au],nu[au]=null}function pk(y,b){nu[au++]=To,nu[au++]=wo,nu[au++]=wc,To=b.id,wo=b.overflow,wc=y}var ya=null,on=null,dr=!1,Sc=null,iu=!1,f8=Error(n(519));function Ec(y){var b=Error(n(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw X1(ru(b,y)),f8}function hk(y){var b=y.stateNode,x=y.type,M=y.memoizedProps;switch(b[wt]=y,b[gt]=M,x){case"dialog":rr("cancel",b),rr("close",b);break;case"iframe":case"object":case"embed":rr("load",b);break;case"video":case"audio":for(x=0;x<mv.length;x++)rr(mv[x],b);break;case"source":rr("error",b);break;case"img":case"image":case"link":rr("error",b),rr("load",b);break;case"details":rr("toggle",b);break;case"input":rr("invalid",b),j1(b,M.value,M.defaultValue,M.checked,M.defaultChecked,M.type,M.name,!0);break;case"select":rr("invalid",b);break;case"textarea":rr("invalid",b),Ru(b,M.value,M.defaultValue,M.children)}x=M.children,typeof x!="string"&&typeof x!="number"&&typeof x!="bigint"||b.textContent===""+x||M.suppressHydrationWarning===!0||DG(b.textContent,x)?(M.popover!=null&&(rr("beforetoggle",b),rr("toggle",b)),M.onScroll!=null&&rr("scroll",b),M.onScrollEnd!=null&&rr("scrollend",b),M.onClick!=null&&(b.onclick=$i),b=!0):b=!1,b||Ec(y,!0)}function yk(y){for(ya=y.return;ya;)switch(ya.tag){case 5:case 31:case 13:iu=!1;return;case 27:case 3:iu=!0;return;default:ya=ya.return}}function Hb(y){if(y!==ya)return!1;if(!dr)return yk(y),dr=!0,!1;var b=y.tag,x;if((x=b!==3&&b!==27)&&((x=b===5)&&(x=y.type,x=!(x!=="form"&&x!=="button")||I5(y.type,y.memoizedProps)),x=!x),x&&on&&Ec(y),yk(y),b===13){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));on=UG(y)}else if(b===31){if(y=y.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(317));on=UG(y)}else b===27?(b=on,qc(y.type)?(y=M5,M5=null,on=y):on=b):on=ya?ou(y.stateNode.nextSibling):null;return!0}function zl(){on=ya=null,dr=!1}function p8(){var y=Sc;return y!==null&&(si===null?si=y:si.push.apply(si,y),Sc=null),y}function X1(y){Sc===null?Sc=[y]:Sc.push(y)}var h8=te(null),Gl=null,gs=null;function Ac(y,b,x){pe(h8,b._currentValue),b._currentValue=x}function vs(y){y._currentValue=h8.current,se(h8)}function y8(y,b,x){for(;y!==null;){var M=y.alternate;if((y.childLanes&b)!==b?(y.childLanes|=b,M!==null&&(M.childLanes|=b)):M!==null&&(M.childLanes&b)!==b&&(M.childLanes|=b),y===x)break;y=y.return}}function m8(y,b,x,M){var U=y.child;for(U!==null&&(U.return=y);U!==null;){var z=U.dependencies;if(z!==null){var ie=U.child;z=z.firstContext;e:for(;z!==null;){var _e=z;z=U;for(var Be=0;Be<b.length;Be++)if(_e.context===b[Be]){z.lanes|=x,_e=z.alternate,_e!==null&&(_e.lanes|=x),y8(z.return,x,y),M||(ie=null);break e}z=_e.next}}else if(U.tag===18){if(ie=U.return,ie===null)throw Error(n(341));ie.lanes|=x,z=ie.alternate,z!==null&&(z.lanes|=x),y8(ie,x,y),ie=null}else ie=U.child;if(ie!==null)ie.return=U;else for(ie=U;ie!==null;){if(ie===y){ie=null;break}if(U=ie.sibling,U!==null){U.return=ie.return,ie=U;break}ie=ie.return}U=ie}}function kb(y,b,x,M){y=null;for(var U=b,z=!1;U!==null;){if(!z){if((U.flags&524288)!==0)z=!0;else if((U.flags&262144)!==0)break}if(U.tag===10){var ie=U.alternate;if(ie===null)throw Error(n(387));if(ie=ie.memoizedProps,ie!==null){var _e=U.type;Nt(U.pendingProps.value,ie.value)||(y!==null?y.push(_e):y=[_e])}}else if(U===Ie.current){if(ie=U.alternate,ie===null)throw Error(n(387));ie.memoizedState.memoizedState!==U.memoizedState.memoizedState&&(y!==null?y.push(Tv):y=[Tv])}U=U.return}y!==null&&m8(b,y,x,M),b.flags|=262144}function QN(y){for(y=y.firstContext;y!==null;){if(!Nt(y.context._currentValue,y.memoizedValue))return!0;y=y.next}return!1}function $l(y){Gl=y,gs=null,y=y.dependencies,y!==null&&(y.firstContext=null)}function ma(y){return mk(Gl,y)}function VN(y,b){return Gl===null&&$l(y),mk(y,b)}function mk(y,b){var x=b._currentValue;if(b={context:b,memoizedValue:x,next:null},gs===null){if(y===null)throw Error(n(308));gs=b,y.dependencies={lanes:0,firstContext:b},y.flags|=524288}else gs=gs.next=b;return x}var SEe=typeof AbortController<"u"?AbortController:function(){var y=[],b=this.signal={aborted:!1,addEventListener:function(x,M){y.push(M)}};this.abort=function(){b.aborted=!0,y.forEach(function(x){return x()})}},EEe=a.unstable_scheduleCallback,AEe=a.unstable_NormalPriority,Bn={$$typeof:w,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function b8(){return{controller:new SEe,data:new Map,refCount:0}}function K1(y){y.refCount--,y.refCount===0&&EEe(AEe,function(){y.controller.abort()})}var J1=null,g8=0,zb=0,Gb=null;function OEe(y,b){if(J1===null){var x=J1=[];g8=0,zb=T5(),Gb={status:"pending",value:void 0,then:function(M){x.push(M)}}}return g8++,b.then(bk,bk),b}function bk(){if(--g8===0&&J1!==null){Gb!==null&&(Gb.status="fulfilled");var y=J1;J1=null,zb=0,Gb=null;for(var b=0;b<y.length;b++)(0,y[b])()}}function xEe(y,b){var x=[],M={status:"pending",value:null,reason:null,then:function(U){x.push(U)}};return y.then(function(){M.status="fulfilled",M.value=b;for(var U=0;U<x.length;U++)(0,x[U])(b)},function(U){for(M.status="rejected",M.reason=U,U=0;U<x.length;U++)(0,x[U])(void 0)}),M}var gk=V.S;V.S=function(y,b){tG=Ve(),typeof b=="object"&&b!==null&&typeof b.then=="function"&&OEe(y,b),gk!==null&&gk(y,b)};var Xl=te(null);function v8(){var y=Xl.current;return y!==null?y:Xr.pooledCache}function HN(y,b){b===null?pe(Xl,Xl.current):pe(Xl,b.pool)}function vk(){var y=v8();return y===null?null:{parent:Bn._currentValue,pool:y}}var $b=Error(n(460)),_8=Error(n(474)),kN=Error(n(542)),zN={then:function(){}};function _k(y){return y=y.status,y==="fulfilled"||y==="rejected"}function Tk(y,b,x){switch(x=y[x],x===void 0?y.push(b):x!==b&&(b.then($i,$i),b=x),b.status){case"fulfilled":return b.value;case"rejected":throw y=b.reason,Sk(y),y;default:if(typeof b.status=="string")b.then($i,$i);else{if(y=Xr,y!==null&&100<y.shellSuspendCounter)throw Error(n(482));y=b,y.status="pending",y.then(function(M){if(b.status==="pending"){var U=b;U.status="fulfilled",U.value=M}},function(M){if(b.status==="pending"){var U=b;U.status="rejected",U.reason=M}})}switch(b.status){case"fulfilled":return b.value;case"rejected":throw y=b.reason,Sk(y),y}throw Jl=b,$b}}function Kl(y){try{var b=y._init;return b(y._payload)}catch(x){throw x!==null&&typeof x=="object"&&typeof x.then=="function"?(Jl=x,$b):x}}var Jl=null;function wk(){if(Jl===null)throw Error(n(459));var y=Jl;return Jl=null,y}function Sk(y){if(y===$b||y===kN)throw Error(n(483))}var Xb=null,W1=0;function GN(y){var b=W1;return W1+=1,Xb===null&&(Xb=[]),Tk(Xb,y,b)}function Y1(y,b){b=b.props.ref,y.ref=b!==void 0?b:null}function $N(y,b){throw b.$$typeof===f?Error(n(525)):(y=Object.prototype.toString.call(b),Error(n(31,y==="[object Object]"?"object with keys {"+Object.keys(b).join(", ")+"}":y)))}function Ek(y){function b(Xe,He){if(y){var Ze=Xe.deletions;Ze===null?(Xe.deletions=[He],Xe.flags|=16):Ze.push(He)}}function x(Xe,He){if(!y)return null;for(;He!==null;)b(Xe,He),He=He.sibling;return null}function M(Xe){for(var He=new Map;Xe!==null;)Xe.key!==null?He.set(Xe.key,Xe):He.set(Xe.index,Xe),Xe=Xe.sibling;return He}function U(Xe,He){return Xe=ms(Xe,He),Xe.index=0,Xe.sibling=null,Xe}function z(Xe,He,Ze){return Xe.index=Ze,y?(Ze=Xe.alternate,Ze!==null?(Ze=Ze.index,Ze<He?(Xe.flags|=67108866,He):Ze):(Xe.flags|=67108866,He)):(Xe.flags|=1048576,He)}function ie(Xe){return y&&Xe.alternate===null&&(Xe.flags|=67108866),Xe}function _e(Xe,He,Ze,ft){return He===null||He.tag!==6?(He=s8(Ze,Xe.mode,ft),He.return=Xe,He):(He=U(He,Ze),He.return=Xe,He)}function Be(Xe,He,Ze,ft){var Ct=Ze.type;return Ct===g?ct(Xe,He,Ze.props.children,ft,Ze.key):He!==null&&(He.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===q&&Kl(Ct)===He.type)?(He=U(He,Ze.props),Y1(He,Ze),He.return=Xe,He):(He=BN(Ze.type,Ze.key,Ze.props,null,Xe.mode,ft),Y1(He,Ze),He.return=Xe,He)}function et(Xe,He,Ze,ft){return He===null||He.tag!==4||He.stateNode.containerInfo!==Ze.containerInfo||He.stateNode.implementation!==Ze.implementation?(He=c8(Ze,Xe.mode,ft),He.return=Xe,He):(He=U(He,Ze.children||[]),He.return=Xe,He)}function ct(Xe,He,Ze,ft,Ct){return He===null||He.tag!==7?(He=kl(Ze,Xe.mode,ft,Ct),He.return=Xe,He):(He=U(He,Ze),He.return=Xe,He)}function mt(Xe,He,Ze){if(typeof He=="string"&&He!==""||typeof He=="number"||typeof He=="bigint")return He=s8(""+He,Xe.mode,Ze),He.return=Xe,He;if(typeof He=="object"&&He!==null){switch(He.$$typeof){case p:return Ze=BN(He.type,He.key,He.props,null,Xe.mode,Ze),Y1(Ze,He),Ze.return=Xe,Ze;case h:return He=c8(He,Xe.mode,Ze),He.return=Xe,He;case q:return He=Kl(He),mt(Xe,He,Ze)}if(H(He)||P(He))return He=kl(He,Xe.mode,Ze,null),He.return=Xe,He;if(typeof He.then=="function")return mt(Xe,GN(He),Ze);if(He.$$typeof===w)return mt(Xe,VN(Xe,He),Ze);$N(Xe,He)}return null}function rt(Xe,He,Ze,ft){var Ct=He!==null?He.key:null;if(typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint")return Ct!==null?null:_e(Xe,He,""+Ze,ft);if(typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case p:return Ze.key===Ct?Be(Xe,He,Ze,ft):null;case h:return Ze.key===Ct?et(Xe,He,Ze,ft):null;case q:return Ze=Kl(Ze),rt(Xe,He,Ze,ft)}if(H(Ze)||P(Ze))return Ct!==null?null:ct(Xe,He,Ze,ft,null);if(typeof Ze.then=="function")return rt(Xe,He,GN(Ze),ft);if(Ze.$$typeof===w)return rt(Xe,He,VN(Xe,Ze),ft);$N(Xe,Ze)}return null}function ut(Xe,He,Ze,ft,Ct){if(typeof ft=="string"&&ft!==""||typeof ft=="number"||typeof ft=="bigint")return Xe=Xe.get(Ze)||null,_e(He,Xe,""+ft,Ct);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case p:return Xe=Xe.get(ft.key===null?Ze:ft.key)||null,Be(He,Xe,ft,Ct);case h:return Xe=Xe.get(ft.key===null?Ze:ft.key)||null,et(He,Xe,ft,Ct);case q:return ft=Kl(ft),ut(Xe,He,Ze,ft,Ct)}if(H(ft)||P(ft))return Xe=Xe.get(Ze)||null,ct(He,Xe,ft,Ct,null);if(typeof ft.then=="function")return ut(Xe,He,Ze,GN(ft),Ct);if(ft.$$typeof===w)return ut(Xe,He,Ze,VN(He,ft),Ct);$N(He,ft)}return null}function It(Xe,He,Ze,ft){for(var Ct=null,wr=null,Ft=He,Jt=He=0,cr=null;Ft!==null&&Jt<Ze.length;Jt++){Ft.index>Jt?(cr=Ft,Ft=null):cr=Ft.sibling;var Sr=rt(Xe,Ft,Ze[Jt],ft);if(Sr===null){Ft===null&&(Ft=cr);break}y&&Ft&&Sr.alternate===null&&b(Xe,Ft),He=z(Sr,He,Jt),wr===null?Ct=Sr:wr.sibling=Sr,wr=Sr,Ft=cr}if(Jt===Ze.length)return x(Xe,Ft),dr&&bs(Xe,Jt),Ct;if(Ft===null){for(;Jt<Ze.length;Jt++)Ft=mt(Xe,Ze[Jt],ft),Ft!==null&&(He=z(Ft,He,Jt),wr===null?Ct=Ft:wr.sibling=Ft,wr=Ft);return dr&&bs(Xe,Jt),Ct}for(Ft=M(Ft);Jt<Ze.length;Jt++)cr=ut(Ft,Xe,Jt,Ze[Jt],ft),cr!==null&&(y&&cr.alternate!==null&&Ft.delete(cr.key===null?Jt:cr.key),He=z(cr,He,Jt),wr===null?Ct=cr:wr.sibling=cr,wr=cr);return y&&Ft.forEach(function(Hc){return b(Xe,Hc)}),dr&&bs(Xe,Jt),Ct}function Bt(Xe,He,Ze,ft){if(Ze==null)throw Error(n(151));for(var Ct=null,wr=null,Ft=He,Jt=He=0,cr=null,Sr=Ze.next();Ft!==null&&!Sr.done;Jt++,Sr=Ze.next()){Ft.index>Jt?(cr=Ft,Ft=null):cr=Ft.sibling;var Hc=rt(Xe,Ft,Sr.value,ft);if(Hc===null){Ft===null&&(Ft=cr);break}y&&Ft&&Hc.alternate===null&&b(Xe,Ft),He=z(Hc,He,Jt),wr===null?Ct=Hc:wr.sibling=Hc,wr=Hc,Ft=cr}if(Sr.done)return x(Xe,Ft),dr&&bs(Xe,Jt),Ct;if(Ft===null){for(;!Sr.done;Jt++,Sr=Ze.next())Sr=mt(Xe,Sr.value,ft),Sr!==null&&(He=z(Sr,He,Jt),wr===null?Ct=Sr:wr.sibling=Sr,wr=Sr);return dr&&bs(Xe,Jt),Ct}for(Ft=M(Ft);!Sr.done;Jt++,Sr=Ze.next())Sr=ut(Ft,Xe,Jt,Sr.value,ft),Sr!==null&&(y&&Sr.alternate!==null&&Ft.delete(Sr.key===null?Jt:Sr.key),He=z(Sr,He,Jt),wr===null?Ct=Sr:wr.sibling=Sr,wr=Sr);return y&&Ft.forEach(function(qAe){return b(Xe,qAe)}),dr&&bs(Xe,Jt),Ct}function kr(Xe,He,Ze,ft){if(typeof Ze=="object"&&Ze!==null&&Ze.type===g&&Ze.key===null&&(Ze=Ze.props.children),typeof Ze=="object"&&Ze!==null){switch(Ze.$$typeof){case p:e:{for(var Ct=Ze.key;He!==null;){if(He.key===Ct){if(Ct=Ze.type,Ct===g){if(He.tag===7){x(Xe,He.sibling),ft=U(He,Ze.props.children),ft.return=Xe,Xe=ft;break e}}else if(He.elementType===Ct||typeof Ct=="object"&&Ct!==null&&Ct.$$typeof===q&&Kl(Ct)===He.type){x(Xe,He.sibling),ft=U(He,Ze.props),Y1(ft,Ze),ft.return=Xe,Xe=ft;break e}x(Xe,He);break}else b(Xe,He);He=He.sibling}Ze.type===g?(ft=kl(Ze.props.children,Xe.mode,ft,Ze.key),ft.return=Xe,Xe=ft):(ft=BN(Ze.type,Ze.key,Ze.props,null,Xe.mode,ft),Y1(ft,Ze),ft.return=Xe,Xe=ft)}return ie(Xe);case h:e:{for(Ct=Ze.key;He!==null;){if(He.key===Ct)if(He.tag===4&&He.stateNode.containerInfo===Ze.containerInfo&&He.stateNode.implementation===Ze.implementation){x(Xe,He.sibling),ft=U(He,Ze.children||[]),ft.return=Xe,Xe=ft;break e}else{x(Xe,He);break}else b(Xe,He);He=He.sibling}ft=c8(Ze,Xe.mode,ft),ft.return=Xe,Xe=ft}return ie(Xe);case q:return Ze=Kl(Ze),kr(Xe,He,Ze,ft)}if(H(Ze))return It(Xe,He,Ze,ft);if(P(Ze)){if(Ct=P(Ze),typeof Ct!="function")throw Error(n(150));return Ze=Ct.call(Ze),Bt(Xe,He,Ze,ft)}if(typeof Ze.then=="function")return kr(Xe,He,GN(Ze),ft);if(Ze.$$typeof===w)return kr(Xe,He,VN(Xe,Ze),ft);$N(Xe,Ze)}return typeof Ze=="string"&&Ze!==""||typeof Ze=="number"||typeof Ze=="bigint"?(Ze=""+Ze,He!==null&&He.tag===6?(x(Xe,He.sibling),ft=U(He,Ze),ft.return=Xe,Xe=ft):(x(Xe,He),ft=s8(Ze,Xe.mode,ft),ft.return=Xe,Xe=ft),ie(Xe)):x(Xe,He)}return function(Xe,He,Ze,ft){try{W1=0;var Ct=kr(Xe,He,Ze,ft);return Xb=null,Ct}catch(Ft){if(Ft===$b||Ft===kN)throw Ft;var wr=Ei(29,Ft,null,Xe.mode);return wr.lanes=ft,wr.return=Xe,wr}}}var Wl=Ek(!0),Ak=Ek(!1),Oc=!1;function T8(y){y.updateQueue={baseState:y.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function w8(y,b){y=y.updateQueue,b.updateQueue===y&&(b.updateQueue={baseState:y.baseState,firstBaseUpdate:y.firstBaseUpdate,lastBaseUpdate:y.lastBaseUpdate,shared:y.shared,callbacks:null})}function xc(y){return{lane:y,tag:0,payload:null,callback:null,next:null}}function Rc(y,b,x){var M=y.updateQueue;if(M===null)return null;if(M=M.shared,(xr&2)!==0){var U=M.pending;return U===null?b.next=b:(b.next=U.next,U.next=b),M.pending=b,b=qN(y),sk(y,null,x),b}return LN(y,M,b,x),qN(y)}function Z1(y,b,x){if(b=b.updateQueue,b!==null&&(b=b.shared,(x&4194048)!==0)){var M=b.lanes;M&=y.pendingLanes,x|=M,b.lanes=x,st(y,x)}}function S8(y,b){var x=y.updateQueue,M=y.alternate;if(M!==null&&(M=M.updateQueue,x===M)){var U=null,z=null;if(x=x.firstBaseUpdate,x!==null){do{var ie={lane:x.lane,tag:x.tag,payload:x.payload,callback:null,next:null};z===null?U=z=ie:z=z.next=ie,x=x.next}while(x!==null);z===null?U=z=b:z=z.next=b}else U=z=b;x={baseState:M.baseState,firstBaseUpdate:U,lastBaseUpdate:z,shared:M.shared,callbacks:M.callbacks},y.updateQueue=x;return}y=x.lastBaseUpdate,y===null?x.firstBaseUpdate=b:y.next=b,x.lastBaseUpdate=b}var E8=!1;function ev(){if(E8){var y=Gb;if(y!==null)throw y}}function tv(y,b,x,M){E8=!1;var U=y.updateQueue;Oc=!1;var z=U.firstBaseUpdate,ie=U.lastBaseUpdate,_e=U.shared.pending;if(_e!==null){U.shared.pending=null;var Be=_e,et=Be.next;Be.next=null,ie===null?z=et:ie.next=et,ie=Be;var ct=y.alternate;ct!==null&&(ct=ct.updateQueue,_e=ct.lastBaseUpdate,_e!==ie&&(_e===null?ct.firstBaseUpdate=et:_e.next=et,ct.lastBaseUpdate=Be))}if(z!==null){var mt=U.baseState;ie=0,ct=et=Be=null,_e=z;do{var rt=_e.lane&-536870913,ut=rt!==_e.lane;if(ut?(sr&rt)===rt:(M&rt)===rt){rt!==0&&rt===zb&&(E8=!0),ct!==null&&(ct=ct.next={lane:0,tag:_e.tag,payload:_e.payload,callback:null,next:null});e:{var It=y,Bt=_e;rt=b;var kr=x;switch(Bt.tag){case 1:if(It=Bt.payload,typeof It=="function"){mt=It.call(kr,mt,rt);break e}mt=It;break e;case 3:It.flags=It.flags&-65537|128;case 0:if(It=Bt.payload,rt=typeof It=="function"?It.call(kr,mt,rt):It,rt==null)break e;mt=d({},mt,rt);break e;case 2:Oc=!0}}rt=_e.callback,rt!==null&&(y.flags|=64,ut&&(y.flags|=8192),ut=U.callbacks,ut===null?U.callbacks=[rt]:ut.push(rt))}else ut={lane:rt,tag:_e.tag,payload:_e.payload,callback:_e.callback,next:null},ct===null?(et=ct=ut,Be=mt):ct=ct.next=ut,ie|=rt;if(_e=_e.next,_e===null){if(_e=U.shared.pending,_e===null)break;ut=_e,_e=ut.next,ut.next=null,U.lastBaseUpdate=ut,U.shared.pending=null}}while(!0);ct===null&&(Be=mt),U.baseState=Be,U.firstBaseUpdate=et,U.lastBaseUpdate=ct,z===null&&(U.shared.lanes=0),Pc|=ie,y.lanes=ie,y.memoizedState=mt}}function Ok(y,b){if(typeof y!="function")throw Error(n(191,y));y.call(b)}function xk(y,b){var x=y.callbacks;if(x!==null)for(y.callbacks=null,y=0;y<x.length;y++)Ok(x[y],b)}var Kb=te(null),XN=te(0);function Rk(y,b){y=Rs,pe(XN,y),pe(Kb,b),Rs=y|b.baseLanes}function A8(){pe(XN,Rs),pe(Kb,Kb.current)}function O8(){Rs=XN.current,se(Kb),se(XN)}var Ai=te(null),uu=null;function Nc(y){var b=y.alternate;pe(Pn,Pn.current&1),pe(Ai,y),uu===null&&(b===null||Kb.current!==null||b.memoizedState!==null)&&(uu=y)}function x8(y){pe(Pn,Pn.current),pe(Ai,y),uu===null&&(uu=y)}function Nk(y){y.tag===22?(pe(Pn,Pn.current),pe(Ai,y),uu===null&&(uu=y)):Ic()}function Ic(){pe(Pn,Pn.current),pe(Ai,Ai.current)}function Oi(y){se(Ai),uu===y&&(uu=null),se(Pn)}var Pn=te(0);function KN(y){for(var b=y;b!==null;){if(b.tag===13){var x=b.memoizedState;if(x!==null&&(x=x.dehydrated,x===null||P5(x)||j5(x)))return b}else if(b.tag===19&&(b.memoizedProps.revealOrder==="forwards"||b.memoizedProps.revealOrder==="backwards"||b.memoizedProps.revealOrder==="unstable_legacy-backwards"||b.memoizedProps.revealOrder==="together")){if((b.flags&128)!==0)return b}else if(b.child!==null){b.child.return=b,b=b.child;continue}if(b===y)break;for(;b.sibling===null;){if(b.return===null||b.return===y)return null;b=b.return}b.sibling.return=b.return,b=b.sibling}return null}var _s=0,Kt=null,Vr=null,Un=null,JN=!1,Jb=!1,Yl=!1,WN=0,rv=0,Wb=null,REe=0;function In(){throw Error(n(321))}function R8(y,b){if(b===null)return!1;for(var x=0;x<b.length&&x<y.length;x++)if(!Nt(y[x],b[x]))return!1;return!0}function N8(y,b,x,M,U,z){return _s=z,Kt=b,b.memoizedState=null,b.updateQueue=null,b.lanes=0,V.H=y===null||y.memoizedState===null?fz:k8,Yl=!1,z=x(M,U),Yl=!1,Jb&&(z=Dk(b,x,M,U)),Ik(y),z}function Ik(y){V.H=iv;var b=Vr!==null&&Vr.next!==null;if(_s=0,Un=Vr=Kt=null,JN=!1,rv=0,Wb=null,b)throw Error(n(300));y===null||Qn||(y=y.dependencies,y!==null&&QN(y)&&(Qn=!0))}function Dk(y,b,x,M){Kt=y;var U=0;do{if(Jb&&(Wb=null),rv=0,Jb=!1,25<=U)throw Error(n(301));if(U+=1,Un=Vr=null,y.updateQueue!=null){var z=y.updateQueue;z.lastEffect=null,z.events=null,z.stores=null,z.memoCache!=null&&(z.memoCache.index=0)}V.H=pz,z=b(x,M)}while(Jb);return z}function NEe(){var y=V.H,b=y.useState()[0];return b=typeof b.then=="function"?nv(b):b,y=y.useState()[0],(Vr!==null?Vr.memoizedState:null)!==y&&(Kt.flags|=1024),b}function I8(){var y=WN!==0;return WN=0,y}function D8(y,b,x){b.updateQueue=y.updateQueue,b.flags&=-2053,y.lanes&=~x}function F8(y){if(JN){for(y=y.memoizedState;y!==null;){var b=y.queue;b!==null&&(b.pending=null),y=y.next}JN=!1}_s=0,Un=Vr=Kt=null,Jb=!1,rv=WN=0,Wb=null}function Va(){var y={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Un===null?Kt.memoizedState=Un=y:Un=Un.next=y,Un}function jn(){if(Vr===null){var y=Kt.alternate;y=y!==null?y.memoizedState:null}else y=Vr.next;var b=Un===null?Kt.memoizedState:Un.next;if(b!==null)Un=b,Vr=y;else{if(y===null)throw Kt.alternate===null?Error(n(467)):Error(n(310));Vr=y,y={memoizedState:Vr.memoizedState,baseState:Vr.baseState,baseQueue:Vr.baseQueue,queue:Vr.queue,next:null},Un===null?Kt.memoizedState=Un=y:Un=Un.next=y}return Un}function YN(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function nv(y){var b=rv;return rv+=1,Wb===null&&(Wb=[]),y=Tk(Wb,y,b),b=Kt,(Un===null?b.memoizedState:Un.next)===null&&(b=b.alternate,V.H=b===null||b.memoizedState===null?fz:k8),y}function ZN(y){if(y!==null&&typeof y=="object"){if(typeof y.then=="function")return nv(y);if(y.$$typeof===w)return ma(y)}throw Error(n(438,String(y)))}function P8(y){var b=null,x=Kt.updateQueue;if(x!==null&&(b=x.memoCache),b==null){var M=Kt.alternate;M!==null&&(M=M.updateQueue,M!==null&&(M=M.memoCache,M!=null&&(b={data:M.data.map(function(U){return U.slice()}),index:0})))}if(b==null&&(b={data:[],index:0}),x===null&&(x=YN(),Kt.updateQueue=x),x.memoCache=b,x=b.data[b.index],x===void 0)for(x=b.data[b.index]=Array(y),M=0;M<y;M++)x[M]=I;return b.index++,x}function Ts(y,b){return typeof b=="function"?b(y):b}function eI(y){var b=jn();return j8(b,Vr,y)}function j8(y,b,x){var M=y.queue;if(M===null)throw Error(n(311));M.lastRenderedReducer=x;var U=y.baseQueue,z=M.pending;if(z!==null){if(U!==null){var ie=U.next;U.next=z.next,z.next=ie}b.baseQueue=U=z,M.pending=null}if(z=y.baseState,U===null)y.memoizedState=z;else{b=U.next;var _e=ie=null,Be=null,et=b,ct=!1;do{var mt=et.lane&-536870913;if(mt!==et.lane?(sr&mt)===mt:(_s&mt)===mt){var rt=et.revertLane;if(rt===0)Be!==null&&(Be=Be.next={lane:0,revertLane:0,gesture:null,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null}),mt===zb&&(ct=!0);else if((_s&rt)===rt){et=et.next,rt===zb&&(ct=!0);continue}else mt={lane:0,revertLane:et.revertLane,gesture:null,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Be===null?(_e=Be=mt,ie=z):Be=Be.next=mt,Kt.lanes|=rt,Pc|=rt;mt=et.action,Yl&&x(z,mt),z=et.hasEagerState?et.eagerState:x(z,mt)}else rt={lane:mt,revertLane:et.revertLane,gesture:et.gesture,action:et.action,hasEagerState:et.hasEagerState,eagerState:et.eagerState,next:null},Be===null?(_e=Be=rt,ie=z):Be=Be.next=rt,Kt.lanes|=mt,Pc|=mt;et=et.next}while(et!==null&&et!==b);if(Be===null?ie=z:Be.next=_e,!Nt(z,y.memoizedState)&&(Qn=!0,ct&&(x=Gb,x!==null)))throw x;y.memoizedState=z,y.baseState=ie,y.baseQueue=Be,M.lastRenderedState=z}return U===null&&(M.lanes=0),[y.memoizedState,M.dispatch]}function M8(y){var b=jn(),x=b.queue;if(x===null)throw Error(n(311));x.lastRenderedReducer=y;var M=x.dispatch,U=x.pending,z=b.memoizedState;if(U!==null){x.pending=null;var ie=U=U.next;do z=y(z,ie.action),ie=ie.next;while(ie!==U);Nt(z,b.memoizedState)||(Qn=!0),b.memoizedState=z,b.baseQueue===null&&(b.baseState=z),x.lastRenderedState=z}return[z,M]}function Fk(y,b,x){var M=Kt,U=jn(),z=dr;if(z){if(x===void 0)throw Error(n(407));x=x()}else x=b();var ie=!Nt((Vr||U).memoizedState,x);if(ie&&(U.memoizedState=x,Qn=!0),U=U.queue,q8(Mk.bind(null,M,U,y),[y]),U.getSnapshot!==b||ie||Un!==null&&Un.memoizedState.tag&1){if(M.flags|=2048,Yb(9,{destroy:void 0},jk.bind(null,M,U,x,b),null),Xr===null)throw Error(n(349));z||(_s&127)!==0||Pk(M,b,x)}return x}function Pk(y,b,x){y.flags|=16384,y={getSnapshot:b,value:x},b=Kt.updateQueue,b===null?(b=YN(),Kt.updateQueue=b,b.stores=[y]):(x=b.stores,x===null?b.stores=[y]:x.push(y))}function jk(y,b,x,M){b.value=x,b.getSnapshot=M,Ck(b)&&Lk(y)}function Mk(y,b,x){return x(function(){Ck(b)&&Lk(y)})}function Ck(y){var b=y.getSnapshot;y=y.value;try{var x=b();return!Nt(y,x)}catch{return!0}}function Lk(y){var b=Hl(y,2);b!==null&&ci(b,y,2)}function C8(y){var b=Va();if(typeof y=="function"){var x=y;if(y=x(),Yl){Le(!0);try{x()}finally{Le(!1)}}}return b.memoizedState=b.baseState=y,b.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:y},b}function qk(y,b,x,M){return y.baseState=x,j8(y,Vr,typeof M=="function"?M:Ts)}function IEe(y,b,x,M,U){if(nI(y))throw Error(n(485));if(y=b.action,y!==null){var z={payload:U,action:y,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ie){z.listeners.push(ie)}};V.T!==null?x(!0):z.isTransition=!1,M(z),x=b.pending,x===null?(z.next=b.pending=z,Bk(b,z)):(z.next=x.next,b.pending=x.next=z)}}function Bk(y,b){var x=b.action,M=b.payload,U=y.state;if(b.isTransition){var z=V.T,ie={};V.T=ie;try{var _e=x(U,M),Be=V.S;Be!==null&&Be(ie,_e),Uk(y,b,_e)}catch(et){L8(y,b,et)}finally{z!==null&&ie.types!==null&&(z.types=ie.types),V.T=z}}else try{z=x(U,M),Uk(y,b,z)}catch(et){L8(y,b,et)}}function Uk(y,b,x){x!==null&&typeof x=="object"&&typeof x.then=="function"?x.then(function(M){Qk(y,b,M)},function(M){return L8(y,b,M)}):Qk(y,b,x)}function Qk(y,b,x){b.status="fulfilled",b.value=x,Vk(b),y.state=x,b=y.pending,b!==null&&(x=b.next,x===b?y.pending=null:(x=x.next,b.next=x,Bk(y,x)))}function L8(y,b,x){var M=y.pending;if(y.pending=null,M!==null){M=M.next;do b.status="rejected",b.reason=x,Vk(b),b=b.next;while(b!==M)}y.action=null}function Vk(y){y=y.listeners;for(var b=0;b<y.length;b++)(0,y[b])()}function Hk(y,b){return b}function kk(y,b){if(dr){var x=Xr.formState;if(x!==null){e:{var M=Kt;if(dr){if(on){t:{for(var U=on,z=iu;U.nodeType!==8;){if(!z){U=null;break t}if(U=ou(U.nextSibling),U===null){U=null;break t}}z=U.data,U=z==="F!"||z==="F"?U:null}if(U){on=ou(U.nextSibling),M=U.data==="F!";break e}}Ec(M)}M=!1}M&&(b=x[0])}}return x=Va(),x.memoizedState=x.baseState=b,M={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Hk,lastRenderedState:b},x.queue=M,x=cz.bind(null,Kt,M),M.dispatch=x,M=C8(!1),z=H8.bind(null,Kt,!1,M.queue),M=Va(),U={state:b,dispatch:null,action:y,pending:null},M.queue=U,x=IEe.bind(null,Kt,U,z,x),U.dispatch=x,M.memoizedState=y,[b,x,!1]}function zk(y){var b=jn();return Gk(b,Vr,y)}function Gk(y,b,x){if(b=j8(y,b,Hk)[0],y=eI(Ts)[0],typeof b=="object"&&b!==null&&typeof b.then=="function")try{var M=nv(b)}catch(ie){throw ie===$b?kN:ie}else M=b;b=jn();var U=b.queue,z=U.dispatch;return x!==b.memoizedState&&(Kt.flags|=2048,Yb(9,{destroy:void 0},DEe.bind(null,U,x),null)),[M,z,y]}function DEe(y,b){y.action=b}function $k(y){var b=jn(),x=Vr;if(x!==null)return Gk(b,x,y);jn(),b=b.memoizedState,x=jn();var M=x.queue.dispatch;return x.memoizedState=y,[b,M,!1]}function Yb(y,b,x,M){return y={tag:y,create:x,deps:M,inst:b,next:null},b=Kt.updateQueue,b===null&&(b=YN(),Kt.updateQueue=b),x=b.lastEffect,x===null?b.lastEffect=y.next=y:(M=x.next,x.next=y,y.next=M,b.lastEffect=y),y}function Xk(){return jn().memoizedState}function tI(y,b,x,M){var U=Va();Kt.flags|=y,U.memoizedState=Yb(1|b,{destroy:void 0},x,M===void 0?null:M)}function rI(y,b,x,M){var U=jn();M=M===void 0?null:M;var z=U.memoizedState.inst;Vr!==null&&M!==null&&R8(M,Vr.memoizedState.deps)?U.memoizedState=Yb(b,z,x,M):(Kt.flags|=y,U.memoizedState=Yb(1|b,z,x,M))}function Kk(y,b){tI(8390656,8,y,b)}function q8(y,b){rI(2048,8,y,b)}function FEe(y){Kt.flags|=4;var b=Kt.updateQueue;if(b===null)b=YN(),Kt.updateQueue=b,b.events=[y];else{var x=b.events;x===null?b.events=[y]:x.push(y)}}function Jk(y){var b=jn().memoizedState;return FEe({ref:b,nextImpl:y}),function(){if((xr&2)!==0)throw Error(n(440));return b.impl.apply(void 0,arguments)}}function Wk(y,b){return rI(4,2,y,b)}function Yk(y,b){return rI(4,4,y,b)}function Zk(y,b){if(typeof b=="function"){y=y();var x=b(y);return function(){typeof x=="function"?x():b(null)}}if(b!=null)return y=y(),b.current=y,function(){b.current=null}}function ez(y,b,x){x=x!=null?x.concat([y]):null,rI(4,4,Zk.bind(null,b,y),x)}function B8(){}function tz(y,b){var x=jn();b=b===void 0?null:b;var M=x.memoizedState;return b!==null&&R8(b,M[1])?M[0]:(x.memoizedState=[y,b],y)}function rz(y,b){var x=jn();b=b===void 0?null:b;var M=x.memoizedState;if(b!==null&&R8(b,M[1]))return M[0];if(M=y(),Yl){Le(!0);try{y()}finally{Le(!1)}}return x.memoizedState=[M,b],M}function U8(y,b,x){return x===void 0||(_s&1073741824)!==0&&(sr&261930)===0?y.memoizedState=b:(y.memoizedState=x,y=nG(),Kt.lanes|=y,Pc|=y,x)}function nz(y,b,x,M){return Nt(x,b)?x:Kb.current!==null?(y=U8(y,x,M),Nt(y,b)||(Qn=!0),y):(_s&42)===0||(_s&1073741824)!==0&&(sr&261930)===0?(Qn=!0,y.memoizedState=x):(y=nG(),Kt.lanes|=y,Pc|=y,b)}function az(y,b,x,M,U){var z=G.p;G.p=z!==0&&8>z?z:8;var ie=V.T,_e={};V.T=_e,H8(y,!1,b,x);try{var Be=U(),et=V.S;if(et!==null&&et(_e,Be),Be!==null&&typeof Be=="object"&&typeof Be.then=="function"){var ct=xEe(Be,M);av(y,b,ct,Ni(y))}else av(y,b,M,Ni(y))}catch(mt){av(y,b,{then:function(){},status:"rejected",reason:mt},Ni())}finally{G.p=z,ie!==null&&_e.types!==null&&(ie.types=_e.types),V.T=ie}}function PEe(){}function Q8(y,b,x,M){if(y.tag!==5)throw Error(n(476));var U=iz(y).queue;az(y,U,b,Z,x===null?PEe:function(){return uz(y),x(M)})}function iz(y){var b=y.memoizedState;if(b!==null)return b;b={memoizedState:Z,baseState:Z,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:Z},next:null};var x={};return b.next={memoizedState:x,baseState:x,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ts,lastRenderedState:x},next:null},y.memoizedState=b,y=y.alternate,y!==null&&(y.memoizedState=b),b}function uz(y){var b=iz(y);b.next===null&&(b=y.alternate.memoizedState),av(y,b.next.queue,{},Ni())}function V8(){return ma(Tv)}function oz(){return jn().memoizedState}function sz(){return jn().memoizedState}function jEe(y){for(var b=y.return;b!==null;){switch(b.tag){case 24:case 3:var x=Ni();y=xc(x);var M=Rc(b,y,x);M!==null&&(ci(M,b,x),Z1(M,b,x)),b={cache:b8()},y.payload=b;return}b=b.return}}function MEe(y,b,x){var M=Ni();x={lane:M,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null},nI(y)?lz(b,x):(x=u8(y,b,x,M),x!==null&&(ci(x,y,M),dz(x,b,M)))}function cz(y,b,x){var M=Ni();av(y,b,x,M)}function av(y,b,x,M){var U={lane:M,revertLane:0,gesture:null,action:x,hasEagerState:!1,eagerState:null,next:null};if(nI(y))lz(b,U);else{var z=y.alternate;if(y.lanes===0&&(z===null||z.lanes===0)&&(z=b.lastRenderedReducer,z!==null))try{var ie=b.lastRenderedState,_e=z(ie,x);if(U.hasEagerState=!0,U.eagerState=_e,Nt(_e,ie))return LN(y,b,U,0),Xr===null&&CN(),!1}catch{}if(x=u8(y,b,U,M),x!==null)return ci(x,y,M),dz(x,b,M),!0}return!1}function H8(y,b,x,M){if(M={lane:2,revertLane:T5(),gesture:null,action:M,hasEagerState:!1,eagerState:null,next:null},nI(y)){if(b)throw Error(n(479))}else b=u8(y,x,M,2),b!==null&&ci(b,y,2)}function nI(y){var b=y.alternate;return y===Kt||b!==null&&b===Kt}function lz(y,b){Jb=JN=!0;var x=y.pending;x===null?b.next=b:(b.next=x.next,x.next=b),y.pending=b}function dz(y,b,x){if((x&4194048)!==0){var M=b.lanes;M&=y.pendingLanes,x|=M,b.lanes=x,st(y,x)}}var iv={readContext:ma,use:ZN,useCallback:In,useContext:In,useEffect:In,useImperativeHandle:In,useLayoutEffect:In,useInsertionEffect:In,useMemo:In,useReducer:In,useRef:In,useState:In,useDebugValue:In,useDeferredValue:In,useTransition:In,useSyncExternalStore:In,useId:In,useHostTransitionStatus:In,useFormState:In,useActionState:In,useOptimistic:In,useMemoCache:In,useCacheRefresh:In};iv.useEffectEvent=In;var fz={readContext:ma,use:ZN,useCallback:function(y,b){return Va().memoizedState=[y,b===void 0?null:b],y},useContext:ma,useEffect:Kk,useImperativeHandle:function(y,b,x){x=x!=null?x.concat([y]):null,tI(4194308,4,Zk.bind(null,b,y),x)},useLayoutEffect:function(y,b){return tI(4194308,4,y,b)},useInsertionEffect:function(y,b){tI(4,2,y,b)},useMemo:function(y,b){var x=Va();b=b===void 0?null:b;var M=y();if(Yl){Le(!0);try{y()}finally{Le(!1)}}return x.memoizedState=[M,b],M},useReducer:function(y,b,x){var M=Va();if(x!==void 0){var U=x(b);if(Yl){Le(!0);try{x(b)}finally{Le(!1)}}}else U=b;return M.memoizedState=M.baseState=U,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:y,lastRenderedState:U},M.queue=y,y=y.dispatch=MEe.bind(null,Kt,y),[M.memoizedState,y]},useRef:function(y){var b=Va();return y={current:y},b.memoizedState=y},useState:function(y){y=C8(y);var b=y.queue,x=cz.bind(null,Kt,b);return b.dispatch=x,[y.memoizedState,x]},useDebugValue:B8,useDeferredValue:function(y,b){var x=Va();return U8(x,y,b)},useTransition:function(){var y=C8(!1);return y=az.bind(null,Kt,y.queue,!0,!1),Va().memoizedState=y,[!1,y]},useSyncExternalStore:function(y,b,x){var M=Kt,U=Va();if(dr){if(x===void 0)throw Error(n(407));x=x()}else{if(x=b(),Xr===null)throw Error(n(349));(sr&127)!==0||Pk(M,b,x)}U.memoizedState=x;var z={value:x,getSnapshot:b};return U.queue=z,Kk(Mk.bind(null,M,z,y),[y]),M.flags|=2048,Yb(9,{destroy:void 0},jk.bind(null,M,z,x,b),null),x},useId:function(){var y=Va(),b=Xr.identifierPrefix;if(dr){var x=wo,M=To;x=(M&~(1<<32-Pe(M)-1)).toString(32)+x,b="_"+b+"R_"+x,x=WN++,0<x&&(b+="H"+x.toString(32)),b+="_"}else x=REe++,b="_"+b+"r_"+x.toString(32)+"_";return y.memoizedState=b},useHostTransitionStatus:V8,useFormState:kk,useActionState:kk,useOptimistic:function(y){var b=Va();b.memoizedState=b.baseState=y;var x={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return b.queue=x,b=H8.bind(null,Kt,!0,x),x.dispatch=b,[y,b]},useMemoCache:P8,useCacheRefresh:function(){return Va().memoizedState=jEe.bind(null,Kt)},useEffectEvent:function(y){var b=Va(),x={impl:y};return b.memoizedState=x,function(){if((xr&2)!==0)throw Error(n(440));return x.impl.apply(void 0,arguments)}}},k8={readContext:ma,use:ZN,useCallback:tz,useContext:ma,useEffect:q8,useImperativeHandle:ez,useInsertionEffect:Wk,useLayoutEffect:Yk,useMemo:rz,useReducer:eI,useRef:Xk,useState:function(){return eI(Ts)},useDebugValue:B8,useDeferredValue:function(y,b){var x=jn();return nz(x,Vr.memoizedState,y,b)},useTransition:function(){var y=eI(Ts)[0],b=jn().memoizedState;return[typeof y=="boolean"?y:nv(y),b]},useSyncExternalStore:Fk,useId:oz,useHostTransitionStatus:V8,useFormState:zk,useActionState:zk,useOptimistic:function(y,b){var x=jn();return qk(x,Vr,y,b)},useMemoCache:P8,useCacheRefresh:sz};k8.useEffectEvent=Jk;var pz={readContext:ma,use:ZN,useCallback:tz,useContext:ma,useEffect:q8,useImperativeHandle:ez,useInsertionEffect:Wk,useLayoutEffect:Yk,useMemo:rz,useReducer:M8,useRef:Xk,useState:function(){return M8(Ts)},useDebugValue:B8,useDeferredValue:function(y,b){var x=jn();return Vr===null?U8(x,y,b):nz(x,Vr.memoizedState,y,b)},useTransition:function(){var y=M8(Ts)[0],b=jn().memoizedState;return[typeof y=="boolean"?y:nv(y),b]},useSyncExternalStore:Fk,useId:oz,useHostTransitionStatus:V8,useFormState:$k,useActionState:$k,useOptimistic:function(y,b){var x=jn();return Vr!==null?qk(x,Vr,y,b):(x.baseState=y,[y,x.queue.dispatch])},useMemoCache:P8,useCacheRefresh:sz};pz.useEffectEvent=Jk;function z8(y,b,x,M){b=y.memoizedState,x=x(M,b),x=x==null?b:d({},b,x),y.memoizedState=x,y.lanes===0&&(y.updateQueue.baseState=x)}var G8={enqueueSetState:function(y,b,x){y=y._reactInternals;var M=Ni(),U=xc(M);U.payload=b,x!=null&&(U.callback=x),b=Rc(y,U,M),b!==null&&(ci(b,y,M),Z1(b,y,M))},enqueueReplaceState:function(y,b,x){y=y._reactInternals;var M=Ni(),U=xc(M);U.tag=1,U.payload=b,x!=null&&(U.callback=x),b=Rc(y,U,M),b!==null&&(ci(b,y,M),Z1(b,y,M))},enqueueForceUpdate:function(y,b){y=y._reactInternals;var x=Ni(),M=xc(x);M.tag=2,b!=null&&(M.callback=b),b=Rc(y,M,x),b!==null&&(ci(b,y,x),Z1(b,y,x))}};function hz(y,b,x,M,U,z,ie){return y=y.stateNode,typeof y.shouldComponentUpdate=="function"?y.shouldComponentUpdate(M,z,ie):b.prototype&&b.prototype.isPureReactComponent?!me(x,M)||!me(U,z):!0}function yz(y,b,x,M){y=b.state,typeof b.componentWillReceiveProps=="function"&&b.componentWillReceiveProps(x,M),typeof b.UNSAFE_componentWillReceiveProps=="function"&&b.UNSAFE_componentWillReceiveProps(x,M),b.state!==y&&G8.enqueueReplaceState(b,b.state,null)}function Zl(y,b){var x=b;if("ref"in b){x={};for(var M in b)M!=="ref"&&(x[M]=b[M])}if(y=y.defaultProps){x===b&&(x=d({},x));for(var U in y)x[U]===void 0&&(x[U]=y[U])}return x}function mz(y){MN(y)}function bz(y){console.error(y)}function gz(y){MN(y)}function aI(y,b){try{var x=y.onUncaughtError;x(b.value,{componentStack:b.stack})}catch(M){setTimeout(function(){throw M})}}function vz(y,b,x){try{var M=y.onCaughtError;M(x.value,{componentStack:x.stack,errorBoundary:b.tag===1?b.stateNode:null})}catch(U){setTimeout(function(){throw U})}}function $8(y,b,x){return x=xc(x),x.tag=3,x.payload={element:null},x.callback=function(){aI(y,b)},x}function _z(y){return y=xc(y),y.tag=3,y}function Tz(y,b,x,M){var U=x.type.getDerivedStateFromError;if(typeof U=="function"){var z=M.value;y.payload=function(){return U(z)},y.callback=function(){vz(b,x,M)}}var ie=x.stateNode;ie!==null&&typeof ie.componentDidCatch=="function"&&(y.callback=function(){vz(b,x,M),typeof U!="function"&&(jc===null?jc=new Set([this]):jc.add(this));var _e=M.stack;this.componentDidCatch(M.value,{componentStack:_e!==null?_e:""})})}function CEe(y,b,x,M,U){if(x.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){if(b=x.alternate,b!==null&&kb(b,x,U,!0),x=Ai.current,x!==null){switch(x.tag){case 31:case 13:return uu===null?mI():x.alternate===null&&Dn===0&&(Dn=3),x.flags&=-257,x.flags|=65536,x.lanes=U,M===zN?x.flags|=16384:(b=x.updateQueue,b===null?x.updateQueue=new Set([M]):b.add(M),g5(y,M,U)),!1;case 22:return x.flags|=65536,M===zN?x.flags|=16384:(b=x.updateQueue,b===null?(b={transitions:null,markerInstances:null,retryQueue:new Set([M])},x.updateQueue=b):(x=b.retryQueue,x===null?b.retryQueue=new Set([M]):x.add(M)),g5(y,M,U)),!1}throw Error(n(435,x.tag))}return g5(y,M,U),mI(),!1}if(dr)return b=Ai.current,b!==null?((b.flags&65536)===0&&(b.flags|=256),b.flags|=65536,b.lanes=U,M!==f8&&(y=Error(n(422),{cause:M}),X1(ru(y,x)))):(M!==f8&&(b=Error(n(423),{cause:M}),X1(ru(b,x))),y=y.current.alternate,y.flags|=65536,U&=-U,y.lanes|=U,M=ru(M,x),U=$8(y.stateNode,M,U),S8(y,U),Dn!==4&&(Dn=2)),!1;var z=Error(n(520),{cause:M});if(z=ru(z,x),pv===null?pv=[z]:pv.push(z),Dn!==4&&(Dn=2),b===null)return!0;M=ru(M,x),x=b;do{switch(x.tag){case 3:return x.flags|=65536,y=U&-U,x.lanes|=y,y=$8(x.stateNode,M,y),S8(x,y),!1;case 1:if(b=x.type,z=x.stateNode,(x.flags&128)===0&&(typeof b.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(jc===null||!jc.has(z))))return x.flags|=65536,U&=-U,x.lanes|=U,U=_z(U),Tz(U,y,x,M),S8(x,U),!1}x=x.return}while(x!==null);return!1}var X8=Error(n(461)),Qn=!1;function ba(y,b,x,M){b.child=y===null?Ak(b,null,x,M):Wl(b,y.child,x,M)}function wz(y,b,x,M,U){x=x.render;var z=b.ref;if("ref"in M){var ie={};for(var _e in M)_e!=="ref"&&(ie[_e]=M[_e])}else ie=M;return $l(b),M=N8(y,b,x,ie,z,U),_e=I8(),y!==null&&!Qn?(D8(y,b,U),ws(y,b,U)):(dr&&_e&&l8(b),b.flags|=1,ba(y,b,M,U),b.child)}function Sz(y,b,x,M,U){if(y===null){var z=x.type;return typeof z=="function"&&!o8(z)&&z.defaultProps===void 0&&x.compare===null?(b.tag=15,b.type=z,Ez(y,b,z,M,U)):(y=BN(x.type,null,M,b,b.mode,U),y.ref=b.ref,y.return=b,b.child=y)}if(z=y.child,!r5(y,U)){var ie=z.memoizedProps;if(x=x.compare,x=x!==null?x:me,x(ie,M)&&y.ref===b.ref)return ws(y,b,U)}return b.flags|=1,y=ms(z,M),y.ref=b.ref,y.return=b,b.child=y}function Ez(y,b,x,M,U){if(y!==null){var z=y.memoizedProps;if(me(z,M)&&y.ref===b.ref)if(Qn=!1,b.pendingProps=M=z,r5(y,U))(y.flags&131072)!==0&&(Qn=!0);else return b.lanes=y.lanes,ws(y,b,U)}return K8(y,b,x,M,U)}function Az(y,b,x,M){var U=M.children,z=y!==null?y.memoizedState:null;if(y===null&&b.stateNode===null&&(b.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),M.mode==="hidden"){if((b.flags&128)!==0){if(z=z!==null?z.baseLanes|x:x,y!==null){for(M=b.child=y.child,U=0;M!==null;)U=U|M.lanes|M.childLanes,M=M.sibling;M=U&~z}else M=0,b.child=null;return Oz(y,b,z,x,M)}if((x&536870912)!==0)b.memoizedState={baseLanes:0,cachePool:null},y!==null&&HN(b,z!==null?z.cachePool:null),z!==null?Rk(b,z):A8(),Nk(b);else return M=b.lanes=536870912,Oz(y,b,z!==null?z.baseLanes|x:x,x,M)}else z!==null?(HN(b,z.cachePool),Rk(b,z),Ic(),b.memoizedState=null):(y!==null&&HN(b,null),A8(),Ic());return ba(y,b,U,x),b.child}function uv(y,b){return y!==null&&y.tag===22||b.stateNode!==null||(b.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),b.sibling}function Oz(y,b,x,M,U){var z=v8();return z=z===null?null:{parent:Bn._currentValue,pool:z},b.memoizedState={baseLanes:x,cachePool:z},y!==null&&HN(b,null),A8(),Nk(b),y!==null&&kb(y,b,M,!0),b.childLanes=U,null}function iI(y,b){return b=oI({mode:b.mode,children:b.children},y.mode),b.ref=y.ref,y.child=b,b.return=y,b}function xz(y,b,x){return Wl(b,y.child,null,x),y=iI(b,b.pendingProps),y.flags|=2,Oi(b),b.memoizedState=null,y}function LEe(y,b,x){var M=b.pendingProps,U=(b.flags&128)!==0;if(b.flags&=-129,y===null){if(dr){if(M.mode==="hidden")return y=iI(b,M),b.lanes=536870912,uv(null,y);if(x8(b),(y=on)?(y=BG(y,iu),y=y!==null&&y.data==="&"?y:null,y!==null&&(b.memoizedState={dehydrated:y,treeContext:wc!==null?{id:To,overflow:wo}:null,retryLane:536870912,hydrationErrors:null},x=lk(y),x.return=b,b.child=x,ya=b,on=null)):y=null,y===null)throw Ec(b);return b.lanes=536870912,null}return iI(b,M)}var z=y.memoizedState;if(z!==null){var ie=z.dehydrated;if(x8(b),U)if(b.flags&256)b.flags&=-257,b=xz(y,b,x);else if(b.memoizedState!==null)b.child=y.child,b.flags|=128,b=null;else throw Error(n(558));else if(Qn||kb(y,b,x,!1),U=(x&y.childLanes)!==0,Qn||U){if(M=Xr,M!==null&&(ie=tt(M,x),ie!==0&&ie!==z.retryLane))throw z.retryLane=ie,Hl(y,ie),ci(M,y,ie),X8;mI(),b=xz(y,b,x)}else y=z.treeContext,on=ou(ie.nextSibling),ya=b,dr=!0,Sc=null,iu=!1,y!==null&&pk(b,y),b=iI(b,M),b.flags|=4096;return b}return y=ms(y.child,{mode:M.mode,children:M.children}),y.ref=b.ref,b.child=y,y.return=b,y}function uI(y,b){var x=b.ref;if(x===null)y!==null&&y.ref!==null&&(b.flags|=4194816);else{if(typeof x!="function"&&typeof x!="object")throw Error(n(284));(y===null||y.ref!==x)&&(b.flags|=4194816)}}function K8(y,b,x,M,U){return $l(b),x=N8(y,b,x,M,void 0,U),M=I8(),y!==null&&!Qn?(D8(y,b,U),ws(y,b,U)):(dr&&M&&l8(b),b.flags|=1,ba(y,b,x,U),b.child)}function Rz(y,b,x,M,U,z){return $l(b),b.updateQueue=null,x=Dk(b,M,x,U),Ik(y),M=I8(),y!==null&&!Qn?(D8(y,b,z),ws(y,b,z)):(dr&&M&&l8(b),b.flags|=1,ba(y,b,x,z),b.child)}function Nz(y,b,x,M,U){if($l(b),b.stateNode===null){var z=Ub,ie=x.contextType;typeof ie=="object"&&ie!==null&&(z=ma(ie)),z=new x(M,z),b.memoizedState=z.state!==null&&z.state!==void 0?z.state:null,z.updater=G8,b.stateNode=z,z._reactInternals=b,z=b.stateNode,z.props=M,z.state=b.memoizedState,z.refs={},T8(b),ie=x.contextType,z.context=typeof ie=="object"&&ie!==null?ma(ie):Ub,z.state=b.memoizedState,ie=x.getDerivedStateFromProps,typeof ie=="function"&&(z8(b,x,ie,M),z.state=b.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof z.getSnapshotBeforeUpdate=="function"||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(ie=z.state,typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount(),ie!==z.state&&G8.enqueueReplaceState(z,z.state,null),tv(b,M,z,U),ev(),z.state=b.memoizedState),typeof z.componentDidMount=="function"&&(b.flags|=4194308),M=!0}else if(y===null){z=b.stateNode;var _e=b.memoizedProps,Be=Zl(x,_e);z.props=Be;var et=z.context,ct=x.contextType;ie=Ub,typeof ct=="object"&&ct!==null&&(ie=ma(ct));var mt=x.getDerivedStateFromProps;ct=typeof mt=="function"||typeof z.getSnapshotBeforeUpdate=="function",_e=b.pendingProps!==_e,ct||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(_e||et!==ie)&&yz(b,z,M,ie),Oc=!1;var rt=b.memoizedState;z.state=rt,tv(b,M,z,U),ev(),et=b.memoizedState,_e||rt!==et||Oc?(typeof mt=="function"&&(z8(b,x,mt,M),et=b.memoizedState),(Be=Oc||hz(b,x,Be,M,rt,et,ie))?(ct||typeof z.UNSAFE_componentWillMount!="function"&&typeof z.componentWillMount!="function"||(typeof z.componentWillMount=="function"&&z.componentWillMount(),typeof z.UNSAFE_componentWillMount=="function"&&z.UNSAFE_componentWillMount()),typeof z.componentDidMount=="function"&&(b.flags|=4194308)):(typeof z.componentDidMount=="function"&&(b.flags|=4194308),b.memoizedProps=M,b.memoizedState=et),z.props=M,z.state=et,z.context=ie,M=Be):(typeof z.componentDidMount=="function"&&(b.flags|=4194308),M=!1)}else{z=b.stateNode,w8(y,b),ie=b.memoizedProps,ct=Zl(x,ie),z.props=ct,mt=b.pendingProps,rt=z.context,et=x.contextType,Be=Ub,typeof et=="object"&&et!==null&&(Be=ma(et)),_e=x.getDerivedStateFromProps,(et=typeof _e=="function"||typeof z.getSnapshotBeforeUpdate=="function")||typeof z.UNSAFE_componentWillReceiveProps!="function"&&typeof z.componentWillReceiveProps!="function"||(ie!==mt||rt!==Be)&&yz(b,z,M,Be),Oc=!1,rt=b.memoizedState,z.state=rt,tv(b,M,z,U),ev();var ut=b.memoizedState;ie!==mt||rt!==ut||Oc||y!==null&&y.dependencies!==null&&QN(y.dependencies)?(typeof _e=="function"&&(z8(b,x,_e,M),ut=b.memoizedState),(ct=Oc||hz(b,x,ct,M,rt,ut,Be)||y!==null&&y.dependencies!==null&&QN(y.dependencies))?(et||typeof z.UNSAFE_componentWillUpdate!="function"&&typeof z.componentWillUpdate!="function"||(typeof z.componentWillUpdate=="function"&&z.componentWillUpdate(M,ut,Be),typeof z.UNSAFE_componentWillUpdate=="function"&&z.UNSAFE_componentWillUpdate(M,ut,Be)),typeof z.componentDidUpdate=="function"&&(b.flags|=4),typeof z.getSnapshotBeforeUpdate=="function"&&(b.flags|=1024)):(typeof z.componentDidUpdate!="function"||ie===y.memoizedProps&&rt===y.memoizedState||(b.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ie===y.memoizedProps&&rt===y.memoizedState||(b.flags|=1024),b.memoizedProps=M,b.memoizedState=ut),z.props=M,z.state=ut,z.context=Be,M=ct):(typeof z.componentDidUpdate!="function"||ie===y.memoizedProps&&rt===y.memoizedState||(b.flags|=4),typeof z.getSnapshotBeforeUpdate!="function"||ie===y.memoizedProps&&rt===y.memoizedState||(b.flags|=1024),M=!1)}return z=M,uI(y,b),M=(b.flags&128)!==0,z||M?(z=b.stateNode,x=M&&typeof x.getDerivedStateFromError!="function"?null:z.render(),b.flags|=1,y!==null&&M?(b.child=Wl(b,y.child,null,U),b.child=Wl(b,null,x,U)):ba(y,b,x,U),b.memoizedState=z.state,y=b.child):y=ws(y,b,U),y}function Iz(y,b,x,M){return zl(),b.flags|=256,ba(y,b,x,M),b.child}var J8={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function W8(y){return{baseLanes:y,cachePool:vk()}}function Y8(y,b,x){return y=y!==null?y.childLanes&~x:0,b&&(y|=Ri),y}function Dz(y,b,x){var M=b.pendingProps,U=!1,z=(b.flags&128)!==0,ie;if((ie=z)||(ie=y!==null&&y.memoizedState===null?!1:(Pn.current&2)!==0),ie&&(U=!0,b.flags&=-129),ie=(b.flags&32)!==0,b.flags&=-33,y===null){if(dr){if(U?Nc(b):Ic(),(y=on)?(y=BG(y,iu),y=y!==null&&y.data!=="&"?y:null,y!==null&&(b.memoizedState={dehydrated:y,treeContext:wc!==null?{id:To,overflow:wo}:null,retryLane:536870912,hydrationErrors:null},x=lk(y),x.return=b,b.child=x,ya=b,on=null)):y=null,y===null)throw Ec(b);return j5(y)?b.lanes=32:b.lanes=536870912,null}var _e=M.children;return M=M.fallback,U?(Ic(),U=b.mode,_e=oI({mode:"hidden",children:_e},U),M=kl(M,U,x,null),_e.return=b,M.return=b,_e.sibling=M,b.child=_e,M=b.child,M.memoizedState=W8(x),M.childLanes=Y8(y,ie,x),b.memoizedState=J8,uv(null,M)):(Nc(b),Z8(b,_e))}var Be=y.memoizedState;if(Be!==null&&(_e=Be.dehydrated,_e!==null)){if(z)b.flags&256?(Nc(b),b.flags&=-257,b=e5(y,b,x)):b.memoizedState!==null?(Ic(),b.child=y.child,b.flags|=128,b=null):(Ic(),_e=M.fallback,U=b.mode,M=oI({mode:"visible",children:M.children},U),_e=kl(_e,U,x,null),_e.flags|=2,M.return=b,_e.return=b,M.sibling=_e,b.child=M,Wl(b,y.child,null,x),M=b.child,M.memoizedState=W8(x),M.childLanes=Y8(y,ie,x),b.memoizedState=J8,b=uv(null,M));else if(Nc(b),j5(_e)){if(ie=_e.nextSibling&&_e.nextSibling.dataset,ie)var et=ie.dgst;ie=et,M=Error(n(419)),M.stack="",M.digest=ie,X1({value:M,source:null,stack:null}),b=e5(y,b,x)}else if(Qn||kb(y,b,x,!1),ie=(x&y.childLanes)!==0,Qn||ie){if(ie=Xr,ie!==null&&(M=tt(ie,x),M!==0&&M!==Be.retryLane))throw Be.retryLane=M,Hl(y,M),ci(ie,y,M),X8;P5(_e)||mI(),b=e5(y,b,x)}else P5(_e)?(b.flags|=192,b.child=y.child,b=null):(y=Be.treeContext,on=ou(_e.nextSibling),ya=b,dr=!0,Sc=null,iu=!1,y!==null&&pk(b,y),b=Z8(b,M.children),b.flags|=4096);return b}return U?(Ic(),_e=M.fallback,U=b.mode,Be=y.child,et=Be.sibling,M=ms(Be,{mode:"hidden",children:M.children}),M.subtreeFlags=Be.subtreeFlags&65011712,et!==null?_e=ms(et,_e):(_e=kl(_e,U,x,null),_e.flags|=2),_e.return=b,M.return=b,M.sibling=_e,b.child=M,uv(null,M),M=b.child,_e=y.child.memoizedState,_e===null?_e=W8(x):(U=_e.cachePool,U!==null?(Be=Bn._currentValue,U=U.parent!==Be?{parent:Be,pool:Be}:U):U=vk(),_e={baseLanes:_e.baseLanes|x,cachePool:U}),M.memoizedState=_e,M.childLanes=Y8(y,ie,x),b.memoizedState=J8,uv(y.child,M)):(Nc(b),x=y.child,y=x.sibling,x=ms(x,{mode:"visible",children:M.children}),x.return=b,x.sibling=null,y!==null&&(ie=b.deletions,ie===null?(b.deletions=[y],b.flags|=16):ie.push(y)),b.child=x,b.memoizedState=null,x)}function Z8(y,b){return b=oI({mode:"visible",children:b},y.mode),b.return=y,y.child=b}function oI(y,b){return y=Ei(22,y,null,b),y.lanes=0,y}function e5(y,b,x){return Wl(b,y.child,null,x),y=Z8(b,b.pendingProps.children),y.flags|=2,b.memoizedState=null,y}function Fz(y,b,x){y.lanes|=b;var M=y.alternate;M!==null&&(M.lanes|=b),y8(y.return,b,x)}function t5(y,b,x,M,U,z){var ie=y.memoizedState;ie===null?y.memoizedState={isBackwards:b,rendering:null,renderingStartTime:0,last:M,tail:x,tailMode:U,treeForkCount:z}:(ie.isBackwards=b,ie.rendering=null,ie.renderingStartTime=0,ie.last=M,ie.tail=x,ie.tailMode=U,ie.treeForkCount=z)}function Pz(y,b,x){var M=b.pendingProps,U=M.revealOrder,z=M.tail;M=M.children;var ie=Pn.current,_e=(ie&2)!==0;if(_e?(ie=ie&1|2,b.flags|=128):ie&=1,pe(Pn,ie),ba(y,b,M,x),M=dr?$1:0,!_e&&y!==null&&(y.flags&128)!==0)e:for(y=b.child;y!==null;){if(y.tag===13)y.memoizedState!==null&&Fz(y,x,b);else if(y.tag===19)Fz(y,x,b);else if(y.child!==null){y.child.return=y,y=y.child;continue}if(y===b)break e;for(;y.sibling===null;){if(y.return===null||y.return===b)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}switch(U){case"forwards":for(x=b.child,U=null;x!==null;)y=x.alternate,y!==null&&KN(y)===null&&(U=x),x=x.sibling;x=U,x===null?(U=b.child,b.child=null):(U=x.sibling,x.sibling=null),t5(b,!1,U,x,z,M);break;case"backwards":case"unstable_legacy-backwards":for(x=null,U=b.child,b.child=null;U!==null;){if(y=U.alternate,y!==null&&KN(y)===null){b.child=U;break}y=U.sibling,U.sibling=x,x=U,U=y}t5(b,!0,x,null,z,M);break;case"together":t5(b,!1,null,null,void 0,M);break;default:b.memoizedState=null}return b.child}function ws(y,b,x){if(y!==null&&(b.dependencies=y.dependencies),Pc|=b.lanes,(x&b.childLanes)===0)if(y!==null){if(kb(y,b,x,!1),(x&b.childLanes)===0)return null}else return null;if(y!==null&&b.child!==y.child)throw Error(n(153));if(b.child!==null){for(y=b.child,x=ms(y,y.pendingProps),b.child=x,x.return=b;y.sibling!==null;)y=y.sibling,x=x.sibling=ms(y,y.pendingProps),x.return=b;x.sibling=null}return b.child}function r5(y,b){return(y.lanes&b)!==0?!0:(y=y.dependencies,!!(y!==null&&QN(y)))}function qEe(y,b,x){switch(b.tag){case 3:Ae(b,b.stateNode.containerInfo),Ac(b,Bn,y.memoizedState.cache),zl();break;case 27:case 5:ee(b);break;case 4:Ae(b,b.stateNode.containerInfo);break;case 10:Ac(b,b.type,b.memoizedProps.value);break;case 31:if(b.memoizedState!==null)return b.flags|=128,x8(b),null;break;case 13:var M=b.memoizedState;if(M!==null)return M.dehydrated!==null?(Nc(b),b.flags|=128,null):(x&b.child.childLanes)!==0?Dz(y,b,x):(Nc(b),y=ws(y,b,x),y!==null?y.sibling:null);Nc(b);break;case 19:var U=(y.flags&128)!==0;if(M=(x&b.childLanes)!==0,M||(kb(y,b,x,!1),M=(x&b.childLanes)!==0),U){if(M)return Pz(y,b,x);b.flags|=128}if(U=b.memoizedState,U!==null&&(U.rendering=null,U.tail=null,U.lastEffect=null),pe(Pn,Pn.current),M)break;return null;case 22:return b.lanes=0,Az(y,b,x,b.pendingProps);case 24:Ac(b,Bn,y.memoizedState.cache)}return ws(y,b,x)}function jz(y,b,x){if(y!==null)if(y.memoizedProps!==b.pendingProps)Qn=!0;else{if(!r5(y,x)&&(b.flags&128)===0)return Qn=!1,qEe(y,b,x);Qn=(y.flags&131072)!==0}else Qn=!1,dr&&(b.flags&1048576)!==0&&fk(b,$1,b.index);switch(b.lanes=0,b.tag){case 16:e:{var M=b.pendingProps;if(y=Kl(b.elementType),b.type=y,typeof y=="function")o8(y)?(M=Zl(y,M),b.tag=1,b=Nz(null,b,y,M,x)):(b.tag=0,b=K8(null,b,y,M,x));else{if(y!=null){var U=y.$$typeof;if(U===E){b.tag=11,b=wz(null,b,y,M,x);break e}else if(U===j){b.tag=14,b=Sz(null,b,y,M,x);break e}}throw b=B(y)||y,Error(n(306,b,""))}}return b;case 0:return K8(y,b,b.type,b.pendingProps,x);case 1:return M=b.type,U=Zl(M,b.pendingProps),Nz(y,b,M,U,x);case 3:e:{if(Ae(b,b.stateNode.containerInfo),y===null)throw Error(n(387));M=b.pendingProps;var z=b.memoizedState;U=z.element,w8(y,b),tv(b,M,null,x);var ie=b.memoizedState;if(M=ie.cache,Ac(b,Bn,M),M!==z.cache&&m8(b,[Bn],x,!0),ev(),M=ie.element,z.isDehydrated)if(z={element:M,isDehydrated:!1,cache:ie.cache},b.updateQueue.baseState=z,b.memoizedState=z,b.flags&256){b=Iz(y,b,M,x);break e}else if(M!==U){U=ru(Error(n(424)),b),X1(U),b=Iz(y,b,M,x);break e}else for(y=b.stateNode.containerInfo,y.nodeType===9?y=y.body:y=y.nodeName==="HTML"?y.ownerDocument.body:y,on=ou(y.firstChild),ya=b,dr=!0,Sc=null,iu=!0,x=Ak(b,null,M,x),b.child=x;x;)x.flags=x.flags&-3|4096,x=x.sibling;else{if(zl(),M===U){b=ws(y,b,x);break e}ba(y,b,M,x)}b=b.child}return b;case 26:return uI(y,b),y===null?(x=zG(b.type,null,b.pendingProps,null))?b.memoizedState=x:dr||(x=b.type,y=b.pendingProps,M=SI(Oe.current).createElement(x),M[wt]=b,M[gt]=y,ga(M,x,y),hr(M),b.stateNode=M):b.memoizedState=zG(b.type,y.memoizedProps,b.pendingProps,y.memoizedState),null;case 27:return ee(b),y===null&&dr&&(M=b.stateNode=VG(b.type,b.pendingProps,Oe.current),ya=b,iu=!0,U=on,qc(b.type)?(M5=U,on=ou(M.firstChild)):on=U),ba(y,b,b.pendingProps.children,x),uI(y,b),y===null&&(b.flags|=4194304),b.child;case 5:return y===null&&dr&&((U=M=on)&&(M=hAe(M,b.type,b.pendingProps,iu),M!==null?(b.stateNode=M,ya=b,on=ou(M.firstChild),iu=!1,U=!0):U=!1),U||Ec(b)),ee(b),U=b.type,z=b.pendingProps,ie=y!==null?y.memoizedProps:null,M=z.children,I5(U,z)?M=null:ie!==null&&I5(U,ie)&&(b.flags|=32),b.memoizedState!==null&&(U=N8(y,b,NEe,null,null,x),Tv._currentValue=U),uI(y,b),ba(y,b,M,x),b.child;case 6:return y===null&&dr&&((y=x=on)&&(x=yAe(x,b.pendingProps,iu),x!==null?(b.stateNode=x,ya=b,on=null,y=!0):y=!1),y||Ec(b)),null;case 13:return Dz(y,b,x);case 4:return Ae(b,b.stateNode.containerInfo),M=b.pendingProps,y===null?b.child=Wl(b,null,M,x):ba(y,b,M,x),b.child;case 11:return wz(y,b,b.type,b.pendingProps,x);case 7:return ba(y,b,b.pendingProps,x),b.child;case 8:return ba(y,b,b.pendingProps.children,x),b.child;case 12:return ba(y,b,b.pendingProps.children,x),b.child;case 10:return M=b.pendingProps,Ac(b,b.type,M.value),ba(y,b,M.children,x),b.child;case 9:return U=b.type._context,M=b.pendingProps.children,$l(b),U=ma(U),M=M(U),b.flags|=1,ba(y,b,M,x),b.child;case 14:return Sz(y,b,b.type,b.pendingProps,x);case 15:return Ez(y,b,b.type,b.pendingProps,x);case 19:return Pz(y,b,x);case 31:return LEe(y,b,x);case 22:return Az(y,b,x,b.pendingProps);case 24:return $l(b),M=ma(Bn),y===null?(U=v8(),U===null&&(U=Xr,z=b8(),U.pooledCache=z,z.refCount++,z!==null&&(U.pooledCacheLanes|=x),U=z),b.memoizedState={parent:M,cache:U},T8(b),Ac(b,Bn,U)):((y.lanes&x)!==0&&(w8(y,b),tv(b,null,null,x),ev()),U=y.memoizedState,z=b.memoizedState,U.parent!==M?(U={parent:M,cache:M},b.memoizedState=U,b.lanes===0&&(b.memoizedState=b.updateQueue.baseState=U),Ac(b,Bn,M)):(M=z.cache,Ac(b,Bn,M),M!==U.cache&&m8(b,[Bn],x,!0))),ba(y,b,b.pendingProps.children,x),b.child;case 29:throw b.pendingProps}throw Error(n(156,b.tag))}function Ss(y){y.flags|=4}function n5(y,b,x,M,U){if((b=(y.mode&32)!==0)&&(b=!1),b){if(y.flags|=16777216,(U&335544128)===U)if(y.stateNode.complete)y.flags|=8192;else if(oG())y.flags|=8192;else throw Jl=zN,_8}else y.flags&=-16777217}function Mz(y,b){if(b.type!=="stylesheet"||(b.state.loading&4)!==0)y.flags&=-16777217;else if(y.flags|=16777216,!JG(b))if(oG())y.flags|=8192;else throw Jl=zN,_8}function sI(y,b){b!==null&&(y.flags|=4),y.flags&16384&&(b=y.tag!==22?fe():536870912,y.lanes|=b,rg|=b)}function ov(y,b){if(!dr)switch(y.tailMode){case"hidden":b=y.tail;for(var x=null;b!==null;)b.alternate!==null&&(x=b),b=b.sibling;x===null?y.tail=null:x.sibling=null;break;case"collapsed":x=y.tail;for(var M=null;x!==null;)x.alternate!==null&&(M=x),x=x.sibling;M===null?b||y.tail===null?y.tail=null:y.tail.sibling=null:M.sibling=null}}function sn(y){var b=y.alternate!==null&&y.alternate.child===y.child,x=0,M=0;if(b)for(var U=y.child;U!==null;)x|=U.lanes|U.childLanes,M|=U.subtreeFlags&65011712,M|=U.flags&65011712,U.return=y,U=U.sibling;else for(U=y.child;U!==null;)x|=U.lanes|U.childLanes,M|=U.subtreeFlags,M|=U.flags,U.return=y,U=U.sibling;return y.subtreeFlags|=M,y.childLanes=x,b}function BEe(y,b,x){var M=b.pendingProps;switch(d8(b),b.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return sn(b),null;case 1:return sn(b),null;case 3:return x=b.stateNode,M=null,y!==null&&(M=y.memoizedState.cache),b.memoizedState.cache!==M&&(b.flags|=2048),vs(Bn),be(),x.pendingContext&&(x.context=x.pendingContext,x.pendingContext=null),(y===null||y.child===null)&&(Hb(b)?Ss(b):y===null||y.memoizedState.isDehydrated&&(b.flags&256)===0||(b.flags|=1024,p8())),sn(b),null;case 26:var U=b.type,z=b.memoizedState;return y===null?(Ss(b),z!==null?(sn(b),Mz(b,z)):(sn(b),n5(b,U,null,M,x))):z?z!==y.memoizedState?(Ss(b),sn(b),Mz(b,z)):(sn(b),b.flags&=-16777217):(y=y.memoizedProps,y!==M&&Ss(b),sn(b),n5(b,U,y,M,x)),null;case 27:if(_(b),x=Oe.current,U=b.type,y!==null&&b.stateNode!=null)y.memoizedProps!==M&&Ss(b);else{if(!M){if(b.stateNode===null)throw Error(n(166));return sn(b),null}y=le.current,Hb(b)?hk(b):(y=VG(U,M,x),b.stateNode=y,Ss(b))}return sn(b),null;case 5:if(_(b),U=b.type,y!==null&&b.stateNode!=null)y.memoizedProps!==M&&Ss(b);else{if(!M){if(b.stateNode===null)throw Error(n(166));return sn(b),null}if(z=le.current,Hb(b))hk(b);else{var ie=SI(Oe.current);switch(z){case 1:z=ie.createElementNS("http://www.w3.org/2000/svg",U);break;case 2:z=ie.createElementNS("http://www.w3.org/1998/Math/MathML",U);break;default:switch(U){case"svg":z=ie.createElementNS("http://www.w3.org/2000/svg",U);break;case"math":z=ie.createElementNS("http://www.w3.org/1998/Math/MathML",U);break;case"script":z=ie.createElement("div"),z.innerHTML="<script><\/script>",z=z.removeChild(z.firstChild);break;case"select":z=typeof M.is=="string"?ie.createElement("select",{is:M.is}):ie.createElement("select"),M.multiple?z.multiple=!0:M.size&&(z.size=M.size);break;default:z=typeof M.is=="string"?ie.createElement(U,{is:M.is}):ie.createElement(U)}}z[wt]=b,z[gt]=M;e:for(ie=b.child;ie!==null;){if(ie.tag===5||ie.tag===6)z.appendChild(ie.stateNode);else if(ie.tag!==4&&ie.tag!==27&&ie.child!==null){ie.child.return=ie,ie=ie.child;continue}if(ie===b)break e;for(;ie.sibling===null;){if(ie.return===null||ie.return===b)break e;ie=ie.return}ie.sibling.return=ie.return,ie=ie.sibling}b.stateNode=z;e:switch(ga(z,U,M),U){case"button":case"input":case"select":case"textarea":M=!!M.autoFocus;break e;case"img":M=!0;break e;default:M=!1}M&&Ss(b)}}return sn(b),n5(b,b.type,y===null?null:y.memoizedProps,b.pendingProps,x),null;case 6:if(y&&b.stateNode!=null)y.memoizedProps!==M&&Ss(b);else{if(typeof M!="string"&&b.stateNode===null)throw Error(n(166));if(y=Oe.current,Hb(b)){if(y=b.stateNode,x=b.memoizedProps,M=null,U=ya,U!==null)switch(U.tag){case 27:case 5:M=U.memoizedProps}y[wt]=b,y=!!(y.nodeValue===x||M!==null&&M.suppressHydrationWarning===!0||DG(y.nodeValue,x)),y||Ec(b,!0)}else y=SI(y).createTextNode(M),y[wt]=b,b.stateNode=y}return sn(b),null;case 31:if(x=b.memoizedState,y===null||y.memoizedState!==null){if(M=Hb(b),x!==null){if(y===null){if(!M)throw Error(n(318));if(y=b.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(n(557));y[wt]=b}else zl(),(b.flags&128)===0&&(b.memoizedState=null),b.flags|=4;sn(b),y=!1}else x=p8(),y!==null&&y.memoizedState!==null&&(y.memoizedState.hydrationErrors=x),y=!0;if(!y)return b.flags&256?(Oi(b),b):(Oi(b),null);if((b.flags&128)!==0)throw Error(n(558))}return sn(b),null;case 13:if(M=b.memoizedState,y===null||y.memoizedState!==null&&y.memoizedState.dehydrated!==null){if(U=Hb(b),M!==null&&M.dehydrated!==null){if(y===null){if(!U)throw Error(n(318));if(U=b.memoizedState,U=U!==null?U.dehydrated:null,!U)throw Error(n(317));U[wt]=b}else zl(),(b.flags&128)===0&&(b.memoizedState=null),b.flags|=4;sn(b),U=!1}else U=p8(),y!==null&&y.memoizedState!==null&&(y.memoizedState.hydrationErrors=U),U=!0;if(!U)return b.flags&256?(Oi(b),b):(Oi(b),null)}return Oi(b),(b.flags&128)!==0?(b.lanes=x,b):(x=M!==null,y=y!==null&&y.memoizedState!==null,x&&(M=b.child,U=null,M.alternate!==null&&M.alternate.memoizedState!==null&&M.alternate.memoizedState.cachePool!==null&&(U=M.alternate.memoizedState.cachePool.pool),z=null,M.memoizedState!==null&&M.memoizedState.cachePool!==null&&(z=M.memoizedState.cachePool.pool),z!==U&&(M.flags|=2048)),x!==y&&x&&(b.child.flags|=8192),sI(b,b.updateQueue),sn(b),null);case 4:return be(),y===null&&A5(b.stateNode.containerInfo),sn(b),null;case 10:return vs(b.type),sn(b),null;case 19:if(se(Pn),M=b.memoizedState,M===null)return sn(b),null;if(U=(b.flags&128)!==0,z=M.rendering,z===null)if(U)ov(M,!1);else{if(Dn!==0||y!==null&&(y.flags&128)!==0)for(y=b.child;y!==null;){if(z=KN(y),z!==null){for(b.flags|=128,ov(M,!1),y=z.updateQueue,b.updateQueue=y,sI(b,y),b.subtreeFlags=0,y=x,x=b.child;x!==null;)ck(x,y),x=x.sibling;return pe(Pn,Pn.current&1|2),dr&&bs(b,M.treeForkCount),b.child}y=y.sibling}M.tail!==null&&Ve()>pI&&(b.flags|=128,U=!0,ov(M,!1),b.lanes=4194304)}else{if(!U)if(y=KN(z),y!==null){if(b.flags|=128,U=!0,y=y.updateQueue,b.updateQueue=y,sI(b,y),ov(M,!0),M.tail===null&&M.tailMode==="hidden"&&!z.alternate&&!dr)return sn(b),null}else 2*Ve()-M.renderingStartTime>pI&&x!==536870912&&(b.flags|=128,U=!0,ov(M,!1),b.lanes=4194304);M.isBackwards?(z.sibling=b.child,b.child=z):(y=M.last,y!==null?y.sibling=z:b.child=z,M.last=z)}return M.tail!==null?(y=M.tail,M.rendering=y,M.tail=y.sibling,M.renderingStartTime=Ve(),y.sibling=null,x=Pn.current,pe(Pn,U?x&1|2:x&1),dr&&bs(b,M.treeForkCount),y):(sn(b),null);case 22:case 23:return Oi(b),O8(),M=b.memoizedState!==null,y!==null?y.memoizedState!==null!==M&&(b.flags|=8192):M&&(b.flags|=8192),M?(x&536870912)!==0&&(b.flags&128)===0&&(sn(b),b.subtreeFlags&6&&(b.flags|=8192)):sn(b),x=b.updateQueue,x!==null&&sI(b,x.retryQueue),x=null,y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(x=y.memoizedState.cachePool.pool),M=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(M=b.memoizedState.cachePool.pool),M!==x&&(b.flags|=2048),y!==null&&se(Xl),null;case 24:return x=null,y!==null&&(x=y.memoizedState.cache),b.memoizedState.cache!==x&&(b.flags|=2048),vs(Bn),sn(b),null;case 25:return null;case 30:return null}throw Error(n(156,b.tag))}function UEe(y,b){switch(d8(b),b.tag){case 1:return y=b.flags,y&65536?(b.flags=y&-65537|128,b):null;case 3:return vs(Bn),be(),y=b.flags,(y&65536)!==0&&(y&128)===0?(b.flags=y&-65537|128,b):null;case 26:case 27:case 5:return _(b),null;case 31:if(b.memoizedState!==null){if(Oi(b),b.alternate===null)throw Error(n(340));zl()}return y=b.flags,y&65536?(b.flags=y&-65537|128,b):null;case 13:if(Oi(b),y=b.memoizedState,y!==null&&y.dehydrated!==null){if(b.alternate===null)throw Error(n(340));zl()}return y=b.flags,y&65536?(b.flags=y&-65537|128,b):null;case 19:return se(Pn),null;case 4:return be(),null;case 10:return vs(b.type),null;case 22:case 23:return Oi(b),O8(),y!==null&&se(Xl),y=b.flags,y&65536?(b.flags=y&-65537|128,b):null;case 24:return vs(Bn),null;case 25:return null;default:return null}}function Cz(y,b){switch(d8(b),b.tag){case 3:vs(Bn),be();break;case 26:case 27:case 5:_(b);break;case 4:be();break;case 31:b.memoizedState!==null&&Oi(b);break;case 13:Oi(b);break;case 19:se(Pn);break;case 10:vs(b.type);break;case 22:case 23:Oi(b),O8(),y!==null&&se(Xl);break;case 24:vs(Bn)}}function sv(y,b){try{var x=b.updateQueue,M=x!==null?x.lastEffect:null;if(M!==null){var U=M.next;x=U;do{if((x.tag&y)===y){M=void 0;var z=x.create,ie=x.inst;M=z(),ie.destroy=M}x=x.next}while(x!==U)}}catch(_e){Ur(b,b.return,_e)}}function Dc(y,b,x){try{var M=b.updateQueue,U=M!==null?M.lastEffect:null;if(U!==null){var z=U.next;M=z;do{if((M.tag&y)===y){var ie=M.inst,_e=ie.destroy;if(_e!==void 0){ie.destroy=void 0,U=b;var Be=x,et=_e;try{et()}catch(ct){Ur(U,Be,ct)}}}M=M.next}while(M!==z)}}catch(ct){Ur(b,b.return,ct)}}function Lz(y){var b=y.updateQueue;if(b!==null){var x=y.stateNode;try{xk(b,x)}catch(M){Ur(y,y.return,M)}}}function qz(y,b,x){x.props=Zl(y.type,y.memoizedProps),x.state=y.memoizedState;try{x.componentWillUnmount()}catch(M){Ur(y,b,M)}}function cv(y,b){try{var x=y.ref;if(x!==null){switch(y.tag){case 26:case 27:case 5:var M=y.stateNode;break;case 30:M=y.stateNode;break;default:M=y.stateNode}typeof x=="function"?y.refCleanup=x(M):x.current=M}}catch(U){Ur(y,b,U)}}function So(y,b){var x=y.ref,M=y.refCleanup;if(x!==null)if(typeof M=="function")try{M()}catch(U){Ur(y,b,U)}finally{y.refCleanup=null,y=y.alternate,y!=null&&(y.refCleanup=null)}else if(typeof x=="function")try{x(null)}catch(U){Ur(y,b,U)}else x.current=null}function Bz(y){var b=y.type,x=y.memoizedProps,M=y.stateNode;try{e:switch(b){case"button":case"input":case"select":case"textarea":x.autoFocus&&M.focus();break e;case"img":x.src?M.src=x.src:x.srcSet&&(M.srcset=x.srcSet)}}catch(U){Ur(y,y.return,U)}}function a5(y,b,x){try{var M=y.stateNode;sAe(M,y.type,x,b),M[gt]=b}catch(U){Ur(y,y.return,U)}}function Uz(y){return y.tag===5||y.tag===3||y.tag===26||y.tag===27&&qc(y.type)||y.tag===4}function i5(y){e:for(;;){for(;y.sibling===null;){if(y.return===null||Uz(y.return))return null;y=y.return}for(y.sibling.return=y.return,y=y.sibling;y.tag!==5&&y.tag!==6&&y.tag!==18;){if(y.tag===27&&qc(y.type)||y.flags&2||y.child===null||y.tag===4)continue e;y.child.return=y,y=y.child}if(!(y.flags&2))return y.stateNode}}function u5(y,b,x){var M=y.tag;if(M===5||M===6)y=y.stateNode,b?(x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x).insertBefore(y,b):(b=x.nodeType===9?x.body:x.nodeName==="HTML"?x.ownerDocument.body:x,b.appendChild(y),x=x._reactRootContainer,x!=null||b.onclick!==null||(b.onclick=$i));else if(M!==4&&(M===27&&qc(y.type)&&(x=y.stateNode,b=null),y=y.child,y!==null))for(u5(y,b,x),y=y.sibling;y!==null;)u5(y,b,x),y=y.sibling}function cI(y,b,x){var M=y.tag;if(M===5||M===6)y=y.stateNode,b?x.insertBefore(y,b):x.appendChild(y);else if(M!==4&&(M===27&&qc(y.type)&&(x=y.stateNode),y=y.child,y!==null))for(cI(y,b,x),y=y.sibling;y!==null;)cI(y,b,x),y=y.sibling}function Qz(y){var b=y.stateNode,x=y.memoizedProps;try{for(var M=y.type,U=b.attributes;U.length;)b.removeAttributeNode(U[0]);ga(b,M,x),b[wt]=y,b[gt]=x}catch(z){Ur(y,y.return,z)}}var Es=!1,Vn=!1,o5=!1,Vz=typeof WeakSet=="function"?WeakSet:Set,ia=null;function QEe(y,b){if(y=y.containerInfo,R5=II,y=Ql(y),Tc(y)){if("selectionStart"in y)var x={start:y.selectionStart,end:y.selectionEnd};else e:{x=(x=y.ownerDocument)&&x.defaultView||window;var M=x.getSelection&&x.getSelection();if(M&&M.rangeCount!==0){x=M.anchorNode;var U=M.anchorOffset,z=M.focusNode;M=M.focusOffset;try{x.nodeType,z.nodeType}catch{x=null;break e}var ie=0,_e=-1,Be=-1,et=0,ct=0,mt=y,rt=null;t:for(;;){for(var ut;mt!==x||U!==0&&mt.nodeType!==3||(_e=ie+U),mt!==z||M!==0&&mt.nodeType!==3||(Be=ie+M),mt.nodeType===3&&(ie+=mt.nodeValue.length),(ut=mt.firstChild)!==null;)rt=mt,mt=ut;for(;;){if(mt===y)break t;if(rt===x&&++et===U&&(_e=ie),rt===z&&++ct===M&&(Be=ie),(ut=mt.nextSibling)!==null)break;mt=rt,rt=mt.parentNode}mt=ut}x=_e===-1||Be===-1?null:{start:_e,end:Be}}else x=null}x=x||{start:0,end:0}}else x=null;for(N5={focusedElem:y,selectionRange:x},II=!1,ia=b;ia!==null;)if(b=ia,y=b.child,(b.subtreeFlags&1028)!==0&&y!==null)y.return=b,ia=y;else for(;ia!==null;){switch(b=ia,z=b.alternate,y=b.flags,b.tag){case 0:if((y&4)!==0&&(y=b.updateQueue,y=y!==null?y.events:null,y!==null))for(x=0;x<y.length;x++)U=y[x],U.ref.impl=U.nextImpl;break;case 11:case 15:break;case 1:if((y&1024)!==0&&z!==null){y=void 0,x=b,U=z.memoizedProps,z=z.memoizedState,M=x.stateNode;try{var It=Zl(x.type,U);y=M.getSnapshotBeforeUpdate(It,z),M.__reactInternalSnapshotBeforeUpdate=y}catch(Bt){Ur(x,x.return,Bt)}}break;case 3:if((y&1024)!==0){if(y=b.stateNode.containerInfo,x=y.nodeType,x===9)F5(y);else if(x===1)switch(y.nodeName){case"HEAD":case"HTML":case"BODY":F5(y);break;default:y.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((y&1024)!==0)throw Error(n(163))}if(y=b.sibling,y!==null){y.return=b.return,ia=y;break}ia=b.return}}function Hz(y,b,x){var M=x.flags;switch(x.tag){case 0:case 11:case 15:Os(y,x),M&4&&sv(5,x);break;case 1:if(Os(y,x),M&4)if(y=x.stateNode,b===null)try{y.componentDidMount()}catch(ie){Ur(x,x.return,ie)}else{var U=Zl(x.type,b.memoizedProps);b=b.memoizedState;try{y.componentDidUpdate(U,b,y.__reactInternalSnapshotBeforeUpdate)}catch(ie){Ur(x,x.return,ie)}}M&64&&Lz(x),M&512&&cv(x,x.return);break;case 3:if(Os(y,x),M&64&&(y=x.updateQueue,y!==null)){if(b=null,x.child!==null)switch(x.child.tag){case 27:case 5:b=x.child.stateNode;break;case 1:b=x.child.stateNode}try{xk(y,b)}catch(ie){Ur(x,x.return,ie)}}break;case 27:b===null&&M&4&&Qz(x);case 26:case 5:Os(y,x),b===null&&M&4&&Bz(x),M&512&&cv(x,x.return);break;case 12:Os(y,x);break;case 31:Os(y,x),M&4&&Gz(y,x);break;case 13:Os(y,x),M&4&&$z(y,x),M&64&&(y=x.memoizedState,y!==null&&(y=y.dehydrated,y!==null&&(x=JEe.bind(null,x),mAe(y,x))));break;case 22:if(M=x.memoizedState!==null||Es,!M){b=b!==null&&b.memoizedState!==null||Vn,U=Es;var z=Vn;Es=M,(Vn=b)&&!z?xs(y,x,(x.subtreeFlags&8772)!==0):Os(y,x),Es=U,Vn=z}break;case 30:break;default:Os(y,x)}}function kz(y){var b=y.alternate;b!==null&&(y.alternate=null,kz(b)),y.child=null,y.deletions=null,y.sibling=null,y.tag===5&&(b=y.stateNode,b!==null&&St(b)),y.stateNode=null,y.return=null,y.dependencies=null,y.memoizedProps=null,y.memoizedState=null,y.pendingProps=null,y.stateNode=null,y.updateQueue=null}var gn=null,ii=!1;function As(y,b,x){for(x=x.child;x!==null;)zz(y,b,x),x=x.sibling}function zz(y,b,x){if(Ne&&typeof Ne.onCommitFiberUnmount=="function")try{Ne.onCommitFiberUnmount(re,x)}catch{}switch(x.tag){case 26:Vn||So(x,b),As(y,b,x),x.memoizedState?x.memoizedState.count--:x.stateNode&&(x=x.stateNode,x.parentNode.removeChild(x));break;case 27:Vn||So(x,b);var M=gn,U=ii;qc(x.type)&&(gn=x.stateNode,ii=!1),As(y,b,x),gv(x.stateNode),gn=M,ii=U;break;case 5:Vn||So(x,b);case 6:if(M=gn,U=ii,gn=null,As(y,b,x),gn=M,ii=U,gn!==null)if(ii)try{(gn.nodeType===9?gn.body:gn.nodeName==="HTML"?gn.ownerDocument.body:gn).removeChild(x.stateNode)}catch(z){Ur(x,b,z)}else try{gn.removeChild(x.stateNode)}catch(z){Ur(x,b,z)}break;case 18:gn!==null&&(ii?(y=gn,LG(y.nodeType===9?y.body:y.nodeName==="HTML"?y.ownerDocument.body:y,x.stateNode),lg(y)):LG(gn,x.stateNode));break;case 4:M=gn,U=ii,gn=x.stateNode.containerInfo,ii=!0,As(y,b,x),gn=M,ii=U;break;case 0:case 11:case 14:case 15:Dc(2,x,b),Vn||Dc(4,x,b),As(y,b,x);break;case 1:Vn||(So(x,b),M=x.stateNode,typeof M.componentWillUnmount=="function"&&qz(x,b,M)),As(y,b,x);break;case 21:As(y,b,x);break;case 22:Vn=(M=Vn)||x.memoizedState!==null,As(y,b,x),Vn=M;break;default:As(y,b,x)}}function Gz(y,b){if(b.memoizedState===null&&(y=b.alternate,y!==null&&(y=y.memoizedState,y!==null))){y=y.dehydrated;try{lg(y)}catch(x){Ur(b,b.return,x)}}}function $z(y,b){if(b.memoizedState===null&&(y=b.alternate,y!==null&&(y=y.memoizedState,y!==null&&(y=y.dehydrated,y!==null))))try{lg(y)}catch(x){Ur(b,b.return,x)}}function VEe(y){switch(y.tag){case 31:case 13:case 19:var b=y.stateNode;return b===null&&(b=y.stateNode=new Vz),b;case 22:return y=y.stateNode,b=y._retryCache,b===null&&(b=y._retryCache=new Vz),b;default:throw Error(n(435,y.tag))}}function lI(y,b){var x=VEe(y);b.forEach(function(M){if(!x.has(M)){x.add(M);var U=WEe.bind(null,y,M);M.then(U,U)}})}function ui(y,b){var x=b.deletions;if(x!==null)for(var M=0;M<x.length;M++){var U=x[M],z=y,ie=b,_e=ie;e:for(;_e!==null;){switch(_e.tag){case 27:if(qc(_e.type)){gn=_e.stateNode,ii=!1;break e}break;case 5:gn=_e.stateNode,ii=!1;break e;case 3:case 4:gn=_e.stateNode.containerInfo,ii=!0;break e}_e=_e.return}if(gn===null)throw Error(n(160));zz(z,ie,U),gn=null,ii=!1,z=U.alternate,z!==null&&(z.return=null),U.return=null}if(b.subtreeFlags&13886)for(b=b.child;b!==null;)Xz(b,y),b=b.sibling}var Pu=null;function Xz(y,b){var x=y.alternate,M=y.flags;switch(y.tag){case 0:case 11:case 14:case 15:ui(b,y),oi(y),M&4&&(Dc(3,y,y.return),sv(3,y),Dc(5,y,y.return));break;case 1:ui(b,y),oi(y),M&512&&(Vn||x===null||So(x,x.return)),M&64&&Es&&(y=y.updateQueue,y!==null&&(M=y.callbacks,M!==null&&(x=y.shared.hiddenCallbacks,y.shared.hiddenCallbacks=x===null?M:x.concat(M))));break;case 26:var U=Pu;if(ui(b,y),oi(y),M&512&&(Vn||x===null||So(x,x.return)),M&4){var z=x!==null?x.memoizedState:null;if(M=y.memoizedState,x===null)if(M===null)if(y.stateNode===null){e:{M=y.type,x=y.memoizedProps,U=U.ownerDocument||U;t:switch(M){case"title":z=U.getElementsByTagName("title")[0],(!z||z[vt]||z[wt]||z.namespaceURI==="http://www.w3.org/2000/svg"||z.hasAttribute("itemprop"))&&(z=U.createElement(M),U.head.insertBefore(z,U.querySelector("head > title"))),ga(z,M,x),z[wt]=y,hr(z),M=z;break e;case"link":var ie=XG("link","href",U).get(M+(x.href||""));if(ie){for(var _e=0;_e<ie.length;_e++)if(z=ie[_e],z.getAttribute("href")===(x.href==null||x.href===""?null:x.href)&&z.getAttribute("rel")===(x.rel==null?null:x.rel)&&z.getAttribute("title")===(x.title==null?null:x.title)&&z.getAttribute("crossorigin")===(x.crossOrigin==null?null:x.crossOrigin)){ie.splice(_e,1);break t}}z=U.createElement(M),ga(z,M,x),U.head.appendChild(z);break;case"meta":if(ie=XG("meta","content",U).get(M+(x.content||""))){for(_e=0;_e<ie.length;_e++)if(z=ie[_e],z.getAttribute("content")===(x.content==null?null:""+x.content)&&z.getAttribute("name")===(x.name==null?null:x.name)&&z.getAttribute("property")===(x.property==null?null:x.property)&&z.getAttribute("http-equiv")===(x.httpEquiv==null?null:x.httpEquiv)&&z.getAttribute("charset")===(x.charSet==null?null:x.charSet)){ie.splice(_e,1);break t}}z=U.createElement(M),ga(z,M,x),U.head.appendChild(z);break;default:throw Error(n(468,M))}z[wt]=y,hr(z),M=z}y.stateNode=M}else KG(U,y.type,y.stateNode);else y.stateNode=$G(U,M,y.memoizedProps);else z!==M?(z===null?x.stateNode!==null&&(x=x.stateNode,x.parentNode.removeChild(x)):z.count--,M===null?KG(U,y.type,y.stateNode):$G(U,M,y.memoizedProps)):M===null&&y.stateNode!==null&&a5(y,y.memoizedProps,x.memoizedProps)}break;case 27:ui(b,y),oi(y),M&512&&(Vn||x===null||So(x,x.return)),x!==null&&M&4&&a5(y,y.memoizedProps,x.memoizedProps);break;case 5:if(ui(b,y),oi(y),M&512&&(Vn||x===null||So(x,x.return)),y.flags&32){U=y.stateNode;try{rs(U,"")}catch(It){Ur(y,y.return,It)}}M&4&&y.stateNode!=null&&(U=y.memoizedProps,a5(y,U,x!==null?x.memoizedProps:U)),M&1024&&(o5=!0);break;case 6:if(ui(b,y),oi(y),M&4){if(y.stateNode===null)throw Error(n(162));M=y.memoizedProps,x=y.stateNode;try{x.nodeValue=M}catch(It){Ur(y,y.return,It)}}break;case 3:if(OI=null,U=Pu,Pu=EI(b.containerInfo),ui(b,y),Pu=U,oi(y),M&4&&x!==null&&x.memoizedState.isDehydrated)try{lg(b.containerInfo)}catch(It){Ur(y,y.return,It)}o5&&(o5=!1,Kz(y));break;case 4:M=Pu,Pu=EI(y.stateNode.containerInfo),ui(b,y),oi(y),Pu=M;break;case 12:ui(b,y),oi(y);break;case 31:ui(b,y),oi(y),M&4&&(M=y.updateQueue,M!==null&&(y.updateQueue=null,lI(y,M)));break;case 13:ui(b,y),oi(y),y.child.flags&8192&&y.memoizedState!==null!=(x!==null&&x.memoizedState!==null)&&(fI=Ve()),M&4&&(M=y.updateQueue,M!==null&&(y.updateQueue=null,lI(y,M)));break;case 22:U=y.memoizedState!==null;var Be=x!==null&&x.memoizedState!==null,et=Es,ct=Vn;if(Es=et||U,Vn=ct||Be,ui(b,y),Vn=ct,Es=et,oi(y),M&8192)e:for(b=y.stateNode,b._visibility=U?b._visibility&-2:b._visibility|1,U&&(x===null||Be||Es||Vn||ed(y)),x=null,b=y;;){if(b.tag===5||b.tag===26){if(x===null){Be=x=b;try{if(z=Be.stateNode,U)ie=z.style,typeof ie.setProperty=="function"?ie.setProperty("display","none","important"):ie.display="none";else{_e=Be.stateNode;var mt=Be.memoizedProps.style,rt=mt!=null&&mt.hasOwnProperty("display")?mt.display:null;_e.style.display=rt==null||typeof rt=="boolean"?"":(""+rt).trim()}}catch(It){Ur(Be,Be.return,It)}}}else if(b.tag===6){if(x===null){Be=b;try{Be.stateNode.nodeValue=U?"":Be.memoizedProps}catch(It){Ur(Be,Be.return,It)}}}else if(b.tag===18){if(x===null){Be=b;try{var ut=Be.stateNode;U?qG(ut,!0):qG(Be.stateNode,!1)}catch(It){Ur(Be,Be.return,It)}}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===y)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===y)break e;for(;b.sibling===null;){if(b.return===null||b.return===y)break e;x===b&&(x=null),b=b.return}x===b&&(x=null),b.sibling.return=b.return,b=b.sibling}M&4&&(M=y.updateQueue,M!==null&&(x=M.retryQueue,x!==null&&(M.retryQueue=null,lI(y,x))));break;case 19:ui(b,y),oi(y),M&4&&(M=y.updateQueue,M!==null&&(y.updateQueue=null,lI(y,M)));break;case 30:break;case 21:break;default:ui(b,y),oi(y)}}function oi(y){var b=y.flags;if(b&2){try{for(var x,M=y.return;M!==null;){if(Uz(M)){x=M;break}M=M.return}if(x==null)throw Error(n(160));switch(x.tag){case 27:var U=x.stateNode,z=i5(y);cI(y,z,U);break;case 5:var ie=x.stateNode;x.flags&32&&(rs(ie,""),x.flags&=-33);var _e=i5(y);cI(y,_e,ie);break;case 3:case 4:var Be=x.stateNode.containerInfo,et=i5(y);u5(y,et,Be);break;default:throw Error(n(161))}}catch(ct){Ur(y,y.return,ct)}y.flags&=-3}b&4096&&(y.flags&=-4097)}function Kz(y){if(y.subtreeFlags&1024)for(y=y.child;y!==null;){var b=y;Kz(b),b.tag===5&&b.flags&1024&&b.stateNode.reset(),y=y.sibling}}function Os(y,b){if(b.subtreeFlags&8772)for(b=b.child;b!==null;)Hz(y,b.alternate,b),b=b.sibling}function ed(y){for(y=y.child;y!==null;){var b=y;switch(b.tag){case 0:case 11:case 14:case 15:Dc(4,b,b.return),ed(b);break;case 1:So(b,b.return);var x=b.stateNode;typeof x.componentWillUnmount=="function"&&qz(b,b.return,x),ed(b);break;case 27:gv(b.stateNode);case 26:case 5:So(b,b.return),ed(b);break;case 22:b.memoizedState===null&&ed(b);break;case 30:ed(b);break;default:ed(b)}y=y.sibling}}function xs(y,b,x){for(x=x&&(b.subtreeFlags&8772)!==0,b=b.child;b!==null;){var M=b.alternate,U=y,z=b,ie=z.flags;switch(z.tag){case 0:case 11:case 15:xs(U,z,x),sv(4,z);break;case 1:if(xs(U,z,x),M=z,U=M.stateNode,typeof U.componentDidMount=="function")try{U.componentDidMount()}catch(et){Ur(M,M.return,et)}if(M=z,U=M.updateQueue,U!==null){var _e=M.stateNode;try{var Be=U.shared.hiddenCallbacks;if(Be!==null)for(U.shared.hiddenCallbacks=null,U=0;U<Be.length;U++)Ok(Be[U],_e)}catch(et){Ur(M,M.return,et)}}x&&ie&64&&Lz(z),cv(z,z.return);break;case 27:Qz(z);case 26:case 5:xs(U,z,x),x&&M===null&&ie&4&&Bz(z),cv(z,z.return);break;case 12:xs(U,z,x);break;case 31:xs(U,z,x),x&&ie&4&&Gz(U,z);break;case 13:xs(U,z,x),x&&ie&4&&$z(U,z);break;case 22:z.memoizedState===null&&xs(U,z,x),cv(z,z.return);break;case 30:break;default:xs(U,z,x)}b=b.sibling}}function s5(y,b){var x=null;y!==null&&y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(x=y.memoizedState.cachePool.pool),y=null,b.memoizedState!==null&&b.memoizedState.cachePool!==null&&(y=b.memoizedState.cachePool.pool),y!==x&&(y!=null&&y.refCount++,x!=null&&K1(x))}function c5(y,b){y=null,b.alternate!==null&&(y=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==y&&(b.refCount++,y!=null&&K1(y))}function ju(y,b,x,M){if(b.subtreeFlags&10256)for(b=b.child;b!==null;)Jz(y,b,x,M),b=b.sibling}function Jz(y,b,x,M){var U=b.flags;switch(b.tag){case 0:case 11:case 15:ju(y,b,x,M),U&2048&&sv(9,b);break;case 1:ju(y,b,x,M);break;case 3:ju(y,b,x,M),U&2048&&(y=null,b.alternate!==null&&(y=b.alternate.memoizedState.cache),b=b.memoizedState.cache,b!==y&&(b.refCount++,y!=null&&K1(y)));break;case 12:if(U&2048){ju(y,b,x,M),y=b.stateNode;try{var z=b.memoizedProps,ie=z.id,_e=z.onPostCommit;typeof _e=="function"&&_e(ie,b.alternate===null?"mount":"update",y.passiveEffectDuration,-0)}catch(Be){Ur(b,b.return,Be)}}else ju(y,b,x,M);break;case 31:ju(y,b,x,M);break;case 13:ju(y,b,x,M);break;case 23:break;case 22:z=b.stateNode,ie=b.alternate,b.memoizedState!==null?z._visibility&2?ju(y,b,x,M):lv(y,b):z._visibility&2?ju(y,b,x,M):(z._visibility|=2,Zb(y,b,x,M,(b.subtreeFlags&10256)!==0||!1)),U&2048&&s5(ie,b);break;case 24:ju(y,b,x,M),U&2048&&c5(b.alternate,b);break;default:ju(y,b,x,M)}}function Zb(y,b,x,M,U){for(U=U&&((b.subtreeFlags&10256)!==0||!1),b=b.child;b!==null;){var z=y,ie=b,_e=x,Be=M,et=ie.flags;switch(ie.tag){case 0:case 11:case 15:Zb(z,ie,_e,Be,U),sv(8,ie);break;case 23:break;case 22:var ct=ie.stateNode;ie.memoizedState!==null?ct._visibility&2?Zb(z,ie,_e,Be,U):lv(z,ie):(ct._visibility|=2,Zb(z,ie,_e,Be,U)),U&&et&2048&&s5(ie.alternate,ie);break;case 24:Zb(z,ie,_e,Be,U),U&&et&2048&&c5(ie.alternate,ie);break;default:Zb(z,ie,_e,Be,U)}b=b.sibling}}function lv(y,b){if(b.subtreeFlags&10256)for(b=b.child;b!==null;){var x=y,M=b,U=M.flags;switch(M.tag){case 22:lv(x,M),U&2048&&s5(M.alternate,M);break;case 24:lv(x,M),U&2048&&c5(M.alternate,M);break;default:lv(x,M)}b=b.sibling}}var dv=8192;function eg(y,b,x){if(y.subtreeFlags&dv)for(y=y.child;y!==null;)Wz(y,b,x),y=y.sibling}function Wz(y,b,x){switch(y.tag){case 26:eg(y,b,x),y.flags&dv&&y.memoizedState!==null&&RAe(x,Pu,y.memoizedState,y.memoizedProps);break;case 5:eg(y,b,x);break;case 3:case 4:var M=Pu;Pu=EI(y.stateNode.containerInfo),eg(y,b,x),Pu=M;break;case 22:y.memoizedState===null&&(M=y.alternate,M!==null&&M.memoizedState!==null?(M=dv,dv=16777216,eg(y,b,x),dv=M):eg(y,b,x));break;default:eg(y,b,x)}}function Yz(y){var b=y.alternate;if(b!==null&&(y=b.child,y!==null)){b.child=null;do b=y.sibling,y.sibling=null,y=b;while(y!==null)}}function fv(y){var b=y.deletions;if((y.flags&16)!==0){if(b!==null)for(var x=0;x<b.length;x++){var M=b[x];ia=M,eG(M,y)}Yz(y)}if(y.subtreeFlags&10256)for(y=y.child;y!==null;)Zz(y),y=y.sibling}function Zz(y){switch(y.tag){case 0:case 11:case 15:fv(y),y.flags&2048&&Dc(9,y,y.return);break;case 3:fv(y);break;case 12:fv(y);break;case 22:var b=y.stateNode;y.memoizedState!==null&&b._visibility&2&&(y.return===null||y.return.tag!==13)?(b._visibility&=-3,dI(y)):fv(y);break;default:fv(y)}}function dI(y){var b=y.deletions;if((y.flags&16)!==0){if(b!==null)for(var x=0;x<b.length;x++){var M=b[x];ia=M,eG(M,y)}Yz(y)}for(y=y.child;y!==null;){switch(b=y,b.tag){case 0:case 11:case 15:Dc(8,b,b.return),dI(b);break;case 22:x=b.stateNode,x._visibility&2&&(x._visibility&=-3,dI(b));break;default:dI(b)}y=y.sibling}}function eG(y,b){for(;ia!==null;){var x=ia;switch(x.tag){case 0:case 11:case 15:Dc(8,x,b);break;case 23:case 22:if(x.memoizedState!==null&&x.memoizedState.cachePool!==null){var M=x.memoizedState.cachePool.pool;M!=null&&M.refCount++}break;case 24:K1(x.memoizedState.cache)}if(M=x.child,M!==null)M.return=x,ia=M;else e:for(x=y;ia!==null;){M=ia;var U=M.sibling,z=M.return;if(kz(M),M===x){ia=null;break e}if(U!==null){U.return=z,ia=U;break e}ia=z}}}var HEe={getCacheForType:function(y){var b=ma(Bn),x=b.data.get(y);return x===void 0&&(x=y(),b.data.set(y,x)),x},cacheSignal:function(){return ma(Bn).controller.signal}},kEe=typeof WeakMap=="function"?WeakMap:Map,xr=0,Xr=null,tr=null,sr=0,Br=0,xi=null,Fc=!1,tg=!1,l5=!1,Rs=0,Dn=0,Pc=0,td=0,d5=0,Ri=0,rg=0,pv=null,si=null,f5=!1,fI=0,tG=0,pI=1/0,hI=null,jc=null,Jn=0,Mc=null,ng=null,Ns=0,p5=0,h5=null,rG=null,hv=0,y5=null;function Ni(){return(xr&2)!==0&&sr!==0?sr&-sr:V.T!==null?T5():bt()}function nG(){if(Ri===0)if((sr&536870912)===0||dr){var y=de;de<<=1,(de&3932160)===0&&(de=262144),Ri=y}else Ri=536870912;return y=Ai.current,y!==null&&(y.flags|=32),Ri}function ci(y,b,x){(y===Xr&&(Br===2||Br===9)||y.cancelPendingCommit!==null)&&(ag(y,0),Cc(y,sr,Ri,!1)),qe(y,x),((xr&2)===0||y!==Xr)&&(y===Xr&&((xr&2)===0&&(td|=x),Dn===4&&Cc(y,sr,Ri,!1)),Eo(y))}function aG(y,b,x){if((xr&6)!==0)throw Error(n(327));var M=!x&&(b&127)===0&&(b&y.expiredLanes)===0||ze(y,b),U=M?$Ee(y,b):b5(y,b,!0),z=M;do{if(U===0){tg&&!M&&Cc(y,b,0,!1);break}else{if(x=y.current.alternate,z&&!zEe(x)){U=b5(y,b,!1),z=!1;continue}if(U===2){if(z=b,y.errorRecoveryDisabledLanes&z)var ie=0;else ie=y.pendingLanes&-536870913,ie=ie!==0?ie:ie&536870912?536870912:0;if(ie!==0){b=ie;e:{var _e=y;U=pv;var Be=_e.current.memoizedState.isDehydrated;if(Be&&(ag(_e,ie).flags|=256),ie=b5(_e,ie,!1),ie!==2){if(l5&&!Be){_e.errorRecoveryDisabledLanes|=z,td|=z,U=4;break e}z=si,si=U,z!==null&&(si===null?si=z:si.push.apply(si,z))}U=ie}if(z=!1,U!==2)continue}}if(U===1){ag(y,0),Cc(y,b,0,!0);break}e:{switch(M=y,z=U,z){case 0:case 1:throw Error(n(345));case 4:if((b&4194048)!==b)break;case 6:Cc(M,b,Ri,!Fc);break e;case 2:si=null;break;case 3:case 5:break;default:throw Error(n(329))}if((b&62914560)===b&&(U=fI+300-Ve(),10<U)){if(Cc(M,b,Ri,!Fc),je(M,0,!0)!==0)break e;Ns=b,M.timeoutHandle=MG(iG.bind(null,M,x,si,hI,f5,b,Ri,td,rg,Fc,z,"Throttled",-0,0),U);break e}iG(M,x,si,hI,f5,b,Ri,td,rg,Fc,z,null,-0,0)}}break}while(!0);Eo(y)}function iG(y,b,x,M,U,z,ie,_e,Be,et,ct,mt,rt,ut){if(y.timeoutHandle=-1,mt=b.subtreeFlags,mt&8192||(mt&16785408)===16785408){mt={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:$i},Wz(b,z,mt);var It=(z&62914560)===z?fI-Ve():(z&4194048)===z?tG-Ve():0;if(It=NAe(mt,It),It!==null){Ns=z,y.cancelPendingCommit=It(pG.bind(null,y,b,z,x,M,U,ie,_e,Be,ct,mt,null,rt,ut)),Cc(y,z,ie,!et);return}}pG(y,b,z,x,M,U,ie,_e,Be)}function zEe(y){for(var b=y;;){var x=b.tag;if((x===0||x===11||x===15)&&b.flags&16384&&(x=b.updateQueue,x!==null&&(x=x.stores,x!==null)))for(var M=0;M<x.length;M++){var U=x[M],z=U.getSnapshot;U=U.value;try{if(!Nt(z(),U))return!1}catch{return!1}}if(x=b.child,b.subtreeFlags&16384&&x!==null)x.return=b,b=x;else{if(b===y)break;for(;b.sibling===null;){if(b.return===null||b.return===y)return!0;b=b.return}b.sibling.return=b.return,b=b.sibling}}return!0}function Cc(y,b,x,M){b&=~d5,b&=~td,y.suspendedLanes|=b,y.pingedLanes&=~b,M&&(y.warmLanes|=b),M=y.expirationTimes;for(var U=b;0<U;){var z=31-Pe(U),ie=1<<z;M[z]=-1,U&=~ie}x!==0&&Me(y,x,b)}function yI(){return(xr&6)===0?(yv(0),!1):!0}function m5(){if(tr!==null){if(Br===0)var y=tr.return;else y=tr,gs=Gl=null,F8(y),Xb=null,W1=0,y=tr;for(;y!==null;)Cz(y.alternate,y),y=y.return;tr=null}}function ag(y,b){var x=y.timeoutHandle;x!==-1&&(y.timeoutHandle=-1,dAe(x)),x=y.cancelPendingCommit,x!==null&&(y.cancelPendingCommit=null,x()),Ns=0,m5(),Xr=y,tr=x=ms(y.current,null),sr=b,Br=0,xi=null,Fc=!1,tg=ze(y,b),l5=!1,rg=Ri=d5=td=Pc=Dn=0,si=pv=null,f5=!1,(b&8)!==0&&(b|=b&32);var M=y.entangledLanes;if(M!==0)for(y=y.entanglements,M&=b;0<M;){var U=31-Pe(M),z=1<<U;b|=y[U],M&=~z}return Rs=b,CN(),x}function uG(y,b){Kt=null,V.H=iv,b===$b||b===kN?(b=wk(),Br=3):b===_8?(b=wk(),Br=4):Br=b===X8?8:b!==null&&typeof b=="object"&&typeof b.then=="function"?6:1,xi=b,tr===null&&(Dn=1,aI(y,ru(b,y.current)))}function oG(){var y=Ai.current;return y===null?!0:(sr&4194048)===sr?uu===null:(sr&62914560)===sr||(sr&536870912)!==0?y===uu:!1}function sG(){var y=V.H;return V.H=iv,y===null?iv:y}function cG(){var y=V.A;return V.A=HEe,y}function mI(){Dn=4,Fc||(sr&4194048)!==sr&&Ai.current!==null||(tg=!0),(Pc&134217727)===0&&(td&134217727)===0||Xr===null||Cc(Xr,sr,Ri,!1)}function b5(y,b,x){var M=xr;xr|=2;var U=sG(),z=cG();(Xr!==y||sr!==b)&&(hI=null,ag(y,b)),b=!1;var ie=Dn;e:do try{if(Br!==0&&tr!==null){var _e=tr,Be=xi;switch(Br){case 8:m5(),ie=6;break e;case 3:case 2:case 9:case 6:Ai.current===null&&(b=!0);var et=Br;if(Br=0,xi=null,ig(y,_e,Be,et),x&&tg){ie=0;break e}break;default:et=Br,Br=0,xi=null,ig(y,_e,Be,et)}}GEe(),ie=Dn;break}catch(ct){uG(y,ct)}while(!0);return b&&y.shellSuspendCounter++,gs=Gl=null,xr=M,V.H=U,V.A=z,tr===null&&(Xr=null,sr=0,CN()),ie}function GEe(){for(;tr!==null;)lG(tr)}function $Ee(y,b){var x=xr;xr|=2;var M=sG(),U=cG();Xr!==y||sr!==b?(hI=null,pI=Ve()+500,ag(y,b)):tg=ze(y,b);e:do try{if(Br!==0&&tr!==null){b=tr;var z=xi;t:switch(Br){case 1:Br=0,xi=null,ig(y,b,z,1);break;case 2:case 9:if(_k(z)){Br=0,xi=null,dG(b);break}b=function(){Br!==2&&Br!==9||Xr!==y||(Br=7),Eo(y)},z.then(b,b);break e;case 3:Br=7;break e;case 4:Br=5;break e;case 7:_k(z)?(Br=0,xi=null,dG(b)):(Br=0,xi=null,ig(y,b,z,7));break;case 5:var ie=null;switch(tr.tag){case 26:ie=tr.memoizedState;case 5:case 27:var _e=tr;if(ie?JG(ie):_e.stateNode.complete){Br=0,xi=null;var Be=_e.sibling;if(Be!==null)tr=Be;else{var et=_e.return;et!==null?(tr=et,bI(et)):tr=null}break t}}Br=0,xi=null,ig(y,b,z,5);break;case 6:Br=0,xi=null,ig(y,b,z,6);break;case 8:m5(),Dn=6;break e;default:throw Error(n(462))}}XEe();break}catch(ct){uG(y,ct)}while(!0);return gs=Gl=null,V.H=M,V.A=U,xr=x,tr!==null?0:(Xr=null,sr=0,CN(),Dn)}function XEe(){for(;tr!==null&&!xe();)lG(tr)}function lG(y){var b=jz(y.alternate,y,Rs);y.memoizedProps=y.pendingProps,b===null?bI(y):tr=b}function dG(y){var b=y,x=b.alternate;switch(b.tag){case 15:case 0:b=Rz(x,b,b.pendingProps,b.type,void 0,sr);break;case 11:b=Rz(x,b,b.pendingProps,b.type.render,b.ref,sr);break;case 5:F8(b);default:Cz(x,b),b=tr=ck(b,Rs),b=jz(x,b,Rs)}y.memoizedProps=y.pendingProps,b===null?bI(y):tr=b}function ig(y,b,x,M){gs=Gl=null,F8(b),Xb=null,W1=0;var U=b.return;try{if(CEe(y,U,b,x,sr)){Dn=1,aI(y,ru(x,y.current)),tr=null;return}}catch(z){if(U!==null)throw tr=U,z;Dn=1,aI(y,ru(x,y.current)),tr=null;return}b.flags&32768?(dr||M===1?y=!0:tg||(sr&536870912)!==0?y=!1:(Fc=y=!0,(M===2||M===9||M===3||M===6)&&(M=Ai.current,M!==null&&M.tag===13&&(M.flags|=16384))),fG(b,y)):bI(b)}function bI(y){var b=y;do{if((b.flags&32768)!==0){fG(b,Fc);return}y=b.return;var x=BEe(b.alternate,b,Rs);if(x!==null){tr=x;return}if(b=b.sibling,b!==null){tr=b;return}tr=b=y}while(b!==null);Dn===0&&(Dn=5)}function fG(y,b){do{var x=UEe(y.alternate,y);if(x!==null){x.flags&=32767,tr=x;return}if(x=y.return,x!==null&&(x.flags|=32768,x.subtreeFlags=0,x.deletions=null),!b&&(y=y.sibling,y!==null)){tr=y;return}tr=y=x}while(y!==null);Dn=6,tr=null}function pG(y,b,x,M,U,z,ie,_e,Be){y.cancelPendingCommit=null;do gI();while(Jn!==0);if((xr&6)!==0)throw Error(n(327));if(b!==null){if(b===y.current)throw Error(n(177));if(z=b.lanes|b.childLanes,z|=i8,it(y,x,z,ie,_e,Be),y===Xr&&(tr=Xr=null,sr=0),ng=b,Mc=y,Ns=x,p5=z,h5=U,rG=M,(b.subtreeFlags&10256)!==0||(b.flags&10256)!==0?(y.callbackNode=null,y.callbackPriority=0,YEe(X,function(){return gG(),null})):(y.callbackNode=null,y.callbackPriority=0),M=(b.flags&13878)!==0,(b.subtreeFlags&13878)!==0||M){M=V.T,V.T=null,U=G.p,G.p=2,ie=xr,xr|=4;try{QEe(y,b,x)}finally{xr=ie,G.p=U,V.T=M}}Jn=1,hG(),yG(),mG()}}function hG(){if(Jn===1){Jn=0;var y=Mc,b=ng,x=(b.flags&13878)!==0;if((b.subtreeFlags&13878)!==0||x){x=V.T,V.T=null;var M=G.p;G.p=2;var U=xr;xr|=4;try{Xz(b,y);var z=N5,ie=Ql(y.containerInfo),_e=z.focusedElem,Be=z.selectionRange;if(ie!==_e&&_e&&_e.ownerDocument&&Du(_e.ownerDocument.documentElement,_e)){if(Be!==null&&Tc(_e)){var et=Be.start,ct=Be.end;if(ct===void 0&&(ct=et),"selectionStart"in _e)_e.selectionStart=et,_e.selectionEnd=Math.min(ct,_e.value.length);else{var mt=_e.ownerDocument||document,rt=mt&&mt.defaultView||window;if(rt.getSelection){var ut=rt.getSelection(),It=_e.textContent.length,Bt=Math.min(Be.start,It),kr=Be.end===void 0?Bt:Math.min(Be.end,It);!ut.extend&&Bt>kr&&(ie=kr,kr=Bt,Bt=ie);var Xe=we(_e,Bt),He=we(_e,kr);if(Xe&&He&&(ut.rangeCount!==1||ut.anchorNode!==Xe.node||ut.anchorOffset!==Xe.offset||ut.focusNode!==He.node||ut.focusOffset!==He.offset)){var Ze=mt.createRange();Ze.setStart(Xe.node,Xe.offset),ut.removeAllRanges(),Bt>kr?(ut.addRange(Ze),ut.extend(He.node,He.offset)):(Ze.setEnd(He.node,He.offset),ut.addRange(Ze))}}}}for(mt=[],ut=_e;ut=ut.parentNode;)ut.nodeType===1&&mt.push({element:ut,left:ut.scrollLeft,top:ut.scrollTop});for(typeof _e.focus=="function"&&_e.focus(),_e=0;_e<mt.length;_e++){var ft=mt[_e];ft.element.scrollLeft=ft.left,ft.element.scrollTop=ft.top}}II=!!R5,N5=R5=null}finally{xr=U,G.p=M,V.T=x}}y.current=b,Jn=2}}function yG(){if(Jn===2){Jn=0;var y=Mc,b=ng,x=(b.flags&8772)!==0;if((b.subtreeFlags&8772)!==0||x){x=V.T,V.T=null;var M=G.p;G.p=2;var U=xr;xr|=4;try{Hz(y,b.alternate,b)}finally{xr=U,G.p=M,V.T=x}}Jn=3}}function mG(){if(Jn===4||Jn===3){Jn=0,Ce();var y=Mc,b=ng,x=Ns,M=rG;(b.subtreeFlags&10256)!==0||(b.flags&10256)!==0?Jn=5:(Jn=0,ng=Mc=null,bG(y,y.pendingLanes));var U=y.pendingLanes;if(U===0&&(jc=null),yt(x),b=b.stateNode,Ne&&typeof Ne.onCommitFiberRoot=="function")try{Ne.onCommitFiberRoot(re,b,void 0,(b.current.flags&128)===128)}catch{}if(M!==null){b=V.T,U=G.p,G.p=2,V.T=null;try{for(var z=y.onRecoverableError,ie=0;ie<M.length;ie++){var _e=M[ie];z(_e.value,{componentStack:_e.stack})}}finally{V.T=b,G.p=U}}(Ns&3)!==0&&gI(),Eo(y),U=y.pendingLanes,(x&261930)!==0&&(U&42)!==0?y===y5?hv++:(hv=0,y5=y):hv=0,yv(0)}}function bG(y,b){(y.pooledCacheLanes&=b)===0&&(b=y.pooledCache,b!=null&&(y.pooledCache=null,K1(b)))}function gI(){return hG(),yG(),mG(),gG()}function gG(){if(Jn!==5)return!1;var y=Mc,b=p5;p5=0;var x=yt(Ns),M=V.T,U=G.p;try{G.p=32>x?32:x,V.T=null,x=h5,h5=null;var z=Mc,ie=Ns;if(Jn=0,ng=Mc=null,Ns=0,(xr&6)!==0)throw Error(n(331));var _e=xr;if(xr|=4,Zz(z.current),Jz(z,z.current,ie,x),xr=_e,yv(0,!1),Ne&&typeof Ne.onPostCommitFiberRoot=="function")try{Ne.onPostCommitFiberRoot(re,z)}catch{}return!0}finally{G.p=U,V.T=M,bG(y,b)}}function vG(y,b,x){b=ru(x,b),b=$8(y.stateNode,b,2),y=Rc(y,b,2),y!==null&&(qe(y,2),Eo(y))}function Ur(y,b,x){if(y.tag===3)vG(y,y,x);else for(;b!==null;){if(b.tag===3){vG(b,y,x);break}else if(b.tag===1){var M=b.stateNode;if(typeof b.type.getDerivedStateFromError=="function"||typeof M.componentDidCatch=="function"&&(jc===null||!jc.has(M))){y=ru(x,y),x=_z(2),M=Rc(b,x,2),M!==null&&(Tz(x,M,b,y),qe(M,2),Eo(M));break}}b=b.return}}function g5(y,b,x){var M=y.pingCache;if(M===null){M=y.pingCache=new kEe;var U=new Set;M.set(b,U)}else U=M.get(b),U===void 0&&(U=new Set,M.set(b,U));U.has(x)||(l5=!0,U.add(x),y=KEe.bind(null,y,b,x),b.then(y,y))}function KEe(y,b,x){var M=y.pingCache;M!==null&&M.delete(b),y.pingedLanes|=y.suspendedLanes&x,y.warmLanes&=~x,Xr===y&&(sr&x)===x&&(Dn===4||Dn===3&&(sr&62914560)===sr&&300>Ve()-fI?(xr&2)===0&&ag(y,0):d5|=x,rg===sr&&(rg=0)),Eo(y)}function _G(y,b){b===0&&(b=fe()),y=Hl(y,b),y!==null&&(qe(y,b),Eo(y))}function JEe(y){var b=y.memoizedState,x=0;b!==null&&(x=b.retryLane),_G(y,x)}function WEe(y,b){var x=0;switch(y.tag){case 31:case 13:var M=y.stateNode,U=y.memoizedState;U!==null&&(x=U.retryLane);break;case 19:M=y.stateNode;break;case 22:M=y.stateNode._retryCache;break;default:throw Error(n(314))}M!==null&&M.delete(b),_G(y,x)}function YEe(y,b){return ce(y,b)}var vI=null,ug=null,v5=!1,_I=!1,_5=!1,Lc=0;function Eo(y){y!==ug&&y.next===null&&(ug===null?vI=ug=y:ug=ug.next=y),_I=!0,v5||(v5=!0,eAe())}function yv(y,b){if(!_5&&_I){_5=!0;do for(var x=!1,M=vI;M!==null;){if(y!==0){var U=M.pendingLanes;if(U===0)var z=0;else{var ie=M.suspendedLanes,_e=M.pingedLanes;z=(1<<31-Pe(42|y)+1)-1,z&=U&~(ie&~_e),z=z&201326741?z&201326741|1:z?z|2:0}z!==0&&(x=!0,EG(M,z))}else z=sr,z=je(M,M===Xr?z:0,M.cancelPendingCommit!==null||M.timeoutHandle!==-1),(z&3)===0||ze(M,z)||(x=!0,EG(M,z));M=M.next}while(x);_5=!1}}function ZEe(){TG()}function TG(){_I=v5=!1;var y=0;Lc!==0&&lAe()&&(y=Lc);for(var b=Ve(),x=null,M=vI;M!==null;){var U=M.next,z=wG(M,b);z===0?(M.next=null,x===null?vI=U:x.next=U,U===null&&(ug=x)):(x=M,(y!==0||(z&3)!==0)&&(_I=!0)),M=U}Jn!==0&&Jn!==5||yv(y),Lc!==0&&(Lc=0)}function wG(y,b){for(var x=y.suspendedLanes,M=y.pingedLanes,U=y.expirationTimes,z=y.pendingLanes&-62914561;0<z;){var ie=31-Pe(z),_e=1<<ie,Be=U[ie];Be===-1?((_e&x)===0||(_e&M)!==0)&&(U[ie]=at(_e,b)):Be<=b&&(y.expiredLanes|=_e),z&=~_e}if(b=Xr,x=sr,x=je(y,y===b?x:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),M=y.callbackNode,x===0||y===b&&(Br===2||Br===9)||y.cancelPendingCommit!==null)return M!==null&&M!==null&&Se(M),y.callbackNode=null,y.callbackPriority=0;if((x&3)===0||ze(y,x)){if(b=x&-x,b===y.callbackPriority)return b;switch(M!==null&&Se(M),yt(x)){case 2:case 8:x=oe;break;case 32:x=X;break;case 268435456:x=he;break;default:x=X}return M=SG.bind(null,y),x=ce(x,M),y.callbackPriority=b,y.callbackNode=x,b}return M!==null&&M!==null&&Se(M),y.callbackPriority=2,y.callbackNode=null,2}function SG(y,b){if(Jn!==0&&Jn!==5)return y.callbackNode=null,y.callbackPriority=0,null;var x=y.callbackNode;if(gI()&&y.callbackNode!==x)return null;var M=sr;return M=je(y,y===Xr?M:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),M===0?null:(aG(y,M,b),wG(y,Ve()),y.callbackNode!=null&&y.callbackNode===x?SG.bind(null,y):null)}function EG(y,b){if(gI())return null;aG(y,b,!0)}function eAe(){fAe(function(){(xr&6)!==0?ce(Ye,ZEe):TG()})}function T5(){if(Lc===0){var y=zb;y===0&&(y=K,K<<=1,(K&261888)===0&&(K=256)),Lc=y}return Lc}function AG(y){return y==null||typeof y=="symbol"||typeof y=="boolean"?null:typeof y=="function"?y:as(""+y)}function OG(y,b){var x=b.ownerDocument.createElement("input");return x.name=b.name,x.value=b.value,y.id&&x.setAttribute("form",y.id),b.parentNode.insertBefore(x,b),y=new FormData(y),x.parentNode.removeChild(x),y}function tAe(y,b,x,M,U){if(b==="submit"&&x&&x.stateNode===U){var z=AG((U[gt]||null).action),ie=M.submitter;ie&&(b=(b=ie[gt]||null)?AG(b.formAction):ie.getAttribute("formAction"),b!==null&&(z=b,ie=null));var _e=new Ll("action","action",null,M,U);y.push({event:_e,listeners:[{instance:null,listener:function(){if(M.defaultPrevented){if(Lc!==0){var Be=ie?OG(U,ie):new FormData(U);Q8(x,{pending:!0,data:Be,method:U.method,action:z},null,Be)}}else typeof z=="function"&&(_e.preventDefault(),Be=ie?OG(U,ie):new FormData(U),Q8(x,{pending:!0,data:Be,method:U.method,action:z},z,Be))},currentTarget:U}]})}}for(var w5=0;w5<a8.length;w5++){var S5=a8[w5],rAe=S5.toLowerCase(),nAe=S5[0].toUpperCase()+S5.slice(1);Fu(rAe,"on"+nAe)}Fu(qn,"onAnimationEnd"),Fu(Vl,"onAnimationIteration"),Fu(eu,"onAnimationStart"),Fu("dblclick","onDoubleClick"),Fu("focusin","onFocus"),Fu("focusout","onBlur"),Fu(jN,"onTransitionRun"),Fu(qb,"onTransitionStart"),Fu(G1,"onTransitionCancel"),Fu(ys,"onTransitionEnd"),xn("onMouseEnter",["mouseout","mouseover"]),xn("onMouseLeave",["mouseout","mouseover"]),xn("onPointerEnter",["pointerout","pointerover"]),xn("onPointerLeave",["pointerout","pointerover"]),Or("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Or("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Or("onBeforeInput",["compositionend","keypress","textInput","paste"]),Or("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Or("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var mv="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aAe=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(mv));function xG(y,b){b=(b&4)!==0;for(var x=0;x<y.length;x++){var M=y[x],U=M.event;M=M.listeners;e:{var z=void 0;if(b)for(var ie=M.length-1;0<=ie;ie--){var _e=M[ie],Be=_e.instance,et=_e.currentTarget;if(_e=_e.listener,Be!==z&&U.isPropagationStopped())break e;z=_e,U.currentTarget=et;try{z(U)}catch(ct){MN(ct)}U.currentTarget=null,z=Be}else for(ie=0;ie<M.length;ie++){if(_e=M[ie],Be=_e.instance,et=_e.currentTarget,_e=_e.listener,Be!==z&&U.isPropagationStopped())break e;z=_e,U.currentTarget=et;try{z(U)}catch(ct){MN(ct)}U.currentTarget=null,z=Be}}}}function rr(y,b){var x=b[ht];x===void 0&&(x=b[ht]=new Set);var M=y+"__bubble";x.has(M)||(RG(b,y,2,!1),x.add(M))}function E5(y,b,x){var M=0;b&&(M|=4),RG(x,y,M,b)}var TI="_reactListening"+Math.random().toString(36).slice(2);function A5(y){if(!y[TI]){y[TI]=!0,Ir.forEach(function(x){x!=="selectionchange"&&(aAe.has(x)||E5(x,!1,y),E5(x,!0,y))});var b=y.nodeType===9?y:y.ownerDocument;b===null||b[TI]||(b[TI]=!0,E5("selectionchange",!1,b))}}function RG(y,b,x,M){switch(n$(b)){case 2:var U=FAe;break;case 8:U=PAe;break;default:U=U5}x=U.bind(null,b,x,y),U=void 0,!Nb||b!=="touchstart"&&b!=="touchmove"&&b!=="wheel"||(U=!0),M?U!==void 0?y.addEventListener(b,x,{capture:!0,passive:U}):y.addEventListener(b,x,!0):U!==void 0?y.addEventListener(b,x,{passive:U}):y.addEventListener(b,x,!1)}function O5(y,b,x,M,U){var z=M;if((b&1)===0&&(b&2)===0&&M!==null)e:for(;;){if(M===null)return;var ie=M.tag;if(ie===3||ie===4){var _e=M.stateNode.containerInfo;if(_e===U)break;if(ie===4)for(ie=M.return;ie!==null;){var Be=ie.tag;if((Be===3||Be===4)&&ie.stateNode.containerInfo===U)return;ie=ie.return}for(;_e!==null;){if(ie=Qt(_e),ie===null)return;if(Be=ie.tag,Be===5||Be===6||Be===26||Be===27){M=z=ie;continue e}_e=_e.parentNode}}M=M.return}jl(function(){var et=z,ct=is(x),mt=[];e:{var rt=ok.get(y);if(rt!==void 0){var ut=Ll,It=y;switch(y){case"keypress":if(Cl(x)===0)break e;case"keydown":case"keyup":ut=Bl;break;case"focusin":It="focus",ut=pc;break;case"focusout":It="blur",ut=pc;break;case"beforeblur":case"afterblur":ut=pc;break;case"click":if(x.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ut=TN;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ut=e8;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ut=mc;break;case qn:case Vl:case eu:ut=EN;break;case ys:ut=fs;break;case"scroll":case"scrollend":ut=_N;break;case"wheel":ut=Q1;break;case"copy":case"cut":case"paste":ut=t8;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ut=Ln;break;case"toggle":case"beforetoggle":ut=r8}var Bt=(b&4)!==0,kr=!Bt&&(y==="scroll"||y==="scrollend"),Xe=Bt?rt!==null?rt+"Capture":null:rt;Bt=[];for(var He=et,Ze;He!==null;){var ft=He;if(Ze=ft.stateNode,ft=ft.tag,ft!==5&&ft!==26&&ft!==27||Ze===null||Xe===null||(ft=Ti(He,Xe),ft!=null&&Bt.push(bv(He,ft,Ze))),kr)break;He=He.return}0<Bt.length&&(rt=new ut(rt,It,null,x,ct),mt.push({event:rt,listeners:Bt}))}}if((b&7)===0){e:{if(rt=y==="mouseover"||y==="pointerover",ut=y==="mouseout"||y==="pointerout",rt&&x!==Pl&&(It=x.relatedTarget||x.fromElement)&&(Qt(It)||It[lr]))break e;if((ut||rt)&&(rt=ct.window===ct?ct:(rt=ct.ownerDocument)?rt.defaultView||rt.parentWindow:window,ut?(It=x.relatedTarget||x.toElement,ut=et,It=It?Qt(It):null,It!==null&&(kr=t(It),Bt=It.tag,It!==kr||Bt!==5&&Bt!==27&&Bt!==6)&&(It=null)):(ut=null,It=et),ut!==It)){if(Bt=TN,ft="onMouseLeave",Xe="onMouseEnter",He="mouse",(y==="pointerout"||y==="pointerover")&&(Bt=Ln,ft="onPointerLeave",Xe="onPointerEnter",He="pointer"),kr=ut==null?rt:pr(ut),Ze=It==null?rt:pr(It),rt=new Bt(ft,He+"leave",ut,x,ct),rt.target=kr,rt.relatedTarget=Ze,ft=null,Qt(ct)===et&&(Bt=new Bt(Xe,He+"enter",It,x,ct),Bt.target=Ze,Bt.relatedTarget=kr,ft=Bt),kr=ft,ut&&It)t:{for(Bt=iAe,Xe=ut,He=It,Ze=0,ft=Xe;ft;ft=Bt(ft))Ze++;ft=0;for(var Ct=He;Ct;Ct=Bt(Ct))ft++;for(;0<Ze-ft;)Xe=Bt(Xe),Ze--;for(;0<ft-Ze;)He=Bt(He),ft--;for(;Ze--;){if(Xe===He||He!==null&&Xe===He.alternate){Bt=Xe;break t}Xe=Bt(Xe),He=Bt(He)}Bt=null}else Bt=null;ut!==null&&NG(mt,rt,ut,Bt,!1),It!==null&&kr!==null&&NG(mt,kr,It,Bt,!0)}}e:{if(rt=et?pr(et):window,ut=rt.nodeName&&rt.nodeName.toLowerCase(),ut==="select"||ut==="input"&&rt.type==="file")var wr=_c;else if(Fb(rt))if(z1)wr=_t;else{wr=nt;var Ft=ot}else ut=rt.nodeName,!ut||ut.toLowerCase()!=="input"||rt.type!=="checkbox"&&rt.type!=="radio"?et&&fc(et.elementType)&&(wr=_c):wr=dt;if(wr&&(wr=wr(y,et))){DN(mt,wr,x,ct);break e}Ft&&Ft(y,rt,et),y==="focusout"&&et&&rt.type==="number"&&et.memoizedProps.value!=null&&dc(rt,"number",rt.value)}switch(Ft=et?pr(et):window,y){case"focusin":(Fb(Ft)||Ft.contentEditable==="true")&&(Qr=Ft,ai=et,Si=null);break;case"focusout":Si=ai=Qr=null;break;case"mousedown":_o=!0;break;case"contextmenu":case"mouseup":case"dragend":_o=!1,Lb(mt,x,ct);break;case"selectionchange":if(Cb)break;case"keydown":case"keyup":Lb(mt,x,ct)}var Jt;if(wi)e:{switch(y){case"compositionstart":var cr="onCompositionStart";break e;case"compositionend":cr="onCompositionEnd";break e;case"compositionupdate":cr="onCompositionUpdate";break e}cr=void 0}else gc?Db(y,x)&&(cr="onCompositionEnd"):y==="keydown"&&x.keyCode===229&&(cr="onCompositionStart");cr&&(RN&&x.locale!=="ko"&&(gc||cr!=="onCompositionStart"?cr==="onCompositionEnd"&&gc&&(Jt=Ji()):(Nu=ct,bo="value"in Nu?Nu.value:Nu.textContent,gc=!0)),Ft=wI(et,cr),0<Ft.length&&(cr=new q1(cr,y,null,x,ct),mt.push({event:cr,listeners:Ft}),Jt?cr.data=Jt:(Jt=H1(x),Jt!==null&&(cr.data=Jt)))),(Jt=xN?n8(y,x):k1(y,x))&&(cr=wI(et,"onBeforeInput"),0<cr.length&&(Ft=new q1("onBeforeInput","beforeinput",null,x,ct),mt.push({event:Ft,listeners:cr}),Ft.data=Jt)),tAe(mt,y,et,x,ct)}xG(mt,b)})}function bv(y,b,x){return{instance:y,listener:b,currentTarget:x}}function wI(y,b){for(var x=b+"Capture",M=[];y!==null;){var U=y,z=U.stateNode;if(U=U.tag,U!==5&&U!==26&&U!==27||z===null||(U=Ti(y,x),U!=null&&M.unshift(bv(y,U,z)),U=Ti(y,b),U!=null&&M.push(bv(y,U,z))),y.tag===3)return M;y=y.return}return[]}function iAe(y){if(y===null)return null;do y=y.return;while(y&&y.tag!==5&&y.tag!==27);return y||null}function NG(y,b,x,M,U){for(var z=b._reactName,ie=[];x!==null&&x!==M;){var _e=x,Be=_e.alternate,et=_e.stateNode;if(_e=_e.tag,Be!==null&&Be===M)break;_e!==5&&_e!==26&&_e!==27||et===null||(Be=et,U?(et=Ti(x,z),et!=null&&ie.unshift(bv(x,et,Be))):U||(et=Ti(x,z),et!=null&&ie.push(bv(x,et,Be)))),x=x.return}ie.length!==0&&y.push({event:b,listeners:ie})}var uAe=/\r\n?/g,oAe=/\u0000|\uFFFD/g;function IG(y){return(typeof y=="string"?y:""+y).replace(uAe,`
`).replace(oAe,"")}function DG(y,b){return b=IG(b),IG(y)===b}function Hr(y,b,x,M,U,z){switch(x){case"children":typeof M=="string"?b==="body"||b==="textarea"&&M===""||rs(y,M):(typeof M=="number"||typeof M=="bigint")&&b!=="body"&&rs(y,""+M);break;case"className":Nn(y,"class",M);break;case"tabIndex":Nn(y,"tabindex",M);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(y,x,M);break;case"style":Fl(y,M,z);break;case"data":if(b!=="object"){Nn(y,"data",M);break}case"src":case"href":if(M===""&&(b!=="a"||x!=="href")){y.removeAttribute(x);break}if(M==null||typeof M=="function"||typeof M=="symbol"||typeof M=="boolean"){y.removeAttribute(x);break}M=as(""+M),y.setAttribute(x,M);break;case"action":case"formAction":if(typeof M=="function"){y.setAttribute(x,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof z=="function"&&(x==="formAction"?(b!=="input"&&Hr(y,b,"name",U.name,U,null),Hr(y,b,"formEncType",U.formEncType,U,null),Hr(y,b,"formMethod",U.formMethod,U,null),Hr(y,b,"formTarget",U.formTarget,U,null)):(Hr(y,b,"encType",U.encType,U,null),Hr(y,b,"method",U.method,U,null),Hr(y,b,"target",U.target,U,null)));if(M==null||typeof M=="symbol"||typeof M=="boolean"){y.removeAttribute(x);break}M=as(""+M),y.setAttribute(x,M);break;case"onClick":M!=null&&(y.onclick=$i);break;case"onScroll":M!=null&&rr("scroll",y);break;case"onScrollEnd":M!=null&&rr("scrollend",y);break;case"dangerouslySetInnerHTML":if(M!=null){if(typeof M!="object"||!("__html"in M))throw Error(n(61));if(x=M.__html,x!=null){if(U.children!=null)throw Error(n(60));y.innerHTML=x}}break;case"multiple":y.multiple=M&&typeof M!="function"&&typeof M!="symbol";break;case"muted":y.muted=M&&typeof M!="function"&&typeof M!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(M==null||typeof M=="function"||typeof M=="boolean"||typeof M=="symbol"){y.removeAttribute("xlink:href");break}x=as(""+M),y.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",x);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":M!=null&&typeof M!="function"&&typeof M!="symbol"?y.setAttribute(x,""+M):y.removeAttribute(x);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":M&&typeof M!="function"&&typeof M!="symbol"?y.setAttribute(x,""):y.removeAttribute(x);break;case"capture":case"download":M===!0?y.setAttribute(x,""):M!==!1&&M!=null&&typeof M!="function"&&typeof M!="symbol"?y.setAttribute(x,M):y.removeAttribute(x);break;case"cols":case"rows":case"size":case"span":M!=null&&typeof M!="function"&&typeof M!="symbol"&&!isNaN(M)&&1<=M?y.setAttribute(x,M):y.removeAttribute(x);break;case"rowSpan":case"start":M==null||typeof M=="function"||typeof M=="symbol"||isNaN(M)?y.removeAttribute(x):y.setAttribute(x,M);break;case"popover":rr("beforetoggle",y),rr("toggle",y),yn(y,"popover",M);break;case"xlinkActuate":$r(y,"http://www.w3.org/1999/xlink","xlink:actuate",M);break;case"xlinkArcrole":$r(y,"http://www.w3.org/1999/xlink","xlink:arcrole",M);break;case"xlinkRole":$r(y,"http://www.w3.org/1999/xlink","xlink:role",M);break;case"xlinkShow":$r(y,"http://www.w3.org/1999/xlink","xlink:show",M);break;case"xlinkTitle":$r(y,"http://www.w3.org/1999/xlink","xlink:title",M);break;case"xlinkType":$r(y,"http://www.w3.org/1999/xlink","xlink:type",M);break;case"xmlBase":$r(y,"http://www.w3.org/XML/1998/namespace","xml:base",M);break;case"xmlLang":$r(y,"http://www.w3.org/XML/1998/namespace","xml:lang",M);break;case"xmlSpace":$r(y,"http://www.w3.org/XML/1998/namespace","xml:space",M);break;case"is":yn(y,"is",M);break;case"innerText":case"textContent":break;default:(!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(x=vN.get(x)||x,yn(y,x,M))}}function x5(y,b,x,M,U,z){switch(x){case"style":Fl(y,M,z);break;case"dangerouslySetInnerHTML":if(M!=null){if(typeof M!="object"||!("__html"in M))throw Error(n(61));if(x=M.__html,x!=null){if(U.children!=null)throw Error(n(60));y.innerHTML=x}}break;case"children":typeof M=="string"?rs(y,M):(typeof M=="number"||typeof M=="bigint")&&rs(y,""+M);break;case"onScroll":M!=null&&rr("scroll",y);break;case"onScrollEnd":M!=null&&rr("scrollend",y);break;case"onClick":M!=null&&(y.onclick=$i);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!fa.hasOwnProperty(x))e:{if(x[0]==="o"&&x[1]==="n"&&(U=x.endsWith("Capture"),b=x.slice(2,U?x.length-7:void 0),z=y[gt]||null,z=z!=null?z[x]:null,typeof z=="function"&&y.removeEventListener(b,z,U),typeof M=="function")){typeof z!="function"&&z!==null&&(x in y?y[x]=null:y.hasAttribute(x)&&y.removeAttribute(x)),y.addEventListener(b,M,U);break e}x in y?y[x]=M:M===!0?y.setAttribute(x,""):yn(y,x,M)}}}function ga(y,b,x){switch(b){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rr("error",y),rr("load",y);var M=!1,U=!1,z;for(z in x)if(x.hasOwnProperty(z)){var ie=x[z];if(ie!=null)switch(z){case"src":M=!0;break;case"srcSet":U=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(n(137,b));default:Hr(y,b,z,ie,x,null)}}U&&Hr(y,b,"srcSet",x.srcSet,x,null),M&&Hr(y,b,"src",x.src,x,null);return;case"input":rr("invalid",y);var _e=z=ie=U=null,Be=null,et=null;for(M in x)if(x.hasOwnProperty(M)){var ct=x[M];if(ct!=null)switch(M){case"name":U=ct;break;case"type":ie=ct;break;case"checked":Be=ct;break;case"defaultChecked":et=ct;break;case"value":z=ct;break;case"defaultValue":_e=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(n(137,b));break;default:Hr(y,b,M,ct,x,null)}}j1(y,z,_e,Be,et,ie,U,!1);return;case"select":rr("invalid",y),M=ie=z=null;for(U in x)if(x.hasOwnProperty(U)&&(_e=x[U],_e!=null))switch(U){case"value":z=_e;break;case"defaultValue":ie=_e;break;case"multiple":M=_e;default:Hr(y,b,U,_e,x,null)}b=z,x=ie,y.multiple=!!M,b!=null?xu(y,!!M,b,!1):x!=null&&xu(y,!!M,x,!0);return;case"textarea":rr("invalid",y),z=U=M=null;for(ie in x)if(x.hasOwnProperty(ie)&&(_e=x[ie],_e!=null))switch(ie){case"value":M=_e;break;case"defaultValue":U=_e;break;case"children":z=_e;break;case"dangerouslySetInnerHTML":if(_e!=null)throw Error(n(91));break;default:Hr(y,b,ie,_e,x,null)}Ru(y,M,U,z);return;case"option":for(Be in x)x.hasOwnProperty(Be)&&(M=x[Be],M!=null)&&(Be==="selected"?y.selected=M&&typeof M!="function"&&typeof M!="symbol":Hr(y,b,Be,M,x,null));return;case"dialog":rr("beforetoggle",y),rr("toggle",y),rr("cancel",y),rr("close",y);break;case"iframe":case"object":rr("load",y);break;case"video":case"audio":for(M=0;M<mv.length;M++)rr(mv[M],y);break;case"image":rr("error",y),rr("load",y);break;case"details":rr("toggle",y);break;case"embed":case"source":case"link":rr("error",y),rr("load",y);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(et in x)if(x.hasOwnProperty(et)&&(M=x[et],M!=null))switch(et){case"children":case"dangerouslySetInnerHTML":throw Error(n(137,b));default:Hr(y,b,et,M,x,null)}return;default:if(fc(b)){for(ct in x)x.hasOwnProperty(ct)&&(M=x[ct],M!==void 0&&x5(y,b,ct,M,x,void 0));return}}for(_e in x)x.hasOwnProperty(_e)&&(M=x[_e],M!=null&&Hr(y,b,_e,M,x,null))}function sAe(y,b,x,M){switch(b){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var U=null,z=null,ie=null,_e=null,Be=null,et=null,ct=null;for(ut in x){var mt=x[ut];if(x.hasOwnProperty(ut)&&mt!=null)switch(ut){case"checked":break;case"value":break;case"defaultValue":Be=mt;default:M.hasOwnProperty(ut)||Hr(y,b,ut,null,M,mt)}}for(var rt in M){var ut=M[rt];if(mt=x[rt],M.hasOwnProperty(rt)&&(ut!=null||mt!=null))switch(rt){case"type":z=ut;break;case"name":U=ut;break;case"checked":et=ut;break;case"defaultChecked":ct=ut;break;case"value":ie=ut;break;case"defaultValue":_e=ut;break;case"children":case"dangerouslySetInnerHTML":if(ut!=null)throw Error(n(137,b));break;default:ut!==mt&&Hr(y,b,rt,ut,M,mt)}}Gi(y,ie,_e,Be,et,ct,z,U);return;case"select":ut=ie=_e=rt=null;for(z in x)if(Be=x[z],x.hasOwnProperty(z)&&Be!=null)switch(z){case"value":break;case"multiple":ut=Be;default:M.hasOwnProperty(z)||Hr(y,b,z,null,M,Be)}for(U in M)if(z=M[U],Be=x[U],M.hasOwnProperty(U)&&(z!=null||Be!=null))switch(U){case"value":rt=z;break;case"defaultValue":_e=z;break;case"multiple":ie=z;default:z!==Be&&Hr(y,b,U,z,M,Be)}b=_e,x=ie,M=ut,rt!=null?xu(y,!!x,rt,!1):!!M!=!!x&&(b!=null?xu(y,!!x,b,!0):xu(y,!!x,x?[]:"",!1));return;case"textarea":ut=rt=null;for(_e in x)if(U=x[_e],x.hasOwnProperty(_e)&&U!=null&&!M.hasOwnProperty(_e))switch(_e){case"value":break;case"children":break;default:Hr(y,b,_e,null,M,U)}for(ie in M)if(U=M[ie],z=x[ie],M.hasOwnProperty(ie)&&(U!=null||z!=null))switch(ie){case"value":rt=U;break;case"defaultValue":ut=U;break;case"children":break;case"dangerouslySetInnerHTML":if(U!=null)throw Error(n(91));break;default:U!==z&&Hr(y,b,ie,U,M,z)}M1(y,rt,ut);return;case"option":for(var It in x)rt=x[It],x.hasOwnProperty(It)&&rt!=null&&!M.hasOwnProperty(It)&&(It==="selected"?y.selected=!1:Hr(y,b,It,null,M,rt));for(Be in M)rt=M[Be],ut=x[Be],M.hasOwnProperty(Be)&&rt!==ut&&(rt!=null||ut!=null)&&(Be==="selected"?y.selected=rt&&typeof rt!="function"&&typeof rt!="symbol":Hr(y,b,Be,rt,M,ut));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Bt in x)rt=x[Bt],x.hasOwnProperty(Bt)&&rt!=null&&!M.hasOwnProperty(Bt)&&Hr(y,b,Bt,null,M,rt);for(et in M)if(rt=M[et],ut=x[et],M.hasOwnProperty(et)&&rt!==ut&&(rt!=null||ut!=null))switch(et){case"children":case"dangerouslySetInnerHTML":if(rt!=null)throw Error(n(137,b));break;default:Hr(y,b,et,rt,M,ut)}return;default:if(fc(b)){for(var kr in x)rt=x[kr],x.hasOwnProperty(kr)&&rt!==void 0&&!M.hasOwnProperty(kr)&&x5(y,b,kr,void 0,M,rt);for(ct in M)rt=M[ct],ut=x[ct],!M.hasOwnProperty(ct)||rt===ut||rt===void 0&&ut===void 0||x5(y,b,ct,rt,M,ut);return}}for(var Xe in x)rt=x[Xe],x.hasOwnProperty(Xe)&&rt!=null&&!M.hasOwnProperty(Xe)&&Hr(y,b,Xe,null,M,rt);for(mt in M)rt=M[mt],ut=x[mt],!M.hasOwnProperty(mt)||rt===ut||rt==null&&ut==null||Hr(y,b,mt,rt,M,ut)}function FG(y){switch(y){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function cAe(){if(typeof performance.getEntriesByType=="function"){for(var y=0,b=0,x=performance.getEntriesByType("resource"),M=0;M<x.length;M++){var U=x[M],z=U.transferSize,ie=U.initiatorType,_e=U.duration;if(z&&_e&&FG(ie)){for(ie=0,_e=U.responseEnd,M+=1;M<x.length;M++){var Be=x[M],et=Be.startTime;if(et>_e)break;var ct=Be.transferSize,mt=Be.initiatorType;ct&&FG(mt)&&(Be=Be.responseEnd,ie+=ct*(Be<_e?1:(_e-et)/(Be-et)))}if(--M,b+=8*(z+ie)/(U.duration/1e3),y++,10<y)break}}if(0<y)return b/y/1e6}return navigator.connection&&(y=navigator.connection.downlink,typeof y=="number")?y:5}var R5=null,N5=null;function SI(y){return y.nodeType===9?y:y.ownerDocument}function PG(y){switch(y){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function jG(y,b){if(y===0)switch(b){case"svg":return 1;case"math":return 2;default:return 0}return y===1&&b==="foreignObject"?0:y}function I5(y,b){return y==="textarea"||y==="noscript"||typeof b.children=="string"||typeof b.children=="number"||typeof b.children=="bigint"||typeof b.dangerouslySetInnerHTML=="object"&&b.dangerouslySetInnerHTML!==null&&b.dangerouslySetInnerHTML.__html!=null}var D5=null;function lAe(){var y=window.event;return y&&y.type==="popstate"?y===D5?!1:(D5=y,!0):(D5=null,!1)}var MG=typeof setTimeout=="function"?setTimeout:void 0,dAe=typeof clearTimeout=="function"?clearTimeout:void 0,CG=typeof Promise=="function"?Promise:void 0,fAe=typeof queueMicrotask=="function"?queueMicrotask:typeof CG<"u"?function(y){return CG.resolve(null).then(y).catch(pAe)}:MG;function pAe(y){setTimeout(function(){throw y})}function qc(y){return y==="head"}function LG(y,b){var x=b,M=0;do{var U=x.nextSibling;if(y.removeChild(x),U&&U.nodeType===8)if(x=U.data,x==="/$"||x==="/&"){if(M===0){y.removeChild(U),lg(b);return}M--}else if(x==="$"||x==="$?"||x==="$~"||x==="$!"||x==="&")M++;else if(x==="html")gv(y.ownerDocument.documentElement);else if(x==="head"){x=y.ownerDocument.head,gv(x);for(var z=x.firstChild;z;){var ie=z.nextSibling,_e=z.nodeName;z[vt]||_e==="SCRIPT"||_e==="STYLE"||_e==="LINK"&&z.rel.toLowerCase()==="stylesheet"||x.removeChild(z),z=ie}}else x==="body"&&gv(y.ownerDocument.body);x=U}while(x);lg(b)}function qG(y,b){var x=y;y=0;do{var M=x.nextSibling;if(x.nodeType===1?b?(x._stashedDisplay=x.style.display,x.style.display="none"):(x.style.display=x._stashedDisplay||"",x.getAttribute("style")===""&&x.removeAttribute("style")):x.nodeType===3&&(b?(x._stashedText=x.nodeValue,x.nodeValue=""):x.nodeValue=x._stashedText||""),M&&M.nodeType===8)if(x=M.data,x==="/$"){if(y===0)break;y--}else x!=="$"&&x!=="$?"&&x!=="$~"&&x!=="$!"||y++;x=M}while(x)}function F5(y){var b=y.firstChild;for(b&&b.nodeType===10&&(b=b.nextSibling);b;){var x=b;switch(b=b.nextSibling,x.nodeName){case"HTML":case"HEAD":case"BODY":F5(x),St(x);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(x.rel.toLowerCase()==="stylesheet")continue}y.removeChild(x)}}function hAe(y,b,x,M){for(;y.nodeType===1;){var U=x;if(y.nodeName.toLowerCase()!==b.toLowerCase()){if(!M&&(y.nodeName!=="INPUT"||y.type!=="hidden"))break}else if(M){if(!y[vt])switch(b){case"meta":if(!y.hasAttribute("itemprop"))break;return y;case"link":if(z=y.getAttribute("rel"),z==="stylesheet"&&y.hasAttribute("data-precedence"))break;if(z!==U.rel||y.getAttribute("href")!==(U.href==null||U.href===""?null:U.href)||y.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin)||y.getAttribute("title")!==(U.title==null?null:U.title))break;return y;case"style":if(y.hasAttribute("data-precedence"))break;return y;case"script":if(z=y.getAttribute("src"),(z!==(U.src==null?null:U.src)||y.getAttribute("type")!==(U.type==null?null:U.type)||y.getAttribute("crossorigin")!==(U.crossOrigin==null?null:U.crossOrigin))&&z&&y.hasAttribute("async")&&!y.hasAttribute("itemprop"))break;return y;default:return y}}else if(b==="input"&&y.type==="hidden"){var z=U.name==null?null:""+U.name;if(U.type==="hidden"&&y.getAttribute("name")===z)return y}else return y;if(y=ou(y.nextSibling),y===null)break}return null}function yAe(y,b,x){if(b==="")return null;for(;y.nodeType!==3;)if((y.nodeType!==1||y.nodeName!=="INPUT"||y.type!=="hidden")&&!x||(y=ou(y.nextSibling),y===null))return null;return y}function BG(y,b){for(;y.nodeType!==8;)if((y.nodeType!==1||y.nodeName!=="INPUT"||y.type!=="hidden")&&!b||(y=ou(y.nextSibling),y===null))return null;return y}function P5(y){return y.data==="$?"||y.data==="$~"}function j5(y){return y.data==="$!"||y.data==="$?"&&y.ownerDocument.readyState!=="loading"}function mAe(y,b){var x=y.ownerDocument;if(y.data==="$~")y._reactRetry=b;else if(y.data!=="$?"||x.readyState!=="loading")b();else{var M=function(){b(),x.removeEventListener("DOMContentLoaded",M)};x.addEventListener("DOMContentLoaded",M),y._reactRetry=M}}function ou(y){for(;y!=null;y=y.nextSibling){var b=y.nodeType;if(b===1||b===3)break;if(b===8){if(b=y.data,b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"||b==="F!"||b==="F")break;if(b==="/$"||b==="/&")return null}}return y}var M5=null;function UG(y){y=y.nextSibling;for(var b=0;y;){if(y.nodeType===8){var x=y.data;if(x==="/$"||x==="/&"){if(b===0)return ou(y.nextSibling);b--}else x!=="$"&&x!=="$!"&&x!=="$?"&&x!=="$~"&&x!=="&"||b++}y=y.nextSibling}return null}function QG(y){y=y.previousSibling;for(var b=0;y;){if(y.nodeType===8){var x=y.data;if(x==="$"||x==="$!"||x==="$?"||x==="$~"||x==="&"){if(b===0)return y;b--}else x!=="/$"&&x!=="/&"||b++}y=y.previousSibling}return null}function VG(y,b,x){switch(b=SI(x),y){case"html":if(y=b.documentElement,!y)throw Error(n(452));return y;case"head":if(y=b.head,!y)throw Error(n(453));return y;case"body":if(y=b.body,!y)throw Error(n(454));return y;default:throw Error(n(451))}}function gv(y){for(var b=y.attributes;b.length;)y.removeAttributeNode(b[0]);St(y)}var su=new Map,HG=new Set;function EI(y){return typeof y.getRootNode=="function"?y.getRootNode():y.nodeType===9?y:y.ownerDocument}var Is=G.d;G.d={f:bAe,r:gAe,D:vAe,C:_Ae,L:TAe,m:wAe,X:EAe,S:SAe,M:AAe};function bAe(){var y=Is.f(),b=yI();return y||b}function gAe(y){var b=Tr(y);b!==null&&b.tag===5&&b.type==="form"?uz(b):Is.r(y)}var og=typeof document>"u"?null:document;function kG(y,b,x){var M=og;if(M&&typeof b=="string"&&b){var U=Ia(b);U='link[rel="'+y+'"][href="'+U+'"]',typeof x=="string"&&(U+='[crossorigin="'+x+'"]'),HG.has(U)||(HG.add(U),y={rel:y,crossOrigin:x,href:b},M.querySelector(U)===null&&(b=M.createElement("link"),ga(b,"link",y),hr(b),M.head.appendChild(b)))}}function vAe(y){Is.D(y),kG("dns-prefetch",y,null)}function _Ae(y,b){Is.C(y,b),kG("preconnect",y,b)}function TAe(y,b,x){Is.L(y,b,x);var M=og;if(M&&y&&b){var U='link[rel="preload"][as="'+Ia(b)+'"]';b==="image"&&x&&x.imageSrcSet?(U+='[imagesrcset="'+Ia(x.imageSrcSet)+'"]',typeof x.imageSizes=="string"&&(U+='[imagesizes="'+Ia(x.imageSizes)+'"]')):U+='[href="'+Ia(y)+'"]';var z=U;switch(b){case"style":z=sg(y);break;case"script":z=cg(y)}su.has(z)||(y=d({rel:"preload",href:b==="image"&&x&&x.imageSrcSet?void 0:y,as:b},x),su.set(z,y),M.querySelector(U)!==null||b==="style"&&M.querySelector(vv(z))||b==="script"&&M.querySelector(_v(z))||(b=M.createElement("link"),ga(b,"link",y),hr(b),M.head.appendChild(b)))}}function wAe(y,b){Is.m(y,b);var x=og;if(x&&y){var M=b&&typeof b.as=="string"?b.as:"script",U='link[rel="modulepreload"][as="'+Ia(M)+'"][href="'+Ia(y)+'"]',z=U;switch(M){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":z=cg(y)}if(!su.has(z)&&(y=d({rel:"modulepreload",href:y},b),su.set(z,y),x.querySelector(U)===null)){switch(M){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(x.querySelector(_v(z)))return}M=x.createElement("link"),ga(M,"link",y),hr(M),x.head.appendChild(M)}}}function SAe(y,b,x){Is.S(y,b,x);var M=og;if(M&&y){var U=aa(M).hoistableStyles,z=sg(y);b=b||"default";var ie=U.get(z);if(!ie){var _e={loading:0,preload:null};if(ie=M.querySelector(vv(z)))_e.loading=5;else{y=d({rel:"stylesheet",href:y,"data-precedence":b},x),(x=su.get(z))&&C5(y,x);var Be=ie=M.createElement("link");hr(Be),ga(Be,"link",y),Be._p=new Promise(function(et,ct){Be.onload=et,Be.onerror=ct}),Be.addEventListener("load",function(){_e.loading|=1}),Be.addEventListener("error",function(){_e.loading|=2}),_e.loading|=4,AI(ie,b,M)}ie={type:"stylesheet",instance:ie,count:1,state:_e},U.set(z,ie)}}}function EAe(y,b){Is.X(y,b);var x=og;if(x&&y){var M=aa(x).hoistableScripts,U=cg(y),z=M.get(U);z||(z=x.querySelector(_v(U)),z||(y=d({src:y,async:!0},b),(b=su.get(U))&&L5(y,b),z=x.createElement("script"),hr(z),ga(z,"link",y),x.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},M.set(U,z))}}function AAe(y,b){Is.M(y,b);var x=og;if(x&&y){var M=aa(x).hoistableScripts,U=cg(y),z=M.get(U);z||(z=x.querySelector(_v(U)),z||(y=d({src:y,async:!0,type:"module"},b),(b=su.get(U))&&L5(y,b),z=x.createElement("script"),hr(z),ga(z,"link",y),x.head.appendChild(z)),z={type:"script",instance:z,count:1,state:null},M.set(U,z))}}function zG(y,b,x,M){var U=(U=Oe.current)?EI(U):null;if(!U)throw Error(n(446));switch(y){case"meta":case"title":return null;case"style":return typeof x.precedence=="string"&&typeof x.href=="string"?(b=sg(x.href),x=aa(U).hoistableStyles,M=x.get(b),M||(M={type:"style",instance:null,count:0,state:null},x.set(b,M)),M):{type:"void",instance:null,count:0,state:null};case"link":if(x.rel==="stylesheet"&&typeof x.href=="string"&&typeof x.precedence=="string"){y=sg(x.href);var z=aa(U).hoistableStyles,ie=z.get(y);if(ie||(U=U.ownerDocument||U,ie={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},z.set(y,ie),(z=U.querySelector(vv(y)))&&!z._p&&(ie.instance=z,ie.state.loading=5),su.has(y)||(x={rel:"preload",as:"style",href:x.href,crossOrigin:x.crossOrigin,integrity:x.integrity,media:x.media,hrefLang:x.hrefLang,referrerPolicy:x.referrerPolicy},su.set(y,x),z||OAe(U,y,x,ie.state))),b&&M===null)throw Error(n(528,""));return ie}if(b&&M!==null)throw Error(n(529,""));return null;case"script":return b=x.async,x=x.src,typeof x=="string"&&b&&typeof b!="function"&&typeof b!="symbol"?(b=cg(x),x=aa(U).hoistableScripts,M=x.get(b),M||(M={type:"script",instance:null,count:0,state:null},x.set(b,M)),M):{type:"void",instance:null,count:0,state:null};default:throw Error(n(444,y))}}function sg(y){return'href="'+Ia(y)+'"'}function vv(y){return'link[rel="stylesheet"]['+y+"]"}function GG(y){return d({},y,{"data-precedence":y.precedence,precedence:null})}function OAe(y,b,x,M){y.querySelector('link[rel="preload"][as="style"]['+b+"]")?M.loading=1:(b=y.createElement("link"),M.preload=b,b.addEventListener("load",function(){return M.loading|=1}),b.addEventListener("error",function(){return M.loading|=2}),ga(b,"link",x),hr(b),y.head.appendChild(b))}function cg(y){return'[src="'+Ia(y)+'"]'}function _v(y){return"script[async]"+y}function $G(y,b,x){if(b.count++,b.instance===null)switch(b.type){case"style":var M=y.querySelector('style[data-href~="'+Ia(x.href)+'"]');if(M)return b.instance=M,hr(M),M;var U=d({},x,{"data-href":x.href,"data-precedence":x.precedence,href:null,precedence:null});return M=(y.ownerDocument||y).createElement("style"),hr(M),ga(M,"style",U),AI(M,x.precedence,y),b.instance=M;case"stylesheet":U=sg(x.href);var z=y.querySelector(vv(U));if(z)return b.state.loading|=4,b.instance=z,hr(z),z;M=GG(x),(U=su.get(U))&&C5(M,U),z=(y.ownerDocument||y).createElement("link"),hr(z);var ie=z;return ie._p=new Promise(function(_e,Be){ie.onload=_e,ie.onerror=Be}),ga(z,"link",M),b.state.loading|=4,AI(z,x.precedence,y),b.instance=z;case"script":return z=cg(x.src),(U=y.querySelector(_v(z)))?(b.instance=U,hr(U),U):(M=x,(U=su.get(z))&&(M=d({},x),L5(M,U)),y=y.ownerDocument||y,U=y.createElement("script"),hr(U),ga(U,"link",M),y.head.appendChild(U),b.instance=U);case"void":return null;default:throw Error(n(443,b.type))}else b.type==="stylesheet"&&(b.state.loading&4)===0&&(M=b.instance,b.state.loading|=4,AI(M,x.precedence,y));return b.instance}function AI(y,b,x){for(var M=x.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),U=M.length?M[M.length-1]:null,z=U,ie=0;ie<M.length;ie++){var _e=M[ie];if(_e.dataset.precedence===b)z=_e;else if(z!==U)break}z?z.parentNode.insertBefore(y,z.nextSibling):(b=x.nodeType===9?x.head:x,b.insertBefore(y,b.firstChild))}function C5(y,b){y.crossOrigin==null&&(y.crossOrigin=b.crossOrigin),y.referrerPolicy==null&&(y.referrerPolicy=b.referrerPolicy),y.title==null&&(y.title=b.title)}function L5(y,b){y.crossOrigin==null&&(y.crossOrigin=b.crossOrigin),y.referrerPolicy==null&&(y.referrerPolicy=b.referrerPolicy),y.integrity==null&&(y.integrity=b.integrity)}var OI=null;function XG(y,b,x){if(OI===null){var M=new Map,U=OI=new Map;U.set(x,M)}else U=OI,M=U.get(x),M||(M=new Map,U.set(x,M));if(M.has(y))return M;for(M.set(y,null),x=x.getElementsByTagName(y),U=0;U<x.length;U++){var z=x[U];if(!(z[vt]||z[wt]||y==="link"&&z.getAttribute("rel")==="stylesheet")&&z.namespaceURI!=="http://www.w3.org/2000/svg"){var ie=z.getAttribute(b)||"";ie=y+ie;var _e=M.get(ie);_e?_e.push(z):M.set(ie,[z])}}return M}function KG(y,b,x){y=y.ownerDocument||y,y.head.insertBefore(x,b==="title"?y.querySelector("head > title"):null)}function xAe(y,b,x){if(x===1||b.itemProp!=null)return!1;switch(y){case"meta":case"title":return!0;case"style":if(typeof b.precedence!="string"||typeof b.href!="string"||b.href==="")break;return!0;case"link":if(typeof b.rel!="string"||typeof b.href!="string"||b.href===""||b.onLoad||b.onError)break;return b.rel==="stylesheet"?(y=b.disabled,typeof b.precedence=="string"&&y==null):!0;case"script":if(b.async&&typeof b.async!="function"&&typeof b.async!="symbol"&&!b.onLoad&&!b.onError&&b.src&&typeof b.src=="string")return!0}return!1}function JG(y){return!(y.type==="stylesheet"&&(y.state.loading&3)===0)}function RAe(y,b,x,M){if(x.type==="stylesheet"&&(typeof M.media!="string"||matchMedia(M.media).matches!==!1)&&(x.state.loading&4)===0){if(x.instance===null){var U=sg(M.href),z=b.querySelector(vv(U));if(z){b=z._p,b!==null&&typeof b=="object"&&typeof b.then=="function"&&(y.count++,y=xI.bind(y),b.then(y,y)),x.state.loading|=4,x.instance=z,hr(z);return}z=b.ownerDocument||b,M=GG(M),(U=su.get(U))&&C5(M,U),z=z.createElement("link"),hr(z);var ie=z;ie._p=new Promise(function(_e,Be){ie.onload=_e,ie.onerror=Be}),ga(z,"link",M),x.instance=z}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(x,b),(b=x.state.preload)&&(x.state.loading&3)===0&&(y.count++,x=xI.bind(y),b.addEventListener("load",x),b.addEventListener("error",x))}}var q5=0;function NAe(y,b){return y.stylesheets&&y.count===0&&NI(y,y.stylesheets),0<y.count||0<y.imgCount?function(x){var M=setTimeout(function(){if(y.stylesheets&&NI(y,y.stylesheets),y.unsuspend){var z=y.unsuspend;y.unsuspend=null,z()}},6e4+b);0<y.imgBytes&&q5===0&&(q5=62500*cAe());var U=setTimeout(function(){if(y.waitingForImages=!1,y.count===0&&(y.stylesheets&&NI(y,y.stylesheets),y.unsuspend)){var z=y.unsuspend;y.unsuspend=null,z()}},(y.imgBytes>q5?50:800)+b);return y.unsuspend=x,function(){y.unsuspend=null,clearTimeout(M),clearTimeout(U)}}:null}function xI(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)NI(this,this.stylesheets);else if(this.unsuspend){var y=this.unsuspend;this.unsuspend=null,y()}}}var RI=null;function NI(y,b){y.stylesheets=null,y.unsuspend!==null&&(y.count++,RI=new Map,b.forEach(IAe,y),RI=null,xI.call(y))}function IAe(y,b){if(!(b.state.loading&4)){var x=RI.get(y);if(x)var M=x.get(null);else{x=new Map,RI.set(y,x);for(var U=y.querySelectorAll("link[data-precedence],style[data-precedence]"),z=0;z<U.length;z++){var ie=U[z];(ie.nodeName==="LINK"||ie.getAttribute("media")!=="not all")&&(x.set(ie.dataset.precedence,ie),M=ie)}M&&x.set(null,M)}U=b.instance,ie=U.getAttribute("data-precedence"),z=x.get(ie)||M,z===M&&x.set(null,U),x.set(ie,U),this.count++,M=xI.bind(this),U.addEventListener("load",M),U.addEventListener("error",M),z?z.parentNode.insertBefore(U,z.nextSibling):(y=y.nodeType===9?y.head:y,y.insertBefore(U,y.firstChild)),b.state.loading|=4}}var Tv={$$typeof:w,Provider:null,Consumer:null,_currentValue:Z,_currentValue2:Z,_threadCount:0};function DAe(y,b,x,M,U,z,ie,_e,Be){this.tag=1,this.containerInfo=y,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Te(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Te(0),this.hiddenUpdates=Te(null),this.identifierPrefix=M,this.onUncaughtError=U,this.onCaughtError=z,this.onRecoverableError=ie,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Be,this.incompleteTransitions=new Map}function WG(y,b,x,M,U,z,ie,_e,Be,et,ct,mt){return y=new DAe(y,b,x,ie,Be,et,ct,mt,_e),b=1,z===!0&&(b|=24),z=Ei(3,null,null,b),y.current=z,z.stateNode=y,b=b8(),b.refCount++,y.pooledCache=b,b.refCount++,z.memoizedState={element:M,isDehydrated:x,cache:b},T8(z),y}function YG(y){return y?(y=Ub,y):Ub}function ZG(y,b,x,M,U,z){U=YG(U),M.context===null?M.context=U:M.pendingContext=U,M=xc(b),M.payload={element:x},z=z===void 0?null:z,z!==null&&(M.callback=z),x=Rc(y,M,b),x!==null&&(ci(x,y,b),Z1(x,y,b))}function e$(y,b){if(y=y.memoizedState,y!==null&&y.dehydrated!==null){var x=y.retryLane;y.retryLane=x!==0&&x<b?x:b}}function B5(y,b){e$(y,b),(y=y.alternate)&&e$(y,b)}function t$(y){if(y.tag===13||y.tag===31){var b=Hl(y,67108864);b!==null&&ci(b,y,67108864),B5(y,67108864)}}function r$(y){if(y.tag===13||y.tag===31){var b=Ni();b=Ot(b);var x=Hl(y,b);x!==null&&ci(x,y,b),B5(y,b)}}var II=!0;function FAe(y,b,x,M){var U=V.T;V.T=null;var z=G.p;try{G.p=2,U5(y,b,x,M)}finally{G.p=z,V.T=U}}function PAe(y,b,x,M){var U=V.T;V.T=null;var z=G.p;try{G.p=8,U5(y,b,x,M)}finally{G.p=z,V.T=U}}function U5(y,b,x,M){if(II){var U=Q5(M);if(U===null)O5(y,b,M,DI,x),a$(y,M);else if(MAe(U,y,b,x,M))M.stopPropagation();else if(a$(y,M),b&4&&-1<jAe.indexOf(y)){for(;U!==null;){var z=Tr(U);if(z!==null)switch(z.tag){case 3:if(z=z.stateNode,z.current.memoizedState.isDehydrated){var ie=Ue(z.pendingLanes);if(ie!==0){var _e=z;for(_e.pendingLanes|=2,_e.entangledLanes|=2;ie;){var Be=1<<31-Pe(ie);_e.entanglements[1]|=Be,ie&=~Be}Eo(z),(xr&6)===0&&(pI=Ve()+500,yv(0))}}break;case 31:case 13:_e=Hl(z,2),_e!==null&&ci(_e,z,2),yI(),B5(z,2)}if(z=Q5(M),z===null&&O5(y,b,M,DI,x),z===U)break;U=z}U!==null&&M.stopPropagation()}else O5(y,b,M,null,x)}}function Q5(y){return y=is(y),V5(y)}var DI=null;function V5(y){if(DI=null,y=Qt(y),y!==null){var b=t(y);if(b===null)y=null;else{var x=b.tag;if(x===13){if(y=i(b),y!==null)return y;y=null}else if(x===31){if(y=o(b),y!==null)return y;y=null}else if(x===3){if(b.stateNode.current.memoizedState.isDehydrated)return b.tag===3?b.stateNode.containerInfo:null;y=null}else b!==y&&(y=null)}}return DI=y,null}function n$(y){switch(y){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ke()){case Ye:return 2;case oe:return 8;case X:case J:return 32;case he:return 268435456;default:return 32}default:return 32}}var H5=!1,Bc=null,Uc=null,Qc=null,wv=new Map,Sv=new Map,Vc=[],jAe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function a$(y,b){switch(y){case"focusin":case"focusout":Bc=null;break;case"dragenter":case"dragleave":Uc=null;break;case"mouseover":case"mouseout":Qc=null;break;case"pointerover":case"pointerout":wv.delete(b.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sv.delete(b.pointerId)}}function Ev(y,b,x,M,U,z){return y===null||y.nativeEvent!==z?(y={blockedOn:b,domEventName:x,eventSystemFlags:M,nativeEvent:z,targetContainers:[U]},b!==null&&(b=Tr(b),b!==null&&t$(b)),y):(y.eventSystemFlags|=M,b=y.targetContainers,U!==null&&b.indexOf(U)===-1&&b.push(U),y)}function MAe(y,b,x,M,U){switch(b){case"focusin":return Bc=Ev(Bc,y,b,x,M,U),!0;case"dragenter":return Uc=Ev(Uc,y,b,x,M,U),!0;case"mouseover":return Qc=Ev(Qc,y,b,x,M,U),!0;case"pointerover":var z=U.pointerId;return wv.set(z,Ev(wv.get(z)||null,y,b,x,M,U)),!0;case"gotpointercapture":return z=U.pointerId,Sv.set(z,Ev(Sv.get(z)||null,y,b,x,M,U)),!0}return!1}function i$(y){var b=Qt(y.target);if(b!==null){var x=t(b);if(x!==null){if(b=x.tag,b===13){if(b=i(x),b!==null){y.blockedOn=b,Tt(y.priority,function(){r$(x)});return}}else if(b===31){if(b=o(x),b!==null){y.blockedOn=b,Tt(y.priority,function(){r$(x)});return}}else if(b===3&&x.stateNode.current.memoizedState.isDehydrated){y.blockedOn=x.tag===3?x.stateNode.containerInfo:null;return}}}y.blockedOn=null}function FI(y){if(y.blockedOn!==null)return!1;for(var b=y.targetContainers;0<b.length;){var x=Q5(y.nativeEvent);if(x===null){x=y.nativeEvent;var M=new x.constructor(x.type,x);Pl=M,x.target.dispatchEvent(M),Pl=null}else return b=Tr(x),b!==null&&t$(b),y.blockedOn=x,!1;b.shift()}return!0}function u$(y,b,x){FI(y)&&x.delete(b)}function CAe(){H5=!1,Bc!==null&&FI(Bc)&&(Bc=null),Uc!==null&&FI(Uc)&&(Uc=null),Qc!==null&&FI(Qc)&&(Qc=null),wv.forEach(u$),Sv.forEach(u$)}function PI(y,b){y.blockedOn===b&&(y.blockedOn=null,H5||(H5=!0,a.unstable_scheduleCallback(a.unstable_NormalPriority,CAe)))}var jI=null;function o$(y){jI!==y&&(jI=y,a.unstable_scheduleCallback(a.unstable_NormalPriority,function(){jI===y&&(jI=null);for(var b=0;b<y.length;b+=3){var x=y[b],M=y[b+1],U=y[b+2];if(typeof M!="function"){if(V5(M||x)===null)continue;break}var z=Tr(x);z!==null&&(y.splice(b,3),b-=3,Q8(z,{pending:!0,data:U,method:x.method,action:M},M,U))}}))}function lg(y){function b(Be){return PI(Be,y)}Bc!==null&&PI(Bc,y),Uc!==null&&PI(Uc,y),Qc!==null&&PI(Qc,y),wv.forEach(b),Sv.forEach(b);for(var x=0;x<Vc.length;x++){var M=Vc[x];M.blockedOn===y&&(M.blockedOn=null)}for(;0<Vc.length&&(x=Vc[0],x.blockedOn===null);)i$(x),x.blockedOn===null&&Vc.shift();if(x=(y.ownerDocument||y).$$reactFormReplay,x!=null)for(M=0;M<x.length;M+=3){var U=x[M],z=x[M+1],ie=U[gt]||null;if(typeof z=="function")ie||o$(x);else if(ie){var _e=null;if(z&&z.hasAttribute("formAction")){if(U=z,ie=z[gt]||null)_e=ie.formAction;else if(V5(U)!==null)continue}else _e=ie.action;typeof _e=="function"?x[M+1]=_e:(x.splice(M,3),M-=3),o$(x)}}}function s$(){function y(z){z.canIntercept&&z.info==="react-transition"&&z.intercept({handler:function(){return new Promise(function(ie){return U=ie})},focusReset:"manual",scroll:"manual"})}function b(){U!==null&&(U(),U=null),M||setTimeout(x,20)}function x(){if(!M&&!navigation.transition){var z=navigation.currentEntry;z&&z.url!=null&&navigation.navigate(z.url,{state:z.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var M=!1,U=null;return navigation.addEventListener("navigate",y),navigation.addEventListener("navigatesuccess",b),navigation.addEventListener("navigateerror",b),setTimeout(x,100),function(){M=!0,navigation.removeEventListener("navigate",y),navigation.removeEventListener("navigatesuccess",b),navigation.removeEventListener("navigateerror",b),U!==null&&(U(),U=null)}}}function k5(y){this._internalRoot=y}MI.prototype.render=k5.prototype.render=function(y){var b=this._internalRoot;if(b===null)throw Error(n(409));var x=b.current,M=Ni();ZG(x,M,y,b,null,null)},MI.prototype.unmount=k5.prototype.unmount=function(){var y=this._internalRoot;if(y!==null){this._internalRoot=null;var b=y.containerInfo;ZG(y.current,2,null,y,null,null),yI(),b[lr]=null}};function MI(y){this._internalRoot=y}MI.prototype.unstable_scheduleHydration=function(y){if(y){var b=bt();y={blockedOn:null,target:y,priority:b};for(var x=0;x<Vc.length&&b!==0&&b<Vc[x].priority;x++);Vc.splice(x,0,y),x===0&&i$(y)}};var c$=e.version;if(c$!=="19.2.3")throw Error(n(527,c$,"19.2.3"));G.findDOMNode=function(y){var b=y._reactInternals;if(b===void 0)throw typeof y.render=="function"?Error(n(188)):(y=Object.keys(y).join(","),Error(n(268,y)));return y=s(b),y=y!==null?c(y):null,y=y===null?null:y.stateNode,y};var LAe={bundleType:0,version:"19.2.3",rendererPackageName:"react-dom",currentDispatcherRef:V,reconcilerVersion:"19.2.3"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var CI=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!CI.isDisabled&&CI.supportsFiber)try{re=CI.inject(LAe),Ne=CI}catch{}}return Ov.createRoot=function(y,b){if(!r(y))throw Error(n(299));var x=!1,M="",U=mz,z=bz,ie=gz;return b!=null&&(b.unstable_strictMode===!0&&(x=!0),b.identifierPrefix!==void 0&&(M=b.identifierPrefix),b.onUncaughtError!==void 0&&(U=b.onUncaughtError),b.onCaughtError!==void 0&&(z=b.onCaughtError),b.onRecoverableError!==void 0&&(ie=b.onRecoverableError)),b=WG(y,1,!1,null,null,x,M,null,U,z,ie,s$),y[lr]=b.current,A5(y),new k5(b)},Ov.hydrateRoot=function(y,b,x){if(!r(y))throw Error(n(299));var M=!1,U="",z=mz,ie=bz,_e=gz,Be=null;return x!=null&&(x.unstable_strictMode===!0&&(M=!0),x.identifierPrefix!==void 0&&(U=x.identifierPrefix),x.onUncaughtError!==void 0&&(z=x.onUncaughtError),x.onCaughtError!==void 0&&(ie=x.onCaughtError),x.onRecoverableError!==void 0&&(_e=x.onRecoverableError),x.formState!==void 0&&(Be=x.formState)),b=WG(y,1,!0,b,x??null,M,U,Be,z,ie,_e,s$),b.context=YG(null),x=b.current,M=Ni(),M=Ot(M),U=xc(M),U.callback=null,Rc(x,U,M),x=M,b.current.lanes=x,qe(b,x),Eo(b),y[lr]=b.current,A5(y),new MI(b)},Ov.version="19.2.3",Ov}var v$;function XAe(){if(v$)return $5.exports;v$=1;function a(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(a)}catch(e){console.error(e)}}return a(),$5.exports=$Ae(),$5.exports}var KAe=XAe();const JAe=mve(KAe);var _$="popstate";function WAe(a={}){function e(r,t){let{pathname:i="/",search:o="",hash:l=""}=yb(r.location.hash.substring(1));return!i.startsWith("/")&&!i.startsWith(".")&&(i="/"+i),kL("",{pathname:i,search:o,hash:l},t.state&&t.state.usr||null,t.state&&t.state.key||"default")}function u(r,t){let i=r.document.querySelector("base"),o="";if(i&&i.getAttribute("href")){let l=r.location.href,s=l.indexOf("#");o=s===-1?l:l.slice(0,s)}return o+"#"+(typeof t=="string"?t:u4(t))}function n(r,t){wu(r.pathname.charAt(0)==="/",`relative pathnames are not supported in hash history.push(${JSON.stringify(t)})`)}return ZAe(e,u,n,a)}function En(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function wu(a,e){if(!a){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function YAe(){return Math.random().toString(36).substring(2,10)}function T$(a,e){return{usr:a.state,key:a.key,idx:e}}function kL(a,e,u=null,n){return{pathname:typeof a=="string"?a:a.pathname,search:"",hash:"",...typeof e=="string"?yb(e):e,state:u,key:e&&e.key||n||YAe()}}function u4({pathname:a="/",search:e="",hash:u=""}){return e&&e!=="?"&&(a+=e.charAt(0)==="?"?e:"?"+e),u&&u!=="#"&&(a+=u.charAt(0)==="#"?u:"#"+u),a}function yb(a){let e={};if(a){let u=a.indexOf("#");u>=0&&(e.hash=a.substring(u),a=a.substring(0,u));let n=a.indexOf("?");n>=0&&(e.search=a.substring(n),a=a.substring(0,n)),a&&(e.pathname=a)}return e}function ZAe(a,e,u,n={}){let{window:r=document.defaultView,v5Compat:t=!1}=n,i=r.history,o="POP",l=null,s=c();s==null&&(s=0,i.replaceState({...i.state,idx:s},""));function c(){return(i.state||{idx:null}).idx}function d(){o="POP";let v=c(),m=v==null?null:v-s;s=v,l&&l({action:o,location:g.location,delta:m})}function f(v,m){o="PUSH";let T=kL(g.location,v,m);u&&u(T,v),s=c()+1;let w=T$(T,s),E=g.createHref(T);try{i.pushState(w,"",E)}catch(S){if(S instanceof DOMException&&S.name==="DataCloneError")throw S;r.location.assign(E)}t&&l&&l({action:o,location:g.location,delta:1})}function p(v,m){o="REPLACE";let T=kL(g.location,v,m);u&&u(T,v),s=c();let w=T$(T,s),E=g.createHref(T);i.replaceState(w,"",E),t&&l&&l({action:o,location:g.location,delta:0})}function h(v){return eOe(v)}let g={get action(){return o},get location(){return a(r,i)},listen(v){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(_$,d),l=v,()=>{r.removeEventListener(_$,d),l=null}},createHref(v){return e(r,v)},createURL:h,encodeLocation(v){let m=h(v);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:p,go(v){return i.go(v)}};return g}function eOe(a,e=!1){let u="http://localhost";typeof window<"u"&&(u=window.location.origin!=="null"?window.location.origin:window.location.href),En(u,"No window.location.(origin|href) available to create URL");let n=typeof a=="string"?a:u4(a);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=u+n),new URL(n,u)}function bve(a,e,u="/"){return tOe(a,e,u,!1)}function tOe(a,e,u,n){let r=typeof e=="string"?yb(e):e,t=Ys(r.pathname||"/",u);if(t==null)return null;let i=gve(a);rOe(i);let o=null;for(let l=0;o==null&&l<i.length;++l){let s=pOe(t);o=dOe(i[l],s,n)}return o}function gve(a,e=[],u=[],n="",r=!1){let t=(i,o,l=r,s)=>{let c={relativePath:s===void 0?i.path||"":s,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};if(c.relativePath.startsWith("/")){if(!c.relativePath.startsWith(n)&&l)return;En(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length)}let d=Ks([n,c.relativePath]),f=u.concat(c);i.children&&i.children.length>0&&(En(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),gve(i.children,e,f,d,l)),!(i.path==null&&!i.index)&&e.push({path:d,score:cOe(d,i.index),routesMeta:f})};return a.forEach((i,o)=>{if(i.path===""||!i.path?.includes("?"))t(i,o);else for(let l of vve(i.path))t(i,o,!0,l)}),e}function vve(a){let e=a.split("/");if(e.length===0)return[];let[u,...n]=e,r=u.endsWith("?"),t=u.replace(/\?$/,"");if(n.length===0)return r?[t,""]:[t];let i=vve(n.join("/")),o=[];return o.push(...i.map(l=>l===""?t:[t,l].join("/"))),r&&o.push(...i),o.map(l=>a.startsWith("/")&&l===""?"/":l)}function rOe(a){a.sort((e,u)=>e.score!==u.score?u.score-e.score:lOe(e.routesMeta.map(n=>n.childrenIndex),u.routesMeta.map(n=>n.childrenIndex)))}var nOe=/^:[\w-]+$/,aOe=3,iOe=2,uOe=1,oOe=10,sOe=-2,w$=a=>a==="*";function cOe(a,e){let u=a.split("/"),n=u.length;return u.some(w$)&&(n+=sOe),e&&(n+=iOe),u.filter(r=>!w$(r)).reduce((r,t)=>r+(nOe.test(t)?aOe:t===""?uOe:oOe),n)}function lOe(a,e){return a.length===e.length&&a.slice(0,-1).every((n,r)=>n===e[r])?a[a.length-1]-e[e.length-1]:0}function dOe(a,e,u=!1){let{routesMeta:n}=a,r={},t="/",i=[];for(let o=0;o<n.length;++o){let l=n[o],s=o===n.length-1,c=t==="/"?e:e.slice(t.length)||"/",d=gF({path:l.relativePath,caseSensitive:l.caseSensitive,end:s},c),f=l.route;if(!d&&s&&u&&!n[n.length-1].route.index&&(d=gF({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},c)),!d)return null;Object.assign(r,d.params),i.push({params:r,pathname:Ks([t,d.pathname]),pathnameBase:gOe(Ks([t,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(t=Ks([t,d.pathnameBase]))}return i}function gF(a,e){typeof a=="string"&&(a={path:a,caseSensitive:!1,end:!0});let[u,n]=fOe(a.path,a.caseSensitive,a.end),r=e.match(u);if(!r)return null;let t=r[0],i=t.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:n.reduce((s,{paramName:c,isOptional:d},f)=>{if(c==="*"){let h=o[f]||"";i=t.slice(0,t.length-h.length).replace(/(.)\/+$/,"$1")}const p=o[f];return d&&!p?s[c]=void 0:s[c]=(p||"").replace(/%2F/g,"/"),s},{}),pathname:t,pathnameBase:i,pattern:a}}function fOe(a,e=!1,u=!0){wu(a==="*"||!a.endsWith("*")||a.endsWith("/*"),`Route path "${a}" will be treated as if it were "${a.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${a.replace(/\*$/,"/*")}".`);let n=[],r="^"+a.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(i,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return a.endsWith("*")?(n.push({paramName:"*"}),r+=a==="*"||a==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):u?r+="\\/*$":a!==""&&a!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function pOe(a){try{return a.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return wu(!1,`The URL path "${a}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),a}}function Ys(a,e){if(e==="/")return a;if(!a.toLowerCase().startsWith(e.toLowerCase()))return null;let u=e.endsWith("/")?e.length-1:e.length,n=a.charAt(u);return n&&n!=="/"?null:a.slice(u)||"/"}var hOe=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,yOe=a=>hOe.test(a);function mOe(a,e="/"){let{pathname:u,search:n="",hash:r=""}=typeof a=="string"?yb(a):a,t;if(u)if(yOe(u))t=u;else{if(u.includes("//")){let i=u;u=u.replace(/\/\/+/g,"/"),wu(!1,`Pathnames cannot have embedded double slashes - normalizing ${i} -> ${u}`)}u.startsWith("/")?t=S$(u.substring(1),"/"):t=S$(u,e)}else t=e;return{pathname:t,search:vOe(n),hash:_Oe(r)}}function S$(a,e){let u=e.replace(/\/+$/,"").split("/");return a.split("/").forEach(r=>{r===".."?u.length>1&&u.pop():r!=="."&&u.push(r)}),u.length>1?u.join("/"):"/"}function W5(a,e,u,n){return`Cannot include a '${a}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${u}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function bOe(a){return a.filter((e,u)=>u===0||e.route.path&&e.route.path.length>0)}function _ve(a){let e=bOe(a);return e.map((u,n)=>n===e.length-1?u.pathname:u.pathnameBase)}function Tve(a,e,u,n=!1){let r;typeof a=="string"?r=yb(a):(r={...a},En(!r.pathname||!r.pathname.includes("?"),W5("?","pathname","search",r)),En(!r.pathname||!r.pathname.includes("#"),W5("#","pathname","hash",r)),En(!r.search||!r.search.includes("#"),W5("#","search","hash",r)));let t=a===""||r.pathname==="",i=t?"/":r.pathname,o;if(i==null)o=u;else{let d=e.length-1;if(!n&&i.startsWith("..")){let f=i.split("/");for(;f[0]==="..";)f.shift(),d-=1;r.pathname=f.join("/")}o=d>=0?e[d]:"/"}let l=mOe(r,o),s=i&&i!=="/"&&i.endsWith("/"),c=(t||i===".")&&u.endsWith("/");return!l.pathname.endsWith("/")&&(s||c)&&(l.pathname+="/"),l}var Ks=a=>a.join("/").replace(/\/\/+/g,"/"),gOe=a=>a.replace(/\/+$/,"").replace(/^\/*/,"/"),vOe=a=>!a||a==="?"?"":a.startsWith("?")?a:"?"+a,_Oe=a=>!a||a==="#"?"":a.startsWith("#")?a:"#"+a;function TOe(a){return a!=null&&typeof a.status=="number"&&typeof a.statusText=="string"&&typeof a.internal=="boolean"&&"data"in a}function wOe(a){return a.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var wve=["POST","PUT","PATCH","DELETE"];new Set(wve);var SOe=["GET",...wve];new Set(SOe);var f1=We.createContext(null);f1.displayName="DataRouter";var HF=We.createContext(null);HF.displayName="DataRouterState";We.createContext(!1);var Sve=We.createContext({isTransitioning:!1});Sve.displayName="ViewTransition";var EOe=We.createContext(new Map);EOe.displayName="Fetchers";var AOe=We.createContext(null);AOe.displayName="Await";var ho=We.createContext(null);ho.displayName="Navigation";var x4=We.createContext(null);x4.displayName="Location";var Ho=We.createContext({outlet:null,matches:[],isDataRoute:!1});Ho.displayName="Route";var q7=We.createContext(null);q7.displayName="RouteError";function OOe(a,{relative:e}={}){En(R4(),"useHref() may be used only in the context of a <Router> component.");let{basename:u,navigator:n}=We.useContext(ho),{hash:r,pathname:t,search:i}=N4(a,{relative:e}),o=t;return u!=="/"&&(o=t==="/"?u:Ks([u,t])),n.createHref({pathname:o,search:i,hash:r})}function R4(){return We.useContext(x4)!=null}function nc(){return En(R4(),"useLocation() may be used only in the context of a <Router> component."),We.useContext(x4).location}var Eve="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Ave(a){We.useContext(ho).static||We.useLayoutEffect(a)}function kF(){let{isDataRoute:a}=We.useContext(Ho);return a?UOe():xOe()}function xOe(){En(R4(),"useNavigate() may be used only in the context of a <Router> component.");let a=We.useContext(f1),{basename:e,navigator:u}=We.useContext(ho),{matches:n}=We.useContext(Ho),{pathname:r}=nc(),t=JSON.stringify(_ve(n)),i=We.useRef(!1);return Ave(()=>{i.current=!0}),We.useCallback((l,s={})=>{if(wu(i.current,Eve),!i.current)return;if(typeof l=="number"){u.go(l);return}let c=Tve(l,JSON.parse(t),r,s.relative==="path");a==null&&e!=="/"&&(c.pathname=c.pathname==="/"?e:Ks([e,c.pathname])),(s.replace?u.replace:u.push)(c,s.state,s)},[e,u,t,r,a])}We.createContext(null);function ROe(){let{matches:a}=We.useContext(Ho),e=a[a.length-1];return e?e.params:{}}function N4(a,{relative:e}={}){let{matches:u}=We.useContext(Ho),{pathname:n}=nc(),r=JSON.stringify(_ve(u));return We.useMemo(()=>Tve(a,JSON.parse(r),n,e==="path"),[a,r,n,e])}function NOe(a,e){return Ove(a,e)}function Ove(a,e,u,n,r){En(R4(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:t}=We.useContext(ho),{matches:i}=We.useContext(Ho),o=i[i.length-1],l=o?o.params:{},s=o?o.pathname:"/",c=o?o.pathnameBase:"/",d=o&&o.route;{let T=d&&d.path||"";xve(s,!d||T.endsWith("*")||T.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${s}" (under <Route path="${T}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${T}"> to <Route path="${T==="/"?"*":`${T}/*`}">.`)}let f=nc(),p;if(e){let T=typeof e=="string"?yb(e):e;En(c==="/"||T.pathname?.startsWith(c),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${c}" but pathname "${T.pathname}" was given in the \`location\` prop.`),p=T}else p=f;let h=p.pathname||"/",g=h;if(c!=="/"){let T=c.replace(/^\//,"").split("/");g="/"+h.replace(/^\//,"").split("/").slice(T.length).join("/")}let v=bve(a,{pathname:g});wu(d||v!=null,`No routes matched location "${p.pathname}${p.search}${p.hash}" `),wu(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${p.pathname}${p.search}${p.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let m=jOe(v&&v.map(T=>Object.assign({},T,{params:Object.assign({},l,T.params),pathname:Ks([c,t.encodeLocation?t.encodeLocation(T.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathname]),pathnameBase:T.pathnameBase==="/"?c:Ks([c,t.encodeLocation?t.encodeLocation(T.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:T.pathnameBase])})),i,u,n,r);return e&&m?We.createElement(x4.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...p},navigationType:"POP"}},m):m}function IOe(){let a=BOe(),e=TOe(a)?`${a.status} ${a.statusText}`:a instanceof Error?a.message:JSON.stringify(a),u=a instanceof Error?a.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},t={padding:"2px 4px",backgroundColor:n},i=null;return console.error("Error handled by React Router default ErrorBoundary:",a),i=We.createElement(We.Fragment,null,We.createElement("p",null," Hey developer "),We.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",We.createElement("code",{style:t},"ErrorBoundary")," or"," ",We.createElement("code",{style:t},"errorElement")," prop on your route.")),We.createElement(We.Fragment,null,We.createElement("h2",null,"Unexpected Application Error!"),We.createElement("h3",{style:{fontStyle:"italic"}},e),u?We.createElement("pre",{style:r},u):null,i)}var DOe=We.createElement(IOe,null),FOe=class extends We.Component{constructor(a){super(a),this.state={location:a.location,revalidation:a.revalidation,error:a.error}}static getDerivedStateFromError(a){return{error:a}}static getDerivedStateFromProps(a,e){return e.location!==a.location||e.revalidation!=="idle"&&a.revalidation==="idle"?{error:a.error,location:a.location,revalidation:a.revalidation}:{error:a.error!==void 0?a.error:e.error,location:e.location,revalidation:a.revalidation||e.revalidation}}componentDidCatch(a,e){this.props.onError?this.props.onError(a,e):console.error("React Router caught the following error during render",a)}render(){return this.state.error!==void 0?We.createElement(Ho.Provider,{value:this.props.routeContext},We.createElement(q7.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function POe({routeContext:a,match:e,children:u}){let n=We.useContext(f1);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),We.createElement(Ho.Provider,{value:a},u)}function jOe(a,e=[],u=null,n=null,r=null){if(a==null){if(!u)return null;if(u.errors)a=u.matches;else if(e.length===0&&!u.initialized&&u.matches.length>0)a=u.matches;else return null}let t=a,i=u?.errors;if(i!=null){let c=t.findIndex(d=>d.route.id&&i?.[d.route.id]!==void 0);En(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),t=t.slice(0,Math.min(t.length,c+1))}let o=!1,l=-1;if(u)for(let c=0;c<t.length;c++){let d=t[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:f,errors:p}=u,h=d.route.loader&&!f.hasOwnProperty(d.route.id)&&(!p||p[d.route.id]===void 0);if(d.route.lazy||h){o=!0,l>=0?t=t.slice(0,l+1):t=[t[0]];break}}}let s=u&&n?(c,d)=>{n(c,{location:u.location,params:u.matches?.[0]?.params??{},unstable_pattern:wOe(u.matches),errorInfo:d})}:void 0;return t.reduceRight((c,d,f)=>{let p,h=!1,g=null,v=null;u&&(p=i&&d.route.id?i[d.route.id]:void 0,g=d.route.errorElement||DOe,o&&(l<0&&f===0?(xve("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),h=!0,v=null):l===f&&(h=!0,v=d.route.hydrateFallbackElement||null)));let m=e.concat(t.slice(0,f+1)),T=()=>{let w;return p?w=g:h?w=v:d.route.Component?w=We.createElement(d.route.Component,null):d.route.element?w=d.route.element:w=c,We.createElement(POe,{match:d,routeContext:{outlet:c,matches:m,isDataRoute:u!=null},children:w})};return u&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?We.createElement(FOe,{location:u.location,revalidation:u.revalidation,component:g,error:p,children:T(),routeContext:{outlet:null,matches:m,isDataRoute:!0},onError:s}):T()},null)}function B7(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function MOe(a){let e=We.useContext(f1);return En(e,B7(a)),e}function COe(a){let e=We.useContext(HF);return En(e,B7(a)),e}function LOe(a){let e=We.useContext(Ho);return En(e,B7(a)),e}function U7(a){let e=LOe(a),u=e.matches[e.matches.length-1];return En(u.route.id,`${a} can only be used on routes that contain a unique "id"`),u.route.id}function qOe(){return U7("useRouteId")}function BOe(){let a=We.useContext(q7),e=COe("useRouteError"),u=U7("useRouteError");return a!==void 0?a:e.errors?.[u]}function UOe(){let{router:a}=MOe("useNavigate"),e=U7("useNavigate"),u=We.useRef(!1);return Ave(()=>{u.current=!0}),We.useCallback(async(r,t={})=>{wu(u.current,Eve),u.current&&(typeof r=="number"?await a.navigate(r):await a.navigate(r,{fromRouteId:e,...t}))},[a,e])}var E$={};function xve(a,e,u){!e&&!E$[a]&&(E$[a]=!0,wu(!1,u))}We.memo(QOe);function QOe({routes:a,future:e,state:u,unstable_onError:n}){return Ove(a,void 0,u,n,e)}function M6(a){En(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function VOe({basename:a="/",children:e=null,location:u,navigationType:n="POP",navigator:r,static:t=!1,unstable_useTransitions:i}){En(!R4(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=a.replace(/^\/*/,"/"),l=We.useMemo(()=>({basename:o,navigator:r,static:t,unstable_useTransitions:i,future:{}}),[o,r,t,i]);typeof u=="string"&&(u=yb(u));let{pathname:s="/",search:c="",hash:d="",state:f=null,key:p="default"}=u,h=We.useMemo(()=>{let g=Ys(s,o);return g==null?null:{location:{pathname:g,search:c,hash:d,state:f,key:p},navigationType:n}},[o,s,c,d,f,p,n]);return wu(h!=null,`<Router basename="${o}"> is not able to match the URL "${s}${c}${d}" because it does not start with the basename, so the <Router> won't render anything.`),h==null?null:We.createElement(ho.Provider,{value:l},We.createElement(x4.Provider,{children:e,value:h}))}function HOe({children:a,location:e}){return NOe(zL(a),e)}function zL(a,e=[]){let u=[];return We.Children.forEach(a,(n,r)=>{if(!We.isValidElement(n))return;let t=[...e,r];if(n.type===We.Fragment){u.push.apply(u,zL(n.props.children,t));return}En(n.type===M6,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),En(!n.props.index||!n.props.children,"An index route cannot have child routes.");let i={id:n.props.id||t.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,middleware:n.props.middleware,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(i.children=zL(n.props.children,t)),u.push(i)}),u}var kD="get",zD="application/x-www-form-urlencoded";function zF(a){return typeof HTMLElement<"u"&&a instanceof HTMLElement}function kOe(a){return zF(a)&&a.tagName.toLowerCase()==="button"}function zOe(a){return zF(a)&&a.tagName.toLowerCase()==="form"}function GOe(a){return zF(a)&&a.tagName.toLowerCase()==="input"}function $Oe(a){return!!(a.metaKey||a.altKey||a.ctrlKey||a.shiftKey)}function XOe(a,e){return a.button===0&&(!e||e==="_self")&&!$Oe(a)}var LI=null;function KOe(){if(LI===null)try{new FormData(document.createElement("form"),0),LI=!1}catch{LI=!0}return LI}var JOe=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Y5(a){return a!=null&&!JOe.has(a)?(wu(!1,`"${a}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${zD}"`),null):a}function WOe(a,e){let u,n,r,t,i;if(zOe(a)){let o=a.getAttribute("action");n=o?Ys(o,e):null,u=a.getAttribute("method")||kD,r=Y5(a.getAttribute("enctype"))||zD,t=new FormData(a)}else if(kOe(a)||GOe(a)&&(a.type==="submit"||a.type==="image")){let o=a.form;if(o==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let l=a.getAttribute("formaction")||o.getAttribute("action");if(n=l?Ys(l,e):null,u=a.getAttribute("formmethod")||o.getAttribute("method")||kD,r=Y5(a.getAttribute("formenctype"))||Y5(o.getAttribute("enctype"))||zD,t=new FormData(o,a),!KOe()){let{name:s,type:c,value:d}=a;if(c==="image"){let f=s?`${s}.`:"";t.append(`${f}x`,"0"),t.append(`${f}y`,"0")}else s&&t.append(s,d)}}else{if(zF(a))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');u=kD,n=null,r=zD,i=a}return t&&r==="text/plain"&&(i=t,t=void 0),{action:n,method:u.toLowerCase(),encType:r,formData:t,body:i}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Q7(a,e){if(a===!1||a===null||typeof a>"u")throw new Error(e)}function YOe(a,e,u){let n=typeof a=="string"?new URL(a,typeof window>"u"?"server://singlefetch/":window.location.origin):a;return n.pathname==="/"?n.pathname=`_root.${u}`:e&&Ys(n.pathname,e)==="/"?n.pathname=`${e.replace(/\/$/,"")}/_root.${u}`:n.pathname=`${n.pathname.replace(/\/$/,"")}.${u}`,n}async function ZOe(a,e){if(a.id in e)return e[a.id];try{let u=await import(a.module);return e[a.id]=u,u}catch(u){return console.error(`Error loading route module \`${a.module}\`, reloading page...`),console.error(u),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function exe(a){return a==null?!1:a.href==null?a.rel==="preload"&&typeof a.imageSrcSet=="string"&&typeof a.imageSizes=="string":typeof a.rel=="string"&&typeof a.href=="string"}async function txe(a,e,u){let n=await Promise.all(a.map(async r=>{let t=e.routes[r.route.id];if(t){let i=await ZOe(t,u);return i.links?i.links():[]}return[]}));return ixe(n.flat(1).filter(exe).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function A$(a,e,u,n,r,t){let i=(l,s)=>u[s]?l.route.id!==u[s].route.id:!0,o=(l,s)=>u[s].pathname!==l.pathname||u[s].route.path?.endsWith("*")&&u[s].params["*"]!==l.params["*"];return t==="assets"?e.filter((l,s)=>i(l,s)||o(l,s)):t==="data"?e.filter((l,s)=>{let c=n.routes[l.route.id];if(!c||!c.hasLoader)return!1;if(i(l,s)||o(l,s))return!0;if(l.route.shouldRevalidate){let d=l.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:u[0]?.params||{},nextUrl:new URL(a,window.origin),nextParams:l.params,defaultShouldRevalidate:!0});if(typeof d=="boolean")return d}return!0}):[]}function rxe(a,e,{includeHydrateFallback:u}={}){return nxe(a.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let t=[r.module];return r.clientActionModule&&(t=t.concat(r.clientActionModule)),r.clientLoaderModule&&(t=t.concat(r.clientLoaderModule)),u&&r.hydrateFallbackModule&&(t=t.concat(r.hydrateFallbackModule)),r.imports&&(t=t.concat(r.imports)),t}).flat(1))}function nxe(a){return[...new Set(a)]}function axe(a){let e={},u=Object.keys(a).sort();for(let n of u)e[n]=a[n];return e}function ixe(a,e){let u=new Set;return new Set(e),a.reduce((n,r)=>{let t=JSON.stringify(axe(r));return u.has(t)||(u.add(t),n.push({key:t,link:r})),n},[])}function Rve(){let a=We.useContext(f1);return Q7(a,"You must render this element inside a <DataRouterContext.Provider> element"),a}function uxe(){let a=We.useContext(HF);return Q7(a,"You must render this element inside a <DataRouterStateContext.Provider> element"),a}var V7=We.createContext(void 0);V7.displayName="FrameworkContext";function Nve(){let a=We.useContext(V7);return Q7(a,"You must render this element inside a <HydratedRouter> element"),a}function oxe(a,e){let u=We.useContext(V7),[n,r]=We.useState(!1),[t,i]=We.useState(!1),{onFocus:o,onBlur:l,onMouseEnter:s,onMouseLeave:c,onTouchStart:d}=e,f=We.useRef(null);We.useEffect(()=>{if(a==="render"&&i(!0),a==="viewport"){let g=m=>{m.forEach(T=>{i(T.isIntersecting)})},v=new IntersectionObserver(g,{threshold:.5});return f.current&&v.observe(f.current),()=>{v.disconnect()}}},[a]),We.useEffect(()=>{if(n){let g=setTimeout(()=>{i(!0)},100);return()=>{clearTimeout(g)}}},[n]);let p=()=>{r(!0)},h=()=>{r(!1),i(!1)};return u?a!=="intent"?[t,f,{}]:[t,f,{onFocus:xv(o,p),onBlur:xv(l,h),onMouseEnter:xv(s,p),onMouseLeave:xv(c,h),onTouchStart:xv(d,p)}]:[!1,f,{}]}function xv(a,e){return u=>{a&&a(u),u.defaultPrevented||e(u)}}function sxe({page:a,...e}){let{router:u}=Rve(),n=We.useMemo(()=>bve(u.routes,a,u.basename),[u.routes,a,u.basename]);return n?We.createElement(lxe,{page:a,matches:n,...e}):null}function cxe(a){let{manifest:e,routeModules:u}=Nve(),[n,r]=We.useState([]);return We.useEffect(()=>{let t=!1;return txe(a,e,u).then(i=>{t||r(i)}),()=>{t=!0}},[a,e,u]),n}function lxe({page:a,matches:e,...u}){let n=nc(),{manifest:r,routeModules:t}=Nve(),{basename:i}=Rve(),{loaderData:o,matches:l}=uxe(),s=We.useMemo(()=>A$(a,e,l,r,n,"data"),[a,e,l,r,n]),c=We.useMemo(()=>A$(a,e,l,r,n,"assets"),[a,e,l,r,n]),d=We.useMemo(()=>{if(a===n.pathname+n.search+n.hash)return[];let h=new Set,g=!1;if(e.forEach(m=>{let T=r.routes[m.route.id];!T||!T.hasLoader||(!s.some(w=>w.route.id===m.route.id)&&m.route.id in o&&t[m.route.id]?.shouldRevalidate||T.hasClientLoader?g=!0:h.add(m.route.id))}),h.size===0)return[];let v=YOe(a,i,"data");return g&&h.size>0&&v.searchParams.set("_routes",e.filter(m=>h.has(m.route.id)).map(m=>m.route.id).join(",")),[v.pathname+v.search]},[i,o,n,r,s,e,a,t]),f=We.useMemo(()=>rxe(c,r),[c,r]),p=cxe(c);return We.createElement(We.Fragment,null,d.map(h=>We.createElement("link",{key:h,rel:"prefetch",as:"fetch",href:h,...u})),f.map(h=>We.createElement("link",{key:h,rel:"modulepreload",href:h,...u})),p.map(({key:h,link:g})=>We.createElement("link",{key:h,nonce:u.nonce,...g})))}function dxe(...a){return e=>{a.forEach(u=>{typeof u=="function"?u(e):u!=null&&(u.current=e)})}}var Ive=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Ive&&(window.__reactRouterVersion="7.10.1")}catch{}function fxe({basename:a,children:e,unstable_useTransitions:u,window:n}){let r=We.useRef();r.current==null&&(r.current=WAe({window:n,v5Compat:!0}));let t=r.current,[i,o]=We.useState({action:t.action,location:t.location}),l=We.useCallback(s=>{u===!1?o(s):We.startTransition(()=>o(s))},[u]);return We.useLayoutEffect(()=>t.listen(l),[t,l]),We.createElement(VOe,{basename:a,children:e,location:i.location,navigationType:i.action,navigator:t,unstable_useTransitions:u===!0})}var Dve=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,vF=We.forwardRef(function({onClick:e,discover:u="render",prefetch:n="none",relative:r,reloadDocument:t,replace:i,state:o,target:l,to:s,preventScrollReset:c,viewTransition:d,...f},p){let{basename:h,unstable_useTransitions:g}=We.useContext(ho),v=typeof s=="string"&&Dve.test(s),m,T=!1;if(typeof s=="string"&&v&&(m=s,Ive))try{let I=new URL(window.location.href),A=s.startsWith("//")?new URL(I.protocol+s):new URL(s),P=Ys(A.pathname,h);A.origin===I.origin&&P!=null?s=P+A.search+A.hash:T=!0}catch{wu(!1,`<Link to="${s}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let w=OOe(s,{relative:r}),[E,S,N]=oxe(n,f),j=mxe(s,{replace:i,state:o,target:l,preventScrollReset:c,relative:r,viewTransition:d,unstable_useTransitions:g});function q(I){e&&e(I),I.defaultPrevented||j(I)}let O=We.createElement("a",{...f,...N,href:m||w,onClick:T||t?e:q,ref:dxe(p,S),target:l,"data-discover":!v&&u==="render"?"true":void 0});return E&&!v?We.createElement(We.Fragment,null,O,We.createElement(sxe,{page:w})):O});vF.displayName="Link";var pxe=We.forwardRef(function({"aria-current":e="page",caseSensitive:u=!1,className:n="",end:r=!1,style:t,to:i,viewTransition:o,children:l,...s},c){let d=N4(i,{relative:s.relative}),f=nc(),p=We.useContext(HF),{navigator:h,basename:g}=We.useContext(ho),v=p!=null&&Txe(d)&&o===!0,m=h.encodeLocation?h.encodeLocation(d).pathname:d.pathname,T=f.pathname,w=p&&p.navigation&&p.navigation.location?p.navigation.location.pathname:null;u||(T=T.toLowerCase(),w=w?w.toLowerCase():null,m=m.toLowerCase()),w&&g&&(w=Ys(w,g)||w);const E=m!=="/"&&m.endsWith("/")?m.length-1:m.length;let S=T===m||!r&&T.startsWith(m)&&T.charAt(E)==="/",N=w!=null&&(w===m||!r&&w.startsWith(m)&&w.charAt(m.length)==="/"),j={isActive:S,isPending:N,isTransitioning:v},q=S?e:void 0,O;typeof n=="function"?O=n(j):O=[n,S?"active":null,N?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let I=typeof t=="function"?t(j):t;return We.createElement(vF,{...s,"aria-current":q,className:O,ref:c,style:I,to:i,viewTransition:o},typeof l=="function"?l(j):l)});pxe.displayName="NavLink";var hxe=We.forwardRef(({discover:a="render",fetcherKey:e,navigate:u,reloadDocument:n,replace:r,state:t,method:i=kD,action:o,onSubmit:l,relative:s,preventScrollReset:c,viewTransition:d,...f},p)=>{let{unstable_useTransitions:h}=We.useContext(ho),g=vxe(),v=_xe(o,{relative:s}),m=i.toLowerCase()==="get"?"get":"post",T=typeof o=="string"&&Dve.test(o),w=E=>{if(l&&l(E),E.defaultPrevented)return;E.preventDefault();let S=E.nativeEvent.submitter,N=S?.getAttribute("formmethod")||i,j=()=>g(S||E.currentTarget,{fetcherKey:e,method:N,navigate:u,replace:r,state:t,relative:s,preventScrollReset:c,viewTransition:d});h&&u!==!1?We.startTransition(()=>j()):j()};return We.createElement("form",{ref:p,method:m,action:v,onSubmit:n?l:w,...f,"data-discover":!T&&a==="render"?"true":void 0})});hxe.displayName="Form";function yxe(a){return`${a} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Fve(a){let e=We.useContext(f1);return En(e,yxe(a)),e}function mxe(a,{target:e,replace:u,state:n,preventScrollReset:r,relative:t,viewTransition:i,unstable_useTransitions:o}={}){let l=kF(),s=nc(),c=N4(a,{relative:t});return We.useCallback(d=>{if(XOe(d,e)){d.preventDefault();let f=u!==void 0?u:u4(s)===u4(c),p=()=>l(a,{replace:f,state:n,preventScrollReset:r,relative:t,viewTransition:i});o?We.startTransition(()=>p()):p()}},[s,l,c,u,n,e,a,r,t,i,o])}var bxe=0,gxe=()=>`__${String(++bxe)}__`;function vxe(){let{router:a}=Fve("useSubmit"),{basename:e}=We.useContext(ho),u=qOe(),n=a.fetch,r=a.navigate;return We.useCallback(async(t,i={})=>{let{action:o,method:l,encType:s,formData:c,body:d}=WOe(t,e);if(i.navigate===!1){let f=i.fetcherKey||gxe();await n(f,u,i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||l,formEncType:i.encType||s,flushSync:i.flushSync})}else await r(i.action||o,{preventScrollReset:i.preventScrollReset,formData:c,body:d,formMethod:i.method||l,formEncType:i.encType||s,replace:i.replace,state:i.state,fromRouteId:u,flushSync:i.flushSync,viewTransition:i.viewTransition})},[n,r,e,u])}function _xe(a,{relative:e}={}){let{basename:u}=We.useContext(ho),n=We.useContext(Ho);En(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),t={...N4(a||".",{relative:e})},i=nc();if(a==null){t.search=i.search;let o=new URLSearchParams(t.search),l=o.getAll("index");if(l.some(c=>c==="")){o.delete("index"),l.filter(d=>d).forEach(d=>o.append("index",d));let c=o.toString();t.search=c?`?${c}`:""}}return(!a||a===".")&&r.route.index&&(t.search=t.search?t.search.replace(/^\?/,"?index&"):"?index"),u!=="/"&&(t.pathname=t.pathname==="/"?u:Ks([u,t.pathname])),u4(t)}function Txe(a,{relative:e}={}){let u=We.useContext(Sve);En(u!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Fve("useViewTransitionState"),r=N4(a,{relative:e});if(!u.isTransitioning)return!1;let t=Ys(u.currentLocation.pathname,n)||u.currentLocation.pathname,i=Ys(u.nextLocation.pathname,n)||u.nextLocation.pathname;return gF(r.pathname,i)!=null||gF(r.pathname,t)!=null}var rd={},Rv={},nd={},ad={};var _F="@@__IMMUTABLE_INDEXED__@@";function bi(a){return!!(a&&a[_F])}var TF="@@__IMMUTABLE_KEYED__@@";function en(a){return!!(a&&a[TF])}function GF(a){return en(a)||bi(a)}var Pve="@@__IMMUTABLE_ITERABLE__@@";function gi(a){return!!(a&&a[Pve])}var ca=function(e){return gi(e)?e:Ca(e)},Eu=(function(a){function e(u){return en(u)?u:gl(u)}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e})(ca),mb=(function(a){function e(u){return bi(u)?u:Ou(u)}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e})(ca),p1=(function(a){function e(u){return gi(u)&&!GF(u)?u:b1(u)}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e})(ca);ca.Keyed=Eu;ca.Indexed=mb;ca.Set=p1;var h1=0,Ui=1,Qi=2,GL=typeof Symbol=="function"&&Symbol.iterator,jve="@@iterator",$F=GL||jve,mr=function(e){this.next=e};mr.prototype.toString=function(){return"[Iterator]"};mr.KEYS=h1;mr.VALUES=Ui;mr.ENTRIES=Qi;mr.prototype.inspect=mr.prototype.toSource=function(){return this.toString()};mr.prototype[$F]=function(){return this};function dn(a,e,u,n){var r=a===h1?e:a===Ui?u:[e,u];return n?n.value=r:n={value:r,done:!1},n}function Ma(){return{value:void 0,done:!0}}function H7(a){return Array.isArray(a)?!0:!!XF(a)}function O$(a){return!!(a&&typeof a.next=="function")}function $L(a){var e=XF(a);return e&&e.call(a)}function XF(a){var e=a&&(GL&&a[GL]||a[jve]);if(typeof e=="function")return e}function wxe(a){var e=XF(a);return e&&e===a.entries}function Sxe(a){var e=XF(a);return e&&e===a.keys}var I4="delete",Jr=5,Li=1<<Jr,Ya=Li-1,fr={};function XL(){return{value:!1}}function vu(a){a&&(a.value=!0)}function k7(){}function Gg(a){return a.size===void 0&&(a.size=a.__iterate(Mve)),a.size}function sl(a,e){if(typeof e!="number"){var u=e>>>0;if(""+u!==e||u===4294967295)return NaN;e=u}return e<0?Gg(a)+e:e}function Mve(){return!0}function D4(a,e,u){return(a===0&&!Lve(a)||u!==void 0&&a<=-u)&&(e===void 0||u!==void 0&&e>=u)}function y1(a,e){return Cve(a,e,0)}function F4(a,e){return Cve(a,e,e)}function Cve(a,e,u){return a===void 0?u:Lve(a)?e===1/0?e:Math.max(0,e+a)|0:e===void 0||e===a?a:Math.min(e,a)|0}function Lve(a){return a<0||a===0&&1/a===-1/0}var qve="@@__IMMUTABLE_RECORD__@@";function bl(a){return!!(a&&a[qve])}function Au(a){return gi(a)||bl(a)}var cl="@@__IMMUTABLE_ORDERED__@@";function co(a){return!!(a&&a[cl])}var Bve="@@__IMMUTABLE_SEQ__@@";function KF(a){return!!(a&&a[Bve])}var m1=Object.prototype.hasOwnProperty;function z7(a){return Array.isArray(a)||typeof a=="string"?!0:a&&typeof a=="object"&&Number.isInteger(a.length)&&a.length>=0&&(a.length===0?Object.keys(a).length===1:a.hasOwnProperty(a.length-1))}var Ca=(function(a){function e(u){return u==null?$7():Au(u)?u.toSeq():Axe(u)}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.toSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq {","}")},e.prototype.cacheResult=function(){return!this._cache&&this.__iterateUncached&&(this._cache=this.entrySeq().toArray(),this.size=this._cache.length),this},e.prototype.__iterate=function(n,r){var t=this._cache;if(t){for(var i=t.length,o=0;o!==i;){var l=t[r?i-++o:o++];if(n(l[1],l[0],this)===!1)break}return o}return this.__iterateUncached(n,r)},e.prototype.__iterator=function(n,r){var t=this._cache;if(t){var i=t.length,o=0;return new mr(function(){if(o===i)return Ma();var l=t[r?i-++o:o++];return dn(n,l[0],l[1])})}return this.__iteratorUncached(n,r)},e})(ca),gl=(function(a){function e(u){return u==null?$7().toKeyedSeq():gi(u)?en(u)?u.toSeq():u.fromEntrySeq():bl(u)?u.toSeq():X7(u)}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.toKeyedSeq=function(){return this},e})(Ca),Ou=(function(a){function e(u){return u==null?$7():gi(u)?en(u)?u.entrySeq():u.toIndexedSeq():bl(u)?u.toSeq().entrySeq():Uve(u)}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toIndexedSeq=function(){return this},e.prototype.toString=function(){return this.__toString("Seq [","]")},e})(Ca),b1=(function(a){function e(u){return(gi(u)&&!GF(u)?u:Ou(u)).toSetSeq()}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.of=function(){return e(arguments)},e.prototype.toSetSeq=function(){return this},e})(Ca);Ca.isSeq=KF;Ca.Keyed=gl;Ca.Set=b1;Ca.Indexed=Ou;Ca.prototype[Bve]=!0;var $g=(function(a){function e(u){this._array=u,this.size=u.length}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.get=function(n,r){return this.has(n)?this._array[sl(this,n)]:r},e.prototype.__iterate=function(n,r){for(var t=this._array,i=t.length,o=0;o!==i;){var l=r?i-++o:o++;if(n(t[l],l,this)===!1)break}return o},e.prototype.__iterator=function(n,r){var t=this._array,i=t.length,o=0;return new mr(function(){if(o===i)return Ma();var l=r?i-++o:o++;return dn(n,l,t[l])})},e})(Ou),G7=(function(a){function e(u){var n=Object.keys(u).concat(Object.getOwnPropertySymbols?Object.getOwnPropertySymbols(u):[]);this._object=u,this._keys=n,this.size=n.length}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.get=function(n,r){return r!==void 0&&!this.has(n)?r:this._object[n]},e.prototype.has=function(n){return m1.call(this._object,n)},e.prototype.__iterate=function(n,r){for(var t=this._object,i=this._keys,o=i.length,l=0;l!==o;){var s=i[r?o-++l:l++];if(n(t[s],s,this)===!1)break}return l},e.prototype.__iterator=function(n,r){var t=this._object,i=this._keys,o=i.length,l=0;return new mr(function(){if(l===o)return Ma();var s=i[r?o-++l:l++];return dn(n,s,t[s])})},e})(gl);G7.prototype[cl]=!0;var Exe=(function(a){function e(u){this._collection=u,this.size=u.length||u.size}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,r){if(r)return this.cacheResult().__iterate(n,r);var t=this._collection,i=$L(t),o=0;if(O$(i))for(var l;!(l=i.next()).done&&n(l.value,o++,this)!==!1;);return o},e.prototype.__iteratorUncached=function(n,r){if(r)return this.cacheResult().__iterator(n,r);var t=this._collection,i=$L(t);if(!O$(i))return new mr(Ma);var o=0;return new mr(function(){var l=i.next();return l.done?l:dn(n,o++,l.value)})},e})(Ou),x$;function $7(){return x$||(x$=new $g([]))}function X7(a){var e=K7(a);if(e)return e.fromEntrySeq();if(typeof a=="object")return new G7(a);throw new TypeError("Expected Array or collection object of [k, v] entries, or keyed object: "+a)}function Uve(a){var e=K7(a);if(e)return e;throw new TypeError("Expected Array or collection object of values: "+a)}function Axe(a){var e=K7(a);if(e)return wxe(a)?e.fromEntrySeq():Sxe(a)?e.toSetSeq():e;if(typeof a=="object")return new G7(a);throw new TypeError("Expected Array or collection object of values, or keyed object: "+a)}function K7(a){return z7(a)?new $g(a):H7(a)?new Exe(a):void 0}function P4(){return this.__ensureOwner()}function j4(){return this.__ownerID?this:this.__ensureOwner(new k7)}var Nv=typeof Math.imul=="function"&&Math.imul(4294967295,2)===-2?Math.imul:function(e,u){e|=0,u|=0;var n=e&65535,r=u&65535;return n*r+((e>>>16)*r+n*(u>>>16)<<16>>>0)|0};function JF(a){return a>>>1&1073741824|a&3221225471}var Oxe=Object.prototype.valueOf;function fi(a){if(a==null)return R$(a);if(typeof a.hashCode=="function")return JF(a.hashCode(a));var e=Fxe(a);if(e==null)return R$(e);switch(typeof e){case"boolean":return e?1108378657:1108378656;case"number":return xxe(e);case"string":return e.length>Pxe?Rxe(e):KL(e);case"object":case"function":return Ixe(e);case"symbol":return Nxe(e);default:if(typeof e.toString=="function")return KL(e.toString());throw new Error("Value type "+typeof e+" cannot be hashed.")}}function R$(a){return a===null?1108378658:1108378659}function xxe(a){if(a!==a||a===1/0)return 0;var e=a|0;for(e!==a&&(e^=a*4294967295);a>4294967295;)a/=4294967295,e^=a;return JF(e)}function Rxe(a){var e=tj[a];return e===void 0&&(e=KL(a),ej===jxe&&(ej=0,tj={}),ej++,tj[a]=e),e}function KL(a){for(var e=0,u=0;u<a.length;u++)e=31*e+a.charCodeAt(u)|0;return JF(e)}function Nxe(a){var e=D$[a];return e!==void 0||(e=Qve(),D$[a]=e),e}function Ixe(a){var e;if(JL&&(e=WL.get(a),e!==void 0)||(e=a[Zm],e!==void 0)||!I$&&(e=a.propertyIsEnumerable&&a.propertyIsEnumerable[Zm],e!==void 0||(e=Dxe(a),e!==void 0)))return e;if(e=Qve(),JL)WL.set(a,e);else{if(N$!==void 0&&N$(a)===!1)throw new Error("Non-extensible objects are not allowed as keys.");if(I$)Object.defineProperty(a,Zm,{enumerable:!1,configurable:!1,writable:!1,value:e});else if(a.propertyIsEnumerable!==void 0&&a.propertyIsEnumerable===a.constructor.prototype.propertyIsEnumerable)a.propertyIsEnumerable=function(){return this.constructor.prototype.propertyIsEnumerable.apply(this,arguments)},a.propertyIsEnumerable[Zm]=e;else if(a.nodeType!==void 0)a[Zm]=e;else throw new Error("Unable to set a non-enumerable property on object.")}return e}var N$=Object.isExtensible,I$=(function(){try{return Object.defineProperty({},"@",{}),!0}catch{return!1}})();function Dxe(a){if(a&&a.nodeType>0)switch(a.nodeType){case 1:return a.uniqueID;case 9:return a.documentElement&&a.documentElement.uniqueID}}function Fxe(a){return a.valueOf!==Oxe&&typeof a.valueOf=="function"?a.valueOf(a):a}function Qve(){var a=++Z5;return Z5&1073741824&&(Z5=0),a}var JL=typeof WeakMap=="function",WL;JL&&(WL=new WeakMap);var D$=Object.create(null),Z5=0,Zm="__immutablehash__";typeof Symbol=="function"&&(Zm=Symbol(Zm));var Pxe=16,jxe=255,ej=0,tj={},WF=(function(a){function e(u,n){this._iter=u,this._useKeys=n,this.size=u.size}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.get=function(n,r){return this._iter.get(n,r)},e.prototype.has=function(n){return this._iter.has(n)},e.prototype.valueSeq=function(){return this._iter.valueSeq()},e.prototype.reverse=function(){var n=this,r=J7(this,!0);return this._useKeys||(r.valueSeq=function(){return n._iter.toSeq().reverse()}),r},e.prototype.map=function(n,r){var t=this,i=Gve(this,n,r);return this._useKeys||(i.valueSeq=function(){return t._iter.toSeq().map(n,r)}),i},e.prototype.__iterate=function(n,r){var t=this;return this._iter.__iterate(function(i,o){return n(i,o,t)},r)},e.prototype.__iterator=function(n,r){return this._iter.__iterator(n,r)},e})(gl);WF.prototype[cl]=!0;var Vve=(function(a){function e(u){this._iter=u,this.size=u.size}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.includes=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,r){var t=this,i=0;return r&&Gg(this),this._iter.__iterate(function(o){return n(o,r?t.size-++i:i++,t)},r)},e.prototype.__iterator=function(n,r){var t=this,i=this._iter.__iterator(Ui,r),o=0;return r&&Gg(this),new mr(function(){var l=i.next();return l.done?l:dn(n,r?t.size-++o:o++,l.value,l)})},e})(Ou),Hve=(function(a){function e(u){this._iter=u,this.size=u.size}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.has=function(n){return this._iter.includes(n)},e.prototype.__iterate=function(n,r){var t=this;return this._iter.__iterate(function(i){return n(i,i,t)},r)},e.prototype.__iterator=function(n,r){var t=this._iter.__iterator(Ui,r);return new mr(function(){var i=t.next();return i.done?i:dn(n,i.value,i.value,i)})},e})(b1),kve=(function(a){function e(u){this._iter=u,this.size=u.size}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.entrySeq=function(){return this._iter.toSeq()},e.prototype.__iterate=function(n,r){var t=this;return this._iter.__iterate(function(i){if(i){P$(i);var o=gi(i);return n(o?i.get(1):i[1],o?i.get(0):i[0],t)}},r)},e.prototype.__iterator=function(n,r){var t=this._iter.__iterator(Ui,r);return new mr(function(){for(;;){var i=t.next();if(i.done)return i;var o=i.value;if(o){P$(o);var l=gi(o);return dn(n,l?o.get(0):o[0],l?o.get(1):o[1],i)}}})},e})(gl);Vve.prototype.cacheResult=WF.prototype.cacheResult=Hve.prototype.cacheResult=kve.prototype.cacheResult=Z7;function zve(a){var e=ko(a);return e._iter=a,e.size=a.size,e.flip=function(){return a},e.reverse=function(){var u=a.reverse.apply(this);return u.flip=function(){return a.reverse()},u},e.has=function(u){return a.includes(u)},e.includes=function(u){return a.has(u)},e.cacheResult=Z7,e.__iterateUncached=function(u,n){var r=this;return a.__iterate(function(t,i){return u(i,t,r)!==!1},n)},e.__iteratorUncached=function(u,n){if(u===Qi){var r=a.__iterator(u,n);return new mr(function(){var t=r.next();if(!t.done){var i=t.value[0];t.value[0]=t.value[1],t.value[1]=i}return t})}return a.__iterator(u===Ui?h1:Ui,n)},e}function Gve(a,e,u){var n=ko(a);return n.size=a.size,n.has=function(r){return a.has(r)},n.get=function(r,t){var i=a.get(r,fr);return i===fr?t:e.call(u,i,r,a)},n.__iterateUncached=function(r,t){var i=this;return a.__iterate(function(o,l,s){return r(e.call(u,o,l,s),l,i)!==!1},t)},n.__iteratorUncached=function(r,t){var i=a.__iterator(Qi,t);return new mr(function(){var o=i.next();if(o.done)return o;var l=o.value,s=l[0];return dn(r,s,e.call(u,l[1],s,a),o)})},n}function J7(a,e){var u=this,n=ko(a);return n._iter=a,n.size=a.size,n.reverse=function(){return a},a.flip&&(n.flip=function(){var r=zve(a);return r.reverse=function(){return a.flip()},r}),n.get=function(r,t){return a.get(e?r:-1-r,t)},n.has=function(r){return a.has(e?r:-1-r)},n.includes=function(r){return a.includes(r)},n.cacheResult=Z7,n.__iterate=function(r,t){var i=this,o=0;return t&&Gg(a),a.__iterate(function(l,s){return r(l,e?s:t?i.size-++o:o++,i)},!t)},n.__iterator=function(r,t){var i=0;t&&Gg(a);var o=a.__iterator(Qi,!t);return new mr(function(){var l=o.next();if(l.done)return l;var s=l.value;return dn(r,e?s[0]:t?u.size-++i:i++,s[1],l)})},n}function $ve(a,e,u,n){var r=ko(a);return n&&(r.has=function(t){var i=a.get(t,fr);return i!==fr&&!!e.call(u,i,t,a)},r.get=function(t,i){var o=a.get(t,fr);return o!==fr&&e.call(u,o,t,a)?o:i}),r.__iterateUncached=function(t,i){var o=this,l=0;return a.__iterate(function(s,c,d){if(e.call(u,s,c,d))return l++,t(s,n?c:l-1,o)},i),l},r.__iteratorUncached=function(t,i){var o=a.__iterator(Qi,i),l=0;return new mr(function(){for(;;){var s=o.next();if(s.done)return s;var c=s.value,d=c[0],f=c[1];if(e.call(u,f,d,a))return dn(t,n?d:l++,f,s)}})},r}function Mxe(a,e,u){var n=bb().asMutable();return a.__iterate(function(r,t){n.update(e.call(u,r,t,a),0,function(i){return i+1})}),n.asImmutable()}function Cxe(a,e,u){var n=en(a),r=(co(a)?Qo():bb()).asMutable();a.__iterate(function(i,o){r.update(e.call(u,i,o,a),function(l){return l=l||[],l.push(n?[o,i]:i),l})});var t=Y7(a);return r.map(function(i){return Kr(a,t(i))}).asImmutable()}function Lxe(a,e,u){var n=en(a),r=[[],[]];a.__iterate(function(i,o){r[e.call(u,i,o,a)?1:0].push(n?[o,i]:i)});var t=Y7(a);return r.map(function(i){return Kr(a,t(i))})}function W7(a,e,u,n){var r=a.size;if(D4(e,u,r))return a;if(typeof r>"u"&&(e<0||u<0))return W7(a.toSeq().cacheResult(),e,u,n);var t=y1(e,r),i=F4(u,r),o=i-t,l;o===o&&(l=o<0?0:o);var s=ko(a);return s.size=l===0?l:a.size&&l||void 0,!n&&KF(a)&&l>=0&&(s.get=function(c,d){return c=sl(this,c),c>=0&&c<l?a.get(c+t,d):d}),s.__iterateUncached=function(c,d){var f=this;if(l===0)return 0;if(d)return this.cacheResult().__iterate(c,d);var p=0,h=!0,g=0;return a.__iterate(function(v,m){if(!(h&&(h=p++<t)))return g++,c(v,n?m:g-1,f)!==!1&&g!==l}),g},s.__iteratorUncached=function(c,d){if(l!==0&&d)return this.cacheResult().__iterator(c,d);if(l===0)return new mr(Ma);var f=a.__iterator(c,d),p=0,h=0;return new mr(function(){for(;p++<t;)f.next();if(++h>l)return Ma();var g=f.next();return n||c===Ui||g.done?g:c===h1?dn(c,h-1,void 0,g):dn(c,h-1,g.value[1],g)})},s}function qxe(a,e,u){var n=ko(a);return n.__iterateUncached=function(r,t){var i=this;if(t)return this.cacheResult().__iterate(r,t);var o=0;return a.__iterate(function(l,s,c){return e.call(u,l,s,c)&&++o&&r(l,s,i)}),o},n.__iteratorUncached=function(r,t){var i=this;if(t)return this.cacheResult().__iterator(r,t);var o=a.__iterator(Qi,t),l=!0;return new mr(function(){if(!l)return Ma();var s=o.next();if(s.done)return s;var c=s.value,d=c[0],f=c[1];return e.call(u,f,d,i)?r===Qi?s:dn(r,d,f,s):(l=!1,Ma())})},n}function Xve(a,e,u,n){var r=ko(a);return r.__iterateUncached=function(t,i){var o=this;if(i)return this.cacheResult().__iterate(t,i);var l=!0,s=0;return a.__iterate(function(c,d,f){if(!(l&&(l=e.call(u,c,d,f))))return s++,t(c,n?d:s-1,o)}),s},r.__iteratorUncached=function(t,i){var o=this;if(i)return this.cacheResult().__iterator(t,i);var l=a.__iterator(Qi,i),s=!0,c=0;return new mr(function(){var d,f,p;do{if(d=l.next(),d.done)return n||t===Ui?d:t===h1?dn(t,c++,void 0,d):dn(t,c++,d.value[1],d);var h=d.value;f=h[0],p=h[1],s&&(s=e.call(u,p,f,o))}while(s);return t===Qi?d:dn(t,f,p,d)})},r}var Bxe=(function(a){function e(u){this._wrappedIterables=u.flatMap(function(n){return n._wrappedIterables?n._wrappedIterables:[n]}),this.size=this._wrappedIterables.reduce(function(n,r){if(n!==void 0){var t=r.size;if(t!==void 0)return n+t}},0),this[TF]=this._wrappedIterables[0][TF],this[_F]=this._wrappedIterables[0][_F],this[cl]=this._wrappedIterables[0][cl]}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.__iterateUncached=function(n,r){if(this._wrappedIterables.length!==0){if(r)return this.cacheResult().__iterate(n,r);for(var t=0,i=en(this),o=i?Qi:Ui,l=this._wrappedIterables[t].__iterator(o,r),s=!0,c=0;s;){for(var d=l.next();d.done;){if(t++,t===this._wrappedIterables.length)return c;l=this._wrappedIterables[t].__iterator(o,r),d=l.next()}var f=i?n(d.value[1],d.value[0],this):n(d.value,c,this);s=f!==!1,c++}return c}},e.prototype.__iteratorUncached=function(n,r){var t=this;if(this._wrappedIterables.length===0)return new mr(Ma);if(r)return this.cacheResult().__iterator(n,r);var i=0,o=this._wrappedIterables[i].__iterator(n,r);return new mr(function(){for(var l=o.next();l.done;){if(i++,i===t._wrappedIterables.length)return l;o=t._wrappedIterables[i].__iterator(n,r),l=o.next()}return l})},e})(Ca);function Uxe(a,e){var u=en(a),n=[a].concat(e).map(function(t){return gi(t)?u&&(t=Eu(t)):t=u?X7(t):Uve(Array.isArray(t)?t:[t]),t}).filter(function(t){return t.size!==0});if(n.length===0)return a;if(n.length===1){var r=n[0];if(r===a||u&&en(r)||bi(a)&&bi(r))return r}return new Bxe(n)}function Kve(a,e,u){var n=ko(a);return n.__iterateUncached=function(r,t){if(t)return this.cacheResult().__iterate(r,t);var i=0,o=!1;function l(s,c){s.__iterate(function(d,f){return(!e||c<e)&&gi(d)?l(d,c+1):(i++,r(d,u?f:i-1,n)===!1&&(o=!0)),!o},t)}return l(a,0),i},n.__iteratorUncached=function(r,t){if(t)return this.cacheResult().__iterator(r,t);var i=a.__iterator(r,t),o=[],l=0;return new mr(function(){for(;i;){var s=i.next();if(s.done!==!1){i=o.pop();continue}var c=s.value;if(r===Qi&&(c=c[1]),(!e||o.length<e)&&gi(c))o.push(i),i=c.__iterator(r,t);else return u?s:dn(r,l++,c,s)}return Ma()})},n}function Qxe(a,e,u){var n=Y7(a);return a.toSeq().map(function(r,t){return n(e.call(u,r,t,a))}).flatten(!0)}function Vxe(a,e){var u=ko(a);return u.size=a.size&&a.size*2-1,u.__iterateUncached=function(n,r){var t=this,i=0;return a.__iterate(function(o){return(!i||n(e,i++,t)!==!1)&&n(o,i++,t)!==!1},r),i},u.__iteratorUncached=function(n,r){var t=a.__iterator(Ui,r),i=0,o;return new mr(function(){return(!o||i%2)&&(o=t.next(),o.done)?o:i%2?dn(n,i++,e):dn(n,i++,o.value,o)})},u}function Xg(a,e,u){e||(e=Jve);var n=en(a),r=0,t=a.toSeq().map(function(i,o){return[o,i,r++,u?u(i,o,a):i]}).valueSeq().toArray();return t.sort(function(i,o){return e(i[3],o[3])||i[2]-o[2]}).forEach(n?function(i,o){t[o].length=2}:function(i,o){t[o]=i[1]}),n?gl(t):bi(a)?Ou(t):b1(t)}function qI(a,e,u){if(e||(e=Jve),u){var n=a.toSeq().map(function(r,t){return[r,u(r,t,a)]}).reduce(function(r,t){return F$(e,r[1],t[1])?t:r});return n&&n[0]}return a.reduce(function(r,t){return F$(e,r,t)?t:r})}function F$(a,e,u){var n=a(u,e);return n===0&&u!==e&&(u==null||u!==u)||n>0}function BI(a,e,u,n){var r=ko(a),t=new $g(u).map(function(i){return i.size});return r.size=n?t.max():t.min(),r.__iterate=function(i,o){for(var l=this.__iterator(Ui,o),s,c=0;!(s=l.next()).done&&i(s.value,c++,this)!==!1;);return c},r.__iteratorUncached=function(i,o){var l=u.map(function(d){return d=ca(d),$L(o?d.reverse():d)}),s=0,c=!1;return new mr(function(){var d;return c||(d=l.map(function(f){return f.next()}),c=n?d.every(function(f){return f.done}):d.some(function(f){return f.done})),c?Ma():dn(i,s++,e.apply(null,d.map(function(f){return f.value})))})},r}function Kr(a,e){return a===e?a:KF(a)?e:a.constructor(e)}function P$(a){if(a!==Object(a))throw new TypeError("Expected [K, V] tuple: "+a)}function Y7(a){return en(a)?Eu:bi(a)?mb:p1}function ko(a){return Object.create((en(a)?gl:bi(a)?Ou:b1).prototype)}function Z7(){return this._iter.cacheResult?(this._iter.cacheResult(),this.size=this._iter.size,this):Ca.prototype.cacheResult.call(this)}function Jve(a,e){return a===void 0&&e===void 0?0:a===void 0?1:e===void 0?-1:a>e?1:a<e?-1:0}function YL(a){return!!(a&&typeof a.equals=="function"&&typeof a.hashCode=="function")}function sa(a,e){if(a===e||a!==a&&e!==e)return!0;if(!a||!e)return!1;if(typeof a.valueOf=="function"&&typeof e.valueOf=="function"){if(a=a.valueOf(),e=e.valueOf(),a===e||a!==a&&e!==e)return!0;if(!a||!e)return!1}return!!(YL(a)&&YL(e)&&a.equals(e))}function eq(a,e,u,n){return gb(a,[e],u,n)}function Wve(){for(var a=[],e=arguments.length;e--;)a[e]=arguments[e];return Zve(this,a)}function Yve(a){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];if(typeof a!="function")throw new TypeError("Invalid merger function: "+a);return Zve(this,e,a)}function Zve(a,e,u){for(var n=[],r=0;r<e.length;r++){var t=Eu(e[r]);t.size!==0&&n.push(t)}return n.length===0?a:a.toSeq().size===0&&!a.__ownerID&&n.length===1?bl(a)?a:a.constructor(n[0]):a.withMutations(function(i){for(var o=u?function(s,c){eq(i,c,fr,function(d){return d===fr?s:u(d,s,c)})}:function(s,c){i.set(c,s)},l=0;l<n.length;l++)n[l].forEach(o)})}var Hxe=Object.prototype.toString;function tq(a){if(!a||typeof a!="object"||Hxe.call(a)!=="[object Object]")return!1;var e=Object.getPrototypeOf(a);if(e===null)return!0;for(var u=e,n=Object.getPrototypeOf(e);n!==null;)u=n,n=Object.getPrototypeOf(u);return u===e}function ll(a){return typeof a=="object"&&(Au(a)||Array.isArray(a)||tq(a))}function qo(a,e){e=e||0;for(var u=Math.max(0,a.length-e),n=new Array(u),r=0;r<u;r++)n[r]=a[r+e];return n}function wF(a){if(Array.isArray(a))return qo(a);var e={};for(var u in a)m1.call(a,u)&&(e[u]=a[u]);return e}function kxe(a){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];return C4(a,e)}function zxe(a,e){for(var u=[],n=arguments.length-2;n-- >0;)u[n]=arguments[n+2];return C4(e,u,a)}function Gxe(a){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];return M4(a,e)}function $xe(a,e){for(var u=[],n=arguments.length-2;n-- >0;)u[n]=arguments[n+2];return M4(e,u,a)}function M4(a,e,u){return C4(a,e,Xxe(u))}function C4(a,e,u){if(!ll(a))throw new TypeError("Cannot merge into non-data-structure value: "+a);if(Au(a))return typeof u=="function"&&a.mergeWith?a.mergeWith.apply(a,[u].concat(e)):a.merge?a.merge.apply(a,e):a.concat.apply(a,e);for(var n=Array.isArray(a),r=a,t=n?mb:Eu,i=n?function(l){r===a&&(r=wF(r)),r.push(l)}:function(l,s){var c=m1.call(r,s),d=c&&u?u(r[s],l,s):l;(!c||d!==r[s])&&(r===a&&(r=wF(r)),r[s]=d)},o=0;o<e.length;o++)t(e[o]).forEach(i);return r}function Xxe(a){function e(u,n,r){return ll(u)&&ll(n)&&Kxe(u,n)?C4(u,[n],e):a?a(u,n,r):n}return e}function Kxe(a,e){var u=Ca(a),n=Ca(e);return bi(u)===bi(n)&&en(u)===en(n)}function e_e(){for(var a=[],e=arguments.length;e--;)a[e]=arguments[e];return M4(this,a)}function t_e(a){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];return M4(this,e,a)}function rq(a){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];return gb(this,a,Bo(),function(n){return M4(n,e)})}function nq(a){for(var e=[],u=arguments.length-1;u-- >0;)e[u]=arguments[u+1];return gb(this,a,Bo(),function(n){return C4(n,e)})}function r_e(a,e,u){return gb(a,e,fr,function(){return u})}function aq(a,e){return r_e(this,a,e)}function iq(a,e,u){return arguments.length===1?a(this):eq(this,a,e,u)}function uq(a,e,u){return gb(this,a,e,u)}function oq(){return this.__altered}function L4(a){var e=this.asMutable();return a(e),e.wasAltered()?e.__ensureOwner(this.__ownerID):this}var n_e="@@__IMMUTABLE_MAP__@@";function YF(a){return!!(a&&a[n_e])}function e4(a,e){if(!a)throw new Error(e)}function Ci(a){e4(a!==1/0,"Cannot perform this action with an infinite size.")}var bb=(function(a){function e(u){return u==null?Bo():YF(u)&&!co(u)?u:Bo().withMutations(function(n){var r=a(u);Ci(r.size),r.forEach(function(t,i){return n.set(i,t)})})}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.__toString("Map {","}")},e.prototype.get=function(n,r){return this._root?this._root.get(0,void 0,n,r):r},e.prototype.set=function(n,r){return C$(this,n,r)},e.prototype.remove=function(n){return C$(this,n,fr)},e.prototype.deleteAll=function(n){var r=ca(n);return r.size===0?this:this.withMutations(function(t){r.forEach(function(i){return t.remove(i)})})},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._root=null,this.__hash=void 0,this.__altered=!0,this):Bo()},e.prototype.sort=function(n){return Qo(Xg(this,n))},e.prototype.sortBy=function(n,r){return Qo(Xg(this,r,n))},e.prototype.map=function(n,r){var t=this;return this.withMutations(function(i){i.forEach(function(o,l){i.set(l,n.call(r,o,l,t))})})},e.prototype.__iterator=function(n,r){return new Jxe(this,n,r)},e.prototype.__iterate=function(n,r){var t=this,i=0;return this._root&&this._root.iterate(function(o){return i++,n(o[1],o[0],t)},r),i},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?sq(this.size,this._root,n,this.__hash):this.size===0?Bo():(this.__ownerID=n,this.__altered=!1,this)},e})(Eu);bb.isMap=YF;var fn=bb.prototype;fn[n_e]=!0;fn[I4]=fn.remove;fn.removeAll=fn.deleteAll;fn.setIn=aq;fn.removeIn=fn.deleteIn=fq;fn.update=iq;fn.updateIn=uq;fn.merge=fn.concat=Wve;fn.mergeWith=Yve;fn.mergeDeep=e_e;fn.mergeDeepWith=t_e;fn.mergeIn=nq;fn.mergeDeepIn=rq;fn.withMutations=L4;fn.wasAltered=oq;fn.asImmutable=P4;fn["@@transducer/init"]=fn.asMutable=j4;fn["@@transducer/step"]=function(a,e){return a.set(e[0],e[1])};fn["@@transducer/result"]=function(a){return a.asImmutable()};var o4=function(e,u){this.ownerID=e,this.entries=u};o4.prototype.get=function(e,u,n,r){for(var t=this.entries,i=0,o=t.length;i<o;i++)if(sa(n,t[i][0]))return t[i][1];return r};o4.prototype.update=function(e,u,n,r,t,i,o){for(var l=t===fr,s=this.entries,c=0,d=s.length;c<d&&!sa(r,s[c][0]);c++);var f=c<d;if(f?s[c][1]===t:l)return this;if(vu(o),(l||!f)&&vu(i),!(l&&s.length===1)){if(!f&&!l&&s.length>=rRe)return Wxe(e,s,r,t);var p=e&&e===this.ownerID,h=p?s:qo(s);return f?l?c===d-1?h.pop():h[c]=h.pop():h[c]=[r,t]:h.push([r,t]),p?(this.entries=h,this):new o4(e,h)}};var Kg=function(e,u,n){this.ownerID=e,this.bitmap=u,this.nodes=n};Kg.prototype.get=function(e,u,n,r){u===void 0&&(u=fi(n));var t=1<<((e===0?u:u>>>e)&Ya),i=this.bitmap;return(i&t)===0?r:this.nodes[a_e(i&t-1)].get(e+Jr,u,n,r)};Kg.prototype.update=function(e,u,n,r,t,i,o){n===void 0&&(n=fi(r));var l=(u===0?n:n>>>u)&Ya,s=1<<l,c=this.bitmap,d=(c&s)!==0;if(!d&&t===fr)return this;var f=a_e(c&s-1),p=this.nodes,h=d?p[f]:void 0,g=cq(h,e,u+Jr,n,r,t,i,o);if(g===h)return this;if(!d&&g&&p.length>=nRe)return Zxe(e,p,c,l,g);if(d&&!g&&p.length===2&&L$(p[f^1]))return p[f^1];if(d&&g&&p.length===1&&L$(g))return g;var v=e&&e===this.ownerID,m=d?g?c:c^s:c|s,T=d?g?i_e(p,f,g,v):tRe(p,f,v):eRe(p,f,g,v);return v?(this.bitmap=m,this.nodes=T,this):new Kg(e,m,T)};var s4=function(e,u,n){this.ownerID=e,this.count=u,this.nodes=n};s4.prototype.get=function(e,u,n,r){u===void 0&&(u=fi(n));var t=(e===0?u:u>>>e)&Ya,i=this.nodes[t];return i?i.get(e+Jr,u,n,r):r};s4.prototype.update=function(e,u,n,r,t,i,o){n===void 0&&(n=fi(r));var l=(u===0?n:n>>>u)&Ya,s=t===fr,c=this.nodes,d=c[l];if(s&&!d)return this;var f=cq(d,e,u+Jr,n,r,t,i,o);if(f===d)return this;var p=this.count;if(!d)p++;else if(!f&&(p--,p<aRe))return Yxe(e,c,p,l);var h=e&&e===this.ownerID,g=i_e(c,l,f,h);return h?(this.count=p,this.nodes=g,this):new s4(e,p,g)};var Jg=function(e,u,n){this.ownerID=e,this.keyHash=u,this.entries=n};Jg.prototype.get=function(e,u,n,r){for(var t=this.entries,i=0,o=t.length;i<o;i++)if(sa(n,t[i][0]))return t[i][1];return r};Jg.prototype.update=function(e,u,n,r,t,i,o){n===void 0&&(n=fi(r));var l=t===fr;if(n!==this.keyHash)return l?this:(vu(o),vu(i),lq(this,e,u,n,[r,t]));for(var s=this.entries,c=0,d=s.length;c<d&&!sa(r,s[c][0]);c++);var f=c<d;if(f?s[c][1]===t:l)return this;if(vu(o),(l||!f)&&vu(i),l&&d===2)return new Zs(e,this.keyHash,s[c^1]);var p=e&&e===this.ownerID,h=p?s:qo(s);return f?l?c===d-1?h.pop():h[c]=h.pop():h[c]=[r,t]:h.push([r,t]),p?(this.entries=h,this):new Jg(e,this.keyHash,h)};var Zs=function(e,u,n){this.ownerID=e,this.keyHash=u,this.entry=n};Zs.prototype.get=function(e,u,n,r){return sa(n,this.entry[0])?this.entry[1]:r};Zs.prototype.update=function(e,u,n,r,t,i,o){var l=t===fr,s=sa(r,this.entry[0]);if(s?t===this.entry[1]:l)return this;if(vu(o),l){vu(i);return}return s?e&&e===this.ownerID?(this.entry[1]=t,this):new Zs(e,this.keyHash,[r,t]):(vu(i),lq(this,e,u,fi(r),[r,t]))};o4.prototype.iterate=Jg.prototype.iterate=function(a,e){for(var u=this.entries,n=0,r=u.length-1;n<=r;n++)if(a(u[e?r-n:n])===!1)return!1};Kg.prototype.iterate=s4.prototype.iterate=function(a,e){for(var u=this.nodes,n=0,r=u.length-1;n<=r;n++){var t=u[e?r-n:n];if(t&&t.iterate(a,e)===!1)return!1}};Zs.prototype.iterate=function(a,e){return a(this.entry)};var Jxe=(function(a){function e(u,n,r){this._type=n,this._reverse=r,this._stack=u._root&&j$(u._root)}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.next=function(){for(var n=this._type,r=this._stack;r;){var t=r.node,i=r.index++,o=void 0;if(t.entry){if(i===0)return rj(n,t.entry)}else if(t.entries){if(o=t.entries.length-1,i<=o)return rj(n,t.entries[this._reverse?o-i:i])}else if(o=t.nodes.length-1,i<=o){var l=t.nodes[this._reverse?o-i:i];if(l){if(l.entry)return rj(n,l.entry);r=this._stack=j$(l,r)}continue}r=this._stack=this._stack.__prev}return Ma()},e})(mr);function rj(a,e){return dn(a,e[0],e[1])}function j$(a,e){return{node:a,index:0,__prev:e}}function sq(a,e,u,n){var r=Object.create(fn);return r.size=a,r._root=e,r.__ownerID=u,r.__hash=n,r.__altered=!1,r}var M$;function Bo(){return M$||(M$=sq(0))}function C$(a,e,u){var n,r;if(a._root){var t=XL(),i=XL();if(n=cq(a._root,a.__ownerID,0,void 0,e,u,t,i),!i.value)return a;r=a.size+(t.value?u===fr?-1:1:0)}else{if(u===fr)return a;r=1,n=new o4(a.__ownerID,[[e,u]])}return a.__ownerID?(a.size=r,a._root=n,a.__hash=void 0,a.__altered=!0,a):n?sq(r,n):Bo()}function cq(a,e,u,n,r,t,i,o){return a?a.update(e,u,n,r,t,i,o):t===fr?a:(vu(o),vu(i),new Zs(e,n,[r,t]))}function L$(a){return a.constructor===Zs||a.constructor===Jg}function lq(a,e,u,n,r){if(a.keyHash===n)return new Jg(e,n,[a.entry,r]);var t=(u===0?a.keyHash:a.keyHash>>>u)&Ya,i=(u===0?n:n>>>u)&Ya,o,l=t===i?[lq(a,e,u+Jr,n,r)]:(o=new Zs(e,n,r),t<i?[a,o]:[o,a]);return new Kg(e,1<<t|1<<i,l)}function Wxe(a,e,u,n){a||(a=new k7);for(var r=new Zs(a,fi(u),[u,n]),t=0;t<e.length;t++){var i=e[t];r=r.update(a,0,void 0,i[0],i[1])}return r}function Yxe(a,e,u,n){for(var r=0,t=0,i=new Array(u),o=0,l=1,s=e.length;o<s;o++,l<<=1){var c=e[o];c!==void 0&&o!==n&&(r|=l,i[t++]=c)}return new Kg(a,r,i)}function Zxe(a,e,u,n,r){for(var t=0,i=new Array(Li),o=0;u!==0;o++,u>>>=1)i[o]=u&1?e[t++]:void 0;return i[n]=r,new s4(a,t+1,i)}function a_e(a){return a-=a>>1&1431655765,a=(a&858993459)+(a>>2&858993459),a=a+(a>>4)&252645135,a+=a>>8,a+=a>>16,a&127}function i_e(a,e,u,n){var r=n?a:qo(a);return r[e]=u,r}function eRe(a,e,u,n){var r=a.length+1;if(n&&e+1===r)return a[e]=u,a;for(var t=new Array(r),i=0,o=0;o<r;o++)o===e?(t[o]=u,i=-1):t[o]=a[o+i];return t}function tRe(a,e,u){var n=a.length-1;if(u&&e===n)return a.pop(),a;for(var r=new Array(n),t=0,i=0;i<n;i++)i===e&&(t=1),r[i]=a[i+t];return r}var rRe=Li/4,nRe=Li/2,aRe=Li/4;function u_e(a){if(z7(a)&&typeof a!="string")return a;if(co(a))return a.toArray();throw new TypeError("Invalid keyPath: expected Ordered Collection or Array: "+a)}function c4(a){try{return typeof a=="string"?JSON.stringify(a):String(a)}catch{return JSON.stringify(a)}}function o_e(a,e){return Au(a)?a.has(e):ll(a)&&m1.call(a,e)}function dq(a,e,u){return Au(a)?a.get(e,u):o_e(a,e)?typeof a.get=="function"?a.get(e):a[e]:u}function s_e(a,e){if(!ll(a))throw new TypeError("Cannot update non-data-structure value: "+a);if(Au(a)){if(!a.remove)throw new TypeError("Cannot update immutable value without .remove() method: "+a);return a.remove(e)}if(!m1.call(a,e))return a;var u=wF(a);return Array.isArray(u)?u.splice(e,1):delete u[e],u}function c_e(a,e,u){if(!ll(a))throw new TypeError("Cannot update non-data-structure value: "+a);if(Au(a)){if(!a.set)throw new TypeError("Cannot update immutable value without .set() method: "+a);return a.set(e,u)}if(m1.call(a,e)&&u===a[e])return a;var n=wF(a);return n[e]=u,n}function gb(a,e,u,n){n||(n=u,u=void 0);var r=l_e(Au(a),a,u_e(e),0,u,n);return r===fr?u:r}function l_e(a,e,u,n,r,t){var i=e===fr;if(n===u.length){var o=i?r:e,l=t(o);return l===o?e:l}if(!i&&!ll(e))throw new TypeError("Cannot update within non-data-structure value in path ["+Array.from(u).slice(0,n).map(c4)+"]: "+e);var s=u[n],c=i?fr:dq(e,s,fr),d=l_e(c===fr?a:Au(c),c,u,n+1,r,t);return d===c?e:d===fr?s_e(e,s):c_e(i?a?Bo():{}:e,s,d)}function d_e(a,e){return gb(a,e,function(){return fr})}function fq(a){return d_e(this,a)}var f_e="@@__IMMUTABLE_LIST__@@";function pq(a){return!!(a&&a[f_e])}var q4=(function(a){function e(u){var n=GD();if(u==null)return n;if(pq(u))return u;var r=a(u),t=r.size;return t===0?n:(Ci(t),t>0&&t<Li?l4(0,t,Jr,null,new il(r.toArray())):n.withMutations(function(i){i.setSize(t),r.forEach(function(o,l){return i.set(l,o)})}))}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("List [","]")},e.prototype.get=function(n,r){if(n=sl(this,n),n>=0&&n<this.size){n+=this._origin;var t=p_e(this,n);return t&&t.array[n&Ya]}return r},e.prototype.set=function(n,r){return iRe(this,n,r)},e.prototype.remove=function(n){return this.has(n)?n===0?this.shift():n===this.size-1?this.pop():this.splice(n,1):this},e.prototype.insert=function(n,r){return this.splice(n,0,r)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=this._origin=this._capacity=0,this._level=Jr,this._root=this._tail=this.__hash=void 0,this.__altered=!0,this):GD()},e.prototype.push=function(){var n=arguments,r=this.size;return this.withMutations(function(t){Yc(t,0,r+n.length);for(var i=0;i<n.length;i++)t.set(r+i,n[i])})},e.prototype.pop=function(){return Yc(this,0,-1)},e.prototype.unshift=function(){var n=arguments;return this.withMutations(function(r){Yc(r,-n.length);for(var t=0;t<n.length;t++)r.set(t,n[t])})},e.prototype.shift=function(){return Yc(this,1)},e.prototype.shuffle=function(n){return n===void 0&&(n=Math.random),this.withMutations(function(r){for(var t=r.size,i,o;t;)i=Math.floor(n()*t--),o=r.get(i),r.set(i,r.get(t)),r.set(t,o)})},e.prototype.concat=function(){for(var n=arguments,r=[],t=0;t<arguments.length;t++){var i=n[t],o=a(typeof i!="string"&&H7(i)?i:[i]);o.size!==0&&r.push(o)}return r.length===0?this:this.size===0&&!this.__ownerID&&r.length===1?this.constructor(r[0]):this.withMutations(function(l){r.forEach(function(s){return s.forEach(function(c){return l.push(c)})})})},e.prototype.setSize=function(n){return Yc(this,0,n)},e.prototype.map=function(n,r){var t=this;return this.withMutations(function(i){for(var o=0;o<t.size;o++)i.set(o,n.call(r,i.get(o),o,t))})},e.prototype.slice=function(n,r){var t=this.size;return D4(n,r,t)?this:Yc(this,y1(n,t),F4(r,t))},e.prototype.__iterator=function(n,r){var t=r?this.size:0,i=q$(this,r);return new mr(function(){var o=i();return o===t4?Ma():dn(n,r?--t:t++,o)})},e.prototype.__iterate=function(n,r){for(var t=r?this.size:0,i=q$(this,r),o;(o=i())!==t4&&n(o,r?--t:t++,this)!==!1;);return t},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?l4(this._origin,this._capacity,this._level,this._root,this._tail,n,this.__hash):this.size===0?GD():(this.__ownerID=n,this.__altered=!1,this)},e})(mb);q4.isList=pq;var Gn=q4.prototype;Gn[f_e]=!0;Gn[I4]=Gn.remove;Gn.merge=Gn.concat;Gn.setIn=aq;Gn.deleteIn=Gn.removeIn=fq;Gn.update=iq;Gn.updateIn=uq;Gn.mergeIn=nq;Gn.mergeDeepIn=rq;Gn.withMutations=L4;Gn.wasAltered=oq;Gn.asImmutable=P4;Gn["@@transducer/init"]=Gn.asMutable=j4;Gn["@@transducer/step"]=function(a,e){return a.push(e)};Gn["@@transducer/result"]=function(a){return a.asImmutable()};var il=function(e,u){this.array=e,this.ownerID=u};il.prototype.removeBefore=function(e,u,n){if((n&(1<<u+Jr)-1)===0||this.array.length===0)return this;var r=n>>>u&Ya;if(r>=this.array.length)return new il([],e);var t=r===0,i;if(u>0){var o=this.array[r];if(i=o&&o.removeBefore(e,u-Jr,n),i===o&&t)return this}if(t&&!i)return this;var l=Wg(this,e);if(!t)for(var s=0;s<r;s++)l.array[s]=void 0;return i&&(l.array[r]=i),l};il.prototype.removeAfter=function(e,u,n){if(n===(u?1<<u+Jr:Li)||this.array.length===0)return this;var r=n-1>>>u&Ya;if(r>=this.array.length)return this;var t;if(u>0){var i=this.array[r];if(t=i&&i.removeAfter(e,u-Jr,n),t===i&&r===this.array.length-1)return this}var o=Wg(this,e);return o.array.splice(r+1),t&&(o.array[r]=t),o};var t4={};function q$(a,e){var u=a._origin,n=a._capacity,r=d4(n),t=a._tail;return i(a._root,a._level,0);function i(s,c,d){return c===0?o(s,d):l(s,c,d)}function o(s,c){var d=c===r?t&&t.array:s&&s.array,f=c>u?0:u-c,p=n-c;return p>Li&&(p=Li),function(){if(f===p)return t4;var h=e?--p:f++;return d&&d[h]}}function l(s,c,d){var f,p=s&&s.array,h=d>u?0:u-d>>c,g=(n-d>>c)+1;return g>Li&&(g=Li),function(){for(;;){if(f){var v=f();if(v!==t4)return v;f=null}if(h===g)return t4;var m=e?--g:h++;f=i(p&&p[m],c-Jr,d+(m<<c))}}}}function l4(a,e,u,n,r,t,i){var o=Object.create(Gn);return o.size=e-a,o._origin=a,o._capacity=e,o._level=u,o._root=n,o._tail=r,o.__ownerID=t,o.__hash=i,o.__altered=!1,o}function GD(){return l4(0,0,Jr)}function iRe(a,e,u){if(e=sl(a,e),e!==e)return a;if(e>=a.size||e<0)return a.withMutations(function(i){e<0?Yc(i,e).set(0,u):Yc(i,0,e+1).set(e,u)});e+=a._origin;var n=a._tail,r=a._root,t=XL();return e>=d4(a._capacity)?n=ZL(n,a.__ownerID,0,e,u,t):r=ZL(r,a.__ownerID,a._level,e,u,t),t.value?a.__ownerID?(a._root=r,a._tail=n,a.__hash=void 0,a.__altered=!0,a):l4(a._origin,a._capacity,a._level,r,n):a}function ZL(a,e,u,n,r,t){var i=n>>>u&Ya,o=a&&i<a.array.length;if(!o&&r===void 0)return a;var l;if(u>0){var s=a&&a.array[i],c=ZL(s,e,u-Jr,n,r,t);return c===s?a:(l=Wg(a,e),l.array[i]=c,l)}return o&&a.array[i]===r?a:(t&&vu(t),l=Wg(a,e),r===void 0&&i===l.array.length-1?l.array.pop():l.array[i]=r,l)}function Wg(a,e){return e&&a&&e===a.ownerID?a:new il(a?a.array.slice():[],e)}function p_e(a,e){if(e>=d4(a._capacity))return a._tail;if(e<1<<a._level+Jr){for(var u=a._root,n=a._level;u&&n>0;)u=u.array[e>>>n&Ya],n-=Jr;return u}}function Yc(a,e,u){e!==void 0&&(e|=0),u!==void 0&&(u|=0);var n=a.__ownerID||new k7,r=a._origin,t=a._capacity,i=r+e,o=u===void 0?t:u<0?t+u:r+u;if(i===r&&o===t)return a;if(i>=o)return a.clear();for(var l=a._level,s=a._root,c=0;i+c<0;)s=new il(s&&s.array.length?[void 0,s]:[],n),l+=Jr,c+=1<<l;c&&(i+=c,r+=c,o+=c,t+=c);for(var d=d4(t),f=d4(o);f>=1<<l+Jr;)s=new il(s&&s.array.length?[s]:[],n),l+=Jr;var p=a._tail,h=f<d?p_e(a,o-1):f>d?new il([],n):p;if(p&&f>d&&i<t&&p.array.length){s=Wg(s,n);for(var g=s,v=l;v>Jr;v-=Jr){var m=d>>>v&Ya;g=g.array[m]=Wg(g.array[m],n)}g.array[d>>>Jr&Ya]=p}if(o<t&&(h=h&&h.removeAfter(n,0,o)),i>=f)i-=f,o-=f,l=Jr,s=null,h=h&&h.removeBefore(n,0,i);else if(i>r||f<d){for(c=0;s;){var T=i>>>l&Ya;if(T!==f>>>l&Ya)break;T&&(c+=(1<<l)*T),l-=Jr,s=s.array[T]}s&&i>r&&(s=s.removeBefore(n,l,i-c)),s&&f<d&&(s=s.removeAfter(n,l,f-c)),c&&(i-=c,o-=c)}return a.__ownerID?(a.size=o-i,a._origin=i,a._capacity=o,a._level=l,a._root=s,a._tail=h,a.__hash=void 0,a.__altered=!0,a):l4(i,o,l,s,h)}function d4(a){return a<Li?0:a-1>>>Jr<<Jr}function hq(a){return YF(a)&&co(a)}var Qo=(function(a){function e(u){return u==null?C6():hq(u)?u:C6().withMutations(function(n){var r=Eu(u);Ci(r.size),r.forEach(function(t,i){return n.set(i,t)})})}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("OrderedMap {","}")},e.prototype.get=function(n,r){var t=this._map.get(n);return t!==void 0?this._list.get(t)[1]:r},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._map.clear(),this._list.clear(),this.__altered=!0,this):C6()},e.prototype.set=function(n,r){return U$(this,n,r)},e.prototype.remove=function(n){return U$(this,n,fr)},e.prototype.__iterate=function(n,r){var t=this;return this._list.__iterate(function(i){return i&&n(i[1],i[0],t)},r)},e.prototype.__iterator=function(n,r){return this._list.fromEntrySeq().__iterator(n,r)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var r=this._map.__ensureOwner(n),t=this._list.__ensureOwner(n);return n?yq(r,t,n,this.__hash):this.size===0?C6():(this.__ownerID=n,this.__altered=!1,this._map=r,this._list=t,this)},e})(bb);Qo.isOrderedMap=hq;Qo.prototype[cl]=!0;Qo.prototype[I4]=Qo.prototype.remove;function yq(a,e,u,n){var r=Object.create(Qo.prototype);return r.size=a?a.size:0,r._map=a,r._list=e,r.__ownerID=u,r.__hash=n,r.__altered=!1,r}var B$;function C6(){return B$||(B$=yq(Bo(),GD()))}function U$(a,e,u){var n=a._map,r=a._list,t=n.get(e),i=t!==void 0,o,l;if(u===fr){if(!i)return a;r.size>=Li&&r.size>=n.size*2?(l=r.filter(function(s,c){return s!==void 0&&t!==c}),o=l.toKeyedSeq().map(function(s){return s[0]}).flip().toMap(),a.__ownerID&&(o.__ownerID=l.__ownerID=a.__ownerID)):(o=n.remove(e),l=t===r.size-1?r.pop():r.set(t,void 0))}else if(i){if(u===r.get(t)[1])return a;o=n,l=r.set(t,[e,u])}else o=n.set(e,r.size),l=r.set(r.size,[e,u]);return a.__ownerID?(a.size=o.size,a._map=o,a._list=l,a.__hash=void 0,a.__altered=!0,a):yq(o,l)}var h_e="@@__IMMUTABLE_STACK__@@";function SF(a){return!!(a&&a[h_e])}var ZF=(function(a){function e(u){return u==null?UI():SF(u)?u:UI().pushAll(u)}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.prototype.toString=function(){return this.__toString("Stack [","]")},e.prototype.get=function(n,r){var t=this._head;for(n=sl(this,n);t&&n--;)t=t.next;return t?t.value:r},e.prototype.peek=function(){return this._head&&this._head.value},e.prototype.push=function(){var n=arguments;if(arguments.length===0)return this;for(var r=this.size+arguments.length,t=this._head,i=arguments.length-1;i>=0;i--)t={value:n[i],next:t};return this.__ownerID?(this.size=r,this._head=t,this.__hash=void 0,this.__altered=!0,this):L6(r,t)},e.prototype.pushAll=function(n){if(n=a(n),n.size===0)return this;if(this.size===0&&SF(n))return n;Ci(n.size);var r=this.size,t=this._head;return n.__iterate(function(i){r++,t={value:i,next:t}},!0),this.__ownerID?(this.size=r,this._head=t,this.__hash=void 0,this.__altered=!0,this):L6(r,t)},e.prototype.pop=function(){return this.slice(1)},e.prototype.clear=function(){return this.size===0?this:this.__ownerID?(this.size=0,this._head=void 0,this.__hash=void 0,this.__altered=!0,this):UI()},e.prototype.slice=function(n,r){if(D4(n,r,this.size))return this;var t=y1(n,this.size),i=F4(r,this.size);if(i!==this.size)return a.prototype.slice.call(this,n,r);for(var o=this.size-t,l=this._head;t--;)l=l.next;return this.__ownerID?(this.size=o,this._head=l,this.__hash=void 0,this.__altered=!0,this):L6(o,l)},e.prototype.__ensureOwner=function(n){return n===this.__ownerID?this:n?L6(this.size,this._head,n,this.__hash):this.size===0?UI():(this.__ownerID=n,this.__altered=!1,this)},e.prototype.__iterate=function(n,r){var t=this;if(r)return new $g(this.toArray()).__iterate(function(l,s){return n(l,s,t)},r);for(var i=0,o=this._head;o&&n(o.value,i++,this)!==!1;)o=o.next;return i},e.prototype.__iterator=function(n,r){if(r)return new $g(this.toArray()).__iterator(n,r);var t=0,i=this._head;return new mr(function(){if(i){var o=i.value;return i=i.next,dn(n,t++,o)}return Ma()})},e})(mb);ZF.isStack=SF;var Za=ZF.prototype;Za[h_e]=!0;Za.shift=Za.pop;Za.unshift=Za.push;Za.unshiftAll=Za.pushAll;Za.withMutations=L4;Za.wasAltered=oq;Za.asImmutable=P4;Za["@@transducer/init"]=Za.asMutable=j4;Za["@@transducer/step"]=function(a,e){return a.unshift(e)};Za["@@transducer/result"]=function(a){return a.asImmutable()};function L6(a,e,u,n){var r=Object.create(Za);return r.size=a,r._head=e,r.__ownerID=u,r.__hash=n,r.__altered=!1,r}var Q$;function UI(){return Q$||(Q$=L6(0))}function V$(a,e,u,n,r,t){return Ci(a.size),a.__iterate(function(i,o,l){r?(r=!1,u=i):u=e.call(n,u,i,o,l)},t),u}function uRe(a,e){return e}function oRe(a,e){return[e,a]}function nj(a){return function(){for(var e=[],u=arguments.length;u--;)e[u]=arguments[u];return!a.apply(this,e)}}function H$(a){return function(){for(var e=[],u=arguments.length;u--;)e[u]=arguments[u];return-a.apply(this,e)}}function k$(a,e){return a<e?1:a>e?-1:0}function mq(a,e){if(a===e)return!0;if(!gi(e)||a.size!==void 0&&e.size!==void 0&&a.size!==e.size||a.__hash!==void 0&&e.__hash!==void 0&&a.__hash!==e.__hash||en(a)!==en(e)||bi(a)!==bi(e)||co(a)!==co(e))return!1;if(a.size===0&&e.size===0)return!0;var u=!GF(a);if(co(a)){var n=a.entries();return e.every(function(l,s){var c=n.next().value;return c&&sa(c[1],l)&&(u||sa(c[0],s))})&&n.next().done}var r=!1;if(a.size===void 0)if(e.size===void 0)typeof a.cacheResult=="function"&&a.cacheResult();else{r=!0;var t=a;a=e,e=t}var i=!0,o=e.__iterate(function(l,s){if(u?!a.has(l):r?!sa(l,a.get(s,fr)):!sa(a.get(s,fr),l))return i=!1,!1});return i&&a.size===o}var y_e=(function(a){function e(u,n,r){if(r===void 0&&(r=1),!(this instanceof e))return new e(u,n,r);if(e4(r!==0,"Cannot step a Range by 0"),e4(u!==void 0,"You must define a start value when using Range"),e4(n!==void 0,"You must define an end value when using Range"),r=Math.abs(r),n<u&&(r=-r),this._start=u,this._end=n,this._step=r,this.size=Math.max(0,Math.ceil((n-u)/r-1)+1),this.size===0){if(aj)return aj;aj=this}}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Range []":"Range [ "+this._start+"..."+this._end+(this._step!==1?" by "+this._step:"")+" ]"},e.prototype.get=function(n,r){return this.has(n)?this._start+sl(this,n)*this._step:r},e.prototype.includes=function(n){var r=(n-this._start)/this._step;return r>=0&&r<this.size&&r===Math.floor(r)},e.prototype.slice=function(n,r){return D4(n,r,this.size)?this:(n=y1(n,this.size),r=F4(r,this.size),r<=n?new e(0,0):new e(this.get(n,this._end),this.get(r,this._end),this._step))},e.prototype.indexOf=function(n){var r=n-this._start;if(r%this._step===0){var t=r/this._step;if(t>=0&&t<this.size)return t}return-1},e.prototype.lastIndexOf=function(n){return this.indexOf(n)},e.prototype.__iterate=function(n,r){for(var t=this.size,i=this._step,o=r?this._start+(t-1)*i:this._start,l=0;l!==t&&n(o,r?t-++l:l++,this)!==!1;)o+=r?-i:i;return l},e.prototype.__iterator=function(n,r){var t=this.size,i=this._step,o=r?this._start+(t-1)*i:this._start,l=0;return new mr(function(){if(l===t)return Ma();var s=o;return o+=r?-i:i,dn(n,r?t-++l:l++,s)})},e.prototype.equals=function(n){return n instanceof e?this._start===n._start&&this._end===n._end&&this._step===n._step:mq(this,n)},e})(Ou),aj,m_e="@@__IMMUTABLE_SET__@@";function eP(a){return!!(a&&a[m_e])}var B4=(function(a){function e(u){return u==null?q6():eP(u)&&!co(u)?u:q6().withMutations(function(n){var r=a(u);Ci(r.size),r.forEach(function(t){return n.add(t)})})}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(Eu(n).keySeq())},e.intersect=function(n){return n=ca(n).toArray(),n.length?Ea.intersect.apply(e(n.pop()),n):q6()},e.union=function(n){return n=ca(n).toArray(),n.length?Ea.union.apply(e(n.pop()),n):q6()},e.prototype.toString=function(){return this.__toString("Set {","}")},e.prototype.has=function(n){return this._map.has(n)},e.prototype.add=function(n){return QI(this,this._map.set(n,n))},e.prototype.remove=function(n){return QI(this,this._map.remove(n))},e.prototype.clear=function(){return QI(this,this._map.clear())},e.prototype.map=function(n,r){var t=this,i=!1,o=QI(this,this._map.mapEntries(function(l){var s=l[1],c=n.call(r,s,s,t);return c!==s&&(i=!0),[c,c]},r));return i?o:this},e.prototype.union=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];return n=n.filter(function(t){return t.size!==0}),n.length===0?this:this.size===0&&!this.__ownerID&&n.length===1?this.constructor(n[0]):this.withMutations(function(t){for(var i=0;i<n.length;i++)typeof n[i]=="string"?t.add(n[i]):a(n[i]).forEach(function(o){return t.add(o)})})},e.prototype.intersect=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];if(n.length===0)return this;n=n.map(function(i){return a(i)});var t=[];return this.forEach(function(i){n.every(function(o){return o.includes(i)})||t.push(i)}),this.withMutations(function(i){t.forEach(function(o){i.remove(o)})})},e.prototype.subtract=function(){for(var n=[],r=arguments.length;r--;)n[r]=arguments[r];if(n.length===0)return this;n=n.map(function(i){return a(i)});var t=[];return this.forEach(function(i){n.some(function(o){return o.includes(i)})&&t.push(i)}),this.withMutations(function(i){t.forEach(function(o){i.remove(o)})})},e.prototype.sort=function(n){return Zg(Xg(this,n))},e.prototype.sortBy=function(n,r){return Zg(Xg(this,r,n))},e.prototype.wasAltered=function(){return this._map.wasAltered()},e.prototype.__iterate=function(n,r){var t=this;return this._map.__iterate(function(i){return n(i,i,t)},r)},e.prototype.__iterator=function(n,r){return this._map.__iterator(n,r)},e.prototype.__ensureOwner=function(n){if(n===this.__ownerID)return this;var r=this._map.__ensureOwner(n);return n?this.__make(r,n):this.size===0?this.__empty():(this.__ownerID=n,this._map=r,this)},e})(p1);B4.isSet=eP;var Ea=B4.prototype;Ea[m_e]=!0;Ea[I4]=Ea.remove;Ea.merge=Ea.concat=Ea.union;Ea.withMutations=L4;Ea.asImmutable=P4;Ea["@@transducer/init"]=Ea.asMutable=j4;Ea["@@transducer/step"]=function(a,e){return a.add(e)};Ea["@@transducer/result"]=function(a){return a.asImmutable()};Ea.__empty=q6;Ea.__make=b_e;function QI(a,e){return a.__ownerID?(a.size=e.size,a._map=e,a):e===a._map?a:e.size===0?a.__empty():a.__make(e)}function b_e(a,e){var u=Object.create(Ea);return u.size=a?a.size:0,u._map=a,u.__ownerID=e,u}var z$;function q6(){return z$||(z$=b_e(Bo()))}function bq(a,e,u){for(var n=u_e(e),r=0;r!==n.length;)if(a=dq(a,n[r++],fr),a===fr)return u;return a}function g_e(a,e){return bq(this,a,e)}function v_e(a,e){return bq(a,e,fr)!==fr}function sRe(a){return v_e(this,a)}function __e(){Ci(this.size);var a={};return this.__iterate(function(e,u){a[u]=e}),a}function EF(a){if(!a||typeof a!="object")return a;if(!gi(a)){if(!ll(a))return a;a=Ca(a)}if(en(a)){var e={};return a.__iterate(function(n,r){e[r]=EF(n)}),e}var u=[];return a.__iterate(function(n){u.push(EF(n))}),u}function cRe(a){if(a.size===1/0)return 0;var e=co(a),u=en(a),n=e?1:0;return a.__iterate(u?e?function(r,t){n=31*n+G$(fi(r),fi(t))|0}:function(r,t){n=n+G$(fi(r),fi(t))|0}:e?function(r){n=31*n+fi(r)|0}:function(r){n=n+fi(r)|0}),lRe(a.size,n)}function lRe(a,e){return e=Nv(e,3432918353),e=Nv(e<<15|e>>>-15,461845907),e=Nv(e<<13|e>>>-13,5),e=(e+3864292196|0)^a,e=Nv(e^e>>>16,2246822507),e=Nv(e^e>>>13,3266489909),e=JF(e^e>>>16),e}function G$(a,e){return a^e+2654435769+(a<<6)+(a>>2)|0}function vb(a,e){var u=function(n){a.prototype[n]=e[n]};return Object.keys(e).forEach(u),Object.getOwnPropertySymbols&&Object.getOwnPropertySymbols(e).forEach(u),a}ca.Iterator=mr;vb(ca,{toArray:function(){Ci(this.size);var e=new Array(this.size||0),u=en(this),n=0;return this.__iterate(function(r,t){e[n++]=u?[t,r]:r}),e},toIndexedSeq:function(){return new Vve(this)},toJS:function(){return EF(this)},toKeyedSeq:function(){return new WF(this,!0)},toMap:function(){return bb(this.toKeyedSeq())},toObject:__e,toOrderedMap:function(){return Qo(this.toKeyedSeq())},toOrderedSet:function(){return Zg(en(this)?this.valueSeq():this)},toSet:function(){return B4(en(this)?this.valueSeq():this)},toSetSeq:function(){return new Hve(this)},toSeq:function(){return bi(this)?this.toIndexedSeq():en(this)?this.toKeyedSeq():this.toSetSeq()},toStack:function(){return ZF(en(this)?this.valueSeq():this)},toList:function(){return q4(en(this)?this.valueSeq():this)},toString:function(){return"[Collection]"},__toString:function(e,u){return this.size===0?e+u:e+" "+this.toSeq().map(this.__toStringMapper).join(", ")+" "+u},concat:function(){for(var e=[],u=arguments.length;u--;)e[u]=arguments[u];return Kr(this,Uxe(this,e))},includes:function(e){return this.some(function(u){return sa(u,e)})},entries:function(){return this.__iterator(Qi)},every:function(e,u){Ci(this.size);var n=!0;return this.__iterate(function(r,t,i){if(!e.call(u,r,t,i))return n=!1,!1}),n},filter:function(e,u){return Kr(this,$ve(this,e,u,!0))},partition:function(e,u){return Lxe(this,e,u)},find:function(e,u,n){var r=this.findEntry(e,u);return r?r[1]:n},forEach:function(e,u){return Ci(this.size),this.__iterate(u?e.bind(u):e)},join:function(e){Ci(this.size),e=e!==void 0?""+e:",";var u="",n=!0;return this.__iterate(function(r){n?n=!1:u+=e,u+=r!=null?r.toString():""}),u},keys:function(){return this.__iterator(h1)},map:function(e,u){return Kr(this,Gve(this,e,u))},reduce:function(e,u,n){return V$(this,e,u,n,arguments.length<2,!1)},reduceRight:function(e,u,n){return V$(this,e,u,n,arguments.length<2,!0)},reverse:function(){return Kr(this,J7(this,!0))},slice:function(e,u){return Kr(this,W7(this,e,u,!0))},some:function(e,u){Ci(this.size);var n=!1;return this.__iterate(function(r,t,i){if(e.call(u,r,t,i))return n=!0,!1}),n},sort:function(e){return Kr(this,Xg(this,e))},values:function(){return this.__iterator(Ui)},butLast:function(){return this.slice(0,-1)},isEmpty:function(){return this.size!==void 0?this.size===0:!this.some(function(){return!0})},count:function(e,u){return Gg(e?this.toSeq().filter(e,u):this)},countBy:function(e,u){return Mxe(this,e,u)},equals:function(e){return mq(this,e)},entrySeq:function(){var e=this;if(e._cache)return new $g(e._cache);var u=e.toSeq().map(oRe).toIndexedSeq();return u.fromEntrySeq=function(){return e.toSeq()},u},filterNot:function(e,u){return this.filter(nj(e),u)},findEntry:function(e,u,n){var r=n;return this.__iterate(function(t,i,o){if(e.call(u,t,i,o))return r=[i,t],!1}),r},findKey:function(e,u){var n=this.findEntry(e,u);return n&&n[0]},findLast:function(e,u,n){return this.toKeyedSeq().reverse().find(e,u,n)},findLastEntry:function(e,u,n){return this.toKeyedSeq().reverse().findEntry(e,u,n)},findLastKey:function(e,u){return this.toKeyedSeq().reverse().findKey(e,u)},first:function(e){return this.find(Mve,null,e)},flatMap:function(e,u){return Kr(this,Qxe(this,e,u))},flatten:function(e){return Kr(this,Kve(this,e,!0))},fromEntrySeq:function(){return new kve(this)},get:function(e,u){return this.find(function(n,r){return sa(r,e)},void 0,u)},getIn:g_e,groupBy:function(e,u){return Cxe(this,e,u)},has:function(e){return this.get(e,fr)!==fr},hasIn:sRe,isSubset:function(e){return e=typeof e.includes=="function"?e:ca(e),this.every(function(u){return e.includes(u)})},isSuperset:function(e){return e=typeof e.isSubset=="function"?e:ca(e),e.isSubset(this)},keyOf:function(e){return this.findKey(function(u){return sa(u,e)})},keySeq:function(){return this.toSeq().map(uRe).toIndexedSeq()},last:function(e){return this.toSeq().reverse().first(e)},lastKeyOf:function(e){return this.toKeyedSeq().reverse().keyOf(e)},max:function(e){return qI(this,e)},maxBy:function(e,u){return qI(this,u,e)},min:function(e){return qI(this,e?H$(e):k$)},minBy:function(e,u){return qI(this,u?H$(u):k$,e)},rest:function(){return this.slice(1)},skip:function(e){return e===0?this:this.slice(Math.max(0,e))},skipLast:function(e){return e===0?this:this.slice(0,-Math.max(0,e))},skipWhile:function(e,u){return Kr(this,Xve(this,e,u,!0))},skipUntil:function(e,u){return this.skipWhile(nj(e),u)},sortBy:function(e,u){return Kr(this,Xg(this,u,e))},take:function(e){return this.slice(0,Math.max(0,e))},takeLast:function(e){return this.slice(-Math.max(0,e))},takeWhile:function(e,u){return Kr(this,qxe(this,e,u))},takeUntil:function(e,u){return this.takeWhile(nj(e),u)},update:function(e){return e(this)},valueSeq:function(){return this.toIndexedSeq()},hashCode:function(){return this.__hash||(this.__hash=cRe(this))}});var La=ca.prototype;La[Pve]=!0;La[$F]=La.values;La.toJSON=La.toArray;La.__toStringMapper=c4;La.inspect=La.toSource=function(){return this.toString()};La.chain=La.flatMap;La.contains=La.includes;vb(Eu,{flip:function(){return Kr(this,zve(this))},mapEntries:function(e,u){var n=this,r=0;return Kr(this,this.toSeq().map(function(t,i){return e.call(u,[i,t],r++,n)}).fromEntrySeq())},mapKeys:function(e,u){var n=this;return Kr(this,this.toSeq().flip().map(function(r,t){return e.call(u,r,t,n)}).flip())}});var U4=Eu.prototype;U4[TF]=!0;U4[$F]=La.entries;U4.toJSON=__e;U4.__toStringMapper=function(a,e){return c4(e)+": "+c4(a)};vb(mb,{toKeyedSeq:function(){return new WF(this,!1)},filter:function(e,u){return Kr(this,$ve(this,e,u,!1))},findIndex:function(e,u){var n=this.findEntry(e,u);return n?n[0]:-1},indexOf:function(e){var u=this.keyOf(e);return u===void 0?-1:u},lastIndexOf:function(e){var u=this.lastKeyOf(e);return u===void 0?-1:u},reverse:function(){return Kr(this,J7(this,!1))},slice:function(e,u){return Kr(this,W7(this,e,u,!1))},splice:function(e,u){var n=arguments.length;if(u=Math.max(u||0,0),n===0||n===2&&!u)return this;e=y1(e,e<0?this.count():this.size);var r=this.slice(0,e);return Kr(this,n===1?r:r.concat(qo(arguments,2),this.slice(e+u)))},findLastIndex:function(e,u){var n=this.findLastEntry(e,u);return n?n[0]:-1},first:function(e){return this.get(0,e)},flatten:function(e){return Kr(this,Kve(this,e,!1))},get:function(e,u){return e=sl(this,e),e<0||this.size===1/0||this.size!==void 0&&e>this.size?u:this.find(function(n,r){return r===e},void 0,u)},has:function(e){return e=sl(this,e),e>=0&&(this.size!==void 0?this.size===1/0||e<this.size:this.indexOf(e)!==-1)},interpose:function(e){return Kr(this,Vxe(this,e))},interleave:function(){var e=[this].concat(qo(arguments)),u=BI(this.toSeq(),Ou.of,e),n=u.flatten(!0);return u.size&&(n.size=u.size*e.length),Kr(this,n)},keySeq:function(){return y_e(0,this.size)},last:function(e){return this.get(-1,e)},skipWhile:function(e,u){return Kr(this,Xve(this,e,u,!1))},zip:function(){var e=[this].concat(qo(arguments));return Kr(this,BI(this,$$,e))},zipAll:function(){var e=[this].concat(qo(arguments));return Kr(this,BI(this,$$,e,!0))},zipWith:function(e){var u=qo(arguments);return u[0]=this,Kr(this,BI(this,e,u))}});var g1=mb.prototype;g1[_F]=!0;g1[cl]=!0;vb(p1,{get:function(e,u){return this.has(e)?e:u},includes:function(e){return this.has(e)},keySeq:function(){return this.valueSeq()}});var Yg=p1.prototype;Yg.has=La.includes;Yg.contains=Yg.includes;Yg.keys=Yg.values;vb(gl,U4);vb(Ou,g1);vb(b1,Yg);function $$(){return qo(arguments)}function gq(a){return eP(a)&&co(a)}var Zg=(function(a){function e(u){return u==null?e7():gq(u)?u:e7().withMutations(function(n){var r=p1(u);Ci(r.size),r.forEach(function(t){return n.add(t)})})}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.of=function(){return this(arguments)},e.fromKeys=function(n){return this(Eu(n).keySeq())},e.prototype.toString=function(){return this.__toString("OrderedSet {","}")},e})(B4);Zg.isOrderedSet=gq;var _b=Zg.prototype;_b[cl]=!0;_b.zip=g1.zip;_b.zipWith=g1.zipWith;_b.zipAll=g1.zipAll;_b.__empty=e7;_b.__make=T_e;function T_e(a,e){var u=Object.create(_b);return u.size=a?a.size:0,u._map=a,u.__ownerID=e,u}var X$;function e7(){return X$||(X$=T_e(C6()))}var dRe={LeftThenRight:-1,RightThenLeft:1};function fRe(a){if(bl(a))throw new Error("Can not call `Record` with an immutable Record as default values. Use a plain javascript object instead.");if(Au(a))throw new Error("Can not call `Record` with an immutable Collection as default values. Use a plain javascript object instead.");if(a===null||typeof a!="object")throw new Error("Can not call `Record` with a non-object as default values. Use a plain javascript object instead.")}var ra=function(e,u){var n;fRe(e);var r=function(o){var l=this;if(o instanceof r)return o;if(!(this instanceof r))return new r(o);if(!n){n=!0;var s=Object.keys(e),c=t._indices={};t._name=u,t._keys=s,t._defaultValues=e;for(var d=0;d<s.length;d++){var f=s[d];c[f]=d,t[f]?typeof console=="object"&&console.warn&&console.warn("Cannot define "+_q(this)+' with property "'+f+'" since that property name is part of the Record API.'):pRe(t,f)}}return this.__ownerID=void 0,this._values=q4().withMutations(function(p){p.setSize(l._keys.length),Eu(o).forEach(function(h,g){p.set(l._indices[g],h===l._defaultValues[g]?void 0:h)})}),this},t=r.prototype=Object.create(tn);return t.constructor=r,u&&(r.displayName=u),r};ra.prototype.toString=function(){for(var e=_q(this)+" { ",u=this._keys,n,r=0,t=u.length;r!==t;r++)n=u[r],e+=(r?", ":"")+n+": "+c4(this.get(n));return e+" }"};ra.prototype.equals=function(e){return this===e||bl(e)&&e1(this).equals(e1(e))};ra.prototype.hashCode=function(){return e1(this).hashCode()};ra.prototype.has=function(e){return this._indices.hasOwnProperty(e)};ra.prototype.get=function(e,u){if(!this.has(e))return u;var n=this._indices[e],r=this._values.get(n);return r===void 0?this._defaultValues[e]:r};ra.prototype.set=function(e,u){if(this.has(e)){var n=this._values.set(this._indices[e],u===this._defaultValues[e]?void 0:u);if(n!==this._values&&!this.__ownerID)return vq(this,n)}return this};ra.prototype.remove=function(e){return this.set(e)};ra.prototype.clear=function(){var e=this._values.clear().setSize(this._keys.length);return this.__ownerID?this:vq(this,e)};ra.prototype.wasAltered=function(){return this._values.wasAltered()};ra.prototype.toSeq=function(){return e1(this)};ra.prototype.toJS=function(){return EF(this)};ra.prototype.entries=function(){return this.__iterator(Qi)};ra.prototype.__iterator=function(e,u){return e1(this).__iterator(e,u)};ra.prototype.__iterate=function(e,u){return e1(this).__iterate(e,u)};ra.prototype.__ensureOwner=function(e){if(e===this.__ownerID)return this;var u=this._values.__ensureOwner(e);return e?vq(this,u,e):(this.__ownerID=e,this._values=u,this)};ra.isRecord=bl;ra.getDescriptiveName=_q;var tn=ra.prototype;tn[qve]=!0;tn[I4]=tn.remove;tn.deleteIn=tn.removeIn=fq;tn.getIn=g_e;tn.hasIn=La.hasIn;tn.merge=Wve;tn.mergeWith=Yve;tn.mergeIn=nq;tn.mergeDeep=e_e;tn.mergeDeepWith=t_e;tn.mergeDeepIn=rq;tn.setIn=aq;tn.update=iq;tn.updateIn=uq;tn.withMutations=L4;tn.asMutable=j4;tn.asImmutable=P4;tn[$F]=tn.entries;tn.toJSON=tn.toObject=La.toObject;tn.inspect=tn.toSource=function(){return this.toString()};function vq(a,e,u){var n=Object.create(Object.getPrototypeOf(a));return n._values=e,n.__ownerID=u,n}function _q(a){return a.constructor.displayName||a.constructor.name||"Record"}function e1(a){return X7(a._keys.map(function(e){return[e,a.get(e)]}))}function pRe(a,e){try{Object.defineProperty(a,e,{get:function(){return this.get(e)},set:function(u){e4(this.__ownerID,"Cannot set on an immutable record."),this.set(e,u)}})}catch{}}var hRe=(function(a){function e(u,n){if(!(this instanceof e))return new e(u,n);if(this._value=u,this.size=n===void 0?1/0:Math.max(0,n),this.size===0){if(ij)return ij;ij=this}}return a&&(e.__proto__=a),e.prototype=Object.create(a&&a.prototype),e.prototype.constructor=e,e.prototype.toString=function(){return this.size===0?"Repeat []":"Repeat [ "+this._value+" "+this.size+" times ]"},e.prototype.get=function(n,r){return this.has(n)?this._value:r},e.prototype.includes=function(n){return sa(this._value,n)},e.prototype.slice=function(n,r){var t=this.size;return D4(n,r,t)?this:new e(this._value,F4(r,t)-y1(n,t))},e.prototype.reverse=function(){return this},e.prototype.indexOf=function(n){return sa(this._value,n)?0:-1},e.prototype.lastIndexOf=function(n){return sa(this._value,n)?this.size:-1},e.prototype.__iterate=function(n,r){for(var t=this.size,i=0;i!==t&&n(this._value,r?t-++i:i++,this)!==!1;);return i},e.prototype.__iterator=function(n,r){var t=this,i=this.size,o=0;return new mr(function(){return o===i?Ma():dn(n,r?i-++o:o++,t._value)})},e.prototype.equals=function(n){return n instanceof e?sa(this._value,n._value):mq(this,n)},e})(Ou),ij;function yRe(a,e){return w_e([],e||mRe,a,"",e&&e.length>2?[]:void 0,{"":a})}function w_e(a,e,u,n,r,t){if(typeof u!="string"&&!Au(u)&&(z7(u)||H7(u)||tq(u))){if(~a.indexOf(u))throw new TypeError("Cannot convert circular structure to Immutable");a.push(u),r&&n!==""&&r.push(n);var i=e.call(t,n,Ca(u).map(function(o,l){return w_e(a,e,o,l,r,u)}),r&&r.slice());return a.pop(),r&&r.pop(),i}return u}function mRe(a,e){return bi(e)?e.toList():en(e)?e.toMap():e.toSet()}var bRe="5.1.4",gRe=ca;const vRe=Object.freeze(Object.defineProperty({__proto__:null,Collection:ca,Iterable:gRe,List:q4,Map:bb,OrderedMap:Qo,OrderedSet:Zg,PairSorting:dRe,Range:y_e,Record:ra,Repeat:hRe,Seq:Ca,Set:B4,Stack:ZF,fromJS:yRe,get:dq,getIn:bq,has:o_e,hasIn:v_e,hash:fi,is:sa,isAssociative:GF,isCollection:gi,isImmutable:Au,isIndexed:bi,isKeyed:en,isList:pq,isMap:YF,isOrdered:co,isOrderedMap:hq,isOrderedSet:gq,isPlainObject:tq,isRecord:bl,isSeq:KF,isSet:eP,isStack:SF,isValueObject:YL,merge:kxe,mergeDeep:Gxe,mergeDeepWith:$xe,mergeWith:zxe,remove:s_e,removeIn:d_e,set:c_e,setIn:r_e,update:eq,updateIn:gb,version:bRe},Symbol.toStringTag,{value:"Module"})),Tq=VF(vRe);var K$;function S_e(){if(K$)return ad;K$=1,Object.defineProperty(ad,"__esModule",{value:!0}),ad.ActionContextKey=ad.ActionContext=void 0;const a=Tq;let e=class B6{constructor(r={}){this.map=(0,a.Map)(r)}setDefault(r,t){return this.has(r)?this:this.set(r,t)}set(r,t){return this.setRaw(r.name,t)}setRaw(r,t){return new B6(this.map.set(r,t))}delete(r){return new B6(this.map.delete(r.name))}get(r){return this.getRaw(r.name)}getRaw(r){return this.map.get(r)}getSafe(r){if(!this.has(r))throw new Error(`Context entry ${r.name} is required but not available`);return this.get(r)}has(r){return this.hasRaw(r.name)}hasRaw(r){return this.map.has(r)}merge(...r){let t=this;for(const i of r)for(const o of i.keys())t=t.set(o,i.get(o));return t}keys(){return[...this.map.keys()].map(r=>new u(r))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(r){return r instanceof B6?r:new B6((0,a.Map)(r??{}))}};ad.ActionContext=e;class u{constructor(r){this.name=r}}return ad.ActionContextKey=u,ad}var Iv={},J$;function E_e(){if(J$)return Iv;J$=1,Object.defineProperty(Iv,"__esModule",{value:!0}),Iv.Bus=void 0;let a=class{constructor(u){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,u),this.failMessage=`All actors over bus ${this.name} failed to handle an action`}subscribe(u){this.actors.push(u),this.reorderForDependencies()}subscribeObserver(u){this.observers.push(u)}unsubscribe(u){const n=this.actors.indexOf(u);return n>=0?(this.actors.splice(n,1),!0):!1}unsubscribeObserver(u){const n=this.observers.indexOf(u);return n>=0?(this.observers.splice(n,1),!0):!1}publish(u){return this.actors.map(n=>({actor:n,reply:n.test(u)}))}onRun(u,n,r){for(const t of this.observers)t.onRun(u,n,r)}addDependencies(u,n){for(const r of n){let t=this.dependencyLinks.get(r);t||(t=[],this.dependencyLinks.set(r,t)),t.push(u)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const u=[];for(const n of this.dependencyLinks.keys()){const r=this.actors.indexOf(n);r>=0&&(this.actors.splice(r,1),u.push(n))}for(;u.length>0;){let n=-1;for(let t=0;t<u.length;t++){let i=!0;for(const o of this.dependencyLinks.get(u[t]))if(!this.actors.includes(o)&&u.includes(o)){i=!1;break}if(i){n=t;break}}if(n<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const r=u.splice(n,1)[0];this.actors.push(r)}}}};return Iv.Bus=a,Iv}var Dv={},W$;function _Re(){if(W$)return Dv;W$=1,Object.defineProperty(Dv,"__esModule",{value:!0}),Dv.BusIndexed=void 0;const a=E_e();let e=class extends a.Bus{constructor(n){super(n),this.actorsIndex={}}subscribe(n){const r=this.getActorIdentifiers(n)??["_undefined_"];for(const t of r){let i=this.actorsIndex[t];i||(i=this.actorsIndex[t]=[]),i.push(n),super.subscribe(n)}}unsubscribe(n){const r=this.getActorIdentifiers(n)??["_undefined_"];let t=!1;for(const i of r){const o=this.actorsIndex[i];if(o){const l=o.indexOf(n);l>=0&&o.splice(l,1),o.length===0&&delete this.actorsIndex[i]}t=t||super.unsubscribe(n)}return t}publish(n){const r=this.getActionIdentifier(n);return r?[...this.actorsIndex[r]||[],...this.actorsIndex._undefined_||[]].map(i=>({actor:i,reply:i.test(n)})):super.publish(n)}getActorIdentifiers(n){const r=this.actorIdentifierFields.reduce((t,i)=>t[i],n);if(r)return Array.isArray(r)?r:[r]}getActionIdentifier(n){return this.actionIdentifierFields.reduce((r,t)=>r[t],n)}};return Dv.BusIndexed=e,Dv}var Fv={},Y$;function A_e(){if(Y$)return Fv;Y$=1,Object.defineProperty(Fv,"__esModule",{value:!0}),Fv.CONTEXT_KEY_LOGGER=void 0;const a=S_e();return Fv.CONTEXT_KEY_LOGGER=new a.ActionContextKey("@comunica/core:log"),Fv}var Pv={},Z$;function TRe(){if(Z$)return Pv;Z$=1,Object.defineProperty(Pv,"__esModule",{value:!0}),Pv.ActionObserver=void 0;let a=class{constructor(u){Object.assign(this,u)}};return Pv.ActionObserver=a,Pv}var jv={},eX;function wRe(){if(eX)return jv;eX=1,Object.defineProperty(jv,"__esModule",{value:!0}),jv.Actor=void 0;const a=A_e();let e=class zm{constructor(n){this.beforeActors=[],Object.assign(this,n),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors),n.busFailMessage&&(this.bus.failMessage=n.busFailMessage)}static getContextLogger(n){return n.get(a.CONTEXT_KEY_LOGGER)}runObservable(n,r){const t=this.run(n,r);return this.bus.onRun(this,n,t),t}getDefaultLogData(n,r){const t=r?r():{};return t.actor=this.name,t}logTrace(n,r,t){const i=zm.getContextLogger(n);i&&i.trace(r,this.getDefaultLogData(n,t))}logDebug(n,r,t){const i=zm.getContextLogger(n);i&&i.debug(r,this.getDefaultLogData(n,t))}logInfo(n,r,t){const i=zm.getContextLogger(n);i&&i.info(r,this.getDefaultLogData(n,t))}logWarn(n,r,t){const i=zm.getContextLogger(n);i&&i.warn(r,this.getDefaultLogData(n,t))}logError(n,r,t){const i=zm.getContextLogger(n);i&&i.error(r,this.getDefaultLogData(n,t))}logFatal(n,r,t){const i=zm.getContextLogger(n);i&&i.fatal(r,this.getDefaultLogData(n,t))}};return jv.Actor=e,jv}var Mv={},tX;function SRe(){if(tX)return Mv;tX=1,Object.defineProperty(Mv,"__esModule",{value:!0}),Mv.Mediator=void 0;let a=class t7{constructor(u){Object.assign(this,u)}publish(u){const n=this.bus.publish(u);if(n.length===0)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return n}async mediateActor(u){return await this.mediateWith(u,this.publish(u))}async mediateTestable(u){return(await this.mediateActor(u)).mapAsync((r,t)=>r.runObservable(u,t))}async mediate(u){return(await this.mediateTestable(u)).getOrThrow()}constructFailureMessage(u,n){const r=`
        `;return`${this.bus.failMessage.replaceAll(/\$\{(.*?)\}/gu,(i,o)=>t7.getObjectValue({action:u},o.split("."))||i)}
    Error messages of failing actors:${r}${n.join(r)}`}static getObjectValue(u,n){if(n.length===0)return u;if(u)return t7.getObjectValue(u[n[0]],n.slice(1))}};return Mv.Mediator=a,Mv}var va={},rX;function ERe(){if(rX)return va;rX=1,Object.defineProperty(va,"__esModule",{value:!0}),va.TestResultFailed=va.TestResultPassed=va.failTest=va.passTestVoidWithSideData=va.passTestWithSideData=va.passTestVoid=va.passTest=void 0;function a(o){return new t(o,void 0)}va.passTest=a;function e(){return new t(!0,void 0)}va.passTestVoid=e;function u(o,l){return new t(o,l)}va.passTestWithSideData=u;function n(o){return new t(!0,o)}va.passTestVoidWithSideData=n;function r(o){return new i(o)}va.failTest=r;class t{constructor(l,s){this.value=l,this.sideData=s}isPassed(){return!0}isFailed(){return!1}get(){return this.value}getOrThrow(){return this.value}getSideData(){return this.sideData}getFailMessage(){}map(l){return new t(l(this.value,this.sideData),this.sideData)}async mapAsync(l){return new t(await l(this.value,this.sideData),this.sideData)}}va.TestResultPassed=t;class i{constructor(l){this.failMessage=l}isPassed(){return!1}isFailed(){return!0}get(){}getOrThrow(){throw new Error(this.getFailMessage())}getSideData(){throw new Error(this.getFailMessage())}getFailMessage(){return this.failMessage}map(){return this}async mapAsync(){return this}}return va.TestResultFailed=i,va}var nX;function De(){return nX||(nX=1,(function(a){var e=nd&&nd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=nd&&nd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(S_e(),a),u(E_e(),a),u(_Re(),a),u(A_e(),a),u(TRe(),a),u(wRe(),a),u(SRe(),a),u(ERe(),a)})(nd)),nd}var id={},Cv={},aX;function ARe(){if(aX)return Cv;aX=1,Object.defineProperty(Cv,"__esModule",{value:!0}),Cv.StatisticBase=void 0;let a=class{constructor(){this.listeners=[]}on(u){return this.listeners.push(u),this}removeListener(u){if(!this.listeners||this.listeners.length===0)return this;for(let n=this.listeners.length-1;n>=0;n--)this.listeners[n]===u&&this.listeners.splice(n,1);return this}emit(u){if(!this.listeners||this.listeners.length===0)return!1;for(const n of this.listeners)n(u);return!0}getListeners(){return this.listeners}};return Cv.StatisticBase=a,Cv}var iX;function wq(){return iX||(iX=1,(function(a){var e=id&&id.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=id&&id.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(ARe(),a)})(id)),id}var uX;function ORe(){if(uX)return Rv;uX=1,Object.defineProperty(Rv,"__esModule",{value:!0}),Rv.StatisticTraversalTopology=void 0;const a=De(),e=wq();let u=class extends e.StatisticBase{constructor(r,t){super(),this.adjacencyListIn={},this.adjacencyListOut={},this.openNodes=[],this.edges=new Set,this.edgesInOrder=[],this.nodeMetadata={},this.nodeToIndexDict={},this.indexToNodeDict={},this.dereferenceOrder=[],this.nDereferenced=0,this.nDiscovered=0,this.key=new a.ActionContextKey("@comunica/statistic-traversal-topology:tracked"),t.on(i=>{this.updateStatistic({type:"dereference",data:i})}),r.on(i=>{this.updateStatistic({type:"discover",data:i})})}updateStatistic(r){if(r.type==="discover"){const t={url:r.data.edge[1],metadata:r.data.metadataChild},i={url:r.data.edge[0],metadata:r.data.metadataParent};this.addEdge(t,i)&&this.emit({updateType:r.type,adjacencyListIn:this.adjacencyListIn,adjacencyListOut:this.adjacencyListOut,edgesInOrder:this.edgesInOrder,openNodes:this.openNodes,dereferenceOrder:this.dereferenceOrder,nodeToIndexDict:this.nodeToIndexDict,indexToNodeDict:this.indexToNodeDict,childNode:this.nodeToIndexDict[t.url],parentNode:this.nodeToIndexDict[i.url]})}else if(r.type==="dereference")this.setDereferenced(r.data)&&this.emit({updateType:r.type,adjacencyListIn:this.adjacencyListIn,adjacencyListOut:this.adjacencyListOut,edgesInOrder:this.edgesInOrder,openNodes:this.openNodes,dereferenceOrder:this.dereferenceOrder,nodeToIndexDict:this.nodeToIndexDict,indexToNodeDict:this.indexToNodeDict,childNode:this.nodeToIndexDict[r.data.url],parentNode:this.nodeToIndexDict[r.data.url]});else throw new Error("Invalid topology update data type passed");return!0}addEdge(r,t){if(r.url===t.url)return!1;if(this.nodeToIndexDict[t.url]===void 0){const s=this.nodeToId(t.url);this.adjacencyListIn[s]=[],this.nodeMetadata[s]={seed:!0,dereferenced:!0,discoverOrder:[-1],dereferenceOrder:-1,...t.metadata}}let i=!0;this.nodeToIndexDict[r.url]&&(i=!1);const o=this.nodeToId(r.url),l=this.nodeToId(t.url);if(this.indexToNodeDict[o]=r.url,this.indexToNodeDict[l]=t.url,this.edges.has(JSON.stringify([l,o])))return!1;if(this.adjacencyListOut[l]=this.adjacencyListOut[l]?[...this.adjacencyListOut[l],o]:[o],this.adjacencyListOut[o]??=[],this.adjacencyListIn[o]=this.adjacencyListIn[o]?[...this.adjacencyListIn[o],l]:[l],this.edges.add(JSON.stringify([l,o])),this.edgesInOrder.push([l,o]),this.nodeMetadata[o]){const s=this.nodeMetadata[o].discoverOrder;this.nodeMetadata[o].discoverOrder=s?[...s,this.nDiscovered]:[this.nDiscovered]}else this.nodeMetadata[o]={seed:!1,dereferenced:!1,discoverOrder:[this.nDiscovered],dereferenceOrder:Number.NEGATIVE_INFINITY,...r.metadata};return i&&this.openNodes.push(o),this.nDiscovered++,!0}setDereferenced(r){return this.nodeMetadata[this.nodeToId(r.url)].dereferenced?!1:(this.nodeMetadata[this.nodeToId(r.url)].dereferenced=!0,this.nodeMetadata[this.nodeToId(r.url)].dereferenceOrder=this.nDereferenced,this.dereferenceOrder.push(this.nodeToId(r.url)),this.openNodes=this.openNodes.filter(t=>t!==this.nodeToId(r.url)),this.nDereferenced++,!0)}nodeToId(r){return this.nodeToIndexDict[r]===void 0&&(this.nodeToIndexDict[r]=Object.keys(this.nodeToIndexDict).length),this.nodeToIndexDict[r]}};return Rv.StatisticTraversalTopology=u,Rv}var oX;function xRe(){return oX||(oX=1,(function(a){var e=rd&&rd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=rd&&rd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(ORe(),a)})(rd)),rd}var RRe=xRe(),ud={},uj={},sX;function NRe(){return sX||(sX=1,Object.defineProperty(uj,"__esModule",{value:!0})),uj}var oj={},cX;function IRe(){return cX||(cX=1,Object.defineProperty(oj,"__esModule",{value:!0})),oj}var sj={},lX;function DRe(){return lX||(lX=1,Object.defineProperty(sj,"__esModule",{value:!0})),sj}var cj={},dX;function FRe(){return dX||(dX=1,Object.defineProperty(cj,"__esModule",{value:!0})),cj}var lj={},fX;function PRe(){return fX||(fX=1,Object.defineProperty(lj,"__esModule",{value:!0})),lj}var dj={},pX;function jRe(){return pX||(pX=1,Object.defineProperty(dj,"__esModule",{value:!0})),dj}var fj={},hX;function MRe(){return hX||(hX=1,Object.defineProperty(fj,"__esModule",{value:!0})),fj}var pj={},yX;function CRe(){return yX||(yX=1,Object.defineProperty(pj,"__esModule",{value:!0})),pj}var hj={},mX;function LRe(){return mX||(mX=1,Object.defineProperty(hj,"__esModule",{value:!0})),hj}var yj={},bX;function qRe(){return bX||(bX=1,Object.defineProperty(yj,"__esModule",{value:!0})),yj}var mj={},gX;function BRe(){return gX||(gX=1,Object.defineProperty(mj,"__esModule",{value:!0})),mj}var bj={},vX;function URe(){return vX||(vX=1,Object.defineProperty(bj,"__esModule",{value:!0})),bj}var gj={},_X;function QRe(){return _X||(_X=1,Object.defineProperty(gj,"__esModule",{value:!0})),gj}var vj={},TX;function VRe(){return TX||(TX=1,Object.defineProperty(vj,"__esModule",{value:!0})),vj}var _j={},wX;function HRe(){return wX||(wX=1,Object.defineProperty(_j,"__esModule",{value:!0})),_j}var Tj={},SX;function kRe(){return SX||(SX=1,Object.defineProperty(Tj,"__esModule",{value:!0})),Tj}var wj={},EX;function zRe(){return EX||(EX=1,Object.defineProperty(wj,"__esModule",{value:!0})),wj}var Sj={},AX;function GRe(){return AX||(AX=1,Object.defineProperty(Sj,"__esModule",{value:!0})),Sj}var Ej={},OX;function $Re(){return OX||(OX=1,Object.defineProperty(Ej,"__esModule",{value:!0})),Ej}var Lv={},xX;function XRe(){if(xX)return Lv;xX=1,Object.defineProperty(Lv,"__esModule",{value:!0}),Lv.Logger=void 0;let a=class O_e{static getLevelOrdinal(u){return O_e.LEVELS[u]}};return Lv.Logger=a,a.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5},Lv}var qv={},RX;function KRe(){if(RX)return qv;RX=1,Object.defineProperty(qv,"__esModule",{value:!0}),qv.ExpressionType=void 0;var a;return(function(e){e.Aggregate="aggregate",e.Existence="existence",e.Operator="operator",e.Term="term",e.Variable="variable"})(a||(qv.ExpressionType=a={})),qv}var NX;function ac(){return NX||(NX=1,(function(a){var e=ud&&ud.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ud&&ud.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(NRe(),a),u(IRe(),a),u(DRe(),a),u(FRe(),a),u(PRe(),a),u(jRe(),a),u(MRe(),a),u(CRe(),a),u(LRe(),a),u(qRe(),a),u(BRe(),a),u(URe(),a),u(QRe(),a),u(VRe(),a),u(HRe(),a),u(kRe(),a),u(zRe(),a),u(GRe(),a),u($Re(),a),u(XRe(),a),u(KRe(),a)})(ud)),ud}var JRe=ac(),od={},Bv={},sd={},Uv={},cd={},Qv={},IX;function WRe(){if(IX)return Qv;IX=1,Object.defineProperty(Qv,"__esModule",{value:!0}),Qv.ActorInit=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return Qv.ActorInit=e,Qv}var DX;function YRe(){return DX||(DX=1,(function(a){var e=cd&&cd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=cd&&cd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(WRe(),a)})(cd)),cd}var FX;function x_e(){if(FX)return Uv;FX=1,Object.defineProperty(Uv,"__esModule",{value:!0}),Uv.ActorInitQueryBase=void 0;const a=YRe(),e=De();let u=class extends a.ActorInit{async test(r){return(0,e.passTestVoid)()}async run(r){throw new Error("ActorInitSparql#run is not supported in the browser.")}};return Uv.ActorInitQueryBase=u,Uv}var Vv={},Aj={exports:{}},PX;function vl(){if(PX)return Aj.exports;PX=1;var a=Aj.exports={},e,u;function n(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}(function(){try{typeof setTimeout=="function"?e=setTimeout:e=n}catch{e=n}try{typeof clearTimeout=="function"?u=clearTimeout:u=r}catch{u=r}})();function t(g){if(e===setTimeout)return setTimeout(g,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(g,0);try{return e(g,0)}catch{try{return e.call(null,g,0)}catch{return e.call(this,g,0)}}}function i(g){if(u===clearTimeout)return clearTimeout(g);if((u===r||!u)&&clearTimeout)return u=clearTimeout,clearTimeout(g);try{return u(g)}catch{try{return u.call(null,g)}catch{return u.call(this,g)}}}var o=[],l=!1,s,c=-1;function d(){!l||!s||(l=!1,s.length?o=s.concat(o):c=-1,o.length&&f())}function f(){if(!l){var g=t(d);l=!0;for(var v=o.length;v;){for(s=o,o=[];++c<v;)s&&s[c].run();c=-1,v=o.length}s=null,l=!1,i(g)}}a.nextTick=function(g){var v=new Array(arguments.length-1);if(arguments.length>1)for(var m=1;m<arguments.length;m++)v[m-1]=arguments[m];o.push(new p(g,v)),o.length===1&&!l&&t(f)};function p(g,v){this.fun=g,this.array=v}p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={};function h(){}return a.on=h,a.addListener=h,a.once=h,a.off=h,a.removeListener=h,a.removeAllListeners=h,a.emit=h,a.prependListener=h,a.prependOnceListener=h,a.listeners=function(g){return[]},a.binding=function(g){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(g){throw new Error("process.chdir is not supported")},a.umask=function(){return 0},Aj.exports}var jX;function ZRe(){if(jX)return Vv;jX=1,Object.defineProperty(Vv,"__esModule",{value:!0}),Vv.ActorInitQuery=void 0;const a=x_e();typeof process>"u"&&(globalThis.process=vl());class e extends a.ActorInitQueryBase{}return Vv.ActorInitQuery=e,Vv}var Hv={},ld={},br={},MX;function R_e(){if(MX)return br;MX=1,Object.defineProperty(br,"__esModule",{value:!0}),br.KeysStatistics=br.KeysRdfJoin=br.KeysMergeBindingsContext=br.KeysRdfUpdateQuads=br.KeysQuerySourceIdentify=br.KeysRdfParseHtmlScript=br.KeysRdfParseJsonLd=br.KeysQueryOperation=br.KeysExpressionEvaluator=br.KeysInitQuery=br.KeysHttpProxy=br.KeysHttpMemento=br.KeysHttpWayback=br.KeysHttp=br.KeysCore=void 0;const a=De();return br.KeysCore={log:a.CONTEXT_KEY_LOGGER},br.KeysHttp={includeCredentials:new a.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new a.ActionContextKey("@comunica/bus-http:auth"),fetch:new a.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new a.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new a.ActionContextKey("@comunica/bus-http:http-body-timeout"),httpRetryCount:new a.ActionContextKey("@comunica/bus-http:http-retry-count"),httpRetryDelayFallback:new a.ActionContextKey("@comunica/bus-http:http-retry-delay-fallback"),httpRetryDelayLimit:new a.ActionContextKey("@comunica/bus-http:http-retry-delay-limit"),httpRetryStatusCodes:new a.ActionContextKey("@comunica/bus-http:http-retry-status-codes")},br.KeysHttpWayback={recoverBrokenLinks:new a.ActionContextKey("@comunica/bus-http:recover-broken-links")},br.KeysHttpMemento={datetime:new a.ActionContextKey("@comunica/actor-http-memento:datetime")},br.KeysHttpProxy={httpProxyHandler:new a.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},br.KeysInitQuery={querySourcesUnidentified:new a.ActionContextKey("@comunica/actor-init-query:querySourcesUnidentified"),initialBindings:new a.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new a.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new a.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new a.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new a.ActionContextKey("@comunica/actor-init-query:queryString"),query:new a.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new a.ActionContextKey("@comunica/actor-init-query:baseIRI"),fileBaseIRI:new a.ActionContextKey("@comunica/actor-init-query:fileBaseIRI"),functionArgumentsCache:new a.ActionContextKey("@comunica/actor-init-query:functionArgumentsCache"),queryTimestamp:new a.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),queryTimestampHighResolution:new a.ActionContextKey("@comunica/actor-init-query:queryTimestampHighResolution"),extensionFunctionCreator:new a.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new a.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),extensionFunctionsAlwaysPushdown:new a.ActionContextKey("@comunica/actor-init-query:extensionFunctionsAlwaysPushdown"),cliArgsHandlers:new a.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new a.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new a.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new a.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new a.ActionContextKey("@context"),invalidateCache:new a.ActionContextKey("@comunica/actor-init-query:invalidateCache"),dataFactory:new a.ActionContextKey("@comunica/actor-init-query:dataFactory"),distinctConstruct:new a.ActionContextKey("@comunica/actor-init-query:distinctConstruct")},br.KeysExpressionEvaluator={extensionFunctionCreator:new a.ActionContextKey("@comunica/utils-expression-evaluator:extensionFunctionCreator"),superTypeProvider:new a.ActionContextKey("@comunica/utils-expression-evaluator:superTypeProvider"),defaultTimeZone:new a.ActionContextKey("@comunica/utils-expression-evaluator:defaultTimeZone"),actionContext:new a.ActionContextKey("@comunica/utils-expression-evaluator:actionContext")},br.KeysQueryOperation={operation:new a.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new a.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new a.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new a.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new a.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new a.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new a.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new a.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph"),querySources:new a.ActionContextKey("@comunica/bus-query-operation:querySources")},br.KeysRdfParseJsonLd={documentLoader:new a.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new a.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new a.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},br.KeysRdfParseHtmlScript={processingHtmlScript:new a.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new a.ActionContextKey("extractAllScripts")},br.KeysQuerySourceIdentify={sourceIds:new a.ActionContextKey("@comunica/bus-query-source-identify:sourceIds"),hypermediaSourcesAggregatedStores:new a.ActionContextKey("@comunica/bus-query-source-identify:hypermediaSourcesAggregatedStores"),traverse:new a.ActionContextKey("@comunica/bus-query-source-identify:traverse")},br.KeysRdfUpdateQuads={destination:new a.ActionContextKey("@comunica/bus-rdf-update-quads:destination")},br.KeysMergeBindingsContext={sourcesBinding:new a.ActionContextKey("@comunica/bus-merge-bindings-context:sourcesBinding")},br.KeysRdfJoin={lastPhysicalJoin:new a.ActionContextKey("@comunica/bus-rdf-join:lastPhysicalJoin")},br.KeysStatistics={discoveredLinks:new a.ActionContextKey("@comunica/statistic:discoveredLinks"),dereferencedLinks:new a.ActionContextKey("@comunica/statistic:dereferencedLinks"),intermediateResults:new a.ActionContextKey("@comunica/statistic:intermediateResults")},br}var CX;function lt(){return CX||(CX=1,(function(a){var e=ld&&ld.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ld&&ld.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(R_e(),a)})(ld)),ld}var LX;function e6e(){if(LX)return Hv;LX=1,Object.defineProperty(Hv,"__esModule",{value:!0}),Hv.QueryEngineBase=void 0;const a=lt(),e=De();let u=class r7{constructor(r){this.actorInitQuery=r}async queryBindings(r,t){return this.queryOfType(r,t,"bindings")}async queryQuads(r,t){return this.queryOfType(r,t,"quads")}async queryBoolean(r,t){return this.queryOfType(r,t,"boolean")}async queryVoid(r,t){return this.queryOfType(r,t,"void")}async queryOfType(r,t,i){const o=await this.query(r,t);if(o.resultType===i)return await o.execute();throw new Error(`Query result type '${i}' was expected, while '${o.resultType}' was found.`)}async query(r,t){const i=await this.queryOrExplain(r,t);if("explain"in i)throw new Error("Tried to explain a query when in query-only mode");return i}async explain(r,t,i){return t.explain=i,await this.queryOrExplain(r,t)}async queryOrExplain(r,t){const i=e.ActionContext.ensureActionContext(t);i.get(a.KeysInitQuery.invalidateCache)&&await this.invalidateHttpCache();const{result:o}=await this.actorInitQuery.mediatorQueryProcess.mediate({query:r,context:i});return"explain"in o?o:r7.internalToFinalResult(o)}async getResultMediaTypes(r){return r=e.ActionContext.ensureActionContext(r),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:r,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(r){return r=e.ActionContext.ensureActionContext(r),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:r,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(r,t,i){if(i=e.ActionContext.ensureActionContext(i),!t)switch(r.resultType){case"bindings":t="application/json";break;case"quads":t="application/trig";break;default:t="simple";break}const o={...await r7.finalToInternalResult(r),context:i};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:i,handle:o,handleMediaType:t})).handle}invalidateHttpCache(r,t){return t=e.ActionContext.ensureActionContext(t),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:r,context:t})}static internalToFinalResult(r){switch(r.type){case"bindings":return{resultType:"bindings",execute:async()=>r.bindingsStream,metadata:async()=>{const t=await r.metadata();return t.variables=t.variables.map(i=>i.variable),t},context:r.context};case"quads":return{resultType:"quads",execute:async()=>r.quadStream,metadata:async()=>await r.metadata(),context:r.context};case"boolean":return{resultType:"boolean",execute:async()=>r.execute(),context:r.context};case"void":return{resultType:"void",execute:async()=>r.execute(),context:r.context}}}static async finalToInternalResult(r){switch(r.resultType){case"bindings":return{type:"bindings",bindingsStream:await r.execute(),metadata:async()=>{const t=await r.metadata();return t.variables=t.variables.map(i=>({variable:i,canBeUndef:!1})),t}};case"quads":return{type:"quads",quadStream:await r.execute(),metadata:async()=>await r.metadata()};case"boolean":return{type:"boolean",execute:()=>r.execute()};case"void":return{type:"void",execute:()=>r.execute()}}}};return Hv.QueryEngineBase=u,Hv}var qX;function Tb(){return qX||(qX=1,(function(a){var e=sd&&sd.__createBinding||(Object.create?(function(r,t,i,o){o===void 0&&(o=i);var l=Object.getOwnPropertyDescriptor(t,i);(!l||("get"in l?!t.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(r,o,l)}):(function(r,t,i,o){o===void 0&&(o=i),r[o]=t[i]})),u=sd&&sd.__exportStar||function(r,t){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&e(t,r,i)};Object.defineProperty(a,"__esModule",{value:!0}),a.QueryEngineBase=void 0,u(x_e(),a),u(ZRe(),a);var n=e6e();Object.defineProperty(a,"QueryEngineBase",{enumerable:!0,get:function(){return n.QueryEngineBase}})})(sd)),sd}var dd={},kv={},BX;function t6e(){if(BX)return kv;BX=1,Object.defineProperty(kv,"__esModule",{value:!0}),kv.LoggerVoid=void 0;const a=ac();let e=class extends a.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}};return kv.LoggerVoid=e,kv}var UX;function Sq(){return UX||(UX=1,(function(a){var e=dd&&dd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=dd&&dd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(t6e(),a)})(dd)),dd}var fd={},pd={},QX;function N_e(){if(QX)return pd;QX=1,Object.defineProperty(pd,"__esModule",{value:!0}),pd.MediatorFunctionFactory=pd.ActorFunctionFactory=void 0;const a=De();let e=class extends a.Actor{constructor(r){super(r)}};pd.ActorFunctionFactory=e;class u extends a.Mediator{}return pd.MediatorFunctionFactory=u,pd}var zv={},VX;function r6e(){if(VX)return zv;VX=1,Object.defineProperty(zv,"__esModule",{value:!0}),zv.ActorFunctionFactoryDedicated=void 0;const a=De(),e=N_e();let u=class extends e.ActorFunctionFactory{constructor(r){super(r)}async test(r){return this.functionNames.includes(r.functionName)&&(this.termFunction||!r.requireTermExpression)?(0,a.passTestVoid)():(0,a.failTest)(`Actor ${this.name} can not provide implementation for "${r.functionName}", only for ${this.termFunction?"":"non-termExpression "}${this.functionNames.join(" and ")}.`)}};return zv.ActorFunctionFactoryDedicated=u,zv}var Gv={},HX;function n6e(){if(HX)return Gv;HX=1,Object.defineProperty(Gv,"__esModule",{value:!0}),Gv.BusFunctionFactory=void 0;const a=De();let e=class extends a.BusIndexed{constructor(n){super({...n,actorIdentifierFields:["functionNames"],actionIdentifierFields:["functionName"]})}};return Gv.BusFunctionFactory=e,Gv}var hd={},Oj={},$v={},xj={},_a={},yd={},Xv={},kX;function I_e(){if(kX)return Xv;kX=1,Object.defineProperty(Xv,"__esModule",{value:!0}),Xv.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return Xv.BlankNode=a,Xv}var Kv={},Jv={},zX;function D_e(){if(zX)return Jv;zX=1,Object.defineProperty(Jv,"__esModule",{value:!0}),Jv.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return Jv.DefaultGraph=a,a.INSTANCE=new a,Jv}var Wv={},Yv={},GX;function Eq(){if(GX)return Yv;GX=1,Object.defineProperty(Yv,"__esModule",{value:!0}),Yv.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return Yv.NamedNode=a,Yv}var $X;function F_e(){if($X)return Wv;$X=1,Object.defineProperty(Wv,"__esModule",{value:!0}),Wv.Literal=void 0;const a=Eq();class e{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=e.RDF_LANGUAGE_STRING):r?(this.language="",this.datatype=r):(this.language="",this.datatype=e.XSD_STRING)}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&this.datatype.equals(n.datatype)}}return Wv.Literal=e,e.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Wv}var Zv={},XX;function P_e(){if(XX)return Zv;XX=1,Object.defineProperty(Zv,"__esModule",{value:!0}),Zv.Quad=void 0;class a{constructor(u,n,r,t){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=t}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return Zv.Quad=a,Zv}var e_={},KX;function j_e(){if(KX)return e_;KX=1,Object.defineProperty(e_,"__esModule",{value:!0}),e_.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return e_.Variable=a,e_}var JX;function a6e(){if(JX)return Kv;JX=1,Object.defineProperty(Kv,"__esModule",{value:!0}),Kv.DataFactory=void 0;const a=I_e(),e=D_e(),u=F_e(),n=Eq(),r=P_e(),t=j_e();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,c){return new u.Literal(s,c)}variable(s){return new t.Variable(s)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(s,c,d,f){return new r.Quad(s,c,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Kv.DataFactory=o,Kv}var WX;function Rr(){return WX||(WX=1,(function(a){var e=yd&&yd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=yd&&yd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(I_e(),a),u(a6e(),a),u(D_e(),a),u(F_e(),a),u(Eq(),a),u(P_e(),a),u(j_e(),a)})(yd)),yd}var YX;function i6e(){if(YX)return _a;YX=1,Object.defineProperty(_a,"__esModule",{value:!0}),_a.stringQuadToQuad=_a.quadToStringQuad=_a.stringToTerm=_a.getLiteralLanguage=_a.getLiteralType=_a.getLiteralValue=_a.termToString=void 0;const a=Rr(),e=new a.DataFactory;function u(s){if(s)switch(s.termType){case"NamedNode":return s.value;case"BlankNode":return"_:"+s.value;case"Literal":const c=s;return'"'+c.value+'"'+(c.datatype&&c.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&c.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?"^^"+c.datatype.value:"")+(c.language?"@"+c.language:"");case"Quad":return`<<${u(s.subject)} ${u(s.predicate)} ${u(s.object)}${s.graph.termType==="DefaultGraph"?"":" "+u(s.graph)}>>`;case"Variable":return"?"+s.value;case"DefaultGraph":return s.value}}_a.termToString=u;function n(s){const c=/^"([^]*)"/.exec(s);if(!c)throw new Error(s+" is not a literal");return c[1]}_a.getLiteralValue=n;function r(s){const c=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(s);if(!c)throw new Error(s+" is not a literal");return c[1]||(c[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}_a.getLiteralType=r;function t(s){const c=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(s);if(!c)throw new Error(s+" is not a literal");return c[1]?c[1].toLowerCase():""}_a.getLiteralLanguage=t;function i(s,c){if(c=c||e,!s||!s.length)return c.defaultGraph();switch(s[0]){case"_":return c.blankNode(s.substr(2));case"?":if(!c.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return c.variable(s.substr(1));case'"':const d=t(s),f=c.namedNode(r(s));return c.literal(n(s),d||f);default:if(s[0]==="<"&&s.length>4&&s[1]==="<"&&s[s.length-1]===">"&&s[s.length-2]===">"){const p=s.slice(2,-2).trim();let h=[],g=0,v=0,m=!1;for(let T=0;T<p.length;T++){const w=p[T];if(w==="<"&&g++,w===">"){if(g===0)throw new Error("Found closing tag without opening tag in "+s);g--}if(w==='"'){let E=!1,S=T;for(;S-- >0&&p[S]==="\\";)E=!E;E||(m=!m)}if(w===" "&&!m&&g===0){for(h.push(p.slice(v,T));p[T+1]===" ";)T+=1;v=T+1}}if(g!==0)throw new Error("Found opening tag without closing tag in "+s);if(h.push(p.slice(v,p.length)),h.length!==3&&h.length!==4)throw new Error("Nested quad syntax error "+s);return h=h.map(T=>T.startsWith("<")&&!T.includes(" ")?T.slice(1,-1):T),c.quad(i(h[0]),i(h[1]),i(h[2]),h[3]?i(h[3]):void 0)}return c.namedNode(s)}}_a.stringToTerm=i;function o(s){return{subject:u(s.subject),predicate:u(s.predicate),object:u(s.object),graph:u(s.graph)}}_a.quadToStringQuad=o;function l(s,c){return c=c||e,c.quad(i(s.subject,c),i(s.predicate,c),i(s.object,c),i(s.graph,c))}return _a.stringQuadToQuad=l,_a}var ZX;function $t(){return ZX||(ZX=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralLanguage=void 0;const e=i6e();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(xj)),xj}var Mu={},cu={},Rj,eK;function v1(){return eK||(eK=1,Rj=function a(e,u){if(e===u)return!0;if(e&&u&&typeof e=="object"&&typeof u=="object"){if(e.constructor!==u.constructor)return!1;var n,r,t;if(Array.isArray(e)){if(n=e.length,n!=u.length)return!1;for(r=n;r--!==0;)if(!a(e[r],u[r]))return!1;return!0}if(e instanceof Map&&u instanceof Map){if(e.size!==u.size)return!1;for(r of e.entries())if(!u.has(r[0]))return!1;for(r of e.entries())if(!a(r[1],u.get(r[0])))return!1;return!0}if(e instanceof Set&&u instanceof Set){if(e.size!==u.size)return!1;for(r of e.entries())if(!u.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(e)&&ArrayBuffer.isView(u)){if(n=e.length,n!=u.length)return!1;for(r=n;r--!==0;)if(e[r]!==u[r])return!1;return!0}if(e.constructor===RegExp)return e.source===u.source&&e.flags===u.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===u.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===u.toString();if(t=Object.keys(e),n=t.length,n!==Object.keys(u).length)return!1;for(r=n;r--!==0;)if(!Object.prototype.hasOwnProperty.call(u,t[r]))return!1;for(r=n;r--!==0;){var i=t[r];if(!a(e[i],u[i]))return!1}return!0}return e!==e&&u!==u}),Rj}var Nj={},Cu={},md={},t_={},tK;function M_e(){if(tK)return t_;tK=1,Object.defineProperty(t_,"__esModule",{value:!0}),t_.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return t_.BlankNode=a,t_}var r_={},n_={},rK;function C_e(){if(rK)return n_;rK=1,Object.defineProperty(n_,"__esModule",{value:!0}),n_.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return n_.DefaultGraph=a,a.INSTANCE=new a,n_}var a_={},i_={},nK;function Aq(){if(nK)return i_;nK=1,Object.defineProperty(i_,"__esModule",{value:!0}),i_.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return i_.NamedNode=a,i_}var aK;function L_e(){if(aK)return a_;aK=1,Object.defineProperty(a_,"__esModule",{value:!0}),a_.Literal=void 0;const a=Aq();class e{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=e.RDF_LANGUAGE_STRING,this.direction=""):r?"termType"in r?(this.language="",this.datatype=r,this.direction=""):(this.language=r.language,this.datatype=r.direction?e.RDF_DIRECTIONAL_LANGUAGE_STRING:e.RDF_LANGUAGE_STRING,this.direction=r.direction||""):(this.language="",this.datatype=e.XSD_STRING,this.direction="")}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&(n.direction===this.direction||!n.direction&&this.direction==="")&&this.datatype.equals(n.datatype)}}return a_.Literal=e,e.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.RDF_DIRECTIONAL_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),e.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),a_}var u_={},iK;function q_e(){if(iK)return u_;iK=1,Object.defineProperty(u_,"__esModule",{value:!0}),u_.Quad=void 0;class a{constructor(u,n,r,t){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=t}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return u_.Quad=a,u_}var o_={},uK;function B_e(){if(uK)return o_;uK=1,Object.defineProperty(o_,"__esModule",{value:!0}),o_.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return o_.Variable=a,o_}var oK;function u6e(){if(oK)return r_;oK=1,Object.defineProperty(r_,"__esModule",{value:!0}),r_.DataFactory=void 0;const a=M_e(),e=C_e(),u=L_e(),n=Aq(),r=q_e(),t=B_e();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,c){return new u.Literal(s,c)}variable(s){return new t.Variable(s)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(s,c,d,f){return new r.Quad(s,c,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return r_.DataFactory=o,r_}var sK;function Oq(){return sK||(sK=1,(function(a){var e=md&&md.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=md&&md.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(M_e(),a),u(u6e(),a),u(C_e(),a),u(L_e(),a),u(Aq(),a),u(q_e(),a),u(B_e(),a)})(md)),md}var cK;function o6e(){if(cK)return Cu;cK=1,Object.defineProperty(Cu,"__esModule",{value:!0}),Cu.termToString=u,Cu.getLiteralValue=n,Cu.getLiteralType=r,Cu.getLiteralLanguage=t,Cu.getLiteralDirection=i,Cu.stringToTerm=o,Cu.quadToStringQuad=l,Cu.stringQuadToQuad=s;const a=Oq(),e=new a.DataFactory;function u(c){if(c)switch(c.termType){case"NamedNode":return c.value;case"BlankNode":return"_:"+c.value;case"Literal":const d=c;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${u(c.subject)} ${u(c.predicate)} ${u(c.object)}${c.graph.termType==="DefaultGraph"?"":" "+u(c.graph)}>>`;case"Variable":return"?"+c.value;case"DefaultGraph":return c.value}}function n(c){const d=/^"([^]*)"/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]}function r(c){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function t(c){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const p=f.indexOf("--");return p>=0&&(f=f.slice(0,p)),f}return""}function i(c){const d=c.indexOf("--",c.lastIndexOf('"'));if(d>=0){const f=c.slice(d+2,c.length);if(f==="ltr"||f==="rtl")return f;throw new Error(c+" is not a literal with a valid direction")}return""}function o(c,d){if(d=d||e,!c||!c.length)return d.defaultGraph();switch(c[0]){case"_":return d.blankNode(c.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(c.substr(1));case'"':const f=t(c),p=i(c),h=d.namedNode(r(c));return d.literal(n(c),f?{language:f,direction:p}:h);default:if(c[0]==="<"&&c.length>4&&c[1]==="<"&&c[c.length-1]===">"&&c[c.length-2]===">"){const g=c.slice(2,-2).trim();let v=[],m=0,T=0,w=!1;for(let E=0;E<g.length;E++){const S=g[E];if(S==="<"&&m++,S===">"){if(m===0)throw new Error("Found closing tag without opening tag in "+c);m--}if(S==='"'){let N=!1,j=E;for(;j-- >0&&g[j]==="\\";)N=!N;N||(w=!w)}if(S===" "&&!w&&m===0){for(v.push(g.slice(T,E));g[E+1]===" ";)E+=1;T=E+1}}if(m!==0)throw new Error("Found opening tag without closing tag in "+c);if(v.push(g.slice(T,g.length)),v.length!==3&&v.length!==4)throw new Error("Nested quad syntax error "+c);return v=v.map(E=>E.startsWith("<")&&!E.includes(" ")?E.slice(1,-1):E),d.quad(o(v[0]),o(v[1]),o(v[2]),v[3]?o(v[3]):void 0)}return d.namedNode(c)}}function l(c){return{subject:u(c.subject),predicate:u(c.predicate),object:u(c.object),graph:u(c.graph)}}function s(c,d){return d=d||e,d.quad(o(c.subject,d),o(c.predicate,d),o(c.object,d),o(c.graph,d))}return Cu}var lK;function tP(){return lK||(lK=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralDirection=a.getLiteralLanguage=void 0;const e=o6e();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralDirection",{enumerable:!0,get:function(){return e.getLiteralDirection}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(Nj)),Nj}var Ij={},dK;function Q4(){return dK||(dK=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.expressionTypes=a.types=void 0,(function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"})(a.types||(a.types={})),(function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"})(a.expressionTypes||(a.expressionTypes={}))})(Ij)),Ij}var Ao={},Dj={},fK;function U_e(){if(fK)return Dj;fK=1;let a=class{constructor(){return e||this}equals(n){return n&&this.termType===n.termType}};Object.defineProperty(a.prototype,"value",{enumerable:!0,value:"*"}),Object.defineProperty(a.prototype,"termType",{enumerable:!0,value:"Wildcard"});var e=new a;return Dj.Wildcard=a,Dj}var Fj,pK;function s6e(){if(pK)return Fj;pK=1;var a=(function(){var e=function(ot,nt,dt,_t){for(dt=dt||{},_t=ot.length;_t--;dt[ot[_t]]=nt);return dt},u=[6,12,13,15,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],n=[2,247],r=[100,110,113,115,116,123,126,131,329,330,331,332,333],t=[2,409],i=[1,18],o=[1,27],l=[13,16,45,197,224,229,308],s=[28,29,53],c=[28,53],d=[1,42],f=[1,45],p=[1,41],h=[1,44],g=[123,126],v=[1,67],m=[39,45,87],T=[13,16,45,197,224,308],w=[1,87],E=[2,281],S=[1,86],N=[13,16,45,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],j=[6,28,29,53,63,70,73,81,83,85],q=[6,13,16,28,29,53,63,70,73,81,83,85,87,308],O=[6,13,16,28,29,45,53,63,70,73,81,82,83,85,87,89,197,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314],I=[6,13,16,28,29,31,39,45,47,48,53,63,70,73,81,82,83,85,87,89,109,112,121,123,126,128,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,337,338,340,341,342,343,344,345,346],A=[13,16,308],P=[112,132,327,334],C=[13,16,112,132,308],B=[1,111],H=[1,117],V=[112,132,327,328,334],G=[13,16,112,132,308,328],Z=[28,29,45,53,87],ae=[1,138],W=[1,151],te=[1,128],se=[1,127],pe=[1,129],le=[1,140],Ee=[1,141],Oe=[1,142],Ie=[1,143],Ae=[1,144],be=[1,145],ee=[1,147],_=[1,148],F=[2,457],D=[1,158],L=[1,159],Q=[1,160],Y=[1,152],$=[1,153],ue=[1,156],ne=[1,171],ce=[1,172],Se=[1,173],xe=[1,174],Ce=[1,175],Ve=[1,176],Ke=[1,167],Ye=[1,168],oe=[1,169],X=[1,170],J=[1,157],he=[1,166],ve=[1,161],ye=[1,162],re=[1,163],Ne=[1,164],Le=[1,165],Pe=[6,13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Fe=[1,195],R=[6,31,73,81,83,85],k=[2,285],K=[1,199],de=[1,201],ge=[6,31,70,73,81,83,85],Ue=[2,283],je=[1,207],ze=[1,218],at=[1,223],fe=[1,219],Te=[1,225],qe=[1,226],it=[1,224],Me=[6,63,70,73,81,83,85],st=[1,236],tt=[2,334],Ot=[1,243],yt=[1,241],bt=[6,193],Tt=[2,349],xt=[2,339],wt=[28,128],gt=[47,48,193,272],lr=[47,48,193,242,272],ht=[47,48,193,242,246,272],Re=[47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,341,342,343,344,345,346],Qe=[39,47,48,193,242,246,250,263,265,272,290,297,298,299,300,301,302,338,341,342,343,344,345,346],ke=[1,271],vt=[1,270],St=[6,13,16,29,31,39,45,47,48,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],Qt=[1,281],Tr=[1,280],pr=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],aa=[45,89],hr=[13,16,29,31,39,45,47,48,82,85,87,89,112,159,160,161,163,164,174,193,197,224,229,231,232,242,246,250,263,265,272,290,292,293,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346],Ir=[13,16,31,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],fa=[31,89],Or=[48,87],xn=[6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338],hn=[6,13,16,39,45,48,82,87,89,231,263,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337,338,340],_i=[1,313],Rn=[6,85],yo=[6,31,81,83,85],yn=[2,361],Nn=[2,353],$r=[1,343],mn=[31,112,335],bn=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Il=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335],Dl=[6,109,193],zi=[31,112],nn=[13,16,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],P1=[1,390],Ia=[1,391],Gi=[13,16,87,197,308,314],j1=[13,16,39,45,82,87,224,263,265,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312,346,347,348,349,350,351],dc=[1,417],xu=[1,418],M1=[13,16,48,197,229,308],Ru=[6,31,85],rs=[6,13,16,31,45,73,81,83,85,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],C1=[6,13,16,29,31,45,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,231,268,269,270,271,273,274,276,277,279,280,283,285,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,346,347,348,349,350,351],mo=[29,31,85,112,159,160,161,163,164],Fl=[1,443],fc=[1,444],vN=[1,449],ns=[31,112,193,232,318,335],as=[13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],$i=[13,16,31,45,48,82,87,89,112,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Pl=[13,16,29,31,45,48,82,85,87,89,112,159,160,161,163,164,193,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],is=[13,16,31,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],Xi=[31,45],us=[1,507],L1=[1,508],Rb=[6,13,16,29,31,39,45,47,48,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,336,338,341,342,343,344,345,346,347,348,349,350,351],jl=[29,31,85,112,159,160,161,163,164,335],Ti=[6,13,16,31,45,70,73,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Ki=[13,16,31,45,48,82,87,89,112,193,197,231,232,272,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,317,318,335],Nb=[2,352],os=[13,16,197,308,314],Nu=[1,565],bo=[6,13,16,31,45,76,78,81,83,85,87,268,269,270,271,273,274,276,277,279,280,283,285,308,346,347,348,349,350,351],Ml=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Ji=[13,16,29,31,45,82,85,87,89,112,159,160,161,163,164,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335],Cl=[13,16,87,308],ni=[2,364],ss=[29,31,85,112,159,160,161,163,164,193,232,318,335],Kn=[31,112,193,232,272,318,335],pa=[2,359],Ll=[13,16,48,82,174,294,295,296,297,298,299,300,301,302,303,304,305,306,308,312],go=[29,31,85,112,159,160,161,163,164,193,232,272,318,335],_N=[13,16,31,45,82,87,89,112,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],Ib=[2,347],ql={trace:function(){},yy:{},symbols_:{error:2,QueryOrUpdate:3,Prologue:4,QueryOrUpdate_group0:5,EOF:6,Query:7,Qry:8,Query_option0:9,Prologue_repetition0:10,BaseDecl:11,BASE:12,IRIREF:13,PrefixDecl:14,PREFIX:15,PNAME_NS:16,SelectClauseWildcard:17,Qry_repetition0:18,WhereClause:19,SolutionModifierNoGroup:20,SelectClauseVars:21,Qry_repetition1:22,SolutionModifier:23,CONSTRUCT:24,ConstructTemplate:25,Qry_repetition2:26,Qry_repetition3:27,WHERE:28,"{":29,Qry_option0:30,"}":31,DESCRIBE:32,Qry_group0:33,Qry_repetition4:34,Qry_option1:35,ASK:36,Qry_repetition5:37,SelectClauseBase:38,"*":39,SelectClauseVars_repetition_plus0:40,SELECT:41,SelectClauseBase_option0:42,SelectClauseItem:43,Var:44,"(":45,Expression:46,AS:47,")":48,SubSelect:49,SubSelect_option0:50,SubSelect_option1:51,DatasetClause:52,FROM:53,DatasetClause_option0:54,iri:55,WhereClause_option0:56,GroupGraphPattern:57,SolutionModifier_option0:58,SolutionModifierNoGroup_option0:59,SolutionModifierNoGroup_option1:60,SolutionModifierNoGroup_option2:61,GroupClause:62,GROUP:63,BY:64,GroupClause_repetition_plus0:65,GroupCondition:66,BuiltInCall:67,FunctionCall:68,HavingClause:69,HAVING:70,HavingClause_repetition_plus0:71,OrderClause:72,ORDER:73,OrderClause_repetition_plus0:74,OrderCondition:75,ASC:76,BrackettedExpression:77,DESC:78,Constraint:79,LimitOffsetClauses:80,LIMIT:81,INTEGER:82,OFFSET:83,ValuesClause:84,VALUES:85,InlineData:86,VAR:87,InlineData_repetition0:88,NIL:89,InlineData_repetition1:90,InlineData_repetition_plus2:91,InlineData_repetition3:92,DataBlock:93,DataBlockValueList:94,DataBlockValueList_repetition_plus0:95,Update:96,Update_repetition0:97,Update1:98,Update_option0:99,LOAD:100,Update1_option0:101,Update1_option1:102,Update1_group0:103,Update1_option2:104,GraphRefAll:105,Update1_group1:106,Update1_option3:107,GraphOrDefault:108,TO:109,CREATE:110,Update1_option4:111,GRAPH:112,INSERTDATA:113,QuadPattern:114,DELETEDATA:115,DELETEWHERE:116,Update1_option5:117,InsertDeleteClause:118,Update1_repetition0:119,IntoGraphClause:120,INTO:121,GraphRef:122,DELETE:123,InsertDeleteClause_option0:124,InsertClause:125,INSERT:126,UsingClause:127,USING:128,UsingClause_option0:129,WithClause:130,WITH:131,DEFAULT:132,GraphOrDefault_option0:133,GraphRefAll_group0:134,Quads:135,Quads_option0:136,Quads_repetition0:137,QuadsNotTriples:138,VarOrIri:139,QuadsNotTriples_option0:140,QuadsNotTriples_option1:141,QuadsNotTriples_option2:142,TriplesTemplate:143,TriplesTemplate_repetition0:144,TriplesSameSubject:145,TriplesTemplate_option0:146,GroupGraphPatternSub:147,GroupGraphPatternSub_option0:148,GroupGraphPatternSub_repetition0:149,GroupGraphPatternSubTail:150,GraphPatternNotTriples:151,GroupGraphPatternSubTail_option0:152,GroupGraphPatternSubTail_option1:153,TriplesBlock:154,TriplesBlock_repetition0:155,TriplesSameSubjectPath:156,TriplesBlock_option0:157,GroupOrUnionGraphPattern:158,OPTIONAL:159,MINUS:160,SERVICE:161,GraphPatternNotTriples_option0:162,FILTER:163,BIND:164,InlineDataOneVar:165,InlineDataFull:166,InlineDataOneVar_repetition0:167,InlineDataFull_repetition0:168,InlineDataFull_repetition_plus1:169,InlineDataFull_repetition2:170,DataBlockValue:171,Literal:172,QuotedTriple:173,UNDEF:174,GroupOrUnionGraphPattern_repetition0:175,ArgList:176,ArgList_option0:177,ArgList_repetition0:178,ExpressionList:179,ExpressionList_repetition0:180,ConstructTemplate_option0:181,ConstructTriples:182,ConstructTriples_repetition0:183,ConstructTriples_option0:184,VarOrTermOrQuotedTP:185,PropertyListNotEmpty:186,TriplesNode:187,PropertyList:188,PropertyList_option0:189,VerbObjectList:190,PropertyListNotEmpty_repetition0:191,SemiOptionalVerbObjectList:192,";":193,SemiOptionalVerbObjectList_option0:194,Verb:195,ObjectList:196,a:197,ObjectList_repetition0:198,Object:199,GraphNode:200,Object_option0:201,PropertyListPathNotEmpty:202,TriplesNodePath:203,TriplesSameSubjectPath_option0:204,O:205,PropertyListPathNotEmpty_repetition0:206,PropertyListPathNotEmptyTail:207,O_group0:208,ObjectListPath:209,ObjectListPath_repetition0:210,ObjectPath:211,GraphNodePath:212,ObjectPath_option0:213,Path:214,Path_repetition0:215,PathSequence:216,PathSequence_repetition0:217,PathEltOrInverse:218,PathElt:219,PathPrimary:220,PathElt_option0:221,PathEltOrInverse_option0:222,IriOrA:223,"!":224,PathNegatedPropertySet:225,PathOneInPropertySet:226,PathNegatedPropertySet_repetition0:227,PathNegatedPropertySet_option0:228,"^":229,TriplesNode_repetition_plus0:230,"[":231,"]":232,TriplesNodePath_repetition_plus0:233,VarOrTermOrQuotedTPExpr:234,VarOrTerm:235,GraphTerm:236,BlankNode:237,ConditionalOrExpression:238,ConditionalAndExpression:239,ConditionalOrExpression_repetition0:240,ConditionalOrExpressionTail:241,"||":242,RelationalExpression:243,ConditionalAndExpression_repetition0:244,ConditionalAndExpressionTail:245,"&&":246,NumericExpression:247,RelationalExpression_group0:248,RelationalExpression_option0:249,IN:250,MultiplicativeExpression:251,NumericExpression_repetition0:252,AdditiveExpressionTail:253,AdditiveExpressionTail_group0:254,NumericLiteralPositive:255,AdditiveExpressionTail_repetition0:256,NumericLiteralNegative:257,AdditiveExpressionTail_repetition1:258,UnaryExpression:259,MultiplicativeExpression_repetition0:260,MultiplicativeExpressionTail:261,MultiplicativeExpressionTail_group0:262,"+":263,PrimaryExpression:264,"-":265,ExprQuotedTP:266,Aggregate:267,FUNC_ARITY0:268,FUNC_ARITY1:269,FUNC_ARITY1_SPARQL_STAR:270,FUNC_ARITY2:271,",":272,FUNC_ARITY3:273,FUNC_ARITY3_SPARQL_STAR:274,BuiltInCall_group0:275,BOUND:276,BNODE:277,BuiltInCall_option0:278,EXISTS:279,COUNT:280,Aggregate_option0:281,Aggregate_group0:282,FUNC_AGGREGATE:283,Aggregate_option1:284,GROUP_CONCAT:285,Aggregate_option2:286,Aggregate_option3:287,GroupConcatSeparator:288,SEPARATOR:289,"=":290,String:291,LANGTAG:292,"^^":293,DECIMAL:294,DOUBLE:295,BOOLEAN:296,INTEGER_POSITIVE:297,DECIMAL_POSITIVE:298,DOUBLE_POSITIVE:299,INTEGER_NEGATIVE:300,DECIMAL_NEGATIVE:301,DOUBLE_NEGATIVE:302,STRING_LITERAL1:303,STRING_LITERAL2:304,STRING_LITERAL_LONG1:305,STRING_LITERAL_LONG2:306,PrefixedName:307,PNAME_LN:308,BLANK_NODE_LABEL:309,ANON:310,QuotedTP:311,"<<":312,qtSubjectOrObject:313,">>":314,DataValueTerm:315,AnnotationPattern:316,"{|":317,"|}":318,AnnotationPatternPath:319,ExprVarOrTerm:320,QueryOrUpdate_group0_option0:321,Prologue_repetition0_group0:322,Qry_group0_repetition_plus0:323,SelectClauseBase_option0_group0:324,DISTINCT:325,REDUCED:326,NAMED:327,SILENT:328,CLEAR:329,DROP:330,ADD:331,MOVE:332,COPY:333,ALL:334,".":335,UNION:336,"|":337,"/":338,PathElt_option0_group0:339,"?":340,"!=":341,"<":342,">":343,"<=":344,">=":345,NOT:346,CONCAT:347,COALESCE:348,SUBSTR:349,REGEX:350,REPLACE:351,$accept:0,$end:1},terminals_:{2:"error",6:"EOF",12:"BASE",13:"IRIREF",15:"PREFIX",16:"PNAME_NS",24:"CONSTRUCT",28:"WHERE",29:"{",31:"}",32:"DESCRIBE",36:"ASK",39:"*",41:"SELECT",45:"(",47:"AS",48:")",53:"FROM",63:"GROUP",64:"BY",70:"HAVING",73:"ORDER",76:"ASC",78:"DESC",81:"LIMIT",82:"INTEGER",83:"OFFSET",85:"VALUES",87:"VAR",89:"NIL",100:"LOAD",109:"TO",110:"CREATE",112:"GRAPH",113:"INSERTDATA",115:"DELETEDATA",116:"DELETEWHERE",121:"INTO",123:"DELETE",126:"INSERT",128:"USING",131:"WITH",132:"DEFAULT",159:"OPTIONAL",160:"MINUS",161:"SERVICE",163:"FILTER",164:"BIND",174:"UNDEF",193:";",197:"a",224:"!",229:"^",231:"[",232:"]",242:"||",246:"&&",250:"IN",263:"+",265:"-",268:"FUNC_ARITY0",269:"FUNC_ARITY1",270:"FUNC_ARITY1_SPARQL_STAR",271:"FUNC_ARITY2",272:",",273:"FUNC_ARITY3",274:"FUNC_ARITY3_SPARQL_STAR",276:"BOUND",277:"BNODE",279:"EXISTS",280:"COUNT",283:"FUNC_AGGREGATE",285:"GROUP_CONCAT",289:"SEPARATOR",290:"=",292:"LANGTAG",293:"^^",294:"DECIMAL",295:"DOUBLE",296:"BOOLEAN",297:"INTEGER_POSITIVE",298:"DECIMAL_POSITIVE",299:"DOUBLE_POSITIVE",300:"INTEGER_NEGATIVE",301:"DECIMAL_NEGATIVE",302:"DOUBLE_NEGATIVE",303:"STRING_LITERAL1",304:"STRING_LITERAL2",305:"STRING_LITERAL_LONG1",306:"STRING_LITERAL_LONG2",308:"PNAME_LN",309:"BLANK_NODE_LABEL",310:"ANON",312:"<<",314:">>",317:"{|",318:"|}",325:"DISTINCT",326:"REDUCED",327:"NAMED",328:"SILENT",329:"CLEAR",330:"DROP",331:"ADD",332:"MOVE",333:"COPY",334:"ALL",335:".",336:"UNION",337:"|",338:"/",340:"?",341:"!=",342:"<",343:">",344:"<=",345:">=",346:"NOT",347:"CONCAT",348:"COALESCE",349:"SUBSTR",350:"REGEX",351:"REPLACE"},productions_:[0,[3,3],[7,2],[4,1],[11,2],[14,3],[8,4],[8,4],[8,5],[8,7],[8,5],[8,4],[17,2],[21,2],[38,2],[43,1],[43,5],[49,4],[49,4],[52,3],[19,2],[23,2],[20,3],[62,3],[66,1],[66,1],[66,3],[66,5],[66,1],[69,2],[72,3],[75,2],[75,2],[75,1],[75,1],[80,2],[80,2],[80,4],[80,4],[84,2],[86,4],[86,4],[86,6],[86,2],[94,3],[96,3],[98,4],[98,3],[98,5],[98,4],[98,2],[98,2],[98,2],[98,5],[120,2],[118,3],[118,1],[125,2],[127,3],[130,2],[108,1],[108,2],[122,2],[105,1],[105,1],[114,3],[135,2],[138,7],[143,3],[57,3],[57,3],[147,2],[150,3],[154,3],[151,1],[151,2],[151,2],[151,3],[151,4],[151,2],[151,6],[151,1],[93,1],[93,1],[165,4],[166,4],[166,6],[171,1],[171,1],[171,1],[171,1],[158,2],[79,1],[79,1],[79,1],[68,2],[176,1],[176,5],[179,1],[179,4],[25,3],[182,3],[145,2],[145,2],[188,1],[186,2],[192,2],[190,2],[195,1],[195,1],[196,2],[199,2],[156,2],[156,2],[202,2],[207,1],[207,2],[205,2],[209,2],[211,2],[214,2],[216,2],[219,2],[218,2],[220,1],[220,2],[220,3],[225,1],[225,1],[225,4],[226,1],[226,2],[187,3],[187,3],[203,3],[203,3],[200,1],[200,1],[212,1],[212,1],[234,1],[235,1],[235,1],[139,1],[139,1],[44,1],[236,1],[236,1],[236,1],[236,1],[46,1],[238,2],[241,2],[239,2],[245,2],[243,1],[243,3],[243,4],[247,2],[253,2],[253,2],[253,2],[251,2],[261,2],[259,2],[259,2],[259,2],[259,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[264,1],[77,3],[67,1],[67,2],[67,4],[67,4],[67,6],[67,8],[67,8],[67,2],[67,4],[67,2],[67,4],[67,3],[267,5],[267,5],[267,6],[288,4],[172,1],[172,2],[172,3],[172,1],[172,1],[172,1],[172,1],[172,1],[172,1],[255,1],[255,1],[255,1],[257,1],[257,1],[257,1],[291,1],[291,1],[291,1],[291,1],[55,1],[55,1],[307,1],[307,1],[237,1],[237,1],[311,5],[173,5],[313,1],[313,1],[313,1],[313,1],[313,1],[315,1],[315,1],[315,1],[185,1],[185,1],[185,1],[316,3],[319,3],[266,5],[320,1],[320,1],[320,1],[223,1],[223,1],[321,0],[321,1],[5,1],[5,1],[5,1],[9,0],[9,1],[322,1],[322,1],[10,0],[10,2],[18,0],[18,2],[22,0],[22,2],[26,0],[26,2],[27,0],[27,2],[30,0],[30,1],[323,1],[323,2],[33,1],[33,1],[34,0],[34,2],[35,0],[35,1],[37,0],[37,2],[40,1],[40,2],[324,1],[324,1],[42,0],[42,1],[50,0],[50,1],[51,0],[51,1],[54,0],[54,1],[56,0],[56,1],[58,0],[58,1],[59,0],[59,1],[60,0],[60,1],[61,0],[61,1],[65,1],[65,2],[71,1],[71,2],[74,1],[74,2],[88,0],[88,2],[90,0],[90,2],[91,1],[91,2],[92,0],[92,2],[95,1],[95,2],[97,0],[97,4],[99,0],[99,2],[101,0],[101,1],[102,0],[102,1],[103,1],[103,1],[104,0],[104,1],[106,1],[106,1],[106,1],[107,0],[107,1],[111,0],[111,1],[117,0],[117,1],[119,0],[119,2],[124,0],[124,1],[129,0],[129,1],[133,0],[133,1],[134,1],[134,1],[134,1],[136,0],[136,1],[137,0],[137,2],[140,0],[140,1],[141,0],[141,1],[142,0],[142,1],[144,0],[144,3],[146,0],[146,1],[148,0],[148,1],[149,0],[149,2],[152,0],[152,1],[153,0],[153,1],[155,0],[155,3],[157,0],[157,1],[162,0],[162,1],[167,0],[167,2],[168,0],[168,2],[169,1],[169,2],[170,0],[170,2],[175,0],[175,3],[177,0],[177,1],[178,0],[178,3],[180,0],[180,3],[181,0],[181,1],[183,0],[183,3],[184,0],[184,1],[189,0],[189,1],[191,0],[191,2],[194,0],[194,1],[198,0],[198,3],[201,0],[201,1],[204,0],[204,1],[206,0],[206,2],[208,1],[208,1],[210,0],[210,3],[213,0],[213,1],[215,0],[215,3],[217,0],[217,3],[339,1],[339,1],[339,1],[221,0],[221,1],[222,0],[222,1],[227,0],[227,3],[228,0],[228,1],[230,1],[230,2],[233,1],[233,2],[240,0],[240,2],[244,0],[244,2],[248,1],[248,1],[248,1],[248,1],[248,1],[248,1],[249,0],[249,1],[252,0],[252,2],[254,1],[254,1],[256,0],[256,2],[258,0],[258,2],[260,0],[260,2],[262,1],[262,1],[275,1],[275,1],[275,1],[275,1],[275,1],[278,0],[278,1],[281,0],[281,1],[282,1],[282,1],[284,0],[284,1],[286,0],[286,1],[287,0],[287,1]],performAction:function(nt,dt,_t,Pt,Nt,me,Da){var we=me.length-1;switch(Nt){case 1:if(me[we-1]=me[we-1]||{},Xt.base&&(me[we-1].base=Xt.base),Xt.base="",me[we-1].prefixes=Xt.prefixes,Xt.prefixes=null,Xt.pathOnly){if(me[we-1].type==="path"||"termType"in me[we-1])return me[we-1];throw new Error("Received full SPARQL query in path only mode")}else if(me[we-1].type==="path"||"termType"in me[we-1])throw new Error("Received only path in full SPARQL mode");if(me[we-1].type==="update"){const Ht={};for(const yr of me[we-1].updates)if(yr.updateType==="insert"){const kt={};for(const un of yr.insert)if(un.type==="bgp"||un.type==="graph")for(const qn of un.triples)qn.subject.termType==="BlankNode"&&(kt[qn.subject.value]=!0),qn.predicate.termType==="BlankNode"&&(kt[qn.predicate.value]=!0),qn.object.termType==="BlankNode"&&(kt[qn.object.value]=!0);for(const un of Object.keys(kt)){if(Ht[un])throw new Error("Detected reuse blank node across different INSERT DATA clauses");Ht[un]=!0}}}return me[we-1];case 2:this.$={...me[we-1],...me[we],type:"query"};break;case 4:Xt.base=Bl(me[we]);break;case 5:Xt.prefixes||(Xt.prefixes={}),me[we-1]=me[we-1].substr(0,me[we-1].length-1),me[we]=Bl(me[we]),Xt.prefixes[me[we-1]]=me[we];break;case 6:this.$={...me[we-3],...fs(me[we-2]),...me[we-1],...me[we]};break;case 7:if(!Xt.skipValidation&&(ps(me[we-3].variables.map(yr=>Fb(yr.expression))).some(yr=>yr.aggregation==="count"&&!(yr.expression instanceof vo))||me[we].group)){for(const yr of me[we-3].variables)if(yr.termType==="Variable"){if(!me[we].group||!me[we].group.map(kt=>vc(kt)).includes(vc(yr)))throw Error("Projection of ungrouped variable (?"+vc(yr)+")")}else if(Fb(yr.expression).length===0){const kt=DN(yr.expression);for(const un of kt)if(!me[we].group||!me[we].group.map||!me[we].group.map(qn=>vc(qn)).includes(vc(un)))throw Error("Use of ungrouped variable in projection of operation (?"+vc(un)+")")}}const _o=me[we-1].where.filter(Ht=>Ht.type==="query");if(_o.length>0){const Ht=me[we-3].variables.filter(kt=>kt.variable&&kt.variable.value).map(kt=>kt.variable.value),yr=ps(_o.map(kt=>kt.variables)).map(kt=>kt.value||kt.variable.value);for(const kt of Ht)if(yr.indexOf(kt)>=0)throw Error("Target id of 'AS' (?"+kt+") already used in subquery")}this.$=an(me[we-3],fs(me[we-2]),me[we-1],me[we]);break;case 8:this.$=an({queryType:"CONSTRUCT",template:me[we-3]},fs(me[we-2]),me[we-1],me[we]);break;case 9:this.$=an({queryType:"CONSTRUCT",template:me[we-2]=me[we-2]?me[we-2].triples:[]},fs(me[we-5]),{where:[{type:"bgp",triples:hc([],me[we-2])}]},me[we]);break;case 10:this.$=an({queryType:"DESCRIBE",variables:me[we-3]==="*"?[new vo]:me[we-3]},fs(me[we-2]),me[we-1],me[we]);break;case 11:this.$=an({queryType:"ASK"},fs(me[we-2]),me[we-1],me[we]);break;case 12:this.$=an(me[we-1],{variables:[new vo]});break;case 13:const Lb=me[we].map(Ht=>Ht.value||Ht.variable.value),Zi=Pb(Lb);if(Zi.length>0)throw Error("Two or more of the resulting columns have the same name (?"+Zi[0]+")");this.$=an(me[we-1],{variables:me[we]});break;case 14:this.$=an({queryType:"SELECT"},me[we]&&(me[we-1]=ha(me[we]),me[we]={},me[we][me[we-1]]=!0,me[we]));break;case 16:case 27:this.$=yc(me[we-3],{variable:me[we-1]});break;case 17:case 18:this.$=an(me[we-3],me[we-2],me[we-1],me[we],{type:"query"});break;case 19:case 58:this.$={iri:me[we],named:!!me[we-1]};break;case 20:this.$={where:me[we].patterns};break;case 21:this.$=an(me[we-1],me[we]);break;case 22:this.$=an(me[we-2],me[we-1],me[we]);break;case 23:this.$={group:me[we]};break;case 24:case 25:case 28:case 31:case 33:case 34:this.$=yc(me[we]);break;case 26:this.$=yc(me[we-1]);break;case 29:this.$={having:me[we]};break;case 30:this.$={order:me[we]};break;case 32:this.$=yc(me[we],{descending:!0});break;case 35:this.$={limit:bc(me[we])};break;case 36:this.$={offset:bc(me[we])};break;case 37:this.$={limit:bc(me[we-2]),offset:bc(me[we])};break;case 38:this.$={limit:bc(me[we]),offset:bc(me[we-2])};break;case 39:case 43:this.$={type:"values",values:me[we]};break;case 40:case 84:this.$=me[we-1].map(Ht=>({[me[we-3]]:Ht}));break;case 41:case 85:this.$=me[we-1].map(()=>({}));break;case 42:case 86:var Du=me[we-4].length;me[we-4]=me[we-4].map(B1),this.$=me[we-1].map(function(Ht){if(Ht.length!==Du)throw Error("Inconsistent VALUES length");for(var yr={},kt=0;kt<Du;kt++)yr["?"+me[we-4][kt].value]=Ht[kt];return yr});break;case 44:case 65:case 100:case 126:case 175:this.$=me[we-1];break;case 45:this.$={type:"update",updates:ds(me[we-2],me[we-1])};break;case 46:this.$=an({type:"load",silent:!!me[we-2],source:me[we-1]},me[we]&&{destination:me[we]});break;case 47:this.$={type:ha(me[we-2]),silent:!!me[we-1],graph:me[we]};break;case 48:this.$={type:ha(me[we-4]),silent:!!me[we-3],source:me[we-2],destination:me[we]};break;case 49:this.$={type:"create",silent:!!me[we-2],graph:{type:"graph",name:me[we]}};break;case 50:this.$={updateType:"insert",insert:jb(me[we])};break;case 51:this.$={updateType:"delete",delete:Mb(jb(me[we]))};break;case 52:this.$={updateType:"deletewhere",delete:Mb(me[we])};break;case 53:this.$={updateType:"insertdelete",...me[we-4],...me[we-3],...fs(me[we-2],"using"),where:me[we].patterns};break;case 54:case 57:case 62:case 167:case 191:case 236:this.$=me[we];break;case 55:this.$={delete:Mb(me[we-1]),insert:me[we]||[]};break;case 56:this.$={delete:[],insert:me[we]};break;case 59:this.$={graph:me[we]};break;case 60:this.$={type:"graph",default:!0};break;case 61:case 63:this.$={type:"graph",name:me[we]};break;case 64:this.$={[ha(me[we])]:!0};break;case 66:this.$=me[we-1]?Wi(me[we],[me[we-1]]):Wi(me[we]);break;case 67:var Ql=an(me[we-3]||{triples:[]},{type:"graph",name:me[we-5]});this.$=me[we]?[Ql,me[we]]:[Ql];break;case 68:case 73:this.$={type:"bgp",triples:Wi(me[we-2],[me[we-1]])};break;case 69:this.$={type:"group",patterns:[me[we-1]]};break;case 70:for(const Ht of me[we-1].filter(yr=>yr.type==="bind")){const yr=me[we-1].indexOf(Ht),kt=new Set;for(const un of me[we-1].slice(0,yr))(un.type==="group"||un.type==="bgp")&&FN(un).forEach(qn=>kt.add(qn));if(kt.has(Ht.variable.value))throw Error("Variable used to bind is already bound (?"+Ht.variable.value+")")}this.$={type:"group",patterns:me[we-1]};break;case 71:this.$=me[we-1]?Wi([me[we-1]],me[we]):Wi(me[we]);break;case 72:this.$=me[we]?[me[we-2],me[we]]:me[we-2];break;case 75:this.$=an(me[we],{type:"optional"});break;case 76:this.$=an(me[we],{type:"minus"});break;case 77:this.$=an(me[we],{type:"graph",name:me[we-1]});break;case 78:this.$=an(me[we],{type:"service",name:me[we-1],silent:!!me[we-2]});break;case 79:this.$={type:"filter",expression:me[we]};break;case 80:this.$={type:"bind",variable:me[we-1],expression:me[we-3]};break;case 89:this.$=_c(me[we]);break;case 90:this.$=void 0;break;case 91:this.$=me[we-1].length?{type:"union",patterns:Wi(me[we-1].map(Q1),[Q1(me[we])])}:me[we];break;case 95:this.$={...me[we],function:me[we-1]};break;case 96:this.$={type:"functionCall",args:[]};break;case 97:this.$={type:"functionCall",args:ds(me[we-2],me[we-1]),distinct:!!me[we-3]};break;case 98:case 115:case 128:case 247:case 249:case 251:case 253:case 255:case 263:case 267:case 297:case 299:case 303:case 307:case 328:case 341:case 349:case 355:case 361:case 367:case 369:case 373:case 375:case 379:case 381:case 385:case 391:case 395:case 401:case 405:case 409:case 411:case 420:case 428:case 430:case 440:case 444:case 446:case 448:this.$=[];break;case 99:this.$=ds(me[we-2],me[we-1]);break;case 101:this.$=Wi(me[we-2],[me[we-1]]);break;case 102:case 112:this.$=Ul(me[we].map(Ht=>an(wi(me[we-1]),Ht)));break;case 103:this.$=Ul(hc(me[we].map(Ht=>an(wi(me[we-1].entity),Ht)),me[we-1].triples));break;case 105:this.$=Wi([me[we-1]],me[we]);break;case 106:this.$=Wi(me[we]);break;case 107:this.$=k1(me[we-1],me[we]);break;case 109:case 237:this.$=Xt.factory.namedNode(TN);break;case 110:case 118:this.$=ds(me[we-1],me[we]);break;case 111:this.$=me[we]?{annotation:me[we],object:me[we-1]}:me[we-1];break;case 113:this.$=me[we]?Ul(hc(me[we].map(Ht=>an(wi(me[we-1].entity),Ht)),me[we-1].triples)):me[we-1].triples;break;case 114:this.$=k1(...me[we-1],me[we]);break;case 116:this.$=k1(...me[we]);break;case 117:case 159:case 163:this.$=[me[we-1],me[we]];break;case 119:this.$=me[we]?{object:me[we-1],annotation:me[we]}:me[we-1];break;case 120:this.$=me[we-1].length?mc("|",ds(me[we-1],me[we])):me[we];break;case 121:this.$=me[we-1].length?mc("/",ds(me[we-1],me[we])):me[we];break;case 122:this.$=me[we]?mc(me[we],[me[we-1]]):me[we-1];break;case 123:this.$=me[we-1]?mc(me[we-1],[me[we]]):me[we];break;case 125:case 131:this.$=mc(me[we-1],[me[we]]);break;case 129:this.$=mc("|",ds(me[we-2],me[we-1]));break;case 132:case 134:this.$=gc(me[we-1]);break;case 133:case 135:this.$=n8(me[we-1]);break;case 140:this.$={entity:me[we],triples:[]};break;case 145:this.$=B1(me[we]);break;case 149:this.$=Xt.factory.namedNode(wN);break;case 151:case 153:case 158:case 162:this.$=U1(me[we-1],me[we]);break;case 152:this.$=["||",me[we]];break;case 154:this.$=["&&",me[we]];break;case 156:this.$=Ln(me[we-1],[me[we-2],me[we]]);break;case 157:this.$=Ln(me[we-2]?"notin":"in",[me[we-3],me[we]]);break;case 160:this.$=["+",U1(me[we-1],me[we])];break;case 161:var Tc=Yi(me[we-1].value.replace("-",""),me[we-1].datatype);this.$=["-",U1(Tc,me[we])];break;case 164:this.$=Ln("UPLUS",[me[we]]);break;case 165:this.$=Ln(me[we-1],[me[we]]);break;case 166:this.$=Ln("UMINUS",[me[we]]);break;case 177:this.$=Ln(ha(me[we-1]));break;case 178:this.$=Ln(ha(me[we-3]),[me[we-1]]);break;case 179:this.$=_c(Ln(ha(me[we-3]),[me[we-1]]));break;case 180:this.$=Ln(ha(me[we-5]),[me[we-3],me[we-1]]);break;case 181:this.$=Ln(ha(me[we-7]),[me[we-5],me[we-3],me[we-1]]);break;case 182:this.$=_c(Ln(ha(me[we-7]),[me[we-5],me[we-3],me[we-1]]));break;case 183:this.$=Ln(ha(me[we-1]),me[we]);break;case 184:this.$=Ln("bound",[B1(me[we-1])]);break;case 185:this.$=Ln(me[we-1],[]);break;case 186:this.$=Ln(me[we-3],[me[we-1]]);break;case 187:this.$=Ln(me[we-2]?"notexists":"exists",[Q1(me[we])]);break;case 188:case 189:this.$=yc(me[we-1],{type:"aggregate",aggregation:ha(me[we-4]),distinct:!!me[we-2]});break;case 190:this.$=yc(me[we-2],{type:"aggregate",aggregation:ha(me[we-5]),distinct:!!me[we-3],separator:typeof me[we-1]=="string"?me[we-1]:" "});break;case 192:this.$=Yi(me[we]);break;case 193:this.$=r8(me[we-1],ha(me[we].substr(1)));break;case 194:this.$=Yi(me[we-2],me[we]);break;case 195:case 204:this.$=Yi(me[we],SN);break;case 196:case 205:this.$=Yi(me[we],EN);break;case 197:case 206:this.$=Yi(ha(me[we]),AN);break;case 200:this.$=Yi(me[we].toLowerCase(),t8);break;case 201:this.$=Yi(me[we].substr(1),SN);break;case 202:this.$=Yi(me[we].substr(1),EN);break;case 203:this.$=Yi(me[we].substr(1).toLowerCase(),AN);break;case 207:case 208:this.$=H1(me[we],1);break;case 209:case 210:this.$=H1(me[we],3);break;case 211:this.$=Xt.factory.namedNode(Bl(me[we]));break;case 213:var Cb=me[we].indexOf(":"),Qr=me[we].substr(0,Cb),ai=Xt.prefixes[Qr];if(!ai)throw new Error("Unknown prefix: "+Qr);var Si=Bl(ai+me[we].substr(Cb+1));this.$=Xt.factory.namedNode(Si);break;case 214:if(me[we]=me[we].substr(0,me[we].length-1),!(me[we]in Xt.prefixes))throw new Error("Unknown prefix: "+me[we]);var Si=Bl(Xt.prefixes[me[we]]);this.$=Xt.factory.namedNode(Si);break;case 215:this.$=Iu(me[we].replace(/^(_:)/,""));break;case 216:this.$=Iu();break;case 217:case 218:case 232:this.$=_c(V1(me[we-3],me[we-2],me[we-1]));break;case 230:case 231:this.$=_c(me[we-1]);break;case 248:case 250:case 252:case 254:case 256:case 260:case 264:case 268:case 270:case 292:case 294:case 296:case 298:case 300:case 302:case 304:case 306:case 329:case 342:case 356:case 368:case 370:case 372:case 374:case 392:case 402:case 425:case 427:case 429:case 431:case 441:case 445:case 447:case 449:me[we-1].push(me[we]);break;case 259:case 269:case 291:case 293:case 295:case 301:case 305:case 371:case 424:case 426:this.$=[me[we]];break;case 308:me[we-3].push(me[we-2]);break;case 350:case 362:case 376:case 380:case 382:case 386:case 396:case 406:case 410:case 412:case 421:me[we-2].push(me[we-1]);break}},table:[e(u,n,{3:1,4:2,10:3}),{1:[3]},e(r,[2,307],{5:4,7:5,321:6,214:7,8:8,96:9,215:10,17:11,21:12,97:16,38:17,6:[2,238],13:t,16:t,45:t,197:t,224:t,229:t,308:t,24:[1,13],32:[1,14],36:[1,15],41:i}),e([6,13,16,24,32,36,41,45,100,110,113,115,116,123,126,131,197,224,229,308,329,330,331,332,333],[2,3],{322:19,11:20,14:21,12:[1,22],15:[1,23]}),{6:[1,24]},{6:[2,240]},{6:[2,241]},{6:[2,242]},{6:[2,243],9:25,84:26,85:o},{6:[2,239]},e(l,[2,411],{216:28,217:29}),e(s,[2,249],{18:30}),e(s,[2,251],{22:31}),e(c,[2,255],{25:32,27:33,29:[1,34]}),{13:d,16:f,33:35,39:[1,37],44:39,55:40,87:p,139:38,307:43,308:h,323:36},e(s,[2,267],{37:46}),e(g,[2,326],{98:47,103:49,106:50,117:55,130:61,100:[1,48],110:[1,51],113:[1,52],115:[1,53],116:[1,54],131:[1,62],329:[1,56],330:[1,57],331:[1,58],332:[1,59],333:[1,60]}),{39:[1,63],40:64,43:65,44:66,45:v,87:p},e(m,[2,273],{42:68,324:69,325:[1,70],326:[1,71]}),e(u,[2,248]),e(u,[2,245]),e(u,[2,246]),{13:[1,72]},{16:[1,73]},{1:[2,1]},{6:[2,2]},{6:[2,244]},{45:[1,77],85:[1,78],86:74,87:[1,75],89:[1,76]},e([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312],[2,120],{337:[1,79]}),e(T,[2,418],{218:80,222:81,229:[1,82]}),{19:83,28:w,29:E,52:84,53:S,56:85},{19:88,28:w,29:E,52:89,53:S,56:85},e(s,[2,253],{26:90}),{28:[1,91],52:92,53:S},e(N,[2,385],{181:93,182:94,183:95,31:[2,383]}),e(j,[2,263],{34:96}),e(j,[2,261],{44:39,55:40,307:43,139:97,13:d,16:f,87:p,308:h}),e(j,[2,262]),e(q,[2,259]),e(O,[2,143]),e(O,[2,144]),e([6,13,16,28,29,31,39,45,47,48,53,63,70,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,197,224,229,231,232,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,314,317,318,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,145]),e(I,[2,211]),e(I,[2,212]),e(I,[2,213]),e(I,[2,214]),{19:98,28:w,29:E,52:99,53:S,56:85},{6:[2,309],99:100,193:[1,101]},e(A,[2,311],{101:102,328:[1,103]}),e(P,[2,317],{104:104,328:[1,105]}),e(C,[2,322],{107:106,328:[1,107]}),{111:108,112:[2,324],328:[1,109]},{29:B,114:110},{29:B,114:112},{29:B,114:113},{118:114,123:[1,115],125:116,126:H},e(V,[2,315]),e(V,[2,316]),e(G,[2,319]),e(G,[2,320]),e(G,[2,321]),e(g,[2,327]),{13:d,16:f,55:118,307:43,308:h},e(s,[2,12]),e(s,[2,13],{44:66,43:119,45:v,87:p}),e(Z,[2,269]),e(Z,[2,15]),{13:d,16:f,44:136,45:ae,46:120,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(m,[2,14]),e(m,[2,274]),e(m,[2,271]),e(m,[2,272]),e(u,[2,4]),{13:[1,177]},e(Pe,[2,39]),{29:[1,178]},{29:[1,179]},{87:[1,181],91:180},{45:[1,187],87:[1,185],89:[1,186],93:182,165:183,166:184},e(l,[2,410]),e([6,13,16,45,48,82,87,89,231,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,337],[2,121],{338:[1,188]}),{13:d,16:f,45:[1,193],55:194,197:Fe,219:189,220:190,223:191,224:[1,192],307:43,308:h},e(T,[2,419]),e(R,k,{20:196,59:197,69:198,70:K}),e(s,[2,250]),{29:de,57:200},e(A,[2,279],{54:202,327:[1,203]}),{29:[2,282]},e(ge,Ue,{23:204,58:205,62:206,63:je}),e(s,[2,252]),{19:208,28:w,29:E,52:209,53:S,56:85},{29:[1,210]},e(c,[2,256]),{31:[1,211]},{31:[2,384]},{13:d,16:f,44:215,45:ze,55:220,82:W,87:p,89:at,145:212,172:221,185:213,187:214,231:fe,236:216,237:222,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,309:Te,310:qe,311:217,312:it},e(Me,[2,265],{56:85,35:227,52:228,19:229,28:w,29:E,53:S}),e(q,[2,260]),e(ge,Ue,{58:205,62:206,23:230,63:je}),e(s,[2,268]),{6:[2,45]},e(u,n,{10:3,4:231}),{13:d,16:f,55:232,307:43,308:h},e(A,[2,312]),{105:233,112:st,122:234,132:[1,237],134:235,327:[1,238],334:[1,239]},e(P,[2,318]),e(A,tt,{108:240,133:242,112:Ot,132:yt}),e(C,[2,323]),{112:[1,244]},{112:[2,325]},e(bt,[2,50]),e(N,Tt,{135:245,136:246,143:247,144:248,31:xt,112:xt}),e(bt,[2,51]),e(bt,[2,52]),e(wt,[2,328],{119:249}),{29:B,114:250},e(wt,[2,56]),{29:B,114:251},e(g,[2,59]),e(Z,[2,270]),{47:[1,252]},e(gt,[2,150]),e(lr,[2,428],{240:253}),e(ht,[2,430],{244:254}),e(ht,[2,155],{248:255,249:256,250:[2,438],290:[1,257],341:[1,258],342:[1,259],343:[1,260],344:[1,261],345:[1,262],346:[1,263]}),e(Re,[2,440],{252:264}),e(Qe,[2,448],{260:265}),{13:d,16:f,44:136,45:ae,55:133,67:132,68:134,77:131,82:W,87:p,172:135,255:154,257:155,264:266,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{13:d,16:f,44:136,45:ae,55:133,67:132,68:134,77:131,82:W,87:p,172:135,255:154,257:155,264:267,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{13:d,16:f,44:136,45:ae,55:133,67:132,68:134,77:131,82:W,87:p,172:135,255:154,257:155,264:268,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(Qe,[2,167]),e(Qe,[2,168]),e(Qe,[2,169]),e(Qe,[2,170],{176:269,45:ke,89:vt}),e(Qe,[2,171]),e(Qe,[2,172]),e(Qe,[2,173]),e(Qe,[2,174]),{13:d,16:f,44:136,45:ae,46:272,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(St,[2,176]),{89:[1,273]},{45:[1,274]},{45:[1,275]},{45:[1,276]},{45:[1,277]},{45:[1,278]},{45:Qt,89:Tr,179:279},{45:[1,282]},{45:[1,284],89:[1,283]},{279:[1,285]},e(pr,[2,192],{292:[1,286],293:[1,287]}),e(pr,[2,195]),e(pr,[2,196]),e(pr,[2,197]),e(pr,[2,198]),e(pr,[2,199]),e(pr,[2,200]),{13:d,16:f,44:39,55:40,82:W,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,320:288},{45:[1,292]},{45:[1,293]},{45:[1,294]},e(aa,[2,452]),e(aa,[2,453]),e(aa,[2,454]),e(aa,[2,455]),e(aa,[2,456]),{279:[2,458]},e(hr,[2,207]),e(hr,[2,208]),e(hr,[2,209]),e(hr,[2,210]),e(pr,[2,201]),e(pr,[2,202]),e(pr,[2,203]),e(pr,[2,204]),e(pr,[2,205]),e(pr,[2,206]),e(u,[2,5]),e(Ir,[2,297],{88:295}),e(fa,[2,299],{90:296}),{48:[1,297],87:[1,298]},e(Or,[2,301]),e(Pe,[2,43]),e(Pe,[2,82]),e(Pe,[2,83]),{29:[1,299]},{29:[1,300]},{87:[1,302],169:301},e(l,[2,412]),e(xn,[2,123]),e(xn,[2,416],{221:303,339:304,39:[1,306],263:[1,307],340:[1,305]}),e(hn,[2,124]),{13:d,16:f,45:[1,311],55:194,89:[1,310],197:Fe,223:312,225:308,226:309,229:_i,307:43,308:h},e(l,t,{215:10,214:314}),e(hn,[2,236]),e(hn,[2,237]),e(Rn,[2,6]),e(yo,[2,287],{60:315,72:316,73:[1,317]}),e(R,[2,286]),{13:d,16:f,45:ae,55:323,67:321,68:322,71:318,77:320,79:319,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,307:43,308:h,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e([6,31,63,70,73,81,83,85],[2,20]),e(N,yn,{38:17,49:324,147:325,17:326,21:327,148:328,154:329,155:330,29:Nn,31:Nn,85:Nn,112:Nn,159:Nn,160:Nn,161:Nn,163:Nn,164:Nn,41:i}),{13:d,16:f,55:331,307:43,308:h},e(A,[2,280]),e(Rn,[2,7]),e(R,k,{59:197,69:198,20:332,70:K}),e(ge,[2,284]),{64:[1,333]},e(ge,Ue,{58:205,62:206,23:334,63:je}),e(s,[2,254]),e(N,Tt,{144:248,30:335,143:336,31:[2,257]}),e(s,[2,100]),{31:[2,387],184:337,335:[1,338]},{13:d,16:f,44:39,55:40,87:p,139:342,186:339,190:340,195:341,197:$r,307:43,308:h},e(mn,[2,389],{44:39,55:40,307:43,190:340,195:341,139:342,188:344,189:345,186:346,13:d,16:f,87:p,197:$r,308:h}),e(bn,[2,227]),e(bn,[2,228]),e(bn,[2,229]),{13:d,16:f,44:215,45:ze,55:220,82:W,87:p,89:at,172:221,185:351,187:350,200:348,230:347,231:fe,234:349,236:216,237:222,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,309:Te,310:qe,311:217,312:it},{13:d,16:f,44:39,55:40,87:p,139:342,186:352,190:340,195:341,197:$r,307:43,308:h},e(bn,[2,146]),e(bn,[2,147]),e(bn,[2,148]),e(bn,[2,149]),{13:d,16:f,44:354,55:355,82:W,87:p,172:357,237:356,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,309:Te,310:qe,311:358,312:it,313:353},e(Il,[2,215]),e(Il,[2,216]),e(ge,Ue,{58:205,62:206,23:359,63:je}),e(j,[2,264]),e(Me,[2,266]),e(Rn,[2,11]),e(r,[2,308],{6:[2,310]}),e(bt,[2,313],{102:360,120:361,121:[1,362]}),e(bt,[2,47]),e(bt,[2,63]),e(bt,[2,64]),{13:d,16:f,55:363,307:43,308:h},e(bt,[2,336]),e(bt,[2,337]),e(bt,[2,338]),{109:[1,364]},e(Dl,[2,60]),{13:d,16:f,55:365,307:43,308:h},e(A,[2,335]),{13:d,16:f,55:366,307:43,308:h},{31:[1,367]},e(zi,[2,341],{137:368}),e(zi,[2,340]),{13:d,16:f,44:215,45:ze,55:220,82:W,87:p,89:at,145:369,172:221,185:213,187:214,231:fe,236:216,237:222,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,309:Te,310:qe,311:217,312:it},{28:[1,370],127:371,128:[1,372]},e(wt,[2,330],{124:373,125:374,126:H}),e(wt,[2,57]),{44:375,87:p},e(gt,[2,151],{241:376,242:[1,377]}),e(lr,[2,153],{245:378,246:[1,379]}),{13:d,16:f,44:136,45:ae,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,247:380,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{250:[1,381]},e(nn,[2,432]),e(nn,[2,433]),e(nn,[2,434]),e(nn,[2,435]),e(nn,[2,436]),e(nn,[2,437]),{250:[2,439]},e([47,48,193,242,246,250,272,290,341,342,343,344,345,346],[2,158],{253:382,254:383,255:384,257:385,263:[1,386],265:[1,387],297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve}),e(Re,[2,162],{261:388,262:389,39:P1,338:Ia}),e(Qe,[2,164]),e(Qe,[2,165]),e(Qe,[2,166]),e(St,[2,95]),e(St,[2,96]),e(nn,[2,377],{177:392,325:[1,393]}),{48:[1,394]},e(St,[2,177]),{13:d,16:f,44:136,45:ae,46:395,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{13:d,16:f,44:136,45:ae,46:396,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{13:d,16:f,44:136,45:ae,46:397,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{13:d,16:f,44:136,45:ae,46:398,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{13:d,16:f,44:136,45:ae,46:399,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(St,[2,183]),e(St,[2,98]),e(nn,[2,381],{180:400}),{87:[1,401]},e(St,[2,185]),{13:d,16:f,44:136,45:ae,46:402,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{29:de,57:403},e(pr,[2,193]),{13:d,16:f,55:404,307:43,308:h},{13:d,16:f,44:39,55:40,87:p,139:342,195:405,197:$r,307:43,308:h},e(Gi,[2,233]),e(Gi,[2,234]),e(Gi,[2,235]),e(j1,[2,459],{281:406,325:[1,407]}),e(nn,[2,463],{284:408,325:[1,409]}),e(nn,[2,465],{286:410,325:[1,411]}),{13:d,16:f,31:[1,412],55:414,82:W,171:413,172:415,173:416,174:dc,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:xu},{31:[1,419],89:[1,420]},{29:[1,421]},e(Or,[2,302]),e(Ir,[2,367],{167:422}),e(fa,[2,369],{168:423}),{48:[1,424],87:[1,425]},e(Or,[2,371]),e(xn,[2,122]),e(xn,[2,417]),e(xn,[2,413]),e(xn,[2,414]),e(xn,[2,415]),e(hn,[2,125]),e(hn,[2,127]),e(hn,[2,128]),e(M1,[2,420],{227:426}),e(hn,[2,130]),{13:d,16:f,55:194,197:Fe,223:427,307:43,308:h},{48:[1,428]},e(Ru,[2,289],{61:429,80:430,81:[1,431],83:[1,432]}),e(yo,[2,288]),{64:[1,433]},e(R,[2,29],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:434,13:d,16:f,45:ae,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,276:ee,277:_,279:F,280:D,283:L,285:Q,308:h,346:he,347:ve,348:ye,349:re,350:Ne,351:Le}),e(rs,[2,293]),e(C1,[2,92]),e(C1,[2,93]),e(C1,[2,94]),{45:ke,89:vt,176:269},{31:[1,435]},{31:[1,436]},{19:437,28:w,29:E,56:85},{19:438,28:w,29:E,56:85},e(mo,[2,355],{149:439}),e(mo,[2,354]),{13:d,16:f,44:215,45:Fl,55:220,82:W,87:p,89:at,156:440,172:221,185:441,203:442,231:fc,236:216,237:222,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,309:Te,310:qe,311:217,312:it},e(j,[2,19]),e(Ru,[2,21]),{13:d,16:f,44:450,45:vN,55:323,65:445,66:446,67:447,68:448,87:p,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,307:43,308:h,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(Rn,[2,8]),{31:[1,451]},{31:[2,258]},{31:[2,101]},e(N,[2,386],{31:[2,388]}),e(mn,[2,102]),e(ns,[2,391],{191:452}),e(N,[2,395],{196:453,198:454}),e(N,[2,108]),e(N,[2,109]),e(mn,[2,103]),e(mn,[2,104]),e(mn,[2,390]),{13:d,16:f,44:215,45:ze,48:[1,455],55:220,82:W,87:p,89:at,172:221,185:351,187:350,200:456,231:fe,234:349,236:216,237:222,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,309:Te,310:qe,311:217,312:it},e(as,[2,424]),e($i,[2,136]),e($i,[2,137]),e(Pl,[2,140]),{232:[1,457]},{13:d,16:f,44:39,55:40,87:p,139:342,195:458,197:$r,307:43,308:h},e(Gi,[2,219]),e(Gi,[2,220]),e(Gi,[2,221]),e(Gi,[2,222]),e(Gi,[2,223]),e(Rn,[2,10]),e(bt,[2,46]),e(bt,[2,314]),{112:st,122:459},e(bt,[2,62]),e(A,tt,{133:242,108:460,112:Ot,132:yt}),e(Dl,[2,61]),e(bt,[2,49]),e([6,28,126,128,193],[2,65]),{31:[2,66],112:[1,462],138:461},e(zi,[2,351],{146:463,335:[1,464]}),{29:de,57:465},e(wt,[2,329]),e(A,[2,332],{129:466,327:[1,467]}),e(wt,[2,55]),e(wt,[2,331]),{48:[1,468]},e(lr,[2,429]),{13:d,16:f,44:136,45:ae,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,239:469,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(ht,[2,431]),{13:d,16:f,44:136,45:ae,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,243:470,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(ht,[2,156]),{45:Qt,89:Tr,179:471},e(Re,[2,441]),{13:d,16:f,44:136,45:ae,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,251:472,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(Qe,[2,444],{256:473}),e(Qe,[2,446],{258:474}),e(nn,[2,442]),e(nn,[2,443]),e(Qe,[2,449]),{13:d,16:f,44:136,45:ae,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,255:154,257:155,259:475,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(nn,[2,450]),e(nn,[2,451]),e(nn,[2,379],{178:476}),e(nn,[2,378]),e([6,13,16,29,31,39,45,47,48,73,76,78,81,82,83,85,87,89,112,159,160,161,163,164,193,231,242,246,250,263,265,268,269,270,271,272,273,274,276,277,279,280,283,285,290,294,295,296,297,298,299,300,301,302,303,304,305,306,308,309,310,312,335,338,341,342,343,344,345,346,347,348,349,350,351],[2,175]),{48:[1,477]},{48:[1,478]},{272:[1,479]},{272:[1,480]},{272:[1,481]},{13:d,16:f,44:136,45:ae,46:482,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{48:[1,483]},{48:[1,484]},e(St,[2,187]),e(pr,[2,194]),{13:d,16:f,44:39,55:40,82:W,87:p,139:289,172:291,255:154,257:155,266:290,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,320:485},{13:d,16:f,39:[1,487],44:136,45:ae,46:488,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,282:486,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(j1,[2,460]),{13:d,16:f,44:136,45:ae,46:489,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(nn,[2,464]),{13:d,16:f,44:136,45:ae,46:490,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(nn,[2,466]),e(Pe,[2,40]),e(Ir,[2,298]),e(is,[2,87]),e(is,[2,88]),e(is,[2,89]),e(is,[2,90]),{13:d,16:f,55:492,82:W,172:493,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,311:494,312:it,315:491},e(Pe,[2,41]),e(fa,[2,300]),e(Xi,[2,303],{92:495}),{13:d,16:f,31:[1,496],55:414,82:W,171:497,172:415,173:416,174:dc,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:xu},{31:[1,498],89:[1,499]},{29:[1,500]},e(Or,[2,372]),{13:d,16:f,48:[2,422],55:194,197:Fe,223:312,226:502,228:501,229:_i,307:43,308:h},e(hn,[2,131]),e(hn,[2,126]),e(Ru,[2,22]),e(Ru,[2,290]),{82:[1,503]},{82:[1,504]},{13:d,16:f,44:510,45:ae,55:323,67:321,68:322,74:505,75:506,76:us,77:320,78:L1,79:509,87:p,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,307:43,308:h,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(rs,[2,294]),e(Rb,[2,69]),e(Rb,[2,70]),e(R,k,{59:197,69:198,20:511,70:K}),e(ge,Ue,{58:205,62:206,23:512,63:je}),{29:[2,375],31:[2,71],84:522,85:o,112:[1,518],150:513,151:514,158:515,159:[1,516],160:[1,517],161:[1,519],163:[1,520],164:[1,521],175:523},e(mo,[2,363],{157:524,335:[1,525]}),e(l,t,{215:10,202:526,205:527,208:528,214:529,44:530,87:p}),e(jl,[2,399],{215:10,205:527,208:528,214:529,44:530,204:531,202:532,13:t,16:t,45:t,197:t,224:t,229:t,308:t,87:p}),{13:d,16:f,44:215,45:Fl,55:220,82:W,87:p,89:at,172:221,185:351,203:536,212:534,231:fc,233:533,234:535,236:216,237:222,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,309:Te,310:qe,311:217,312:it},e(l,t,{215:10,205:527,208:528,214:529,44:530,202:537,87:p}),e(ge,[2,23],{307:43,267:139,275:146,278:149,55:323,67:447,68:448,44:450,66:538,13:d,16:f,45:vN,87:p,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,276:ee,277:_,279:F,280:D,283:L,285:Q,308:h,346:he,347:ve,348:ye,349:re,350:Ne,351:Le}),e(Ti,[2,291]),e(Ti,[2,24]),e(Ti,[2,25]),{13:d,16:f,44:136,45:ae,46:539,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(Ti,[2,28]),e(ge,Ue,{58:205,62:206,23:540,63:je}),e([31,112,232,318,335],[2,105],{192:541,193:[1,542]}),e(ns,[2,107]),{13:d,16:f,44:215,45:ze,55:220,82:W,87:p,89:at,172:221,185:351,187:350,199:543,200:544,231:fe,234:349,236:216,237:222,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,309:Te,310:qe,311:217,312:it},e(Ki,[2,132]),e(as,[2,425]),e(Ki,[2,133]),{13:d,16:f,44:354,55:355,82:W,87:p,172:357,237:356,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,309:Te,310:qe,311:358,312:it,313:545},e(bt,[2,54]),e(bt,[2,48]),e(zi,[2,342]),{13:d,16:f,44:39,55:40,87:p,139:546,307:43,308:h},e(zi,[2,68]),e(N,[2,350],{31:Nb,112:Nb}),e(bt,[2,53]),{13:d,16:f,55:547,307:43,308:h},e(A,[2,333]),e(Z,[2,16]),e(lr,[2,152]),e(ht,[2,154]),e(ht,[2,157]),e(Re,[2,159]),e(Re,[2,160],{262:389,261:548,39:P1,338:Ia}),e(Re,[2,161],{262:389,261:549,39:P1,338:Ia}),e(Qe,[2,163]),{13:d,16:f,44:136,45:ae,46:550,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(St,[2,178]),e(St,[2,179]),{13:d,16:f,44:136,45:ae,46:551,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{13:d,16:f,44:136,45:ae,46:552,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{13:d,16:f,44:136,45:ae,46:553,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{48:[1,554],272:[1,555]},e(St,[2,184]),e(St,[2,186]),{314:[1,556]},{48:[1,557]},{48:[2,461]},{48:[2,462]},{48:[1,558]},{48:[2,467],193:[1,561],287:559,288:560},{13:d,16:f,55:194,197:Fe,223:562,307:43,308:h},e(os,[2,224]),e(os,[2,225]),e(os,[2,226]),{31:[1,563],45:Nu,94:564},e(Pe,[2,84]),e(Ir,[2,368]),e(Pe,[2,85]),e(fa,[2,370]),e(Xi,[2,373],{170:566}),{48:[1,567]},{48:[2,423],337:[1,568]},e(Ru,[2,35],{83:[1,569]}),e(Ru,[2,36],{81:[1,570]}),e(yo,[2,30],{307:43,267:139,275:146,278:149,77:320,67:321,68:322,55:323,79:509,44:510,75:571,13:d,16:f,45:ae,76:us,78:L1,87:p,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,276:ee,277:_,279:F,280:D,283:L,285:Q,308:h,346:he,347:ve,348:ye,349:re,350:Ne,351:Le}),e(bo,[2,295]),{45:ae,77:572},{45:ae,77:573},e(bo,[2,33]),e(bo,[2,34]),{31:[2,275],50:574,84:575,85:o},{31:[2,277],51:576,84:577,85:o},e(mo,[2,356]),e(Ml,[2,357],{152:578,335:[1,579]}),e(Ji,[2,74]),{29:de,57:580},{29:de,57:581},{13:d,16:f,44:39,55:40,87:p,139:582,307:43,308:h},e(Cl,[2,365],{162:583,328:[1,584]}),{13:d,16:f,45:ae,55:323,67:321,68:322,77:320,79:585,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,307:43,308:h,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{45:[1,586]},e(Ji,[2,81]),{29:de,57:587},e(mo,[2,73]),e(N,[2,362],{29:ni,31:ni,85:ni,112:ni,159:ni,160:ni,161:ni,163:ni,164:ni}),e(jl,[2,112]),e(ss,[2,401],{206:588}),e(N,[2,405],{209:589,210:590}),e(N,[2,403]),e(N,[2,404]),e(jl,[2,113]),e(jl,[2,400]),{13:d,16:f,44:215,45:Fl,48:[1,591],55:220,82:W,87:p,89:at,172:221,185:351,203:536,212:592,231:fc,234:535,236:216,237:222,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,309:Te,310:qe,311:217,312:it},e(as,[2,426]),e(Pl,[2,138]),e(Pl,[2,139]),{232:[1,593]},e(Ti,[2,292]),{47:[1,595],48:[1,594]},e(Rn,[2,9]),e(ns,[2,392]),e(ns,[2,393],{44:39,55:40,307:43,195:341,139:342,194:596,190:597,13:d,16:f,87:p,197:$r,308:h}),e(ns,[2,110],{272:[1,598]}),e(Kn,[2,397],{201:599,316:600,317:[1,601]}),{314:[1,602]},{29:[1,603]},e(wt,[2,58]),e(Qe,[2,445]),e(Qe,[2,447]),{48:[1,604],272:[1,605]},{48:[1,606]},{272:[1,607]},{272:[1,608]},e(St,[2,99]),e(nn,[2,382]),e([13,16,39,47,48,87,193,197,242,246,250,263,265,272,290,297,298,299,300,301,302,308,314,338,341,342,343,344,345,346],[2,232]),e(St,[2,188]),e(St,[2,189]),{48:[1,609]},{48:[2,468]},{289:[1,610]},{13:d,16:f,55:492,82:W,172:493,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,311:494,312:it,315:611},e(Pe,[2,42]),e(Xi,[2,304]),{13:d,16:f,55:414,82:W,95:612,171:613,172:415,173:416,174:dc,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:xu},{31:[1,614],45:Nu,94:615},e(hn,[2,129]),e(M1,[2,421]),{82:[1,616]},{82:[1,617]},e(bo,[2,296]),e(bo,[2,31]),e(bo,[2,32]),{31:[2,17]},{31:[2,276]},{31:[2,18]},{31:[2,278]},e(N,yn,{155:330,153:618,154:619,29:pa,31:pa,85:pa,112:pa,159:pa,160:pa,161:pa,163:pa,164:pa}),e(Ml,[2,358]),e(Ji,[2,75]),e(Ji,[2,76]),{29:de,57:620},{13:d,16:f,44:39,55:40,87:p,139:621,307:43,308:h},e(Cl,[2,366]),e(Ji,[2,79]),{13:d,16:f,44:136,45:ae,46:622,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(Ji,[2,91],{336:[1,623]}),e([29,31,85,112,159,160,161,163,164,232,318,335],[2,114],{207:624,193:[1,625]}),e(ss,[2,117]),{13:d,16:f,44:215,45:Fl,55:220,82:W,87:p,89:at,172:221,185:351,203:536,211:626,212:627,231:fc,234:535,236:216,237:222,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,309:Te,310:qe,311:217,312:it},e(bn,[2,134]),e(as,[2,427]),e(bn,[2,135]),e(Ti,[2,26]),{44:628,87:p},e(ns,[2,106]),e(ns,[2,394]),e(N,[2,396]),e(Kn,[2,111]),e(Kn,[2,398]),{13:d,16:f,44:39,55:40,87:p,139:342,186:629,190:340,195:341,197:$r,307:43,308:h},e(Il,[2,217]),e(N,Tt,{144:248,140:630,143:631,31:[2,343]}),e(St,[2,97]),e(nn,[2,380]),e(St,[2,180]),{13:d,16:f,44:136,45:ae,46:632,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},{13:d,16:f,44:136,45:ae,46:633,55:133,67:132,68:134,77:131,82:W,87:p,172:135,224:te,238:121,239:122,243:123,247:124,251:125,255:154,257:155,259:126,263:se,264:130,265:pe,266:137,267:139,268:le,269:Ee,270:Oe,271:Ie,273:Ae,274:be,275:146,276:ee,277:_,278:149,279:F,280:D,283:L,285:Q,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:J,346:he,347:ve,348:ye,349:re,350:Ne,351:Le},e(St,[2,190]),{290:[1,634]},{314:[1,635]},{13:d,16:f,48:[1,636],55:414,82:W,171:637,172:415,173:416,174:dc,255:154,257:155,291:150,294:Y,295:$,296:ue,297:ne,298:ce,299:Se,300:xe,301:Ce,302:Ve,303:Ke,304:Ye,305:oe,306:X,307:43,308:h,312:xu},e(Ll,[2,305]),e(Pe,[2,86]),e(Xi,[2,374]),e(Ru,[2,37]),e(Ru,[2,38]),e(mo,[2,72]),e(mo,[2,360]),e(Ji,[2,77]),{29:de,57:638},{47:[1,639]},{29:[2,376]},e(ss,[2,402]),e(ss,[2,115],{215:10,208:528,214:529,44:530,205:640,13:t,16:t,45:t,197:t,224:t,229:t,308:t,87:p}),e(ss,[2,118],{272:[1,641]}),e(go,[2,407],{213:642,319:643,317:[1,644]}),{48:[1,645]},{318:[1,646]},{31:[1,647]},{31:[2,344]},{48:[1,648]},{48:[1,649]},{291:650,303:Ke,304:Ye,305:oe,306:X},e(is,[2,218]),e(Xi,[2,44]),e(Ll,[2,306]),e(Ji,[2,78]),{44:651,87:p},e(ss,[2,116]),e(N,[2,406]),e(go,[2,119]),e(go,[2,408]),e(l,t,{215:10,205:527,208:528,214:529,44:530,202:652,87:p}),e(Ti,[2,27]),e(Kn,[2,230]),e(_N,[2,345],{141:653,335:[1,654]}),e(St,[2,181]),e(St,[2,182]),{48:[2,191]},{48:[1,655]},{318:[1,656]},e(N,Tt,{144:248,142:657,143:658,31:Ib,112:Ib}),e(_N,[2,346]),e(Ji,[2,80]),e(go,[2,231]),e(zi,[2,67]),e(zi,[2,348])],defaultActions:{5:[2,240],6:[2,241],7:[2,242],9:[2,239],24:[2,1],25:[2,2],26:[2,244],87:[2,282],94:[2,384],100:[2,45],109:[2,325],166:[2,458],263:[2,439],336:[2,258],337:[2,101],487:[2,461],488:[2,462],560:[2,468],574:[2,17],575:[2,276],576:[2,18],577:[2,278],623:[2,376],631:[2,344],650:[2,191]},parseError:function(nt,dt){if(dt.recoverable)this.trace(nt);else{var _t=new Error(nt);throw _t.hash=dt,_t}},parse:function(nt){var dt=this,_t=[0],Pt=[null],Nt=[],me=this.table,Da="",we=0,Du=0,Ql=2,Tc=1,Cb=Nt.slice.call(arguments,1),Qr=Object.create(this.lexer),ai={yy:{}};for(var Si in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Si)&&(ai.yy[Si]=this.yy[Si]);Qr.setInput(nt,ai.yy),ai.yy.lexer=Qr,ai.yy.parser=this,typeof Qr.yylloc>"u"&&(Qr.yylloc={});var _o=Qr.yylloc;Nt.push(_o);var Lb=Qr.options&&Qr.options.ranges;typeof ai.yy.parseError=="function"?this.parseError=ai.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var Zi=function(){var ys;return ys=Qr.lex()||Tc,typeof ys!="number"&&(ys=dt.symbols_[ys]||ys),ys},Ht,yr,kt,un,qn={},Vl,eu,jN,qb;;){if(yr=_t[_t.length-1],this.defaultActions[yr]?kt=this.defaultActions[yr]:((Ht===null||typeof Ht>"u")&&(Ht=Zi()),kt=me[yr]&&me[yr][Ht]),typeof kt>"u"||!kt.length||!kt[0]){var G1="";qb=[];for(Vl in me[yr])this.terminals_[Vl]&&Vl>Ql&&qb.push("'"+this.terminals_[Vl]+"'");Qr.showPosition?G1="Parse error on line "+(we+1)+`:
`+Qr.showPosition()+`
Expecting `+qb.join(", ")+", got '"+(this.terminals_[Ht]||Ht)+"'":G1="Parse error on line "+(we+1)+": Unexpected "+(Ht==Tc?"end of input":"'"+(this.terminals_[Ht]||Ht)+"'"),this.parseError(G1,{text:Qr.match,token:this.terminals_[Ht]||Ht,line:Qr.yylineno,loc:_o,expected:qb})}if(kt[0]instanceof Array&&kt.length>1)throw new Error("Parse Error: multiple actions possible at state: "+yr+", token: "+Ht);switch(kt[0]){case 1:_t.push(Ht),Pt.push(Qr.yytext),Nt.push(Qr.yylloc),_t.push(kt[1]),Ht=null,Du=Qr.yyleng,Da=Qr.yytext,we=Qr.yylineno,_o=Qr.yylloc;break;case 2:if(eu=this.productions_[kt[1]][1],qn.$=Pt[Pt.length-eu],qn._$={first_line:Nt[Nt.length-(eu||1)].first_line,last_line:Nt[Nt.length-1].last_line,first_column:Nt[Nt.length-(eu||1)].first_column,last_column:Nt[Nt.length-1].last_column},Lb&&(qn._$.range=[Nt[Nt.length-(eu||1)].range[0],Nt[Nt.length-1].range[1]]),un=this.performAction.apply(qn,[Da,Du,we,ai.yy,kt[1],Pt,Nt].concat(Cb)),typeof un<"u")return un;eu&&(_t=_t.slice(0,-1*eu*2),Pt=Pt.slice(0,-1*eu),Nt=Nt.slice(0,-1*eu)),_t.push(this.productions_[kt[1]][0]),Pt.push(qn.$),Nt.push(qn._$),jN=me[_t[_t.length-2]][_t[_t.length-1]],_t.push(jN);break;case 3:return!0}}return!0}},vo=U_e().Wildcard,cs="http://www.w3.org/1999/02/22-rdf-syntax-ns#",TN=cs+"type",ZP=cs+"first",e8=cs+"rest",wN=cs+"nil",pc="http://www.w3.org/2001/XMLSchema#",SN=pc+"integer",EN=pc+"decimal",AN=pc+"double",t8=pc+"boolean",ls="",q1="",ON="";function ha(ot){return ot.toLowerCase()}function ds(ot,nt){return ot.push(nt),ot}function hc(ot,nt){return ot.push.apply(ot,nt),ot}function an(ot){ot||(ot={});for(var nt=1,dt=arguments.length,_t;nt<dt&&(_t=arguments[nt]||{});nt++)for(var Pt in _t)ot[Pt]=_t[Pt];return ot}function Wi(){for(var ot=[],nt=0,dt=arguments.length;nt<dt;nt++)ot=ot.concat.apply(ot,arguments[nt]);return ot}function Bl(ot){if(ot[0]==="<"&&(ot=ot.substring(1,ot.length-1)),/^[a-z][a-z0-9.+-]*:/i.test(ot))return ot;if(!Xt.base)throw new Error("Cannot resolve relative IRI "+ot+" because no base IRI was set.");switch(ls!==Xt.base&&(ls=Xt.base,q1=ls.replace(/[^\/:]*$/,""),ON=ls.match(/^(?:[a-z]+:\/*)?[^\/]*/)[0]),ot[0]){case void 0:return ls;case"#":return ls+ot;case"?":return ls.replace(/(?:\?.*)?$/,ot);case"/":return ON+ot;default:return q1+ot}}function B1(ot){if(ot){var nt=ot[0];if(nt==="?"||nt==="$")return Xt.factory.variable(ot.substr(1))}return ot}function Ln(ot,nt){return{type:"operation",operator:ot,args:nt||[]}}function yc(ot,nt){var dt={expression:ot==="*"?new vo:ot};if(nt)for(var _t in nt)dt[_t]=nt[_t];return dt}function mc(ot,nt){return{type:"path",pathType:ot,items:nt}}function U1(ot,nt){for(var dt=0,_t=nt.length,Pt;dt<_t&&(Pt=nt[dt]);dt++)ot=Ln(Pt[0],[ot,Pt[1]]);return ot}function fs(ot,nt){var dt=[],_t=[],Pt=ot.length,Nt,me={};if(!Pt)return null;for(var Da=0;Da<Pt&&(Nt=ot[Da]);Da++)(Nt.named?_t:dt).push(Nt.iri);return me[nt||"from"]={default:dt,named:_t},me}function bc(ot){return parseInt(ot,10)}function Q1(ot){return ot.type==="group"&&ot.patterns.length===1?ot.patterns[0]:ot}function Yi(ot,nt){return nt&&nt.termType!=="NamedNode"&&(nt=Xt.factory.namedNode(nt)),Xt.factory.literal(ot,nt)}function r8(ot,nt){return Xt.factory.literal(ot,nt)}function V1(ot,nt,dt){if(!("termType"in nt))throw new Error("Nested triples cannot contain paths");return Xt.factory.quad(ot,nt,dt)}function wi(ot,nt,dt,_t){var Pt={};return ot!=null&&(Pt.subject=ot),nt!=null&&(Pt.predicate=nt),dt!=null&&(Pt.object=dt),_t!=null&&(Pt.annotations=_t),Pt}function Iu(ot){return typeof ot=="string"?ot.startsWith("e_")?Xt.factory.blankNode(ot):Xt.factory.blankNode("e_"+ot):Xt.factory.blankNode("g_"+xN++)}var xN=0;Xt._resetBlanks=function(){xN=0};var RN=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\(.)/g,NN={"\\":"\\","'":"'",'"':'"',t:"	",b:"\b",n:`
`,r:"\r",f:"\f"},IN=/[\uD800-\uDBFF]([^\uDC00-\uDFFF]|$)/,Db=String.fromCharCode;function H1(ot,nt){ot=ot.substring(nt,ot.length-nt);try{ot=ot.replace(RN,function(dt,_t,Pt,Nt){var me;if(_t){if(me=parseInt(_t,16),isNaN(me))throw new Error;return Db(me)}else if(Pt){if(me=parseInt(Pt,16),isNaN(me))throw new Error;return me<65535?Db(me):Db(55296+((me-=65536)>>10),56320+(me&1023))}else{var Da=NN[Nt];if(!Da)throw new Error;return Da}})}catch{return""}if(IN.exec(ot))throw new Error("Invalid unicode codepoint of surrogate pair without corresponding codepoint in "+ot);return ot}function gc(ot){var nt=Iu(),dt=nt,_t=[],Pt,Nt=[];ot.forEach(function(Du){_t.push(Du.entity),hc(Nt,Du.triples)});for(var me=0,Da=0,we=_t.length,Pt=Array(we*2);me<we;)Pt[Da++]=wi(dt,Xt.factory.namedNode(ZP),_t[me]),Pt[Da++]=wi(dt,Xt.factory.namedNode(e8),dt=++me<we?Iu():Xt.factory.namedNode(wN));return{entity:nt,triples:hc(Pt,Nt)}}function n8(ot){var nt=Iu();return{entity:nt,triples:ot.map(function(dt){return an(wi(nt),dt)})}}function k1(ot,nt,dt){var _t=[],Pt=[];return nt.forEach(function(Nt){let me=null;Nt.annotation&&(me=Nt.annotation,Nt=Nt.object),_t.push(wi(null,ot,Nt.entity,me)),hc(Pt,Nt.triples)}),Wi(_t,dt||[],Pt)}function vc(ot){return ot.variable?ot.variable.value:ot.value||ot.expression.value}function Fb(ot){if(!ot)return[];if(ot.type==="aggregate")return[ot];if(ot.type==="operation"){const nt=[];for(const dt of ot.args)nt.push(...Fb(dt));return nt}return[]}function DN(ot){const nt=new Set,dt=function(_t){_t&&(_t.termType==="Variable"?nt.add(_t):_t.type==="operation"&&_t.args.forEach(dt))};return dt(ot),nt}function ps(ot,nt=1,dt=[]){for(const _t of ot)nt>0&&_t instanceof Array?ps(_t,nt-1,dt):dt.push(_t);return dt}function hs(ot){return ot.termType==="Variable"}function FN(ot){if(ot.triples){const nt=[];for(const dt of ot.triples)hs(dt.subject)&&nt.push(dt.subject.value),hs(dt.predicate)&&nt.push(dt.predicate.value),hs(dt.object)&&nt.push(dt.object.value);return nt}else if(ot.patterns){const nt=[];for(const dt of ot.patterns)nt.push(...FN(dt));return nt}return[]}function Pb(ot){const nt=ot.slice().sort(),dt=[];for(let _t=0;_t<nt.length-1;_t++)nt[_t+1]==nt[_t]&&dt.push(nt[_t]);return dt}function _c(ot){if(!Xt.sparqlStar)throw new Error("SPARQL-star support is not enabled");return ot}function z1(ot,nt,dt){for(const _t of nt){const Pt=wi("subject"in _t?_t.subject:ot,_t.predicate,_t.object);dt.push(Pt),_t.annotations&&z1(V1(ot,_t.predicate,_t.object),_t.annotations,dt)}}function Ul(ot){if(Xt.sparqlStar){const nt=[];return ot.forEach(dt=>{const _t=wi(dt.subject,dt.predicate,dt.object);nt.push(_t),dt.annotations&&z1(V1(dt.subject,dt.predicate,dt.object),dt.annotations,nt)}),nt}return ot}function jb(ot){for(const nt of ot){if(nt.type==="graph"&&nt.name.termType==="Variable")throw new Error("Detected illegal variable in GRAPH");if(nt.type==="bgp"||nt.type==="graph"){for(const dt of nt.triples)if(dt.subject.termType==="Variable"||dt.predicate.termType==="Variable"||dt.object.termType==="Variable")throw new Error("Detected illegal variable in BGP")}}return ot}function Mb(ot){for(const nt of ot)if(nt.type==="bgp"){for(const dt of nt.triples)if(dt.subject.termType==="BlankNode"||dt.predicate.termType==="BlankNode"||dt.object.termType==="BlankNode")throw new Error("Detected illegal blank node in BGP")}return ot}var PN=(function(){var ot={EOF:1,parseError:function(dt,_t){if(this.yy.parser)this.yy.parser.parseError(dt,_t);else throw new Error(dt)},setInput:function(nt,dt){return this.yy=dt||this.yy||{},this._input=nt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var nt=this._input[0];this.yytext+=nt,this.yyleng++,this.offset++,this.match+=nt,this.matched+=nt;var dt=nt.match(/(?:\r\n?|\n).*/g);return dt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),nt},unput:function(nt){var dt=nt.length,_t=nt.split(/(?:\r\n?|\n)/g);this._input=nt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-dt),this.offset-=dt;var Pt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),_t.length-1&&(this.yylineno-=_t.length-1);var Nt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:_t?(_t.length===Pt.length?this.yylloc.first_column:0)+Pt[Pt.length-_t.length].length-_t[0].length:this.yylloc.first_column-dt},this.options.ranges&&(this.yylloc.range=[Nt[0],Nt[0]+this.yyleng-dt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(nt){this.unput(this.match.slice(nt))},pastInput:function(){var nt=this.matched.substr(0,this.matched.length-this.match.length);return(nt.length>20?"...":"")+nt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var nt=this.match;return nt.length<20&&(nt+=this._input.substr(0,20-nt.length)),(nt.substr(0,20)+(nt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var nt=this.pastInput(),dt=new Array(nt.length+1).join("-");return nt+this.upcomingInput()+`
`+dt+"^"},test_match:function(nt,dt){var _t,Pt,Nt;if(this.options.backtrack_lexer&&(Nt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(Nt.yylloc.range=this.yylloc.range.slice(0))),Pt=nt[0].match(/(?:\r\n?|\n).*/g),Pt&&(this.yylineno+=Pt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:Pt?Pt[Pt.length-1].length-Pt[Pt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+nt[0].length},this.yytext+=nt[0],this.match+=nt[0],this.matches=nt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(nt[0].length),this.matched+=nt[0],_t=this.performAction.call(this,this.yy,this,dt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),_t)return _t;if(this._backtrack){for(var me in Nt)this[me]=Nt[me];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var nt,dt,_t,Pt;this._more||(this.yytext="",this.match="");for(var Nt=this._currentRules(),me=0;me<Nt.length;me++)if(_t=this._input.match(this.rules[Nt[me]]),_t&&(!dt||_t[0].length>dt[0].length)){if(dt=_t,Pt=me,this.options.backtrack_lexer){if(nt=this.test_match(_t,Nt[me]),nt!==!1)return nt;if(this._backtrack){dt=!1;continue}else return!1}else if(!this.options.flex)break}return dt?(nt=this.test_match(dt,Nt[Pt]),nt!==!1?nt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var dt=this.next();return dt||this.lex()},begin:function(dt){this.conditionStack.push(dt)},popState:function(){var dt=this.conditionStack.length-1;return dt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(dt){return dt=this.conditionStack.length-1-Math.abs(dt||0),dt>=0?this.conditionStack[dt]:"INITIAL"},pushState:function(dt){this.begin(dt)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(dt,_t,Pt,Nt){switch(Pt){case 0:break;case 1:return 12;case 2:return 15;case 3:return 41;case 4:return 325;case 5:return 326;case 6:return 45;case 7:return 47;case 8:return 48;case 9:return 39;case 10:return 24;case 11:return 28;case 12:return 29;case 13:return 31;case 14:return 32;case 15:return 36;case 16:return 53;case 17:return 327;case 18:return 63;case 19:return 64;case 20:return 70;case 21:return 73;case 22:return 76;case 23:return 78;case 24:return 81;case 25:return 83;case 26:return 85;case 27:return 193;case 28:return 100;case 29:return 328;case 30:return 121;case 31:return 329;case 32:return 330;case 33:return 110;case 34:return 331;case 35:return 109;case 36:return 332;case 37:return 333;case 38:return 113;case 39:return 115;case 40:return 116;case 41:return 131;case 42:return 123;case 43:return 126;case 44:return 128;case 45:return 132;case 46:return 112;case 47:return 334;case 48:return 335;case 49:return 159;case 50:return 161;case 51:return 164;case 52:return 174;case 53:return 160;case 54:return 336;case 55:return 163;case 56:return 312;case 57:return 314;case 58:return 317;case 59:return 318;case 60:return 272;case 61:return 197;case 62:return 337;case 63:return 338;case 64:return 229;case 65:return 340;case 66:return 263;case 67:return 224;case 68:return 231;case 69:return 232;case 70:return 242;case 71:return 246;case 72:return 290;case 73:return 341;case 74:return 342;case 75:return 343;case 76:return 344;case 77:return 345;case 78:return 250;case 79:return 346;case 80:return 265;case 81:return 276;case 82:return 277;case 83:return 268;case 84:return 269;case 85:return 270;case 86:return 271;case 87:return 347;case 88:return 348;case 89:return 273;case 90:return 274;case 91:return 350;case 92:return 349;case 93:return 351;case 94:return 279;case 95:return 280;case 96:return 283;case 97:return 285;case 98:return 289;case 99:return 293;case 100:return 296;case 101:return 13;case 102:return 16;case 103:return 308;case 104:return 309;case 105:return 87;case 106:return 292;case 107:return 82;case 108:return 294;case 109:return 295;case 110:return 297;case 111:return 298;case 112:return 299;case 113:return 300;case 114:return 301;case 115:return 302;case 116:return"EXPONENT";case 117:return 303;case 118:return 304;case 119:return 305;case 120:return 306;case 121:return 89;case 122:return 310;case 123:return 6;case 124:return"INVALID";case 125:console.log(_t.yytext);break}},rules:[/^(?:\s+|(#[^\n\r]*))/i,/^(?:BASE)/i,/^(?:PREFIX)/i,/^(?:SELECT)/i,/^(?:DISTINCT)/i,/^(?:REDUCED)/i,/^(?:\()/i,/^(?:AS)/i,/^(?:\))/i,/^(?:\*)/i,/^(?:CONSTRUCT)/i,/^(?:WHERE)/i,/^(?:\{)/i,/^(?:\})/i,/^(?:DESCRIBE)/i,/^(?:ASK)/i,/^(?:FROM)/i,/^(?:NAMED)/i,/^(?:GROUP)/i,/^(?:BY)/i,/^(?:HAVING)/i,/^(?:ORDER)/i,/^(?:ASC)/i,/^(?:DESC)/i,/^(?:LIMIT)/i,/^(?:OFFSET)/i,/^(?:VALUES)/i,/^(?:;)/i,/^(?:LOAD)/i,/^(?:SILENT)/i,/^(?:INTO)/i,/^(?:CLEAR)/i,/^(?:DROP)/i,/^(?:CREATE)/i,/^(?:ADD)/i,/^(?:TO)/i,/^(?:MOVE)/i,/^(?:COPY)/i,/^(?:INSERT((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)DATA)/i,/^(?:DELETE((\s+|(#[^\n\r]*)\n\r?)+)WHERE)/i,/^(?:WITH)/i,/^(?:DELETE)/i,/^(?:INSERT)/i,/^(?:USING)/i,/^(?:DEFAULT)/i,/^(?:GRAPH)/i,/^(?:ALL)/i,/^(?:\.)/i,/^(?:OPTIONAL)/i,/^(?:SERVICE)/i,/^(?:BIND)/i,/^(?:UNDEF)/i,/^(?:MINUS)/i,/^(?:UNION)/i,/^(?:FILTER)/i,/^(?:<<)/i,/^(?:>>)/i,/^(?:\{\|)/i,/^(?:\|\})/i,/^(?:,)/i,/^(?:a)/i,/^(?:\|)/i,/^(?:\/)/i,/^(?:\^)/i,/^(?:\?)/i,/^(?:\+)/i,/^(?:!)/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\|\|)/i,/^(?:&&)/i,/^(?:=)/i,/^(?:!=)/i,/^(?:<)/i,/^(?:>)/i,/^(?:<=)/i,/^(?:>=)/i,/^(?:IN)/i,/^(?:NOT)/i,/^(?:-)/i,/^(?:BOUND)/i,/^(?:BNODE)/i,/^(?:(RAND|NOW|UUID|STRUUID))/i,/^(?:(LANG|DATATYPE|IRI|URI|ABS|CEIL|FLOOR|ROUND|STRLEN|STR|UCASE|LCASE|ENCODE_FOR_URI|YEAR|MONTH|DAY|HOURS|MINUTES|SECONDS|TIMEZONE|TZ|MD5|SHA1|SHA256|SHA384|SHA512|isIRI|isURI|isBLANK|isLITERAL|isNUMERIC))/i,/^(?:(SUBJECT|PREDICATE|OBJECT|isTRIPLE))/i,/^(?:(LANGMATCHES|CONTAINS|STRSTARTS|STRENDS|STRBEFORE|STRAFTER|STRLANG|STRDT|sameTerm))/i,/^(?:CONCAT)/i,/^(?:COALESCE)/i,/^(?:IF)/i,/^(?:TRIPLE)/i,/^(?:REGEX)/i,/^(?:SUBSTR)/i,/^(?:REPLACE)/i,/^(?:EXISTS)/i,/^(?:COUNT)/i,/^(?:SUM|MIN|MAX|AVG|SAMPLE)/i,/^(?:GROUP_CONCAT)/i,/^(?:SEPARATOR)/i,/^(?:\^\^)/i,/^(?:true|false)/i,/^(?:(<(?:[^<>\"\{\}\|\^`\\\u0000-\u0020])*>))/i,/^(?:((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?)?:)((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|:|[0-9]|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|:|((%([0-9A-Fa-f])([0-9A-Fa-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(_:(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:(?:(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])|\.)*(((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|-|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040]))?))/i,/^(?:([\?\$]((?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9])(?:((?:([A-Za-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]|[\uD800-\uDB7F][\uDC00-\uDFFF])|_))|[0-9]|\u00B7|[\u0300-\u036F\u203F-\u2040])*)))/i,/^(?:(@[a-zA-Z]+(?:-[a-zA-Z0-9]+)*))/i,/^(?:([0-9]+))/i,/^(?:([0-9]*\.[0-9]+))/i,/^(?:([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+)))/i,/^(?:(\+([0-9]+)))/i,/^(?:(\+([0-9]*\.[0-9]+)))/i,/^(?:(\+([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:(-([0-9]+)))/i,/^(?:(-([0-9]*\.[0-9]+)))/i,/^(?:(-([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.([0-9])+([eE][+-]?[0-9]+)|([0-9])+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"']|\\u([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])|\\U([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f])([0-9A-Fa-f]))))*"""))/i,/^(?:(\((\u0020|\u0009|\u000D|\u000A)*\)))/i,/^(?:(\[(\u0020|\u0009|\u000D|\u000A)*\]))/i,/^(?:$)/i,/^(?:.)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86,87,88,89,90,91,92,93,94,95,96,97,98,99,100,101,102,103,104,105,106,107,108,109,110,111,112,113,114,115,116,117,118,119,120,121,122,123,124,125],inclusive:!0}}};return ot})();ql.lexer=PN;function Xt(){this.yy={}}return Xt.prototype=ql,ql.Parser=Xt,new Xt})();return Fj=a,Fj}var Pj,hK;function c6e(){if(hK)return Pj;hK=1;var a="http://www.w3.org/2001/XMLSchema#integer",e="http://www.w3.org/2001/XMLSchema#string";function u(f){this._options=f=f||{};var p=f.prefixes||{};this._prefixByIri={};var h=[];for(var g in p){var v=p[g];o(v)&&(this._prefixByIri[v]=g,h.push(v))}var m=h.join("|").replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&");this._prefixRegex=new RegExp("^("+m+")([a-zA-Z][\\-_a-zA-Z0-9]*)$"),this._usedPrefixes={},this._sparqlStar=f.sparqlStar,this._indent=o(f.indent)?f.indent:"  ",this._newline=o(f.newline)?f.newline:`
`,this._explicitDatatype=!!f.explicitDatatype}u.prototype.toQuery=function(f){var p="";return f.queryType&&(p+=f.queryType.toUpperCase()+" "),f.reduced&&(p+="REDUCED "),f.distinct&&(p+="DISTINCT "),f.variables?p+=c(f.variables,void 0,function(h){return/^[?$]/.test(h)?h:l(h)?this.toEntity(h):"("+this.toExpression(h.expression)+" AS "+i(h.variable)+")"},this)+" ":f.template&&(p+=this.group(f.template,!0)+this._newline),f.from&&(p+=this.graphs("FROM ",f.from.default)+this.graphs("FROM NAMED ",f.from.named)),f.where&&(p+="WHERE "+this.group(f.where,!0)+this._newline),f.updates&&(p+=c(f.updates,";"+this._newline,this.toUpdate,this)),f.group&&(p+="GROUP BY "+c(f.group,void 0,function(h){var g=l(h.expression)?this.toEntity(h.expression):"("+this.toExpression(h.expression)+")";return h.variable?"("+g+" AS "+i(h.variable)+")":g},this)+this._newline),f.having&&(p+="HAVING ("+c(f.having,void 0,this.toExpression,this)+")"+this._newline),f.order&&(p+="ORDER BY "+c(f.order,void 0,function(h){var g="("+this.toExpression(h.expression)+")";return h.descending?"DESC "+g:g},this)+this._newline),f.offset&&(p+="OFFSET "+f.offset+this._newline),f.limit&&(p+="LIMIT "+f.limit+this._newline),f.values&&(p+=this.values(f)),p=this.baseAndPrefixes(f)+p,p.trim()},u.prototype.baseAndPrefixes=function(f){var p=f.base?"BASE <"+f.base+">"+this._newline:"",h="";for(var g in f.prefixes)(this._options.allPrefixes||this._usedPrefixes[g])&&(h+="PREFIX "+g+": <"+f.prefixes[g]+">"+this._newline);return p+h},u.prototype.toPattern=function(f){var p=f.type||f instanceof Array&&"array"||(f.subject&&f.predicate&&f.object?"triple":"");if(!(p in this))throw new Error("Unknown entry type: "+p);return this[p](f)},u.prototype.triple=function(f){return this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+"."},u.prototype.array=function(f){return c(f,this._newline,this.toPattern,this)},u.prototype.bgp=function(f){return this.encodeTriples(f.triples)},u.prototype.encodeTriples=function(f){if(!f.length)return"";for(var p=[],h=void 0,g=void 0,v=0;v<f.length;v++){var m=f[v];s(m.subject,h)?s(m.predicate,g)?p.push(","):(g=m.predicate,p.push(";"+this._newline,this._indent,this.toEntity(g))):(h&&p.push("."+this._newline),h=m.subject,g=m.predicate,p.push(this.toEntity(h)," ",this.toEntity(g))),p.push(" ",this.toEntity(m.object))}return p.push("."),p.join("")},u.prototype.graph=function(f){return"GRAPH "+this.toEntity(f.name)+" "+this.group(f)},u.prototype.graphs=function(f,p){return!p||p.length===0?"":c(p,"",function(h){return f+this.toEntity(h)+this._newline},this)},u.prototype.group=function(f,p){return f=p!==!0?this.array(f.patterns||f.triples):this.toPattern(f.type!=="group"?f:f.patterns),f.indexOf(this._newline)===-1?"{ "+f+" }":"{"+this._newline+this.indent(f)+this._newline+"}"},u.prototype.query=function(f){return this.toQuery(f)},u.prototype.filter=function(f){return"FILTER("+this.toExpression(f.expression)+")"},u.prototype.bind=function(f){return"BIND("+this.toExpression(f.expression)+" AS "+i(f.variable)+")"},u.prototype.optional=function(f){return"OPTIONAL "+this.group(f)},u.prototype.union=function(f){return c(f.patterns,this._newline+"UNION"+this._newline,function(p){return this.group(p,!0)},this)},u.prototype.minus=function(f){return"MINUS "+this.group(f)},u.prototype.values=function(f){var p=Object.keys(f.values.reduce(function(v,m){for(var T in m)v[T]=!0;return v},{})),h,g;return p.length===1?h=g="":(h="(",g=")"),"VALUES "+h+p.join(" ")+g+" {"+this._newline+c(f.values,this._newline,function(v){return"  "+h+c(p,void 0,function(m){return v[m]?this.toEntity(v[m]):"UNDEF"},this)+g},this)+this._newline+"}"},u.prototype.service=function(f){return"SERVICE "+(f.silent?"SILENT ":"")+this.toEntity(f.name)+" "+this.group(f)},u.prototype.toExpression=function(f){if(l(f))return this.toEntity(f);switch(f.type.toLowerCase()){case"aggregate":return f.aggregation.toUpperCase()+"("+(f.distinct?"DISTINCT ":"")+this.toExpression(f.expression)+(typeof f.separator=="string"?'; SEPARATOR = "'+f.separator.replace(n,r)+'"':"")+")";case"functioncall":return this.toEntity(f.function)+"("+c(f.args,", ",this.toExpression,this)+")";case"operation":var p=f.operator.toUpperCase(),h=f.args||[];switch(f.operator.toLowerCase()){case"<":case">":case">=":case"<=":case"&&":case"||":case"=":case"!=":case"+":case"-":case"*":case"/":return(l(h[0])?this.toEntity(h[0]):"("+this.toExpression(h[0])+")")+" "+p+" "+(l(h[1])?this.toEntity(h[1]):"("+this.toExpression(h[1])+")");case"!":return"!("+this.toExpression(h[0])+")";case"uplus":return"+("+this.toExpression(h[0])+")";case"uminus":return"-("+this.toExpression(h[0])+")";case"notin":p="NOT IN";case"in":return this.toExpression(h[0])+" "+p+"("+(o(h[1])?h[1]:c(h[1],", ",this.toExpression,this))+")";case"notexists":p="NOT EXISTS";case"exists":return p+" "+this.group(h[0],!0);default:return p+"("+c(h,", ",this.toExpression,this)+")"}default:throw new Error("Unknown expression type: "+f.type)}},u.prototype.toEntity=function(f){if(l(f))switch(f.termType){case"Wildcard":return"*";case"Variable":return i(f);case"BlankNode":return"_:"+f.value;case"Literal":var p=f.value||"",h=f.language||"",g=f.datatype;if(f='"'+p.replace(n,r)+'"',h)f+="@"+h;else if(g){if(!this._explicitDatatype)switch(g.value){case e:return f;case a:if(/^\d+$/.test(p))return p+" "}f+="^^"+this.encodeIRI(g.value)}return f;case"Quad":if(!this._sparqlStar)throw new Error("SPARQL* support is not enabled");return f.graph&&f.graph.termType!=="DefaultGraph"?"<< GRAPH "+this.toEntity(f.graph)+" { "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" }  >>":"<< "+this.toEntity(f.subject)+" "+this.toEntity(f.predicate)+" "+this.toEntity(f.object)+" >>";default:return this.encodeIRI(f.value)}else{var v=f.items.map(this.toEntity,this),m=f.pathType;switch(m){case"^":case"!":return m+v[0];case"*":case"+":case"?":return"("+v[0]+m+")";default:return"("+v.join(m)+")"}}};var n=/["\\\t\n\r\b\f]/g,r=function(f){return t[f]},t={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};u.prototype.encodeIRI=function(f){var p=this._prefixRegex.exec(f);if(p){var h=this._prefixByIri[p[1]];return this._usedPrefixes[h]=!0,h+":"+p[2]}return"<"+f+">"},u.prototype.toUpdate=function(f){switch(f.type||f.updateType){case"load":return"LOAD"+(f.source?" "+this.toEntity(f.source):"")+(f.destination?" INTO GRAPH "+this.toEntity(f.destination):"");case"insert":return"INSERT DATA "+this.group(f.insert,!0);case"delete":return"DELETE DATA "+this.group(f.delete,!0);case"deletewhere":return"DELETE WHERE "+this.group(f.delete,!0);case"insertdelete":return(f.graph?"WITH "+this.toEntity(f.graph)+this._newline:"")+(f.delete.length?"DELETE "+this.group(f.delete,!0)+this._newline:"")+(f.insert.length?"INSERT "+this.group(f.insert,!0)+this._newline:"")+(f.using?this.graphs("USING ",f.using.default):"")+(f.using?this.graphs("USING NAMED ",f.using.named):"")+"WHERE "+this.group(f.where,!0);case"add":case"copy":case"move":return f.type.toUpperCase()+" "+(f.silent?"SILENT ":"")+(f.source.default?"DEFAULT":this.toEntity(f.source.name))+" TO "+this.toEntity(f.destination.name);case"create":case"clear":case"drop":return f.type.toUpperCase()+(f.silent?" SILENT ":" ")+(f.graph.default?"DEFAULT":f.graph.named?"NAMED":f.graph.all?"ALL":"GRAPH "+this.toEntity(f.graph.name));default:throw new Error("Unknown update query type: "+f.type)}},u.prototype.indent=function(f){return f.replace(/^/gm,this._indent)};function i(f){return"?"+f.value}function o(f){return typeof f=="string"}function l(f){return typeof f.termType=="string"}function s(f,p){if(!f||!l(f)||!p||!l(p)||f.termType!==p.termType)return!1;switch(f.termType){case"Literal":return f.value===p.value&&f.language===p.language&&s(f.datatype,p.datatype);case"Quad":return s(f.subject,p.subject)&&s(f.predicate,p.predicate)&&s(f.object,p.object)&&s(f.graph,p.graph);default:return f.value===p.value}}function c(f,p,h,g){return f.map(h,g).join(o(p)?p:" ")}function d(f={}){return{stringify:function(p){var h=Object.create(f);return h.prefixes=p.prefixes,new u(h).toQuery(p)},createGenerator:function(){return new u(f)}}}return Pj={Generator:d},Pj}var jj,yK;function $n(){if(yK)return jj;yK=1;const{Parser:a}=s6e(),{Generator:e}=c6e(),{Wildcard:u}=U_e(),{DataFactory:n}=Rr();function r({prefixes:t,baseIRI:i,factory:o,pathOnly:l,sparqlStar:s,skipValidation:c,skipUngroupedVariableCheck:d}={}){const f={};for(const h in t??{})f[h]=t[h];const p=new a;return p.parse=function(){return a.base=i||"",a.prefixes=Object.create(f),a.factory=o||new n,a.sparqlStar=!!s,a.pathOnly=!!l,a.skipValidation=!!c||!!d,a.prototype.parse.apply(p,arguments)},p._resetBlanks=a._resetBlanks,p}return jj={Parser:r,Generator:e,Wildcard:u},jj}var mK;function rP(){if(mK)return Ao;mK=1;var a=Ao&&Ao.__createBinding||(Object.create?(function(l,s,c,d){d===void 0&&(d=c);var f=Object.getOwnPropertyDescriptor(s,c);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[c]}}),Object.defineProperty(l,d,f)}):(function(l,s,c,d){d===void 0&&(d=c),l[d]=s[c]})),e=Ao&&Ao.__setModuleDefault||(Object.create?(function(l,s){Object.defineProperty(l,"default",{enumerable:!0,value:s})}):function(l,s){l.default=s}),u=Ao&&Ao.__importStar||function(l){if(l&&l.__esModule)return l;var s={};if(l!=null)for(var c in l)c!=="default"&&Object.prototype.hasOwnProperty.call(l,c)&&a(s,l,c);return e(s,l),s};Object.defineProperty(Ao,"__esModule",{value:!0});const n=u(Q4()),r=Oq(),t=tP(),i=$n();class o{constructor(s){this.dataFactory=s||new r.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,c=!0){return this.flattenMulti({type:n.types.ALT,input:s},c)}createAsk(s){return{type:n.types.ASK,input:s}}createBoundAggregate(s,c,d,f,p){const h=this.createAggregateExpression(c,d,f,p);return h.variable=s,h}createBgp(s){return{type:n.types.BGP,patterns:s}}createConstruct(s,c){return{type:n.types.CONSTRUCT,input:s,template:c}}createDescribe(s,c){return{type:n.types.DESCRIBE,input:s,terms:c}}createDistinct(s){return{type:n.types.DISTINCT,input:s}}createExtend(s,c,d){return{type:n.types.EXTEND,input:s,variable:c,expression:d}}createFrom(s,c,d){return{type:n.types.FROM,input:s,default:c,named:d}}createFilter(s,c){return{type:n.types.FILTER,input:s,expression:c}}createGraph(s,c){return{type:n.types.GRAPH,input:s,name:c}}createGroup(s,c,d){return{type:n.types.GROUP,input:s,variables:c,aggregates:d}}createInv(s){return{type:n.types.INV,path:s}}createJoin(s,c=!0){return this.flattenMulti({type:n.types.JOIN,input:s},c)}createLeftJoin(s,c,d){return d?{type:n.types.LEFT_JOIN,input:[s,c],expression:d}:{type:n.types.LEFT_JOIN,input:[s,c]}}createLink(s){return{type:n.types.LINK,iri:s}}createMinus(s,c){return{type:n.types.MINUS,input:[s,c]}}createNop(){return{type:n.types.NOP}}createNps(s){return{type:n.types.NPS,iris:s}}createOneOrMorePath(s){return{type:n.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,c){return{type:n.types.ORDER_BY,input:s,expressions:c}}createPath(s,c,d,f){return f?{type:n.types.PATH,subject:s,predicate:c,object:d,graph:f}:{type:n.types.PATH,subject:s,predicate:c,object:d,graph:this.dataFactory.defaultGraph()}}createPattern(s,c,d,f){const p=this.dataFactory.quad(s,c,d,f);return p.type=n.types.PATTERN,p}createProject(s,c){return{type:n.types.PROJECT,input:s,variables:c}}createReduced(s){return{type:n.types.REDUCED,input:s}}createSeq(s,c=!0){return this.flattenMulti({type:n.types.SEQ,input:s},c)}createService(s,c,d){return{type:n.types.SERVICE,input:s,name:c,silent:!!d}}createSlice(s,c,d){return c=c||0,d!==void 0?{type:n.types.SLICE,input:s,start:c,length:d}:{type:n.types.SLICE,input:s,start:c}}createUnion(s,c=!0){return this.flattenMulti({type:n.types.UNION,input:s},c)}createValues(s,c){return{type:n.types.VALUES,variables:s,bindings:c}}createZeroOrMorePath(s){return{type:n.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:n.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,c,d,f){return f?{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,separator:f,distinct:d}:{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,distinct:d}}createExistenceExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.EXISTENCE,not:s,input:c}}createNamedExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.NAMED,name:s,args:c}}createOperatorExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.OPERATOR,operator:s,args:c}}createTermExpression(s){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.WILDCARD,wildcard:new i.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,t.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:n.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,c,d){const f={type:n.types.DELETE_INSERT};return s&&(f.delete=s),c&&(f.insert=c),d&&(f.where=d),f}createLoad(s,c,d){const f={type:n.types.LOAD,source:s};return c&&(f.destination=c),this.addSilent(f,!!d)}createClear(s,c){return this.addSilent({type:n.types.CLEAR,source:s},!!c)}createCreate(s,c){return this.addSilent({type:n.types.CREATE,source:s},!!c)}createDrop(s,c){return this.addSilent({type:n.types.DROP,source:s},!!c)}createAdd(s,c,d){return this.addSilent({type:n.types.ADD,source:s,destination:c},!!d)}createMove(s,c,d){return this.addSilent({type:n.types.MOVE,source:s,destination:c},!!d)}createCopy(s,c,d){return this.addSilent({type:n.types.COPY,source:s,destination:c},!!d)}addSilent(s,c){return c&&(s.silent=c),s}flattenMulti(s,c){if(!c)return s;const d=s.type,f=s.input;let p=[];for(const h of f)h.type===d?p.push(...h.input):p.push(h);return s.input=p,s}}return Ao.default=o,Ao}var dg={},bd={},Dr={},bK;function l6e(){if(bK)return Dr;bK=1,Object.defineProperty(Dr,"__esModule",{value:!0}),Dr.TRIPLE_TERM_NAMES=Dr.QUAD_TERM_NAMES=void 0,Dr.getTerms=u,Dr.getTermsNested=n,Dr.getNamedTerms=r,Dr.collectNamedTerms=t,Dr.forEachTerms=i,Dr.forEachTermsNested=o,Dr.filterTerms=l,Dr.filterTermsNested=s,Dr.filterQuadTermNames=c,Dr.filterQuadTermNamesNested=d,Dr.mapTerms=f,Dr.mapTermsNested=p,Dr.reduceTerms=h,Dr.reduceTermsNested=g,Dr.everyTerms=v,Dr.everyTermsNested=m,Dr.someTerms=T,Dr.someTermsNested=w,Dr.getValueNestedPath=E,Dr.matchTerm=S,Dr.matchPattern=N,Dr.matchPatternComplete=j,Dr.matchPatternMappings=q;const a=Oq(),e=new a.DataFactory;Dr.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Dr.TRIPLE_TERM_NAMES=["subject","predicate","object"];function u(O,I){return I&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function n(O,I){const A=[];for(const P of u(O,I))P.termType==="Quad"?n(P,I).forEach(C=>A.push(C)):A.push(P);return A}function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function t(O,I,A){const P={};return O.forEach(C=>P[C.key]=C.value),I&&(P.subject=P.subject||I("subject"),P.predicate=P.predicate||I("predicate"),P.object=P.object||I("object"),P.graph=P.graph||I("graph")),(A||e).quad(P.subject,P.predicate,P.object,P.graph)}function i(O,I){I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph")}function o(O,I,A=[]){O.subject.termType==="Quad"?o(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]),O.predicate.termType==="Quad"?o(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]),O.object.termType==="Quad"?o(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]),O.graph.termType==="Quad"?o(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"])}function l(O,I){const A=[];return I(O.subject,"subject")&&A.push(O.subject),I(O.predicate,"predicate")&&A.push(O.predicate),I(O.object,"object")&&A.push(O.object),I(O.graph,"graph")&&A.push(O.graph),A}function s(O,I,A=[]){let P=[];return O.subject.termType==="Quad"?P=[...P,...s(O.subject,I,[...A,"subject"])]:I(O.subject,[...A,"subject"])&&P.push(O.subject),O.predicate.termType==="Quad"?P=[...P,...s(O.predicate,I,[...A,"predicate"])]:I(O.predicate,[...A,"predicate"])&&P.push(O.predicate),O.object.termType==="Quad"?P=[...P,...s(O.object,I,[...A,"object"])]:I(O.object,[...A,"object"])&&P.push(O.object),O.graph.termType==="Quad"?P=[...P,...s(O.graph,I,[...A,"graph"])]:I(O.graph,[...A,"graph"])&&P.push(O.graph),P}function c(O,I){const A=[];return I(O.subject,"subject")&&A.push("subject"),I(O.predicate,"predicate")&&A.push("predicate"),I(O.object,"object")&&A.push("object"),I(O.graph,"graph")&&A.push("graph"),A}function d(O,I,A=[]){let P=[];const C=[...A,"subject"];O.subject.termType==="Quad"?P=[...P,...d(O.subject,I,C)]:I(O.subject,C)&&P.push(C);const B=[...A,"predicate"];O.predicate.termType==="Quad"?P=[...P,...d(O.predicate,I,B)]:I(O.predicate,B)&&P.push(B);const H=[...A,"object"];O.object.termType==="Quad"?P=[...P,...d(O.object,I,H)]:I(O.object,H)&&P.push(H);const V=[...A,"graph"];return O.graph.termType==="Quad"?P=[...P,...d(O.graph,I,V)]:I(O.graph,V)&&P.push(V),P}function f(O,I,A){return(A||e).quad(I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph"))}function p(O,I,A,P=[]){return(A||e).quad(O.subject.termType==="Quad"?p(O.subject,I,A,[...P,"subject"]):I(O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?p(O.predicate,I,A,[...P,"predicate"]):I(O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?p(O.object,I,A,[...P,"object"]):I(O.object,[...P,"object"]),O.graph.termType==="Quad"?p(O.graph,I,A,[...P,"graph"]):I(O.graph,[...P,"graph"]))}function h(O,I,A){let P=A;return P=I(P,O.subject,"subject"),P=I(P,O.predicate,"predicate"),P=I(P,O.object,"object"),I(P,O.graph,"graph")}function g(O,I,A,P=[]){let C=A;return O.subject.termType==="Quad"?C=g(O.subject,I,C,[...P,"subject"]):C=I(C,O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?C=g(O.predicate,I,C,[...P,"predicate"]):C=I(C,O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?C=g(O.object,I,C,[...P,"object"]):C=I(C,O.object,[...P,"object"]),O.graph.termType==="Quad"?C=g(O.graph,I,C,[...P,"graph"]):C=I(C,O.graph,[...P,"graph"]),C}function v(O,I){return I(O.subject,"subject")&&I(O.predicate,"predicate")&&I(O.object,"object")&&I(O.graph,"graph")}function m(O,I,A=[]){return(O.subject.termType==="Quad"?m(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))&&(O.predicate.termType==="Quad"?m(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))&&(O.object.termType==="Quad"?m(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))&&(O.graph.termType==="Quad"?m(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}function T(O,I){return I(O.subject,"subject")||I(O.predicate,"predicate")||I(O.object,"object")||I(O.graph,"graph")}function w(O,I,A=[]){return(O.subject.termType==="Quad"?w(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))||(O.predicate.termType==="Quad"?w(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))||(O.object.termType==="Quad"?w(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))||(O.graph.termType==="Quad"?w(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}function E(O,I){if(I.length===0)return O;if(O.termType==="Quad")return E(O[I[0]],I.slice(1));throw new Error(`Tried to get ${I[0]} from term of type ${O.termType}`)}function S(O,I){return!I||I.termType==="Variable"||I.termType==="Quad"&&O.termType==="Quad"&&j(O,I)||I.equals(O)}function N(O,I,A,P,C){return S(O.subject,I)&&S(O.predicate,A)&&S(O.object,P)&&S(O.graph,C)}function j(O,I){return N(O,I.subject,I.predicate,I.object,I.graph)}function q(O,I,A={}){const P={};function C(B,H){return v(B,(V,G)=>{var Z,ae;const W=H[G];switch(V.termType){case"Variable":return A.skipVarMapping&&W.termType==="Variable"||((ae=(Z=P[V.value])===null||Z===void 0?void 0:Z.equals(W))!==null&&ae!==void 0?ae:(P[V.value]=W,!0));case"Quad":return W.termType==="Quad"&&C(V,W);default:return V.equals(W)}})}return C(I,O)&&(A.returnMappings?P:!0)}return Dr}var Ii={},gK;function d6e(){if(gK)return Ii;gK=1,Object.defineProperty(Ii,"__esModule",{value:!0}),Ii.TERM_TYPES=void 0,Ii.uniqTerms=e,Ii.getTermsOfType=u,Ii.getNamedNodes=n,Ii.getBlankNodes=r,Ii.getLiterals=t,Ii.getVariables=i,Ii.getDefaultGraphs=o,Ii.getQuads=l;const a=tP();Ii.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function e(s){const c={};return s.filter(d=>{const f=(0,a.termToString)(d);return!(f in c)&&(c[f]=!0)})}function u(s,c){return s.filter(d=>d.termType===c)}function n(s){return u(s,"NamedNode")}function r(s){return u(s,"BlankNode")}function t(s){return u(s,"Literal")}function i(s){return u(s,"Variable")}function o(s){return u(s,"DefaultGraph")}function l(s){return u(s,"Quad")}return Ii}var vK;function f6e(){return vK||(vK=1,(function(a){var e=bd&&bd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=bd&&bd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(l6e(),a),u(d6e(),a)})(bd)),bd}var _K;function xq(){if(_K)return dg;_K=1;var a=dg&&dg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(dg,"__esModule",{value:!0});const e=Q4(),u=a(rP()),n=f6e();class r{static flatten(i){return Array.prototype.concat(...i).filter(o=>o)}static objectify(i){if(i.termType){if(i.termType==="Quad")return{type:"pattern",termType:"Quad",subject:r.objectify(i.subject),predicate:r.objectify(i.predicate),object:r.objectify(i.object),graph:r.objectify(i.graph)};{let o={termType:i.termType,value:i.value};return i.language&&(o.language=i.language),i.datatype&&(o.datatype=r.objectify(i.datatype)),o}}if(Array.isArray(i))return i.map(o=>r.objectify(o));if(i===Object(i)){let o={};for(let l of Object.keys(i))o[l]=r.objectify(i[l]);return o}return i}static inScopeVariables(i){const o=[];function l(c){o.find(d=>c.value===d.value)||o.push(c)}function s(c){c.subject.termType==="Variable"&&l(c.subject),c.predicate.termType==="Variable"&&l(c.predicate),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.predicate.termType==="Quad"&&s(c.predicate),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph)}return r.recurseOperation(i,{[e.types.EXPRESSION]:c=>(c.expressionType===e.expressionTypes.AGGREGATE&&c.variable&&l(c.variable),!0),[e.types.EXTEND]:c=>(l(c.variable),!0),[e.types.GRAPH]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.GROUP]:c=>(c.variables.forEach(l),!0),[e.types.PATH]:c=>(c.subject.termType==="Variable"&&l(c.subject),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph),!0),[e.types.PATTERN]:c=>(s(c),!0),[e.types.PROJECT]:c=>(c.variables.forEach(l),!1),[e.types.SERVICE]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.VALUES]:c=>(c.variables.forEach(l),!0)}),o}static recurseOperation(i,o){let l=i,s=!0;const c=o[i.type];if(c&&(s=c(i)),!s)return;let d=f=>r.recurseOperation(f,o);switch(l.type){case e.types.ALT:l.input.map(d);break;case e.types.ASK:d(l.input);break;case e.types.BGP:l.patterns.forEach(d);break;case e.types.CONSTRUCT:d(l.input),l.template.map(d);break;case e.types.DESCRIBE:d(l.input);break;case e.types.DISTINCT:d(l.input);break;case e.types.EXPRESSION:l.expressionType===e.expressionTypes.EXISTENCE&&d(l.input);break;case e.types.EXTEND:d(l.input),d(l.expression);break;case e.types.FILTER:d(l.input),d(l.expression);break;case e.types.FROM:d(l.input);break;case e.types.GRAPH:d(l.input);break;case e.types.GROUP:d(l.input),l.aggregates.forEach(d);break;case e.types.INV:d(l.path);break;case e.types.JOIN:l.input.map(d);break;case e.types.LEFT_JOIN:l.input.map(d),l.expression&&d(l.expression);break;case e.types.LINK:break;case e.types.MINUS:l.input.map(d);break;case e.types.NOP:break;case e.types.NPS:break;case e.types.ONE_OR_MORE_PATH:d(l.path);break;case e.types.ORDER_BY:d(l.input),l.expressions.forEach(d);break;case e.types.PATH:d(l.predicate);break;case e.types.PATTERN:break;case e.types.PROJECT:d(l.input);break;case e.types.REDUCED:d(l.input);break;case e.types.SEQ:l.input.map(d);break;case e.types.SERVICE:d(l.input);break;case e.types.SLICE:d(l.input);break;case e.types.UNION:l.input.map(d);break;case e.types.VALUES:break;case e.types.ZERO_OR_MORE_PATH:d(l.path);break;case e.types.ZERO_OR_ONE_PATH:d(l.path);break;case e.types.COMPOSITE_UPDATE:l.updates.forEach(f=>d(f));break;case e.types.DELETE_INSERT:l.delete&&l.delete.forEach(f=>d(f)),l.insert&&l.insert.forEach(f=>d(f)),l.where&&d(l.where);break;case e.types.LOAD:break;case e.types.CLEAR:break;case e.types.CREATE:break;case e.types.DROP:break;case e.types.ADD:break;case e.types.MOVE:break;case e.types.COPY:break;default:throw new Error(`Unknown Operation type ${l.type}`)}}static mapOperation(i,o,l){let s=i,c=!0,d=!0;l=l||new u.default;const f=o[i.type];if(f){const g=f(i,l);s=g.result,c=g.recurse,d=g.copyMetadata!==!1}let p;if(d&&(s.metadata||i.metadata)&&(p={...s.metadata,...i.metadata}),!c)return p&&(s.metadata=p),s;let h=g=>r.mapOperation(g,o,l);switch(s.type){case e.types.ALT:s=l.createAlt(s.input.map(h));break;case e.types.ASK:s=l.createAsk(h(s.input));break;case e.types.BGP:s=l.createBgp(s.patterns.map(h));break;case e.types.CONSTRUCT:s=l.createConstruct(h(s.input),s.template.map(h));break;case e.types.DESCRIBE:s=l.createDescribe(h(s.input),s.terms);break;case e.types.DISTINCT:s=l.createDistinct(h(s.input));break;case e.types.EXPRESSION:s=r.mapExpression(s,o,l);break;case e.types.EXTEND:s=l.createExtend(h(s.input),s.variable,h(s.expression));break;case e.types.FILTER:s=l.createFilter(h(s.input),h(s.expression));break;case e.types.FROM:s=l.createFrom(h(s.input),[...s.default],[...s.named]);break;case e.types.GRAPH:s=l.createGraph(h(s.input),s.name);break;case e.types.GROUP:s=l.createGroup(h(s.input),[].concat(s.variables),s.aggregates.map(h));break;case e.types.INV:s=l.createInv(h(s.path));break;case e.types.JOIN:s=l.createJoin(s.input.map(h));break;case e.types.LEFT_JOIN:s=l.createLeftJoin(h(s.input[0]),h(s.input[1]),s.expression?h(s.expression):void 0);break;case e.types.LINK:s=l.createLink(s.iri);break;case e.types.MINUS:s=l.createMinus(h(s.input[0]),h(s.input[1]));break;case e.types.NOP:s=l.createNop();break;case e.types.NPS:s=l.createNps([].concat(s.iris));break;case e.types.ONE_OR_MORE_PATH:s=l.createOneOrMorePath(h(s.path));break;case e.types.ORDER_BY:s=l.createOrderBy(h(s.input),s.expressions.map(h));break;case e.types.PATH:s=l.createPath(s.subject,h(s.predicate),s.object,s.graph);break;case e.types.PATTERN:s=l.createPattern(s.subject,s.predicate,s.object,s.graph);break;case e.types.PROJECT:s=l.createProject(h(s.input),[...s.variables]);break;case e.types.REDUCED:s=l.createReduced(h(s.input));break;case e.types.SEQ:s=l.createSeq(s.input.map(h));break;case e.types.SERVICE:s=l.createService(h(s.input),s.name,s.silent);break;case e.types.SLICE:s=l.createSlice(h(s.input),s.start,s.length);break;case e.types.UNION:s=l.createUnion(s.input.map(h));break;case e.types.VALUES:s=l.createValues([].concat(s.variables),s.bindings.map(g=>Object.assign({},g)));break;case e.types.ZERO_OR_MORE_PATH:s=l.createZeroOrMorePath(h(s.path));break;case e.types.ZERO_OR_ONE_PATH:s=l.createZeroOrOnePath(h(s.path));break;case e.types.COMPOSITE_UPDATE:s=l.createCompositeUpdate(s.updates.map(h));break;case e.types.DELETE_INSERT:s=l.createDeleteInsert(s.delete?s.delete.map(h):void 0,s.insert?s.insert.map(h):void 0,s.where?h(s.where):void 0);break;case e.types.LOAD:s=l.createLoad(s.source,s.destination,s.silent);break;case e.types.CLEAR:s=l.createClear(s.source,s.silent);break;case e.types.CREATE:s=l.createCreate(s.source,s.silent);break;case e.types.DROP:s=l.createDrop(s.source,s.silent);break;case e.types.ADD:s=l.createAdd(s.source,s.destination);break;case e.types.MOVE:s=l.createMove(s.source,s.destination);break;case e.types.COPY:s=l.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return p&&(s.metadata=p),s}static mapExpression(i,o,l){let s=i,c=!0;l=l||new u.default;const d=o[i.expressionType];if(d&&({result:s,recurse:c}=d(i,l)),!c)return s;let f=p=>r.mapOperation(p,o,l);switch(i.expressionType){case e.expressionTypes.AGGREGATE:return i.variable?l.createBoundAggregate(i.variable,i.aggregator,f(i.expression),i.distinct,i.separator):l.createAggregateExpression(i.aggregator,f(i.expression),i.distinct,i.separator);case e.expressionTypes.EXISTENCE:return l.createExistenceExpression(i.not,f(i.input));case e.expressionTypes.NAMED:return l.createNamedExpression(i.name,i.args.map(f));case e.expressionTypes.OPERATOR:return l.createOperatorExpression(i.operator,i.args.map(f));case e.expressionTypes.TERM:return l.createTermExpression(i.term);case e.expressionTypes.WILDCARD:return l.createWildcardExpression();default:throw new Error(`Unknown Expression type ${i.expressionType}`)}}static cloneOperation(i){return r.mapOperation(i,{})}static cloneExpression(i){return r.mapExpression(i,{})}static createUniqueVariable(i,o,l){let s=0,c=i;for(;o[c];)c=`${i}${s++}`;return l.variable(c)}static isSimpleTerm(i){return i.termType!==void 0&&i.termType!=="Quad"&&i.termType!=="Wildcard"}static isQuad(i){return i.termType==="Quad"}static hasQuadVariables(i){return(0,n.someTermsNested)(i,o=>o.termType==="Variable")}static isWildcard(i){return i.termType==="Wildcard"}}return dg.default=r,dg}var TK;function p6e(){if(TK)return cu;TK=1;var a=cu&&cu.__createBinding||(Object.create?(function(_,F,D,L){L===void 0&&(L=D);var Q=Object.getOwnPropertyDescriptor(F,D);(!Q||("get"in Q?!F.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return F[D]}}),Object.defineProperty(_,L,Q)}):(function(_,F,D,L){L===void 0&&(L=D),_[L]=F[D]})),e=cu&&cu.__setModuleDefault||(Object.create?(function(_,F){Object.defineProperty(_,"default",{enumerable:!0,value:F})}):function(_,F){_.default=F}),u=cu&&cu.__importStar||function(_){if(_&&_.__esModule)return _;var F={};if(_!=null)for(var D in _)D!=="default"&&Object.prototype.hasOwnProperty.call(_,D)&&a(F,_,D);return e(F,_),F},n=cu&&cu.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(cu,"__esModule",{value:!0});const r=v1(),t=tP(),i=u(Q4()),o=n(rP()),l=n(xq()),s=$n().Parser,c=i.types;let d=new Set,f=0,p=!1,h;function g(_,F){F=F||{},h=new o.default(F.dataFactory);let D;if(m(_)){let L=new s(F);L._resetBlanks(),D=L.parse(_)}else D=_;return v(D,F.quads,F.blankToVariable)}cu.default=g;function v(_,F,D){if(d=new Set,f=0,p=!!F,!_.type)return h.createNop();if(_.type!=="query"&&_.type!=="update")throw new Error("Translate only works on complete query or update objects.");let L;if(S(_),_.type==="query"){const Q={type:"group",patterns:_.where||[]};L=j(Q),L=W(_,L)}else _.type==="update"&&(L=pe(_));return D&&(L=ee(L)),L}function m(_){return typeof _=="string"}function T(_){return!!_?.termType}function w(_){return _.subject&&_.predicate&&_.object}function E(_){return _?.termType==="Variable"}function S(_){if(T(_))E(_)&&d.add(`?${_.value}`);else if(Array.isArray(_))for(const F of _)S(F);else if(_&&typeof _=="object")for(let F of Object.keys(_))F.startsWith("?")?d.add(F):F.startsWith("$")&&d.add(`?${F.slice(1)}`),S(_[F])}function N(_){let F={};if(w(_)){const D=[N(_.subject),N(_.predicate),N(_.object),_.graph?N(_.graph):{}];Object.assign(F,...D)}else if(T(_))E(_)&&(F[_.value]=_);else if(_.type==="bgp"){const D=_.triples;Object.assign(F,...D.map(N))}else if(_.type==="path")Object.assign(F,..._.items.map(N));else if(_.type==="group"||_.type==="union"||_.type==="optional")Object.assign(F,..._.patterns.map(N));else if(_.type==="service"||_.type==="graph")Object.assign(F,N(_.name)),Object.assign(F,..._.patterns.map(N));else if(_.type==="bind")Object.assign(F,N(_.variable));else if(_.type==="values"){if(_.values.length>0){const D=Object.keys(_.values[0]).map(L=>h.createTerm(L));Object.assign(F,...D.map(N))}}else if(_.type==="query"&&(_.queryType==="SELECT"||_.queryType==="DESCRIBE")){_.where&&_.variables.some(l.default.isWildcard)&&Object.assign(F,..._.where.map(N));for(const D of _.variables)E(D)?Object.assign(F,N(D)):D.variable&&Object.assign(F,N(D.variable));if(_.queryType==="SELECT"){if(_.group)for(const D of _.group)D.variable&&Object.assign(F,N(D.variable));if(_.values){const D={type:"values",values:_.values};Object.assign(F,N(D))}}}return F}function j(_){if(_.type==="bgp")return O(_);if(_.type==="union")return h.createUnion(_.patterns.map(F=>(F.type!=="group"&&(F={type:"group",patterns:[F]}),j(F))));if(_.type==="graph"){const F={type:"group",patterns:_.patterns};let D=j(F);return p?D=V(D,_.name):D=h.createGraph(D,_.name),D}if(_.type==="values")return ae(_);if(_.type==="query")return v(_,p,!1);if(_.type==="group"){let F=[],D=[];for(let Y of _.patterns)(Y.type==="filter"?F:D).push(Y);let L=D.reduce(G,h.createBgp([])),Q=F.map(Y=>q(Y.expression));return Q.length>0&&(L=h.createFilter(L,Q.reduce((Y,$)=>h.createOperatorExpression("&&",[Y,$])))),L}throw new Error(`Unexpected type: ${_.type}`)}function q(_){if(l.default.isSimpleTerm(_))return h.createTermExpression(_);if(l.default.isQuad(_))return l.default.hasQuadVariables(_)?h.createOperatorExpression("triple",[q(_.subject),q(_.predicate),q(_.object)]):h.createTermExpression(_);if(l.default.isWildcard(_))return h.createWildcardExpression();if("aggregation"in _)return h.createAggregateExpression(_.aggregation,q(_.expression),!!_.distinct,_.separator);if("function"in _)return h.createNamedExpression(_.function,_.args.map(q));if("operator"in _)return _.operator==="exists"||_.operator==="notexists"?h.createExistenceExpression(_.operator==="notexists",j(_.args[0])):((_.operator==="in"||_.operator==="notin")&&(_.args=[_.args[0]].concat(_.args[1])),h.createOperatorExpression(_.operator,_.args.map(q)));throw new Error(`Unknown expression: ${JSON.stringify(_)}`)}function O(_){let F=[],D=[];for(let L of _.triples)if("pathType"in L.predicate){let Q=I(L);for(let Y of Q)Y.type===c.PATH?(F.length>0&&D.push(h.createBgp(F)),F=[],D.push(Y)):F.push(Y)}else F.push(B(L));return F.length>0&&D.push(h.createBgp(F)),D.length===1?D[0]:h.createJoin(D)}function I(_){let F=_.subject,D=A(_.predicate),L=_.object;return P(F,D,L)}function A(_){if(l.default.isSimpleTerm(_)){if(_.termType==="NamedNode")return h.createLink(_);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(_)}`)}if(_.pathType==="^")return h.createInv(A(_.items[0]));if(_.pathType==="!"){let F=[],D=[],L;"pathType"in _.items[0]&&_.items[0].pathType==="|"?L=_.items[0].items:L=_.items;for(let $ of L)if(l.default.isSimpleTerm($))F.push($);else if($.pathType==="^")D.push($.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify($)}`);let Q=h.createNps(F),Y=h.createInv(h.createNps(D));return D.length===0?Q:F.length===0?Y:h.createAlt([Q,Y])}if(_.pathType==="/")return h.createSeq(_.items.map(A));if(_.pathType==="|")return h.createAlt(_.items.map(A));if(_.pathType==="*")return h.createZeroOrMorePath(A(_.items[0]));if(_.pathType==="+")return h.createOneOrMorePath(A(_.items[0]));if(_.pathType==="?")return h.createZeroOrOnePath(A(_.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(_)}`)}function P(_,F,D){if(F.type===c.LINK)return[h.createPattern(_,F.iri,D)];if(F.type===c.INV)return P(D,F.path,_);if(F.type===c.SEQ){let L=_;return l.default.flatten(F.input.map((Q,Y)=>{const $=Y===F.input.length-1?D:C(),ue=P(L,Q,$);return $.termType==="Variable"&&(L=$),ue}))}return[h.createPath(_,F,D)]}function C(){let _=`?var${f++}`;return d.has(_)?C():(d.add(_),h.createTerm(_))}function B(_){if("pathType"in _.predicate)throw new Error("Trying to translate property path to quad.");return h.createPattern(_.subject,_.predicate,_.object,_.graph)}let H=Object.values(c);function V(_,F,D){if(_.type===c.GRAPH){if(D)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");_=V(_.input,_.name)}else if(_.type!==c.SERVICE)if(_.type===c.BGP)_.patterns=_.patterns.map(L=>(D&&(L.subject.equals(F)&&(L.subject=D),L.predicate.equals(F)&&(L.predicate=D),L.object.equals(F)&&(L.object=D)),L.graph.termType==="DefaultGraph"&&(L.graph=F),L));else if(_.type===c.PATH)D&&(_.subject.equals(F)&&(_.subject=D),_.object.equals(F)&&(_.object=D)),_.graph.termType==="DefaultGraph"&&(_.graph=F);else if(_.type===c.PROJECT&&!D)_.variables.some(L=>L.equals(F))||(D=C()),_.input=V(_.input,F,D);else if(_.type===c.EXTEND&&!D)_.variable.equals(F)&&(D=C()),_.input=V(_.input,F,D);else if(_.type===c.MINUS&&F.termType==="Variable")_.metadata={graphVariableFromParentScope:F},_.input=[V(_.input[0],F,D),V(_.input[1],F,D)];else for(let L of Object.keys(_))Array.isArray(_[L])?_[L]=_[L].map(Q=>V(Q,F,D)):H.indexOf(_[L].type)>=0?_[L]=V(_[L],F,D):D&&E(_[L])&&_[L].equals(F)&&(_[L]=D);return _}function G(_,F){if(F.type==="optional"){const D=j({type:"group",patterns:F.patterns});D.type===c.FILTER?_=h.createLeftJoin(_,D.input,D.expression):_=h.createLeftJoin(_,D)}else if(F.type==="minus"){const D=j({type:"group",patterns:F.patterns});_=h.createMinus(_,D)}else if(F.type==="bind")_=h.createExtend(_,F.variable,q(F.expression));else if(F.type==="service"){const D={type:"group",patterns:F.patterns},L=h.createService(j(D),F.name,F.silent);_=Z(_,L)}else{const D=j(F);_=Z(_,D)}return _}function Z(_,F){return _.type===c.BGP&&F.type===c.BGP?_=h.createBgp([..._.patterns,...F.patterns]):_.type===c.BGP&&_.patterns.length===0?_=F:F.type===c.BGP&&F.patterns.length===0||(_=h.createJoin([_,F])),_}function ae(_){let F=(_.values.length===0?[]:Object.keys(_.values[0])).map(h.createTerm.bind(h)),D=_.values.map(L=>{let Q=Object.keys(L);Q=Q.filter($=>L[$]!==void 0);let Y={};for(let $ of Q)Y[$]=L[$];return Y});return h.createValues(F,D)}function W(_,F){const D=_,L=[],Q={};if(D.variables=D.variables&&D.variables.map($=>te($,Q)),D.having=D.having&&D.having.map($=>te($,Q)),D.order=D.order&&D.order.map($=>te($,Q)),D.group||Object.keys(Q).length>0){const $=Object.keys(Q).map(ne=>se(Q[ne],h.createTerm(ne))),ue=[];if(D.group)for(const ne of D.group)if(l.default.isSimpleTerm(ne.expression))ue.push(ne.expression);else{const ce="variable"in ne?ne.variable:C();F=h.createExtend(F,ce,q(ne.expression)),ue.push(ce)}F=h.createGroup(F,ue,$)}if(D.having)for(let $ of D.having)F=h.createFilter(F,q($));_.values&&(F=h.createJoin([F,ae(_)]));let Y=[];if(_.queryType==="SELECT"||_.queryType==="DESCRIBE")if(_.variables.some($=>$&&l.default.isWildcard($)))Y=Object.values(N(_)).sort(($,ue)=>$.value.localeCompare(ue.value));else for(let $ of _.variables)E($)||!("variable"in $)?Y.push($):$.variable&&(Y.push($.variable),L.push($));for(let $ of L)F=h.createExtend(F,$.variable,q($.expression));return D.order&&(F=h.createOrderBy(F,D.order.map($=>{let ue=q($.expression);return $.descending&&(ue=h.createOperatorExpression("desc",[ue])),ue}))),_.queryType==="SELECT"&&(F=h.createProject(F,Y)),D.distinct&&(F=h.createDistinct(F)),D.reduced&&(F=h.createReduced(F)),_.queryType==="CONSTRUCT"?F=h.createConstruct(F,(_.template||[]).map(B)):_.queryType==="ASK"?F=h.createAsk(F):_.queryType==="DESCRIBE"&&(F=h.createDescribe(F,Y)),(D.offset||D.limit)&&(F=h.createSlice(F,D.offset||0,D.limit)),D.from&&(F=h.createFrom(F,D.from.default,D.from.named)),F}function te(_,F){if("type"in _&&_.type==="aggregate"){let D=!1,L;for(let Q of Object.keys(F))if(r(F[Q],_)){L=h.createTerm(Q),D=!0;break}return D||(L=C(),F[(0,t.termToString)(L)]=_),L}return"expression"in _&&_.expression?{..._,expression:te(_.expression,F)}:"args"in _&&_.args?{..._,args:_.args.map(D=>te(D,F))}:_}function se(_,F){if(_.type!=="aggregate"||!_.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(_)}`);const D=q(_);return D.variable=F,D}function pe(_){return _.updates.length===1?le(_.updates[0]):h.createCompositeUpdate(_.updates.map(le))}function le(_){if("type"in _){if(_.type==="load")return Ae(_);if(_.type==="clear"||_.type==="create"||_.type==="drop")return Ie(_);if(_.type==="add"||_.type==="copy"||_.type==="move")return be(_)}else if(_.updateType==="insertdelete"||_.updateType==="deletewhere"||_.updateType==="delete"||_.updateType==="insert")return Ee(_);throw new Error(`Unknown update type ${JSON.stringify(_)}`)}function Ee(_){if(!p)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let F=[],D=[],L;if(_.delete&&(F=l.default.flatten(_.delete.map(Q=>Oe(Q,_.graph)))),_.insert&&(D=l.default.flatten(_.insert.map(Q=>Oe(Q,_.graph)))),_.where&&_.where.length>0){L=j({type:"group",patterns:_.where});const Q=_.using;Q?L=h.createFrom(L,Q.default,Q.named):_.graph&&(L=V(L,_.graph))}else _.updateType==="deletewhere"&&F.length>0&&(L=h.createBgp(F));return h.createDeleteInsert(F.length>0?F:void 0,D.length>0?D:void 0,L)}function Oe(_,F){let D=F;_.type==="graph"&&(D=_.name);let L=_.triples;return D&&(L=L.map(Q=>Object.assign(Q,{graph:D}))),L.map(B)}function Ie(_){let F;switch(l.default.isSimpleTerm(_.graph)?F=_.graph:_.graph.all?F="ALL":_.graph.default?F="DEFAULT":_.graph.named?F="NAMED":F=_.graph.name,_.type){case"clear":return h.createClear(F,_.silent);case"create":return h.createCreate(F,_.silent);case"drop":return h.createDrop(F,_.silent)}}function Ae(_){return h.createLoad(_.source,_.destination,_.silent)}function be(_){const F=_.source.default?"DEFAULT":_.source.name,D=_.destination.default?"DEFAULT":_.destination.name;switch(_.type){case"copy":return h.createCopy(F,D,_.silent);case"move":return h.createMove(F,D,_.silent);case"add":return h.createAdd(F,D,_.silent)}}function ee(_){const F={},D=Array.from(d).reduce((Q,Y)=>(Q[Y]=!0,Q),{});return l.default.mapOperation(_,{[i.types.DELETE_INSERT]:Q=>({result:h.createDeleteInsert(Q.delete,Q.insert,Q.where&&ee(Q.where)),recurse:!1}),[i.types.PATH]:(Q,Y)=>({result:Y.createPath(L(Q.subject),Q.predicate,L(Q.object),L(Q.graph)),recurse:!1}),[i.types.PATTERN]:(Q,Y)=>({result:Y.createPattern(L(Q.subject),L(Q.predicate),L(Q.object),L(Q.graph)),recurse:!1}),[i.types.CONSTRUCT]:Q=>({result:h.createConstruct(ee(Q.input),Q.template),recurse:!1})});function L(Q){if(Q.termType==="BlankNode"){let Y=F[Q.value];return Y||(Y=l.default.createUniqueVariable(Q.value,D,h.dataFactory),D[Y.value]=!0,F[Q.value]=Y),Y}return Q.termType==="Quad"?h.dataFactory.quad(L(Q.subject),L(Q.predicate),L(Q.object),L(Q.graph)):Q}}return cu}var Ha={},gd={},Hn={},Mj={},Lu={},vd={},s_={},wK;function Q_e(){if(wK)return s_;wK=1,Object.defineProperty(s_,"__esModule",{value:!0}),s_.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return s_.BlankNode=a,s_}var c_={},l_={},SK;function V_e(){if(SK)return l_;SK=1,Object.defineProperty(l_,"__esModule",{value:!0}),l_.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return l_.DefaultGraph=a,a.INSTANCE=new a,l_}var d_={},f_={},EK;function Rq(){if(EK)return f_;EK=1,Object.defineProperty(f_,"__esModule",{value:!0}),f_.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return f_.NamedNode=a,f_}var AK;function H_e(){if(AK)return d_;AK=1,Object.defineProperty(d_,"__esModule",{value:!0}),d_.Literal=void 0;const a=Rq();class e{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=e.RDF_LANGUAGE_STRING,this.direction=""):r?"termType"in r?(this.language="",this.datatype=r,this.direction=""):(this.language=r.language,this.datatype=r.direction?e.RDF_DIRECTIONAL_LANGUAGE_STRING:e.RDF_LANGUAGE_STRING,this.direction=r.direction||""):(this.language="",this.datatype=e.XSD_STRING,this.direction="")}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&(n.direction===this.direction||!n.direction&&this.direction==="")&&this.datatype.equals(n.datatype)}}return d_.Literal=e,e.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.RDF_DIRECTIONAL_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),e.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),d_}var p_={},OK;function k_e(){if(OK)return p_;OK=1,Object.defineProperty(p_,"__esModule",{value:!0}),p_.Quad=void 0;class a{constructor(u,n,r,t){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=t}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return p_.Quad=a,p_}var h_={},xK;function z_e(){if(xK)return h_;xK=1,Object.defineProperty(h_,"__esModule",{value:!0}),h_.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return h_.Variable=a,h_}var RK;function h6e(){if(RK)return c_;RK=1,Object.defineProperty(c_,"__esModule",{value:!0}),c_.DataFactory=void 0;const a=Q_e(),e=V_e(),u=H_e(),n=Rq(),r=k_e(),t=z_e();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,c){return new u.Literal(s,c)}variable(s){return new t.Variable(s)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(s,c,d,f){return new r.Quad(s,c,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return c_.DataFactory=o,c_}var NK;function G_e(){return NK||(NK=1,(function(a){var e=vd&&vd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=vd&&vd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Q_e(),a),u(h6e(),a),u(V_e(),a),u(H_e(),a),u(Rq(),a),u(k_e(),a),u(z_e(),a)})(vd)),vd}var IK;function y6e(){if(IK)return Lu;IK=1,Object.defineProperty(Lu,"__esModule",{value:!0}),Lu.termToString=u,Lu.getLiteralValue=n,Lu.getLiteralType=r,Lu.getLiteralLanguage=t,Lu.getLiteralDirection=i,Lu.stringToTerm=o,Lu.quadToStringQuad=l,Lu.stringQuadToQuad=s;const a=G_e(),e=new a.DataFactory;function u(c){if(c)switch(c.termType){case"NamedNode":return c.value;case"BlankNode":return"_:"+c.value;case"Literal":const d=c;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${u(c.subject)} ${u(c.predicate)} ${u(c.object)}${c.graph.termType==="DefaultGraph"?"":" "+u(c.graph)}>>`;case"Variable":return"?"+c.value;case"DefaultGraph":return c.value}}function n(c){const d=/^"([^]*)"/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]}function r(c){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function t(c){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const p=f.indexOf("--");return p>=0&&(f=f.slice(0,p)),f}return""}function i(c){const d=c.indexOf("--",c.lastIndexOf('"'));if(d>=0){const f=c.slice(d+2,c.length);if(f==="ltr"||f==="rtl")return f;throw new Error(c+" is not a literal with a valid direction")}return""}function o(c,d){if(d=d||e,!c||!c.length)return d.defaultGraph();switch(c[0]){case"_":return d.blankNode(c.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(c.substr(1));case'"':const f=t(c),p=i(c),h=d.namedNode(r(c));return d.literal(n(c),f?{language:f,direction:p}:h);default:if(c[0]==="<"&&c.length>4&&c[1]==="<"&&c[c.length-1]===">"&&c[c.length-2]===">"){const g=c.slice(2,-2).trim();let v=[],m=0,T=0,w=!1;for(let E=0;E<g.length;E++){const S=g[E];if(S==="<"&&m++,S===">"){if(m===0)throw new Error("Found closing tag without opening tag in "+c);m--}if(S==='"'){let N=!1,j=E;for(;j-- >0&&g[j]==="\\";)N=!N;N||(w=!w)}if(S===" "&&!w&&m===0){for(v.push(g.slice(T,E));g[E+1]===" ";)E+=1;T=E+1}}if(m!==0)throw new Error("Found opening tag without closing tag in "+c);if(v.push(g.slice(T,g.length)),v.length!==3&&v.length!==4)throw new Error("Nested quad syntax error "+c);return v=v.map(E=>E.startsWith("<")&&!E.includes(" ")?E.slice(1,-1):E),d.quad(o(v[0]),o(v[1]),o(v[2]),v[3]?o(v[3]):void 0)}return d.namedNode(c)}}function l(c){return{subject:u(c.subject),predicate:u(c.predicate),object:u(c.object),graph:u(c.graph)}}function s(c,d){return d=d||e,d.quad(o(c.subject,d),o(c.predicate,d),o(c.object,d),o(c.graph,d))}return Lu}var DK;function $_e(){return DK||(DK=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralDirection=a.getLiteralLanguage=void 0;const e=y6e();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralDirection",{enumerable:!0,get:function(){return e.getLiteralDirection}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(Mj)),Mj}var _d={},Fr={},FK;function m6e(){if(FK)return Fr;FK=1,Object.defineProperty(Fr,"__esModule",{value:!0}),Fr.TRIPLE_TERM_NAMES=Fr.QUAD_TERM_NAMES=void 0,Fr.getTerms=u,Fr.getTermsNested=n,Fr.getNamedTerms=r,Fr.collectNamedTerms=t,Fr.forEachTerms=i,Fr.forEachTermsNested=o,Fr.filterTerms=l,Fr.filterTermsNested=s,Fr.filterQuadTermNames=c,Fr.filterQuadTermNamesNested=d,Fr.mapTerms=f,Fr.mapTermsNested=p,Fr.reduceTerms=h,Fr.reduceTermsNested=g,Fr.everyTerms=v,Fr.everyTermsNested=m,Fr.someTerms=T,Fr.someTermsNested=w,Fr.getValueNestedPath=E,Fr.matchTerm=S,Fr.matchPattern=N,Fr.matchPatternComplete=j,Fr.matchPatternMappings=q;const a=G_e(),e=new a.DataFactory;Fr.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Fr.TRIPLE_TERM_NAMES=["subject","predicate","object"];function u(O,I){return I&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function n(O,I){const A=[];for(const P of u(O,I))P.termType==="Quad"?n(P,I).forEach(C=>A.push(C)):A.push(P);return A}function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function t(O,I,A){const P={};return O.forEach(C=>P[C.key]=C.value),I&&(P.subject=P.subject||I("subject"),P.predicate=P.predicate||I("predicate"),P.object=P.object||I("object"),P.graph=P.graph||I("graph")),(A||e).quad(P.subject,P.predicate,P.object,P.graph)}function i(O,I){I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph")}function o(O,I,A=[]){O.subject.termType==="Quad"?o(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]),O.predicate.termType==="Quad"?o(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]),O.object.termType==="Quad"?o(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]),O.graph.termType==="Quad"?o(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"])}function l(O,I){const A=[];return I(O.subject,"subject")&&A.push(O.subject),I(O.predicate,"predicate")&&A.push(O.predicate),I(O.object,"object")&&A.push(O.object),I(O.graph,"graph")&&A.push(O.graph),A}function s(O,I,A=[]){let P=[];return O.subject.termType==="Quad"?P=[...P,...s(O.subject,I,[...A,"subject"])]:I(O.subject,[...A,"subject"])&&P.push(O.subject),O.predicate.termType==="Quad"?P=[...P,...s(O.predicate,I,[...A,"predicate"])]:I(O.predicate,[...A,"predicate"])&&P.push(O.predicate),O.object.termType==="Quad"?P=[...P,...s(O.object,I,[...A,"object"])]:I(O.object,[...A,"object"])&&P.push(O.object),O.graph.termType==="Quad"?P=[...P,...s(O.graph,I,[...A,"graph"])]:I(O.graph,[...A,"graph"])&&P.push(O.graph),P}function c(O,I){const A=[];return I(O.subject,"subject")&&A.push("subject"),I(O.predicate,"predicate")&&A.push("predicate"),I(O.object,"object")&&A.push("object"),I(O.graph,"graph")&&A.push("graph"),A}function d(O,I,A=[]){let P=[];const C=[...A,"subject"];O.subject.termType==="Quad"?P=[...P,...d(O.subject,I,C)]:I(O.subject,C)&&P.push(C);const B=[...A,"predicate"];O.predicate.termType==="Quad"?P=[...P,...d(O.predicate,I,B)]:I(O.predicate,B)&&P.push(B);const H=[...A,"object"];O.object.termType==="Quad"?P=[...P,...d(O.object,I,H)]:I(O.object,H)&&P.push(H);const V=[...A,"graph"];return O.graph.termType==="Quad"?P=[...P,...d(O.graph,I,V)]:I(O.graph,V)&&P.push(V),P}function f(O,I,A){return(A||e).quad(I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph"))}function p(O,I,A,P=[]){return(A||e).quad(O.subject.termType==="Quad"?p(O.subject,I,A,[...P,"subject"]):I(O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?p(O.predicate,I,A,[...P,"predicate"]):I(O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?p(O.object,I,A,[...P,"object"]):I(O.object,[...P,"object"]),O.graph.termType==="Quad"?p(O.graph,I,A,[...P,"graph"]):I(O.graph,[...P,"graph"]))}function h(O,I,A){let P=A;return P=I(P,O.subject,"subject"),P=I(P,O.predicate,"predicate"),P=I(P,O.object,"object"),I(P,O.graph,"graph")}function g(O,I,A,P=[]){let C=A;return O.subject.termType==="Quad"?C=g(O.subject,I,C,[...P,"subject"]):C=I(C,O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?C=g(O.predicate,I,C,[...P,"predicate"]):C=I(C,O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?C=g(O.object,I,C,[...P,"object"]):C=I(C,O.object,[...P,"object"]),O.graph.termType==="Quad"?C=g(O.graph,I,C,[...P,"graph"]):C=I(C,O.graph,[...P,"graph"]),C}function v(O,I){return I(O.subject,"subject")&&I(O.predicate,"predicate")&&I(O.object,"object")&&I(O.graph,"graph")}function m(O,I,A=[]){return(O.subject.termType==="Quad"?m(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))&&(O.predicate.termType==="Quad"?m(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))&&(O.object.termType==="Quad"?m(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))&&(O.graph.termType==="Quad"?m(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}function T(O,I){return I(O.subject,"subject")||I(O.predicate,"predicate")||I(O.object,"object")||I(O.graph,"graph")}function w(O,I,A=[]){return(O.subject.termType==="Quad"?w(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))||(O.predicate.termType==="Quad"?w(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))||(O.object.termType==="Quad"?w(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))||(O.graph.termType==="Quad"?w(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}function E(O,I){if(I.length===0)return O;if(O.termType==="Quad")return E(O[I[0]],I.slice(1));throw new Error(`Tried to get ${I[0]} from term of type ${O.termType}`)}function S(O,I){return!I||I.termType==="Variable"||I.termType==="Quad"&&O.termType==="Quad"&&j(O,I)||I.equals(O)}function N(O,I,A,P,C){return S(O.subject,I)&&S(O.predicate,A)&&S(O.object,P)&&S(O.graph,C)}function j(O,I){return N(O,I.subject,I.predicate,I.object,I.graph)}function q(O,I,A={}){const P={};function C(B,H){return v(B,(V,G)=>{var Z,ae;const W=H[G];switch(V.termType){case"Variable":return A.skipVarMapping&&W.termType==="Variable"||((ae=(Z=P[V.value])===null||Z===void 0?void 0:Z.equals(W))!==null&&ae!==void 0?ae:(P[V.value]=W,!0));case"Quad":return W.termType==="Quad"&&C(V,W);default:return V.equals(W)}})}return C(I,O)&&(A.returnMappings?P:!0)}return Fr}var Di={},PK;function b6e(){if(PK)return Di;PK=1,Object.defineProperty(Di,"__esModule",{value:!0}),Di.TERM_TYPES=void 0,Di.uniqTerms=e,Di.getTermsOfType=u,Di.getNamedNodes=n,Di.getBlankNodes=r,Di.getLiterals=t,Di.getVariables=i,Di.getDefaultGraphs=o,Di.getQuads=l;const a=$_e();Di.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function e(s){const c={};return s.filter(d=>{const f=(0,a.termToString)(d);return!(f in c)&&(c[f]=!0)})}function u(s,c){return s.filter(d=>d.termType===c)}function n(s){return u(s,"NamedNode")}function r(s){return u(s,"BlankNode")}function t(s){return u(s,"Literal")}function i(s){return u(s,"Variable")}function o(s){return u(s,"DefaultGraph")}function l(s){return u(s,"Quad")}return Di}var jK;function g6e(){return jK||(jK=1,(function(a){var e=_d&&_d.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=_d&&_d.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(m6e(),a),u(b6e(),a)})(_d)),_d}var Cj={exports:{}};var MK;function Nq(){return MK||(MK=1,(function(a){(function(){var e;function u(n,r){var t=this instanceof u?this:e;if(t.reset(r),typeof n=="string"&&n.length>0&&t.hash(n),t!==this)return t}u.prototype.hash=function(n){var r,t,i,o,l;switch(l=n.length,this.len+=l,t=this.k1,i=0,this.rem){case 0:t^=l>i?n.charCodeAt(i++)&65535:0;case 1:t^=l>i?(n.charCodeAt(i++)&65535)<<8:0;case 2:t^=l>i?(n.charCodeAt(i++)&65535)<<16:0;case 3:t^=l>i?(n.charCodeAt(i)&255)<<24:0,t^=l>i?(n.charCodeAt(i++)&65280)>>8:0}if(this.rem=l+this.rem&3,l-=this.rem,l>0){for(r=this.h1;t=t*11601+(t&65535)*3432906752&4294967295,t=t<<15|t>>>17,t=t*13715+(t&65535)*461832192&4294967295,r^=t,r=r<<13|r>>>19,r=r*5+3864292196&4294967295,!(i>=l);)t=n.charCodeAt(i++)&65535^(n.charCodeAt(i++)&65535)<<8^(n.charCodeAt(i++)&65535)<<16,o=n.charCodeAt(i++),t^=(o&255)<<24^(o&65280)>>8;switch(t=0,this.rem){case 3:t^=(n.charCodeAt(i+2)&65535)<<16;case 2:t^=(n.charCodeAt(i+1)&65535)<<8;case 1:t^=n.charCodeAt(i)&65535}this.h1=r}return this.k1=t,this},u.prototype.result=function(){var n,r;return n=this.k1,r=this.h1,n>0&&(n=n*11601+(n&65535)*3432906752&4294967295,n=n<<15|n>>>17,n=n*13715+(n&65535)*461832192&4294967295,r^=n),r^=this.len,r^=r>>>16,r=r*51819+(r&65535)*2246770688&4294967295,r^=r>>>13,r=r*44597+(r&65535)*3266445312&4294967295,r^=r>>>16,r>>>0},u.prototype.reset=function(n){return this.h1=typeof n=="number"?n:0,this.rem=this.k1=this.len=0,this},e=new u,a.exports=u})()})(Cj)),Cj.exports}var CK;function v6e(){if(CK)return Hn;CK=1,Object.defineProperty(Hn,"__esModule",{value:!0}),Hn.isomorphic=n,Hn.getBijection=r,Hn.getBijectionInner=t,Hn.hashValues=o,Hn.hasValue=l,Hn.getQuadsWithBlankNodes=s,Hn.getQuadsWithoutBlankNodes=c,Hn.indexGraph=d,Hn.deindexGraph=f,Hn.uniqGraph=p,Hn.getGraphBlankNodes=h,Hn.hashTerms=g,Hn.hashTerm=v,Hn.hashNumber=m,Hn.quadToSignature=T,Hn.termToSignature=w,Hn.isTermGrounded=E;const a=$_e(),e=g6e(),u=Nq();function n(S,N){return!!r(S,N)}function r(S,N){const j=d(c(S)),q=d(c(N));if(Object.keys(j).length!==Object.keys(q).length)return null;for(const C in j)if(j[C]!==q[C])return null;const O=p(s(S)),I=p(s(N)),A=h(S),P=h(N);return t(O,I,A,P)}function t(S,N,j,q,O,I){O||(O={}),I||(I={});const[A,P]=g(S,j,O),[C,B]=g(N,q,I);if(Object.keys(A).length!==Object.keys(C).length)return null;for(const V in A)if(!l(C,A[V]))return null;let H={};for(const V of j){const G=(0,a.termToString)(V),Z=P[G];for(const ae in B)if(B[ae]===Z){H[G]=ae,delete B[ae];break}}if(!i(Object.keys(H).sort(),j.map(a.termToString).sort())||!i(o(H).sort(),q.map(a.termToString).sort())){H=null;for(const V of j){const G=(0,a.termToString)(V);if(!A[G])for(const Z of q){const ae=(0,a.termToString)(Z);if(!C[ae]&&P[G]===B[ae]){const W=m(G);H=t(S,N,j,q,Object.assign(Object.assign({},A),{[G]:W}),Object.assign(Object.assign({},C),{[ae]:W}))}}}}return H}function i(S,N){if(S.length!==N.length)return!1;for(let j=S.length;j--;)if(S[j]!==N[j])return!1;return!0}function o(S){const N=[];for(const j in S)N.push(S[j]);return N}function l(S,N){for(const j in S)if(S[j]===N)return!0;return!1}function s(S){return S.filter(N=>(0,e.someTerms)(N,j=>j.termType==="BlankNode"||j.termType==="Quad"&&(0,e.getTermsNested)(j).some(q=>q.termType==="BlankNode")))}function c(S){return S.filter(N=>(0,e.everyTerms)(N,j=>j.termType!=="BlankNode"&&!(j.termType==="Quad"&&(0,e.getTermsNested)(j).some(q=>q.termType==="BlankNode"))))}function d(S){const N={};for(const j of S)N[JSON.stringify((0,a.quadToStringQuad)(j))]=!0;return N}function f(S){return Object.keys(S).map(N=>(0,a.stringQuadToQuad)(JSON.parse(N)))}function p(S){return f(d(S))}function h(S){return(0,e.uniqTerms)(S.map(N=>(0,e.getBlankNodes)((0,e.getTermsNested)(N))).reduce((N,j)=>N.concat(j),[]))}function g(S,N,j){const q=Object.assign({},j),O={};let I=!0;for(;I;){const A=Object.keys(q).length;for(const C of N){const B=(0,a.termToString)(C);if(!q[B]){const[H,V]=v(C,S,q);H&&(q[B]=V),O[B]=V}}const P=new Map;for(const C in O){const B=O[C];P.get(B)===void 0?P.set(B,C):P.set(B,!1)}for(const[C,B]of P.entries())B&&(q[B]=C);I=A!==Object.keys(q).length}return[q,O]}function v(S,N,j){const q=[];let O=!0;for(const A of N){const P=(0,e.getTermsNested)(A);if(P.some(C=>C.equals(S))){q.push(T(A,j,S));for(const C of P)!E(C,j)&&!C.equals(S)&&(O=!1)}}const I=m(q.sort().join(""));return[O,I]}function m(S){return u().hash(S).result()}function T(S,N,j){return(0,e.getTerms)(S).map(q=>w(q,N,j)).join("|")}function w(S,N,j){var q;return S.equals(j)?"@self":S.termType==="BlankNode"?((q=N[(0,a.termToString)(S)])===null||q===void 0?void 0:q.toString())||"@blank":S.termType==="Quad"?`<${T(S,N,j)}>`:(0,a.termToString)(S)}function E(S,N){return S.termType!=="BlankNode"&&!(S.termType==="Quad"&&(0,e.getTermsNested)(S).some(j=>!E(j,N)))||!!N[(0,a.termToString)(S)]}return Hn}var LK;function _6e(){return LK||(LK=1,(function(a){var e=gd&&gd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=gd&&gd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(v6e(),a)})(gd)),gd}var qK;function T6e(){if(qK)return Ha;qK=1;var a=Ha&&Ha.__createBinding||(Object.create?(function(R,k,K,de){de===void 0&&(de=K);var ge=Object.getOwnPropertyDescriptor(k,K);(!ge||("get"in ge?!k.__esModule:ge.writable||ge.configurable))&&(ge={enumerable:!0,get:function(){return k[K]}}),Object.defineProperty(R,de,ge)}):(function(R,k,K,de){de===void 0&&(de=K),R[de]=k[K]})),e=Ha&&Ha.__setModuleDefault||(Object.create?(function(R,k){Object.defineProperty(R,"default",{enumerable:!0,value:k})}):function(R,k){R.default=k}),u=Ha&&Ha.__importStar||function(R){if(R&&R.__esModule)return R;var k={};if(R!=null)for(var K in R)K!=="default"&&Object.prototype.hasOwnProperty.call(R,K)&&a(k,R,K);return e(k,R),k},n=Ha&&Ha.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(Ha,"__esModule",{value:!0}),Ha.toSparqlJs=Ha.toSparql=void 0;const r=_6e(),t=tP(),i=$n(),o=u(Q4()),l=n(rP()),s=n(xq()),c=o.types,d=o.expressionTypes;let f;const p=new l.default;function h(R,k={}){return new i.Generator(k).stringify(g(R))}Ha.toSparql=h;function g(R){v(),R=Le(R);let k=m(R);return k.type==="group"?k.patterns[0]:k}Ha.toSparqlJs=g;function v(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function m(R){switch(R.type!==c.EXTEND&&R.type!==c.ORDER_BY&&R.type!==c.GRAPH&&(f.project=!1),R.type){case c.EXPRESSION:return T(R);case c.ASK:return Ae(R,c.ASK);case c.BGP:return C(R);case c.CONSTRUCT:return B(R);case c.DESCRIBE:return Ae(R,c.DESCRIBE);case c.DISTINCT:return H(R);case c.EXTEND:return V(R);case c.FROM:return G(R);case c.FILTER:return Z(R);case c.GRAPH:return ae(R);case c.GROUP:return W(R);case c.JOIN:return te(R);case c.LEFT_JOIN:return se(R);case c.MINUS:return pe(R);case c.NOP:return{};case c.ORDER_BY:return le(R);case c.PATH:return Ee(R);case c.PATTERN:return Oe(R);case c.PROJECT:return Ae(R,c.PROJECT);case c.REDUCED:return ee(R);case c.SERVICE:return _(R);case c.SLICE:return F(R);case c.UNION:return D(R);case c.VALUES:return L(R);case c.COMPOSITE_UPDATE:return Ce(R);case c.DELETE_INSERT:return Ve(R);case c.LOAD:return Ke(R);case c.CLEAR:return Ye(R);case c.CREATE:return oe(R);case c.DROP:return X(R);case c.ADD:return he(R);case c.MOVE:return ve(R);case c.COPY:return ye(R)}throw new Error(`Unknown Operation type ${R.type}`)}function T(R){switch(R.expressionType){case d.AGGREGATE:return S(R);case d.EXISTENCE:return N(R);case d.NAMED:return j(R);case d.OPERATOR:return q(R);case d.TERM:return O(R);case d.WILDCARD:return I(R)}throw new Error(`Unknown Expression Operation type ${R.expressionType}`)}function w(R){switch(R.type){case c.ALT:return Q(R);case c.INV:return Y(R);case c.LINK:return $(R);case c.NPS:return ue(R);case c.ONE_OR_MORE_PATH:return ne(R);case c.SEQ:return ce(R);case c.ZERO_OR_MORE_PATH:return Se(R);case c.ZERO_OR_ONE_PATH:return xe(R)}throw new Error(`Unknown Path type ${R.type}`)}function E(R){return(0,t.termToString)(R)}function S(R){const k={expression:T(R.expression),type:"aggregate",aggregation:R.aggregator,distinct:R.distinct};return R.separator&&(k.separator=R.separator),k}function N(R){return{type:"operation",operator:R.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([m(R.input)])}]}}function j(R){return{type:"functionCall",function:R.name,args:R.args.map(T)}}function q(R){if(R.operator==="desc"){const K={expression:T(R.args[0])};return K.descending=!0,K}const k={type:"operation",operator:R.operator,args:R.args.map(T)};return(k.operator==="in"||k.operator==="notin")&&(k.args=[k.args[0]].concat([k.args.slice(1)])),k}function O(R){return R.term}function I(R){return R.wildcard}function A(R){return Array.isArray(R)?R.length===1?R[0]:{type:"group",patterns:R}:R}function P(R){return R}function C(R){let k=R.patterns.map(Oe);return k.length===0?null:{type:"bgp",triples:k}}function B(R){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:R.template.map(Oe),where:s.default.flatten([m(R.input)])}}function H(R){let k=m(R.input);return k.patterns[0].distinct=!0,k}function V(R){return f.project?(f.extend.push(R),m(R.input)):s.default.flatten([m(R.input),{type:"bind",variable:R.variable,expression:T(R.expression)}])}function G(R){const k=m(R.input);let K=k;return k.type==="group"&&(K=k.patterns[0]),K.from={default:R.default,named:R.named},k}function Z(R){return{type:"group",patterns:s.default.flatten([m(R.input),{type:"filter",expression:T(R.expression)}])}}function ae(R){return{type:"graph",patterns:s.default.flatten([m(R.input)]),name:R.name}}function W(R){const k=m(R.input),K=R.aggregates.map(P);return f.aggregates.push(...K),f.group.push(...R.variables),k}function te(R){return s.default.flatten(R.input.map(m)).reduce((K,de)=>(de.type!=="bgp"||K.length==0||K[K.length-1].type!=="bgp"?K.push(de):K[K.length-1].triples.push(...de.triples),K),[])}function se(R){const k={type:"optional",patterns:[m(R.input[1])]};return R.expression&&k.patterns.push({type:"filter",expression:T(R.expression)}),k.patterns=s.default.flatten(k.patterns),s.default.flatten([m(R.input[0]),k])}function pe(R){let k=m(R.input[1]);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),s.default.flatten([m(R.input[0]),{type:"minus",patterns:k}])}function le(R){return f.order.push(...R.expressions),m(R.input)}function Ee(R){return{type:"bgp",triples:[{subject:R.subject,predicate:w(R.predicate),object:R.object}]}}function Oe(R){return{subject:R.subject,predicate:R.predicate,object:R.object}}function Ie(R,k){let K=s.default.isSimpleTerm(R)?E(R):R;if(typeof K=="string"){if(k[K])return k[K]}else if(Array.isArray(R))R=R.map(de=>Ie(de,k));else for(let de of Object.keys(R))R[de]=Ie(R[de],k);return R}function Ae(R,k){const K={type:"query",prefixes:{}},de=K;let ge;k===c.PROJECT?(K.queryType="SELECT",ge=R.variables):k===c.ASK?K.queryType="ASK":k===c.DESCRIBE&&(K.queryType="DESCRIBE",ge=R.terms);const Ue=f.extend,je=f.group,ze=f.aggregates,at=f.order;v(),f.project=!0;let fe=s.default.flatten([m(R.input)]);fe.length===1&&fe[0].type==="group"&&(fe=fe[0].patterns),K.where=fe;let Te={};for(let Me of f.aggregates)Te[E(Me.variable)]=T(Me);let qe={};for(let Me=f.extend.length-1;Me>=0;--Me){let st=f.extend[Me];qe[E(st.variable)]=Ie(T(st.expression),Te)}f.group.length>0&&(de.group=f.group.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return{expression:Me}})),f.order.length>0&&(de.order=f.order.map(m).map(Me=>Me.descending?Me:{expression:Me})),ge&&(de.variables=ge.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return Me}),de.variables.length===0&&(de.variables=[new i.Wildcard]));const it=Object.entries(qe);if(it.length>0){de.where=de.where||[];for(const[Me,st]of it)de.where.push({type:"bind",variable:(0,t.stringToTerm)(Me),expression:st})}if(K.where.length>0&&K.where[K.where.length-1].type==="filter"){const Me=K.where[K.where.length-1];be(Me,Object.keys(Te))&&(de.having=s.default.flatten([Ie(Me.expression,Te)]),K.where.splice(-1))}return f.extend=Ue,f.group=je,f.aggregates=ze,f.order=at,{type:"group",patterns:[de]}}function be(R,k){return s.default.isSimpleTerm(R)?k.indexOf(E(R))>=0:Array.isArray(R)?R.some(K=>be(K,k)):R===Object(R)?Object.keys(R).some(K=>be(R[K],k)):k.indexOf(R)>=0}function ee(R){let k=m(R.input);return k.patterns[0].reduced=!0,k}function _(R){let k=m(R.input);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),{type:"service",name:R.name,silent:R.silent,patterns:k}}function F(R){let k=m(R.input),K=k;return k.type&&k.type==="group"&&(K=k.patterns[0]),R.start!==0&&(K.offset=R.start),R.length!==void 0&&(K.limit=R.length),k}function D(R){return{type:"union",patterns:R.input.map(m).map(A)}}function L(R){return{type:"values",values:R.bindings.map(k=>{let K={};for(let de of R.variables){let ge=`?${de.value}`;k[ge]?K[ge]=k[ge]:K[ge]=void 0}return K})}}function Q(R){const k=R.input.map(w);return k.every(K=>"pathType"in K&&K.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(k.map(K=>K.items))}]}:{type:"path",pathType:"|",items:k}}function Y(R){if(R.path.type===c.NPS){const k=R.path.iris.map(K=>({type:"path",pathType:"^",items:[K]}));return k.length<=1?{type:"path",pathType:"!",items:k}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:k}]}}return{type:"path",pathType:"^",items:[w(R.path)]}}function $(R){return R.iri}function ue(R){return R.iris.length<=1?{type:"path",pathType:"!",items:R.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:R.iris}]}}function ne(R){return{type:"path",pathType:"+",items:[w(R.path)]}}function ce(R){return{type:"path",pathType:"/",items:R.input.map(w)}}function Se(R){return{type:"path",pathType:"*",items:[w(R.path)]}}function xe(R){return{type:"path",pathType:"?",items:[w(R.path)]}}function Ce(R){const k=R.updates.map(K=>m(K).updates[0]);return{prefixes:{},type:"update",updates:k}}function Ve(R){var k;let K=R.where,de;if(K&&K.type===c.FROM){let Ue=K;K=Ue.input,de={default:Ue.default,named:Ue.named}}const ge=[{updateType:"insertdelete",delete:Ne(R.delete||[]),insert:Ne(R.insert||[])}];if(de&&(ge[0].using=de),!K||K.type===c.BGP&&K.patterns.length===0)ge[0].where=[];else{const Ue=[];let je=m(Pe(K,Ue));if(je.type==="group"?ge[0].where=je.patterns:ge[0].where=[je],Ue.length>0){if(Ue.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((k=Ue[0])===null||k===void 0?void 0:k.value)!==""&&(ge[0].where=[{type:"graph",patterns:ge[0].where,name:Ue[0]}])}}return!R.delete&&!R.where?(ge[0].updateType="insert",delete ge[0].delete,delete ge[0].where):!R.insert&&!R.where?(delete ge[0].insert,delete ge[0].where,R.delete.some(Ue=>Ue.subject.termType==="Variable"||Ue.predicate.termType==="Variable"||Ue.object.termType==="Variable")?ge[0].updateType="deletewhere":ge[0].updateType="delete"):!R.insert&&R.where&&R.where.type==="bgp"&&(0,r.isomorphic)(R.delete,R.where.patterns)&&(delete ge[0].where,ge[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:ge}}function Ke(R){const k=[{type:"load",silent:!!R.silent,source:R.source}];return R.destination&&(k[0].destination=R.destination),{prefixes:{},type:"update",updates:k}}function Ye(R){return J(R,"clear")}function oe(R){return J(R,"create")}function X(R){return J(R,"drop")}function J(R,k){const K=[{type:k,silent:!!R.silent}];return R.source==="DEFAULT"?K[0].graph={default:!0}:R.source==="NAMED"?K[0].graph={named:!0}:R.source==="ALL"?K[0].graph={all:!0}:K[0].graph={type:"graph",name:R.source},{prefixes:{},type:"update",updates:K}}function he(R){return re(R,"add")}function ve(R){return re(R,"move")}function ye(R){return re(R,"copy")}function re(R,k){const K=[{type:k,silent:!!R.silent}];return K[0].source=R.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.source},K[0].destination=R.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.destination},{prefixes:{},type:"update",updates:K}}function Ne(R){if(!R)return[];const k={};return R.forEach(K=>{const de=K.graph.value;k[de]||(k[de]=[]),k[de].push(K)}),Object.keys(k).map(K=>K===""?{type:"bgp",triples:k[K].map(Oe)}:{type:"graph",triples:k[K].map(Oe),name:k[K][0].graph})}function Le(R){return Pe(R,[])}function Pe(R,k){if(Array.isArray(R))return R.map(je=>Pe(je,k));if(!R.type||R.type===c.DELETE_INSERT)return R;if((R.type===c.PATTERN||R.type===c.PATH)&&R.graph)return k.push(R.graph),R.graph.name!==""?R.type===c.PATTERN?p.createPattern(R.subject,R.predicate,R.object):p.createPath(R.subject,R.predicate,R.object):R;const K={},de={},ge={};for(let je of Object.keys(R)){const ze=[];if(K[je]=Pe(R[je],ze),ze.length>0){de[je]=ze;for(const at of ze)ge[at.value]=at}}const Ue=Object.keys(ge);if(Ue.length>0)if(Ue.length===1&&![c.PROJECT,c.SERVICE].includes(R.type))k.push(ge[Ue[0]]);else{if(R.type===c.BGP)return Fe(R,de.patterns);for(let je of Object.keys(de)){const ze=K[je];Array.isArray(ze)?K[je]=ze.map((at,fe)=>de[je][0].value===""?at:p.createGraph(at,de[je][fe])):de[je][0].value!==""&&(K[je]=p.createGraph(ze,de[je][0]))}}return K}function Fe(R,k){var K;const de={};for(let je=0;je<R.patterns.length;++je){const ze=R.patterns[je],at=k[je].value;de[at]=(K=de[at])!==null&&K!==void 0?K:{patterns:[],graph:k[je]},de[at].patterns.push(ze)}let ge=[];for(const[je,{patterns:ze,graph:at}]of Object.entries(de)){const fe=p.createBgp(ze);ge.push(je===""?fe:p.createGraph(fe,at))}let Ue=ge[0];for(let je=1;je<ge.length;++je)Ue=p.createJoin([Ue,ge[je]]);return Ue}return Ha}var BK;function Ut(){return BK||(BK=1,(function(a){var e=Mu&&Mu.__createBinding||(Object.create?(function(c,d,f,p){p===void 0&&(p=f);var h=Object.getOwnPropertyDescriptor(d,f);(!h||("get"in h?!d.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(c,p,h)}):(function(c,d,f,p){p===void 0&&(p=f),c[p]=d[f]})),u=Mu&&Mu.__setModuleDefault||(Object.create?(function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}):function(c,d){c.default=d}),n=Mu&&Mu.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&e(d,c,f);return u(d,c),d},r=Mu&&Mu.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.toSparqlJs=a.toSparql=a.Factory=a.Algebra=a.translate=void 0;const t=r(p6e());a.translate=t.default;const i=n(Q4());a.Algebra=i;const o=r(rP());a.Factory=o.default;const l=T6e();Object.defineProperty(a,"toSparql",{enumerable:!0,get:function(){return l.toSparql}}),Object.defineProperty(a,"toSparqlJs",{enumerable:!0,get:function(){return l.toSparqlJs}});const s=r(xq());a.Util=s.default})(Mu)),Mu}var Td={},y_={},UK;function w6e(){if(UK)return y_;UK=1,Object.defineProperty(y_,"__esModule",{value:!0}),y_.asTermType=void 0;function a(e){if(e==="namedNode"||e==="literal"||e==="blankNode"||e==="quad")return e}return y_.asTermType=a,y_}var m_={},QK;function S6e(){if(QK)return m_;QK=1,Object.defineProperty(m_,"__esModule",{value:!0}),m_.Variable=void 0;const a=ac();class e{constructor(n){this.expressionType=a.ExpressionType.Variable,this.name=n}}return m_.Variable=e,m_}var Vt={},qu={},VK;function ob(){if(VK)return qu;VK=1,Object.defineProperty(qu,"__esModule",{value:!0}),qu.SparqlOperator=qu.TypeURL=qu.typedLiteral=qu.TypeAlias=void 0;const a=Rr();var e;(function(i){i.SPARQL_NUMERIC="SPARQL_NUMERIC",i.SPARQL_STRINGLY="SPARQL_STRINGLY"})(e||(qu.TypeAlias=e={}));const u=new a.DataFactory;function n(i,o){return u.literal(i,u.namedNode(o))}qu.typedLiteral=n;var r;(function(i){i.XSD_ANY_URI="http://www.w3.org/2001/XMLSchema#anyURI",i.XSD_STRING="http://www.w3.org/2001/XMLSchema#string",i.RDF_LANG_STRING="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString",i.XSD_BOOLEAN="http://www.w3.org/2001/XMLSchema#boolean",i.XSD_DATE_TIME="http://www.w3.org/2001/XMLSchema#dateTime",i.XSD_DATE_TIME_STAMP="http://www.w3.org/2001/XMLSchema#dateTimeStamp",i.XSD_DATE="http://www.w3.org/2001/XMLSchema#date",i.XSD_G_MONTH="http://www.w3.org/2001/XMLSchema#gMonth",i.XSD_G_MONTHDAY="http://www.w3.org/2001/XMLSchema#gMonthDay",i.XSD_G_YEAR="http://www.w3.org/2001/XMLSchema#gYear",i.XSD_G_YEAR_MONTH="http://www.w3.org/2001/XMLSchema#gYearMonth",i.XSD_TIME="http://www.w3.org/2001/XMLSchema#time",i.XSD_G_DAY="http://www.w3.org/2001/XMLSchema#gDay",i.XSD_DECIMAL="http://www.w3.org/2001/XMLSchema#decimal",i.XSD_FLOAT="http://www.w3.org/2001/XMLSchema#float",i.XSD_DOUBLE="http://www.w3.org/2001/XMLSchema#double",i.XSD_INTEGER="http://www.w3.org/2001/XMLSchema#integer",i.XSD_NON_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonPositiveInteger",i.XSD_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#negativeInteger",i.XSD_LONG="http://www.w3.org/2001/XMLSchema#long",i.XSD_INT="http://www.w3.org/2001/XMLSchema#int",i.XSD_SHORT="http://www.w3.org/2001/XMLSchema#short",i.XSD_BYTE="http://www.w3.org/2001/XMLSchema#byte",i.XSD_NON_NEGATIVE_INTEGER="http://www.w3.org/2001/XMLSchema#nonNegativeInteger",i.XSD_POSITIVE_INTEGER="http://www.w3.org/2001/XMLSchema#positiveInteger",i.XSD_UNSIGNED_LONG="http://www.w3.org/2001/XMLSchema#unsignedLong",i.XSD_UNSIGNED_INT="http://www.w3.org/2001/XMLSchema#unsignedInt",i.XSD_UNSIGNED_SHORT="http://www.w3.org/2001/XMLSchema#unsignedShort",i.XSD_UNSIGNED_BYTE="http://www.w3.org/2001/XMLSchema#unsignedByte",i.XSD_NORMALIZED_STRING="http://www.w3.org/2001/XMLSchema#normalizedString",i.XSD_TOKEN="http://www.w3.org/2001/XMLSchema#token",i.XSD_LANGUAGE="http://www.w3.org/2001/XMLSchema#language",i.XSD_NM_TOKEN="http://www.w3.org/2001/XMLSchema#NMTOKEN",i.XSD_NAME="http://www.w3.org/2001/XMLSchema#name",i.XSD_NC_NAME="http://www.w3.org/2001/XMLSchema#NCName",i.XSD_ENTITY="http://www.w3.org/2001/XMLSchema#ENTITY",i.XSD_ID="http://www.w3.org/2001/XMLSchema#ID",i.XSD_ID_REF="http://www.w3.org/2001/XMLSchema#IDREF",i.XSD_DURATION="http://www.w3.org/2001/XMLSchema#duration",i.XSD_YEAR_MONTH_DURATION="http://www.w3.org/2001/XMLSchema#yearMonthDuration",i.XSD_DAY_TIME_DURATION="http://www.w3.org/2001/XMLSchema#dayTimeDuration",i.XSD_UNTYPED_ATOMIC="http://www.w3.org/2001/XMLSchema#untypedAtomic"})(r||(qu.TypeURL=r={}));var t;return(function(i){i.NOT="!",i.UMINUS="uminus",i.UPLUS="uplus",i.LOGICAL_OR="||",i.LOGICAL_AND="&&",i.EQUAL="=",i.NOT_EQUAL="!=",i.LT="<",i.GT=">",i.LTE="<=",i.GTE=">=",i.SAME_TERM="sameterm",i.IN="in",i.NOT_IN="notin",i.MULTIPLICATION="*",i.DIVISION="/",i.ADDITION="+",i.SUBTRACTION="-",i.IS_IRI="isiri",i.IS_URI="isuri",i.IS_BLANK="isblank",i.IS_LITERAL="isliteral",i.IS_NUMERIC="isnumeric",i.STR="str",i.LANG="lang",i.DATATYPE="datatype",i.IRI="iri",i.URI="uri",i.BNODE="bnode",i.STRDT="strdt",i.STRLANG="strlang",i.UUID="uuid",i.STRUUID="struuid",i.STRLEN="strlen",i.SUBSTR="substr",i.UCASE="ucase",i.LCASE="lcase",i.STRSTARTS="strstarts",i.STRENDS="strends",i.CONTAINS="contains",i.STRBEFORE="strbefore",i.STRAFTER="strafter",i.ENCODE_FOR_URI="encode_for_uri",i.CONCAT="concat",i.LANG_MATCHES="langmatches",i.REGEX="regex",i.REPLACE="replace",i.ABS="abs",i.ROUND="round",i.CEIL="ceil",i.FLOOR="floor",i.RAND="rand",i.NOW="now",i.YEAR="year",i.MONTH="month",i.DAY="day",i.HOURS="hours",i.MINUTES="minutes",i.SECONDS="seconds",i.TIMEZONE="timezone",i.TZ="tz",i.MD5="md5",i.SHA1="sha1",i.SHA256="sha256",i.SHA384="sha384",i.SHA512="sha512",i.TRIPLE="triple",i.SUBJECT="subject",i.PREDICATE="predicate",i.OBJECT="object",i.IS_TRIPLE="istriple",i.BOUND="bound",i.IF="if",i.COALESCE="coalesce"})(t||(qu.SparqlOperator=t={})),qu}var Wt={},HK;function t1(){if(HK)return Wt;HK=1,Object.defineProperty(Wt,"__esModule",{value:!0}),Wt.NoAggregator=Wt.ExtensionFunctionError=Wt.InvalidExpression=Wt.InvalidArity=Wt.UnexpectedError=Wt.ParseError=Wt.EmptyAggregateError=Wt.IncompatibleLanguageOperation=Wt.InvalidTimezoneCall=Wt.CastError=Wt.InvalidArgumentTypes=Wt.InError=Wt.CoalesceError=Wt.RDFEqualTypeError=Wt.EBVCoercionError=Wt.UnboundVariableError=Wt.InvalidLexicalForm=Wt.isExpressionError=Wt.ExpressionError=void 0;class a extends Error{}Wt.ExpressionError=a;function e(E){return E instanceof a}Wt.isExpressionError=e;class u extends a{constructor(S){super(`Invalid lexical form '${w(S)}'`),this.arg=S}}Wt.InvalidLexicalForm=u;class n extends a{constructor(S,N){super(`Unbound variable '${w(S)}'`),this.variable=S,this.bindings=N}}Wt.UnboundVariableError=n;class r extends a{constructor(S){super(`Cannot coerce term to EBV '${w(S)}'`),this.arg=S}}Wt.EBVCoercionError=r;class t extends a{constructor(S){super("Equality test for literals with unsupported datatypes"),this.args=S}}Wt.RDFEqualTypeError=t;class i extends a{constructor(S){super("All COALESCE arguments threw errors"),this.errors=S}}Wt.CoalesceError=i;class o extends a{constructor(S){super(`Some argument to IN errorred and none where equal. ${S.map(N=>`(${N.toString()}) `).join("and ")}`),this.errors=S}}Wt.InError=o;class l extends a{constructor(S,N){super(`Argument types not valid for operator: '${w(N)}' with '${w(S)}`),this.args=S,this.op=N}}Wt.InvalidArgumentTypes=l;class s extends a{constructor(S,N){super(`Invalid cast: '${w(S)}' to '${w(N)}'`),this.arg=S}}Wt.CastError=s;class c extends a{constructor(S){super(`TIMEZONE call on ${S} which has no timezone`),this.dateString=S}}Wt.InvalidTimezoneCall=c;class d extends a{constructor(S,N){super(`Operation on incompatible language literals '${w(S)}' and '${w(N)}'`),this.arg1=S,this.arg2=N}}Wt.IncompatibleLanguageOperation=d;class f extends a{constructor(){super("Empty aggregate expression")}}Wt.EmptyAggregateError=f;class p extends a{constructor(S,N){super(`Failed to parse "${S}" as ${N}.`)}}Wt.ParseError=p;class h extends Error{constructor(S,N){super(`Programmer Error '${S}'`),this.payload=N}}Wt.UnexpectedError=h;class g extends Error{constructor(S,N){super(`The number of args does not match the arity of the operator '${w(N)}'.`),this.args=S,this.op=N}}Wt.InvalidArity=g;class v extends Error{constructor(S){super(`Invalid SPARQL Expression '${w(S)}'`)}}Wt.InvalidExpression=v;class m extends Error{constructor(S,N){N instanceof Error?super(`Error thrown in ${S}: ${N.message}${N.stack?`
${N.stack}`:""}`):super(`Error thrown in ${S}`)}}Wt.ExtensionFunctionError=m;class T extends Error{constructor(S){super(`Aggregate expression ${w(S)} found, but no aggregate hook provided.`)}}Wt.NoAggregator=T;function w(E){return JSON.stringify(E)}return Wt}var Bu={},kK;function E6e(){if(kK)return Bu;kK=1,Object.defineProperty(Bu,"__esModule",{value:!0}),Bu.serializeDuration=Bu.serializeTime=Bu.serializeDate=Bu.serializeDateTime=void 0;function a(i,o=2){return i.toLocaleString(void 0,{minimumIntegerDigits:o,useGrouping:!1})}function e(i){return`${n({year:i.year,month:i.month,day:i.day})}T${r(i)}`}Bu.serializeDateTime=e;function u(i){return i.zoneHours===void 0||i.zoneMinutes===void 0?"":i.zoneHours===0&&i.zoneMinutes===0?"Z":`${i.zoneHours>=0?`+${a(i.zoneHours)}`:a(i.zoneHours)}:${a(Math.abs(i.zoneMinutes))}`}function n(i){return`${a(i.year,4)}-${a(i.month)}-${a(i.day)}${u(i)}`}Bu.serializeDate=n;function r(i){return`${a(i.hours)}:${a(i.minutes)}:${a(i.seconds)}${u(i)}`}Bu.serializeTime=r;function t(i,o="PT0S"){if(!Object.values(i).some(v=>(v||0)!==0))return o;const l=Object.values(i).some(v=>(v||0)<0)?"-":"",s=i.year?`${Math.abs(i.year)}Y`:"",c=i.month?`${Math.abs(i.month)}M`:"",d=i.day?`${Math.abs(i.day)}D`:"",f=`${l}P${s}${c}${d}`;if(!(i.hours||i.minutes||i.seconds))return f;const p=i.hours?`${Math.abs(i.hours)}H`:"",h=i.minutes?`${Math.abs(i.minutes)}M`:"",g=i.seconds?`${Math.abs(i.seconds)}S`:"";return`${f}T${p}${h}${g}`}return Bu.serializeDuration=t,Bu}var Lj={},cn={},b_={},zK;function X_e(){if(zK)return b_;zK=1,Object.defineProperty(b_,"__esModule",{value:!0}),b_.OverloadTree=void 0;const a=r1(),e=nP();let u=class n7{constructor(r,t){this.identifier=r,this.implementation=void 0,this.generalOverloads=Object.create(null),this.literalOverLoads=[],this.depth=t??0,this.promotionCount=void 0}getSubtree(r){const t=(0,e.asGeneralType)(r);if(t)return this.generalOverloads[t];for(const[i,o]of this.literalOverLoads)if(r===i)return o}getImplementationExact(r){let t=this;for(const i of r)if(t=t.getSubtree(i),!t)return;return t.implementation}search(r,t,i){let o=i[this.identifier],l=0;for(;l<r.length&&o?.cache;){const d=r[l],f=(0,a.isLiteralTermExpression)(d);o=o.cache[f?f.dataType:d.termType],l++}if(l===r.length&&o?.func)return o.func;const s=[],c=0;if(r.length===0)return this.implementation;for(s.push(...this.getSubTreeWithArg(r[c],t).map(d=>({node:d,index:c+1})));s.length>0;){const{index:d,node:f}=s.pop();if(d===r.length&&f.implementation)return this.addToCache(i,r,f.implementation),f.implementation;s.push(...f.getSubTreeWithArg(r[d],t).map(p=>({node:p,index:d+1})))}}addToCache(r,t,i){function o(s,c){return c in s||(s[c]={}),s[c]}let l=o(r,this.identifier);for(const s of t){const c=(0,a.isLiteralTermExpression)(s),d=c?c.dataType:s.termType;l.cache=l.cache??{},l=o(l.cache,d)}l.func=i}addOverload(r,t){this._addOverload([...r],t,0)}_addOverload(r,t,i){const[o,...l]=r;if(!o){(this.promotionCount===void 0||i<=this.promotionCount)&&(this.promotionCount=i,this.implementation=t);return}let s=this.getSubtree(o);if(!s){const c=new n7(this.identifier,this.depth+1),d=(0,e.asGeneralType)(o);d&&(this.generalOverloads[d]=c);const f=(0,e.asOverrideType)(o);f&&this.literalOverLoads.push([f,c]),s=c}if(s._addOverload(l,t,i),e.typePromotion[o])for(const c of e.typePromotion[o])this.addPromotedOverload(c.typeToPromote,t,c.conversionFunction,l,i)}addPromotedOverload(r,t,i,o,l){let s=this.getSubtree(r);if(!s){const c=new n7(this.identifier,this.depth+1);this.literalOverLoads.push([r,c]),s=c}s._addOverload(o,c=>d=>t(c)([...d.slice(0,this.depth),i(d[this.depth]),...d.slice(this.depth+1,d.length)]),l+1)}getSubTreeWithArg(r,t){const i=[],o=(0,a.isLiteralTermExpression)(r);if(this.generalOverloads.term&&i.push(this.generalOverloads.term),this.generalOverloads[r.termType]&&i.push(this.generalOverloads[r.termType]),o){const l=(0,e.asKnownLiteralType)(o.dataType);let s;l?s=e.superTypeDictTable[l]:s=(0,e.getSuperTypes)(o.dataType,t);const c=this.literalOverLoads.filter(([d,f])=>d in s).map(([d,f])=>[s[d],f]);c.sort(([d,f],[p,h])=>d-p),i.push(...c.map(([d,f])=>f))}return i}};return b_.OverloadTree=u,b_}var GK;function K_e(){if(GK)return cn;GK=1,Object.defineProperty(cn,"__esModule",{value:!0}),cn.expressionToVar=cn.dateTime=cn.langString=cn.string=cn.double=cn.float=cn.decimal=cn.integer=cn.bool=cn.Builder=cn.declare=void 0;const a=lt(),e=r1(),u=r1(),n=ob(),r=ob(),t=t1(),i=X_e();function o(T){return new l(T)}cn.declare=o;class l{constructor(w){this.overloadTree=new i.OverloadTree(w),this.collected=!1}collect(){if(this.collected)throw new Error("Builders can only be collected once!");return this.collected=!0,this.overloadTree}static wrapInvalidLexicalProtected(w){return E=>S=>{for(const[N,j]of S.entries())if(j instanceof u.NonLexicalLiteral)throw new t.InvalidLexicalForm(S[N].toRDF(E.context.getSafe(a.KeysInitQuery.dataFactory)));return w(E)(S)}}set(w,E,S=!0){return this.overloadTree.addOverload(w,S?l.wrapInvalidLexicalProtected(E):E),this}copy({from:w,to:E}){const S=this.overloadTree.getImplementationExact(w);if(!S)throw new t.UnexpectedError("Tried to copy implementation, but types not found",{from:w,to:E});return this.set(E,S)}onUnary(w,E,S=!0){return this.set([w],N=>([j])=>E(N)(j),S)}onUnaryTyped(w,E,S=!0){return this.set([w],N=>([j])=>E(N)(j.typedValue),S)}onBinary(w,E,S=!0){return this.set(w,N=>([j,q])=>E(N)(j,q),S)}onBinaryTyped(w,E,S=!0){return this.set(w,N=>([j,q])=>E(N)(j.typedValue,q.typedValue),S)}onTernaryTyped(w,E,S=!0){return this.set(w,N=>([j,q,O])=>E(N)(j.typedValue,q.typedValue,O.typedValue),S)}onTernary(w,E,S=!0){return this.set(w,N=>([j,q,O])=>E(N)(j,q,O),S)}onQuaternaryTyped(w,E,S=!0){return this.set(w,N=>([j,q,O,I])=>E(N)(j.typedValue,q.typedValue,O.typedValue,I.typedValue),S)}onTerm1(w,E=!1){return this.set(["term"],S=>([N])=>w(S)(N),E)}onTerm3(w){return this.set(["term","term","term"],E=>([S,N,j])=>w(E)(S,N,j))}onQuad1(w){return this.set(["quad"],E=>([S])=>w(E)(S))}onLiteral1(w,E=!0){return this.set(["literal"],S=>([N])=>w(S)(N),E)}onBoolean1(w,E=!0){return this.set([n.TypeURL.XSD_BOOLEAN],S=>([N])=>w(S)(N),E)}onBoolean1Typed(w,E=!0){return this.set([n.TypeURL.XSD_BOOLEAN],S=>([N])=>w(S)(N.typedValue),E)}onString1(w,E=!0){return this.set([n.TypeURL.XSD_STRING],S=>([N])=>w(S)(N),E)}onString1Typed(w,E=!0){return this.set([n.TypeURL.XSD_STRING],S=>([N])=>w(S)(N.typedValue),E)}onLangString1(w,E=!0){return this.set([n.TypeURL.RDF_LANG_STRING],S=>([N])=>w(S)(N),E)}onStringly1(w,E=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],S=>([N])=>w(S)(N),E)}onStringly1Typed(w,E=!0){return this.set([n.TypeAlias.SPARQL_STRINGLY],S=>([N])=>w(S)(N.typedValue),E)}onNumeric1(w,E=!0){return this.set([n.TypeAlias.SPARQL_NUMERIC],S=>([N])=>w(S)(N),E)}onDateTime1(w,E=!0){return this.set([n.TypeURL.XSD_DATE_TIME],S=>([N])=>w(S)(N),E)}numericConverter(w,E=!0){const S=N=>j=>w(N)(j.typedValue);return this.onUnary(r.TypeURL.XSD_INTEGER,N=>j=>c(S(N)(j)),E).onUnary(r.TypeURL.XSD_DECIMAL,N=>j=>d(S(N)(j)),E).onUnary(r.TypeURL.XSD_FLOAT,N=>j=>f(S(N)(j)),E).onUnary(r.TypeURL.XSD_DOUBLE,N=>j=>p(S(N)(j)),E)}arithmetic(w,E=!0){const S=N=>(j,q)=>w(N)(j.typedValue,q.typedValue);return this.onBinary([r.TypeURL.XSD_INTEGER,r.TypeURL.XSD_INTEGER],N=>(j,q)=>c(S(N)(j,q)),E).onBinary([r.TypeURL.XSD_DECIMAL,r.TypeURL.XSD_DECIMAL],N=>(j,q)=>d(S(N)(j,q)),E).onBinary([r.TypeURL.XSD_FLOAT,r.TypeURL.XSD_FLOAT],N=>(j,q)=>f(S(N)(j,q)),E).onBinary([r.TypeURL.XSD_DOUBLE,r.TypeURL.XSD_DOUBLE],N=>(j,q)=>p(S(N)(j,q)),E)}numberTest(w){return this.numeric(E=>([S,N])=>{const j=w(E)(S.typedValue,N.typedValue);return s(j)})}stringTest(w,E=!0){return this.set([n.TypeURL.XSD_STRING,n.TypeURL.XSD_STRING],S=>([N,j])=>{const q=w(S)(N.typedValue,j.typedValue);return s(q)},E)}booleanTest(w,E=!0){return this.set([n.TypeURL.XSD_BOOLEAN,n.TypeURL.XSD_BOOLEAN],S=>([N,j])=>{const q=w(S)(N.typedValue,j.typedValue);return s(q)},E)}dateTimeTest(w,E=!0){return this.set([n.TypeURL.XSD_DATE_TIME,n.TypeURL.XSD_DATE_TIME],S=>([N,j])=>{const q=w(S)(N.typedValue,j.typedValue);return s(q)},E)}numeric(w){return this.set([n.TypeAlias.SPARQL_NUMERIC,n.TypeAlias.SPARQL_NUMERIC],w)}}cn.Builder=l;function s(T){return new e.BooleanLiteral(T)}cn.bool=s;function c(T){return new e.IntegerLiteral(T)}cn.integer=c;function d(T){return new e.DecimalLiteral(T)}cn.decimal=d;function f(T){return new e.FloatLiteral(T)}cn.float=f;function p(T){return new e.DoubleLiteral(T)}cn.double=p;function h(T){return new e.StringLiteral(T)}cn.string=h;function g(T,w){return new e.LangStringLiteral(T,w)}cn.langString=g;function v(T,w){return new e.DateTimeLiteral(T,w)}cn.dateTime=v;function m(T,w){return T.variable(w.name.slice(1))}return cn.expressionToVar=m,cn}var $K;function nP(){return $K||($K=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.typePromotion=a.isSubTypeOf=a.getSuperTypeDict=a.isInternalSubType=a.asGeneralType=a.asOverrideType=a.asKnownLiteralType=a.asTypeAlias=a.typeAliasCheck=a.extensionTableInit=a.getSuperTypes=a.superTypeDictTable=a.extensionTableInput=void 0;const e=r1(),u=K_e(),n=ob();a.extensionTableInput={[n.TypeURL.XSD_DATE_TIME_STAMP]:n.TypeURL.XSD_DATE_TIME,[n.TypeURL.XSD_DAY_TIME_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.XSD_YEAR_MONTH_DURATION]:n.TypeURL.XSD_DURATION,[n.TypeURL.RDF_LANG_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_STRING]:n.TypeAlias.SPARQL_STRINGLY,[n.TypeURL.XSD_NORMALIZED_STRING]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_TOKEN]:n.TypeURL.XSD_NORMALIZED_STRING,[n.TypeURL.XSD_LANGUAGE]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NM_TOKEN]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NAME]:n.TypeURL.XSD_TOKEN,[n.TypeURL.XSD_NC_NAME]:n.TypeURL.XSD_NAME,[n.TypeURL.XSD_ENTITY]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_ID_REF]:n.TypeURL.XSD_NC_NAME,[n.TypeURL.XSD_UNTYPED_ATOMIC]:n.TypeURL.XSD_STRING,[n.TypeURL.XSD_DOUBLE]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_FLOAT]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_DECIMAL]:n.TypeAlias.SPARQL_NUMERIC,[n.TypeURL.XSD_INTEGER]:n.TypeURL.XSD_DECIMAL,[n.TypeURL.XSD_NON_POSITIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_NEGATIVE_INTEGER]:n.TypeURL.XSD_NON_POSITIVE_INTEGER,[n.TypeURL.XSD_LONG]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_INT]:n.TypeURL.XSD_LONG,[n.TypeURL.XSD_SHORT]:n.TypeURL.XSD_INT,[n.TypeURL.XSD_BYTE]:n.TypeURL.XSD_SHORT,[n.TypeURL.XSD_NON_NEGATIVE_INTEGER]:n.TypeURL.XSD_INTEGER,[n.TypeURL.XSD_POSITIVE_INTEGER]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_LONG]:n.TypeURL.XSD_NON_NEGATIVE_INTEGER,[n.TypeURL.XSD_UNSIGNED_INT]:n.TypeURL.XSD_UNSIGNED_LONG,[n.TypeURL.XSD_UNSIGNED_SHORT]:n.TypeURL.XSD_UNSIGNED_INT,[n.TypeURL.XSD_UNSIGNED_BYTE]:n.TypeURL.XSD_UNSIGNED_SHORT,[n.TypeURL.XSD_DATE_TIME]:"term",[n.TypeURL.XSD_BOOLEAN]:"term",[n.TypeURL.XSD_DATE]:"term",[n.TypeURL.XSD_G_MONTH]:"term",[n.TypeURL.XSD_G_MONTHDAY]:"term",[n.TypeURL.XSD_G_YEAR]:"term",[n.TypeURL.XSD_G_YEAR_MONTH]:"term",[n.TypeURL.XSD_TIME]:"term",[n.TypeURL.XSD_G_DAY]:"term",[n.TypeURL.XSD_DURATION]:"term",[n.TypeAlias.SPARQL_NUMERIC]:"term",[n.TypeAlias.SPARQL_STRINGLY]:"term",[n.TypeURL.XSD_ANY_URI]:"term"},a.superTypeDictTable=Object.create(null);function r(g,v){const m=v.cache.get(g);if(m)return m;const T=v.discoverer(g);if(T==="term"){const S=Object.create(null);return S.__depth=0,S[g]=0,v.cache.set(g,S),S}let w;const E=s(T);return E?w={...a.superTypeDictTable[E]}:w={...r(T,v)},w.__depth++,w[g]=w.__depth,v.cache.set(g,w),w}a.getSuperTypes=r;function t(){for(const[g,v]of Object.entries(a.extensionTableInput)){const m=g;a.superTypeDictTable[m]||i(m,v,a.superTypeDictTable)}}a.extensionTableInit=t,t();function i(g,v,m){if(v==="term"||v===void 0){const T=Object.create(null);T.__depth=0,T[g]=0,m[g]=T;return}m[v]||i(v,a.extensionTableInput[v],m),m[g]={...m[v],[g]:m[v].__depth+1,__depth:m[v].__depth+1}}a.typeAliasCheck=Object.create(null);function o(){for(const g of Object.values(n.TypeAlias))a.typeAliasCheck[g]=!0}o();function l(g){if(g in a.typeAliasCheck)return g}a.asTypeAlias=l;function s(g){if(g in a.superTypeDictTable)return g}a.asKnownLiteralType=s;function c(g){if(s(g)??g==="term")return g}a.asOverrideType=c;function d(g){if(g==="term"||(0,e.asTermType)(g))return g}a.asGeneralType=d;function f(g,v){return g!=="term"&&a.superTypeDictTable[g]&&a.superTypeDictTable[g][v]!==void 0}a.isInternalSubType=f;function p(g,v){const m=s(g);return m?a.superTypeDictTable[m]:r(g,v)}a.getSuperTypeDict=p;function h(g,v,m){return g==="term"?!1:p(g,m)[v]!==void 0}a.isSubTypeOf=h,a.typePromotion={[n.TypeURL.XSD_STRING]:[{typeToPromote:n.TypeURL.XSD_ANY_URI,conversionFunction:g=>(0,u.string)(g.str())}],[n.TypeURL.XSD_DOUBLE]:[{typeToPromote:n.TypeURL.XSD_FLOAT,conversionFunction:g=>(0,u.double)(g.typedValue)},{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:g=>(0,u.double)(g.typedValue)}],[n.TypeURL.XSD_FLOAT]:[{typeToPromote:n.TypeURL.XSD_DECIMAL,conversionFunction:g=>(0,u.float)(g.typedValue)}]}})(Lj)),Lj}var XK;function A6e(){if(XK)return Vt;XK=1,Object.defineProperty(Vt,"__esModule",{value:!0}),Vt.isNonLexicalLiteral=Vt.NonLexicalLiteral=Vt.YearMonthDurationLiteral=Vt.DayTimeDurationLiteral=Vt.DurationLiteral=Vt.DateLiteral=Vt.TimeLiteral=Vt.DateTimeLiteral=Vt.StringLiteral=Vt.LangStringLiteral=Vt.BooleanLiteral=Vt.DoubleLiteral=Vt.FloatLiteral=Vt.DecimalLiteral=Vt.IntegerLiteral=Vt.NumericLiteral=Vt.Literal=Vt.isLiteralTermExpression=Vt.DefaultGraph=Vt.Quad=Vt.BlankNode=Vt.NamedNode=Vt.Term=void 0;const a=ac(),e=ob(),u=ob(),n=t1(),r=E6e(),t=nP();class i{constructor(){this.expressionType=a.ExpressionType.Term}str(){throw new n.InvalidArgumentTypes([this],e.SparqlOperator.STR)}coerceEBV(){throw new n.EBVCoercionError(this)}}Vt.Term=i;class o extends i{constructor(B){super(),this.value=B,this.termType="namedNode"}toRDF(B){return B.namedNode(this.value)}str(){return this.value}}Vt.NamedNode=o;class l extends i{constructor(B){super(),this.termType="blankNode",this.value=B}toRDF(B){return typeof this.value=="string"?B.blankNode(this.value):this.value}}Vt.BlankNode=l;class s extends i{constructor(B,H,V,G){super(),this.subject=B,this.predicate=H,this.object=V,this.graph=G,this.termType="quad"}toRDF(B){return B.quad(this.subject.toRDF(B),this.predicate.toRDF(B),this.object.toRDF(B),this.graph.toRDF(B))}str(){return`Quad: [${this.subject.str()}, ${this.predicate.str()}, ${this.object.str()}, ${this.graph.str()}]`}}Vt.Quad=s;class c extends i{constructor(){super(),this.termType="defaultGraph"}toRDF(B){return B.defaultGraph()}str(){return"DefaultGraph"}}Vt.DefaultGraph=c;function d(C){if(C.termType==="literal")return C}Vt.isLiteralTermExpression=d;class f extends i{constructor(B,H,V,G){super(),this.typedValue=B,this.dataType=H,this.strValue=V,this.language=G,this.termType="literal"}toRDF(B){return B.literal(this.strValue??this.str(),this.language??B.namedNode(this.dataType))}str(){return this.strValue??this.typedValue.toString()}}Vt.Literal=f;class p extends f{constructor(B,H,V,G){super(B,H,V,G),this.typedValue=B,this.strValue=V,this.language=G}coerceEBV(){return!!this.typedValue}toRDF(B){const H=super.toRDF(B);return Number.isFinite(this.typedValue)||(H.value=H.value.replace("Infinity","INF")),H}str(){return this.strValue??this.specificFormatter(this.typedValue)}}Vt.NumericLiteral=p;class h extends p{constructor(B,H,V,G){super(B,H??u.TypeURL.XSD_INTEGER,V,G),this.typedValue=B,this.strValue=V,this.language=G}specificFormatter(B){return B.toFixed(0)}}Vt.IntegerLiteral=h;class g extends p{constructor(B,H,V,G){super(B,H??u.TypeURL.XSD_DECIMAL,V,G),this.typedValue=B,this.strValue=V,this.language=G}specificFormatter(B){return B.toString()}}Vt.DecimalLiteral=g;class v extends p{constructor(B,H,V,G){super(B,H??u.TypeURL.XSD_FLOAT,V,G),this.typedValue=B,this.strValue=V,this.language=G}specificFormatter(B){return B.toString()}}Vt.FloatLiteral=v;class m extends p{constructor(B,H,V,G){super(B,H??u.TypeURL.XSD_DOUBLE,V,G),this.typedValue=B,this.strValue=V,this.language=G}specificFormatter(B){if(!Number.isFinite(B))return B>0?"INF":B<0?"-INF":"NaN";const H=B.toExponential(),[V,G]=H.split("e"),Z=G.replace(/\+/u,"");return`${V.includes(".")?V:`${V}.0`}E${Z}`}}Vt.DoubleLiteral=m;class T extends f{constructor(B,H,V){super(B,V??u.TypeURL.XSD_BOOLEAN,H),this.typedValue=B,this.strValue=H}coerceEBV(){return this.typedValue}}Vt.BooleanLiteral=T;class w extends f{constructor(B,H,V){super(B,V??u.TypeURL.RDF_LANG_STRING,B,H),this.typedValue=B,this.language=H}coerceEBV(){return this.str().length>0}}Vt.LangStringLiteral=w;class E extends f{constructor(B,H){super(B,H??u.TypeURL.XSD_STRING,B),this.typedValue=B}coerceEBV(){return this.str().length>0}}Vt.StringLiteral=E;class S extends f{constructor(B,H,V){super(B,V??u.TypeURL.XSD_DATE_TIME,H),this.typedValue=B,this.strValue=H}str(){return(0,r.serializeDateTime)(this.typedValue)}}Vt.DateTimeLiteral=S;class N extends f{constructor(B,H,V){super(B,V??u.TypeURL.XSD_TIME,H),this.typedValue=B,this.strValue=H}str(){return(0,r.serializeTime)(this.typedValue)}}Vt.TimeLiteral=N;class j extends f{constructor(B,H,V){super(B,V??u.TypeURL.XSD_DATE,H),this.typedValue=B,this.strValue=H}str(){return(0,r.serializeDate)(this.typedValue)}}Vt.DateLiteral=j;class q extends f{constructor(B,H,V){super(B,V??u.TypeURL.XSD_DURATION,H),this.typedValue=B,this.strValue=H}str(){return(0,r.serializeDuration)(this.typedValue)}}Vt.DurationLiteral=q;class O extends q{constructor(B,H,V){super(B,H,V??u.TypeURL.XSD_DAY_TIME_DURATION),this.typedValue=B,this.strValue=H}}Vt.DayTimeDurationLiteral=O;class I extends f{constructor(B,H,V){super(B,V??u.TypeURL.XSD_YEAR_MONTH_DURATION,H),this.typedValue=B,this.strValue=H}str(){return(0,r.serializeDuration)(this.typedValue,"P0M")}}Vt.YearMonthDurationLiteral=I;class A extends f{constructor(B,H,V,G,Z){super({toString:()=>"undefined"},H,G,Z),this.openWorldType=V}coerceEBV(){if((0,t.isSubTypeOf)(this.dataType,u.TypeURL.XSD_BOOLEAN,this.openWorldType)||(0,t.isSubTypeOf)(this.dataType,u.TypeAlias.SPARQL_NUMERIC,this.openWorldType))return!1;throw new n.EBVCoercionError(this)}toRDF(B){return B.literal(this.str(),this.language??B.namedNode(this.dataType))}str(){return this.strValue??""}}Vt.NonLexicalLiteral=A;function P(C){if(C instanceof A)return C}return Vt.isNonLexicalLiteral=P,Vt}var g_={},KK;function O6e(){if(KK)return g_;KK=1,Object.defineProperty(g_,"__esModule",{value:!0}),g_.Operator=void 0;const a=ac();let e=class{constructor(n,r,t){this.name=n,this.args=r,this.apply=t,this.expressionType=a.ExpressionType.Operator}};return g_.Operator=e,g_}var v_={},JK;function x6e(){if(JK)return v_;JK=1,Object.defineProperty(v_,"__esModule",{value:!0}),v_.Aggregate=void 0;const a=ac();let e=class{constructor(n,r){this.name=n,this.expression=r,this.expressionType=a.ExpressionType.Aggregate}};return v_.Aggregate=e,v_}var __={},WK;function R6e(){if(WK)return __;WK=1,Object.defineProperty(__,"__esModule",{value:!0}),__.Existence=void 0;const a=ac();let e=class{constructor(n){this.expression=n,this.expressionType=a.ExpressionType.Existence}};return __.Existence=e,__}var YK;function r1(){return YK||(YK=1,(function(a){var e=Td&&Td.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Td&&Td.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(w6e(),a),u(S6e(),a),u(A6e(),a),u(O6e(),a),u(x6e(),a),u(R6e(),a)})(Td)),Td}var Wn={},gr={},ZK;function f4(){if(ZK)return gr;ZK=1,Object.defineProperty(gr,"__esModule",{value:!0}),gr.extractTimeZone=gr.extractRawTimeZone=gr.dayTimeDurationsToSeconds=gr.yearMonthDurationsToMonths=gr.trimToDayTimeDuration=gr.trimToYearMonthDuration=gr.toUTCDate=gr.toJSDate=gr.negateDuration=gr.toDateTimeRepresentation=gr.defaultedDateTimeRepresentation=gr.simplifyDurationRepresentation=gr.defaultedDurationRepresentation=gr.defaultedYearMonthDurationRepresentation=gr.defaultedDayTimeDurationRepresentation=void 0;function a(g){return{day:g.day??0,hours:g.hours??0,minutes:g.minutes??0,seconds:g.seconds??0}}gr.defaultedDayTimeDurationRepresentation=a;function e(g){return{year:g.year??0,month:g.month??0}}gr.defaultedYearMonthDurationRepresentation=e;function u(g){return{...a(g),...e(g)}}gr.defaultedDurationRepresentation=u;function n(g){const v=u(g),m={},T=v.year+Math.trunc(v.month/12);T&&(m.year=T,v.month%=12),v.month&&(m.month=v.month);const w=v.day+Math.trunc(v.hours/24)+Math.trunc(v.minutes/1440)+Math.trunc(v.seconds/(1440*60));w&&(m.day=w,v.hours%=24,v.minutes%=1440,v.seconds%=1440*60);const E=v.hours+Math.trunc(v.minutes/60)+Math.trunc(v.seconds/3600);E&&(m.hours=E,v.minutes%=60,v.seconds%=3600);const S=v.minutes+Math.trunc(v.seconds/60);return S&&(m.minutes=S,v.seconds%=60),v.seconds&&(m.seconds=v.seconds),m}gr.simplifyDurationRepresentation=n;function r(g){return{...g,day:g.day??1,hours:g.hours??0,month:g.month??1,year:g.year??0,seconds:g.seconds??0,minutes:g.minutes??0}}gr.defaultedDateTimeRepresentation=r;function t({date:g,timeZone:v}){return{year:g.getFullYear(),month:g.getMonth()+1,day:g.getDate(),hours:g.getHours(),minutes:g.getMinutes(),seconds:g.getSeconds(),zoneHours:v.zoneHours,zoneMinutes:v.zoneMinutes}}gr.toDateTimeRepresentation=t;function i(g){return{year:g.year===void 0?void 0:-1*g.year,month:g.month===void 0?void 0:-1*g.month,day:g.day===void 0?void 0:-1*g.day,hours:g.hours===void 0?void 0:-1*g.hours,minutes:g.minutes===void 0?void 0:-1*g.minutes,seconds:g.seconds===void 0?void 0:-1*g.seconds}}gr.negateDuration=i;function o(g){const v=new Date(g.year,g.month-1,g.day,g.hours,g.minutes,Math.trunc(g.seconds),g.seconds%1*1e3);return g.year>=0&&g.year<100&&v.setFullYear(v.getFullYear()-1900),v}gr.toJSDate=o;function l(g,v){const m=o(r(g)),T=m.getTimezoneOffset(),w=g.zoneHours??v.zoneHours,E=g.zoneMinutes??v.zoneMinutes;return new Date(m.getTime()-(T+w*60+E)*60*1e3)}gr.toUTCDate=l;function s(g){return{year:g.year,month:g.month}}gr.trimToYearMonthDuration=s;function c(g){return{day:g.day,hours:g.hours,minutes:g.minutes,seconds:g.seconds}}gr.trimToDayTimeDuration=c;function d(g){return g.year*12+g.month}gr.yearMonthDurationsToMonths=d;function f(g){return((g.day*24+g.hours)*60+g.minutes)*60+g.seconds}gr.dayTimeDurationsToSeconds=f;function p(g){return/(Z|([+-]\d\d:\d\d))?$/u.exec(g)[0]}gr.extractRawTimeZone=p;function h(g){return{zoneHours:g.getTimezoneOffset()/60,zoneMinutes:g.getTimezoneOffset()%60}}return gr.extractTimeZone=h,gr}var Ds={},eJ;function J_e(){if(eJ)return Ds;eJ=1,Object.defineProperty(Ds,"__esModule",{value:!0}),Ds.elapsedDuration=Ds.addDurationToDateTime=Ds.maximumDayInMonthFor=void 0;const a=f4();function e(t,i,o=0){const l=t-o,s=i-o,c=Math.floor(l/s);return{intDiv:c,remainder:t-c*s}}function u(t,i){const{intDiv:o,remainder:l}=e(i,13,1),s=t+o;return[1,3,5,7,8,10,12].includes(l)?31:[4,6,9,11].includes(l)?30:l===2&&(e(s,400).remainder===0||e(s,100).remainder!==0&&e(s,4).remainder===0)?29:28}Ds.maximumDayInMonthFor=u;function n(t,i){const o={...t};let l=e(t.month+i.month,13,1);for(o.month=l.remainder,o.year=t.year+i.year+l.intDiv,l=e(t.seconds+i.seconds,60),o.seconds=l.remainder,l=e(t.minutes+i.minutes+l.intDiv,60),o.minutes=l.remainder,l=e(t.hours+i.hours+l.intDiv,24),o.hours=l.remainder,o.day=t.day+i.day+l.intDiv;;){let s;if(o.day<1)o.day+=u(o.year,o.month-1),s=-1;else if(o.day>u(o.year,o.month))o.day-=u(o.year,o.month),s=1;else break;l=e(o.month+s,13,1),o.month=l.remainder,o.year+=l.intDiv}return o}Ds.addDurationToDateTime=n;function r(t,i,o){const l=(0,a.toUTCDate)(t,o),s=(0,a.toUTCDate)(i,o),c=l.getTime()-s.getTime();return{day:Math.floor(c/(1e3*60*60*24)),hours:Math.floor(c%(1e3*60*60*24)/(1e3*60*60)),minutes:Math.floor(c%(1e3*60*60)/(1e3*60)),seconds:c%(1e3*60)}}return Ds.elapsedDuration=r,Ds}var tJ;function a7(){if(tJ)return Wn;tJ=1,Object.defineProperty(Wn,"__esModule",{value:!0}),Wn.parseDayTimeDuration=Wn.parseYearMonthDuration=Wn.parseDuration=Wn.parseTime=Wn.parseDate=Wn.parseDateTime=Wn.parseXSDDecimal=Wn.parseXSDFloat=void 0;const a=f4(),e=t1(),u=J_e();function n(p){const h=Number(p);return Number.isNaN(h)?p==="NaN"?Number.NaN:p==="INF"||p==="+INF"?Number.POSITIVE_INFINITY:p==="-INF"?Number.NEGATIVE_INFINITY:void 0:h}Wn.parseXSDFloat=n;function r(p){const h=Number(p);return Number.isNaN(h)?void 0:h}Wn.parseXSDDecimal=r;function t(p){const[h,g]=p.split("T");if(g===void 0)throw new e.ParseError(p,"dateTime");return{...o(h),...l(g)}}Wn.parseDateTime=t;function i(p){if(p==="")return{zoneHours:void 0,zoneMinutes:void 0};if(p==="Z")return{zoneHours:0,zoneMinutes:0};const g=p.replaceAll(/^([+|-])(\d\d):(\d\d)$/gu,"$11!$2!$3").split("!").map(Number);return{zoneHours:g[0]*g[1],zoneMinutes:g[0]*g[2]}}function o(p){const h=p.replaceAll(/^(-)?([123456789]*\d{4})-(\d\d)-(\d\d)(Z|([+-]\d\d:\d\d))?$/gu,"$11!$2!$3!$4!$5");if(h===p)throw new e.ParseError(p,"date");const g=h.split("!"),v=g.slice(0,-1).map(Number),m={year:v[0]*v[1],month:v[2],day:v[3],...i(g[4])};if(!(m.month>=1&&m.month<=12)||!(m.day>=1&&m.day<=(0,u.maximumDayInMonthFor)(m.year,m.month)))throw new e.ParseError(p,"date");return m}Wn.parseDate=o;function l(p){const h=p.replaceAll(/^(\d\d):(\d\d):(\d\d(\.\d+)?)(Z|([+-]\d\d:\d\d))?$/gu,"$1!$2!$3!$5");if(h===p)throw new e.ParseError(p,"time");const g=h.split("!"),v=g.slice(0,-1).map(Number),m={hours:v[0],minutes:v[1],seconds:v[2],...i(g[3])};if(m.seconds>=60||m.minutes>=60||m.hours>24||m.hours===24&&(m.minutes!==0||m.seconds!==0))throw new e.ParseError(p,"time");return m}function s(p){const h=l(p);return h.hours%=24,h}Wn.parseTime=s;function c(p){const[h,g]=p.split("T"),v=h.replaceAll(/^(-)?P(\d+Y)?(\d+M)?(\d+D)?$/gu,"$11S!$2!$3!$4");if(v===h)throw new e.ParseError(p,"duration");const m=v.split("!");if(g!==void 0){const E=g.replaceAll(/^(\d+H)?(\d+M)?(\d+(\.\d+)?S)?$/gu,"$1!$2!$3");if(g===""||g===E)throw new e.ParseError(p,"duration");m.push(...E.split("!"))}const T=m.map(E=>E.slice(0,-1));if(!T.slice(1).some(Boolean))throw new e.ParseError(p,"duration");const w=Number(T[0]);return(0,a.simplifyDurationRepresentation)({year:T[1]?w*Number(T[1]):void 0,month:T[2]?w*Number(T[2]):void 0,day:T[3]?w*Number(T[3]):void 0,hours:T[4]?w*Number(T[4]):void 0,minutes:T[5]?w*Number(T[5]):void 0,seconds:T[6]?w*Number(T[6]):void 0})}Wn.parseDuration=c;function d(p){const h=c(p);if(["hours","minutes","seconds","day"].some(g=>!!h[g]))throw new e.ParseError(p,"yearMonthDuration");return h}Wn.parseYearMonthDuration=d;function f(p){const h=c(p);if(["year","month"].some(g=>!!h[g]))throw new e.ParseError(p,"dayTimeDuration");return h}return Wn.parseDayTimeDuration=f,Wn}var rJ;function N6e(){if(rJ)return $v;rJ=1,Object.defineProperty($v,"__esModule",{value:!0}),$v.TermTransformer=void 0;const a=$t(),e=Ut(),u=r1(),n=ob(),r=t1(),t=t1(),i=a7(),o=a7(),l=nP();let s=class{constructor(d){this.superTypeProvider=d}transformRDFTermUnsafe(d){return this.transformTerm({term:d,type:e.Algebra.types.EXPRESSION,expressionType:e.Algebra.expressionTypes.TERM})}transformTerm(d){if(!d.term)throw new r.InvalidExpression(d);switch(d.term.termType){case"Variable":return new u.Variable(a.termToString(d.term));case"Literal":return this.transformLiteral(d.term);case"NamedNode":return new u.NamedNode(d.term.value);case"BlankNode":return new u.BlankNode(d.term.value);case"Quad":return new u.Quad(this.transformRDFTermUnsafe(d.term.subject),this.transformRDFTermUnsafe(d.term.predicate),this.transformRDFTermUnsafe(d.term.object),this.transformRDFTermUnsafe(d.term.graph));case"DefaultGraph":return new u.DefaultGraph}}transformLiteral(d){if(!d.datatype||[null,void 0,""].includes(d.datatype.value))return d.language?new u.LangStringLiteral(d.value,d.language):new u.StringLiteral(d.value);const f=d.datatype.value,p=(0,l.getSuperTypeDict)(f,this.superTypeProvider);try{if(n.TypeURL.XSD_STRING in p)return new u.StringLiteral(d.value,f);if(n.TypeURL.RDF_LANG_STRING in p)return new u.LangStringLiteral(d.value,d.language);if(n.TypeURL.XSD_YEAR_MONTH_DURATION in p)return new u.YearMonthDurationLiteral((0,i.parseYearMonthDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DAY_TIME_DURATION in p)return new u.DayTimeDurationLiteral((0,i.parseDayTimeDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DURATION in p)return new u.DurationLiteral((0,i.parseDuration)(d.value),d.value,f);if(n.TypeURL.XSD_DATE_TIME in p){const v=new Date(d.value);return Number.isNaN(v.getTime())?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):new u.DateTimeLiteral((0,i.parseDateTime)(d.value),d.value,f)}if(n.TypeURL.XSD_DATE in p)return new u.DateLiteral((0,i.parseDate)(d.value),d.value,f);if(n.TypeURL.XSD_TIME in p)return new u.TimeLiteral((0,i.parseTime)(d.value),d.value,f);if(n.TypeURL.XSD_BOOLEAN in p)return d.value!=="true"&&d.value!=="false"&&d.value!=="1"&&d.value!=="0"?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):new u.BooleanLiteral(d.value==="true"||d.value==="1",d.value);if(n.TypeURL.XSD_DECIMAL in p){const v=o.parseXSDDecimal(d.value);return v===void 0?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):n.TypeURL.XSD_INTEGER in p?new u.IntegerLiteral(v,f,d.value):new u.DecimalLiteral(v,f,d.value)}const h=n.TypeURL.XSD_FLOAT in p,g=n.TypeURL.XSD_DOUBLE in p;if(h||g){const v=o.parseXSDFloat(d.value);return v===void 0?new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value):h?new u.FloatLiteral(v,f,d.value):new u.DoubleLiteral(v,f,d.value)}return new u.Literal(d.value,f,d.value)}catch(h){if((0,t.isExpressionError)(h))return new u.NonLexicalLiteral(void 0,f,this.superTypeProvider,d.value);throw h}}};return $v.TermTransformer=s,$v}var T_={},w_={},nJ;function wb(){if(nJ)return w_;nJ=1,Object.defineProperty(w_,"__esModule",{value:!0}),w_.LRUCache=void 0;const a=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,e=new Set,u=typeof process=="object"&&process?process:{},n=(f,p,h,g)=>{typeof u.emitWarning=="function"?u.emitWarning(f,p,h,g):console.error(`[${h}] ${p}: ${f}`)};let r=globalThis.AbortController,t=globalThis.AbortSignal;if(typeof r>"u"){t=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(g,v){this._onabort.push(v)}},r=class{constructor(){p()}signal=new t;abort(g){if(!this.signal.aborted){this.signal.reason=g,this.signal.aborted=!0;for(const v of this.signal._onabort)v(g);this.signal.onabort?.(g)}}};let f=u.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1";const p=()=>{f&&(f=!1,n("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",p))}}const i=f=>!e.has(f),o=f=>f&&f===Math.floor(f)&&f>0&&isFinite(f),l=f=>o(f)?f<=Math.pow(2,8)?Uint8Array:f<=Math.pow(2,16)?Uint16Array:f<=Math.pow(2,32)?Uint32Array:f<=Number.MAX_SAFE_INTEGER?s:null:null;class s extends Array{constructor(p){super(p),this.fill(0)}}class c{heap;length;static#s=!1;static create(p){const h=l(p);if(!h)return[];c.#s=!0;const g=new c(p,h);return c.#s=!1,g}constructor(p,h){if(!c.#s)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new h(p),this.length=0}push(p){this.heap[this.length++]=p}pop(){return this.heap[--this.length]}}class d{#s;#d;#y;#m;#I;#D;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#a;#b;#n;#r;#e;#c;#f;#o;#i;#g;#u;#v;#_;#p;#T;#O;#l;static unsafeExposeInternals(p){return{starts:p.#_,ttls:p.#p,sizes:p.#v,keyMap:p.#n,keyList:p.#r,valList:p.#e,next:p.#c,prev:p.#f,get head(){return p.#o},get tail(){return p.#i},free:p.#g,isBackgroundFetch:h=>p.#t(h),backgroundFetch:(h,g,v,m)=>p.#j(h,g,v,m),moveToTail:h=>p.#N(h),indexes:h=>p.#w(h),rindexes:h=>p.#S(h),isStale:h=>p.#h(h)}}get max(){return this.#s}get maxSize(){return this.#d}get calculatedSize(){return this.#b}get size(){return this.#a}get fetchMethod(){return this.#I}get memoMethod(){return this.#D}get dispose(){return this.#y}get disposeAfter(){return this.#m}constructor(p){const{max:h=0,ttl:g,ttlResolution:v=1,ttlAutopurge:m,updateAgeOnGet:T,updateAgeOnHas:w,allowStale:E,dispose:S,disposeAfter:N,noDisposeOnSet:j,noUpdateTTL:q,maxSize:O=0,maxEntrySize:I=0,sizeCalculation:A,fetchMethod:P,memoMethod:C,noDeleteOnFetchRejection:B,noDeleteOnStaleGet:H,allowStaleOnFetchRejection:V,allowStaleOnFetchAbort:G,ignoreFetchAbort:Z}=p;if(h!==0&&!o(h))throw new TypeError("max option must be a nonnegative integer");const ae=h?l(h):Array;if(!ae)throw new Error("invalid max value: "+h);if(this.#s=h,this.#d=O,this.maxEntrySize=I||this.#d,this.sizeCalculation=A,this.sizeCalculation){if(!this.#d&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(C!==void 0&&typeof C!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#D=C,P!==void 0&&typeof P!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#I=P,this.#O=!!P,this.#n=new Map,this.#r=new Array(h).fill(void 0),this.#e=new Array(h).fill(void 0),this.#c=new ae(h),this.#f=new ae(h),this.#o=0,this.#i=0,this.#g=c.create(h),this.#a=0,this.#b=0,typeof S=="function"&&(this.#y=S),typeof N=="function"?(this.#m=N,this.#u=[]):(this.#m=void 0,this.#u=void 0),this.#T=!!this.#y,this.#l=!!this.#m,this.noDisposeOnSet=!!j,this.noUpdateTTL=!!q,this.noDeleteOnFetchRejection=!!B,this.allowStaleOnFetchRejection=!!V,this.allowStaleOnFetchAbort=!!G,this.ignoreFetchAbort=!!Z,this.maxEntrySize!==0){if(this.#d!==0&&!o(this.#d))throw new TypeError("maxSize must be a positive integer if specified");if(!o(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#Q()}if(this.allowStale=!!E,this.noDeleteOnStaleGet=!!H,this.updateAgeOnGet=!!T,this.updateAgeOnHas=!!w,this.ttlResolution=o(v)||v===0?v:1,this.ttlAutopurge=!!m,this.ttl=g||0,this.ttl){if(!o(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#M()}if(this.#s===0&&this.ttl===0&&this.#d===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#s&&!this.#d){const W="LRU_CACHE_UNBOUNDED";i(W)&&(e.add(W),n("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",W,d))}}getRemainingTTL(p){return this.#n.has(p)?1/0:0}#M(){const p=new s(this.#s),h=new s(this.#s);this.#p=p,this.#_=h,this.#C=(m,T,w=a.now())=>{if(h[m]=T!==0?w:0,p[m]=T,T!==0&&this.ttlAutopurge){const E=setTimeout(()=>{this.#h(m)&&this.#E(this.#r[m],"expire")},T+1);E.unref&&E.unref()}},this.#x=m=>{h[m]=p[m]!==0?a.now():0},this.#A=(m,T)=>{if(p[T]){const w=p[T],E=h[T];if(!w||!E)return;m.ttl=w,m.start=E,m.now=g||v();const S=m.now-E;m.remainingTTL=w-S}};let g=0;const v=()=>{const m=a.now();if(this.ttlResolution>0){g=m;const T=setTimeout(()=>g=0,this.ttlResolution);T.unref&&T.unref()}return m};this.getRemainingTTL=m=>{const T=this.#n.get(m);if(T===void 0)return 0;const w=p[T],E=h[T];if(!w||!E)return 1/0;const S=(g||v())-E;return w-S},this.#h=m=>{const T=h[m],w=p[m];return!!w&&!!T&&(g||v())-T>w}}#x=()=>{};#A=()=>{};#C=()=>{};#h=()=>!1;#Q(){const p=new s(this.#s);this.#b=0,this.#v=p,this.#R=h=>{this.#b-=p[h],p[h]=0},this.#L=(h,g,v,m)=>{if(this.#t(g))return 0;if(!o(v))if(m){if(typeof m!="function")throw new TypeError("sizeCalculation must be a function");if(v=m(g,h),!o(v))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return v},this.#F=(h,g,v)=>{if(p[h]=g,this.#d){const m=this.#d-p[h];for(;this.#b>m;)this.#P(!0)}this.#b+=p[h],v&&(v.entrySize=g,v.totalCalculatedSize=this.#b)}}#R=p=>{};#F=(p,h,g)=>{};#L=(p,h,g,v)=>{if(g||v)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#w({allowStale:p=this.allowStale}={}){if(this.#a)for(let h=this.#i;!(!this.#q(h)||((p||!this.#h(h))&&(yield h),h===this.#o));)h=this.#f[h]}*#S({allowStale:p=this.allowStale}={}){if(this.#a)for(let h=this.#o;!(!this.#q(h)||((p||!this.#h(h))&&(yield h),h===this.#i));)h=this.#c[h]}#q(p){return p!==void 0&&this.#n.get(this.#r[p])===p}*entries(){for(const p of this.#w())this.#e[p]!==void 0&&this.#r[p]!==void 0&&!this.#t(this.#e[p])&&(yield[this.#r[p],this.#e[p]])}*rentries(){for(const p of this.#S())this.#e[p]!==void 0&&this.#r[p]!==void 0&&!this.#t(this.#e[p])&&(yield[this.#r[p],this.#e[p]])}*keys(){for(const p of this.#w()){const h=this.#r[p];h!==void 0&&!this.#t(this.#e[p])&&(yield h)}}*rkeys(){for(const p of this.#S()){const h=this.#r[p];h!==void 0&&!this.#t(this.#e[p])&&(yield h)}}*values(){for(const p of this.#w())this.#e[p]!==void 0&&!this.#t(this.#e[p])&&(yield this.#e[p])}*rvalues(){for(const p of this.#S())this.#e[p]!==void 0&&!this.#t(this.#e[p])&&(yield this.#e[p])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(p,h={}){for(const g of this.#w()){const v=this.#e[g],m=this.#t(v)?v.__staleWhileFetching:v;if(m!==void 0&&p(m,this.#r[g],this))return this.get(this.#r[g],h)}}forEach(p,h=this){for(const g of this.#w()){const v=this.#e[g],m=this.#t(v)?v.__staleWhileFetching:v;m!==void 0&&p.call(h,m,this.#r[g],this)}}rforEach(p,h=this){for(const g of this.#S()){const v=this.#e[g],m=this.#t(v)?v.__staleWhileFetching:v;m!==void 0&&p.call(h,m,this.#r[g],this)}}purgeStale(){let p=!1;for(const h of this.#S({allowStale:!0}))this.#h(h)&&(this.#E(this.#r[h],"expire"),p=!0);return p}info(p){const h=this.#n.get(p);if(h===void 0)return;const g=this.#e[h],v=this.#t(g)?g.__staleWhileFetching:g;if(v===void 0)return;const m={value:v};if(this.#p&&this.#_){const T=this.#p[h],w=this.#_[h];if(T&&w){const E=T-(a.now()-w);m.ttl=E,m.start=Date.now()}}return this.#v&&(m.size=this.#v[h]),m}dump(){const p=[];for(const h of this.#w({allowStale:!0})){const g=this.#r[h],v=this.#e[h],m=this.#t(v)?v.__staleWhileFetching:v;if(m===void 0||g===void 0)continue;const T={value:m};if(this.#p&&this.#_){T.ttl=this.#p[h];const w=a.now()-this.#_[h];T.start=Math.floor(Date.now()-w)}this.#v&&(T.size=this.#v[h]),p.unshift([g,T])}return p}load(p){this.clear();for(const[h,g]of p){if(g.start){const v=Date.now()-g.start;g.start=a.now()-v}this.set(h,g.value,g)}}set(p,h,g={}){if(h===void 0)return this.delete(p),this;const{ttl:v=this.ttl,start:m,noDisposeOnSet:T=this.noDisposeOnSet,sizeCalculation:w=this.sizeCalculation,status:E}=g;let{noUpdateTTL:S=this.noUpdateTTL}=g;const N=this.#L(p,h,g.size||0,w);if(this.maxEntrySize&&N>this.maxEntrySize)return E&&(E.set="miss",E.maxEntrySizeExceeded=!0),this.#E(p,"set"),this;let j=this.#a===0?void 0:this.#n.get(p);if(j===void 0)j=this.#a===0?this.#i:this.#g.length!==0?this.#g.pop():this.#a===this.#s?this.#P(!1):this.#a,this.#r[j]=p,this.#e[j]=h,this.#n.set(p,j),this.#c[this.#i]=j,this.#f[j]=this.#i,this.#i=j,this.#a++,this.#F(j,N,E),E&&(E.set="add"),S=!1;else{this.#N(j);const q=this.#e[j];if(h!==q){if(this.#O&&this.#t(q)){q.__abortController.abort(new Error("replaced"));const{__staleWhileFetching:O}=q;O!==void 0&&!T&&(this.#T&&this.#y?.(O,p,"set"),this.#l&&this.#u?.push([O,p,"set"]))}else T||(this.#T&&this.#y?.(q,p,"set"),this.#l&&this.#u?.push([q,p,"set"]));if(this.#R(j),this.#F(j,N,E),this.#e[j]=h,E){E.set="replace";const O=q&&this.#t(q)?q.__staleWhileFetching:q;O!==void 0&&(E.oldValue=O)}}else E&&(E.set="update")}if(v!==0&&!this.#p&&this.#M(),this.#p&&(S||this.#C(j,v,m),E&&this.#A(E,j)),!T&&this.#l&&this.#u){const q=this.#u;let O;for(;O=q?.shift();)this.#m?.(...O)}return this}pop(){try{for(;this.#a;){const p=this.#e[this.#o];if(this.#P(!0),this.#t(p)){if(p.__staleWhileFetching)return p.__staleWhileFetching}else if(p!==void 0)return p}}finally{if(this.#l&&this.#u){const p=this.#u;let h;for(;h=p?.shift();)this.#m?.(...h)}}}#P(p){const h=this.#o,g=this.#r[h],v=this.#e[h];return this.#O&&this.#t(v)?v.__abortController.abort(new Error("evicted")):(this.#T||this.#l)&&(this.#T&&this.#y?.(v,g,"evict"),this.#l&&this.#u?.push([v,g,"evict"])),this.#R(h),p&&(this.#r[h]=void 0,this.#e[h]=void 0,this.#g.push(h)),this.#a===1?(this.#o=this.#i=0,this.#g.length=0):this.#o=this.#c[h],this.#n.delete(g),this.#a--,h}has(p,h={}){const{updateAgeOnHas:g=this.updateAgeOnHas,status:v}=h,m=this.#n.get(p);if(m!==void 0){const T=this.#e[m];if(this.#t(T)&&T.__staleWhileFetching===void 0)return!1;if(this.#h(m))v&&(v.has="stale",this.#A(v,m));else return g&&this.#x(m),v&&(v.has="hit",this.#A(v,m)),!0}else v&&(v.has="miss");return!1}peek(p,h={}){const{allowStale:g=this.allowStale}=h,v=this.#n.get(p);if(v===void 0||!g&&this.#h(v))return;const m=this.#e[v];return this.#t(m)?m.__staleWhileFetching:m}#j(p,h,g,v){const m=h===void 0?void 0:this.#e[h];if(this.#t(m))return m;const T=new r,{signal:w}=g;w?.addEventListener("abort",()=>T.abort(w.reason),{signal:T.signal});const E={signal:T.signal,options:g,context:v},S=(A,P=!1)=>{const{aborted:C}=T.signal,B=g.ignoreFetchAbort&&A!==void 0;if(g.status&&(C&&!P?(g.status.fetchAborted=!0,g.status.fetchError=T.signal.reason,B&&(g.status.fetchAbortIgnored=!0)):g.status.fetchResolved=!0),C&&!B&&!P)return j(T.signal.reason);const H=O;return this.#e[h]===O&&(A===void 0?H.__staleWhileFetching?this.#e[h]=H.__staleWhileFetching:this.#E(p,"fetch"):(g.status&&(g.status.fetchUpdated=!0),this.set(p,A,E.options))),A},N=A=>(g.status&&(g.status.fetchRejected=!0,g.status.fetchError=A),j(A)),j=A=>{const{aborted:P}=T.signal,C=P&&g.allowStaleOnFetchAbort,B=C||g.allowStaleOnFetchRejection,H=B||g.noDeleteOnFetchRejection,V=O;if(this.#e[h]===O&&(!H||V.__staleWhileFetching===void 0?this.#E(p,"fetch"):C||(this.#e[h]=V.__staleWhileFetching)),B)return g.status&&V.__staleWhileFetching!==void 0&&(g.status.returnedStale=!0),V.__staleWhileFetching;if(V.__returned===V)throw A},q=(A,P)=>{const C=this.#I?.(p,m,E);C&&C instanceof Promise&&C.then(B=>A(B===void 0?void 0:B),P),T.signal.addEventListener("abort",()=>{(!g.ignoreFetchAbort||g.allowStaleOnFetchAbort)&&(A(void 0),g.allowStaleOnFetchAbort&&(A=B=>S(B,!0)))})};g.status&&(g.status.fetchDispatched=!0);const O=new Promise(q).then(S,N),I=Object.assign(O,{__abortController:T,__staleWhileFetching:m,__returned:void 0});return h===void 0?(this.set(p,I,{...E.options,status:void 0}),h=this.#n.get(p)):this.#e[h]=I,I}#t(p){if(!this.#O)return!1;const h=p;return!!h&&h instanceof Promise&&h.hasOwnProperty("__staleWhileFetching")&&h.__abortController instanceof r}async fetch(p,h={}){const{allowStale:g=this.allowStale,updateAgeOnGet:v=this.updateAgeOnGet,noDeleteOnStaleGet:m=this.noDeleteOnStaleGet,ttl:T=this.ttl,noDisposeOnSet:w=this.noDisposeOnSet,size:E=0,sizeCalculation:S=this.sizeCalculation,noUpdateTTL:N=this.noUpdateTTL,noDeleteOnFetchRejection:j=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:q=this.allowStaleOnFetchRejection,ignoreFetchAbort:O=this.ignoreFetchAbort,allowStaleOnFetchAbort:I=this.allowStaleOnFetchAbort,context:A,forceRefresh:P=!1,status:C,signal:B}=h;if(!this.#O)return C&&(C.fetch="get"),this.get(p,{allowStale:g,updateAgeOnGet:v,noDeleteOnStaleGet:m,status:C});const H={allowStale:g,updateAgeOnGet:v,noDeleteOnStaleGet:m,ttl:T,noDisposeOnSet:w,size:E,sizeCalculation:S,noUpdateTTL:N,noDeleteOnFetchRejection:j,allowStaleOnFetchRejection:q,allowStaleOnFetchAbort:I,ignoreFetchAbort:O,status:C,signal:B};let V=this.#n.get(p);if(V===void 0){C&&(C.fetch="miss");const G=this.#j(p,V,H,A);return G.__returned=G}else{const G=this.#e[V];if(this.#t(G)){const se=g&&G.__staleWhileFetching!==void 0;return C&&(C.fetch="inflight",se&&(C.returnedStale=!0)),se?G.__staleWhileFetching:G.__returned=G}const Z=this.#h(V);if(!P&&!Z)return C&&(C.fetch="hit"),this.#N(V),v&&this.#x(V),C&&this.#A(C,V),G;const ae=this.#j(p,V,H,A),te=ae.__staleWhileFetching!==void 0&&g;return C&&(C.fetch=Z?"stale":"refresh",te&&Z&&(C.returnedStale=!0)),te?ae.__staleWhileFetching:ae.__returned=ae}}async forceFetch(p,h={}){const g=await this.fetch(p,h);if(g===void 0)throw new Error("fetch() returned undefined");return g}memo(p,h={}){const g=this.#D;if(!g)throw new Error("no memoMethod provided to constructor");const{context:v,forceRefresh:m,...T}=h,w=this.get(p,T);if(!m&&w!==void 0)return w;const E=g(p,w,{options:T,context:v});return this.set(p,E,T),E}get(p,h={}){const{allowStale:g=this.allowStale,updateAgeOnGet:v=this.updateAgeOnGet,noDeleteOnStaleGet:m=this.noDeleteOnStaleGet,status:T}=h,w=this.#n.get(p);if(w!==void 0){const E=this.#e[w],S=this.#t(E);return T&&this.#A(T,w),this.#h(w)?(T&&(T.get="stale"),S?(T&&g&&E.__staleWhileFetching!==void 0&&(T.returnedStale=!0),g?E.__staleWhileFetching:void 0):(m||this.#E(p,"expire"),T&&g&&(T.returnedStale=!0),g?E:void 0)):(T&&(T.get="hit"),S?E.__staleWhileFetching:(this.#N(w),v&&this.#x(w),E))}else T&&(T.get="miss")}#B(p,h){this.#f[h]=p,this.#c[p]=h}#N(p){p!==this.#i&&(p===this.#o?this.#o=this.#c[p]:this.#B(this.#f[p],this.#c[p]),this.#B(this.#i,p),this.#i=p)}delete(p){return this.#E(p,"delete")}#E(p,h){let g=!1;if(this.#a!==0){const v=this.#n.get(p);if(v!==void 0)if(g=!0,this.#a===1)this.#U(h);else{this.#R(v);const m=this.#e[v];if(this.#t(m)?m.__abortController.abort(new Error("deleted")):(this.#T||this.#l)&&(this.#T&&this.#y?.(m,p,h),this.#l&&this.#u?.push([m,p,h])),this.#n.delete(p),this.#r[v]=void 0,this.#e[v]=void 0,v===this.#i)this.#i=this.#f[v];else if(v===this.#o)this.#o=this.#c[v];else{const T=this.#f[v];this.#c[T]=this.#c[v];const w=this.#c[v];this.#f[w]=this.#f[v]}this.#a--,this.#g.push(v)}}if(this.#l&&this.#u?.length){const v=this.#u;let m;for(;m=v?.shift();)this.#m?.(...m)}return g}clear(){return this.#U("delete")}#U(p){for(const h of this.#S({allowStale:!0})){const g=this.#e[h];if(this.#t(g))g.__abortController.abort(new Error("deleted"));else{const v=this.#r[h];this.#T&&this.#y?.(g,v,p),this.#l&&this.#u?.push([g,v,p])}}if(this.#n.clear(),this.#e.fill(void 0),this.#r.fill(void 0),this.#p&&this.#_&&(this.#p.fill(0),this.#_.fill(0)),this.#v&&this.#v.fill(0),this.#o=0,this.#i=0,this.#g.length=0,this.#b=0,this.#a=0,this.#l&&this.#u){const h=this.#u;let g;for(;g=h?.shift();)this.#m?.(...g)}}}return w_.LRUCache=d,w_}var aJ;function I6e(){if(aJ)return T_;aJ=1,Object.defineProperty(T_,"__esModule",{value:!0}),T_.prepareEvaluatorActionContext=void 0;const a=lt(),e=wb(),u=f4();function n(r){let t=r;if(t.has(a.KeysInitQuery.extensionFunctionCreator)&&t.has(a.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");if(t.has(a.KeysInitQuery.extensionFunctionCreator))t=t.set(a.KeysExpressionEvaluator.extensionFunctionCreator,t.get(a.KeysInitQuery.extensionFunctionCreator));else if(t.has(a.KeysInitQuery.extensionFunctions)){const i=t.getSafe(a.KeysInitQuery.extensionFunctions);t=t.set(a.KeysExpressionEvaluator.extensionFunctionCreator,async o=>i[o.value])}else t=t.setDefault(a.KeysExpressionEvaluator.extensionFunctionCreator,async()=>{});return t=t.setDefault(a.KeysExpressionEvaluator.defaultTimeZone,(0,u.extractTimeZone)(t.getSafe(a.KeysInitQuery.queryTimestamp))),t=t.setDefault(a.KeysExpressionEvaluator.superTypeProvider,{cache:new e.LRUCache({max:1e3}),discoverer:()=>"term"}),t}return T_.prepareEvaluatorActionContext=n,T_}var iJ;function $e(){return iJ||(iJ=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.LangStringLiteral=a.TimeLiteral=a.DurationLiteral=a.DateLiteral=a.DayTimeDurationLiteral=a.DateTimeLiteral=a.yearMonthDurationsToMonths=a.toUTCDate=a.toDateTimeRepresentation=a.negateDuration=a.extractRawTimeZone=a.defaultedYearMonthDurationRepresentation=a.defaultedDurationRepresentation=a.defaultedDayTimeDurationRepresentation=a.defaultedDateTimeRepresentation=a.dayTimeDurationsToSeconds=a.isSubTypeOf=a.SparqlOperator=a.TypeAlias=a.TypeURL=a.typedLiteral=a.InvalidArity=a.InvalidLexicalForm=a.ExtensionFunctionError=a.CastError=a.UnboundVariableError=a.NoAggregator=a.InError=a.CoalesceError=a.InvalidArgumentTypes=a.InvalidTimezoneCall=a.IncompatibleLanguageOperation=a.RDFEqualTypeError=a.EmptyAggregateError=a.isExpressionError=a.ExpressionError=a.Builder=a.expressionToVar=a.float=a.decimal=a.langString=a.dateTime=a.integer=a.double=a.string=a.bool=a.declare=a.prepareEvaluatorActionContext=a.OverloadTree=a.TermTransformer=void 0,a.trimToDayTimeDuration=a.trimToYearMonthDuration=a.parseDate=a.parseXSDFloat=a.parseXSDDecimal=a.parseYearMonthDuration=a.parseTime=a.parseDuration=a.parseDayTimeDuration=a.parseDateTime=a.elapsedDuration=a.addDurationToDateTime=a.isNonLexicalLiteral=a.StringLiteral=a.NonLexicalLiteral=a.FloatLiteral=a.IntegerLiteral=a.Literal=a.Existence=a.Aggregate=a.DoubleLiteral=a.DefaultGraph=a.DecimalLiteral=a.BlankNode=a.BooleanLiteral=a.NumericLiteral=a.Variable=a.NamedNode=a.Operator=a.Quad=a.YearMonthDurationLiteral=a.Term=void 0;var e=N6e();Object.defineProperty(a,"TermTransformer",{enumerable:!0,get:function(){return e.TermTransformer}});var u=X_e();Object.defineProperty(a,"OverloadTree",{enumerable:!0,get:function(){return u.OverloadTree}});var n=I6e();Object.defineProperty(a,"prepareEvaluatorActionContext",{enumerable:!0,get:function(){return n.prepareEvaluatorActionContext}});var r=K_e();Object.defineProperty(a,"declare",{enumerable:!0,get:function(){return r.declare}}),Object.defineProperty(a,"bool",{enumerable:!0,get:function(){return r.bool}}),Object.defineProperty(a,"string",{enumerable:!0,get:function(){return r.string}}),Object.defineProperty(a,"double",{enumerable:!0,get:function(){return r.double}}),Object.defineProperty(a,"integer",{enumerable:!0,get:function(){return r.integer}}),Object.defineProperty(a,"dateTime",{enumerable:!0,get:function(){return r.dateTime}}),Object.defineProperty(a,"langString",{enumerable:!0,get:function(){return r.langString}}),Object.defineProperty(a,"decimal",{enumerable:!0,get:function(){return r.decimal}}),Object.defineProperty(a,"float",{enumerable:!0,get:function(){return r.float}}),Object.defineProperty(a,"expressionToVar",{enumerable:!0,get:function(){return r.expressionToVar}}),Object.defineProperty(a,"Builder",{enumerable:!0,get:function(){return r.Builder}});var t=t1();Object.defineProperty(a,"ExpressionError",{enumerable:!0,get:function(){return t.ExpressionError}}),Object.defineProperty(a,"isExpressionError",{enumerable:!0,get:function(){return t.isExpressionError}}),Object.defineProperty(a,"EmptyAggregateError",{enumerable:!0,get:function(){return t.EmptyAggregateError}}),Object.defineProperty(a,"RDFEqualTypeError",{enumerable:!0,get:function(){return t.RDFEqualTypeError}}),Object.defineProperty(a,"IncompatibleLanguageOperation",{enumerable:!0,get:function(){return t.IncompatibleLanguageOperation}}),Object.defineProperty(a,"InvalidTimezoneCall",{enumerable:!0,get:function(){return t.InvalidTimezoneCall}}),Object.defineProperty(a,"InvalidArgumentTypes",{enumerable:!0,get:function(){return t.InvalidArgumentTypes}}),Object.defineProperty(a,"CoalesceError",{enumerable:!0,get:function(){return t.CoalesceError}}),Object.defineProperty(a,"InError",{enumerable:!0,get:function(){return t.InError}}),Object.defineProperty(a,"NoAggregator",{enumerable:!0,get:function(){return t.NoAggregator}}),Object.defineProperty(a,"UnboundVariableError",{enumerable:!0,get:function(){return t.UnboundVariableError}}),Object.defineProperty(a,"CastError",{enumerable:!0,get:function(){return t.CastError}}),Object.defineProperty(a,"ExtensionFunctionError",{enumerable:!0,get:function(){return t.ExtensionFunctionError}}),Object.defineProperty(a,"InvalidLexicalForm",{enumerable:!0,get:function(){return t.InvalidLexicalForm}}),Object.defineProperty(a,"InvalidArity",{enumerable:!0,get:function(){return t.InvalidArity}});var i=ob();Object.defineProperty(a,"typedLiteral",{enumerable:!0,get:function(){return i.typedLiteral}}),Object.defineProperty(a,"TypeURL",{enumerable:!0,get:function(){return i.TypeURL}}),Object.defineProperty(a,"TypeAlias",{enumerable:!0,get:function(){return i.TypeAlias}}),Object.defineProperty(a,"SparqlOperator",{enumerable:!0,get:function(){return i.SparqlOperator}});var o=nP();Object.defineProperty(a,"isSubTypeOf",{enumerable:!0,get:function(){return o.isSubTypeOf}});var l=f4();Object.defineProperty(a,"dayTimeDurationsToSeconds",{enumerable:!0,get:function(){return l.dayTimeDurationsToSeconds}}),Object.defineProperty(a,"defaultedDateTimeRepresentation",{enumerable:!0,get:function(){return l.defaultedDateTimeRepresentation}}),Object.defineProperty(a,"defaultedDayTimeDurationRepresentation",{enumerable:!0,get:function(){return l.defaultedDayTimeDurationRepresentation}}),Object.defineProperty(a,"defaultedDurationRepresentation",{enumerable:!0,get:function(){return l.defaultedDurationRepresentation}}),Object.defineProperty(a,"defaultedYearMonthDurationRepresentation",{enumerable:!0,get:function(){return l.defaultedYearMonthDurationRepresentation}}),Object.defineProperty(a,"extractRawTimeZone",{enumerable:!0,get:function(){return l.extractRawTimeZone}}),Object.defineProperty(a,"negateDuration",{enumerable:!0,get:function(){return l.negateDuration}}),Object.defineProperty(a,"toDateTimeRepresentation",{enumerable:!0,get:function(){return l.toDateTimeRepresentation}}),Object.defineProperty(a,"toUTCDate",{enumerable:!0,get:function(){return l.toUTCDate}}),Object.defineProperty(a,"yearMonthDurationsToMonths",{enumerable:!0,get:function(){return l.yearMonthDurationsToMonths}});var s=r1();Object.defineProperty(a,"DateTimeLiteral",{enumerable:!0,get:function(){return s.DateTimeLiteral}}),Object.defineProperty(a,"DayTimeDurationLiteral",{enumerable:!0,get:function(){return s.DayTimeDurationLiteral}}),Object.defineProperty(a,"DateLiteral",{enumerable:!0,get:function(){return s.DateLiteral}}),Object.defineProperty(a,"DurationLiteral",{enumerable:!0,get:function(){return s.DurationLiteral}}),Object.defineProperty(a,"TimeLiteral",{enumerable:!0,get:function(){return s.TimeLiteral}}),Object.defineProperty(a,"LangStringLiteral",{enumerable:!0,get:function(){return s.LangStringLiteral}}),Object.defineProperty(a,"Term",{enumerable:!0,get:function(){return s.Term}}),Object.defineProperty(a,"YearMonthDurationLiteral",{enumerable:!0,get:function(){return s.YearMonthDurationLiteral}}),Object.defineProperty(a,"Quad",{enumerable:!0,get:function(){return s.Quad}}),Object.defineProperty(a,"Operator",{enumerable:!0,get:function(){return s.Operator}}),Object.defineProperty(a,"NamedNode",{enumerable:!0,get:function(){return s.NamedNode}}),Object.defineProperty(a,"Variable",{enumerable:!0,get:function(){return s.Variable}}),Object.defineProperty(a,"NumericLiteral",{enumerable:!0,get:function(){return s.NumericLiteral}}),Object.defineProperty(a,"BooleanLiteral",{enumerable:!0,get:function(){return s.BooleanLiteral}}),Object.defineProperty(a,"BlankNode",{enumerable:!0,get:function(){return s.BlankNode}}),Object.defineProperty(a,"DecimalLiteral",{enumerable:!0,get:function(){return s.DecimalLiteral}}),Object.defineProperty(a,"DefaultGraph",{enumerable:!0,get:function(){return s.DefaultGraph}}),Object.defineProperty(a,"DoubleLiteral",{enumerable:!0,get:function(){return s.DoubleLiteral}}),Object.defineProperty(a,"Aggregate",{enumerable:!0,get:function(){return s.Aggregate}}),Object.defineProperty(a,"Existence",{enumerable:!0,get:function(){return s.Existence}}),Object.defineProperty(a,"Literal",{enumerable:!0,get:function(){return s.Literal}}),Object.defineProperty(a,"IntegerLiteral",{enumerable:!0,get:function(){return s.IntegerLiteral}}),Object.defineProperty(a,"FloatLiteral",{enumerable:!0,get:function(){return s.FloatLiteral}}),Object.defineProperty(a,"NonLexicalLiteral",{enumerable:!0,get:function(){return s.NonLexicalLiteral}}),Object.defineProperty(a,"StringLiteral",{enumerable:!0,get:function(){return s.StringLiteral}}),Object.defineProperty(a,"isNonLexicalLiteral",{enumerable:!0,get:function(){return s.isNonLexicalLiteral}});var c=J_e();Object.defineProperty(a,"addDurationToDateTime",{enumerable:!0,get:function(){return c.addDurationToDateTime}}),Object.defineProperty(a,"elapsedDuration",{enumerable:!0,get:function(){return c.elapsedDuration}});var d=a7();Object.defineProperty(a,"parseDateTime",{enumerable:!0,get:function(){return d.parseDateTime}}),Object.defineProperty(a,"parseDayTimeDuration",{enumerable:!0,get:function(){return d.parseDayTimeDuration}}),Object.defineProperty(a,"parseDuration",{enumerable:!0,get:function(){return d.parseDuration}}),Object.defineProperty(a,"parseTime",{enumerable:!0,get:function(){return d.parseTime}}),Object.defineProperty(a,"parseYearMonthDuration",{enumerable:!0,get:function(){return d.parseYearMonthDuration}}),Object.defineProperty(a,"parseXSDDecimal",{enumerable:!0,get:function(){return d.parseXSDDecimal}}),Object.defineProperty(a,"parseXSDFloat",{enumerable:!0,get:function(){return d.parseXSDFloat}}),Object.defineProperty(a,"parseDate",{enumerable:!0,get:function(){return d.parseDate}});var f=f4();Object.defineProperty(a,"trimToYearMonthDuration",{enumerable:!0,get:function(){return f.trimToYearMonthDuration}}),Object.defineProperty(a,"trimToDayTimeDuration",{enumerable:!0,get:function(){return f.trimToDayTimeDuration}})})(Oj)),Oj}var uJ;function W_e(){if(uJ)return hd;uJ=1,Object.defineProperty(hd,"__esModule",{value:!0}),hd.TermFunctionBase=hd.ExpressionFunctionBase=void 0;const a=lt(),e=$e();class u{constructor({arity:t,operator:i,apply:o}){this.arity=t,this.operator=i,this.apply=o}checkArity(t){return Array.isArray(this.arity)?this.arity.includes(t.length):this.arity===Number.POSITIVE_INFINITY?!0:t.length===this.arity}}hd.ExpressionFunctionBase=u;class n extends u{constructor({arity:t,operator:i,overloads:o}){super({arity:t,operator:i,apply:async({args:l,exprEval:s,mapping:c})=>this.applyOnTerms(await Promise.all(l.map(d=>s.evaluatorExpressionEvaluation(d,c))),s)}),this.supportsTermExpressions=!0,this.overloads=o}applyOnTerms(t,i){return(this.overloads.search(t,i.context.getSafe(a.KeysExpressionEvaluator.superTypeProvider),i.context.getSafe(a.KeysInitQuery.functionArgumentsCache))??this.handleInvalidTypes(t))(i)(t)}handleInvalidTypes(t){throw new e.InvalidArgumentTypes(t,this.operator)}}return hd.TermFunctionBase=n,hd}var oJ;function Je(){return oJ||(oJ=1,(function(a){var e=fd&&fd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=fd&&fd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(N_e(),a),u(r6e(),a),u(n6e(),a),u(W_e(),a)})(fd)),fd}var wd={},S_={},sJ;function Y_e(){if(sJ)return S_;sJ=1,Object.defineProperty(S_,"__esModule",{value:!0}),S_.ActorQueryOperation=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return S_.ActorQueryOperation=e,S_}var E_={},Sd={},A_={},cJ;function D6e(){if(cJ)return A_;cJ=1,Object.defineProperty(A_,"__esModule",{value:!0}),A_.MetadataValidationState=void 0;let a=class{constructor(){this.invalidateListeners=[],this.valid=!0}addInvalidateListener(u){this.invalidateListeners.push(u)}invalidate(){if(this.valid){this.valid=!1;for(const u of this.invalidateListeners)u()}}};return A_.MetadataValidationState=a,A_}var Fi={},lJ;function F6e(){if(lJ)return Fi;lJ=1,Object.defineProperty(Fi,"__esModule",{value:!0}),Fi.cachifyMetadata=Fi.validateMetadataBindings=Fi.validateMetadataQuads=Fi.getMetadataBindings=Fi.getMetadataQuads=void 0;function a(t){return r(()=>new Promise((i,o)=>{t.getProperty("metadata",l=>i(l)),t.on("error",o)}).then(i=>u(i)))}Fi.getMetadataQuads=a;function e(t){return r(()=>new Promise((i,o)=>{t.getProperty("metadata",l=>i(l)),t.on("error",o)}).then(i=>n(i)))}Fi.getMetadataBindings=e;function u(t){for(const i of["cardinality"])if(!(i in t))throw new Error(`Invalid metadata: missing ${i} in ${JSON.stringify(t)}`);return t}Fi.validateMetadataQuads=u;function n(t){for(const i of["cardinality","variables"])if(!(i in t))throw new Error(`Invalid metadata: missing ${i} in ${JSON.stringify(t)}`);return t}Fi.validateMetadataBindings=n;function r(t){let i;return()=>(i||(i=t(),i.then(o=>o.state.addInvalidateListener(()=>{i=void 0})).catch(()=>{})),i)}return Fi.cachifyMetadata=r,Fi}var dJ;function xa(){return dJ||(dJ=1,(function(a){var e=Sd&&Sd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Sd&&Sd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(D6e(),a),u(F6e(),a)})(Sd)),Sd}var fJ;function Z_e(){if(fJ)return E_;fJ=1,Object.defineProperty(E_,"__esModule",{value:!0}),E_.ActorQueryOperationTyped=void 0;const a=lt(),e=De(),u=xa(),n=Y_e();let r=class extends n.ActorQueryOperation{constructor(i,o){if(super({...i,operationName:o}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(i){if(!i.operation)return(0,e.failTest)("Missing field 'operation' in a query operation action.");if(i.operation.type!==this.operationName)return(0,e.failTest)(`Actor ${this.name} only supports ${this.operationName} operations, but got ${i.operation.type}`);const o=i.operation;return this.testOperation(o,i.context)}async run(i,o){const l=i.context.get(a.KeysInitQuery.physicalQueryPlanLogger);l&&(l.logOperation(i.operation.type,void 0,i.operation,i.context.get(a.KeysInitQuery.physicalQueryPlanNode),this.name,{}),i.context=i.context.set(a.KeysInitQuery.physicalQueryPlanNode,i.operation));const s=i.operation,c=i.context.set(a.KeysQueryOperation.operation,s),d=await this.runOperation(s,c,o);return"metadata"in d&&(d.metadata=(0,u.cachifyMetadata)(d.metadata)),d}};return E_.ActorQueryOperationTyped=r,E_}var O_={},pJ;function P6e(){if(pJ)return O_;pJ=1,Object.defineProperty(O_,"__esModule",{value:!0}),O_.ActorQueryOperationTypedMediated=void 0;const a=Z_e();let e=class extends a.ActorQueryOperationTyped{constructor(n,r){super(n,r)}};return O_.ActorQueryOperationTypedMediated=e,O_}var x_={},hJ;function j6e(){if(hJ)return x_;hJ=1,Object.defineProperty(x_,"__esModule",{value:!0}),x_.BusQueryOperation=void 0;const a=De();let e=class extends a.BusIndexed{constructor(n){super({...n,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}};return x_.BusQueryOperation=e,x_}var yJ;function qr(){return yJ||(yJ=1,(function(a){var e=wd&&wd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=wd&&wd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Y_e(),a),u(Z_e(),a),u(P6e(),a),u(j6e(),a)})(wd)),wd}var Ed={},R_={},Ad={},N_={},mJ;function M6e(){if(mJ)return N_;mJ=1,Object.defineProperty(N_,"__esModule",{value:!0}),N_.ActorRdfResolveHypermediaLinksQueue=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return N_.ActorRdfResolveHypermediaLinksQueue=e,N_}var qj={},bJ;function C6e(){return bJ||(bJ=1,Object.defineProperty(qj,"__esModule",{value:!0})),qj}var I_={},gJ;function L6e(){if(gJ)return I_;gJ=1,Object.defineProperty(I_,"__esModule",{value:!0}),I_.LinkQueueWrapper=void 0;let a=class{constructor(u){this.linkQueue=u}push(u,n){return this.linkQueue.push(u,n)}getSize(){return this.linkQueue.getSize()}isEmpty(){return this.linkQueue.isEmpty()}pop(){return this.linkQueue.pop()}peek(){return this.linkQueue.peek()}};return I_.LinkQueueWrapper=a,I_}var vJ;function Iq(){return vJ||(vJ=1,(function(a){var e=Ad&&Ad.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ad&&Ad.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(M6e(),a),u(C6e(),a),u(L6e(),a)})(Ad)),Ad}var D_={},_J;function e2e(){if(_J)return D_;_J=1,Object.defineProperty(D_,"__esModule",{value:!0}),D_.LinkQueueFifo=void 0;let a=class{constructor(){this.links=[]}push(u){return this.links.push(u),!0}getSize(){return this.links.length}isEmpty(){return this.links.length===0}pop(){return this.links.shift()}peek(){return this.links[0]}};return D_.LinkQueueFifo=a,D_}var TJ;function q6e(){if(TJ)return R_;TJ=1,Object.defineProperty(R_,"__esModule",{value:!0}),R_.ActorRdfResolveHypermediaLinksQueueFifo=void 0;const a=Iq(),e=De(),u=e2e();let n=class extends a.ActorRdfResolveHypermediaLinksQueue{constructor(t){super(t)}async test(t){return(0,e.passTestVoid)()}async run(t){return{linkQueue:new u.LinkQueueFifo}}};return R_.ActorRdfResolveHypermediaLinksQueueFifo=n,R_}var wJ;function Dq(){return wJ||(wJ=1,(function(a){var e=Ed&&Ed.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ed&&Ed.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(q6e(),a),u(e2e(),a)})(Ed)),Ed}var Od={},F_={},SJ;function B6e(){if(SJ)return F_;SJ=1,Object.defineProperty(F_,"__esModule",{value:!0}),F_.MediatorRace=void 0;const a=De();let e=class extends a.Mediator{constructor(n){super(n)}mediateWith(n,r){return new Promise((t,i)=>{const o=[];for(const l of r)l.reply.then(s=>{s.isPassed()?t((0,a.passTestWithSideData)(l.actor,s.getSideData())):(o.push(s.getFailMessage()),o.length===r.length&&t((0,a.failTest)(this.constructFailureMessage(n,o))))}).catch(s=>{i(s)})})}};return F_.MediatorRace=e,F_}var EJ;function jt(){return EJ||(EJ=1,(function(a){var e=Od&&Od.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Od&&Od.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(B6e(),a)})(Od)),Od}var xd={},P_={},Rd={},j_={},AJ;function U6e(){if(AJ)return j_;AJ=1,Object.defineProperty(j_,"__esModule",{value:!0}),j_.ActorExtractLinks=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}static collectStream(n,r){return new Promise((t,i)=>{const o=[];n.on("error",i),n.on("data",l=>r(l,o)),n.on("end",()=>{t(o)})})}};return j_.ActorExtractLinks=e,j_}var OJ;function aP(){return OJ||(OJ=1,(function(a){var e=Rd&&Rd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Rd&&Rd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(U6e(),a)})(Rd)),Rd}var xJ;function Q6e(){if(xJ)return P_;xJ=1,Object.defineProperty(P_,"__esModule",{value:!0}),P_.ActorExtractLinksPredicates=void 0;const a=aP(),e=De();let u=class extends a.ActorExtractLinks{constructor(r){super(r),this.stringPredicates=r.predicateRegexes,this.predicates=r.predicateRegexes.map(t=>new RegExp(t,"u"))}async test(r){return(0,e.passTestVoid)()}async run(r){return{links:await a.ActorExtractLinks.collectStream(r.metadata,(t,i)=>{if(!this.checkSubject||this.subjectMatches(t.subject.value,r.url)){for(const o of this.predicates)if(o.test(t.predicate.value)){i.push({url:t.object.value,metadata:{producedByActor:{name:this.name,predicates:this.stringPredicates,matchingPredicate:t.predicate.value,checkSubject:this.checkSubject}}});break}}})}}subjectMatches(r,t){const i=r.indexOf("#");return i>=0&&(r=r.slice(0,i)),r===t}};return P_.ActorExtractLinksPredicates=u,P_}var RJ;function Js(){return RJ||(RJ=1,(function(a){var e=xd&&xd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=xd&&xd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Q6e(),a)})(xd)),xd}var Nd={},M_={},NJ;function V6e(){if(NJ)return M_;NJ=1,Object.defineProperty(M_,"__esModule",{value:!0}),M_.ActorExtractLinksHeaders=void 0;const a=aP(),e=De();let u=class extends a.ActorExtractLinks{constructor(r){super(r),this.linkRegEx=/<(.*)>/u,this.headers=r.headersRegexes.map(t=>new RegExp(t,"u"))}async test(r){return(0,e.passTestVoid)()}async run(r){return new Promise((t,i)=>{const o=r.headers,l=[];for(const s of this.headers){const c=o?.get("link")?.split(",");if(c){for(const d of c)if(s.test(d)){const f=this.linkRegEx.exec(d);f&&l.push({url:new URL(f[1],r.url).href})}}}t({links:l})})}};return M_.ActorExtractLinksHeaders=u,M_}var IJ;function Fq(){return IJ||(IJ=1,(function(a){var e=Nd&&Nd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Nd&&Nd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(V6e(),a)})(Nd)),Nd}var Id={},C_={},Dd={},Lt={},DJ;function t2e(){if(DJ)return Lt;DJ=1,Object.defineProperty(Lt,"__esModule",{value:!0}),Lt.matchPatternMappings=Lt.matchPatternComplete=Lt.matchPattern=Lt.matchTerm=Lt.getValueNestedPath=Lt.someTermsNested=Lt.someTerms=Lt.everyTermsNested=Lt.everyTerms=Lt.reduceTermsNested=Lt.reduceTerms=Lt.mapTermsNested=Lt.mapTerms=Lt.filterQuadTermNamesNested=Lt.filterQuadTermNames=Lt.filterTermsNested=Lt.filterTerms=Lt.forEachTermsNested=Lt.forEachTerms=Lt.collectNamedTerms=Lt.getNamedTerms=Lt.getTermsNested=Lt.getTerms=Lt.TRIPLE_TERM_NAMES=Lt.QUAD_TERM_NAMES=void 0;const a=Rr(),e=new a.DataFactory;Lt.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Lt.TRIPLE_TERM_NAMES=["subject","predicate","object"];function u(O,I){return I&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}Lt.getTerms=u;function n(O,I){const A=[];for(const P of u(O,I))P.termType==="Quad"?n(P,I).forEach(C=>A.push(C)):A.push(P);return A}Lt.getTermsNested=n;function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}Lt.getNamedTerms=r;function t(O,I,A){const P={};return O.forEach(C=>P[C.key]=C.value),I&&(P.subject=P.subject||I("subject"),P.predicate=P.predicate||I("predicate"),P.object=P.object||I("object"),P.graph=P.graph||I("graph")),(A||e).quad(P.subject,P.predicate,P.object,P.graph)}Lt.collectNamedTerms=t;function i(O,I){I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph")}Lt.forEachTerms=i;function o(O,I,A=[]){O.subject.termType==="Quad"?o(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]),O.predicate.termType==="Quad"?o(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]),O.object.termType==="Quad"?o(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]),O.graph.termType==="Quad"?o(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"])}Lt.forEachTermsNested=o;function l(O,I){const A=[];return I(O.subject,"subject")&&A.push(O.subject),I(O.predicate,"predicate")&&A.push(O.predicate),I(O.object,"object")&&A.push(O.object),I(O.graph,"graph")&&A.push(O.graph),A}Lt.filterTerms=l;function s(O,I,A=[]){let P=[];return O.subject.termType==="Quad"?P=[...P,...s(O.subject,I,[...A,"subject"])]:I(O.subject,[...A,"subject"])&&P.push(O.subject),O.predicate.termType==="Quad"?P=[...P,...s(O.predicate,I,[...A,"predicate"])]:I(O.predicate,[...A,"predicate"])&&P.push(O.predicate),O.object.termType==="Quad"?P=[...P,...s(O.object,I,[...A,"object"])]:I(O.object,[...A,"object"])&&P.push(O.object),O.graph.termType==="Quad"?P=[...P,...s(O.graph,I,[...A,"graph"])]:I(O.graph,[...A,"graph"])&&P.push(O.graph),P}Lt.filterTermsNested=s;function c(O,I){const A=[];return I(O.subject,"subject")&&A.push("subject"),I(O.predicate,"predicate")&&A.push("predicate"),I(O.object,"object")&&A.push("object"),I(O.graph,"graph")&&A.push("graph"),A}Lt.filterQuadTermNames=c;function d(O,I,A=[]){let P=[];const C=[...A,"subject"];O.subject.termType==="Quad"?P=[...P,...d(O.subject,I,C)]:I(O.subject,C)&&P.push(C);const B=[...A,"predicate"];O.predicate.termType==="Quad"?P=[...P,...d(O.predicate,I,B)]:I(O.predicate,B)&&P.push(B);const H=[...A,"object"];O.object.termType==="Quad"?P=[...P,...d(O.object,I,H)]:I(O.object,H)&&P.push(H);const V=[...A,"graph"];return O.graph.termType==="Quad"?P=[...P,...d(O.graph,I,V)]:I(O.graph,V)&&P.push(V),P}Lt.filterQuadTermNamesNested=d;function f(O,I,A){return(A||e).quad(I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph"))}Lt.mapTerms=f;function p(O,I,A,P=[]){return(A||e).quad(O.subject.termType==="Quad"?p(O.subject,I,A,[...P,"subject"]):I(O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?p(O.predicate,I,A,[...P,"predicate"]):I(O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?p(O.object,I,A,[...P,"object"]):I(O.object,[...P,"object"]),O.graph.termType==="Quad"?p(O.graph,I,A,[...P,"graph"]):I(O.graph,[...P,"graph"]))}Lt.mapTermsNested=p;function h(O,I,A){let P=A;return P=I(P,O.subject,"subject"),P=I(P,O.predicate,"predicate"),P=I(P,O.object,"object"),I(P,O.graph,"graph")}Lt.reduceTerms=h;function g(O,I,A,P=[]){let C=A;return O.subject.termType==="Quad"?C=g(O.subject,I,C,[...P,"subject"]):C=I(C,O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?C=g(O.predicate,I,C,[...P,"predicate"]):C=I(C,O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?C=g(O.object,I,C,[...P,"object"]):C=I(C,O.object,[...P,"object"]),O.graph.termType==="Quad"?C=g(O.graph,I,C,[...P,"graph"]):C=I(C,O.graph,[...P,"graph"]),C}Lt.reduceTermsNested=g;function v(O,I){return I(O.subject,"subject")&&I(O.predicate,"predicate")&&I(O.object,"object")&&I(O.graph,"graph")}Lt.everyTerms=v;function m(O,I,A=[]){return(O.subject.termType==="Quad"?m(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))&&(O.predicate.termType==="Quad"?m(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))&&(O.object.termType==="Quad"?m(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))&&(O.graph.termType==="Quad"?m(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}Lt.everyTermsNested=m;function T(O,I){return I(O.subject,"subject")||I(O.predicate,"predicate")||I(O.object,"object")||I(O.graph,"graph")}Lt.someTerms=T;function w(O,I,A=[]){return(O.subject.termType==="Quad"?w(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))||(O.predicate.termType==="Quad"?w(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))||(O.object.termType==="Quad"?w(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))||(O.graph.termType==="Quad"?w(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}Lt.someTermsNested=w;function E(O,I){if(I.length===0)return O;if(O.termType==="Quad")return E(O[I[0]],I.slice(1));throw new Error(`Tried to get ${I[0]} from term of type ${O.termType}`)}Lt.getValueNestedPath=E;function S(O,I){return!I||I.termType==="Variable"||I.termType==="Quad"&&O.termType==="Quad"&&j(O,I)||I.equals(O)}Lt.matchTerm=S;function N(O,I,A,P,C){return S(O.subject,I)&&S(O.predicate,A)&&S(O.object,P)&&S(O.graph,C)}Lt.matchPattern=N;function j(O,I){return N(O,I.subject,I.predicate,I.object,I.graph)}Lt.matchPatternComplete=j;function q(O,I,A={}){const P={};function C(B,H){return v(B,(V,G)=>{var Z,ae;const W=H[G];switch(V.termType){case"Variable":return A.skipVarMapping&&W.termType==="Variable"||((ae=(Z=P[V.value])===null||Z===void 0?void 0:Z.equals(W))!==null&&ae!==void 0?ae:(P[V.value]=W,!0));case"Quad":return W.termType==="Quad"&&C(V,W);default:return V.equals(W)}})}return C(I,O)&&(A.returnMappings?P:!0)}return Lt.matchPatternMappings=q,Lt}var Mn={},FJ;function H6e(){if(FJ)return Mn;FJ=1,Object.defineProperty(Mn,"__esModule",{value:!0}),Mn.getQuads=Mn.getDefaultGraphs=Mn.getVariables=Mn.getLiterals=Mn.getBlankNodes=Mn.getNamedNodes=Mn.getTermsOfType=Mn.uniqTerms=Mn.TERM_TYPES=void 0;const a=$t();Mn.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function e(s){const c={};return s.filter(d=>{const f=(0,a.termToString)(d);return!(f in c)&&(c[f]=!0)})}Mn.uniqTerms=e;function u(s,c){return s.filter(d=>d.termType===c)}Mn.getTermsOfType=u;function n(s){return u(s,"NamedNode")}Mn.getNamedNodes=n;function r(s){return u(s,"BlankNode")}Mn.getBlankNodes=r;function t(s){return u(s,"Literal")}Mn.getLiterals=t;function i(s){return u(s,"Variable")}Mn.getVariables=i;function o(s){return u(s,"DefaultGraph")}Mn.getDefaultGraphs=o;function l(s){return u(s,"Quad")}return Mn.getQuads=l,Mn}var PJ;function Yr(){return PJ||(PJ=1,(function(a){var e=Dd&&Dd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Dd&&Dd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(t2e(),a),u(H6e(),a)})(Dd)),Dd}var Uu={},lu={},Bj={},jJ;function V4(){return jJ||(jJ=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.expressionTypes=a.types=void 0,(function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"})(a.types||(a.types={})),(function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"})(a.expressionTypes||(a.expressionTypes={}))})(Bj)),Bj}var Oo={},MJ;function iP(){if(MJ)return Oo;MJ=1;var a=Oo&&Oo.__createBinding||(Object.create?(function(l,s,c,d){d===void 0&&(d=c);var f=Object.getOwnPropertyDescriptor(s,c);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[c]}}),Object.defineProperty(l,d,f)}):(function(l,s,c,d){d===void 0&&(d=c),l[d]=s[c]})),e=Oo&&Oo.__setModuleDefault||(Object.create?(function(l,s){Object.defineProperty(l,"default",{enumerable:!0,value:s})}):function(l,s){l.default=s}),u=Oo&&Oo.__importStar||function(l){if(l&&l.__esModule)return l;var s={};if(l!=null)for(var c in l)c!=="default"&&Object.prototype.hasOwnProperty.call(l,c)&&a(s,l,c);return e(s,l),s};Object.defineProperty(Oo,"__esModule",{value:!0});const n=u(V4()),r=Rr(),t=$t(),i=$n();class o{constructor(s){this.dataFactory=s||new r.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,c=!0){return this.flattenMulti({type:n.types.ALT,input:s},c)}createAsk(s){return{type:n.types.ASK,input:s}}createBoundAggregate(s,c,d,f,p){const h=this.createAggregateExpression(c,d,f,p);return h.variable=s,h}createBgp(s){return{type:n.types.BGP,patterns:s}}createConstruct(s,c){return{type:n.types.CONSTRUCT,input:s,template:c}}createDescribe(s,c){return{type:n.types.DESCRIBE,input:s,terms:c}}createDistinct(s){return{type:n.types.DISTINCT,input:s}}createExtend(s,c,d){return{type:n.types.EXTEND,input:s,variable:c,expression:d}}createFrom(s,c,d){return{type:n.types.FROM,input:s,default:c,named:d}}createFilter(s,c){return{type:n.types.FILTER,input:s,expression:c}}createGraph(s,c){return{type:n.types.GRAPH,input:s,name:c}}createGroup(s,c,d){return{type:n.types.GROUP,input:s,variables:c,aggregates:d}}createInv(s){return{type:n.types.INV,path:s}}createJoin(s,c=!0){return this.flattenMulti({type:n.types.JOIN,input:s},c)}createLeftJoin(s,c,d){return d?{type:n.types.LEFT_JOIN,input:[s,c],expression:d}:{type:n.types.LEFT_JOIN,input:[s,c]}}createLink(s){return{type:n.types.LINK,iri:s}}createMinus(s,c){return{type:n.types.MINUS,input:[s,c]}}createNop(){return{type:n.types.NOP}}createNps(s){return{type:n.types.NPS,iris:s}}createOneOrMorePath(s){return{type:n.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,c){return{type:n.types.ORDER_BY,input:s,expressions:c}}createPath(s,c,d,f){return f?{type:n.types.PATH,subject:s,predicate:c,object:d,graph:f}:{type:n.types.PATH,subject:s,predicate:c,object:d,graph:this.dataFactory.defaultGraph()}}createPattern(s,c,d,f){const p=this.dataFactory.quad(s,c,d,f);return p.type=n.types.PATTERN,p}createProject(s,c){return{type:n.types.PROJECT,input:s,variables:c}}createReduced(s){return{type:n.types.REDUCED,input:s}}createSeq(s,c=!0){return this.flattenMulti({type:n.types.SEQ,input:s},c)}createService(s,c,d){return{type:n.types.SERVICE,input:s,name:c,silent:!!d}}createSlice(s,c,d){return c=c||0,d!==void 0?{type:n.types.SLICE,input:s,start:c,length:d}:{type:n.types.SLICE,input:s,start:c}}createUnion(s,c=!0){return this.flattenMulti({type:n.types.UNION,input:s},c)}createValues(s,c){return{type:n.types.VALUES,variables:s,bindings:c}}createZeroOrMorePath(s){return{type:n.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:n.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,c,d,f){return f?{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,separator:f,distinct:d}:{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,distinct:d}}createExistenceExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.EXISTENCE,not:s,input:c}}createNamedExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.NAMED,name:s,args:c}}createOperatorExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.OPERATOR,operator:s,args:c}}createTermExpression(s){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.WILDCARD,wildcard:new i.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,t.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:n.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,c,d){const f={type:n.types.DELETE_INSERT};return s&&(f.delete=s),c&&(f.insert=c),d&&(f.where=d),f}createLoad(s,c,d){const f={type:n.types.LOAD,source:s};return c&&(f.destination=c),this.addSilent(f,!!d)}createClear(s,c){return this.addSilent({type:n.types.CLEAR,source:s},!!c)}createCreate(s,c){return this.addSilent({type:n.types.CREATE,source:s},!!c)}createDrop(s,c){return this.addSilent({type:n.types.DROP,source:s},!!c)}createAdd(s,c,d){return this.addSilent({type:n.types.ADD,source:s,destination:c},!!d)}createMove(s,c,d){return this.addSilent({type:n.types.MOVE,source:s,destination:c},!!d)}createCopy(s,c,d){return this.addSilent({type:n.types.COPY,source:s,destination:c},!!d)}addSilent(s,c){return c&&(s.silent=c),s}flattenMulti(s,c){if(!c)return s;const d=s.type,f=s.input;let p=[];for(const h of f)h.type===d?p.push(...h.input):p.push(h);return s.input=p,s}}return Oo.default=o,Oo}var fg={},CJ;function Pq(){if(CJ)return fg;CJ=1;var a=fg&&fg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(fg,"__esModule",{value:!0});const e=V4(),u=a(iP()),n=Yr();class r{static flatten(i){return Array.prototype.concat(...i).filter(o=>o)}static objectify(i){if(i.termType){if(i.termType==="Quad")return{type:"pattern",termType:"Quad",subject:r.objectify(i.subject),predicate:r.objectify(i.predicate),object:r.objectify(i.object),graph:r.objectify(i.graph)};{let o={termType:i.termType,value:i.value};return i.language&&(o.language=i.language),i.datatype&&(o.datatype=r.objectify(i.datatype)),o}}if(Array.isArray(i))return i.map(o=>r.objectify(o));if(i===Object(i)){let o={};for(let l of Object.keys(i))o[l]=r.objectify(i[l]);return o}return i}static inScopeVariables(i){const o=[];function l(c){o.find(d=>c.value===d.value)||o.push(c)}function s(c){c.subject.termType==="Variable"&&l(c.subject),c.predicate.termType==="Variable"&&l(c.predicate),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.predicate.termType==="Quad"&&s(c.predicate),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph)}return r.recurseOperation(i,{[e.types.EXPRESSION]:c=>(c.expressionType===e.expressionTypes.AGGREGATE&&c.variable&&l(c.variable),!0),[e.types.EXTEND]:c=>(l(c.variable),!0),[e.types.GRAPH]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.GROUP]:c=>(c.variables.forEach(l),!0),[e.types.PATH]:c=>(c.subject.termType==="Variable"&&l(c.subject),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph),!0),[e.types.PATTERN]:c=>(s(c),!0),[e.types.PROJECT]:c=>(c.variables.forEach(l),!1),[e.types.SERVICE]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.VALUES]:c=>(c.variables.forEach(l),!0)}),o}static recurseOperation(i,o){let l=i,s=!0;const c=o[i.type];if(c&&(s=c(i)),!s)return;let d=f=>r.recurseOperation(f,o);switch(l.type){case e.types.ALT:l.input.map(d);break;case e.types.ASK:d(l.input);break;case e.types.BGP:l.patterns.forEach(d);break;case e.types.CONSTRUCT:d(l.input),l.template.map(d);break;case e.types.DESCRIBE:d(l.input);break;case e.types.DISTINCT:d(l.input);break;case e.types.EXPRESSION:l.expressionType===e.expressionTypes.EXISTENCE&&d(l.input);break;case e.types.EXTEND:d(l.input),d(l.expression);break;case e.types.FILTER:d(l.input),d(l.expression);break;case e.types.FROM:d(l.input);break;case e.types.GRAPH:d(l.input);break;case e.types.GROUP:d(l.input),l.aggregates.forEach(d);break;case e.types.INV:d(l.path);break;case e.types.JOIN:l.input.map(d);break;case e.types.LEFT_JOIN:l.input.map(d),l.expression&&d(l.expression);break;case e.types.LINK:break;case e.types.MINUS:l.input.map(d);break;case e.types.NOP:break;case e.types.NPS:break;case e.types.ONE_OR_MORE_PATH:d(l.path);break;case e.types.ORDER_BY:d(l.input),l.expressions.forEach(d);break;case e.types.PATH:d(l.predicate);break;case e.types.PATTERN:break;case e.types.PROJECT:d(l.input);break;case e.types.REDUCED:d(l.input);break;case e.types.SEQ:l.input.map(d);break;case e.types.SERVICE:d(l.input);break;case e.types.SLICE:d(l.input);break;case e.types.UNION:l.input.map(d);break;case e.types.VALUES:break;case e.types.ZERO_OR_MORE_PATH:d(l.path);break;case e.types.ZERO_OR_ONE_PATH:d(l.path);break;case e.types.COMPOSITE_UPDATE:l.updates.forEach(f=>d(f));break;case e.types.DELETE_INSERT:l.delete&&l.delete.forEach(f=>d(f)),l.insert&&l.insert.forEach(f=>d(f)),l.where&&d(l.where);break;case e.types.LOAD:break;case e.types.CLEAR:break;case e.types.CREATE:break;case e.types.DROP:break;case e.types.ADD:break;case e.types.MOVE:break;case e.types.COPY:break;default:throw new Error(`Unknown Operation type ${l.type}`)}}static mapOperation(i,o,l){let s=i,c=!0,d=!0;l=l||new u.default;const f=o[i.type];if(f){const g=f(i,l);s=g.result,c=g.recurse,d=g.copyMetadata!==!1}let p;if(d&&(s.metadata||i.metadata)&&(p={...s.metadata,...i.metadata}),!c)return p&&(s.metadata=p),s;let h=g=>r.mapOperation(g,o,l);switch(s.type){case e.types.ALT:s=l.createAlt(s.input.map(h));break;case e.types.ASK:s=l.createAsk(h(s.input));break;case e.types.BGP:s=l.createBgp(s.patterns.map(h));break;case e.types.CONSTRUCT:s=l.createConstruct(h(s.input),s.template.map(h));break;case e.types.DESCRIBE:s=l.createDescribe(h(s.input),s.terms);break;case e.types.DISTINCT:s=l.createDistinct(h(s.input));break;case e.types.EXPRESSION:s=r.mapExpression(s,o,l);break;case e.types.EXTEND:s=l.createExtend(h(s.input),s.variable,h(s.expression));break;case e.types.FILTER:s=l.createFilter(h(s.input),h(s.expression));break;case e.types.FROM:s=l.createFrom(h(s.input),[...s.default],[...s.named]);break;case e.types.GRAPH:s=l.createGraph(h(s.input),s.name);break;case e.types.GROUP:s=l.createGroup(h(s.input),[].concat(s.variables),s.aggregates.map(h));break;case e.types.INV:s=l.createInv(h(s.path));break;case e.types.JOIN:s=l.createJoin(s.input.map(h));break;case e.types.LEFT_JOIN:s=l.createLeftJoin(h(s.input[0]),h(s.input[1]),s.expression?h(s.expression):void 0);break;case e.types.LINK:s=l.createLink(s.iri);break;case e.types.MINUS:s=l.createMinus(h(s.input[0]),h(s.input[1]));break;case e.types.NOP:s=l.createNop();break;case e.types.NPS:s=l.createNps([].concat(s.iris));break;case e.types.ONE_OR_MORE_PATH:s=l.createOneOrMorePath(h(s.path));break;case e.types.ORDER_BY:s=l.createOrderBy(h(s.input),s.expressions.map(h));break;case e.types.PATH:s=l.createPath(s.subject,h(s.predicate),s.object,s.graph);break;case e.types.PATTERN:s=l.createPattern(s.subject,s.predicate,s.object,s.graph);break;case e.types.PROJECT:s=l.createProject(h(s.input),[...s.variables]);break;case e.types.REDUCED:s=l.createReduced(h(s.input));break;case e.types.SEQ:s=l.createSeq(s.input.map(h));break;case e.types.SERVICE:s=l.createService(h(s.input),s.name,s.silent);break;case e.types.SLICE:s=l.createSlice(h(s.input),s.start,s.length);break;case e.types.UNION:s=l.createUnion(s.input.map(h));break;case e.types.VALUES:s=l.createValues([].concat(s.variables),s.bindings.map(g=>Object.assign({},g)));break;case e.types.ZERO_OR_MORE_PATH:s=l.createZeroOrMorePath(h(s.path));break;case e.types.ZERO_OR_ONE_PATH:s=l.createZeroOrOnePath(h(s.path));break;case e.types.COMPOSITE_UPDATE:s=l.createCompositeUpdate(s.updates.map(h));break;case e.types.DELETE_INSERT:s=l.createDeleteInsert(s.delete?s.delete.map(h):void 0,s.insert?s.insert.map(h):void 0,s.where?h(s.where):void 0);break;case e.types.LOAD:s=l.createLoad(s.source,s.destination,s.silent);break;case e.types.CLEAR:s=l.createClear(s.source,s.silent);break;case e.types.CREATE:s=l.createCreate(s.source,s.silent);break;case e.types.DROP:s=l.createDrop(s.source,s.silent);break;case e.types.ADD:s=l.createAdd(s.source,s.destination);break;case e.types.MOVE:s=l.createMove(s.source,s.destination);break;case e.types.COPY:s=l.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return p&&(s.metadata=p),s}static mapExpression(i,o,l){let s=i,c=!0;l=l||new u.default;const d=o[i.expressionType];if(d&&({result:s,recurse:c}=d(i,l)),!c)return s;let f=p=>r.mapOperation(p,o,l);switch(i.expressionType){case e.expressionTypes.AGGREGATE:return i.variable?l.createBoundAggregate(i.variable,i.aggregator,f(i.expression),i.distinct,i.separator):l.createAggregateExpression(i.aggregator,f(i.expression),i.distinct,i.separator);case e.expressionTypes.EXISTENCE:return l.createExistenceExpression(i.not,f(i.input));case e.expressionTypes.NAMED:return l.createNamedExpression(i.name,i.args.map(f));case e.expressionTypes.OPERATOR:return l.createOperatorExpression(i.operator,i.args.map(f));case e.expressionTypes.TERM:return l.createTermExpression(i.term);case e.expressionTypes.WILDCARD:return l.createWildcardExpression();default:throw new Error(`Unknown Expression type ${i.expressionType}`)}}static cloneOperation(i){return r.mapOperation(i,{})}static cloneExpression(i){return r.mapExpression(i,{})}static createUniqueVariable(i,o,l){let s=0,c=i;for(;o[c];)c=`${i}${s++}`;return l.variable(c)}static isSimpleTerm(i){return i.termType!==void 0&&i.termType!=="Quad"&&i.termType!=="Wildcard"}static isQuad(i){return i.termType==="Quad"}static hasQuadVariables(i){return(0,n.someTermsNested)(i,o=>o.termType==="Variable")}static isWildcard(i){return i.termType==="Wildcard"}}return fg.default=r,fg}var LJ;function k6e(){if(LJ)return lu;LJ=1;var a=lu&&lu.__createBinding||(Object.create?(function(_,F,D,L){L===void 0&&(L=D);var Q=Object.getOwnPropertyDescriptor(F,D);(!Q||("get"in Q?!F.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return F[D]}}),Object.defineProperty(_,L,Q)}):(function(_,F,D,L){L===void 0&&(L=D),_[L]=F[D]})),e=lu&&lu.__setModuleDefault||(Object.create?(function(_,F){Object.defineProperty(_,"default",{enumerable:!0,value:F})}):function(_,F){_.default=F}),u=lu&&lu.__importStar||function(_){if(_&&_.__esModule)return _;var F={};if(_!=null)for(var D in _)D!=="default"&&Object.prototype.hasOwnProperty.call(_,D)&&a(F,_,D);return e(F,_),F},n=lu&&lu.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(lu,"__esModule",{value:!0});const r=v1(),t=$t(),i=u(V4()),o=n(iP()),l=n(Pq()),s=$n().Parser,c=i.types;let d=new Set,f=0,p=!1,h;function g(_,F){F=F||{},h=new o.default(F.dataFactory);let D;if(m(_)){let L=new s(F);L._resetBlanks(),D=L.parse(_)}else D=_;return v(D,F.quads,F.blankToVariable)}lu.default=g;function v(_,F,D){if(d=new Set,f=0,p=!!F,!_.type)return h.createNop();if(_.type!=="query"&&_.type!=="update")throw new Error("Translate only works on complete query or update objects.");let L;if(S(_),_.type==="query"){const Q={type:"group",patterns:_.where||[]};L=j(Q),L=W(_,L)}else _.type==="update"&&(L=pe(_));return D&&(L=ee(L)),L}function m(_){return typeof _=="string"}function T(_){return!!_?.termType}function w(_){return _.subject&&_.predicate&&_.object}function E(_){return _?.termType==="Variable"}function S(_){if(T(_))E(_)&&d.add(`?${_.value}`);else if(Array.isArray(_))for(const F of _)S(F);else if(_&&typeof _=="object")for(let F of Object.keys(_))F.startsWith("?")?d.add(F):F.startsWith("$")&&d.add(`?${F.slice(1)}`),S(_[F])}function N(_){let F={};if(w(_)){const D=[N(_.subject),N(_.predicate),N(_.object),_.graph?N(_.graph):{}];Object.assign(F,...D)}else if(T(_))E(_)&&(F[_.value]=_);else if(_.type==="bgp"){const D=_.triples;Object.assign(F,...D.map(N))}else if(_.type==="path")Object.assign(F,..._.items.map(N));else if(_.type==="group"||_.type==="union"||_.type==="optional")Object.assign(F,..._.patterns.map(N));else if(_.type==="service"||_.type==="graph")Object.assign(F,N(_.name)),Object.assign(F,..._.patterns.map(N));else if(_.type==="bind")Object.assign(F,N(_.variable));else if(_.type==="values"){if(_.values.length>0){const D=Object.keys(_.values[0]).map(L=>h.createTerm(L));Object.assign(F,...D.map(N))}}else if(_.type==="query"&&(_.queryType==="SELECT"||_.queryType==="DESCRIBE")){_.where&&_.variables.some(l.default.isWildcard)&&Object.assign(F,..._.where.map(N));for(const D of _.variables)E(D)?Object.assign(F,N(D)):D.variable&&Object.assign(F,N(D.variable));if(_.queryType==="SELECT"){if(_.group)for(const D of _.group)D.variable&&Object.assign(F,N(D.variable));if(_.values){const D={type:"values",values:_.values};Object.assign(F,N(D))}}}return F}function j(_){if(_.type==="bgp")return O(_);if(_.type==="union")return h.createUnion(_.patterns.map(F=>(F.type!=="group"&&(F={type:"group",patterns:[F]}),j(F))));if(_.type==="graph"){const F={type:"group",patterns:_.patterns};let D=j(F);return p?D=V(D,_.name):D=h.createGraph(D,_.name),D}if(_.type==="values")return ae(_);if(_.type==="query")return v(_,p,!1);if(_.type==="group"){let F=[],D=[];for(let Y of _.patterns)(Y.type==="filter"?F:D).push(Y);let L=D.reduce(G,h.createBgp([])),Q=F.map(Y=>q(Y.expression));return Q.length>0&&(L=h.createFilter(L,Q.reduce((Y,$)=>h.createOperatorExpression("&&",[Y,$])))),L}throw new Error(`Unexpected type: ${_.type}`)}function q(_){if(l.default.isSimpleTerm(_))return h.createTermExpression(_);if(l.default.isQuad(_))return l.default.hasQuadVariables(_)?h.createOperatorExpression("triple",[q(_.subject),q(_.predicate),q(_.object)]):h.createTermExpression(_);if(l.default.isWildcard(_))return h.createWildcardExpression();if("aggregation"in _)return h.createAggregateExpression(_.aggregation,q(_.expression),!!_.distinct,_.separator);if("function"in _)return h.createNamedExpression(_.function,_.args.map(q));if("operator"in _)return _.operator==="exists"||_.operator==="notexists"?h.createExistenceExpression(_.operator==="notexists",j(_.args[0])):((_.operator==="in"||_.operator==="notin")&&(_.args=[_.args[0]].concat(_.args[1])),h.createOperatorExpression(_.operator,_.args.map(q)));throw new Error(`Unknown expression: ${JSON.stringify(_)}`)}function O(_){let F=[],D=[];for(let L of _.triples)if("pathType"in L.predicate){let Q=I(L);for(let Y of Q)Y.type===c.PATH?(F.length>0&&D.push(h.createBgp(F)),F=[],D.push(Y)):F.push(Y)}else F.push(B(L));return F.length>0&&D.push(h.createBgp(F)),D.length===1?D[0]:h.createJoin(D)}function I(_){let F=_.subject,D=A(_.predicate),L=_.object;return P(F,D,L)}function A(_){if(l.default.isSimpleTerm(_)){if(_.termType==="NamedNode")return h.createLink(_);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(_)}`)}if(_.pathType==="^")return h.createInv(A(_.items[0]));if(_.pathType==="!"){let F=[],D=[],L;"pathType"in _.items[0]&&_.items[0].pathType==="|"?L=_.items[0].items:L=_.items;for(let $ of L)if(l.default.isSimpleTerm($))F.push($);else if($.pathType==="^")D.push($.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify($)}`);let Q=h.createNps(F),Y=h.createInv(h.createNps(D));return D.length===0?Q:F.length===0?Y:h.createAlt([Q,Y])}if(_.pathType==="/")return h.createSeq(_.items.map(A));if(_.pathType==="|")return h.createAlt(_.items.map(A));if(_.pathType==="*")return h.createZeroOrMorePath(A(_.items[0]));if(_.pathType==="+")return h.createOneOrMorePath(A(_.items[0]));if(_.pathType==="?")return h.createZeroOrOnePath(A(_.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(_)}`)}function P(_,F,D){if(F.type===c.LINK)return[h.createPattern(_,F.iri,D)];if(F.type===c.INV)return P(D,F.path,_);if(F.type===c.SEQ){let L=_;return l.default.flatten(F.input.map((Q,Y)=>{const $=Y===F.input.length-1?D:C(),ue=P(L,Q,$);return $.termType==="Variable"&&(L=$),ue}))}return[h.createPath(_,F,D)]}function C(){let _=`?var${f++}`;return d.has(_)?C():(d.add(_),h.createTerm(_))}function B(_){if("pathType"in _.predicate)throw new Error("Trying to translate property path to quad.");return h.createPattern(_.subject,_.predicate,_.object,_.graph)}let H=Object.values(c);function V(_,F,D){if(_.type===c.GRAPH){if(D)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");_=V(_.input,_.name)}else if(_.type!==c.SERVICE)if(_.type===c.BGP)_.patterns=_.patterns.map(L=>(D&&(L.subject.equals(F)&&(L.subject=D),L.predicate.equals(F)&&(L.predicate=D),L.object.equals(F)&&(L.object=D)),L.graph.termType==="DefaultGraph"&&(L.graph=F),L));else if(_.type===c.PATH)D&&(_.subject.equals(F)&&(_.subject=D),_.object.equals(F)&&(_.object=D)),_.graph.termType==="DefaultGraph"&&(_.graph=F);else if(_.type===c.PROJECT&&!D)_.variables.some(L=>L.equals(F))||(D=C()),_.input=V(_.input,F,D);else if(_.type===c.EXTEND&&!D)_.variable.equals(F)&&(D=C()),_.input=V(_.input,F,D);else for(let L of Object.keys(_))Array.isArray(_[L])?_[L]=_[L].map(Q=>V(Q,F,D)):H.indexOf(_[L].type)>=0?_[L]=V(_[L],F,D):D&&E(_[L])&&_[L].equals(F)&&(_[L]=D);return _}function G(_,F){if(F.type==="optional"){const D=j({type:"group",patterns:F.patterns});D.type===c.FILTER?_=h.createLeftJoin(_,D.input,D.expression):_=h.createLeftJoin(_,D)}else if(F.type==="minus"){const D=j({type:"group",patterns:F.patterns});_=h.createMinus(_,D)}else if(F.type==="bind")_=h.createExtend(_,F.variable,q(F.expression));else if(F.type==="service"){const D={type:"group",patterns:F.patterns},L=h.createService(j(D),F.name,F.silent);_=Z(_,L)}else{const D=j(F);_=Z(_,D)}return _}function Z(_,F){return _.type===c.BGP&&F.type===c.BGP?_=h.createBgp([..._.patterns,...F.patterns]):_.type===c.BGP&&_.patterns.length===0?_=F:F.type===c.BGP&&F.patterns.length===0||(_=h.createJoin([_,F])),_}function ae(_){let F=(_.values.length===0?[]:Object.keys(_.values[0])).map(h.createTerm.bind(h)),D=_.values.map(L=>{let Q=Object.keys(L);Q=Q.filter($=>L[$]!==void 0);let Y={};for(let $ of Q)Y[$]=L[$];return Y});return h.createValues(F,D)}function W(_,F){const D=_,L=[],Q={};if(D.variables=D.variables&&D.variables.map($=>te($,Q)),D.having=D.having&&D.having.map($=>te($,Q)),D.order=D.order&&D.order.map($=>te($,Q)),D.group||Object.keys(Q).length>0){const $=Object.keys(Q).map(ne=>se(Q[ne],h.createTerm(ne))),ue=[];if(D.group)for(const ne of D.group)if(l.default.isSimpleTerm(ne.expression))ue.push(ne.expression);else{const ce="variable"in ne?ne.variable:C();F=h.createExtend(F,ce,q(ne.expression)),ue.push(ce)}F=h.createGroup(F,ue,$)}if(D.having)for(let $ of D.having)F=h.createFilter(F,q($));_.values&&(F=h.createJoin([F,ae(_)]));let Y=[];if(_.queryType==="SELECT"||_.queryType==="DESCRIBE")if(_.variables.some($=>$&&l.default.isWildcard($)))Y=Object.values(N(_)).sort(($,ue)=>$.value.localeCompare(ue.value));else for(let $ of _.variables)E($)||!("variable"in $)?Y.push($):$.variable&&(Y.push($.variable),L.push($));for(let $ of L)F=h.createExtend(F,$.variable,q($.expression));return D.order&&(F=h.createOrderBy(F,D.order.map($=>{let ue=q($.expression);return $.descending&&(ue=h.createOperatorExpression("desc",[ue])),ue}))),_.queryType==="SELECT"&&(F=h.createProject(F,Y)),D.distinct&&(F=h.createDistinct(F)),D.reduced&&(F=h.createReduced(F)),_.queryType==="CONSTRUCT"?F=h.createConstruct(F,(_.template||[]).map(B)):_.queryType==="ASK"?F=h.createAsk(F):_.queryType==="DESCRIBE"&&(F=h.createDescribe(F,Y)),(D.offset||D.limit)&&(F=h.createSlice(F,D.offset||0,D.limit)),D.from&&(F=h.createFrom(F,D.from.default,D.from.named)),F}function te(_,F){if("type"in _&&_.type==="aggregate"){let D=!1,L;for(let Q of Object.keys(F))if(r(F[Q],_)){L=h.createTerm(Q),D=!0;break}return D||(L=C(),F[(0,t.termToString)(L)]=_),L}return"expression"in _&&_.expression?{..._,expression:te(_.expression,F)}:"args"in _&&_.args?{..._,args:_.args.map(D=>te(D,F))}:_}function se(_,F){if(_.type!=="aggregate"||!_.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(_)}`);const D=q(_);return D.variable=F,D}function pe(_){return _.updates.length===1?le(_.updates[0]):h.createCompositeUpdate(_.updates.map(le))}function le(_){if("type"in _){if(_.type==="load")return Ae(_);if(_.type==="clear"||_.type==="create"||_.type==="drop")return Ie(_);if(_.type==="add"||_.type==="copy"||_.type==="move")return be(_)}else if(_.updateType==="insertdelete"||_.updateType==="deletewhere"||_.updateType==="delete"||_.updateType==="insert")return Ee(_);throw new Error(`Unknown update type ${JSON.stringify(_)}`)}function Ee(_){if(!p)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let F=[],D=[],L;if(_.delete&&(F=l.default.flatten(_.delete.map(Q=>Oe(Q,_.graph)))),_.insert&&(D=l.default.flatten(_.insert.map(Q=>Oe(Q,_.graph)))),_.where&&_.where.length>0){L=j({type:"group",patterns:_.where});const Q=_.using;Q?L=h.createFrom(L,Q.default,Q.named):_.graph&&(L=V(L,_.graph))}else _.updateType==="deletewhere"&&F.length>0&&(L=h.createBgp(F));return h.createDeleteInsert(F.length>0?F:void 0,D.length>0?D:void 0,L)}function Oe(_,F){let D=F;_.type==="graph"&&(D=_.name);let L=_.triples;return D&&(L=L.map(Q=>Object.assign(Q,{graph:D}))),L.map(B)}function Ie(_){let F;switch(l.default.isSimpleTerm(_.graph)?F=_.graph:_.graph.all?F="ALL":_.graph.default?F="DEFAULT":_.graph.named?F="NAMED":F=_.graph.name,_.type){case"clear":return h.createClear(F,_.silent);case"create":return h.createCreate(F,_.silent);case"drop":return h.createDrop(F,_.silent)}}function Ae(_){return h.createLoad(_.source,_.destination,_.silent)}function be(_){const F=_.source.default?"DEFAULT":_.source.name,D=_.destination.default?"DEFAULT":_.destination.name;switch(_.type){case"copy":return h.createCopy(F,D,_.silent);case"move":return h.createMove(F,D,_.silent);case"add":return h.createAdd(F,D,_.silent)}}function ee(_){const F={},D=Array.from(d).reduce((Q,Y)=>(Q[Y]=!0,Q),{});return l.default.mapOperation(_,{[i.types.DELETE_INSERT]:Q=>({result:h.createDeleteInsert(Q.delete,Q.insert,Q.where&&ee(Q.where)),recurse:!1}),[i.types.PATH]:(Q,Y)=>({result:Y.createPath(L(Q.subject),Q.predicate,L(Q.object),L(Q.graph)),recurse:!1}),[i.types.PATTERN]:(Q,Y)=>({result:Y.createPattern(L(Q.subject),L(Q.predicate),L(Q.object),L(Q.graph)),recurse:!1}),[i.types.CONSTRUCT]:Q=>({result:h.createConstruct(ee(Q.input),Q.template),recurse:!1})});function L(Q){if(Q.termType==="BlankNode"){let Y=F[Q.value];return Y||(Y=l.default.createUniqueVariable(Q.value,D,h.dataFactory),D[Y.value]=!0,F[Q.value]=Y),Y}return Q}}return lu}var ka={},Fd={},nr={},Uj={},zr={},Qj,qJ;function H4(){if(qJ)return Qj;qJ=1,Qj=a;function a(e,u){if(!e)throw new Error(u||"Assertion failed")}return a.equal=function(u,n,r){if(u!=n)throw new Error(r||"Assertion failed: "+u+" != "+n)},Qj}var VI={exports:{}},BJ;function z6e(){return BJ||(BJ=1,typeof Object.create=="function"?VI.exports=function(e,u){u&&(e.super_=u,e.prototype=Object.create(u.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:VI.exports=function(e,u){if(u){e.super_=u;var n=function(){};n.prototype=u.prototype,e.prototype=new n,e.prototype.constructor=e}}),VI.exports}var UJ;function zo(){if(UJ)return zr;UJ=1;var a=H4(),e=z6e();zr.inherits=e;function u(P,C){return(P.charCodeAt(C)&64512)!==55296||C<0||C+1>=P.length?!1:(P.charCodeAt(C+1)&64512)===56320}function n(P,C){if(Array.isArray(P))return P.slice();if(!P)return[];var B=[];if(typeof P=="string")if(C){if(C==="hex")for(P=P.replace(/[^a-z0-9]+/ig,""),P.length%2!==0&&(P="0"+P),V=0;V<P.length;V+=2)B.push(parseInt(P[V]+P[V+1],16))}else for(var H=0,V=0;V<P.length;V++){var G=P.charCodeAt(V);G<128?B[H++]=G:G<2048?(B[H++]=G>>6|192,B[H++]=G&63|128):u(P,V)?(G=65536+((G&1023)<<10)+(P.charCodeAt(++V)&1023),B[H++]=G>>18|240,B[H++]=G>>12&63|128,B[H++]=G>>6&63|128,B[H++]=G&63|128):(B[H++]=G>>12|224,B[H++]=G>>6&63|128,B[H++]=G&63|128)}else for(V=0;V<P.length;V++)B[V]=P[V]|0;return B}zr.toArray=n;function r(P){for(var C="",B=0;B<P.length;B++)C+=o(P[B].toString(16));return C}zr.toHex=r;function t(P){var C=P>>>24|P>>>8&65280|P<<8&16711680|(P&255)<<24;return C>>>0}zr.htonl=t;function i(P,C){for(var B="",H=0;H<P.length;H++){var V=P[H];C==="little"&&(V=t(V)),B+=l(V.toString(16))}return B}zr.toHex32=i;function o(P){return P.length===1?"0"+P:P}zr.zero2=o;function l(P){return P.length===7?"0"+P:P.length===6?"00"+P:P.length===5?"000"+P:P.length===4?"0000"+P:P.length===3?"00000"+P:P.length===2?"000000"+P:P.length===1?"0000000"+P:P}zr.zero8=l;function s(P,C,B,H){var V=B-C;a(V%4===0);for(var G=new Array(V/4),Z=0,ae=C;Z<G.length;Z++,ae+=4){var W;H==="big"?W=P[ae]<<24|P[ae+1]<<16|P[ae+2]<<8|P[ae+3]:W=P[ae+3]<<24|P[ae+2]<<16|P[ae+1]<<8|P[ae],G[Z]=W>>>0}return G}zr.join32=s;function c(P,C){for(var B=new Array(P.length*4),H=0,V=0;H<P.length;H++,V+=4){var G=P[H];C==="big"?(B[V]=G>>>24,B[V+1]=G>>>16&255,B[V+2]=G>>>8&255,B[V+3]=G&255):(B[V+3]=G>>>24,B[V+2]=G>>>16&255,B[V+1]=G>>>8&255,B[V]=G&255)}return B}zr.split32=c;function d(P,C){return P>>>C|P<<32-C}zr.rotr32=d;function f(P,C){return P<<C|P>>>32-C}zr.rotl32=f;function p(P,C){return P+C>>>0}zr.sum32=p;function h(P,C,B){return P+C+B>>>0}zr.sum32_3=h;function g(P,C,B,H){return P+C+B+H>>>0}zr.sum32_4=g;function v(P,C,B,H,V){return P+C+B+H+V>>>0}zr.sum32_5=v;function m(P,C,B,H){var V=P[C],G=P[C+1],Z=H+G>>>0,ae=(Z<H?1:0)+B+V;P[C]=ae>>>0,P[C+1]=Z}zr.sum64=m;function T(P,C,B,H){var V=C+H>>>0,G=(V<C?1:0)+P+B;return G>>>0}zr.sum64_hi=T;function w(P,C,B,H){var V=C+H;return V>>>0}zr.sum64_lo=w;function E(P,C,B,H,V,G,Z,ae){var W=0,te=C;te=te+H>>>0,W+=te<C?1:0,te=te+G>>>0,W+=te<G?1:0,te=te+ae>>>0,W+=te<ae?1:0;var se=P+B+V+Z+W;return se>>>0}zr.sum64_4_hi=E;function S(P,C,B,H,V,G,Z,ae){var W=C+H+G+ae;return W>>>0}zr.sum64_4_lo=S;function N(P,C,B,H,V,G,Z,ae,W,te){var se=0,pe=C;pe=pe+H>>>0,se+=pe<C?1:0,pe=pe+G>>>0,se+=pe<G?1:0,pe=pe+ae>>>0,se+=pe<ae?1:0,pe=pe+te>>>0,se+=pe<te?1:0;var le=P+B+V+Z+W+se;return le>>>0}zr.sum64_5_hi=N;function j(P,C,B,H,V,G,Z,ae,W,te){var se=C+H+G+ae+te;return se>>>0}zr.sum64_5_lo=j;function q(P,C,B){var H=C<<32-B|P>>>B;return H>>>0}zr.rotr64_hi=q;function O(P,C,B){var H=P<<32-B|C>>>B;return H>>>0}zr.rotr64_lo=O;function I(P,C,B){return P>>>B}zr.shr64_hi=I;function A(P,C,B){var H=P<<32-B|C>>>B;return H>>>0}return zr.shr64_lo=A,zr}var Vj={},QJ;function k4(){if(QJ)return Vj;QJ=1;var a=zo(),e=H4();function u(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}return Vj.BlockHash=u,u.prototype.update=function(r,t){if(r=a.toArray(r,t),this.pending?this.pending=this.pending.concat(r):this.pending=r,this.pendingTotal+=r.length,this.pending.length>=this._delta8){r=this.pending;var i=r.length%this._delta8;this.pending=r.slice(r.length-i,r.length),this.pending.length===0&&(this.pending=null),r=a.join32(r,0,r.length-i,this.endian);for(var o=0;o<r.length;o+=this._delta32)this._update(r,o,o+this._delta32)}return this},u.prototype.digest=function(r){return this.update(this._pad()),e(this.pending===null),this._digest(r)},u.prototype._pad=function(){var r=this.pendingTotal,t=this._delta8,i=t-(r+this.padLength)%t,o=new Array(i+this.padLength);o[0]=128;for(var l=1;l<i;l++)o[l]=0;if(r<<=3,this.endian==="big"){for(var s=8;s<this.padLength;s++)o[l++]=0;o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=r>>>24&255,o[l++]=r>>>16&255,o[l++]=r>>>8&255,o[l++]=r&255}else for(o[l++]=r&255,o[l++]=r>>>8&255,o[l++]=r>>>16&255,o[l++]=r>>>24&255,o[l++]=0,o[l++]=0,o[l++]=0,o[l++]=0,s=8;s<this.padLength;s++)o[l++]=0;return o},Vj}var Pd={},xo={},VJ;function r2e(){if(VJ)return xo;VJ=1;var a=zo(),e=a.rotr32;function u(c,d,f,p){if(c===0)return n(d,f,p);if(c===1||c===3)return t(d,f,p);if(c===2)return r(d,f,p)}xo.ft_1=u;function n(c,d,f){return c&d^~c&f}xo.ch32=n;function r(c,d,f){return c&d^c&f^d&f}xo.maj32=r;function t(c,d,f){return c^d^f}xo.p32=t;function i(c){return e(c,2)^e(c,13)^e(c,22)}xo.s0_256=i;function o(c){return e(c,6)^e(c,11)^e(c,25)}xo.s1_256=o;function l(c){return e(c,7)^e(c,18)^c>>>3}xo.g0_256=l;function s(c){return e(c,17)^e(c,19)^c>>>10}return xo.g1_256=s,xo}var Hj,HJ;function G6e(){if(HJ)return Hj;HJ=1;var a=zo(),e=k4(),u=r2e(),n=a.rotl32,r=a.sum32,t=a.sum32_5,i=u.ft_1,o=e.BlockHash,l=[1518500249,1859775393,2400959708,3395469782];function s(){if(!(this instanceof s))return new s;o.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}return a.inherits(s,o),Hj=s,s.blockSize=512,s.outSize=160,s.hmacStrength=80,s.padLength=64,s.prototype._update=function(d,f){for(var p=this.W,h=0;h<16;h++)p[h]=d[f+h];for(;h<p.length;h++)p[h]=n(p[h-3]^p[h-8]^p[h-14]^p[h-16],1);var g=this.h[0],v=this.h[1],m=this.h[2],T=this.h[3],w=this.h[4];for(h=0;h<p.length;h++){var E=~~(h/20),S=t(n(g,5),i(E,v,m,T),w,p[h],l[E]);w=T,T=m,m=n(v,30),v=g,g=S}this.h[0]=r(this.h[0],g),this.h[1]=r(this.h[1],v),this.h[2]=r(this.h[2],m),this.h[3]=r(this.h[3],T),this.h[4]=r(this.h[4],w)},s.prototype._digest=function(d){return d==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")},Hj}var kj,kJ;function n2e(){if(kJ)return kj;kJ=1;var a=zo(),e=k4(),u=r2e(),n=H4(),r=a.sum32,t=a.sum32_4,i=a.sum32_5,o=u.ch32,l=u.maj32,s=u.s0_256,c=u.s1_256,d=u.g0_256,f=u.g1_256,p=e.BlockHash,h=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function g(){if(!(this instanceof g))return new g;p.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=h,this.W=new Array(64)}return a.inherits(g,p),kj=g,g.blockSize=512,g.outSize=256,g.hmacStrength=192,g.padLength=64,g.prototype._update=function(m,T){for(var w=this.W,E=0;E<16;E++)w[E]=m[T+E];for(;E<w.length;E++)w[E]=t(f(w[E-2]),w[E-7],d(w[E-15]),w[E-16]);var S=this.h[0],N=this.h[1],j=this.h[2],q=this.h[3],O=this.h[4],I=this.h[5],A=this.h[6],P=this.h[7];for(n(this.k.length===w.length),E=0;E<w.length;E++){var C=i(P,c(O),o(O,I,A),this.k[E],w[E]),B=r(s(S),l(S,N,j));P=A,A=I,I=O,O=r(q,C),q=j,j=N,N=S,S=r(C,B)}this.h[0]=r(this.h[0],S),this.h[1]=r(this.h[1],N),this.h[2]=r(this.h[2],j),this.h[3]=r(this.h[3],q),this.h[4]=r(this.h[4],O),this.h[5]=r(this.h[5],I),this.h[6]=r(this.h[6],A),this.h[7]=r(this.h[7],P)},g.prototype._digest=function(m){return m==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")},kj}var zj,zJ;function $6e(){if(zJ)return zj;zJ=1;var a=zo(),e=n2e();function u(){if(!(this instanceof u))return new u;e.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}return a.inherits(u,e),zj=u,u.blockSize=512,u.outSize=224,u.hmacStrength=192,u.padLength=64,u.prototype._digest=function(r){return r==="hex"?a.toHex32(this.h.slice(0,7),"big"):a.split32(this.h.slice(0,7),"big")},zj}var Gj,GJ;function a2e(){if(GJ)return Gj;GJ=1;var a=zo(),e=k4(),u=H4(),n=a.rotr64_hi,r=a.rotr64_lo,t=a.shr64_hi,i=a.shr64_lo,o=a.sum64,l=a.sum64_hi,s=a.sum64_lo,c=a.sum64_4_hi,d=a.sum64_4_lo,f=a.sum64_5_hi,p=a.sum64_5_lo,h=e.BlockHash,g=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function v(){if(!(this instanceof v))return new v;h.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=g,this.W=new Array(160)}a.inherits(v,h),Gj=v,v.blockSize=1024,v.outSize=512,v.hmacStrength=192,v.padLength=128,v.prototype._prepareBlock=function(B,H){for(var V=this.W,G=0;G<32;G++)V[G]=B[H+G];for(;G<V.length;G+=2){var Z=A(V[G-4],V[G-3]),ae=P(V[G-4],V[G-3]),W=V[G-14],te=V[G-13],se=O(V[G-30],V[G-29]),pe=I(V[G-30],V[G-29]),le=V[G-32],Ee=V[G-31];V[G]=c(Z,ae,W,te,se,pe,le,Ee),V[G+1]=d(Z,ae,W,te,se,pe,le,Ee)}},v.prototype._update=function(B,H){this._prepareBlock(B,H);var V=this.W,G=this.h[0],Z=this.h[1],ae=this.h[2],W=this.h[3],te=this.h[4],se=this.h[5],pe=this.h[6],le=this.h[7],Ee=this.h[8],Oe=this.h[9],Ie=this.h[10],Ae=this.h[11],be=this.h[12],ee=this.h[13],_=this.h[14],F=this.h[15];u(this.k.length===V.length);for(var D=0;D<V.length;D+=2){var L=_,Q=F,Y=j(Ee,Oe),$=q(Ee,Oe),ue=m(Ee,Oe,Ie,Ae,be),ne=T(Ee,Oe,Ie,Ae,be,ee),ce=this.k[D],Se=this.k[D+1],xe=V[D],Ce=V[D+1],Ve=f(L,Q,Y,$,ue,ne,ce,Se,xe,Ce),Ke=p(L,Q,Y,$,ue,ne,ce,Se,xe,Ce);L=S(G,Z),Q=N(G,Z),Y=w(G,Z,ae,W,te),$=E(G,Z,ae,W,te,se);var Ye=l(L,Q,Y,$),oe=s(L,Q,Y,$);_=be,F=ee,be=Ie,ee=Ae,Ie=Ee,Ae=Oe,Ee=l(pe,le,Ve,Ke),Oe=s(le,le,Ve,Ke),pe=te,le=se,te=ae,se=W,ae=G,W=Z,G=l(Ve,Ke,Ye,oe),Z=s(Ve,Ke,Ye,oe)}o(this.h,0,G,Z),o(this.h,2,ae,W),o(this.h,4,te,se),o(this.h,6,pe,le),o(this.h,8,Ee,Oe),o(this.h,10,Ie,Ae),o(this.h,12,be,ee),o(this.h,14,_,F)},v.prototype._digest=function(B){return B==="hex"?a.toHex32(this.h,"big"):a.split32(this.h,"big")};function m(C,B,H,V,G){var Z=C&H^~C&G;return Z<0&&(Z+=4294967296),Z}function T(C,B,H,V,G,Z){var ae=B&V^~B&Z;return ae<0&&(ae+=4294967296),ae}function w(C,B,H,V,G){var Z=C&H^C&G^H&G;return Z<0&&(Z+=4294967296),Z}function E(C,B,H,V,G,Z){var ae=B&V^B&Z^V&Z;return ae<0&&(ae+=4294967296),ae}function S(C,B){var H=n(C,B,28),V=n(B,C,2),G=n(B,C,7),Z=H^V^G;return Z<0&&(Z+=4294967296),Z}function N(C,B){var H=r(C,B,28),V=r(B,C,2),G=r(B,C,7),Z=H^V^G;return Z<0&&(Z+=4294967296),Z}function j(C,B){var H=n(C,B,14),V=n(C,B,18),G=n(B,C,9),Z=H^V^G;return Z<0&&(Z+=4294967296),Z}function q(C,B){var H=r(C,B,14),V=r(C,B,18),G=r(B,C,9),Z=H^V^G;return Z<0&&(Z+=4294967296),Z}function O(C,B){var H=n(C,B,1),V=n(C,B,8),G=t(C,B,7),Z=H^V^G;return Z<0&&(Z+=4294967296),Z}function I(C,B){var H=r(C,B,1),V=r(C,B,8),G=i(C,B,7),Z=H^V^G;return Z<0&&(Z+=4294967296),Z}function A(C,B){var H=n(C,B,19),V=n(B,C,29),G=t(C,B,6),Z=H^V^G;return Z<0&&(Z+=4294967296),Z}function P(C,B){var H=r(C,B,19),V=r(B,C,29),G=i(C,B,6),Z=H^V^G;return Z<0&&(Z+=4294967296),Z}return Gj}var $j,$J;function X6e(){if($J)return $j;$J=1;var a=zo(),e=a2e();function u(){if(!(this instanceof u))return new u;e.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}return a.inherits(u,e),$j=u,u.blockSize=1024,u.outSize=384,u.hmacStrength=192,u.padLength=128,u.prototype._digest=function(r){return r==="hex"?a.toHex32(this.h.slice(0,12),"big"):a.split32(this.h.slice(0,12),"big")},$j}var XJ;function K6e(){return XJ||(XJ=1,Pd.sha1=G6e(),Pd.sha224=$6e(),Pd.sha256=n2e(),Pd.sha384=X6e(),Pd.sha512=a2e()),Pd}var Xj={},KJ;function J6e(){if(KJ)return Xj;KJ=1;var a=zo(),e=k4(),u=a.rotl32,n=a.sum32,r=a.sum32_3,t=a.sum32_4,i=e.BlockHash;function o(){if(!(this instanceof o))return new o;i.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}a.inherits(o,i),Xj.ripemd160=o,o.blockSize=512,o.outSize=160,o.hmacStrength=192,o.padLength=64,o.prototype._update=function(v,m){for(var T=this.h[0],w=this.h[1],E=this.h[2],S=this.h[3],N=this.h[4],j=T,q=w,O=E,I=S,A=N,P=0;P<80;P++){var C=n(u(t(T,l(P,w,E,S),v[d[P]+m],s(P)),p[P]),N);T=N,N=S,S=u(E,10),E=w,w=C,C=n(u(t(j,l(79-P,q,O,I),v[f[P]+m],c(P)),h[P]),A),j=A,A=I,I=u(O,10),O=q,q=C}C=r(this.h[1],E,I),this.h[1]=r(this.h[2],S,A),this.h[2]=r(this.h[3],N,j),this.h[3]=r(this.h[4],T,q),this.h[4]=r(this.h[0],w,O),this.h[0]=C},o.prototype._digest=function(v){return v==="hex"?a.toHex32(this.h,"little"):a.split32(this.h,"little")};function l(g,v,m,T){return g<=15?v^m^T:g<=31?v&m|~v&T:g<=47?(v|~m)^T:g<=63?v&T|m&~T:v^(m|~T)}function s(g){return g<=15?0:g<=31?1518500249:g<=47?1859775393:g<=63?2400959708:2840853838}function c(g){return g<=15?1352829926:g<=31?1548603684:g<=47?1836072691:g<=63?2053994217:0}var d=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],f=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],p=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],h=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11];return Xj}var Kj,JJ;function W6e(){if(JJ)return Kj;JJ=1;var a=zo(),e=H4();function u(n,r,t){if(!(this instanceof u))return new u(n,r,t);this.Hash=n,this.blockSize=n.blockSize/8,this.outSize=n.outSize/8,this.inner=null,this.outer=null,this._init(a.toArray(r,t))}return Kj=u,u.prototype._init=function(r){r.length>this.blockSize&&(r=new this.Hash().update(r).digest()),e(r.length<=this.blockSize);for(var t=r.length;t<this.blockSize;t++)r.push(0);for(t=0;t<r.length;t++)r[t]^=54;for(this.inner=new this.Hash().update(r),t=0;t<r.length;t++)r[t]^=106;this.outer=new this.Hash().update(r)},u.prototype.update=function(r,t){return this.inner.update(r,t),this},u.prototype.digest=function(r){return this.outer.update(this.inner.digest()),this.outer.digest(r)},Kj}var WJ;function ic(){return WJ||(WJ=1,(function(a){var e=a;e.utils=zo(),e.common=k4(),e.sha=K6e(),e.ripemd=J6e(),e.hmac=W6e(),e.sha1=e.sha.sha1,e.sha256=e.sha.sha256,e.sha224=e.sha.sha224,e.sha384=e.sha.sha384,e.sha512=e.sha.sha512,e.ripemd160=e.ripemd.ripemd160})(Uj)),Uj}var YJ;function Y6e(){if(YJ)return nr;YJ=1,Object.defineProperty(nr,"__esModule",{value:!0}),nr.isTermGrounded=nr.termToSignature=nr.quadToSignature=nr.sha1hex=nr.hashTerm=nr.hashTerms=nr.getGraphBlankNodes=nr.uniqGraph=nr.deindexGraph=nr.indexGraph=nr.getQuadsWithoutBlankNodes=nr.getQuadsWithBlankNodes=nr.hasValue=nr.hashValues=nr.getBijectionInner=nr.getBijection=nr.isomorphic=void 0;const a=ic(),e=$t(),u=Yr();function n(S,N){return!!r(S,N)}nr.isomorphic=n;function r(S,N){const j=d(c(S)),q=d(c(N));if(Object.keys(j).length!==Object.keys(q).length)return null;for(const C in j)if(j[C]!==q[C])return null;const O=p(s(S)),I=p(s(N)),A=h(S),P=h(N);return t(O,I,A,P)}nr.getBijection=r;function t(S,N,j,q,O,I){O||(O={}),I||(I={});const[A,P]=g(S,j,O),[C,B]=g(N,q,I);if(Object.keys(A).length!==Object.keys(C).length)return null;for(const V in A)if(!l(C,A[V]))return null;let H={};for(const V of j){const G=e.termToString(V),Z=P[G];for(const ae in B)if(B[ae]===Z){H[G]=ae,delete B[ae];break}}if(!i(Object.keys(H).sort(),j.map(e.termToString).sort())||!i(o(H).sort(),q.map(e.termToString).sort())){H=null;for(const V of j){const G=e.termToString(V);if(!A[G])for(const Z of q){const ae=e.termToString(Z);if(!C[ae]&&P[G]===B[ae]){const W=m(G);H=t(S,N,j,q,Object.assign(Object.assign({},A),{[G]:W}),Object.assign(Object.assign({},C),{[ae]:W}))}}}}return H}nr.getBijectionInner=t;function i(S,N){if(S.length!==N.length)return!1;for(let j=S.length;j--;)if(S[j]!==N[j])return!1;return!0}function o(S){const N=[];for(const j in S)N.push(S[j]);return N}nr.hashValues=o;function l(S,N){for(const j in S)if(S[j]===N)return!0;return!1}nr.hasValue=l;function s(S){return S.filter(N=>u.someTerms(N,j=>j.termType==="BlankNode"||j.termType==="Quad"&&u.getTermsNested(j).some(q=>q.termType==="BlankNode")))}nr.getQuadsWithBlankNodes=s;function c(S){return S.filter(N=>u.everyTerms(N,j=>j.termType!=="BlankNode"&&!(j.termType==="Quad"&&u.getTermsNested(j).some(q=>q.termType==="BlankNode"))))}nr.getQuadsWithoutBlankNodes=c;function d(S){const N={};for(const j of S)N[JSON.stringify(e.quadToStringQuad(j))]=!0;return N}nr.indexGraph=d;function f(S){return Object.keys(S).map(N=>e.stringQuadToQuad(JSON.parse(N)))}nr.deindexGraph=f;function p(S){return f(d(S))}nr.uniqGraph=p;function h(S){return u.uniqTerms(S.map(N=>u.getBlankNodes(u.getTermsNested(N))).reduce((N,j)=>N.concat(j),[]))}nr.getGraphBlankNodes=h;function g(S,N,j){const q=Object.assign({},j),O={};let I=!0;for(;I;){const A=Object.keys(q).length;for(const C of N){const B=e.termToString(C);if(!q[B]){const[H,V]=v(C,S,q);H&&(q[B]=V),O[B]=V}}const P={};for(const C in O){const B=O[C];P[B]===void 0?P[B]=C:P[B]=!1}for(const C in P){const B=P[C];B&&(q[B]=C)}I=A!==Object.keys(q).length}return[q,O]}nr.hashTerms=g;function v(S,N,j){const q=[];let O=!0;for(const A of N){const P=u.getTermsNested(A);if(P.some(C=>C.equals(S))){q.push(T(A,j,S));for(const C of P)!E(C,j)&&!C.equals(S)&&(O=!1)}}const I=m(q.sort().join(""));return[O,I]}nr.hashTerm=v;function m(S){return a.sha1().update(S).digest("hex")}nr.sha1hex=m;function T(S,N,j){return u.getTerms(S).map(q=>w(q,N,j)).join("|")}nr.quadToSignature=T;function w(S,N,j){return S.equals(j)?"@self":S.termType==="BlankNode"?N[e.termToString(S)]||"@blank":S.termType==="Quad"?`<${T(S,N,j)}>`:e.termToString(S)}nr.termToSignature=w;function E(S,N){return S.termType!=="BlankNode"&&!(S.termType==="Quad"&&u.getTermsNested(S).some(j=>!E(j,N)))||!!N[e.termToString(S)]}return nr.isTermGrounded=E,nr}var ZJ;function Z6e(){return ZJ||(ZJ=1,(function(a){var e=Fd&&Fd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t),Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[t]}})}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Fd&&Fd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Y6e(),a)})(Fd)),Fd}var eW;function e4e(){if(eW)return ka;eW=1;var a=ka&&ka.__createBinding||(Object.create?(function(R,k,K,de){de===void 0&&(de=K);var ge=Object.getOwnPropertyDescriptor(k,K);(!ge||("get"in ge?!k.__esModule:ge.writable||ge.configurable))&&(ge={enumerable:!0,get:function(){return k[K]}}),Object.defineProperty(R,de,ge)}):(function(R,k,K,de){de===void 0&&(de=K),R[de]=k[K]})),e=ka&&ka.__setModuleDefault||(Object.create?(function(R,k){Object.defineProperty(R,"default",{enumerable:!0,value:k})}):function(R,k){R.default=k}),u=ka&&ka.__importStar||function(R){if(R&&R.__esModule)return R;var k={};if(R!=null)for(var K in R)K!=="default"&&Object.prototype.hasOwnProperty.call(R,K)&&a(k,R,K);return e(k,R),k},n=ka&&ka.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(ka,"__esModule",{value:!0}),ka.toSparqlJs=ka.toSparql=void 0;const r=Z6e(),t=$t(),i=$n(),o=u(V4()),l=n(iP()),s=n(Pq()),c=o.types,d=o.expressionTypes;let f;const p=new l.default;function h(R,k={}){return new i.Generator(k).stringify(g(R))}ka.toSparql=h;function g(R){v(),R=Le(R);let k=m(R);return k.type==="group"?k.patterns[0]:k}ka.toSparqlJs=g;function v(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function m(R){switch(R.type!==c.EXTEND&&R.type!==c.ORDER_BY&&R.type!==c.GRAPH&&(f.project=!1),R.type){case c.EXPRESSION:return T(R);case c.ASK:return Ae(R,c.ASK);case c.BGP:return C(R);case c.CONSTRUCT:return B(R);case c.DESCRIBE:return Ae(R,c.DESCRIBE);case c.DISTINCT:return H(R);case c.EXTEND:return V(R);case c.FROM:return G(R);case c.FILTER:return Z(R);case c.GRAPH:return ae(R);case c.GROUP:return W(R);case c.JOIN:return te(R);case c.LEFT_JOIN:return se(R);case c.MINUS:return pe(R);case c.NOP:return{};case c.ORDER_BY:return le(R);case c.PATH:return Ee(R);case c.PATTERN:return Oe(R);case c.PROJECT:return Ae(R,c.PROJECT);case c.REDUCED:return ee(R);case c.SERVICE:return _(R);case c.SLICE:return F(R);case c.UNION:return D(R);case c.VALUES:return L(R);case c.COMPOSITE_UPDATE:return Ce(R);case c.DELETE_INSERT:return Ve(R);case c.LOAD:return Ke(R);case c.CLEAR:return Ye(R);case c.CREATE:return oe(R);case c.DROP:return X(R);case c.ADD:return he(R);case c.MOVE:return ve(R);case c.COPY:return ye(R)}throw new Error(`Unknown Operation type ${R.type}`)}function T(R){switch(R.expressionType){case d.AGGREGATE:return S(R);case d.EXISTENCE:return N(R);case d.NAMED:return j(R);case d.OPERATOR:return q(R);case d.TERM:return O(R);case d.WILDCARD:return I(R)}throw new Error(`Unknown Expression Operation type ${R.expressionType}`)}function w(R){switch(R.type){case c.ALT:return Q(R);case c.INV:return Y(R);case c.LINK:return $(R);case c.NPS:return ue(R);case c.ONE_OR_MORE_PATH:return ne(R);case c.SEQ:return ce(R);case c.ZERO_OR_MORE_PATH:return Se(R);case c.ZERO_OR_ONE_PATH:return xe(R)}throw new Error(`Unknown Path type ${R.type}`)}function E(R){return(0,t.termToString)(R)}function S(R){const k={expression:T(R.expression),type:"aggregate",aggregation:R.aggregator,distinct:R.distinct};return R.separator&&(k.separator=R.separator),k}function N(R){return{type:"operation",operator:R.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([m(R.input)])}]}}function j(R){return{type:"functionCall",function:R.name,args:R.args.map(T)}}function q(R){if(R.operator==="desc"){const K={expression:T(R.args[0])};return K.descending=!0,K}const k={type:"operation",operator:R.operator,args:R.args.map(T)};return(k.operator==="in"||k.operator==="notin")&&(k.args=[k.args[0]].concat([k.args.slice(1)])),k}function O(R){return R.term}function I(R){return R.wildcard}function A(R){return Array.isArray(R)?R.length===1?R[0]:{type:"group",patterns:R}:R}function P(R){return R}function C(R){let k=R.patterns.map(Oe);return k.length===0?null:{type:"bgp",triples:k}}function B(R){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:R.template.map(Oe),where:s.default.flatten([m(R.input)])}}function H(R){let k=m(R.input);return k.patterns[0].distinct=!0,k}function V(R){return f.project?(f.extend.push(R),m(R.input)):s.default.flatten([m(R.input),{type:"bind",variable:R.variable,expression:T(R.expression)}])}function G(R){const k=m(R.input);let K=k;return k.type==="group"&&(K=k.patterns[0]),K.from={default:R.default,named:R.named},k}function Z(R){return{type:"group",patterns:s.default.flatten([m(R.input),{type:"filter",expression:T(R.expression)}])}}function ae(R){return{type:"graph",patterns:s.default.flatten([m(R.input)]),name:R.name}}function W(R){const k=m(R.input),K=R.aggregates.map(P);return f.aggregates.push(...K),f.group.push(...R.variables),k}function te(R){return s.default.flatten(R.input.map(m)).reduce((K,de)=>(de.type!=="bgp"||K.length==0||K[K.length-1].type!=="bgp"?K.push(de):K[K.length-1].triples.push(...de.triples),K),[])}function se(R){const k={type:"optional",patterns:[m(R.input[1])]};return R.expression&&k.patterns.push({type:"filter",expression:T(R.expression)}),k.patterns=s.default.flatten(k.patterns),s.default.flatten([m(R.input[0]),k])}function pe(R){let k=m(R.input[1]);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),s.default.flatten([m(R.input[0]),{type:"minus",patterns:k}])}function le(R){return f.order.push(...R.expressions),m(R.input)}function Ee(R){return{type:"bgp",triples:[{subject:R.subject,predicate:w(R.predicate),object:R.object}]}}function Oe(R){return{subject:R.subject,predicate:R.predicate,object:R.object}}function Ie(R,k){let K=s.default.isSimpleTerm(R)?E(R):R;if(typeof K=="string"){if(k[K])return k[K]}else if(Array.isArray(R))R=R.map(de=>Ie(de,k));else for(let de of Object.keys(R))R[de]=Ie(R[de],k);return R}function Ae(R,k){const K={type:"query",prefixes:{}},de=K;let ge;k===c.PROJECT?(K.queryType="SELECT",ge=R.variables):k===c.ASK?K.queryType="ASK":k===c.DESCRIBE&&(K.queryType="DESCRIBE",ge=R.terms);const Ue=f.extend,je=f.group,ze=f.aggregates,at=f.order;v(),f.project=!0;let fe=s.default.flatten([m(R.input)]);fe.length===1&&fe[0].type==="group"&&(fe=fe[0].patterns),K.where=fe;let Te={};for(let Me of f.aggregates)Te[E(Me.variable)]=T(Me);let qe={};for(let Me=f.extend.length-1;Me>=0;--Me){let st=f.extend[Me];qe[E(st.variable)]=Ie(T(st.expression),Te)}f.group.length>0&&(de.group=f.group.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return{expression:Me}})),f.order.length>0&&(de.order=f.order.map(m).map(Me=>Me.descending?Me:{expression:Me})),ge&&(de.variables=ge.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return Me}),de.variables.length===0&&(de.variables=[new i.Wildcard]));const it=Object.entries(qe);if(it.length>0){de.where=de.where||[];for(const[Me,st]of it)de.where.push({type:"bind",variable:(0,t.stringToTerm)(Me),expression:st})}if(K.where.length>0&&K.where[K.where.length-1].type==="filter"){const Me=K.where[K.where.length-1];be(Me,Object.keys(Te))&&(de.having=s.default.flatten([Ie(Me.expression,Te)]),K.where.splice(-1))}return f.extend=Ue,f.group=je,f.aggregates=ze,f.order=at,{type:"group",patterns:[de]}}function be(R,k){return s.default.isSimpleTerm(R)?k.indexOf(E(R))>=0:Array.isArray(R)?R.some(K=>be(K,k)):R===Object(R)?Object.keys(R).some(K=>be(R[K],k)):k.indexOf(R)>=0}function ee(R){let k=m(R.input);return k.patterns[0].reduced=!0,k}function _(R){let k=m(R.input);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),{type:"service",name:R.name,silent:R.silent,patterns:k}}function F(R){let k=m(R.input),K=k;return k.type&&k.type==="group"&&(K=k.patterns[0]),R.start!==0&&(K.offset=R.start),R.length!==void 0&&(K.limit=R.length),k}function D(R){return{type:"union",patterns:R.input.map(m).map(A)}}function L(R){return{type:"values",values:R.bindings.map(k=>{let K={};for(let de of R.variables){let ge=`?${de.value}`;k[ge]?K[ge]=k[ge]:K[ge]=void 0}return K})}}function Q(R){const k=R.input.map(w);return k.every(K=>"pathType"in K&&K.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(k.map(K=>K.items))}]}:{type:"path",pathType:"|",items:k}}function Y(R){if(R.path.type===c.NPS){const k=R.path.iris.map(K=>({type:"path",pathType:"^",items:[K]}));return k.length<=1?{type:"path",pathType:"!",items:k}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:k}]}}return{type:"path",pathType:"^",items:[w(R.path)]}}function $(R){return R.iri}function ue(R){return R.iris.length<=1?{type:"path",pathType:"!",items:R.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:R.iris}]}}function ne(R){return{type:"path",pathType:"+",items:[w(R.path)]}}function ce(R){return{type:"path",pathType:"/",items:R.input.map(w)}}function Se(R){return{type:"path",pathType:"*",items:[w(R.path)]}}function xe(R){return{type:"path",pathType:"?",items:[w(R.path)]}}function Ce(R){const k=R.updates.map(K=>m(K).updates[0]);return{prefixes:{},type:"update",updates:k}}function Ve(R){var k;let K=R.where,de;if(K&&K.type===c.FROM){let Ue=K;K=Ue.input,de={default:Ue.default,named:Ue.named}}const ge=[{updateType:"insertdelete",delete:Ne(R.delete||[]),insert:Ne(R.insert||[])}];if(de&&(ge[0].using=de),!K||K.type===c.BGP&&K.patterns.length===0)ge[0].where=[];else{const Ue=[];let je=m(Pe(K,Ue));if(je.type==="group"?ge[0].where=je.patterns:ge[0].where=[je],Ue.length>0){if(Ue.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((k=Ue[0])===null||k===void 0?void 0:k.value)!==""&&(ge[0].where=[{type:"graph",patterns:ge[0].where,name:Ue[0]}])}}return!R.delete&&!R.where?(ge[0].updateType="insert",delete ge[0].delete,delete ge[0].where):!R.insert&&!R.where?(delete ge[0].insert,delete ge[0].where,R.delete.some(Ue=>Ue.subject.termType==="Variable"||Ue.predicate.termType==="Variable"||Ue.object.termType==="Variable")?ge[0].updateType="deletewhere":ge[0].updateType="delete"):!R.insert&&R.where&&R.where.type==="bgp"&&(0,r.isomorphic)(R.delete,R.where.patterns)&&(delete ge[0].where,ge[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:ge}}function Ke(R){const k=[{type:"load",silent:!!R.silent,source:R.source}];return R.destination&&(k[0].destination=R.destination),{prefixes:{},type:"update",updates:k}}function Ye(R){return J(R,"clear")}function oe(R){return J(R,"create")}function X(R){return J(R,"drop")}function J(R,k){const K=[{type:k,silent:!!R.silent}];return R.source==="DEFAULT"?K[0].graph={default:!0}:R.source==="NAMED"?K[0].graph={named:!0}:R.source==="ALL"?K[0].graph={all:!0}:K[0].graph={type:"graph",name:R.source},{prefixes:{},type:"update",updates:K}}function he(R){return re(R,"add")}function ve(R){return re(R,"move")}function ye(R){return re(R,"copy")}function re(R,k){const K=[{type:k,silent:!!R.silent}];return K[0].source=R.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.source},K[0].destination=R.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.destination},{prefixes:{},type:"update",updates:K}}function Ne(R){if(!R)return[];const k={};return R.forEach(K=>{const de=K.graph.value;k[de]||(k[de]=[]),k[de].push(K)}),Object.keys(k).map(K=>K===""?{type:"bgp",triples:k[K].map(Oe)}:{type:"graph",triples:k[K].map(Oe),name:k[K][0].graph})}function Le(R){return Pe(R,[])}function Pe(R,k){if(Array.isArray(R))return R.map(je=>Pe(je,k));if(!R.type||R.type===c.DELETE_INSERT)return R;if((R.type===c.PATTERN||R.type===c.PATH)&&R.graph)return k.push(R.graph),R.graph.name!==""?R.type===c.PATTERN?p.createPattern(R.subject,R.predicate,R.object):p.createPath(R.subject,R.predicate,R.object):R;const K={},de={},ge={};for(let je of Object.keys(R)){const ze=[];if(K[je]=Pe(R[je],ze),ze.length>0){de[je]=ze;for(const at of ze)ge[at.value]=at}}const Ue=Object.keys(ge);if(Ue.length>0)if(Ue.length===1&&![c.PROJECT,c.SERVICE].includes(R.type))k.push(ge[Ue[0]]);else{if(R.type===c.BGP)return Fe(R,de.patterns);for(let je of Object.keys(de)){const ze=K[je];Array.isArray(ze)?K[je]=ze.map((at,fe)=>de[je][0].value===""?at:p.createGraph(at,de[je][fe])):de[je][0].value!==""&&(K[je]=p.createGraph(ze,de[je][0]))}}return K}function Fe(R,k){var K;const de={};for(let je=0;je<R.patterns.length;++je){const ze=R.patterns[je],at=k[je].value;de[at]=(K=de[at])!==null&&K!==void 0?K:{patterns:[],graph:k[je]},de[at].patterns.push(ze)}let ge=[];for(const[je,{patterns:ze,graph:at}]of Object.entries(de)){const fe=p.createBgp(ze);ge.push(je===""?fe:p.createGraph(fe,at))}let Ue=ge[0];for(let je=1;je<ge.length;++je)Ue=p.createJoin([Ue,ge[je]]);return Ue}return ka}var tW;function t4e(){return tW||(tW=1,(function(a){var e=Uu&&Uu.__createBinding||(Object.create?(function(c,d,f,p){p===void 0&&(p=f);var h=Object.getOwnPropertyDescriptor(d,f);(!h||("get"in h?!d.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(c,p,h)}):(function(c,d,f,p){p===void 0&&(p=f),c[p]=d[f]})),u=Uu&&Uu.__setModuleDefault||(Object.create?(function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}):function(c,d){c.default=d}),n=Uu&&Uu.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&e(d,c,f);return u(d,c),d},r=Uu&&Uu.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.toSparqlJs=a.toSparql=a.Factory=a.Algebra=a.translate=void 0;const t=r(k6e());a.translate=t.default;const i=n(V4());a.Algebra=i;const o=r(iP());a.Factory=o.default;const l=e4e();Object.defineProperty(a,"toSparql",{enumerable:!0,get:function(){return l.toSparql}}),Object.defineProperty(a,"toSparqlJs",{enumerable:!0,get:function(){return l.toSparqlJs}});const s=r(Pq());a.Util=s.default})(Uu)),Uu}var rW;function r4e(){if(rW)return C_;rW=1,Object.defineProperty(C_,"__esModule",{value:!0}),C_.ActorExtractLinksQuadPatternQuery=void 0;const a=aP(),e=lt(),u=De(),n=Rr(),r=Yr(),t=t4e(),i=new n.DataFactory,o=i.variable("__comunica:pp_var");let l=class $D extends a.ActorExtractLinks{constructor(c){super(c)}static getCurrentQuery(c){const d=c.get(e.KeysInitQuery.query);if(d)return d}static matchQuadPatternInOperation(c,d){const f=[];return t.Util.recurseOperation(d,{pattern(p){return(0,r.matchPatternComplete)(c,p)&&f.push(p),!1},path(p){return t.Util.recurseOperation(p,{link(h){const g=i.quad(o,h.iri,o,p.graph);return(0,r.matchPatternComplete)(c,g)&&f.push(g),!1},nps(h){for(const g of h.iris){const v=i.quad(o,g,o,p.graph);(0,r.matchPatternComplete)(c,v)&&f.push(v)}return!1}}),!1}}),f}async test(c){return $D.getCurrentQuery(c.context)?(0,u.passTestVoid)():(0,u.failTest)(`Actor ${this.name} can only work in the context of a query.`)}async run(c){const d=$D.getCurrentQuery(c.context);return{links:await a.ActorExtractLinks.collectStream(c.metadata,(f,p)=>{const h=$D.matchQuadPatternInOperation(f,d);if(h.length>0)if(this.onlyVariables){const g={};for(const v of h)for(const m of(0,r.filterQuadTermNames)(v,T=>T.termType==="Variable"))g[m]=!0;for(const v of Object.keys(g))f[v].termType==="NamedNode"&&p.push({url:f[v].value,metadata:{producedByActor:{name:this.name,onlyVariables:this.onlyVariables}}})}else for(const g of(0,r.getNamedNodes)((0,r.getTerms)(f)))p.push({url:g.value,metadata:{producedByActor:{name:this.name,onlyVariables:this.onlyVariables}}})})}}};return C_.ActorExtractLinksQuadPatternQuery=l,C_}var nW;function jq(){return nW||(nW=1,(function(a){var e=Id&&Id.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Id&&Id.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(r4e(),a)})(Id)),Id}var jd={},L_={},aW;function n4e(){if(aW)return L_;aW=1,Object.defineProperty(L_,"__esModule",{value:!0}),L_.MediatorCombineArray=void 0;const a=De();let e=class extends a.Mediator{constructor(n){super(n),this.combiner=this.createCombiner()}async mediate(n){let r;try{r=this.publish(n)}catch{r=[]}if(this.filterErrors){const o=[];for(const l of r)(await l.reply).isPassed()&&o.push(l);r=o}const t=[];await Promise.all(r.map(async({reply:o},l)=>{const s=await o,c=s.getOrThrow();return t[l]=s.getSideData(),c}));const i=await Promise.all(r.map((o,l)=>o.actor.runObservable(n,t[l])));return this.combiner(i)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return n=>{const r={};for(const t of this.fields){r[t]=[];for(const i of[[]].concat(n.map(o=>o[t])))i&&r[t].push(...i)}return r}}};return L_.MediatorCombineArray=e,L_}var iW;function Mq(){return iW||(iW=1,(function(a){var e=jd&&jd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=jd&&jd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(n4e(),a)})(jd)),jd}var Md={},q_={},Cd={},B_={},uW;function a4e(){if(uW)return B_;uW=1,Object.defineProperty(B_,"__esModule",{value:!0}),B_.ActorContextPreprocess=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return B_.ActorContextPreprocess=e,B_}var oW;function _1(){return oW||(oW=1,(function(a){var e=Cd&&Cd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Cd&&Cd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(a4e(),a)})(Cd)),Cd}var sW;function i4e(){if(sW)return q_;sW=1,Object.defineProperty(q_,"__esModule",{value:!0}),q_.ActorContextPreprocessConvertShortcuts=void 0;const a=_1(),e=De();let u=class i2e extends a.ActorContextPreprocess{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}async run(r){return{context:i2e.expandShortcuts(r.context,this.contextKeyShortcuts)}}static expandShortcuts(r,t){for(const i of r.keys())t[i.name]&&(r=r.set(new e.ActionContextKey(t[i.name]),r.get(i)).delete(i));return r}};return q_.ActorContextPreprocessConvertShortcuts=u,q_}var cW;function Cq(){return cW||(cW=1,(function(a){var e=Md&&Md.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Md&&Md.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(i4e(),a)})(Md)),Md}var Ld={},U_={},lW;function u4e(){if(lW)return U_;lW=1,Object.defineProperty(U_,"__esModule",{value:!0}),U_.ActorContextPreprocessSetDefaults=void 0;const a=_1(),e=lt(),u=De(),n=Rr();let r=class extends a.ActorContextPreprocess{constructor(i){super(i),this.defaultFunctionArgumentsCache={}}async test(i){return(0,u.passTestVoid)()}async run(i){let o=i.context;if(i.initialize){o=o.setDefault(e.KeysInitQuery.queryTimestamp,new Date).setDefault(e.KeysInitQuery.queryTimestampHighResolution,performance.now()).setDefault(e.KeysQuerySourceIdentify.sourceIds,new Map).setDefault(e.KeysCore.log,this.logger).setDefault(e.KeysInitQuery.functionArgumentsCache,this.defaultFunctionArgumentsCache).setDefault(e.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores,new Map).setDefault(e.KeysInitQuery.dataFactory,new n.DataFactory);let l={language:"sparql",version:"1.1"};o.has(e.KeysInitQuery.queryFormat)?(l=o.get(e.KeysInitQuery.queryFormat),l.language==="graphql"&&(o=o.setDefault(e.KeysInitQuery.graphqlSingularizeVariables,{}))):o=o.set(e.KeysInitQuery.queryFormat,l),!o.has(e.KeysInitQuery.extensionFunctionsAlwaysPushdown)&&!o.has(e.KeysInitQuery.extensionFunctions)&&(o=o.set(e.KeysInitQuery.extensionFunctionsAlwaysPushdown,!0))}return{context:o}}};return U_.ActorContextPreprocessSetDefaults=r,U_}var dW;function Lq(){return dW||(dW=1,(function(a){var e=Ld&&Ld.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ld&&Ld.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(u4e(),a)})(Ld)),Ld}var qd={},Q_={},fW;function o4e(){if(fW)return Q_;fW=1,Object.defineProperty(Q_,"__esModule",{value:!0}),Q_.ActorContextPreprocessSourceToDestination=void 0;const a=_1(),e=lt(),u=De();let n=class extends a.ActorContextPreprocess{constructor(t){super(t)}async test(t){return(0,u.passTestVoid)()}async run(t){if(t.context.get(e.KeysInitQuery.querySourcesUnidentified)&&!t.context.get(e.KeysRdfUpdateQuads.destination)){const i=t.context.get(e.KeysInitQuery.querySourcesUnidentified);if(i.length===1)return{context:t.context.set(e.KeysRdfUpdateQuads.destination,i[0])}}return t}};return Q_.ActorContextPreprocessSourceToDestination=n,Q_}var pW;function qq(){return pW||(pW=1,(function(a){var e=qd&&qd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=qd&&qd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(o4e(),a)})(qd)),qd}var Bd={},V_={},H_={},Jj={},HI={exports:{}},hW;function z4(){if(hW)return HI.exports;hW=1;var a=typeof Reflect=="object"?Reflect:null,e=a&&typeof a.apply=="function"?a.apply:function(S,N,j){return Function.prototype.apply.call(S,N,j)},u;a&&typeof a.ownKeys=="function"?u=a.ownKeys:Object.getOwnPropertySymbols?u=function(S){return Object.getOwnPropertyNames(S).concat(Object.getOwnPropertySymbols(S))}:u=function(S){return Object.getOwnPropertyNames(S)};function n(E){console&&console.warn&&console.warn(E)}var r=Number.isNaN||function(S){return S!==S};function t(){t.init.call(this)}HI.exports=t,HI.exports.once=m,t.EventEmitter=t,t.prototype._events=void 0,t.prototype._eventsCount=0,t.prototype._maxListeners=void 0;var i=10;function o(E){if(typeof E!="function")throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof E)}Object.defineProperty(t,"defaultMaxListeners",{enumerable:!0,get:function(){return i},set:function(E){if(typeof E!="number"||E<0||r(E))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+E+".");i=E}}),t.init=function(){(this._events===void 0||this._events===Object.getPrototypeOf(this)._events)&&(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},t.prototype.setMaxListeners=function(S){if(typeof S!="number"||S<0||r(S))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+S+".");return this._maxListeners=S,this};function l(E){return E._maxListeners===void 0?t.defaultMaxListeners:E._maxListeners}t.prototype.getMaxListeners=function(){return l(this)},t.prototype.emit=function(S){for(var N=[],j=1;j<arguments.length;j++)N.push(arguments[j]);var q=S==="error",O=this._events;if(O!==void 0)q=q&&O.error===void 0;else if(!q)return!1;if(q){var I;if(N.length>0&&(I=N[0]),I instanceof Error)throw I;var A=new Error("Unhandled error."+(I?" ("+I.message+")":""));throw A.context=I,A}var P=O[S];if(P===void 0)return!1;if(typeof P=="function")e(P,this,N);else for(var C=P.length,B=h(P,C),j=0;j<C;++j)e(B[j],this,N);return!0};function s(E,S,N,j){var q,O,I;if(o(N),O=E._events,O===void 0?(O=E._events=Object.create(null),E._eventsCount=0):(O.newListener!==void 0&&(E.emit("newListener",S,N.listener?N.listener:N),O=E._events),I=O[S]),I===void 0)I=O[S]=N,++E._eventsCount;else if(typeof I=="function"?I=O[S]=j?[N,I]:[I,N]:j?I.unshift(N):I.push(N),q=l(E),q>0&&I.length>q&&!I.warned){I.warned=!0;var A=new Error("Possible EventEmitter memory leak detected. "+I.length+" "+String(S)+" listeners added. Use emitter.setMaxListeners() to increase limit");A.name="MaxListenersExceededWarning",A.emitter=E,A.type=S,A.count=I.length,n(A)}return E}t.prototype.addListener=function(S,N){return s(this,S,N,!1)},t.prototype.on=t.prototype.addListener,t.prototype.prependListener=function(S,N){return s(this,S,N,!0)};function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,arguments.length===0?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(E,S,N){var j={fired:!1,wrapFn:void 0,target:E,type:S,listener:N},q=c.bind(j);return q.listener=N,j.wrapFn=q,q}t.prototype.once=function(S,N){return o(N),this.on(S,d(this,S,N)),this},t.prototype.prependOnceListener=function(S,N){return o(N),this.prependListener(S,d(this,S,N)),this},t.prototype.removeListener=function(S,N){var j,q,O,I,A;if(o(N),q=this._events,q===void 0)return this;if(j=q[S],j===void 0)return this;if(j===N||j.listener===N)--this._eventsCount===0?this._events=Object.create(null):(delete q[S],q.removeListener&&this.emit("removeListener",S,j.listener||N));else if(typeof j!="function"){for(O=-1,I=j.length-1;I>=0;I--)if(j[I]===N||j[I].listener===N){A=j[I].listener,O=I;break}if(O<0)return this;O===0?j.shift():g(j,O),j.length===1&&(q[S]=j[0]),q.removeListener!==void 0&&this.emit("removeListener",S,A||N)}return this},t.prototype.off=t.prototype.removeListener,t.prototype.removeAllListeners=function(S){var N,j,q;if(j=this._events,j===void 0)return this;if(j.removeListener===void 0)return arguments.length===0?(this._events=Object.create(null),this._eventsCount=0):j[S]!==void 0&&(--this._eventsCount===0?this._events=Object.create(null):delete j[S]),this;if(arguments.length===0){var O=Object.keys(j),I;for(q=0;q<O.length;++q)I=O[q],I!=="removeListener"&&this.removeAllListeners(I);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if(N=j[S],typeof N=="function")this.removeListener(S,N);else if(N!==void 0)for(q=N.length-1;q>=0;q--)this.removeListener(S,N[q]);return this};function f(E,S,N){var j=E._events;if(j===void 0)return[];var q=j[S];return q===void 0?[]:typeof q=="function"?N?[q.listener||q]:[q]:N?v(q):h(q,q.length)}t.prototype.listeners=function(S){return f(this,S,!0)},t.prototype.rawListeners=function(S){return f(this,S,!1)},t.listenerCount=function(E,S){return typeof E.listenerCount=="function"?E.listenerCount(S):p.call(E,S)},t.prototype.listenerCount=p;function p(E){var S=this._events;if(S!==void 0){var N=S[E];if(typeof N=="function")return 1;if(N!==void 0)return N.length}return 0}t.prototype.eventNames=function(){return this._eventsCount>0?u(this._events):[]};function h(E,S){for(var N=new Array(S),j=0;j<S;++j)N[j]=E[j];return N}function g(E,S){for(;S+1<E.length;S++)E[S]=E[S+1];E.pop()}function v(E){for(var S=new Array(E.length),N=0;N<S.length;++N)S[N]=E[N].listener||E[N];return S}function m(E,S){return new Promise(function(N,j){function q(I){E.removeListener(S,O),j(I)}function O(){typeof E.removeListener=="function"&&E.removeListener("error",q),N([].slice.call(arguments))}w(E,S,O,{once:!0}),S!=="error"&&T(E,q,{once:!0})})}function T(E,S,N){typeof E.on=="function"&&w(E,"error",S,N)}function w(E,S,N,j){if(typeof E.on=="function")j.once?E.once(S,N):E.on(S,N);else if(typeof E.addEventListener=="function")E.addEventListener(S,function q(O){j.once&&E.removeEventListener(S,q),N(O)});else throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof E)}return HI.exports}var k_={},yW;function s4e(){if(yW)return k_;yW=1,Object.defineProperty(k_,"__esModule",{value:!0}),k_.LinkedList=void 0;class a{constructor(){this._length=0,this._head=null,this._tail=null}get length(){return this._length}get first(){var u;return(u=this._head)===null||u===void 0?void 0:u.value}get last(){var u;return(u=this._tail)===null||u===void 0?void 0:u.value}get empty(){return this._head===null}push(u){const n={value:u,next:null};this._tail===null?this._head=this._tail=n:this._tail.next=this._tail=n,this._length++}shift(){if(this._head===null)return;const{value:u,next:n}=this._head;return this._head=n,n===null&&(this._tail=null),this._length--,u}clear(){this._length=0,this._head=this._tail=null}}return k_.LinkedList=a,k_}var z_={};let Wj=1;const Bq=new Map;let Yj=!1,Uq,u2e=(a,...e)=>(Bq.set(Wj,[a,e]),Uq(Wj),Wj++),Qq=a=>{Bq.delete(a)};function Vq(a){if(Yj)setTimeout(Vq,0,a);else{const e=Bq.get(a);if(e){Yj=!0;try{e[0](...e[1])}finally{Qq(a),Yj=!1}}}}function c4e(){const a=new MessageChannel;a.port1.onmessage=e=>{Vq(e.data)},Uq=e=>{a.port2.postMessage(e)}}function l4e(){const a=`setImmediate$${Math.random()}$`;window.addEventListener("message",e=>{typeof e.data=="string"&&e.data.startsWith(a)&&Vq(+e.data.slice(a.length))}),Uq=e=>{window.postMessage(a+e,"*")}}const kI=typeof self>"u"?typeof global>"u"?void 0:global:self;kI.setImmediate?(u2e=kI.setImmediate,Qq=kI.clearImmediate):kI.importScripts?c4e():l4e();const d4e=Object.freeze(Object.defineProperty({__proto__:null,get clearImmediate(){return Qq},get setImmediate(){return u2e}},Symbol.toStringTag,{value:"Module"})),f4e=VF(d4e);var mW;function p4e(){if(mW)return z_;mW=1,Object.defineProperty(z_,"__esModule",{value:!0}),z_.createTaskScheduler=void 0;const a=f4e,e=Promise.resolve(void 0);function u(n=a.setImmediate){const r=typeof queueMicrotask=="function"?queueMicrotask:o=>e.then(o);let t=0,i=null;return o=>{i!==null?i.push(o):++t<100?r(o):(i=[o],n(()=>{for(const l of i)r(l);i=null,t=0}))}}return z_.createTaskScheduler=u,z_}var bW;function zt(){return bW||(bW=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.isIterator=a.isIterable=a.isSourceExpression=a.isPromise=a.isEventEmitter=a.isFunction=a.range=a.union=a.fromIterable=a.fromIterator=a.fromArray=a.single=a.empty=a.wrap=a.WrappingIterator=a.ClonedIterator=a.UnionIterator=a.MultiTransformIterator=a.SimpleTransformIterator=a.TransformIterator=a.BufferedIterator=a.MappingIterator=a.DESTINATION=a.identity=a.IntegerIterator=a.ArrayIterator=a.SingletonIterator=a.EmptyIterator=a.AsyncIterator=a.DESTROYED=a.ENDED=a.CLOSED=a.CLOSING=a.OPEN=a.INIT=a.setTaskScheduler=a.getTaskScheduler=a.scheduleTask=a.LinkedList=void 0;const e=z4(),u=s4e();Object.defineProperty(a,"LinkedList",{enumerable:!0,get:function(){return u.LinkedList}});let r=p4e().createTaskScheduler();function t(F){r(F)}a.scheduleTask=t;function i(){return r}a.getTaskScheduler=i;function o(F){r=F}a.setTaskScheduler=o,a.INIT=1,a.OPEN=2,a.CLOSING=4,a.CLOSED=8,a.ENDED=16,a.DESTROYED=32;class l extends e.EventEmitter{constructor(D=a.OPEN){super(),this._readable=!1,this._state=D,this.on("newListener",s)}_changeState(D,L=!1){const Q=D>this._state&&this._state<a.ENDED;return Q&&(this._state=D,D===a.ENDED&&(L?r(()=>this.emit("end")):this.emit("end"))),Q}read(){return null}forEach(D,L){this.on("data",Ee(D,L))}close(){this._changeState(a.CLOSED)&&this._endAsync()}destroy(D){this.done||this._destroy(D,L=>{D=D||L,D&&this.emit("error",D),this._end(!0)})}_destroy(D,L){L()}_end(D=!1){this._changeState(D?a.DESTROYED:a.ENDED)&&(this._readable=!1,this.removeAllListeners("readable"),this.removeAllListeners("data"),this.removeAllListeners("end"))}_endAsync(){r(()=>this._end())}get readable(){return this._readable}set readable(D){D=!!D&&!this.done,this._readable!==D&&(this._readable=D,D&&r(()=>this.emit("readable")))}get closed(){return this._state>=a.CLOSING}get ended(){return this._state===a.ENDED}get destroyed(){return this._state===a.DESTROYED}get done(){return this._state>=a.ENDED}toString(){const D=this._toStringDetails();return`[${this.constructor.name}${D?` ${D}`:""}]`}_toStringDetails(){return""}toArray(D){const L=[],Q=typeof D?.limit=="number"?D.limit:1/0;return this.ended||Q<=0?Promise.resolve(L):new Promise((Y,$)=>{const ue=()=>Y(L),ne=ce=>{L.push(ce),L.length>=Q&&(this.removeListener("error",$),this.removeListener("data",ne),this.removeListener("end",ue),Y(L))};this.on("error",$),this.on("data",ne),this.on("end",ue)})}getProperty(D,L){const Q=this._properties;if(!L)return Q&&Q[D];if(Q&&D in Q)r(()=>L(Q[D]));else{let Y;(Y=this._propertyCallbacks)||(this._propertyCallbacks=Y=Object.create(null)),D in Y?Y[D].push(L):Y[D]=[L]}}setProperty(D,L){const Q=this._properties||(this._properties=Object.create(null));Q[D]=L;const Y=this._propertyCallbacks||{},$=Y[D];if($){delete Y[D],r(()=>{for(const ue of $)ue(L)});for(D in Y)return;delete this._propertyCallbacks}}getProperties(){const D=this._properties,L={};for(const Q in D)L[Q]=D[Q];return L}setProperties(D){for(const L in D)this.setProperty(L,D[L])}copyProperties(D,L){for(const Q of L)D.getProperty(Q,Y=>this.setProperty(Q,Y))}transform(D){return new I(this,D)}map(D,L){return new m(this,Ee(D,L))}filter(D,L){return this.map(function(Q){return D.call(L||this,Q)?Q:null})}uniq(D=v){const L=new Set;return this.filter(function(Q){const Y=D.call(this,Q);return L.has(Y)?!1:(L.add(Y),!0)})}prepend(D){return this.transform({prepend:D})}append(D){return this.transform({append:D})}surround(D,L){return this.transform({prepend:D,append:L})}skip(D){return this.map(L=>D-- >0?null:L)}take(D){return this.transform({limit:D})}range(D,L){return this.transform({offset:D,limit:Math.max(L-D+1,0)})}clone(){return new B(this)}[Symbol.asyncIterator](){const D=this;let L=null,Q=null,Y=null;D.addListener("readable",$),D.addListener("end",$),D.addListener("error",ue);function $(){if(L!==null)if(Y!==null)ue(Y);else if(D.done)L({done:!0,value:void 0}),L=Q=null,ne();else{const ce=D.read();ce!==null&&(L({done:!1,value:ce}),L=Q=null)}}function ue(ce){Q!==null?(Q(ce),L=Q=Y=null,ne()):Y===null&&(Y=ce)}function ne(){D.removeListener("readable",$),D.removeListener("end",$),D.removeListener("error",ue)}return{next(){return new Promise((ce,Se)=>{L=ce,Q=Se,$()})}}}}a.AsyncIterator=l;function s(F){F==="data"&&(this.removeListener("newListener",s),d(this,"readable",c),this.readable&&r(()=>c.call(this)))}function c(){let F;for(;this.listenerCount("data")!==0&&(F=this.read())!==null;)this.emit("data",F);this.listenerCount("data")===0&&!this.done&&(this.removeListener("readable",c),d(this,"newListener",s))}function d(F,D,L){F.listeners(D).includes(L)||F.on(D,L)}class f extends l{constructor(){super(),this._changeState(a.ENDED,!0)}}a.EmptyIterator=f;class p extends l{constructor(D){super(),this._item=D,D===null?this.close():this.readable=!0}read(){const D=this._item;return this._item=null,this.close(),D}_toStringDetails(){return this._item===null?"":`(${this._item})`}}a.SingletonIterator=p;class h extends l{constructor(D=[],{autoStart:L=!0,preserve:Q=!0}={}){super();const Y=Q||!Array.isArray(D)?[...D]:D;this._index=0,this._sourceStarted=L!==!1,this._truncateThreshold=Q?-1:64,this._sourceStarted&&Y.length===0?this.close():this._buffer=Y,this.readable=!0}read(){this._sourceStarted||(this._sourceStarted=!0);let D=null;return this._buffer&&(this._index<this._buffer.length&&(D=this._buffer[this._index++]),this._index===this._buffer.length?(delete this._buffer,this.close()):this._index===this._truncateThreshold&&(this._buffer.splice(0,this._truncateThreshold),this._index=0)),D}_toStringDetails(){return`(${this._buffer?this._buffer.length-this._index:0})`}_destroy(D,L){delete this._buffer,L()}toArray(D={}){if(!this._buffer)return Promise.resolve([]);const{length:L}=this._buffer,Q=this._index,Y=typeof D.limit!="number"?L:Q+D.limit,$=this._buffer.slice(Q,Y);return this._index=Y,Y>=L&&this.close(),Promise.resolve($)}}a.ArrayIterator=h;class g extends l{constructor({start:D=0,step:L=1,end:Q}={}){super(),Number.isFinite(D)&&(D=Math.trunc(D)),this._next=D,Number.isFinite(L)&&(L=Math.trunc(L)),this._step=L;const Y=L>=0,$=Y?1/0:-1/0;Number.isFinite(Q)?Q=Math.trunc(Q):Q!==-$&&(Q=$),this._last=Q,!Number.isFinite(D)||(Y?D>Q:D<Q)?this.close():this.readable=!0}read(){if(this.closed)return null;const D=this._next,L=this._step,Q=this._last,Y=this._next+=L;return(L>=0?Y>Q:Y<Q)&&this.close(),D}_toStringDetails(){return`(${this._next}...${this._last})`}}a.IntegerIterator=g;function v(F){return F}a.identity=v,a.DESTINATION=Symbol("destination");class m extends l{constructor(D,L=v,Q={}){super(),this._map=L,this._source=T(D),this._destroySource=Q.destroySource!==!1,D.done?this.close():(this._source[a.DESTINATION]=this,this._source.on("end",j),this._source.on("error",N),this._source.on("readable",S),this.readable=this._source.readable)}read(){if(!this.done){if(this._source.readable){let D,L;for(;(D=this._source.read())!==null;)if((L=this._map(D))!==null)return L}this.readable=!1,this._source.done&&this.close()}return null}_end(D){this._source.removeListener("end",j),this._source.removeListener("error",N),this._source.removeListener("readable",S),delete this._source[a.DESTINATION],this._destroySource&&this._source.destroy(),super._end(D)}}a.MappingIterator=m;function T(F,D=!1){if(!F||!Oe(F.read)||!Oe(F.on))throw new TypeError(`Invalid source: ${F}`);if(!D&&F[a.DESTINATION])throw new Error("The source already has a destination");return F}class w extends l{constructor({maxBufferSize:D=4,autoStart:L=!0}={}){super(a.INIT),this._buffer=new u.LinkedList,this._maxBufferSize=4,this._reading=!0,this._pushedCount=0,this.maxBufferSize=D,r(()=>this._init(L)),this._sourceStarted=L!==!1}get maxBufferSize(){return this._maxBufferSize}set maxBufferSize(D){D!==1/0&&(D=Number.isFinite(D)?Math.max(Math.trunc(D),1):4),this._maxBufferSize!==D&&(this._maxBufferSize=D,this._state===a.OPEN&&this._fillBuffer())}_init(D){let L=!1;this._reading=!0,this._begin(()=>{if(L)throw new Error("done callback called multiple times");L=!0,this._reading=!1,this._changeState(a.OPEN),D?this._fillBufferAsync():this.readable=!0})}_begin(D){D()}read(){if(this.done)return null;this._sourceStarted||(this._sourceStarted=!0);const D=this._buffer;let L;return D.empty?(L=null,this.readable=!1):L=D.shift(),!this._reading&&D.length<this._maxBufferSize&&(this.closed?D.empty&&this._endAsync():this._fillBufferAsync()),L}_read(D,L){L()}_push(D){this.done||(this._pushedCount++,this._buffer.push(D),this.readable=!0)}_fillBuffer(){let D;this._reading||(this.closed?this._completeClose():(D=Math.min(this._maxBufferSize-this._buffer.length,128))>0&&(this._pushedCount=0,this._reading=!0,this._read(D,()=>{if(!D)throw new Error("done callback called multiple times");D=0,this._reading=!1,this.closed?this._completeClose():this._pushedCount&&(this.readable=!0,this._buffer.length<this._maxBufferSize/2&&this._fillBufferAsync())})))}_fillBufferAsync(){this._reading||(this._reading=!0,r(()=>{this._reading=!1,this._fillBuffer()}))}close(){this._reading?this._changeState(a.CLOSING):this._completeClose()}_completeClose(){this._changeState(a.CLOSED)&&(this._reading=!0,this._flush(()=>{if(!this._reading)throw new Error("done callback called multiple times");this._reading=!1,this._buffer.empty&&this._endAsync()}))}_destroy(D,L){this._buffer.clear(),L()}_flush(D){D()}_toStringDetails(){const D=this._buffer;return`{${D.empty?"":`next: ${D.first}, `}buffer: ${D.length}}`}}a.BufferedIterator=w;class E extends w{constructor(D,L=D||{}){super(L),this._boundPush=Q=>this._push(Q),be(D)||(D=L.source),Ie(D)?this.source=D:D&&(this._createSource=Ae(D)?()=>D:D,this._sourceStarted&&this._loadSourceAsync()),this._optional=!!L.optional,this._destroySource=L.destroySource!==!1}get source(){return Oe(this._createSource)&&this._loadSourceAsync(),this._source}set source(D){const L=this._source=this._validateSource(D);L[a.DESTINATION]=this,this.done?this._destroySource&&L.destroy():L.done?this.close():(L.on("end",q),L.on("readable",O),L.on("error",N))}_loadSourceAsync(){Oe(this._createSource)&&(Promise.resolve(this._createSource()).then(D=>{delete this._createSource,this.source=D,this._fillBuffer()},D=>this.emit("error",D)),this._createSource=null)}_validateSource(D,L=!1){if(this._source||typeof this._createSource<"u")throw new Error("The source cannot be changed after it has been set");return T(D,L)}_read(D,L){const Q=()=>{this._pushedCount<D&&!this.closed?r(()=>this._readAndTransform(Q,L)):L()};this._readAndTransform(Q,L)}_readAndTransform(D,L){let Q;const Y=this.source;!Y||Y.done||(Q=Y.read())===null?L():this._optional?this._optionalTransform(Q,D):this._transform(Q,D,this._boundPush)}_optionalTransform(D,L){const Q=this._pushedCount;this._transform(D,()=>{Q===this._pushedCount&&this._push(D),L()},this._boundPush)}_transform(D,L,Q){Q(D),L()}_closeWhenDone(){this.close()}_end(D){const L=this._source;L&&(L.removeListener("end",q),L.removeListener("error",N),L.removeListener("readable",O),delete L[a.DESTINATION],this._destroySource&&L.destroy()),super._end(D)}}a.TransformIterator=E;function S(){this[a.DESTINATION].readable=!0}function N(F){this[a.DESTINATION].emit("error",F)}function j(){this[a.DESTINATION].close()}function q(){this[a.DESTINATION]._closeWhenDone()}function O(){this[a.DESTINATION]._sourceStarted!==!1&&this[a.DESTINATION]._fillBuffer()}class I extends E{constructor(D,L){if(super(D,L),this._offset=0,this._limit=1/0,this._filter=Q=>!0,L=L||(be(D)?null:D),L){const Q=Oe(L)?L:L.transform,{limit:Y,offset:$,filter:ue,map:ne,prepend:ce,append:Se}=L;$===1/0||Y===-1/0?this._limit=0:(Number.isFinite($)&&(this._offset=Math.max(Math.trunc($),0)),Number.isFinite(Y)&&(this._limit=Math.max(Math.trunc(Y),0)),Oe(ue)&&(this._filter=ue),Oe(ne)&&(this._map=ne),this._transform=Oe(Q)?Q:null),ce&&(this._prepender=Ie(ce)?ce:W(ce)),Se&&(this._appender=Ie(Se)?Se:W(Se))}}_read(D,L){const Q=()=>this._readAndTransformSimple(D,Y,L);this._readAndTransformSimple(D,Y,L);function Y(){r(Q)}}_readAndTransformSimple(D,L,Q){let Y;const{source:$}=this;if(!$||$.done){Q();return}for(this._limit===0&&this.close();!this.closed&&this._pushedCount<D&&(Y=$.read())!==null;){if(!this._filter(Y)||this._offset!==0&&this._offset--)continue;const ue=typeof this._map>"u"?Y:this._map(Y);if(ue===null)this._optional&&this._push(Y);else if(!Oe(this._transform))this._push(ue);else{this._optional?this._optionalTransform(ue,L):this._transform(ue,L,this._boundPush);return}--this._limit===0&&this.close()}Q()}_begin(D){this._insert(this._prepender,D),delete this._prepender}_flush(D){this._insert(this._appender,D),delete this._appender}_insert(D,L){const Q=$=>this._push($);!D||D.done?L():(D.on("data",Q),D.on("end",Y));function Y(){D.removeListener("data",Q),D.removeListener("end",Y),L()}}}a.SimpleTransformIterator=I;class A extends E{constructor(D,L){if(super(D,L),this._transformerQueue=[],L){const Q=Oe(L)?L:L.multiTransform;Q&&(this._createTransformer=Q)}}_read(D,L){const Q=this._transformerQueue,Y=this._optional;let $,ue;for(;($=Q[0])&&$.transformer.done;){Y&&$.item!==null&&(D--,this._push($.item)),Q.shift();const{transformer:ce}=$;ce.removeListener("end",O),ce.removeListener("readable",O),ce.removeListener("error",N)}const{source:ne}=this;for(;ne&&!ne.done&&Q.length<this.maxBufferSize&&(ue=ne.read(),ue!==null);){const ce=this._createTransformer(ue)||new f;ce[a.DESTINATION]=this,ce.on("end",O),ce.on("readable",O),ce.on("error",N),Q.push({transformer:ce,item:ue})}if($=Q[0],$){const{transformer:ce}=$;for(;D-- >0&&(ue=ce.read())!==null;)this._push(ue),Y&&($.item=null)}else ne&&ne.done&&this.close();L()}_createTransformer(D){return new p(D)}_closeWhenDone(){this._transformerQueue.length||this.close()}_end(D){if(super._end(D),this._destroySource)for(const L of this._transformerQueue)L.transformer.destroy()}}a.MultiTransformIterator=A;class P extends w{constructor(D,L={}){super(L),this._sources=[],this._currentSource=-1;const Q=L.autoStart!==!1;if(Ie(D))D.on("error",Y=>this.emit("error",Y)),this._pending={loading:!1,sources:D},Q&&this._loadSources();else if(Array.isArray(D)&&D.length>0)for(const Y of D)this._addSource(Y);else Q&&this.close();this._destroySources=L.destroySources!==!1}_loadSources(){const D=this._pending.sources;this._pending.loading=!0,D.done?(delete this._pending,this.close()):(D.on("data",L=>{this._addSource(L),this._fillBufferAsync()}),D.on("end",()=>{delete this._pending,this._fillBuffer()}))}_addSource(D){Ae(D)&&(D=G(D)),D.done||(this._sources.push(D),D[a.DESTINATION]=this,D.on("error",N),D.on("readable",O),D.on("end",C))}_removeEmptySources(){this._sources=this._sources.filter((D,L)=>(D.done&&L<=this._currentSource&&this._currentSource--,!D.done)),this._fillBuffer()}_read(D,L){var Q;((Q=this._pending)===null||Q===void 0?void 0:Q.loading)===!1&&this._loadSources();let Y=0,$;for(;Y!==(Y=D);)for(let ue=0;ue<this._sources.length&&D>0;ue++)this._currentSource=(this._currentSource+1)%this._sources.length,($=this._sources[this._currentSource].read())!==null&&(D--,this._push($));!this._pending&&this._sources.length===0&&this.close(),L()}_end(D=!1){if(super._end(D),this._destroySources){for(const L of this._sources)L.destroy();this._pending&&(this._pending.sources.destroy(),delete this._pending)}}}a.UnionIterator=P;function C(){this[a.DESTINATION]._removeEmptySources()}class B extends E{constructor(D){super(D,{autoStart:!1}),this._readPosition=0,this._reading=!1,D&&(this.readable=!0)}_init(){}close(){l.prototype.close.call(this)}get source(){return super.source}set source(D){const L=this._source=this._validateSource(D),Q=L&&L[a.DESTINATION]||(L[a.DESTINATION]=new H(L));this.done?this._destroySource&&L.destroy():Q.endsAt(0)?this.close():(Q.register(this),(L._sourceStarted===!1||Q.readAt(0)!==null)&&(this.readable=!0));const Y=this._propertyCallbacks;for(const $ in Y){const ue=Y[$];for(const ne of ue)this._getSourceProperty($,ne)}}_validateSource(D,L=!1){const Q=D&&D[a.DESTINATION];return super._validateSource(D,!Q||Q instanceof H)}getProperty(D,L){const{source:Q}=this,Y=this._properties,$=Y&&D in Y;if(!L)return $?Y&&Y[D]:Q&&Q.getProperty(D);super.getProperty(D,L),Q&&!$&&this._getSourceProperty(D,L)}_getSourceProperty(D,L){this.source.getProperty(D,Q=>{(!this._properties||!(D in this._properties))&&L(Q)})}getProperties(){const D=this.source?this.source.getProperties():{},L=this._properties;for(const Q in L)D[Q]=L[Q];return D}_toStringDetails(){return`{source: ${this.source?this.source.toString():"none"}}`}read(){this._sourceStarted||(this._sourceStarted=!0);const D=this.source;let L=null;if(!this.done&&D){const Q=D[a.DESTINATION];(L=Q.readAt(this._readPosition))!==null?this._readPosition++:this.readable=!1,Q.endsAt(this._readPosition)&&this.close()}return L}_end(D){const L=this.source,Q=L?.[a.DESTINATION];Q&&Q.unregister(this),w.prototype._end.call(this,D)}}a.ClonedIterator=B;class H{constructor(D){if(this._history=[],this._trackers=new Set,this._source=D,!D.done){const L=()=>{for(const $ of this._trackers)$.readable=!0},Q=$=>{for(const ue of this._trackers)ue.emit("error",$)},Y=()=>{for(const $ of this._trackers)$._sourceStarted!==!1&&$._readPosition===this._history.length&&$.close();this._trackers.clear(),D.removeListener("end",Y),D.removeListener("error",Q),D.removeListener("readable",L)};D.on("end",Y),D.on("error",Q),D.on("readable",L)}}register(D){this._source.done||this._trackers.add(D)}unregister(D){this._trackers.delete(D)}readAt(D){let L=null;return D<this._history.length?L=this._history[D]:!this._source.done&&(L=this._source.read())!==null&&(this._history[D]=L),L}endsAt(D){return this._source.done&&this._history.length===D}}class V extends l{constructor(D,L){super(),this._source=null,this._destroySource=L?.destroySource!==!1,Ae(D)?(this._source=new l,D.then(Q=>{this._source=null,this.source=Q}).catch(Q=>this.emit("error",Q))):D&&(this.source=D)}set source(D){let L=D;if(this._source!==null)throw new Error("The source cannot be changed after it has been set");if(ee(L)&&(L=L[Symbol.iterator]()),_(L)){let Q=L;L=new e.EventEmitter,L.read=()=>{if(Q!==null){let Y;for(;!(Y=Q.next()).done;)if(Y.value!==null)return Y.value;Q=null,this.close()}return null}}else L=T(L);if(this.done){this._destroySource&&Oe(L.destroy)&&L.destroy();return}L[a.DESTINATION]=this,L.on("end",j),L.on("error",N),L.on("readable",S),this._source=L,this.readable=L.readable!==!1}read(){if(this._source!==null&&this._source.readable!==!1){const D=this._source.read();if(D!==null)return D;this.readable=!1}return null}_end(D=!1){this._source!==null&&(this._source.removeListener("end",j),this._source.removeListener("error",N),this._source.removeListener("readable",S),delete this._source[a.DESTINATION],this._destroySource&&Oe(this._source.destroy)&&this._source.destroy(),this._source=null),super._end(D)}}a.WrappingIterator=V;function G(F,D){if(D&&("autoStart"in D||"optional"in D||"source"in D||"maxBufferSize"in D))return F&&!Ie(F)&&(F=new V(F)),new E(F,D);if(!F)return Z();if(Ae(F))return new V(F,D);if(F instanceof l)return F;if(Array.isArray(F))return W(F);if(ee(F)||_(F)||Ie(F))return new V(F,D);throw new TypeError(`Invalid source: ${F}`)}a.wrap=G;function Z(){return new f}a.empty=Z;function ae(F){return new p(F)}a.single=ae;function W(F){return new h(F)}a.fromArray=W;function te(F){return new V(F)}a.fromIterator=te;function se(F){return new V(F)}a.fromIterable=se;function pe(F){return new P(F)}a.union=pe;function le(F,D,L){return new g({start:F,end:D,step:L})}a.range=le;function Ee(F,D){return D?F.bind(D):F}function Oe(F){return typeof F=="function"}a.isFunction=Oe;function Ie(F){return Oe(F?.on)}a.isEventEmitter=Ie;function Ae(F){return Oe(F?.then)}a.isPromise=Ae;function be(F){return F&&(Ie(F)||Ae(F)||Oe(F))}a.isSourceExpression=be;function ee(F){return F&&Symbol.iterator in F}a.isIterable=ee;function _(F){return Oe(F?.next)}a.isIterator=_})(Jj)),Jj}var Zj={},Ud={},G_={},gW;function h4e(){if(gW)return G_;gW=1,Object.defineProperty(G_,"__esModule",{value:!0}),G_.BlankNodeScoped=void 0;let a=class{constructor(u,n){this.termType="BlankNode",this.value=u,this.skolemized=n}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}};return G_.BlankNodeScoped=a,G_}var $_={},vW;function y4e(){if(vW)return $_;vW=1,Object.defineProperty($_,"__esModule",{value:!0}),$_.BlankNodeBindingsScoped=void 0;let a=class{constructor(u){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}};return $_.BlankNodeBindingsScoped=a,$_}var _W;function Hq(){return _W||(_W=1,(function(a){var e=Ud&&Ud.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ud&&Ud.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(h4e(),a),u(y4e(),a)})(Ud)),Ud}var TW;function kq(){return TW||(TW=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.deskolemizeOperation=a.deskolemizeQuad=a.deskolemizeTermNestedThrowing=a.deskolemizeTerm=a.skolemizeBindingsStream=a.skolemizeQuadStream=a.skolemizeBindings=a.skolemizeQuad=a.skolemizeTerm=a.getSourceId=a.SKOLEM_PREFIX=void 0;const e=Hq(),u=Yr(),n=Ut();a.SKOLEM_PREFIX="urn:comunica_skolem:source_";function r(h,g){let v=h.get(g.referenceValue);return v===void 0&&(v=`${h.size}`,h.set(g.referenceValue,v)),v}a.getSourceId=r;function t(h,g,v){return g.termType==="BlankNode"?new e.BlankNodeScoped(`bc_${v}_${g.value}`,h.namedNode(`${a.SKOLEM_PREFIX}${v}:${g.value}`)):g}a.skolemizeTerm=t;function i(h,g,v){return(0,u.mapTermsNested)(g,m=>t(h,m,v))}a.skolemizeQuad=i;function o(h,g,v){return g.map(m=>m.termType==="Quad"?i(h,m,v):t(h,m,v))}a.skolemizeBindings=o;function l(h,g,v){const m=g.map(w=>i(h,w,v));function T(){g.getProperty("metadata",w=>{m.setProperty("metadata",w),w.state.addInvalidateListener(T)})}return T(),m}a.skolemizeQuadStream=l;function s(h,g,v){const m=g.map(w=>o(h,w,v));function T(){g.getProperty("metadata",w=>{m.setProperty("metadata",w),w.state.addInvalidateListener(T)})}return T(),m}a.skolemizeBindingsStream=s;function c(h,g,v){if(g.termType==="BlankNode"&&"skolemized"in g&&(g=g.skolemized),g.termType==="NamedNode"&&g.value.startsWith(a.SKOLEM_PREFIX)){const m=g.value.indexOf(":",a.SKOLEM_PREFIX.length);if(g.value.slice(a.SKOLEM_PREFIX.length,m)===v){const w=g.value.slice(m+1,g.value.length);return h.blankNode(w)}return null}return g}a.deskolemizeTerm=c;function d(h,g,v){if(g.termType==="Quad")return(0,u.mapTermsNested)(g,T=>{const w=c(h,T,v);if(!w)throw new Error("Skolemized term is not in scope for this source");return w});const m=c(h,g,v);if(m===null)throw new Error("Skolemized term is not in scope for this source");return m}a.deskolemizeTermNestedThrowing=d;function f(h,g,v){return(0,u.mapTermsNested)(g,m=>c(h,m,v)??m)}a.deskolemizeQuad=f;function p(h,g,v){const m=new n.Factory;try{return n.Util.mapOperation(g,{[n.Algebra.types.PATTERN](T,w){return{result:Object.assign(w.createPattern(d(h,T.subject,v),d(h,T.predicate,v),d(h,T.object,v),d(h,T.graph,v)),{metadata:T.metadata}),recurse:!1}},[n.Algebra.types.PATH](T,w){return{result:Object.assign(w.createPath(d(h,T.subject,v),T.predicate,d(h,T.object,v),d(h,T.graph,v)),{metadata:T.metadata}),recurse:!1}}},m)}catch{}}a.deskolemizeOperation=p})(Zj)),Zj}var wW;function o2e(){if(wW)return H_;wW=1,Object.defineProperty(H_,"__esModule",{value:!0}),H_.QuerySourceSkolemized=void 0;const a=lt(),e=xa(),u=zt(),n=kq();let r=class{constructor(i,o){this.innerSource=i,this.sourceId=o}async getSelectorShape(i){return this.innerSource.getSelectorShape(i)}queryBindings(i,o,l){const s=o.getSafe(a.KeysInitQuery.dataFactory),c=(0,n.deskolemizeOperation)(s,i,this.sourceId);if(!c){const d=new u.ArrayIterator([],{autoStart:!1});return d.setProperty("metadata",{state:new e.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]}),d}return(0,n.skolemizeBindingsStream)(s,this.innerSource.queryBindings(c,o,l),this.sourceId)}queryBoolean(i,o){return this.innerSource.queryBoolean(i,o)}queryQuads(i,o){const l=o.getSafe(a.KeysInitQuery.dataFactory),s=(0,n.deskolemizeOperation)(l,i,this.sourceId);if(!s){const c=new u.ArrayIterator([],{autoStart:!1});return c.setProperty("metadata",{state:new e.MetadataValidationState,cardinality:{type:"exact",value:0}}),c}return(0,n.skolemizeQuadStream)(l,this.innerSource.queryQuads(s,o),this.sourceId)}queryVoid(i,o){return this.innerSource.queryVoid(i,o)}get referenceValue(){return this.innerSource.referenceValue}toString(){return`${this.innerSource.toString()}(SkolemID:${this.sourceId})`}};return H_.QuerySourceSkolemized=r,H_}var SW;function m4e(){if(SW)return V_;SW=1,Object.defineProperty(V_,"__esModule",{value:!0}),V_.ActorContextPreprocessQuerySourceSkolemize=void 0;const a=_1(),e=lt(),u=De(),n=o2e(),r=kq();let t=class extends a.ActorContextPreprocess{constructor(o){super(o)}async test(o){return(0,u.passTestVoid)()}async run(o){let l=o.context;if(l.has(e.KeysQueryOperation.querySources)){l.has(e.KeysQuerySourceIdentify.sourceIds)||(l=l.set(e.KeysQuerySourceIdentify.sourceIds,new Map));const s=l.getSafe(e.KeysQuerySourceIdentify.sourceIds);let c=l.getSafe(e.KeysQueryOperation.querySources);c=c.map(d=>({source:new n.QuerySourceSkolemized(d.source,(0,r.getSourceId)(s,d.source)),context:d.context})),l=l.set(e.KeysQueryOperation.querySources,c)}return{context:l}}};return V_.ActorContextPreprocessQuerySourceSkolemize=t,V_}var EW;function uP(){return EW||(EW=1,(function(a){var e=Bd&&Bd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Bd&&Bd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(m4e(),a),u(o2e(),a),u(kq(),a)})(Bd)),Bd}var Qd={},X_={},AW;function b4e(){if(AW)return X_;AW=1,Object.defineProperty(X_,"__esModule",{value:!0}),X_.ActorContextPreprocessSetDefaultsLinkTraversal=void 0;const a=_1(),e=lt(),u=De();let n=class extends a.ActorContextPreprocess{constructor(t){super(t)}async test(t){return(0,u.passTestVoid)()}async run(t){let i=t.context;return i.has(e.KeysQuerySourceIdentify.traverse)||(i=i.set(e.KeysQuerySourceIdentify.traverse,!0)),{context:i}}};return X_.ActorContextPreprocessSetDefaultsLinkTraversal=n,X_}var OW;function zq(){return OW||(OW=1,(function(a){var e=Qd&&Qd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Qd&&Qd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(b4e(),a)})(Qd)),Qd}var Vd={},K_={},xW;function g4e(){if(xW)return K_;xW=1,Object.defineProperty(K_,"__esModule",{value:!0}),K_.MediatorCombinePipeline=void 0;const a=De();let e=class extends a.Mediator{constructor(n){super(n)}async mediate(n){let r;try{r=this.publish(n)}catch{return n}if(this.filterFailures){const l=[];for(const s of r)(await s.reply).isPassed()&&l.push(s);r=l}const t=[];if(r=await Promise.all(r.map(async({actor:l,reply:s},c)=>{try{const d=await s,f=d.getOrThrow();return t[c]=d.getSideData(),{actor:l,reply:f}}catch(d){throw new Error(this.constructFailureMessage(n,[d.message]))}})),this.order){const l=s=>{const c=this.field?s[this.field]:s;if(typeof c!="number")throw new TypeError("Cannot order elements that are not numbers.");return c};r=r.sort((s,c)=>(this.order==="increasing"?1:-1)*(l(s.reply)-l(c.reply)))}let i=n,o=0;for(const{actor:l}of r)i={...i,...await l.runObservable(i,t[o++])};return i}mediateWith(){throw new Error("Method not supported.")}};return K_.MediatorCombinePipeline=e,K_}var RW;function n1(){return RW||(RW=1,(function(a){var e=Vd&&Vd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Vd&&Vd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(g4e(),a)})(Vd)),Vd}var Hd={},J_={},kd={},W_={},NW;function v4e(){if(NW)return W_;NW=1,Object.defineProperty(W_,"__esModule",{value:!0}),W_.ActorHashBindings=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return W_.ActorHashBindings=e,W_}var IW;function _4e(){return IW||(IW=1,(function(a){var e=kd&&kd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=kd&&kd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(v4e(),a)})(kd)),kd}var DW;function T4e(){if(DW)return J_;DW=1,Object.defineProperty(J_,"__esModule",{value:!0}),J_.ActorHashBindingsMurmur=void 0;const a=_4e(),e=De(),u=Nq();let n=class extends a.ActorHashBindings{async test(t){return(0,e.passTestVoid)()}async run(t){return{hashFunction:(i,o)=>{let l=u();for(const s of o)l=l.hash(i.get(s)?.value??"UNDEF");return l.result()}}}};return J_.ActorHashBindingsMurmur=n,J_}var FW;function Gq(){return FW||(FW=1,(function(a){var e=Hd&&Hd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Hd&&Hd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(T4e(),a)})(Hd)),Hd}var zd={},Y_={},Gd={},Z_={},PW;function w4e(){if(PW)return Z_;PW=1,Object.defineProperty(Z_,"__esModule",{value:!0}),Z_.ActorHashQuads=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return Z_.ActorHashQuads=e,Z_}var jW;function S4e(){return jW||(jW=1,(function(a){var e=Gd&&Gd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Gd&&Gd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(w4e(),a)})(Gd)),Gd}var MW;function E4e(){if(MW)return Y_;MW=1,Object.defineProperty(Y_,"__esModule",{value:!0}),Y_.ActorHashQuadsMurmur=void 0;const a=S4e(),e=De(),u=Nq();let n=class extends a.ActorHashQuads{async test(t){return(0,e.passTestVoid)()}async run(t){return{hashFunction:i=>{const o=u(i.subject.value);return o.hash(i.predicate.value),o.hash(i.object.value),o.hash(i.graph.value),o.result()}}}};return Y_.ActorHashQuadsMurmur=n,Y_}var CW;function $q(){return CW||(CW=1,(function(a){var e=zd&&zd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=zd&&zd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(E4e(),a)})(zd)),zd}var $d={},e2={},Xd={},t2={},LW;function A4e(){if(LW)return t2;LW=1,Object.defineProperty(t2,"__esModule",{value:!0}),t2.ActorOptimizeQueryOperation=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return t2.ActorOptimizeQueryOperation=e,t2}var qW;function Vi(){return qW||(qW=1,(function(a){var e=Xd&&Xd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Xd&&Xd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(A4e(),a)})(Xd)),Xd}var BW;function O4e(){if(BW)return e2;BW=1,Object.defineProperty(e2,"__esModule",{value:!0}),e2.ActorOptimizeQueryOperationRewriteCopy=void 0;const a=Vi(),e=lt(),u=De(),n=Ut();let r=class extends a.ActorOptimizeQueryOperation{constructor(i){super(i)}async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(e.KeysInitQuery.dataFactory),l=new n.Factory(o);return{operation:n.Util.mapOperation(i.operation,{[n.Algebra.types.COPY](c,d){let f;return typeof c.destination=="string"&&typeof c.source=="string"&&c.destination===c.source||typeof c.destination!="string"&&typeof c.source!="string"&&c.destination.equals(c.source)?f=d.createCompositeUpdate([]):f=d.createCompositeUpdate([d.createDrop(c.destination,!0),d.createAdd(c.source,c.destination,c.silent)]),{result:f,recurse:!1}}},l),context:i.context}}};return e2.ActorOptimizeQueryOperationRewriteCopy=r,e2}var UW;function Xq(){return UW||(UW=1,(function(a){var e=$d&&$d.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=$d&&$d.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(O4e(),a)})($d)),$d}var Kd={},r2={},QW;function x4e(){if(QW)return r2;QW=1,Object.defineProperty(r2,"__esModule",{value:!0}),r2.ActorOptimizeQueryOperationRewriteMove=void 0;const a=Vi(),e=lt(),u=De(),n=Ut();let r=class extends a.ActorOptimizeQueryOperation{constructor(i){super(i)}async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(e.KeysInitQuery.dataFactory),l=new n.Factory(o);return{operation:n.Util.mapOperation(i.operation,{[n.Algebra.types.MOVE](c,d){let f;if(typeof c.destination=="string"&&typeof c.source=="string"&&c.destination===c.source||typeof c.destination!="string"&&typeof c.source!="string"&&c.destination.equals(c.source))f=d.createCompositeUpdate([]);else{const p=[d.createDrop(c.destination,!0),d.createAdd(c.source,c.destination,c.silent),d.createDrop(c.source)];f=d.createCompositeUpdate(p)}return{result:f,recurse:!1}}},l),context:i.context}}};return r2.ActorOptimizeQueryOperationRewriteMove=r,r2}var VW;function Kq(){return VW||(VW=1,(function(a){var e=Kd&&Kd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Kd&&Kd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(x4e(),a)})(Kd)),Kd}var Jd={},n2={},HW;function R4e(){if(HW)return n2;HW=1,Object.defineProperty(n2,"__esModule",{value:!0}),n2.ActorOptimizeQueryOperationRewriteAdd=void 0;const a=Vi(),e=lt(),u=De(),n=Rr(),r=Ut(),t=new n.DataFactory;let i=class extends a.ActorOptimizeQueryOperation{constructor(l){super(l)}async test(l){return(0,u.passTestVoid)()}async run(l){const s=l.context.getSafe(e.KeysInitQuery.dataFactory),c=new r.Factory(s);return{operation:r.Util.mapOperation(l.operation,{[r.Algebra.types.ADD](f,p){const h=f.destination==="DEFAULT"?t.defaultGraph():f.destination,g=f.source==="DEFAULT"?t.defaultGraph():f.source;return{result:p.createDeleteInsert(void 0,[p.createPattern(t.variable("s"),t.variable("p"),t.variable("o"),h)],p.createPattern(t.variable("s"),t.variable("p"),t.variable("o"),g)),recurse:!1}}},c),context:l.context}}};return n2.ActorOptimizeQueryOperationRewriteAdd=i,n2}var kW;function Jq(){return kW||(kW=1,(function(a){var e=Jd&&Jd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Jd&&Jd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(R4e(),a)})(Jd)),Jd}var Wd={},a2={},Yd={},za={},zW;function N4e(){if(zW)return za;zW=1,Object.defineProperty(za,"__esModule",{value:!0}),za.estimateNpsCardinality=za.estimateJoinCardinality=za.estimateUnionCardinality=za.estimateSliceCardinality=za.estimateMinusCardinality=za.estimateCardinality=void 0;const a=Rr(),e=Ut(),u=new a.DataFactory,n=new e.Factory(u);function r(c,d){const f=d.getCardinality(c);if(f)return f;switch(c.type){case e.Algebra.types.ASK:return{type:"exact",value:1,dataset:d.uri};case e.Algebra.types.LOAD:case e.Algebra.types.DELETE_INSERT:case e.Algebra.types.ADD:case e.Algebra.types.COMPOSITE_UPDATE:case e.Algebra.types.CLEAR:case e.Algebra.types.NOP:case e.Algebra.types.DROP:case e.Algebra.types.CREATE:case e.Algebra.types.MOVE:case e.Algebra.types.COPY:return{type:"exact",value:0,dataset:d.uri};case e.Algebra.types.PROJECT:case e.Algebra.types.FILTER:case e.Algebra.types.ORDER_BY:case e.Algebra.types.GROUP:case e.Algebra.types.CONSTRUCT:case e.Algebra.types.DISTINCT:case e.Algebra.types.REDUCED:case e.Algebra.types.EXTEND:case e.Algebra.types.FROM:case e.Algebra.types.GRAPH:return r(c.input,d);case e.Algebra.types.ZERO_OR_ONE_PATH:case e.Algebra.types.ZERO_OR_MORE_PATH:case e.Algebra.types.ONE_OR_MORE_PATH:case e.Algebra.types.INV:return r(c.path,d);case e.Algebra.types.PATH:return r(c.predicate,d);case e.Algebra.types.NPS:return s(c,d);case e.Algebra.types.LINK:return r(n.createPattern(u.variable("s"),c.iri,u.variable("o")),d);case e.Algebra.types.UNION:case e.Algebra.types.SEQ:case e.Algebra.types.ALT:return o(c.input,d);case e.Algebra.types.BGP:return l(c.patterns,d);case e.Algebra.types.JOIN:case e.Algebra.types.LEFT_JOIN:return l(c.input,d);case e.Algebra.types.SLICE:return i(c,d);case e.Algebra.types.MINUS:return t(c,d);case e.Algebra.types.VALUES:return{type:"exact",value:c.bindings.length,dataset:d.uri};case e.Algebra.types.SERVICE:case e.Algebra.types.DESCRIBE:case e.Algebra.types.EXPRESSION:case e.Algebra.types.PATTERN:return{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:d.uri}}}za.estimateCardinality=r;function t(c,d){const f=r(c.input[0],d),p=r(c.input[1],d);return{type:"estimate",value:Math.max(f.value-p.value,0),dataset:d.uri}}za.estimateMinusCardinality=t;function i(c,d){const f=r(c.input,d);return f.value>0&&(f.value=Math.max(f.value-c.start,0),c.length!==void 0&&(f.value=Math.min(f.value,c.length))),f}za.estimateSliceCardinality=i;function o(c,d){const f={type:"exact",value:0,dataset:d.uri};for(const p of c){const h=r(p,d);h.type==="estimate"&&f.type==="exact"&&(f.type=h.type),f.value+=h.value}return f}za.estimateUnionCardinality=o;function l(c,d){const f=[];for(const h of c){const g=e.Util.inScopeVariables(h).map(m=>m.value),v=f.find(m=>g.some(T=>m.vars.has(T)));if(v){v.ops.push(h);for(const m of g)v.vars.add(m)}else f.push({ops:[h],vars:new Set(g)})}return{type:"estimate",value:f.map(h=>Math.min(...h.ops.map(g=>r(g,d).value))).reduce((h,g)=>h*g,1),dataset:d.uri}}za.estimateJoinCardinality=l;function s(c,d){const f=n.createSeq([...c.iris].reverse().map(v=>n.createLink(v))),p=r(f,d),h=n.createPattern(u.variable("s"),u.variable("p"),u.variable("o")),g=r(h,d);return{type:"estimate",value:Math.max(0,g.value-p.value),dataset:d.uri}}return za.estimateNpsCardinality=s,za}var i2={},GW;function I4e(){if(GW)return i2;GW=1,Object.defineProperty(i2,"__esModule",{value:!0}),i2.getExpressionVariables=void 0;const a=Yr(),e=Ut();function u(n){switch(n.expressionType){case e.Algebra.expressionTypes.AGGREGATE:case e.Algebra.expressionTypes.WILDCARD:throw new Error(`Getting expression variables is not supported for ${n.expressionType}`);case e.Algebra.expressionTypes.EXISTENCE:return e.Util.inScopeVariables(n.input);case e.Algebra.expressionTypes.NAMED:return[];case e.Algebra.expressionTypes.OPERATOR:return(0,a.uniqTerms)(n.args.flatMap(r=>u(r)));case e.Algebra.expressionTypes.TERM:return n.term.termType==="Variable"?[n.term]:[]}}return i2.getExpressionVariables=u,i2}var u2={},$W;function D4e(){if($W)return u2;$W=1,Object.defineProperty(u2,"__esModule",{value:!0}),u2.doesShapeAcceptOperation=void 0;const a=Ut();function e(o,l,s){return u(o,o,l,s)}u2.doesShapeAcceptOperation=e;function u(o,l,s,c){if(l.type==="conjunction")return l.children.every(f=>u(o,f,s,c));if(l.type==="disjunction")return l.children.some(f=>u(o,f,s,c));if(l.type==="negation")return!u(l.child,l.child,s,c);if(l.type==="arity")return u(o,l.child,s,c);if((c?.joinBindings&&!l.joinBindings)??(c?.filterBindings&&!l.filterBindings))return!1;const d=l.operation;switch(d.operationType){case"type":return d.type===a.Algebra.types.EXPRESSION&&i(s)&&!("extensionFunctions"in d&&d.extensionFunctions?.includes(s.name.value))||!n(o,l.children,s,c)&&!r(o,s,c)?!1:d.type===s.type;case"pattern":return!n(o,l.children,s,c)&&!r(o,s,c)?!1:d.pattern.type===s.type;case"wildcard":{if(c?.wildcardAcceptAllExtensionFunctions)return!0;if(i(s))return!1;let f=!1;return a.Util.recurseOperation(s,{[a.Algebra.types.EXPRESSION](p){return i(p)&&!e(o,p,c)?(f=!0,!1):!0}}),!f}}}function n(o,l,s,c){if(i(s)||i(s.expression))return!1;if(l){const d=s.input?Array.isArray(s.input)?s.input:[s.input]:s.patterns??[];for(const[f,p]of l.entries())if(!d[f]||!u(o,p,d[f],c))return!1;return!0}return!1}function r(o,l,s){return l.input&&!(Array.isArray(l.input)?l.input:[l.input]).every(d=>u(o,o,d,s))||l.expression&&i(l.expression)&&!u(o,o,l.expression,s)?!1:!(l.patterns&&!l.patterns.every(c=>u(o,o,c,s)))}function t(o){return/^https?:\/\/www\.w3\.org\//u.test(o)}function i(o){return o&&o.type===a.Algebra.types.EXPRESSION&&o.expressionType===a.Algebra.expressionTypes.NAMED&&!t(o.name.value)}return u2}var Cn={},XW;function F4e(){if(XW)return Cn;XW=1,Object.defineProperty(Cn,"__esModule",{value:!0}),Cn.removeOperationSource=Cn.assignOperationSource=Cn.getOperationSource=Cn.testReadOnly=Cn.validateQueryOutput=Cn.getSafeVoid=Cn.getSafeBoolean=Cn.getSafeQuads=Cn.getSafeBindings=void 0;const a=lt(),e=De();function u(d){return i(d,"bindings"),d}Cn.getSafeBindings=u;function n(d){return i(d,"quads"),d}Cn.getSafeQuads=n;function r(d){return i(d,"boolean"),d}Cn.getSafeBoolean=r;function t(d){return i(d,"void"),d}Cn.getSafeVoid=t;function i(d,f){if(d.type!==f)throw new Error(`Invalid query output type: Expected '${f}' but got '${d.type}'`)}Cn.validateQueryOutput=i;function o(d){return d.get(a.KeysQueryOperation.readOnly)?(0,e.failTest)("Attempted a write operation in read-only mode"):(0,e.passTestVoid)()}Cn.testReadOnly=o;function l(d){return d.metadata?.scopedSource}Cn.getOperationSource=l;function s(d,f){return d={...d},d.metadata=d.metadata?{...d.metadata}:{},d.metadata.scopedSource=f,d}Cn.assignOperationSource=s;function c(d){delete d.metadata?.scopedSource,d.metadata&&Object.keys(d.metadata).length===0&&delete d.metadata}return Cn.removeOperationSource=c,Cn}var Zd={},KW;function P4e(){if(KW)return Zd;KW=1,Object.defineProperty(Zd,"__esModule",{value:!0}),Zd.materializeOperation=Zd.materializeTerm=void 0;const a=$t(),e=Yr(),u=Ut();function n(i,o){if(i.termType==="Variable"){const l=o.get(i);if(l)return l}return i.termType==="Quad"&&(0,e.someTermsNested)(i,l=>l.termType==="Variable")?(0,e.mapTermsNested)(i,l=>n(l,o)):i}Zd.materializeTerm=n;function r(i,o,l,s,c={}){return c={strictTargetVariables:"strictTargetVariables"in c?c.strictTargetVariables:!1,bindFilter:"bindFilter"in c?c.bindFilter:!0,originalBindings:"originalBindings"in c?c.originalBindings:o},u.Util.mapOperation(i,{path(d,f){return{recurse:!1,result:Object.assign(f.createPath(n(d.subject,o),d.predicate,n(d.object,o),n(d.graph,o)),{metadata:d.metadata})}},pattern(d,f){return{recurse:!1,result:Object.assign(f.createPattern(n(d.subject,o),n(d.predicate,o),n(d.object,o),n(d.graph,o)),{metadata:d.metadata})}},join(d,f){return{recurse:!1,result:f.createJoin(d.input.map(p=>r(p,o,l,s,c)),d.input.every(p=>!p.metadata))}},extend(d){if(o.has(d.variable)){if(c.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,a.termToString)(d.variable)} in a BIND operator.`);return{recurse:!0,result:r(d.input,o,l,s,c)}}return{recurse:!0,result:d}},group(d,f){if(c.strictTargetVariables){for(const h of d.variables)if(o.has(h))throw new Error(`Tried to bind variable ${(0,a.termToString)(h)} in a GROUP BY operator.`);return{recurse:!0,result:d}}const p=d.variables.filter(h=>!o.has(h));return{recurse:!0,result:f.createGroup(d.input,p,d.aggregates)}},filter(d,f){const p=c.originalBindings;if(d.expression.expressionType!=="operator"||p.size===0)return{recurse:!1,result:d};const h=t(f,p),g=r(d.expression,o,l,s,c),v=f.createJoin([...h,r(d.input,o,l,s,c)]);return{recurse:!1,result:f.createFilter(v,g)}},project(d,f){const p=t(f,c.originalBindings,d.variables);let h=r(d.input,o,l,s,c);return p.length>0&&(h=f.createJoin([...p,h])),{recurse:!1,result:f.createProject(h,d.variables)}},values(d,f){if(c.strictTargetVariables){for(const p of d.variables)if(o.has(p))throw new Error(`Tried to bind variable ${(0,a.termToString)(p)} in a VALUES operator.`)}else{const p=d.variables.filter(g=>!o.has(g)),h=d.bindings.map(g=>{const v={...g};let m=!0;return o.forEach((T,w)=>{const E=(0,a.termToString)(w);E in v&&(T.equals(v[E])||(m=!1),delete v[E])}),m?v:void 0}).filter(Boolean);return{recurse:!0,result:f.createValues(p,h)}}return{recurse:!1,result:d}},expression(d,f){if(!c.bindFilter)return{recurse:!1,result:d};if(d.expressionType==="term")return{recurse:!1,result:f.createTermExpression(n(d.term,o))};if(d.expressionType==="operator")return d.operator==="bound"&&d.args.length===1&&d.args[0].expressionType==="term"&&[...o.keys()].some(p=>d.args[0].term.equals(p))?{recurse:!1,result:f.createTermExpression(f.dataFactory.literal("true",f.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")))}:{recurse:!0,result:d};if(d.expressionType==="aggregate"&&"variable"in d&&o.has(d.variable)){if(c.strictTargetVariables)throw new Error(`Tried to bind ${(0,a.termToString)(d.variable)} in a ${d.aggregator} aggregate.`);return{recurse:!0,result:d}}return{recurse:!0,result:d}}},l)}Zd.materializeOperation=r;function t(i,o,l){const s=[];for(const[c,d]of o)if(!l||l.some(f=>f.equals(c))){const f={[(0,a.termToString)(c)]:d};s.push(i.createValues([c],[f]))}return s}return Zd}var JW;function Zt(){return JW||(JW=1,(function(a){var e=Yd&&Yd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Yd&&Yd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(N4e(),a),u(I4e(),a),u(D4e(),a),u(F4e(),a),u(P4e(),a)})(Yd)),Yd}var WW;function j4e(){if(WW)return a2;WW=1,Object.defineProperty(a2,"__esModule",{value:!0}),a2.ActorOptimizeQueryOperationGroupSources=void 0;const a=Vi(),e=lt(),u=De(),n=Zt(),r=Ut();let t=class extends a.ActorOptimizeQueryOperation{constructor(o){super(o)}async test(o){return(0,n.getOperationSource)(o.operation)?(0,u.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,u.passTestVoid)()}async run(o){return{operation:await this.groupOperation(o.operation,o.context),context:o.context}}async groupOperation(o,l){const s=l.getSafe(e.KeysInitQuery.dataFactory),c=new r.Factory(s);if((0,n.getOperationSource)(o)??!("input"in o))return o;if(!Array.isArray(o.input)){const h=await this.groupOperation(o.input,l);if(h.metadata?.scopedSource){const g=(0,n.getOperationSource)(h);o=await this.moveSourceAnnotationUpwardsIfPossible(o,[h],g,l)}return{...o,input:h}}const d=await Promise.all(o.input.map(h=>this.groupOperation(h,l))),f=this.clusterOperationsWithEqualSources(d);if(f.length===1){const h=f[0],g=(0,n.getOperationSource)(f[0][0]);return{...await this.moveSourceAnnotationUpwardsIfPossible(o,h,g,l),input:h}}if(f.length===d.length)return{...o,input:d};let p;switch(o.type){case r.Algebra.types.JOIN:p=c.createJoin.bind(c);break;case r.Algebra.types.UNION:p=c.createUnion.bind(c);break;case r.Algebra.types.ALT:p=c.createAlt.bind(c);break;case r.Algebra.types.SEQ:p=c.createSeq.bind(c);break;default:throw new Error(`Unsupported operation '${o.type}' detected while grouping sources`)}return await this.groupOperationMulti(f,p,l)}async groupOperationMulti(o,l,s){let c=!0;const d=await Promise.all(o.map(async f=>{const p=(0,n.getOperationSource)(f[0]),h=await this.moveSourceAnnotationUpwardsIfPossible(l(f,!0),f,p,s);return(0,n.getOperationSource)(h)&&(c=!1),h}));return l(d,c)}clusterOperationsWithEqualSources(o){const l=new Map,s=[];for(const d of o){const f=(0,n.getOperationSource)(d);f?(l.has(f)||l.set(f,[]),l.get(f).push(d)):s.push(d)}const c=[];s.length>0&&c.push(s);for(const[d,f]of l.entries())c.push(f.map(p=>(0,n.assignOperationSource)(p,d)));return c}async moveSourceAnnotationUpwardsIfPossible(o,l,s,c){if(s&&this.isPossibleToMoveSourceAnnotationUpwards(o,await s.source.getSelectorShape(c),c)){this.logDebug(c,`Hoist ${l.length} source-specific operations into a single ${o.type} operation for ${s.source.toString()}`),o=(0,n.assignOperationSource)(o,s);for(const d of l)(0,n.removeOperationSource)(d)}return o}isPossibleToMoveSourceAnnotationUpwards(o,l,s){const c=s.get(e.KeysInitQuery.extensionFunctionsAlwaysPushdown);if((0,n.doesShapeAcceptOperation)(l,o,{wildcardAcceptAllExtensionFunctions:c})){const d=s.get(e.KeysInitQuery.extensionFunctions),f=o.expression;return!d||f?.expressionType!==r.Algebra.expressionTypes.NAMED||!(f?.name.value in d)||(0,n.doesShapeAcceptOperation)(l,f,{wildcardAcceptAllExtensionFunctions:c})}return!1}};return a2.ActorOptimizeQueryOperationGroupSources=t,a2}var YW;function Wq(){return YW||(YW=1,(function(a){var e=Wd&&Wd.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Wd&&Wd.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(j4e(),a)})(Wd)),Wd}var ef={},o2={},ZW;function M4e(){if(ZW)return o2;ZW=1,Object.defineProperty(o2,"__esModule",{value:!0}),o2.ActorOptimizeQueryOperationConstructDistinct=void 0;const a=Vi(),e=R_e(),u=De(),n=Ut();let r=class extends a.ActorOptimizeQueryOperation{constructor(i){super(i)}async test(i){return i.context.has(e.KeysInitQuery.distinctConstruct)?(0,u.passTestVoid)():(0,u.failTest)(`${this.name} was not enabled by the query.`)}async run(i){return{operation:n.Util.mapOperation(i.operation,{construct(l,s){return{recurse:!1,result:s.createDistinct(s.createConstruct(l.input,l.template))}}}),context:i.context.delete(e.KeysInitQuery.distinctConstruct)}}};return o2.ActorOptimizeQueryOperationConstructDistinct=r,o2}var eY;function Yq(){return eY||(eY=1,(function(a){var e=ef&&ef.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ef&&ef.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(M4e(),a)})(ef)),ef}var tf={},s2={},rf={},c2={},tY;function C4e(){if(tY)return c2;tY=1,Object.defineProperty(c2,"__esModule",{value:!0}),c2.ActorQueryParse=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return c2.ActorQueryParse=e,c2}var rY;function s2e(){return rY||(rY=1,(function(a){var e=rf&&rf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=rf&&rf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(C4e(),a)})(rf)),rf}var nY;function L4e(){if(nY)return s2;nY=1,Object.defineProperty(s2,"__esModule",{value:!0}),s2.ActorQueryParseSparql=void 0;const a=s2e(),e=lt(),u=De(),n=Ut(),r=$n();let t=class extends a.ActorQueryParse{constructor(o){super(o),this.prefixes=Object.freeze(this.prefixes)}async test(o){return o.queryFormat&&o.queryFormat.language!=="sparql"?(0,u.failTest)("This actor can only parse SPARQL queries"):(0,u.passTestVoid)()}async run(o){const l=o.context.getSafe(e.KeysInitQuery.dataFactory),c=new r.Parser({prefixes:this.prefixes,baseIRI:o.baseIRI,sparqlStar:!0,factory:l}).parse(o.query);return{baseIRI:c.type==="query"?c.base:void 0,operation:(0,n.translate)(c,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:o.baseIRI,dataFactory:l})}}};return s2.ActorQueryParseSparql=t,s2}var aY;function Zq(){return aY||(aY=1,(function(a){var e=tf&&tf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=tf&&tf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(L4e(),a)})(tf)),tf}var nf={},l2={},af={},uf={},of={},d2={},iY;function T1(){if(iY)return d2;iY=1,Object.defineProperty(d2,"__esModule",{value:!0}),d2.DirectiveNodeHandlerAdapter=void 0;let a=class{constructor(u,n,r){this.targetKind=u,this.util=n,this.settings=r}getDirectiveConditionalValue(u,n){const r=this.util.getArgument(u.arguments,"if");if(!r)throw new Error(`The directive ${u.name.value} is missing an if-argument.`);const t=this.util.handleNodeValue(r.value,r.name.value,n);if(t.terms.length!==1)throw new Error(`Can not apply the directive ${u.name.value} with a list.`);return t.terms[0]}isDirectiveScopeAll(u){const n=this.util.getArgument(u.arguments,"scope");return n&&n.value.kind==="EnumValue"&&n.value.value==="all"}};return d2.DirectiveNodeHandlerAdapter=a,d2}var f2={},uY;function q4e(){if(uY)return f2;uY=1,Object.defineProperty(f2,"__esModule",{value:!0}),f2.DirectiveNodeHandlerInclude=void 0;const a=T1();let e=class extends a.DirectiveNodeHandlerAdapter{constructor(n,r){super("include",n,r)}handle(n,r){const t=this.getDirectiveConditionalValue(n.directive,r);return t.termType==="Literal"&&t.value==="false"?{ignore:!0}:{}}};return f2.DirectiveNodeHandlerInclude=e,f2}var p2={},oY;function B4e(){if(oY)return p2;oY=1,Object.defineProperty(p2,"__esModule",{value:!0}),p2.DirectiveNodeHandlerOptional=void 0;const a=T1();let e=class extends a.DirectiveNodeHandlerAdapter{constructor(n,r){super("optional",n,r)}handle(n,r){return{operationOverrider:t=>this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),t)}}};return p2.DirectiveNodeHandlerOptional=e,p2}var h2={},eM={},sY;function G4(){return sY||(sY=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.SingularizeState=void 0,(function(e){e[e.SINGLE=0]="SINGLE",e[e.PLURAL=1]="PLURAL"})(a.SingularizeState||(a.SingularizeState={}))})(eM)),eM}var cY;function U4e(){if(cY)return h2;cY=1,Object.defineProperty(h2,"__esModule",{value:!0}),h2.DirectiveNodeHandlerPlural=void 0;const a=G4(),e=T1();let u=class extends e.DirectiveNodeHandlerAdapter{constructor(r,t){super("plural",r,t)}handle(r,t){return this.isDirectiveScopeAll(r.directive)&&(t.singularizeState=a.SingularizeState.PLURAL),delete t.singularizeVariables[this.util.nameToVariable(r.fieldLabel,t).value],{}}};return h2.DirectiveNodeHandlerPlural=u,h2}var y2={},lY;function Q4e(){if(lY)return y2;lY=1,Object.defineProperty(y2,"__esModule",{value:!0}),y2.DirectiveNodeHandlerSingle=void 0;const a=G4(),e=T1();let u=class extends e.DirectiveNodeHandlerAdapter{constructor(r,t){super("single",r,t)}handle(r,t){return this.isDirectiveScopeAll(r.directive)&&(t.singularizeState=a.SingularizeState.SINGLE),t.singularizeVariables[this.util.nameToVariable(r.fieldLabel,t).value]=!0,{}}};return y2.DirectiveNodeHandlerSingle=u,y2}var m2={},dY;function V4e(){if(dY)return m2;dY=1,Object.defineProperty(m2,"__esModule",{value:!0}),m2.DirectiveNodeHandlerSkip=void 0;const a=T1();let e=class extends a.DirectiveNodeHandlerAdapter{constructor(n,r){super("skip",n,r)}handle(n,r){const t=this.getDirectiveConditionalValue(n.directive,r);return t.termType==="Literal"&&t.value==="true"?{ignore:!0}:{}}};return m2.DirectiveNodeHandlerSkip=e,m2}var fY;function c2e(){return fY||(fY=1,(function(a){var e=of&&of.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=of&&of.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(T1(),a),u(q4e(),a),u(B4e(),a),u(U4e(),a),u(Q4e(),a),u(V4e(),a)})(of)),of}var sf={},b2={},pY;function Go(){if(pY)return b2;pY=1,Object.defineProperty(b2,"__esModule",{value:!0}),b2.NodeValueHandlerAdapter=void 0;let a=class{constructor(u,n,r){this.targetKind=u,this.util=n,this.settings=r}};return b2.NodeValueHandlerAdapter=a,b2}var g2={},hY;function H4e(){if(hY)return g2;hY=1,Object.defineProperty(g2,"__esModule",{value:!0}),g2.NodeValueHandlerBoolean=void 0;const a=Go();let e=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("BooleanValue",n,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#boolean")}handle(n,r,t){return{terms:[this.util.dataFactory.literal(n.value?"true":"false",this.datatype)]}}};return g2.NodeValueHandlerBoolean=e,g2}var v2={},yY;function k4e(){if(yY)return v2;yY=1,Object.defineProperty(v2,"__esModule",{value:!0}),v2.NodeValueHandlerEnum=void 0;const a=Go();let e=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("EnumValue",n,r)}handle(n,r,t){return{terms:[this.util.valueToNamedNode(n.value,t.context)]}}};return v2.NodeValueHandlerEnum=e,v2}var _2={},mY;function z4e(){if(mY)return _2;mY=1,Object.defineProperty(_2,"__esModule",{value:!0}),_2.NodeValueHandlerFloat=void 0;const a=Go();let e=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("FloatValue",n,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#float")}handle(n,r,t){return{terms:[this.util.dataFactory.literal(n.value,this.datatype)]}}};return _2.NodeValueHandlerFloat=e,_2}var T2={},bY;function G4e(){if(bY)return T2;bY=1,Object.defineProperty(T2,"__esModule",{value:!0}),T2.NodeValueHandlerInt=void 0;const a=Go();let e=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("IntValue",n,r),this.datatype=this.util.dataFactory.namedNode("http://www.w3.org/2001/XMLSchema#integer")}handle(n,r,t){return{terms:[this.util.dataFactory.literal(n.value,this.datatype)]}}};return T2.NodeValueHandlerInt=e,T2}var w2={},gY;function $4e(){if(gY)return w2;gY=1,Object.defineProperty(w2,"__esModule",{value:!0}),w2.NodeValueHandlerList=void 0;const a=Go();let e=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("ListValue",n,r),this.nodeFirst=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),this.nodeRest=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),this.nodeNil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(n,r,t){const i=[];let o=[];for(const l of n.values){const s=this.util.handleNodeValue(l,r,t);for(const c of s.terms)i.push(c);s.auxiliaryPatterns&&(o=o.concat(s.auxiliaryPatterns))}if(this.settings.arraysToRdfLists){const l=this.util.dataFactory.blankNode();let s=l,c=i.length;for(const d of i){o.push(this.util.operationFactory.createPattern(s,this.nodeFirst,d,t.graph));const f=--c===0?this.nodeNil:this.util.dataFactory.blankNode();o.push(this.util.operationFactory.createPattern(s,this.nodeRest,f,t.graph)),s=f}return{terms:[l],auxiliaryPatterns:o}}else return{terms:i,auxiliaryPatterns:o}}};return w2.NodeValueHandlerList=e,w2}var S2={},vY;function X4e(){if(vY)return S2;vY=1,Object.defineProperty(S2,"__esModule",{value:!0}),S2.NodeValueHandlerNull=void 0;const a=Go();let e=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("NullValue",n,r),this.nil=this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil")}handle(n,r,t){return{terms:[this.nil]}}};return S2.NodeValueHandlerNull=e,S2}var E2={},_Y;function K4e(){if(_Y)return E2;_Y=1,Object.defineProperty(E2,"__esModule",{value:!0}),E2.NodeValueHandlerObject=void 0;const a=Go();let e=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("ObjectValue",n,r)}handle(n,r,t){const i=this.util.dataFactory.blankNode();let o=[];for(const l of n.fields){const s=this.util.handleNodeValue(l.value,r,t);for(const c of s.terms)o.push(this.util.createQuadPattern(i,l.name,c,t.graph,t.context));s.auxiliaryPatterns&&(o=o.concat(s.auxiliaryPatterns))}return{terms:[i],auxiliaryPatterns:o}}};return E2.NodeValueHandlerObject=e,E2}var A2={},TY;function J4e(){if(TY)return A2;TY=1,Object.defineProperty(A2,"__esModule",{value:!0}),A2.NodeValueHandlerString=void 0;const a=Go();let e=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("StringValue",n,r)}handle(n,r,t){const i=t.context.getContextRaw()[r];let o,l;return i&&typeof i!="string"&&(i["@language"]?o=i["@language"]:i["@type"]&&(l=this.util.dataFactory.namedNode(i["@type"]))),{terms:[this.util.dataFactory.literal(n.value,o||l)]}}};return A2.NodeValueHandlerString=e,A2}var O2={},wY;function W4e(){if(wY)return O2;wY=1,Object.defineProperty(O2,"__esModule",{value:!0}),O2.NodeValueHandlerVariable=void 0;const a=Go();let e=class extends a.NodeValueHandlerAdapter{constructor(n,r){super("Variable",n,r)}handle(n,r,t){const i=n.name.value,o=t.variablesDict[i],l=t.variablesMetaDict[i];if(!o){if(!t.ignoreUnknownVariables&&(!l||l.mandatory))throw new Error(`Undefined variable: ${i}`);{const s=this.util.dataFactory.variable(i);return t.terminalVariables.map(c=>c.value).indexOf(i)<0&&t.terminalVariables.push(s),{terms:[s]}}}if(o.kind==="Variable")throw new Error(`Variable refers to another variable: ${i}`);if(l)if(l.list){if(o.kind!=="ListValue")throw new Error(`Expected a list, but got ${o.kind} for ${i}`);if(l.type){const s=o;for(const c of s.values)if(c.kind!==l.type)throw new Error(`Expected ${l.type}, but got ${c.kind} for ${i}`)}}else l.type;return this.util.handleNodeValue(o,r,t)}};return O2.NodeValueHandlerVariable=e,O2}var SY;function Y4e(){return SY||(SY=1,(function(a){var e=sf&&sf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=sf&&sf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Go(),a),u(H4e(),a),u(k4e(),a),u(z4e(),a),u(G4e(),a),u($4e(),a),u(X4e(),a),u(K4e(),a),u(J4e(),a),u(W4e(),a)})(sf)),sf}var x2={},EY;function oP(){if(EY)return x2;EY=1,Object.defineProperty(x2,"__esModule",{value:!0}),x2.NodeHandlerAdapter=void 0;let a=class{constructor(u,n,r){this.targetKind=u,this.util=n,this.settings=r}getNodeQuadContextSelectionSet(u,n,r){const t={};if(u){for(const i of u.selections)if(i.kind==="Field"){const o=i;this.handleNodeQuadContextField(o,r,t,"id","subject"),this.handleNodeQuadContextField(o,r,t,"graph","graph")}}return t}handleNodeQuadContextField(u,n,r,t,i){if(!r[i]&&u.name.value===t){if(!r[i]){const o=this.util.getArgument(u.arguments,"_");if(o){const l=this.util.handleNodeValue(o.value,u.name.value,n);if(l.terms.length!==1)throw new Error(`Only single values can be set as ${t}, but got ${l.terms.length} at ${u.name.value}`);r[i]=l.terms[0],l.auxiliaryPatterns&&(r.auxiliaryPatterns||(r.auxiliaryPatterns=[]),r.auxiliaryPatterns.concat(l.auxiliaryPatterns))}}if(!r[i]){const o=this.util.nameToVariable(this.util.getFieldLabel(u),n);n.terminalVariables.push(o),r[i]=o}}}getDirectiveOutputs(u,n,r){const t=[];if(u)for(const i of u){const o=this.util.handleDirectiveNode({directive:i,fieldLabel:n},r);if(o){if(o.ignore)return null;t.push(o)}}return t}handleDirectiveOutputs(u,n){for(const r of u){if(r.ignore)return this.util.operationFactory.createBgp([]);r.operationOverrider&&(n=r.operationOverrider(n))}return n}};return x2.NodeHandlerAdapter=a,x2}var R2={},AY;function eB(){if(AY)return R2;AY=1,Object.defineProperty(R2,"__esModule",{value:!0}),R2.NodeHandlerDefinitionAdapter=void 0;const a=oP();let e=class extends a.NodeHandlerAdapter{constructor(n,r,t){super(n,r,t)}};return R2.NodeHandlerDefinitionAdapter=e,R2}var N2={},OY;function Z4e(){if(OY)return N2;OY=1,Object.defineProperty(N2,"__esModule",{value:!0}),N2.NodeHandlerDefinitionFragment=void 0;const a=eB();let e=class extends a.NodeHandlerDefinitionAdapter{constructor(n,r){super("FragmentDefinition",n,r)}handle(n,r){throw new Error("Illegal state: fragment definitions must be indexed and removed before processing")}};return N2.NodeHandlerDefinitionFragment=e,N2}var I2={},xY;function eNe(){if(xY)return I2;xY=1,Object.defineProperty(I2,"__esModule",{value:!0}),I2.NodeHandlerDefinitionOperation=void 0;const a=eB();let e=class extends a.NodeHandlerDefinitionAdapter{constructor(n,r){super("OperationDefinition",n,r)}handle(n,r){if(n.operation!=="query")throw new Error("Unsupported definition operation: "+n.operation);if(n.variableDefinitions)for(const o of n.variableDefinitions){const l=o.variable.name.value;o.defaultValue&&(r.variablesDict[l]||(r.variablesDict[l]=o.defaultValue));let s=o.type;const c=s.kind==="NonNullType";c&&(s=s.type);const d=s.kind==="ListType";d&&(s=s.type);const f=s.name.value;r.variablesMetaDict[l]={mandatory:c,list:d,type:f}}const t=this.getDirectiveOutputs(n.directives,n.name?n.name.value:"",r);if(!t)return this.util.operationFactory.createBgp([]);const i=this.util.joinOperations(n.selectionSet.selections.map(o=>this.util.handleNode(o,r)));return this.handleDirectiveOutputs(t,i)}};return I2.NodeHandlerDefinitionOperation=e,I2}var D2={},Qu={},du={},tM={},RY;function $4(){return RY||(RY=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.expressionTypes=a.types=void 0,(function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"})(a.types||(a.types={})),(function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"})(a.expressionTypes||(a.expressionTypes={}))})(tM)),tM}var Ro={},NY;function sP(){if(NY)return Ro;NY=1;var a=Ro&&Ro.__createBinding||(Object.create?(function(l,s,c,d){d===void 0&&(d=c);var f=Object.getOwnPropertyDescriptor(s,c);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[c]}}),Object.defineProperty(l,d,f)}):(function(l,s,c,d){d===void 0&&(d=c),l[d]=s[c]})),e=Ro&&Ro.__setModuleDefault||(Object.create?(function(l,s){Object.defineProperty(l,"default",{enumerable:!0,value:s})}):function(l,s){l.default=s}),u=Ro&&Ro.__importStar||function(l){if(l&&l.__esModule)return l;var s={};if(l!=null)for(var c in l)c!=="default"&&Object.prototype.hasOwnProperty.call(l,c)&&a(s,l,c);return e(s,l),s};Object.defineProperty(Ro,"__esModule",{value:!0});const n=u($4()),r=Rr(),t=$t(),i=$n();class o{constructor(s){this.dataFactory=s||new r.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,c=!0){return this.flattenMulti({type:n.types.ALT,input:s},c)}createAsk(s){return{type:n.types.ASK,input:s}}createBoundAggregate(s,c,d,f,p){const h=this.createAggregateExpression(c,d,f,p);return h.variable=s,h}createBgp(s){return{type:n.types.BGP,patterns:s}}createConstruct(s,c){return{type:n.types.CONSTRUCT,input:s,template:c}}createDescribe(s,c){return{type:n.types.DESCRIBE,input:s,terms:c}}createDistinct(s){return{type:n.types.DISTINCT,input:s}}createExtend(s,c,d){return{type:n.types.EXTEND,input:s,variable:c,expression:d}}createFrom(s,c,d){return{type:n.types.FROM,input:s,default:c,named:d}}createFilter(s,c){return{type:n.types.FILTER,input:s,expression:c}}createGraph(s,c){return{type:n.types.GRAPH,input:s,name:c}}createGroup(s,c,d){return{type:n.types.GROUP,input:s,variables:c,aggregates:d}}createInv(s){return{type:n.types.INV,path:s}}createJoin(s,c=!0){return this.flattenMulti({type:n.types.JOIN,input:s},c)}createLeftJoin(s,c,d){return d?{type:n.types.LEFT_JOIN,input:[s,c],expression:d}:{type:n.types.LEFT_JOIN,input:[s,c]}}createLink(s){return{type:n.types.LINK,iri:s}}createMinus(s,c){return{type:n.types.MINUS,input:[s,c]}}createNop(){return{type:n.types.NOP}}createNps(s){return{type:n.types.NPS,iris:s}}createOneOrMorePath(s){return{type:n.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,c){return{type:n.types.ORDER_BY,input:s,expressions:c}}createPath(s,c,d,f){return f?{type:n.types.PATH,subject:s,predicate:c,object:d,graph:f}:{type:n.types.PATH,subject:s,predicate:c,object:d,graph:this.dataFactory.defaultGraph()}}createPattern(s,c,d,f){const p=this.dataFactory.quad(s,c,d,f);return p.type=n.types.PATTERN,p}createProject(s,c){return{type:n.types.PROJECT,input:s,variables:c}}createReduced(s){return{type:n.types.REDUCED,input:s}}createSeq(s,c=!0){return this.flattenMulti({type:n.types.SEQ,input:s},c)}createService(s,c,d){return{type:n.types.SERVICE,input:s,name:c,silent:!!d}}createSlice(s,c,d){return c=c||0,d!==void 0?{type:n.types.SLICE,input:s,start:c,length:d}:{type:n.types.SLICE,input:s,start:c}}createUnion(s,c=!0){return this.flattenMulti({type:n.types.UNION,input:s},c)}createValues(s,c){return{type:n.types.VALUES,variables:s,bindings:c}}createZeroOrMorePath(s){return{type:n.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:n.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,c,d,f){return f?{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,separator:f,distinct:d}:{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,distinct:d}}createExistenceExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.EXISTENCE,not:s,input:c}}createNamedExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.NAMED,name:s,args:c}}createOperatorExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.OPERATOR,operator:s,args:c}}createTermExpression(s){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.WILDCARD,wildcard:new i.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,t.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:n.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,c,d){const f={type:n.types.DELETE_INSERT};return s&&(f.delete=s),c&&(f.insert=c),d&&(f.where=d),f}createLoad(s,c,d){const f={type:n.types.LOAD,source:s};return c&&(f.destination=c),this.addSilent(f,!!d)}createClear(s,c){return this.addSilent({type:n.types.CLEAR,source:s},!!c)}createCreate(s,c){return this.addSilent({type:n.types.CREATE,source:s},!!c)}createDrop(s,c){return this.addSilent({type:n.types.DROP,source:s},!!c)}createAdd(s,c,d){return this.addSilent({type:n.types.ADD,source:s,destination:c},!!d)}createMove(s,c,d){return this.addSilent({type:n.types.MOVE,source:s,destination:c},!!d)}createCopy(s,c,d){return this.addSilent({type:n.types.COPY,source:s,destination:c},!!d)}addSilent(s,c){return c&&(s.silent=c),s}flattenMulti(s,c){if(!c)return s;const d=s.type,f=s.input;let p=[];for(const h of f)h.type===d?p.push(...h.input):p.push(h);return s.input=p,s}}return Ro.default=o,Ro}var pg={},IY;function tB(){if(IY)return pg;IY=1;var a=pg&&pg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(pg,"__esModule",{value:!0});const e=$4(),u=a(sP()),n=Yr();class r{static flatten(i){return Array.prototype.concat(...i).filter(o=>o)}static objectify(i){if(i.termType){if(i.termType==="Quad")return{type:"pattern",termType:"Quad",subject:r.objectify(i.subject),predicate:r.objectify(i.predicate),object:r.objectify(i.object),graph:r.objectify(i.graph)};{let o={termType:i.termType,value:i.value};return i.language&&(o.language=i.language),i.datatype&&(o.datatype=r.objectify(i.datatype)),o}}if(Array.isArray(i))return i.map(o=>r.objectify(o));if(i===Object(i)){let o={};for(let l of Object.keys(i))o[l]=r.objectify(i[l]);return o}return i}static inScopeVariables(i){const o=[];function l(c){o.find(d=>c.value===d.value)||o.push(c)}function s(c){c.subject.termType==="Variable"&&l(c.subject),c.predicate.termType==="Variable"&&l(c.predicate),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.predicate.termType==="Quad"&&s(c.predicate),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph)}return r.recurseOperation(i,{[e.types.EXPRESSION]:c=>(c.expressionType===e.expressionTypes.AGGREGATE&&c.variable&&l(c.variable),!0),[e.types.EXTEND]:c=>(l(c.variable),!0),[e.types.GRAPH]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.GROUP]:c=>(c.variables.forEach(l),!0),[e.types.PATH]:c=>(c.subject.termType==="Variable"&&l(c.subject),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph),!0),[e.types.PATTERN]:c=>(s(c),!0),[e.types.PROJECT]:c=>(c.variables.forEach(l),!1),[e.types.SERVICE]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.VALUES]:c=>(c.variables.forEach(l),!0)}),o}static recurseOperation(i,o){let l=i,s=!0;const c=o[i.type];if(c&&(s=c(i)),!s)return;let d=f=>r.recurseOperation(f,o);switch(l.type){case e.types.ALT:l.input.map(d);break;case e.types.ASK:d(l.input);break;case e.types.BGP:l.patterns.forEach(d);break;case e.types.CONSTRUCT:d(l.input),l.template.map(d);break;case e.types.DESCRIBE:d(l.input);break;case e.types.DISTINCT:d(l.input);break;case e.types.EXPRESSION:l.expressionType===e.expressionTypes.EXISTENCE&&d(l.input);break;case e.types.EXTEND:d(l.input),d(l.expression);break;case e.types.FILTER:d(l.input),d(l.expression);break;case e.types.FROM:d(l.input);break;case e.types.GRAPH:d(l.input);break;case e.types.GROUP:d(l.input),l.aggregates.forEach(d);break;case e.types.INV:d(l.path);break;case e.types.JOIN:l.input.map(d);break;case e.types.LEFT_JOIN:l.input.map(d),l.expression&&d(l.expression);break;case e.types.LINK:break;case e.types.MINUS:l.input.map(d);break;case e.types.NOP:break;case e.types.NPS:break;case e.types.ONE_OR_MORE_PATH:d(l.path);break;case e.types.ORDER_BY:d(l.input),l.expressions.forEach(d);break;case e.types.PATH:d(l.predicate);break;case e.types.PATTERN:break;case e.types.PROJECT:d(l.input);break;case e.types.REDUCED:d(l.input);break;case e.types.SEQ:l.input.map(d);break;case e.types.SERVICE:d(l.input);break;case e.types.SLICE:d(l.input);break;case e.types.UNION:l.input.map(d);break;case e.types.VALUES:break;case e.types.ZERO_OR_MORE_PATH:d(l.path);break;case e.types.ZERO_OR_ONE_PATH:d(l.path);break;case e.types.COMPOSITE_UPDATE:l.updates.forEach(f=>d(f));break;case e.types.DELETE_INSERT:l.delete&&l.delete.forEach(f=>d(f)),l.insert&&l.insert.forEach(f=>d(f)),l.where&&d(l.where);break;case e.types.LOAD:break;case e.types.CLEAR:break;case e.types.CREATE:break;case e.types.DROP:break;case e.types.ADD:break;case e.types.MOVE:break;case e.types.COPY:break;default:throw new Error(`Unknown Operation type ${l.type}`)}}static mapOperation(i,o,l){let s=i,c=!0,d=!0;l=l||new u.default;const f=o[i.type];if(f){const g=f(i,l);s=g.result,c=g.recurse,d=g.copyMetadata!==!1}let p;if(d&&(s.metadata||i.metadata)&&(p={...s.metadata,...i.metadata}),!c)return p&&(s.metadata=p),s;let h=g=>r.mapOperation(g,o,l);switch(s.type){case e.types.ALT:s=l.createAlt(s.input.map(h));break;case e.types.ASK:s=l.createAsk(h(s.input));break;case e.types.BGP:s=l.createBgp(s.patterns.map(h));break;case e.types.CONSTRUCT:s=l.createConstruct(h(s.input),s.template.map(h));break;case e.types.DESCRIBE:s=l.createDescribe(h(s.input),s.terms);break;case e.types.DISTINCT:s=l.createDistinct(h(s.input));break;case e.types.EXPRESSION:s=r.mapExpression(s,o,l);break;case e.types.EXTEND:s=l.createExtend(h(s.input),s.variable,h(s.expression));break;case e.types.FILTER:s=l.createFilter(h(s.input),h(s.expression));break;case e.types.FROM:s=l.createFrom(h(s.input),[...s.default],[...s.named]);break;case e.types.GRAPH:s=l.createGraph(h(s.input),s.name);break;case e.types.GROUP:s=l.createGroup(h(s.input),[].concat(s.variables),s.aggregates.map(h));break;case e.types.INV:s=l.createInv(h(s.path));break;case e.types.JOIN:s=l.createJoin(s.input.map(h));break;case e.types.LEFT_JOIN:s=l.createLeftJoin(h(s.input[0]),h(s.input[1]),s.expression?h(s.expression):void 0);break;case e.types.LINK:s=l.createLink(s.iri);break;case e.types.MINUS:s=l.createMinus(h(s.input[0]),h(s.input[1]));break;case e.types.NOP:s=l.createNop();break;case e.types.NPS:s=l.createNps([].concat(s.iris));break;case e.types.ONE_OR_MORE_PATH:s=l.createOneOrMorePath(h(s.path));break;case e.types.ORDER_BY:s=l.createOrderBy(h(s.input),s.expressions.map(h));break;case e.types.PATH:s=l.createPath(s.subject,h(s.predicate),s.object,s.graph);break;case e.types.PATTERN:s=l.createPattern(s.subject,s.predicate,s.object,s.graph);break;case e.types.PROJECT:s=l.createProject(h(s.input),[...s.variables]);break;case e.types.REDUCED:s=l.createReduced(h(s.input));break;case e.types.SEQ:s=l.createSeq(s.input.map(h));break;case e.types.SERVICE:s=l.createService(h(s.input),s.name,s.silent);break;case e.types.SLICE:s=l.createSlice(h(s.input),s.start,s.length);break;case e.types.UNION:s=l.createUnion(s.input.map(h));break;case e.types.VALUES:s=l.createValues([].concat(s.variables),s.bindings.map(g=>Object.assign({},g)));break;case e.types.ZERO_OR_MORE_PATH:s=l.createZeroOrMorePath(h(s.path));break;case e.types.ZERO_OR_ONE_PATH:s=l.createZeroOrOnePath(h(s.path));break;case e.types.COMPOSITE_UPDATE:s=l.createCompositeUpdate(s.updates.map(h));break;case e.types.DELETE_INSERT:s=l.createDeleteInsert(s.delete?s.delete.map(h):void 0,s.insert?s.insert.map(h):void 0,s.where?h(s.where):void 0);break;case e.types.LOAD:s=l.createLoad(s.source,s.destination,s.silent);break;case e.types.CLEAR:s=l.createClear(s.source,s.silent);break;case e.types.CREATE:s=l.createCreate(s.source,s.silent);break;case e.types.DROP:s=l.createDrop(s.source,s.silent);break;case e.types.ADD:s=l.createAdd(s.source,s.destination);break;case e.types.MOVE:s=l.createMove(s.source,s.destination);break;case e.types.COPY:s=l.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return p&&(s.metadata=p),s}static mapExpression(i,o,l){let s=i,c=!0;l=l||new u.default;const d=o[i.expressionType];if(d&&({result:s,recurse:c}=d(i,l)),!c)return s;let f=p=>r.mapOperation(p,o,l);switch(i.expressionType){case e.expressionTypes.AGGREGATE:return i.variable?l.createBoundAggregate(i.variable,i.aggregator,f(i.expression),i.distinct,i.separator):l.createAggregateExpression(i.aggregator,f(i.expression),i.distinct,i.separator);case e.expressionTypes.EXISTENCE:return l.createExistenceExpression(i.not,f(i.input));case e.expressionTypes.NAMED:return l.createNamedExpression(i.name,i.args.map(f));case e.expressionTypes.OPERATOR:return l.createOperatorExpression(i.operator,i.args.map(f));case e.expressionTypes.TERM:return l.createTermExpression(i.term);case e.expressionTypes.WILDCARD:return l.createWildcardExpression();default:throw new Error(`Unknown Expression type ${i.expressionType}`)}}static cloneOperation(i){return r.mapOperation(i,{})}static cloneExpression(i){return r.mapExpression(i,{})}static createUniqueVariable(i,o,l){let s=0,c=i;for(;o[c];)c=`${i}${s++}`;return l.variable(c)}static isSimpleTerm(i){return i.termType!==void 0&&i.termType!=="Quad"&&i.termType!=="Wildcard"}static isQuad(i){return i.termType==="Quad"}static hasQuadVariables(i){return(0,n.someTermsNested)(i,o=>o.termType==="Variable")}static isWildcard(i){return i.termType==="Wildcard"}}return pg.default=r,pg}var DY;function tNe(){if(DY)return du;DY=1;var a=du&&du.__createBinding||(Object.create?(function(_,F,D,L){L===void 0&&(L=D);var Q=Object.getOwnPropertyDescriptor(F,D);(!Q||("get"in Q?!F.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return F[D]}}),Object.defineProperty(_,L,Q)}):(function(_,F,D,L){L===void 0&&(L=D),_[L]=F[D]})),e=du&&du.__setModuleDefault||(Object.create?(function(_,F){Object.defineProperty(_,"default",{enumerable:!0,value:F})}):function(_,F){_.default=F}),u=du&&du.__importStar||function(_){if(_&&_.__esModule)return _;var F={};if(_!=null)for(var D in _)D!=="default"&&Object.prototype.hasOwnProperty.call(_,D)&&a(F,_,D);return e(F,_),F},n=du&&du.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(du,"__esModule",{value:!0});const r=v1(),t=$t(),i=u($4()),o=n(sP()),l=n(tB()),s=$n().Parser,c=i.types;let d=new Set,f=0,p=!1,h;function g(_,F){F=F||{},h=new o.default(F.dataFactory);let D;if(m(_)){let L=new s(F);L._resetBlanks(),D=L.parse(_)}else D=_;return v(D,F.quads,F.blankToVariable)}du.default=g;function v(_,F,D){if(d=new Set,f=0,p=!!F,!_.type)return h.createNop();if(_.type!=="query"&&_.type!=="update")throw new Error("Translate only works on complete query or update objects.");let L;if(S(_),_.type==="query"){const Q={type:"group",patterns:_.where||[]};L=j(Q),L=W(_,L)}else _.type==="update"&&(L=pe(_));return D&&(L=ee(L)),L}function m(_){return typeof _=="string"}function T(_){return!!_?.termType}function w(_){return _.subject&&_.predicate&&_.object}function E(_){return _?.termType==="Variable"}function S(_){if(T(_))E(_)&&d.add(`?${_.value}`);else if(Array.isArray(_))for(const F of _)S(F);else if(_&&typeof _=="object")for(let F of Object.keys(_))F.startsWith("?")?d.add(F):F.startsWith("$")&&d.add(`?${F.slice(1)}`),S(_[F])}function N(_){let F={};if(w(_)){const D=[N(_.subject),N(_.predicate),N(_.object),_.graph?N(_.graph):{}];Object.assign(F,...D)}else if(T(_))E(_)&&(F[_.value]=_);else if(_.type==="bgp"){const D=_.triples;Object.assign(F,...D.map(N))}else if(_.type==="path")Object.assign(F,..._.items.map(N));else if(_.type==="group"||_.type==="union"||_.type==="optional")Object.assign(F,..._.patterns.map(N));else if(_.type==="service"||_.type==="graph")Object.assign(F,N(_.name)),Object.assign(F,..._.patterns.map(N));else if(_.type==="bind")Object.assign(F,N(_.variable));else if(_.type==="values"){if(_.values.length>0){const D=Object.keys(_.values[0]).map(L=>h.createTerm(L));Object.assign(F,...D.map(N))}}else if(_.type==="query"&&(_.queryType==="SELECT"||_.queryType==="DESCRIBE")){_.where&&_.variables.some(l.default.isWildcard)&&Object.assign(F,..._.where.map(N));for(const D of _.variables)E(D)?Object.assign(F,N(D)):D.variable&&Object.assign(F,N(D.variable));if(_.queryType==="SELECT"){if(_.group)for(const D of _.group)D.variable&&Object.assign(F,N(D.variable));if(_.values){const D={type:"values",values:_.values};Object.assign(F,N(D))}}}return F}function j(_){if(_.type==="bgp")return O(_);if(_.type==="union")return h.createUnion(_.patterns.map(F=>(F.type!=="group"&&(F={type:"group",patterns:[F]}),j(F))));if(_.type==="graph"){const F={type:"group",patterns:_.patterns};let D=j(F);return p?D=V(D,_.name):D=h.createGraph(D,_.name),D}if(_.type==="values")return ae(_);if(_.type==="query")return v(_,p,!1);if(_.type==="group"){let F=[],D=[];for(let Y of _.patterns)(Y.type==="filter"?F:D).push(Y);let L=D.reduce(G,h.createBgp([])),Q=F.map(Y=>q(Y.expression));return Q.length>0&&(L=h.createFilter(L,Q.reduce((Y,$)=>h.createOperatorExpression("&&",[Y,$])))),L}throw new Error(`Unexpected type: ${_.type}`)}function q(_){if(l.default.isSimpleTerm(_))return h.createTermExpression(_);if(l.default.isQuad(_))return l.default.hasQuadVariables(_)?h.createOperatorExpression("triple",[q(_.subject),q(_.predicate),q(_.object)]):h.createTermExpression(_);if(l.default.isWildcard(_))return h.createWildcardExpression();if("aggregation"in _)return h.createAggregateExpression(_.aggregation,q(_.expression),!!_.distinct,_.separator);if("function"in _)return h.createNamedExpression(_.function,_.args.map(q));if("operator"in _)return _.operator==="exists"||_.operator==="notexists"?h.createExistenceExpression(_.operator==="notexists",j(_.args[0])):((_.operator==="in"||_.operator==="notin")&&(_.args=[_.args[0]].concat(_.args[1])),h.createOperatorExpression(_.operator,_.args.map(q)));throw new Error(`Unknown expression: ${JSON.stringify(_)}`)}function O(_){let F=[],D=[];for(let L of _.triples)if("pathType"in L.predicate){let Q=I(L);for(let Y of Q)Y.type===c.PATH?(F.length>0&&D.push(h.createBgp(F)),F=[],D.push(Y)):F.push(Y)}else F.push(B(L));return F.length>0&&D.push(h.createBgp(F)),D.length===1?D[0]:h.createJoin(D)}function I(_){let F=_.subject,D=A(_.predicate),L=_.object;return P(F,D,L)}function A(_){if(l.default.isSimpleTerm(_)){if(_.termType==="NamedNode")return h.createLink(_);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(_)}`)}if(_.pathType==="^")return h.createInv(A(_.items[0]));if(_.pathType==="!"){let F=[],D=[],L;"pathType"in _.items[0]&&_.items[0].pathType==="|"?L=_.items[0].items:L=_.items;for(let $ of L)if(l.default.isSimpleTerm($))F.push($);else if($.pathType==="^")D.push($.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify($)}`);let Q=h.createNps(F),Y=h.createInv(h.createNps(D));return D.length===0?Q:F.length===0?Y:h.createAlt([Q,Y])}if(_.pathType==="/")return h.createSeq(_.items.map(A));if(_.pathType==="|")return h.createAlt(_.items.map(A));if(_.pathType==="*")return h.createZeroOrMorePath(A(_.items[0]));if(_.pathType==="+")return h.createOneOrMorePath(A(_.items[0]));if(_.pathType==="?")return h.createZeroOrOnePath(A(_.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(_)}`)}function P(_,F,D){if(F.type===c.LINK)return[h.createPattern(_,F.iri,D)];if(F.type===c.INV)return P(D,F.path,_);if(F.type===c.SEQ){let L=_;return l.default.flatten(F.input.map((Q,Y)=>{const $=Y===F.input.length-1?D:C(),ue=P(L,Q,$);return $.termType==="Variable"&&(L=$),ue}))}return[h.createPath(_,F,D)]}function C(){let _=`?var${f++}`;return d.has(_)?C():(d.add(_),h.createTerm(_))}function B(_){if("pathType"in _.predicate)throw new Error("Trying to translate property path to quad.");return h.createPattern(_.subject,_.predicate,_.object,_.graph)}let H=Object.values(c);function V(_,F,D){if(_.type===c.GRAPH){if(D)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");_=V(_.input,_.name)}else if(_.type!==c.SERVICE)if(_.type===c.BGP)_.patterns=_.patterns.map(L=>(D&&(L.subject.equals(F)&&(L.subject=D),L.predicate.equals(F)&&(L.predicate=D),L.object.equals(F)&&(L.object=D)),L.graph.termType==="DefaultGraph"&&(L.graph=F),L));else if(_.type===c.PATH)D&&(_.subject.equals(F)&&(_.subject=D),_.object.equals(F)&&(_.object=D)),_.graph.termType==="DefaultGraph"&&(_.graph=F);else if(_.type===c.PROJECT&&!D)_.variables.some(L=>L.equals(F))||(D=C()),_.input=V(_.input,F,D);else if(_.type===c.EXTEND&&!D)_.variable.equals(F)&&(D=C()),_.input=V(_.input,F,D);else for(let L of Object.keys(_))Array.isArray(_[L])?_[L]=_[L].map(Q=>V(Q,F,D)):H.indexOf(_[L].type)>=0?_[L]=V(_[L],F,D):D&&E(_[L])&&_[L].equals(F)&&(_[L]=D);return _}function G(_,F){if(F.type==="optional"){const D=j({type:"group",patterns:F.patterns});D.type===c.FILTER?_=h.createLeftJoin(_,D.input,D.expression):_=h.createLeftJoin(_,D)}else if(F.type==="minus"){const D=j({type:"group",patterns:F.patterns});_=h.createMinus(_,D)}else if(F.type==="bind")_=h.createExtend(_,F.variable,q(F.expression));else if(F.type==="service"){const D={type:"group",patterns:F.patterns},L=h.createService(j(D),F.name,F.silent);_=Z(_,L)}else{const D=j(F);_=Z(_,D)}return _}function Z(_,F){return _.type===c.BGP&&F.type===c.BGP?_=h.createBgp([..._.patterns,...F.patterns]):_.type===c.BGP&&_.patterns.length===0?_=F:F.type===c.BGP&&F.patterns.length===0||(_=h.createJoin([_,F])),_}function ae(_){let F=(_.values.length===0?[]:Object.keys(_.values[0])).map(h.createTerm.bind(h)),D=_.values.map(L=>{let Q=Object.keys(L);Q=Q.filter($=>L[$]!==void 0);let Y={};for(let $ of Q)Y[$]=L[$];return Y});return h.createValues(F,D)}function W(_,F){const D=_,L=[],Q={};if(D.variables=D.variables&&D.variables.map($=>te($,Q)),D.having=D.having&&D.having.map($=>te($,Q)),D.order=D.order&&D.order.map($=>te($,Q)),D.group||Object.keys(Q).length>0){const $=Object.keys(Q).map(ne=>se(Q[ne],h.createTerm(ne))),ue=[];if(D.group)for(const ne of D.group)if(l.default.isSimpleTerm(ne.expression))ue.push(ne.expression);else{const ce="variable"in ne?ne.variable:C();F=h.createExtend(F,ce,q(ne.expression)),ue.push(ce)}F=h.createGroup(F,ue,$)}if(D.having)for(let $ of D.having)F=h.createFilter(F,q($));_.values&&(F=h.createJoin([F,ae(_)]));let Y=[];if(_.queryType==="SELECT"||_.queryType==="DESCRIBE")if(_.variables.some($=>$&&l.default.isWildcard($)))Y=Object.values(N(_)).sort(($,ue)=>$.value.localeCompare(ue.value));else for(let $ of _.variables)E($)||!("variable"in $)?Y.push($):$.variable&&(Y.push($.variable),L.push($));for(let $ of L)F=h.createExtend(F,$.variable,q($.expression));return D.order&&(F=h.createOrderBy(F,D.order.map($=>{let ue=q($.expression);return $.descending&&(ue=h.createOperatorExpression("desc",[ue])),ue}))),_.queryType==="SELECT"&&(F=h.createProject(F,Y)),D.distinct&&(F=h.createDistinct(F)),D.reduced&&(F=h.createReduced(F)),_.queryType==="CONSTRUCT"?F=h.createConstruct(F,(_.template||[]).map(B)):_.queryType==="ASK"?F=h.createAsk(F):_.queryType==="DESCRIBE"&&(F=h.createDescribe(F,Y)),(D.offset||D.limit)&&(F=h.createSlice(F,D.offset||0,D.limit)),D.from&&(F=h.createFrom(F,D.from.default,D.from.named)),F}function te(_,F){if("type"in _&&_.type==="aggregate"){let D=!1,L;for(let Q of Object.keys(F))if(r(F[Q],_)){L=h.createTerm(Q),D=!0;break}return D||(L=C(),F[(0,t.termToString)(L)]=_),L}return"expression"in _&&_.expression?{..._,expression:te(_.expression,F)}:"args"in _&&_.args?{..._,args:_.args.map(D=>te(D,F))}:_}function se(_,F){if(_.type!=="aggregate"||!_.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(_)}`);const D=q(_);return D.variable=F,D}function pe(_){return _.updates.length===1?le(_.updates[0]):h.createCompositeUpdate(_.updates.map(le))}function le(_){if("type"in _){if(_.type==="load")return Ae(_);if(_.type==="clear"||_.type==="create"||_.type==="drop")return Ie(_);if(_.type==="add"||_.type==="copy"||_.type==="move")return be(_)}else if(_.updateType==="insertdelete"||_.updateType==="deletewhere"||_.updateType==="delete"||_.updateType==="insert")return Ee(_);throw new Error(`Unknown update type ${JSON.stringify(_)}`)}function Ee(_){if(!p)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let F=[],D=[],L;if(_.delete&&(F=l.default.flatten(_.delete.map(Q=>Oe(Q,_.graph)))),_.insert&&(D=l.default.flatten(_.insert.map(Q=>Oe(Q,_.graph)))),_.where&&_.where.length>0){L=j({type:"group",patterns:_.where});const Q=_.using;Q?L=h.createFrom(L,Q.default,Q.named):_.graph&&(L=V(L,_.graph))}else _.updateType==="deletewhere"&&F.length>0&&(L=h.createBgp(F));return h.createDeleteInsert(F.length>0?F:void 0,D.length>0?D:void 0,L)}function Oe(_,F){let D=F;_.type==="graph"&&(D=_.name);let L=_.triples;return D&&(L=L.map(Q=>Object.assign(Q,{graph:D}))),L.map(B)}function Ie(_){let F;switch(l.default.isSimpleTerm(_.graph)?F=_.graph:_.graph.all?F="ALL":_.graph.default?F="DEFAULT":_.graph.named?F="NAMED":F=_.graph.name,_.type){case"clear":return h.createClear(F,_.silent);case"create":return h.createCreate(F,_.silent);case"drop":return h.createDrop(F,_.silent)}}function Ae(_){return h.createLoad(_.source,_.destination,_.silent)}function be(_){const F=_.source.default?"DEFAULT":_.source.name,D=_.destination.default?"DEFAULT":_.destination.name;switch(_.type){case"copy":return h.createCopy(F,D,_.silent);case"move":return h.createMove(F,D,_.silent);case"add":return h.createAdd(F,D,_.silent)}}function ee(_){const F={},D=Array.from(d).reduce((Q,Y)=>(Q[Y]=!0,Q),{});return l.default.mapOperation(_,{[i.types.DELETE_INSERT]:Q=>({result:h.createDeleteInsert(Q.delete,Q.insert,Q.where&&ee(Q.where)),recurse:!1}),[i.types.PATH]:(Q,Y)=>({result:Y.createPath(L(Q.subject),Q.predicate,L(Q.object),L(Q.graph)),recurse:!1}),[i.types.PATTERN]:(Q,Y)=>({result:Y.createPattern(L(Q.subject),L(Q.predicate),L(Q.object),L(Q.graph)),recurse:!1}),[i.types.CONSTRUCT]:Q=>({result:h.createConstruct(ee(Q.input),Q.template),recurse:!1})});function L(Q){if(Q.termType==="BlankNode"){let Y=F[Q.value];return Y||(Y=l.default.createUniqueVariable(Q.value,D,h.dataFactory),D[Y.value]=!0,F[Q.value]=Y),Y}return Q}}return du}var Ga={},cf={},ar={},FY;function rNe(){if(FY)return ar;FY=1,Object.defineProperty(ar,"__esModule",{value:!0}),ar.isTermGrounded=ar.termToSignature=ar.quadToSignature=ar.sha1hex=ar.hashTerm=ar.hashTerms=ar.getGraphBlankNodes=ar.uniqGraph=ar.deindexGraph=ar.indexGraph=ar.getQuadsWithoutBlankNodes=ar.getQuadsWithBlankNodes=ar.hasValue=ar.hashValues=ar.getBijectionInner=ar.getBijection=ar.isomorphic=void 0;const a=ic(),e=$t(),u=Yr();function n(S,N){return!!r(S,N)}ar.isomorphic=n;function r(S,N){const j=d(c(S)),q=d(c(N));if(Object.keys(j).length!==Object.keys(q).length)return null;for(const C in j)if(j[C]!==q[C])return null;const O=p(s(S)),I=p(s(N)),A=h(S),P=h(N);return t(O,I,A,P)}ar.getBijection=r;function t(S,N,j,q,O,I){O||(O={}),I||(I={});const[A,P]=g(S,j,O),[C,B]=g(N,q,I);if(Object.keys(A).length!==Object.keys(C).length)return null;for(const V in A)if(!l(C,A[V]))return null;let H={};for(const V of j){const G=e.termToString(V),Z=P[G];for(const ae in B)if(B[ae]===Z){H[G]=ae,delete B[ae];break}}if(!i(Object.keys(H).sort(),j.map(e.termToString).sort())||!i(o(H).sort(),q.map(e.termToString).sort())){H=null;for(const V of j){const G=e.termToString(V);if(!A[G])for(const Z of q){const ae=e.termToString(Z);if(!C[ae]&&P[G]===B[ae]){const W=m(G);H=t(S,N,j,q,Object.assign(Object.assign({},A),{[G]:W}),Object.assign(Object.assign({},C),{[ae]:W}))}}}}return H}ar.getBijectionInner=t;function i(S,N){if(S.length!==N.length)return!1;for(let j=S.length;j--;)if(S[j]!==N[j])return!1;return!0}function o(S){const N=[];for(const j in S)N.push(S[j]);return N}ar.hashValues=o;function l(S,N){for(const j in S)if(S[j]===N)return!0;return!1}ar.hasValue=l;function s(S){return S.filter(N=>u.someTerms(N,j=>j.termType==="BlankNode"||j.termType==="Quad"&&u.getTermsNested(j).some(q=>q.termType==="BlankNode")))}ar.getQuadsWithBlankNodes=s;function c(S){return S.filter(N=>u.everyTerms(N,j=>j.termType!=="BlankNode"&&!(j.termType==="Quad"&&u.getTermsNested(j).some(q=>q.termType==="BlankNode"))))}ar.getQuadsWithoutBlankNodes=c;function d(S){const N={};for(const j of S)N[JSON.stringify(e.quadToStringQuad(j))]=!0;return N}ar.indexGraph=d;function f(S){return Object.keys(S).map(N=>e.stringQuadToQuad(JSON.parse(N)))}ar.deindexGraph=f;function p(S){return f(d(S))}ar.uniqGraph=p;function h(S){return u.uniqTerms(S.map(N=>u.getBlankNodes(u.getTermsNested(N))).reduce((N,j)=>N.concat(j),[]))}ar.getGraphBlankNodes=h;function g(S,N,j){const q=Object.assign({},j),O={};let I=!0;for(;I;){const A=Object.keys(q).length;for(const C of N){const B=e.termToString(C);if(!q[B]){const[H,V]=v(C,S,q);H&&(q[B]=V),O[B]=V}}const P={};for(const C in O){const B=O[C];P[B]===void 0?P[B]=C:P[B]=!1}for(const C in P){const B=P[C];B&&(q[B]=C)}I=A!==Object.keys(q).length}return[q,O]}ar.hashTerms=g;function v(S,N,j){const q=[];let O=!0;for(const A of N){const P=u.getTermsNested(A);if(P.some(C=>C.equals(S))){q.push(T(A,j,S));for(const C of P)!E(C,j)&&!C.equals(S)&&(O=!1)}}const I=m(q.sort().join(""));return[O,I]}ar.hashTerm=v;function m(S){return a.sha1().update(S).digest("hex")}ar.sha1hex=m;function T(S,N,j){return u.getTerms(S).map(q=>w(q,N,j)).join("|")}ar.quadToSignature=T;function w(S,N,j){return S.equals(j)?"@self":S.termType==="BlankNode"?N[e.termToString(S)]||"@blank":S.termType==="Quad"?`<${T(S,N,j)}>`:e.termToString(S)}ar.termToSignature=w;function E(S,N){return S.termType!=="BlankNode"&&!(S.termType==="Quad"&&u.getTermsNested(S).some(j=>!E(j,N)))||!!N[e.termToString(S)]}return ar.isTermGrounded=E,ar}var PY;function nNe(){return PY||(PY=1,(function(a){var e=cf&&cf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t),Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[t]}})}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=cf&&cf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(rNe(),a)})(cf)),cf}var jY;function aNe(){if(jY)return Ga;jY=1;var a=Ga&&Ga.__createBinding||(Object.create?(function(R,k,K,de){de===void 0&&(de=K);var ge=Object.getOwnPropertyDescriptor(k,K);(!ge||("get"in ge?!k.__esModule:ge.writable||ge.configurable))&&(ge={enumerable:!0,get:function(){return k[K]}}),Object.defineProperty(R,de,ge)}):(function(R,k,K,de){de===void 0&&(de=K),R[de]=k[K]})),e=Ga&&Ga.__setModuleDefault||(Object.create?(function(R,k){Object.defineProperty(R,"default",{enumerable:!0,value:k})}):function(R,k){R.default=k}),u=Ga&&Ga.__importStar||function(R){if(R&&R.__esModule)return R;var k={};if(R!=null)for(var K in R)K!=="default"&&Object.prototype.hasOwnProperty.call(R,K)&&a(k,R,K);return e(k,R),k},n=Ga&&Ga.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(Ga,"__esModule",{value:!0}),Ga.toSparqlJs=Ga.toSparql=void 0;const r=nNe(),t=$t(),i=$n(),o=u($4()),l=n(sP()),s=n(tB()),c=o.types,d=o.expressionTypes;let f;const p=new l.default;function h(R,k={}){return new i.Generator(k).stringify(g(R))}Ga.toSparql=h;function g(R){v(),R=Le(R);let k=m(R);return k.type==="group"?k.patterns[0]:k}Ga.toSparqlJs=g;function v(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function m(R){switch(R.type!==c.EXTEND&&R.type!==c.ORDER_BY&&R.type!==c.GRAPH&&(f.project=!1),R.type){case c.EXPRESSION:return T(R);case c.ASK:return Ae(R,c.ASK);case c.BGP:return C(R);case c.CONSTRUCT:return B(R);case c.DESCRIBE:return Ae(R,c.DESCRIBE);case c.DISTINCT:return H(R);case c.EXTEND:return V(R);case c.FROM:return G(R);case c.FILTER:return Z(R);case c.GRAPH:return ae(R);case c.GROUP:return W(R);case c.JOIN:return te(R);case c.LEFT_JOIN:return se(R);case c.MINUS:return pe(R);case c.NOP:return{};case c.ORDER_BY:return le(R);case c.PATH:return Ee(R);case c.PATTERN:return Oe(R);case c.PROJECT:return Ae(R,c.PROJECT);case c.REDUCED:return ee(R);case c.SERVICE:return _(R);case c.SLICE:return F(R);case c.UNION:return D(R);case c.VALUES:return L(R);case c.COMPOSITE_UPDATE:return Ce(R);case c.DELETE_INSERT:return Ve(R);case c.LOAD:return Ke(R);case c.CLEAR:return Ye(R);case c.CREATE:return oe(R);case c.DROP:return X(R);case c.ADD:return he(R);case c.MOVE:return ve(R);case c.COPY:return ye(R)}throw new Error(`Unknown Operation type ${R.type}`)}function T(R){switch(R.expressionType){case d.AGGREGATE:return S(R);case d.EXISTENCE:return N(R);case d.NAMED:return j(R);case d.OPERATOR:return q(R);case d.TERM:return O(R);case d.WILDCARD:return I(R)}throw new Error(`Unknown Expression Operation type ${R.expressionType}`)}function w(R){switch(R.type){case c.ALT:return Q(R);case c.INV:return Y(R);case c.LINK:return $(R);case c.NPS:return ue(R);case c.ONE_OR_MORE_PATH:return ne(R);case c.SEQ:return ce(R);case c.ZERO_OR_MORE_PATH:return Se(R);case c.ZERO_OR_ONE_PATH:return xe(R)}throw new Error(`Unknown Path type ${R.type}`)}function E(R){return(0,t.termToString)(R)}function S(R){const k={expression:T(R.expression),type:"aggregate",aggregation:R.aggregator,distinct:R.distinct};return R.separator&&(k.separator=R.separator),k}function N(R){return{type:"operation",operator:R.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([m(R.input)])}]}}function j(R){return{type:"functionCall",function:R.name,args:R.args.map(T)}}function q(R){if(R.operator==="desc"){const K={expression:T(R.args[0])};return K.descending=!0,K}const k={type:"operation",operator:R.operator,args:R.args.map(T)};return(k.operator==="in"||k.operator==="notin")&&(k.args=[k.args[0]].concat([k.args.slice(1)])),k}function O(R){return R.term}function I(R){return R.wildcard}function A(R){return Array.isArray(R)?R.length===1?R[0]:{type:"group",patterns:R}:R}function P(R){return R}function C(R){let k=R.patterns.map(Oe);return k.length===0?null:{type:"bgp",triples:k}}function B(R){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:R.template.map(Oe),where:s.default.flatten([m(R.input)])}}function H(R){let k=m(R.input);return k.patterns[0].distinct=!0,k}function V(R){return f.project?(f.extend.push(R),m(R.input)):s.default.flatten([m(R.input),{type:"bind",variable:R.variable,expression:T(R.expression)}])}function G(R){const k=m(R.input);let K=k;return k.type==="group"&&(K=k.patterns[0]),K.from={default:R.default,named:R.named},k}function Z(R){return{type:"group",patterns:s.default.flatten([m(R.input),{type:"filter",expression:T(R.expression)}])}}function ae(R){return{type:"graph",patterns:s.default.flatten([m(R.input)]),name:R.name}}function W(R){const k=m(R.input),K=R.aggregates.map(P);return f.aggregates.push(...K),f.group.push(...R.variables),k}function te(R){return s.default.flatten(R.input.map(m)).reduce((K,de)=>(de.type!=="bgp"||K.length==0||K[K.length-1].type!=="bgp"?K.push(de):K[K.length-1].triples.push(...de.triples),K),[])}function se(R){const k={type:"optional",patterns:[m(R.input[1])]};return R.expression&&k.patterns.push({type:"filter",expression:T(R.expression)}),k.patterns=s.default.flatten(k.patterns),s.default.flatten([m(R.input[0]),k])}function pe(R){let k=m(R.input[1]);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),s.default.flatten([m(R.input[0]),{type:"minus",patterns:k}])}function le(R){return f.order.push(...R.expressions),m(R.input)}function Ee(R){return{type:"bgp",triples:[{subject:R.subject,predicate:w(R.predicate),object:R.object}]}}function Oe(R){return{subject:R.subject,predicate:R.predicate,object:R.object}}function Ie(R,k){let K=s.default.isSimpleTerm(R)?E(R):R;if(typeof K=="string"){if(k[K])return k[K]}else if(Array.isArray(R))R=R.map(de=>Ie(de,k));else for(let de of Object.keys(R))R[de]=Ie(R[de],k);return R}function Ae(R,k){const K={type:"query",prefixes:{}},de=K;let ge;k===c.PROJECT?(K.queryType="SELECT",ge=R.variables):k===c.ASK?K.queryType="ASK":k===c.DESCRIBE&&(K.queryType="DESCRIBE",ge=R.terms);const Ue=f.extend,je=f.group,ze=f.aggregates,at=f.order;v(),f.project=!0;let fe=s.default.flatten([m(R.input)]);fe.length===1&&fe[0].type==="group"&&(fe=fe[0].patterns),K.where=fe;let Te={};for(let Me of f.aggregates)Te[E(Me.variable)]=T(Me);let qe={};for(let Me=f.extend.length-1;Me>=0;--Me){let st=f.extend[Me];qe[E(st.variable)]=Ie(T(st.expression),Te)}f.group.length>0&&(de.group=f.group.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return{expression:Me}})),f.order.length>0&&(de.order=f.order.map(m).map(Me=>Me.descending?Me:{expression:Me})),ge&&(de.variables=ge.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return Me}),de.variables.length===0&&(de.variables=[new i.Wildcard]));const it=Object.entries(qe);if(it.length>0){de.where=de.where||[];for(const[Me,st]of it)de.where.push({type:"bind",variable:(0,t.stringToTerm)(Me),expression:st})}if(K.where.length>0&&K.where[K.where.length-1].type==="filter"){const Me=K.where[K.where.length-1];be(Me,Object.keys(Te))&&(de.having=s.default.flatten([Ie(Me.expression,Te)]),K.where.splice(-1))}return f.extend=Ue,f.group=je,f.aggregates=ze,f.order=at,{type:"group",patterns:[de]}}function be(R,k){return s.default.isSimpleTerm(R)?k.indexOf(E(R))>=0:Array.isArray(R)?R.some(K=>be(K,k)):R===Object(R)?Object.keys(R).some(K=>be(R[K],k)):k.indexOf(R)>=0}function ee(R){let k=m(R.input);return k.patterns[0].reduced=!0,k}function _(R){let k=m(R.input);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),{type:"service",name:R.name,silent:R.silent,patterns:k}}function F(R){let k=m(R.input),K=k;return k.type&&k.type==="group"&&(K=k.patterns[0]),R.start!==0&&(K.offset=R.start),R.length!==void 0&&(K.limit=R.length),k}function D(R){return{type:"union",patterns:R.input.map(m).map(A)}}function L(R){return{type:"values",values:R.bindings.map(k=>{let K={};for(let de of R.variables){let ge=`?${de.value}`;k[ge]?K[ge]=k[ge]:K[ge]=void 0}return K})}}function Q(R){const k=R.input.map(w);return k.every(K=>"pathType"in K&&K.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(k.map(K=>K.items))}]}:{type:"path",pathType:"|",items:k}}function Y(R){if(R.path.type===c.NPS){const k=R.path.iris.map(K=>({type:"path",pathType:"^",items:[K]}));return k.length<=1?{type:"path",pathType:"!",items:k}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:k}]}}return{type:"path",pathType:"^",items:[w(R.path)]}}function $(R){return R.iri}function ue(R){return R.iris.length<=1?{type:"path",pathType:"!",items:R.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:R.iris}]}}function ne(R){return{type:"path",pathType:"+",items:[w(R.path)]}}function ce(R){return{type:"path",pathType:"/",items:R.input.map(w)}}function Se(R){return{type:"path",pathType:"*",items:[w(R.path)]}}function xe(R){return{type:"path",pathType:"?",items:[w(R.path)]}}function Ce(R){const k=R.updates.map(K=>m(K).updates[0]);return{prefixes:{},type:"update",updates:k}}function Ve(R){var k;let K=R.where,de;if(K&&K.type===c.FROM){let Ue=K;K=Ue.input,de={default:Ue.default,named:Ue.named}}const ge=[{updateType:"insertdelete",delete:Ne(R.delete||[]),insert:Ne(R.insert||[])}];if(de&&(ge[0].using=de),!K||K.type===c.BGP&&K.patterns.length===0)ge[0].where=[];else{const Ue=[];let je=m(Pe(K,Ue));if(je.type==="group"?ge[0].where=je.patterns:ge[0].where=[je],Ue.length>0){if(Ue.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((k=Ue[0])===null||k===void 0?void 0:k.value)!==""&&(ge[0].where=[{type:"graph",patterns:ge[0].where,name:Ue[0]}])}}return!R.delete&&!R.where?(ge[0].updateType="insert",delete ge[0].delete,delete ge[0].where):!R.insert&&!R.where?(delete ge[0].insert,delete ge[0].where,R.delete.some(Ue=>Ue.subject.termType==="Variable"||Ue.predicate.termType==="Variable"||Ue.object.termType==="Variable")?ge[0].updateType="deletewhere":ge[0].updateType="delete"):!R.insert&&R.where&&R.where.type==="bgp"&&(0,r.isomorphic)(R.delete,R.where.patterns)&&(delete ge[0].where,ge[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:ge}}function Ke(R){const k=[{type:"load",silent:!!R.silent,source:R.source}];return R.destination&&(k[0].destination=R.destination),{prefixes:{},type:"update",updates:k}}function Ye(R){return J(R,"clear")}function oe(R){return J(R,"create")}function X(R){return J(R,"drop")}function J(R,k){const K=[{type:k,silent:!!R.silent}];return R.source==="DEFAULT"?K[0].graph={default:!0}:R.source==="NAMED"?K[0].graph={named:!0}:R.source==="ALL"?K[0].graph={all:!0}:K[0].graph={type:"graph",name:R.source},{prefixes:{},type:"update",updates:K}}function he(R){return re(R,"add")}function ve(R){return re(R,"move")}function ye(R){return re(R,"copy")}function re(R,k){const K=[{type:k,silent:!!R.silent}];return K[0].source=R.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.source},K[0].destination=R.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.destination},{prefixes:{},type:"update",updates:K}}function Ne(R){if(!R)return[];const k={};return R.forEach(K=>{const de=K.graph.value;k[de]||(k[de]=[]),k[de].push(K)}),Object.keys(k).map(K=>K===""?{type:"bgp",triples:k[K].map(Oe)}:{type:"graph",triples:k[K].map(Oe),name:k[K][0].graph})}function Le(R){return Pe(R,[])}function Pe(R,k){if(Array.isArray(R))return R.map(je=>Pe(je,k));if(!R.type||R.type===c.DELETE_INSERT)return R;if((R.type===c.PATTERN||R.type===c.PATH)&&R.graph)return k.push(R.graph),R.graph.name!==""?R.type===c.PATTERN?p.createPattern(R.subject,R.predicate,R.object):p.createPath(R.subject,R.predicate,R.object):R;const K={},de={},ge={};for(let je of Object.keys(R)){const ze=[];if(K[je]=Pe(R[je],ze),ze.length>0){de[je]=ze;for(const at of ze)ge[at.value]=at}}const Ue=Object.keys(ge);if(Ue.length>0)if(Ue.length===1&&![c.PROJECT,c.SERVICE].includes(R.type))k.push(ge[Ue[0]]);else{if(R.type===c.BGP)return Fe(R,de.patterns);for(let je of Object.keys(de)){const ze=K[je];Array.isArray(ze)?K[je]=ze.map((at,fe)=>de[je][0].value===""?at:p.createGraph(at,de[je][fe])):de[je][0].value!==""&&(K[je]=p.createGraph(ze,de[je][0]))}}return K}function Fe(R,k){var K;const de={};for(let je=0;je<R.patterns.length;++je){const ze=R.patterns[je],at=k[je].value;de[at]=(K=de[at])!==null&&K!==void 0?K:{patterns:[],graph:k[je]},de[at].patterns.push(ze)}let ge=[];for(const[je,{patterns:ze,graph:at}]of Object.entries(de)){const fe=p.createBgp(ze);ge.push(je===""?fe:p.createGraph(fe,at))}let Ue=ge[0];for(let je=1;je<ge.length;++je)Ue=p.createJoin([Ue,ge[je]]);return Ue}return Ga}var MY;function rB(){return MY||(MY=1,(function(a){var e=Qu&&Qu.__createBinding||(Object.create?(function(c,d,f,p){p===void 0&&(p=f);var h=Object.getOwnPropertyDescriptor(d,f);(!h||("get"in h?!d.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(c,p,h)}):(function(c,d,f,p){p===void 0&&(p=f),c[p]=d[f]})),u=Qu&&Qu.__setModuleDefault||(Object.create?(function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}):function(c,d){c.default=d}),n=Qu&&Qu.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&e(d,c,f);return u(d,c),d},r=Qu&&Qu.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.toSparqlJs=a.toSparql=a.Factory=a.Algebra=a.translate=void 0;const t=r(tNe());a.translate=t.default;const i=n($4());a.Algebra=i;const o=r(sP());a.Factory=o.default;const l=aNe();Object.defineProperty(a,"toSparql",{enumerable:!0,get:function(){return l.toSparql}}),Object.defineProperty(a,"toSparqlJs",{enumerable:!0,get:function(){return l.toSparqlJs}});const s=r(tB());a.Util=s.default})(Qu)),Qu}var CY;function iNe(){if(CY)return D2;CY=1,Object.defineProperty(D2,"__esModule",{value:!0}),D2.NodeHandlerDocument=void 0;const a=rB(),e=oP();let u=class extends e.NodeHandlerAdapter{constructor(r,t){super("Document",r,t)}handle(r,t){const i=r.definitions.map(l=>{const s=this.getNodeQuadContextDefinitionNode(l,Object.assign(Object.assign({},t),{ignoreUnknownVariables:!0})),c=Object.assign(Object.assign({},t),{graph:s.graph||t.graph,subject:s.subject||this.util.dataFactory.blankNode()});let d=this.util.handleNode(l,c);return s&&s.auxiliaryPatterns&&(d=this.util.joinOperations([d,this.util.operationFactory.createBgp(s.auxiliaryPatterns)])),d}),o=this.util.operationFactory.createProject(i.length===1?i[0]:this.util.operationFactory.createUnion(i),t.terminalVariables);return this.translateBlankNodesToVariables(o)}getNodeQuadContextDefinitionNode(r,t){if(r.kind==="OperationDefinition")return this.getNodeQuadContextSelectionSet(r.selectionSet,r.name?r.name.value:"",t);throw new Error(`Unsupported definition: ${r.kind}`)}translateBlankNodesToVariables(r){const t=this,i={},o=Array.from(r.variables).reduce((s,c)=>(s[c.value]=!0,s),{});return a.Util.mapOperation(r,{path:(s,c)=>({recurse:!1,result:c.createPath(l(s.subject),s.predicate,l(s.object),l(s.graph))}),pattern:(s,c)=>({recurse:!1,result:c.createPattern(l(s.subject),l(s.predicate),l(s.object),l(s.graph))})});function l(s){if(s.termType==="BlankNode"){let c=i[s.value];return c||(c=a.Util.createUniqueVariable(s.value,o,t.util.dataFactory),o[c.value]=!0,i[s.value]=c),c}return s}}};return D2.NodeHandlerDocument=u,D2}var F2={},LY;function cP(){if(LY)return F2;LY=1,Object.defineProperty(F2,"__esModule",{value:!0}),F2.NodeHandlerSelectionAdapter=void 0;const a=rB(),e=G4(),u=oP();let n=class extends u.NodeHandlerAdapter{constructor(t,i,o){super(t,i,o)}getNodeQuadContextFieldNode(t,i,o){return this.getNodeQuadContextSelectionSet(t.selectionSet,i,Object.assign(Object.assign({},o),{path:this.util.appendFieldToPath(o.path,i)}))}fieldToOperation(t,i,o,l){const s=o;let c=0,d;if((i.name.value==="id"||i.name.value==="graph")&&(o=!1,i.arguments))for(const S of i.arguments)S.name.value==="_"&&this.util.handleNodeValue(S.value,i.name.value,t);const f=this.util.getFieldLabel(i);if(t.singularizeState===e.SingularizeState.SINGLE&&(t.singularizeVariables[this.util.nameToVariable(f,t).value]=!0),o){const S=this.handleMetaField(t,f,l);if(S)return S}const p=l?[this.util.operationFactory.createBgp(l)]:[],h=this.getNodeQuadContextFieldNode(i,f,t);let g=h.subject||this.util.nameToVariable(f,t),v=h.graph||t.graph;h.auxiliaryPatterns&&p.push(this.util.operationFactory.createBgp(h.auxiliaryPatterns));let m=!0,T=null;if(o&&i.arguments&&i.arguments.length){for(const S of i.arguments)if(S.name.value==="_"){const N=this.util.handleNodeValue(S.value,i.name.value,t);T=N.terms,p.push(this.util.operationFactory.createBgp(N.terms.map(j=>this.util.createQuadPattern(t.subject,i.name,j,t.graph,t.context)))),N.auxiliaryPatterns&&p.push(this.util.operationFactory.createBgp(N.auxiliaryPatterns)),o=!1;break}else if(S.name.value==="graph"){const N=this.util.handleNodeValue(S.value,i.name.value,t);if(N.terms.length!==1)throw new Error(`Only single values can be set as graph, but got ${N.terms.length} at ${i.name.value}`);v=N.terms[0],t=Object.assign(Object.assign({},t),{graph:v}),N.auxiliaryPatterns&&p.push(this.util.operationFactory.createBgp(N.auxiliaryPatterns));break}else if(S.name.value==="alt"){let N=S.value;N.kind!=="ListValue"&&(N={kind:"ListValue",values:[N]}),p.push(this.util.createQuadPath(t.subject,i.name,N,g,t.graph,t.context)),m=!1;break}}if(o&&m&&p.push(this.util.operationFactory.createBgp([this.util.createQuadPattern(t.subject,i.name,g,t.graph,t.context)])),i.arguments&&i.arguments.length){for(const S of i.arguments)if(!(S.name.value==="_"||S.name.value==="graph"||S.name.value==="alt"))if(S.name.value==="first"){if(S.value.kind!=="IntValue")throw new Error("Invalid value type for 'first' argument: "+S.value.kind);d=parseInt(S.value.value,10)}else if(S.name.value==="offset"){if(S.value.kind!=="IntValue")throw new Error("Invalid value type for 'offset' argument: "+S.value.kind);c=parseInt(S.value.value,10)}else{const N=this.util.handleNodeValue(S.value,S.name.value,t);p.push(this.util.operationFactory.createBgp(N.terms.map(j=>this.util.createQuadPattern(g,S.name,j,t.graph,t.context)))),N.auxiliaryPatterns&&p.push(this.util.operationFactory.createBgp(N.auxiliaryPatterns))}}const w=this.getDirectiveOutputs(i.directives,f,t);if(!w)return this.util.operationFactory.createBgp([]);let E=this.util.joinOperations(p);if(i.selectionSet&&i.selectionSet.selections.length){if(T){if(T.length!==1)throw new Error(`Only single values can be set as id, but got ${T.length} at ${i.name.value}`);g=T[0]}const S=Object.assign(Object.assign(Object.assign({},t),s?{path:this.util.appendFieldToPath(t.path,f)}:{}),{graph:v,subject:s?g:t.subject});let N=!1;const j=i.selectionSet.selections.filter(O=>O.kind==="Field"&&O.name.value==="totalCount"?(N=!0,!1):!0);let q=this.util.joinOperations(p.concat(j.map(O=>this.util.handleNode(O,S))));if(N){const O=this.util.dataFactory.variable("var"+this.settings.expressionVariableCounter++),I=this.util.dataFactory.variable(g.value+this.settings.variableDelimiter+"totalCount"),A=this.util.operationFactory.createBoundAggregate(O,"count",this.util.operationFactory.createTermExpression(g),!1),P=this.util.operationFactory.createProject(this.util.operationFactory.createExtend(this.util.operationFactory.createGroup(E,[],[A]),I,this.util.operationFactory.createTermExpression(O)),[I]);t.terminalVariables.push(I),j.length?q=this.util.operationFactory.createJoin([this.util.operationFactory.createProject(q,[]),P]):q=P}E=q}else o&&g.termType==="Variable"&&t.terminalVariables.push(g);return(c||d)&&(E=this.util.operationFactory.createSlice(this.util.operationFactory.createProject(E,a.Util.inScopeVariables(E)),c,d)),this.handleDirectiveOutputs(w,E)}handleMetaField(t,i,o){if(i==="__typename"){const l=this.util.nameToVariable(i,t);return t.terminalVariables.push(l),this.util.operationFactory.createBgp([this.util.operationFactory.createPattern(t.subject,this.util.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.util.nameToVariable(i,t),t.graph)].concat(o||[]))}}};return F2.NodeHandlerSelectionAdapter=n,F2}var P2={},qY;function uNe(){if(qY)return P2;qY=1,Object.defineProperty(P2,"__esModule",{value:!0}),P2.NodeHandlerSelectionField=void 0;const a=cP();let e=class extends a.NodeHandlerSelectionAdapter{constructor(n,r){super("Field",n,r)}handle(n,r){return this.fieldToOperation(r,n,!0)}};return P2.NodeHandlerSelectionField=e,P2}var j2={},BY;function oNe(){if(BY)return j2;BY=1,Object.defineProperty(j2,"__esModule",{value:!0}),j2.NodeHandlerSelectionFragmentSpread=void 0;const a=cP();let e=class extends a.NodeHandlerSelectionAdapter{constructor(n,r){super("FragmentSpread",n,r)}handle(n,r){const t=r.fragmentDefinitions[n.name.value];if(!t)throw new Error("Undefined fragment definition: "+n.name.value);const i={alias:void 0,arguments:void 0,directives:t.directives,kind:"Field",name:n.name,selectionSet:t.selectionSet},o=[this.util.newTypePattern(r.subject,t.typeCondition,r)];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(r,i,!1,o))}};return j2.NodeHandlerSelectionFragmentSpread=e,j2}var M2={},UY;function sNe(){if(UY)return M2;UY=1,Object.defineProperty(M2,"__esModule",{value:!0}),M2.NodeHandlerSelectionInlineFragment=void 0;const a=cP();let e=class extends a.NodeHandlerSelectionAdapter{constructor(n,r){super("InlineFragment",n,r)}handle(n,r){const t={alias:void 0,arguments:void 0,directives:n.directives,kind:"Field",name:{kind:"Name",value:r.subject.value},selectionSet:n.selectionSet},i=n.typeCondition?[this.util.newTypePattern(r.subject,n.typeCondition,r)]:[];return this.util.operationFactory.createLeftJoin(this.util.operationFactory.createBgp([]),this.fieldToOperation(r,t,!1,i))}};return M2.NodeHandlerSelectionInlineFragment=e,M2}var QY;function l2e(){return QY||(QY=1,(function(a){var e=uf&&uf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=uf&&uf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(c2e(),a),u(Y4e(),a),u(oP(),a),u(eB(),a),u(Z4e(),a),u(eNe(),a),u(iNe(),a),u(cP(),a),u(uNe(),a),u(oNe(),a),u(sNe(),a)})(uf)),uf}var lf={},d2e=typeof Symbol=="function"&&Symbol.toStringTag!=null?Symbol.toStringTag:"@@toStringTag",i7=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):void 0;function XD(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?XD=function(u){return typeof u}:XD=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},XD(a)}var cNe=10,f2e=2;function p2e(a){return lP(a,[])}function lP(a,e){switch(XD(a)){case"string":return JSON.stringify(a);case"function":return a.name?"[function ".concat(a.name,"]"):"[function]";case"object":return a===null?"null":lNe(a,e);default:return String(a)}}function lNe(a,e){if(e.indexOf(a)!==-1)return"[Circular]";var u=[].concat(e,[a]),n=pNe(a);if(n!==void 0){var r=n.call(a);if(r!==a)return typeof r=="string"?r:lP(r,u)}else if(Array.isArray(a))return fNe(a,u);return dNe(a,u)}function dNe(a,e){var u=Object.keys(a);if(u.length===0)return"{}";if(e.length>f2e)return"["+hNe(a)+"]";var n=u.map(function(r){var t=lP(a[r],e);return r+": "+t});return"{ "+n.join(", ")+" }"}function fNe(a,e){if(a.length===0)return"[]";if(e.length>f2e)return"[Array]";for(var u=Math.min(cNe,a.length),n=a.length-u,r=[],t=0;t<u;++t)r.push(lP(a[t],e));return n===1?r.push("... 1 more item"):n>1&&r.push("... ".concat(n," more items")),"["+r.join(", ")+"]"}function pNe(a){var e=a[String(i7)];if(typeof e=="function")return e;if(typeof a.inspect=="function")return a.inspect}function hNe(a){var e=Object.prototype.toString.call(a).replace(/^\[object /,"").replace(/]$/,"");if(e==="Object"&&typeof a.constructor=="function"){var u=a.constructor.name;if(typeof u=="string"&&u!=="")return u}return e}function KD(a,e){var u=!!a;if(!u)throw new Error(e)}const yNe=(function(e,u){return e instanceof u});function mNe(a,e){for(var u=0;u<e.length;u++){var n=e[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function bNe(a,e,u){return e&&mNe(a.prototype,e),a}var nB=(function(){function a(e){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"GraphQL request",n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{line:1,column:1};typeof e=="string"||KD(0,"Body must be a string. Received: ".concat(p2e(e),".")),this.body=e,this.name=u,this.locationOffset=n,this.locationOffset.line>0||KD(0,"line in locationOffset is 1-indexed and must be positive."),this.locationOffset.column>0||KD(0,"column in locationOffset is 1-indexed and must be positive.")}return bNe(a,[{key:d2e,get:function(){return"Source"}}]),a})();function gNe(a){return yNe(a,nB)}function AF(a,e){for(var u=/\r\n|[\n\r]/g,n=1,r=e+1,t;(t=u.exec(a.body))&&t.index<e;)n+=1,r=e+1-(t.index+t[0].length);return{line:n,column:r}}function h2e(a){return aB(a.source,AF(a.source,a.start))}function aB(a,e){var u=a.locationOffset.column-1,n=JD(u)+a.body,r=e.line-1,t=a.locationOffset.line-1,i=e.line+t,o=e.line===1?u:0,l=e.column+o,s="".concat(a.name,":").concat(i,":").concat(l,`
`),c=n.split(/\r\n|[\n\r]/g),d=c[r];if(d.length>120){for(var f=Math.floor(l/80),p=l%80,h=[],g=0;g<d.length;g+=80)h.push(d.slice(g,g+80));return s+VY([["".concat(i),h[0]]].concat(h.slice(1,f+1).map(function(v){return["",v]}),[[" ",JD(p-1)+"^"],["",h[f+1]]]))}return s+VY([["".concat(i-1),c[r-1]],["".concat(i),d],["",JD(l-1)+"^"],["".concat(i+1),c[r+1]]])}function VY(a){var e=a.filter(function(n){n[0];var r=n[1];return r!==void 0}),u=Math.max.apply(Math,e.map(function(n){var r=n[0];return r.length}));return e.map(function(n){var r=n[0],t=n[1];return vNe(u,r)+(t?" | "+t:" |")}).join(`
`)}function JD(a){return Array(a+1).join(" ")}function vNe(a,e){return JD(a-e.length)+e}var Et=Object.freeze({NAME:"Name",DOCUMENT:"Document",OPERATION_DEFINITION:"OperationDefinition",VARIABLE_DEFINITION:"VariableDefinition",SELECTION_SET:"SelectionSet",FIELD:"Field",ARGUMENT:"Argument",FRAGMENT_SPREAD:"FragmentSpread",INLINE_FRAGMENT:"InlineFragment",FRAGMENT_DEFINITION:"FragmentDefinition",VARIABLE:"Variable",INT:"IntValue",FLOAT:"FloatValue",STRING:"StringValue",BOOLEAN:"BooleanValue",NULL:"NullValue",ENUM:"EnumValue",LIST:"ListValue",OBJECT:"ObjectValue",OBJECT_FIELD:"ObjectField",DIRECTIVE:"Directive",NAMED_TYPE:"NamedType",LIST_TYPE:"ListType",NON_NULL_TYPE:"NonNullType",SCHEMA_DEFINITION:"SchemaDefinition",OPERATION_TYPE_DEFINITION:"OperationTypeDefinition",SCALAR_TYPE_DEFINITION:"ScalarTypeDefinition",OBJECT_TYPE_DEFINITION:"ObjectTypeDefinition",FIELD_DEFINITION:"FieldDefinition",INPUT_VALUE_DEFINITION:"InputValueDefinition",INTERFACE_TYPE_DEFINITION:"InterfaceTypeDefinition",UNION_TYPE_DEFINITION:"UnionTypeDefinition",ENUM_TYPE_DEFINITION:"EnumTypeDefinition",ENUM_VALUE_DEFINITION:"EnumValueDefinition",INPUT_OBJECT_TYPE_DEFINITION:"InputObjectTypeDefinition",DIRECTIVE_DEFINITION:"DirectiveDefinition",SCHEMA_EXTENSION:"SchemaExtension",SCALAR_TYPE_EXTENSION:"ScalarTypeExtension",OBJECT_TYPE_EXTENSION:"ObjectTypeExtension",INTERFACE_TYPE_EXTENSION:"InterfaceTypeExtension",UNION_TYPE_EXTENSION:"UnionTypeExtension",ENUM_TYPE_EXTENSION:"EnumTypeExtension",INPUT_OBJECT_TYPE_EXTENSION:"InputObjectTypeExtension"}),pt=Object.freeze({SOF:"<SOF>",EOF:"<EOF>",BANG:"!",DOLLAR:"$",AMP:"&",PAREN_L:"(",PAREN_R:")",SPREAD:"...",COLON:":",EQUALS:"=",AT:"@",BRACKET_L:"[",BRACKET_R:"]",BRACE_L:"{",PIPE:"|",BRACE_R:"}",NAME:"Name",INT:"Int",FLOAT:"Float",STRING:"String",BLOCK_STRING:"BlockString",COMMENT:"Comment"});function WD(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?WD=function(u){return typeof u}:WD=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},WD(a)}function _Ne(a){return WD(a)=="object"&&a!==null}function YD(a){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?YD=function(u){return typeof u}:YD=function(u){return u&&typeof Symbol=="function"&&u.constructor===Symbol&&u!==Symbol.prototype?"symbol":typeof u},YD(a)}function HY(a,e){var u=Object.keys(a);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(a);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(a,r).enumerable})),u.push.apply(u,n)}return u}function TNe(a){for(var e=1;e<arguments.length;e++){var u=arguments[e]!=null?arguments[e]:{};e%2?HY(Object(u),!0).forEach(function(n){wNe(a,n,u[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(u)):HY(Object(u)).forEach(function(n){Object.defineProperty(a,n,Object.getOwnPropertyDescriptor(u,n))})}return a}function wNe(a,e,u){return e in a?Object.defineProperty(a,e,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[e]=u,a}function SNe(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function ENe(a,e){for(var u=0;u<e.length;u++){var n=e[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,n.key,n)}}function ANe(a,e,u){return e&&ENe(a.prototype,e),a}function ONe(a,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(e&&e.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),e&&p4(a,e)}function xNe(a){var e=m2e();return function(){var n=h4(a),r;if(e){var t=h4(this).constructor;r=Reflect.construct(n,arguments,t)}else r=n.apply(this,arguments);return y2e(this,r)}}function y2e(a,e){return e&&(YD(e)==="object"||typeof e=="function")?e:U6(a)}function U6(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function u7(a){var e=typeof Map=="function"?new Map:void 0;return u7=function(n){if(n===null||!RNe(n))return n;if(typeof n!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(n))return e.get(n);e.set(n,r)}function r(){return ZD(n,arguments,h4(this).constructor)}return r.prototype=Object.create(n.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),p4(r,n)},u7(a)}function ZD(a,e,u){return m2e()?ZD=Reflect.construct:ZD=function(r,t,i){var o=[null];o.push.apply(o,t);var l=Function.bind.apply(r,o),s=new l;return i&&p4(s,i.prototype),s},ZD.apply(null,arguments)}function m2e(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function RNe(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function p4(a,e){return p4=Object.setPrototypeOf||function(n,r){return n.__proto__=r,n},p4(a,e)}function h4(a){return h4=Object.setPrototypeOf?Object.getPrototypeOf:function(u){return u.__proto__||Object.getPrototypeOf(u)},h4(a)}var NNe=(function(a){ONe(u,a);var e=xNe(u);function u(n,r,t,i,o,l,s){var c,d,f,p;SNe(this,u),p=e.call(this,n),p.name="GraphQLError",p.originalError=l??void 0,p.nodes=kY(Array.isArray(r)?r:r?[r]:void 0);for(var h=[],g=0,v=(m=p.nodes)!==null&&m!==void 0?m:[];g<v.length;g++){var m,T=v[g],w=T.loc;w!=null&&h.push(w)}h=kY(h),p.source=t??((c=h)===null||c===void 0?void 0:c[0].source),p.positions=i??((d=h)===null||d===void 0?void 0:d.map(function(S){return S.start})),p.locations=i&&t?i.map(function(S){return AF(t,S)}):(f=h)===null||f===void 0?void 0:f.map(function(S){return AF(S.source,S.start)}),p.path=o??void 0;var E=l?.extensions;return s==null&&_Ne(E)?p.extensions=TNe({},E):p.extensions=s??{},Object.defineProperties(U6(p),{message:{enumerable:!0},locations:{enumerable:p.locations!=null},path:{enumerable:p.path!=null},extensions:{enumerable:p.extensions!=null&&Object.keys(p.extensions).length>0},name:{enumerable:!1},nodes:{enumerable:!1},source:{enumerable:!1},positions:{enumerable:!1},originalError:{enumerable:!1}}),l!=null&&l.stack?(Object.defineProperty(U6(p),"stack",{value:l.stack,writable:!0,configurable:!0}),y2e(p)):(Error.captureStackTrace?Error.captureStackTrace(U6(p),u):Object.defineProperty(U6(p),"stack",{value:Error().stack,writable:!0,configurable:!0}),p)}return ANe(u,[{key:"toString",value:function(){return INe(this)}},{key:"toJSON",value:function(){return DNe(this)}},{key:d2e,get:function(){return"Object"}}]),u})(u7(Error));function kY(a){return a===void 0||a.length===0?void 0:a}function INe(a){var e=a.message;if(a.nodes)for(var u=0,n=a.nodes;u<n.length;u++){var r=n[u];r.loc&&(e+=`

`+h2e(r.loc))}else if(a.source&&a.locations)for(var t=0,i=a.locations;t<i.length;t++){var o=i[t];e+=`

`+aB(a.source,o)}return e}function DNe(a){var e;a||KD(0,"Received null or undefined error.");var u=(e=a.message)!==null&&e!==void 0?e:"An unknown error occurred.",n=a.locations,r=a.path,t=a.extensions;return t&&Object.keys(t).length>0?{message:u,locations:n,path:r,extensions:t}:{message:u,locations:n,path:r}}function qi(a,e,u){return new NNe("Syntax Error: ".concat(u),void 0,a,[e])}function FNe(a,e){var u=!!a;if(!u)throw new Error("Unexpected invariant triggered.")}function b2e(a){var e=a.prototype.toJSON;typeof e=="function"||FNe(0),a.prototype.inspect=e,i7&&(a.prototype[i7]=e)}var iB=(function(){function a(u,n,r){this.start=u.start,this.end=n.end,this.startToken=u,this.endToken=n,this.source=r}var e=a.prototype;return e.toJSON=function(){return{start:this.start,end:this.end}},a})();b2e(iB);var Sn=(function(){function a(u,n,r,t,i,o,l){this.kind=u,this.start=n,this.end=r,this.line=t,this.column=i,this.value=l,this.prev=o,this.next=null}var e=a.prototype;return e.toJSON=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}},a})();b2e(Sn);function zY(a){return a!=null&&typeof a.kind=="string"}function PNe(a){var e=a.split(/\r\n|[\n\r]/g),u=jNe(a);if(u!==0)for(var n=1;n<e.length;n++)e[n]=e[n].slice(u);for(var r=0;r<e.length&&GY(e[r]);)++r;for(var t=e.length;t>r&&GY(e[t-1]);)--t;return e.slice(r,t).join(`
`)}function GY(a){for(var e=0;e<a.length;++e)if(a[e]!==" "&&a[e]!=="	")return!1;return!0}function jNe(a){for(var e,u=!0,n=!0,r=0,t=null,i=0;i<a.length;++i)switch(a.charCodeAt(i)){case 13:a.charCodeAt(i+1)===10&&++i;case 10:u=!1,n=!0,r=0;break;case 9:case 32:++r;break;default:n&&!u&&(t===null||r<t)&&(t=r),n=!1}return(e=t)!==null&&e!==void 0?e:0}function MNe(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"",u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=a.indexOf(`
`)===-1,r=a[0]===" "||a[0]==="	",t=a[a.length-1]==='"',i=a[a.length-1]==="\\",o=!n||t||i||u,l="";return o&&!(n&&r)&&(l+=`
`+e),l+=e?a.replace(/\n/g,`
`+e):a,o&&(l+=`
`),'"""'+l.replace(/"""/g,'\\"""')+'"""'}var g2e=(function(){function a(u){var n=new Sn(pt.SOF,0,0,0,0,null);this.source=u,this.lastToken=n,this.token=n,this.line=1,this.lineStart=0}var e=a.prototype;return e.advance=function(){this.lastToken=this.token;var n=this.token=this.lookahead();return n},e.lookahead=function(){var n=this.token;if(n.kind!==pt.EOF)do{var r;n=(r=n.next)!==null&&r!==void 0?r:n.next=LNe(this,n)}while(n.kind===pt.COMMENT);return n},a})();function CNe(a){return a===pt.BANG||a===pt.DOLLAR||a===pt.AMP||a===pt.PAREN_L||a===pt.PAREN_R||a===pt.SPREAD||a===pt.COLON||a===pt.EQUALS||a===pt.AT||a===pt.BRACKET_L||a===pt.BRACKET_R||a===pt.BRACE_L||a===pt.PIPE||a===pt.BRACE_R}function sb(a){return isNaN(a)?pt.EOF:a<127?JSON.stringify(String.fromCharCode(a)):'"\\u'.concat(("00"+a.toString(16).toUpperCase()).slice(-4),'"')}function LNe(a,e){for(var u=a.source,n=u.body,r=n.length,t=e.end;t<r;){var i=n.charCodeAt(t),o=a.line,l=1+t-a.lineStart;switch(i){case 65279:case 9:case 32:case 44:++t;continue;case 10:++t,++a.line,a.lineStart=t;continue;case 13:n.charCodeAt(t+1)===10?t+=2:++t,++a.line,a.lineStart=t;continue;case 33:return new Sn(pt.BANG,t,t+1,o,l,e);case 35:return BNe(u,t,o,l,e);case 36:return new Sn(pt.DOLLAR,t,t+1,o,l,e);case 38:return new Sn(pt.AMP,t,t+1,o,l,e);case 40:return new Sn(pt.PAREN_L,t,t+1,o,l,e);case 41:return new Sn(pt.PAREN_R,t,t+1,o,l,e);case 46:if(n.charCodeAt(t+1)===46&&n.charCodeAt(t+2)===46)return new Sn(pt.SPREAD,t,t+3,o,l,e);break;case 58:return new Sn(pt.COLON,t,t+1,o,l,e);case 61:return new Sn(pt.EQUALS,t,t+1,o,l,e);case 64:return new Sn(pt.AT,t,t+1,o,l,e);case 91:return new Sn(pt.BRACKET_L,t,t+1,o,l,e);case 93:return new Sn(pt.BRACKET_R,t,t+1,o,l,e);case 123:return new Sn(pt.BRACE_L,t,t+1,o,l,e);case 124:return new Sn(pt.PIPE,t,t+1,o,l,e);case 125:return new Sn(pt.BRACE_R,t,t+1,o,l,e);case 34:return n.charCodeAt(t+1)===34&&n.charCodeAt(t+2)===34?VNe(u,t,o,l,e,a):QNe(u,t,o,l,e);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return UNe(u,t,i,o,l,e);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return kNe(u,t,o,l,e)}throw qi(u,t,qNe(i))}var s=a.line,c=1+t-a.lineStart;return new Sn(pt.EOF,r,r,s,c,e)}function qNe(a){return a<32&&a!==9&&a!==10&&a!==13?"Cannot contain the invalid character ".concat(sb(a),"."):a===39?`Unexpected single quote character ('), did you mean to use a double quote (")?`:"Cannot parse the unexpected character ".concat(sb(a),".")}function BNe(a,e,u,n,r){var t=a.body,i,o=e;do i=t.charCodeAt(++o);while(!isNaN(i)&&(i>31||i===9));return new Sn(pt.COMMENT,e,o,u,n,r,t.slice(e+1,o))}function UNe(a,e,u,n,r,t){var i=a.body,o=u,l=e,s=!1;if(o===45&&(o=i.charCodeAt(++l)),o===48){if(o=i.charCodeAt(++l),o>=48&&o<=57)throw qi(a,l,"Invalid number, unexpected digit after 0: ".concat(sb(o),"."))}else l=rM(a,l,o),o=i.charCodeAt(l);if(o===46&&(s=!0,o=i.charCodeAt(++l),l=rM(a,l,o),o=i.charCodeAt(l)),(o===69||o===101)&&(s=!0,o=i.charCodeAt(++l),(o===43||o===45)&&(o=i.charCodeAt(++l)),l=rM(a,l,o),o=i.charCodeAt(l)),o===46||zNe(o))throw qi(a,l,"Invalid number, expected digit but got: ".concat(sb(o),"."));return new Sn(s?pt.FLOAT:pt.INT,e,l,n,r,t,i.slice(e,l))}function rM(a,e,u){var n=a.body,r=e,t=u;if(t>=48&&t<=57){do t=n.charCodeAt(++r);while(t>=48&&t<=57);return r}throw qi(a,r,"Invalid number, expected digit but got: ".concat(sb(t),"."))}function QNe(a,e,u,n,r){for(var t=a.body,i=e+1,o=i,l=0,s="";i<t.length&&!isNaN(l=t.charCodeAt(i))&&l!==10&&l!==13;){if(l===34)return s+=t.slice(o,i),new Sn(pt.STRING,e,i+1,u,n,r,s);if(l<32&&l!==9)throw qi(a,i,"Invalid character within String: ".concat(sb(l),"."));if(++i,l===92){switch(s+=t.slice(o,i-1),l=t.charCodeAt(i),l){case 34:s+='"';break;case 47:s+="/";break;case 92:s+="\\";break;case 98:s+="\b";break;case 102:s+="\f";break;case 110:s+=`
`;break;case 114:s+="\r";break;case 116:s+="	";break;case 117:{var c=HNe(t.charCodeAt(i+1),t.charCodeAt(i+2),t.charCodeAt(i+3),t.charCodeAt(i+4));if(c<0){var d=t.slice(i+1,i+5);throw qi(a,i,"Invalid character escape sequence: \\u".concat(d,"."))}s+=String.fromCharCode(c),i+=4;break}default:throw qi(a,i,"Invalid character escape sequence: \\".concat(String.fromCharCode(l),"."))}++i,o=i}}throw qi(a,i,"Unterminated string.")}function VNe(a,e,u,n,r,t){for(var i=a.body,o=e+3,l=o,s=0,c="";o<i.length&&!isNaN(s=i.charCodeAt(o));){if(s===34&&i.charCodeAt(o+1)===34&&i.charCodeAt(o+2)===34)return c+=i.slice(l,o),new Sn(pt.BLOCK_STRING,e,o+3,u,n,r,PNe(c));if(s<32&&s!==9&&s!==10&&s!==13)throw qi(a,o,"Invalid character within String: ".concat(sb(s),"."));s===10?(++o,++t.line,t.lineStart=o):s===13?(i.charCodeAt(o+1)===10?o+=2:++o,++t.line,t.lineStart=o):s===92&&i.charCodeAt(o+1)===34&&i.charCodeAt(o+2)===34&&i.charCodeAt(o+3)===34?(c+=i.slice(l,o)+'"""',o+=4,l=o):++o}throw qi(a,o,"Unterminated string.")}function HNe(a,e,u,n){return zI(a)<<12|zI(e)<<8|zI(u)<<4|zI(n)}function zI(a){return a>=48&&a<=57?a-48:a>=65&&a<=70?a-55:a>=97&&a<=102?a-87:-1}function kNe(a,e,u,n,r){for(var t=a.body,i=t.length,o=e+1,l=0;o!==i&&!isNaN(l=t.charCodeAt(o))&&(l===95||l>=48&&l<=57||l>=65&&l<=90||l>=97&&l<=122);)++o;return new Sn(pt.NAME,e,o,u,n,r,t.slice(e,o))}function zNe(a){return a===95||a>=65&&a<=90||a>=97&&a<=122}var v2e=Object.freeze({QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",VARIABLE_DEFINITION:"VARIABLE_DEFINITION",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"});function GNe(a,e){var u=new uB(a,e);return u.parseDocument()}function $Ne(a,e){var u=new uB(a,e);u.expectToken(pt.SOF);var n=u.parseValueLiteral(!1);return u.expectToken(pt.EOF),n}function XNe(a,e){var u=new uB(a,e);u.expectToken(pt.SOF);var n=u.parseTypeReference();return u.expectToken(pt.EOF),n}var uB=(function(){function a(u,n){var r=gNe(u)?u:new nB(u);this._lexer=new g2e(r),this._options=n}var e=a.prototype;return e.parseName=function(){var n=this.expectToken(pt.NAME);return{kind:Et.NAME,value:n.value,loc:this.loc(n)}},e.parseDocument=function(){var n=this._lexer.token;return{kind:Et.DOCUMENT,definitions:this.many(pt.SOF,this.parseDefinition,pt.EOF),loc:this.loc(n)}},e.parseDefinition=function(){if(this.peek(pt.NAME))switch(this._lexer.token.value){case"query":case"mutation":case"subscription":return this.parseOperationDefinition();case"fragment":return this.parseFragmentDefinition();case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"directive":return this.parseTypeSystemDefinition();case"extend":return this.parseTypeSystemExtension()}else{if(this.peek(pt.BRACE_L))return this.parseOperationDefinition();if(this.peekDescription())return this.parseTypeSystemDefinition()}throw this.unexpected()},e.parseOperationDefinition=function(){var n=this._lexer.token;if(this.peek(pt.BRACE_L))return{kind:Et.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:this.parseSelectionSet(),loc:this.loc(n)};var r=this.parseOperationType(),t;return this.peek(pt.NAME)&&(t=this.parseName()),{kind:Et.OPERATION_DEFINITION,operation:r,name:t,variableDefinitions:this.parseVariableDefinitions(),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseOperationType=function(){var n=this.expectToken(pt.NAME);switch(n.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw this.unexpected(n)},e.parseVariableDefinitions=function(){return this.optionalMany(pt.PAREN_L,this.parseVariableDefinition,pt.PAREN_R)},e.parseVariableDefinition=function(){var n=this._lexer.token;return{kind:Et.VARIABLE_DEFINITION,variable:this.parseVariable(),type:(this.expectToken(pt.COLON),this.parseTypeReference()),defaultValue:this.expectOptionalToken(pt.EQUALS)?this.parseValueLiteral(!0):void 0,directives:this.parseDirectives(!0),loc:this.loc(n)}},e.parseVariable=function(){var n=this._lexer.token;return this.expectToken(pt.DOLLAR),{kind:Et.VARIABLE,name:this.parseName(),loc:this.loc(n)}},e.parseSelectionSet=function(){var n=this._lexer.token;return{kind:Et.SELECTION_SET,selections:this.many(pt.BRACE_L,this.parseSelection,pt.BRACE_R),loc:this.loc(n)}},e.parseSelection=function(){return this.peek(pt.SPREAD)?this.parseFragment():this.parseField()},e.parseField=function(){var n=this._lexer.token,r=this.parseName(),t,i;return this.expectOptionalToken(pt.COLON)?(t=r,i=this.parseName()):i=r,{kind:Et.FIELD,alias:t,name:i,arguments:this.parseArguments(!1),directives:this.parseDirectives(!1),selectionSet:this.peek(pt.BRACE_L)?this.parseSelectionSet():void 0,loc:this.loc(n)}},e.parseArguments=function(n){var r=n?this.parseConstArgument:this.parseArgument;return this.optionalMany(pt.PAREN_L,r,pt.PAREN_R)},e.parseArgument=function(){var n=this._lexer.token,r=this.parseName();return this.expectToken(pt.COLON),{kind:Et.ARGUMENT,name:r,value:this.parseValueLiteral(!1),loc:this.loc(n)}},e.parseConstArgument=function(){var n=this._lexer.token;return{kind:Et.ARGUMENT,name:this.parseName(),value:(this.expectToken(pt.COLON),this.parseValueLiteral(!0)),loc:this.loc(n)}},e.parseFragment=function(){var n=this._lexer.token;this.expectToken(pt.SPREAD);var r=this.expectOptionalKeyword("on");return!r&&this.peek(pt.NAME)?{kind:Et.FRAGMENT_SPREAD,name:this.parseFragmentName(),directives:this.parseDirectives(!1),loc:this.loc(n)}:{kind:Et.INLINE_FRAGMENT,typeCondition:r?this.parseNamedType():void 0,directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(n)}},e.parseFragmentDefinition=function(){var n,r=this._lexer.token;return this.expectKeyword("fragment"),((n=this._options)===null||n===void 0?void 0:n.experimentalFragmentVariables)===!0?{kind:Et.FRAGMENT_DEFINITION,name:this.parseFragmentName(),variableDefinitions:this.parseVariableDefinitions(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}:{kind:Et.FRAGMENT_DEFINITION,name:this.parseFragmentName(),typeCondition:(this.expectKeyword("on"),this.parseNamedType()),directives:this.parseDirectives(!1),selectionSet:this.parseSelectionSet(),loc:this.loc(r)}},e.parseFragmentName=function(){if(this._lexer.token.value==="on")throw this.unexpected();return this.parseName()},e.parseValueLiteral=function(n){var r=this._lexer.token;switch(r.kind){case pt.BRACKET_L:return this.parseList(n);case pt.BRACE_L:return this.parseObject(n);case pt.INT:return this._lexer.advance(),{kind:Et.INT,value:r.value,loc:this.loc(r)};case pt.FLOAT:return this._lexer.advance(),{kind:Et.FLOAT,value:r.value,loc:this.loc(r)};case pt.STRING:case pt.BLOCK_STRING:return this.parseStringLiteral();case pt.NAME:switch(this._lexer.advance(),r.value){case"true":return{kind:Et.BOOLEAN,value:!0,loc:this.loc(r)};case"false":return{kind:Et.BOOLEAN,value:!1,loc:this.loc(r)};case"null":return{kind:Et.NULL,loc:this.loc(r)};default:return{kind:Et.ENUM,value:r.value,loc:this.loc(r)}}case pt.DOLLAR:if(!n)return this.parseVariable();break}throw this.unexpected()},e.parseStringLiteral=function(){var n=this._lexer.token;return this._lexer.advance(),{kind:Et.STRING,value:n.value,block:n.kind===pt.BLOCK_STRING,loc:this.loc(n)}},e.parseList=function(n){var r=this,t=this._lexer.token,i=function(){return r.parseValueLiteral(n)};return{kind:Et.LIST,values:this.any(pt.BRACKET_L,i,pt.BRACKET_R),loc:this.loc(t)}},e.parseObject=function(n){var r=this,t=this._lexer.token,i=function(){return r.parseObjectField(n)};return{kind:Et.OBJECT,fields:this.any(pt.BRACE_L,i,pt.BRACE_R),loc:this.loc(t)}},e.parseObjectField=function(n){var r=this._lexer.token,t=this.parseName();return this.expectToken(pt.COLON),{kind:Et.OBJECT_FIELD,name:t,value:this.parseValueLiteral(n),loc:this.loc(r)}},e.parseDirectives=function(n){for(var r=[];this.peek(pt.AT);)r.push(this.parseDirective(n));return r},e.parseDirective=function(n){var r=this._lexer.token;return this.expectToken(pt.AT),{kind:Et.DIRECTIVE,name:this.parseName(),arguments:this.parseArguments(n),loc:this.loc(r)}},e.parseTypeReference=function(){var n=this._lexer.token,r;return this.expectOptionalToken(pt.BRACKET_L)?(r=this.parseTypeReference(),this.expectToken(pt.BRACKET_R),r={kind:Et.LIST_TYPE,type:r,loc:this.loc(n)}):r=this.parseNamedType(),this.expectOptionalToken(pt.BANG)?{kind:Et.NON_NULL_TYPE,type:r,loc:this.loc(n)}:r},e.parseNamedType=function(){var n=this._lexer.token;return{kind:Et.NAMED_TYPE,name:this.parseName(),loc:this.loc(n)}},e.parseTypeSystemDefinition=function(){var n=this.peekDescription()?this._lexer.lookahead():this._lexer.token;if(n.kind===pt.NAME)switch(n.value){case"schema":return this.parseSchemaDefinition();case"scalar":return this.parseScalarTypeDefinition();case"type":return this.parseObjectTypeDefinition();case"interface":return this.parseInterfaceTypeDefinition();case"union":return this.parseUnionTypeDefinition();case"enum":return this.parseEnumTypeDefinition();case"input":return this.parseInputObjectTypeDefinition();case"directive":return this.parseDirectiveDefinition()}throw this.unexpected(n)},e.peekDescription=function(){return this.peek(pt.STRING)||this.peek(pt.BLOCK_STRING)},e.parseDescription=function(){if(this.peekDescription())return this.parseStringLiteral()},e.parseSchemaDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("schema");var t=this.parseDirectives(!0),i=this.many(pt.BRACE_L,this.parseOperationTypeDefinition,pt.BRACE_R);return{kind:Et.SCHEMA_DEFINITION,description:r,directives:t,operationTypes:i,loc:this.loc(n)}},e.parseOperationTypeDefinition=function(){var n=this._lexer.token,r=this.parseOperationType();this.expectToken(pt.COLON);var t=this.parseNamedType();return{kind:Et.OPERATION_TYPE_DEFINITION,operation:r,type:t,loc:this.loc(n)}},e.parseScalarTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("scalar");var t=this.parseName(),i=this.parseDirectives(!0);return{kind:Et.SCALAR_TYPE_DEFINITION,description:r,name:t,directives:i,loc:this.loc(n)}},e.parseObjectTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("type");var t=this.parseName(),i=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),l=this.parseFieldsDefinition();return{kind:Et.OBJECT_TYPE_DEFINITION,description:r,name:t,interfaces:i,directives:o,fields:l,loc:this.loc(n)}},e.parseImplementsInterfaces=function(){var n;if(!this.expectOptionalKeyword("implements"))return[];if(((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLImplementsInterfaces)===!0){var r=[];this.expectOptionalToken(pt.AMP);do r.push(this.parseNamedType());while(this.expectOptionalToken(pt.AMP)||this.peek(pt.NAME));return r}return this.delimitedMany(pt.AMP,this.parseNamedType)},e.parseFieldsDefinition=function(){var n;return((n=this._options)===null||n===void 0?void 0:n.allowLegacySDLEmptyFields)===!0&&this.peek(pt.BRACE_L)&&this._lexer.lookahead().kind===pt.BRACE_R?(this._lexer.advance(),this._lexer.advance(),[]):this.optionalMany(pt.BRACE_L,this.parseFieldDefinition,pt.BRACE_R)},e.parseFieldDefinition=function(){var n=this._lexer.token,r=this.parseDescription(),t=this.parseName(),i=this.parseArgumentDefs();this.expectToken(pt.COLON);var o=this.parseTypeReference(),l=this.parseDirectives(!0);return{kind:Et.FIELD_DEFINITION,description:r,name:t,arguments:i,type:o,directives:l,loc:this.loc(n)}},e.parseArgumentDefs=function(){return this.optionalMany(pt.PAREN_L,this.parseInputValueDef,pt.PAREN_R)},e.parseInputValueDef=function(){var n=this._lexer.token,r=this.parseDescription(),t=this.parseName();this.expectToken(pt.COLON);var i=this.parseTypeReference(),o;this.expectOptionalToken(pt.EQUALS)&&(o=this.parseValueLiteral(!0));var l=this.parseDirectives(!0);return{kind:Et.INPUT_VALUE_DEFINITION,description:r,name:t,type:i,defaultValue:o,directives:l,loc:this.loc(n)}},e.parseInterfaceTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("interface");var t=this.parseName(),i=this.parseImplementsInterfaces(),o=this.parseDirectives(!0),l=this.parseFieldsDefinition();return{kind:Et.INTERFACE_TYPE_DEFINITION,description:r,name:t,interfaces:i,directives:o,fields:l,loc:this.loc(n)}},e.parseUnionTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("union");var t=this.parseName(),i=this.parseDirectives(!0),o=this.parseUnionMemberTypes();return{kind:Et.UNION_TYPE_DEFINITION,description:r,name:t,directives:i,types:o,loc:this.loc(n)}},e.parseUnionMemberTypes=function(){return this.expectOptionalToken(pt.EQUALS)?this.delimitedMany(pt.PIPE,this.parseNamedType):[]},e.parseEnumTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("enum");var t=this.parseName(),i=this.parseDirectives(!0),o=this.parseEnumValuesDefinition();return{kind:Et.ENUM_TYPE_DEFINITION,description:r,name:t,directives:i,values:o,loc:this.loc(n)}},e.parseEnumValuesDefinition=function(){return this.optionalMany(pt.BRACE_L,this.parseEnumValueDefinition,pt.BRACE_R)},e.parseEnumValueDefinition=function(){var n=this._lexer.token,r=this.parseDescription(),t=this.parseName(),i=this.parseDirectives(!0);return{kind:Et.ENUM_VALUE_DEFINITION,description:r,name:t,directives:i,loc:this.loc(n)}},e.parseInputObjectTypeDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("input");var t=this.parseName(),i=this.parseDirectives(!0),o=this.parseInputFieldsDefinition();return{kind:Et.INPUT_OBJECT_TYPE_DEFINITION,description:r,name:t,directives:i,fields:o,loc:this.loc(n)}},e.parseInputFieldsDefinition=function(){return this.optionalMany(pt.BRACE_L,this.parseInputValueDef,pt.BRACE_R)},e.parseTypeSystemExtension=function(){var n=this._lexer.lookahead();if(n.kind===pt.NAME)switch(n.value){case"schema":return this.parseSchemaExtension();case"scalar":return this.parseScalarTypeExtension();case"type":return this.parseObjectTypeExtension();case"interface":return this.parseInterfaceTypeExtension();case"union":return this.parseUnionTypeExtension();case"enum":return this.parseEnumTypeExtension();case"input":return this.parseInputObjectTypeExtension()}throw this.unexpected(n)},e.parseSchemaExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("schema");var r=this.parseDirectives(!0),t=this.optionalMany(pt.BRACE_L,this.parseOperationTypeDefinition,pt.BRACE_R);if(r.length===0&&t.length===0)throw this.unexpected();return{kind:Et.SCHEMA_EXTENSION,directives:r,operationTypes:t,loc:this.loc(n)}},e.parseScalarTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("scalar");var r=this.parseName(),t=this.parseDirectives(!0);if(t.length===0)throw this.unexpected();return{kind:Et.SCALAR_TYPE_EXTENSION,name:r,directives:t,loc:this.loc(n)}},e.parseObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("type");var r=this.parseName(),t=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(t.length===0&&i.length===0&&o.length===0)throw this.unexpected();return{kind:Et.OBJECT_TYPE_EXTENSION,name:r,interfaces:t,directives:i,fields:o,loc:this.loc(n)}},e.parseInterfaceTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("interface");var r=this.parseName(),t=this.parseImplementsInterfaces(),i=this.parseDirectives(!0),o=this.parseFieldsDefinition();if(t.length===0&&i.length===0&&o.length===0)throw this.unexpected();return{kind:Et.INTERFACE_TYPE_EXTENSION,name:r,interfaces:t,directives:i,fields:o,loc:this.loc(n)}},e.parseUnionTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("union");var r=this.parseName(),t=this.parseDirectives(!0),i=this.parseUnionMemberTypes();if(t.length===0&&i.length===0)throw this.unexpected();return{kind:Et.UNION_TYPE_EXTENSION,name:r,directives:t,types:i,loc:this.loc(n)}},e.parseEnumTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("enum");var r=this.parseName(),t=this.parseDirectives(!0),i=this.parseEnumValuesDefinition();if(t.length===0&&i.length===0)throw this.unexpected();return{kind:Et.ENUM_TYPE_EXTENSION,name:r,directives:t,values:i,loc:this.loc(n)}},e.parseInputObjectTypeExtension=function(){var n=this._lexer.token;this.expectKeyword("extend"),this.expectKeyword("input");var r=this.parseName(),t=this.parseDirectives(!0),i=this.parseInputFieldsDefinition();if(t.length===0&&i.length===0)throw this.unexpected();return{kind:Et.INPUT_OBJECT_TYPE_EXTENSION,name:r,directives:t,fields:i,loc:this.loc(n)}},e.parseDirectiveDefinition=function(){var n=this._lexer.token,r=this.parseDescription();this.expectKeyword("directive"),this.expectToken(pt.AT);var t=this.parseName(),i=this.parseArgumentDefs(),o=this.expectOptionalKeyword("repeatable");this.expectKeyword("on");var l=this.parseDirectiveLocations();return{kind:Et.DIRECTIVE_DEFINITION,description:r,name:t,arguments:i,repeatable:o,locations:l,loc:this.loc(n)}},e.parseDirectiveLocations=function(){return this.delimitedMany(pt.PIPE,this.parseDirectiveLocation)},e.parseDirectiveLocation=function(){var n=this._lexer.token,r=this.parseName();if(v2e[r.value]!==void 0)return r;throw this.unexpected(n)},e.loc=function(n){var r;if(((r=this._options)===null||r===void 0?void 0:r.noLocation)!==!0)return new iB(n,this._lexer.lastToken,this._lexer.source)},e.peek=function(n){return this._lexer.token.kind===n},e.expectToken=function(n){var r=this._lexer.token;if(r.kind===n)return this._lexer.advance(),r;throw qi(this._lexer.source,r.start,"Expected ".concat(_2e(n),", found ").concat(nM(r),"."))},e.expectOptionalToken=function(n){var r=this._lexer.token;if(r.kind===n)return this._lexer.advance(),r},e.expectKeyword=function(n){var r=this._lexer.token;if(r.kind===pt.NAME&&r.value===n)this._lexer.advance();else throw qi(this._lexer.source,r.start,'Expected "'.concat(n,'", found ').concat(nM(r),"."))},e.expectOptionalKeyword=function(n){var r=this._lexer.token;return r.kind===pt.NAME&&r.value===n?(this._lexer.advance(),!0):!1},e.unexpected=function(n){var r=n??this._lexer.token;return qi(this._lexer.source,r.start,"Unexpected ".concat(nM(r),"."))},e.any=function(n,r,t){this.expectToken(n);for(var i=[];!this.expectOptionalToken(t);)i.push(r.call(this));return i},e.optionalMany=function(n,r,t){if(this.expectOptionalToken(n)){var i=[];do i.push(r.call(this));while(!this.expectOptionalToken(t));return i}return[]},e.many=function(n,r,t){this.expectToken(n);var i=[];do i.push(r.call(this));while(!this.expectOptionalToken(t));return i},e.delimitedMany=function(n,r){this.expectOptionalToken(n);var t=[];do t.push(r.call(this));while(this.expectOptionalToken(n));return t},a})();function nM(a){var e=a.value;return _2e(a.kind)+(e!=null?' "'.concat(e,'"'):"")}function _2e(a){return CNe(a)?'"'.concat(a,'"'):a}var KNe={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue","directives"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["description","directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","interfaces","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"],SchemaExtension:["directives","operationTypes"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","interfaces","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"]},Lg=Object.freeze({});function T2e(a,e){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:KNe,n=void 0,r=Array.isArray(a),t=[a],i=-1,o=[],l=void 0,s=void 0,c=void 0,d=[],f=[],p=a;do{i++;var h=i===t.length,g=h&&o.length!==0;if(h){if(s=f.length===0?void 0:d[d.length-1],l=c,c=f.pop(),g){if(r)l=l.slice();else{for(var v={},m=0,T=Object.keys(l);m<T.length;m++){var w=T[m];v[w]=l[w]}l=v}for(var E=0,S=0;S<o.length;S++){var N=o[S][0],j=o[S][1];r&&(N-=E),r&&j===null?(l.splice(N,1),E++):l[N]=j}}i=n.index,t=n.keys,o=n.edits,r=n.inArray,n=n.prev}else{if(s=c?r?i:t[i]:void 0,l=c?c[s]:p,l==null)continue;c&&d.push(s)}var q=void 0;if(!Array.isArray(l)){if(!zY(l))throw new Error("Invalid AST Node: ".concat(p2e(l),"."));var O=OF(e,l.kind,h);if(O){if(q=O.call(e,l,s,c,d,f),q===Lg)break;if(q===!1){if(!h){d.pop();continue}}else if(q!==void 0&&(o.push([s,q]),!h))if(zY(q))l=q;else{d.pop();continue}}}if(q===void 0&&g&&o.push([s,l]),h)d.pop();else{var I;n={inArray:r,index:i,keys:t,edits:o,prev:n},r=Array.isArray(l),t=r?l:(I=u[l.kind])!==null&&I!==void 0?I:[],i=-1,o=[],c&&f.push(c),c=l}}while(n!==void 0);return o.length!==0&&(p=o[o.length-1][1]),p}function JNe(a){var e=new Array(a.length);return{enter:function(n){for(var r=0;r<a.length;r++)if(e[r]==null){var t=OF(a[r],n.kind,!1);if(t){var i=t.apply(a[r],arguments);if(i===!1)e[r]=n;else if(i===Lg)e[r]=Lg;else if(i!==void 0)return i}}},leave:function(n){for(var r=0;r<a.length;r++)if(e[r]==null){var t=OF(a[r],n.kind,!0);if(t){var i=t.apply(a[r],arguments);if(i===Lg)e[r]=Lg;else if(i!==void 0&&i!==!1)return i}}else e[r]===n&&(e[r]=null)}}}function OF(a,e,u){var n=a[e];if(n){if(!u&&typeof n=="function")return n;var r=u?n.leave:n.enter;if(typeof r=="function")return r}else{var t=u?a.leave:a.enter;if(t){if(typeof t=="function")return t;var i=t[e];if(typeof i=="function")return i}}}function WNe(a){return T2e(a,{leave:ZNe})}var YNe=80,ZNe={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return Dt(e.definitions,`

`)+`
`},OperationDefinition:function(e){var u=e.operation,n=e.name,r=wn("(",Dt(e.variableDefinitions,", "),")"),t=Dt(e.directives," "),i=e.selectionSet;return!n&&!t&&!r&&u==="query"?i:Dt([u,Dt([n,r]),t,i]," ")},VariableDefinition:function(e){var u=e.variable,n=e.type,r=e.defaultValue,t=e.directives;return u+": "+n+wn(" = ",r)+wn(" ",Dt(t," "))},SelectionSet:function(e){var u=e.selections;return Hu(u)},Field:function(e){var u=e.alias,n=e.name,r=e.arguments,t=e.directives,i=e.selectionSet,o=wn("",u,": ")+n,l=o+wn("(",Dt(r,", "),")");return l.length>YNe&&(l=o+wn(`(
`,eF(Dt(r,`
`)),`
)`)),Dt([l,Dt(t," "),i]," ")},Argument:function(e){var u=e.name,n=e.value;return u+": "+n},FragmentSpread:function(e){var u=e.name,n=e.directives;return"..."+u+wn(" ",Dt(n," "))},InlineFragment:function(e){var u=e.typeCondition,n=e.directives,r=e.selectionSet;return Dt(["...",wn("on ",u),Dt(n," "),r]," ")},FragmentDefinition:function(e){var u=e.name,n=e.typeCondition,r=e.variableDefinitions,t=e.directives,i=e.selectionSet;return"fragment ".concat(u).concat(wn("(",Dt(r,", "),")")," ")+"on ".concat(n," ").concat(wn("",Dt(t," ")," "))+i},IntValue:function(e){var u=e.value;return u},FloatValue:function(e){var u=e.value;return u},StringValue:function(e,u){var n=e.value,r=e.block;return r?MNe(n,u==="description"?"":"  "):JSON.stringify(n)},BooleanValue:function(e){var u=e.value;return u?"true":"false"},NullValue:function(){return"null"},EnumValue:function(e){var u=e.value;return u},ListValue:function(e){var u=e.values;return"["+Dt(u,", ")+"]"},ObjectValue:function(e){var u=e.fields;return"{"+Dt(u,", ")+"}"},ObjectField:function(e){var u=e.name,n=e.value;return u+": "+n},Directive:function(e){var u=e.name,n=e.arguments;return"@"+u+wn("(",Dt(n,", "),")")},NamedType:function(e){var u=e.name;return u},ListType:function(e){var u=e.type;return"["+u+"]"},NonNullType:function(e){var u=e.type;return u+"!"},SchemaDefinition:Vu(function(a){var e=a.directives,u=a.operationTypes;return Dt(["schema",Dt(e," "),Hu(u)]," ")}),OperationTypeDefinition:function(e){var u=e.operation,n=e.type;return u+": "+n},ScalarTypeDefinition:Vu(function(a){var e=a.name,u=a.directives;return Dt(["scalar",e,Dt(u," ")]," ")}),ObjectTypeDefinition:Vu(function(a){var e=a.name,u=a.interfaces,n=a.directives,r=a.fields;return Dt(["type",e,wn("implements ",Dt(u," & ")),Dt(n," "),Hu(r)]," ")}),FieldDefinition:Vu(function(a){var e=a.name,u=a.arguments,n=a.type,r=a.directives;return e+($Y(u)?wn(`(
`,eF(Dt(u,`
`)),`
)`):wn("(",Dt(u,", "),")"))+": "+n+wn(" ",Dt(r," "))}),InputValueDefinition:Vu(function(a){var e=a.name,u=a.type,n=a.defaultValue,r=a.directives;return Dt([e+": "+u,wn("= ",n),Dt(r," ")]," ")}),InterfaceTypeDefinition:Vu(function(a){var e=a.name,u=a.interfaces,n=a.directives,r=a.fields;return Dt(["interface",e,wn("implements ",Dt(u," & ")),Dt(n," "),Hu(r)]," ")}),UnionTypeDefinition:Vu(function(a){var e=a.name,u=a.directives,n=a.types;return Dt(["union",e,Dt(u," "),n&&n.length!==0?"= "+Dt(n," | "):""]," ")}),EnumTypeDefinition:Vu(function(a){var e=a.name,u=a.directives,n=a.values;return Dt(["enum",e,Dt(u," "),Hu(n)]," ")}),EnumValueDefinition:Vu(function(a){var e=a.name,u=a.directives;return Dt([e,Dt(u," ")]," ")}),InputObjectTypeDefinition:Vu(function(a){var e=a.name,u=a.directives,n=a.fields;return Dt(["input",e,Dt(u," "),Hu(n)]," ")}),DirectiveDefinition:Vu(function(a){var e=a.name,u=a.arguments,n=a.repeatable,r=a.locations;return"directive @"+e+($Y(u)?wn(`(
`,eF(Dt(u,`
`)),`
)`):wn("(",Dt(u,", "),")"))+(n?" repeatable":"")+" on "+Dt(r," | ")}),SchemaExtension:function(e){var u=e.directives,n=e.operationTypes;return Dt(["extend schema",Dt(u," "),Hu(n)]," ")},ScalarTypeExtension:function(e){var u=e.name,n=e.directives;return Dt(["extend scalar",u,Dt(n," ")]," ")},ObjectTypeExtension:function(e){var u=e.name,n=e.interfaces,r=e.directives,t=e.fields;return Dt(["extend type",u,wn("implements ",Dt(n," & ")),Dt(r," "),Hu(t)]," ")},InterfaceTypeExtension:function(e){var u=e.name,n=e.interfaces,r=e.directives,t=e.fields;return Dt(["extend interface",u,wn("implements ",Dt(n," & ")),Dt(r," "),Hu(t)]," ")},UnionTypeExtension:function(e){var u=e.name,n=e.directives,r=e.types;return Dt(["extend union",u,Dt(n," "),r&&r.length!==0?"= "+Dt(r," | "):""]," ")},EnumTypeExtension:function(e){var u=e.name,n=e.directives,r=e.values;return Dt(["extend enum",u,Dt(n," "),Hu(r)]," ")},InputObjectTypeExtension:function(e){var u=e.name,n=e.directives,r=e.fields;return Dt(["extend input",u,Dt(n," "),Hu(r)]," ")}};function Vu(a){return function(e){return Dt([e.description,a(e)],`
`)}}function Dt(a){var e,u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"";return(e=a?.filter(function(n){return n}).join(u))!==null&&e!==void 0?e:""}function Hu(a){return wn(`{
`,eF(Dt(a,`
`)),`
}`)}function wn(a,e){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:"";return e!=null&&e!==""?a+e+u:""}function eF(a){return wn("  ",a.replace(/\n/g,`
  `))}function eIe(a){return a.indexOf(`
`)!==-1}function $Y(a){return a!=null&&a.some(eIe)}function tIe(a){return w2e(a)||S2e(a)||A2e(a)}function w2e(a){return a.kind===Et.OPERATION_DEFINITION||a.kind===Et.FRAGMENT_DEFINITION}function rIe(a){return a.kind===Et.FIELD||a.kind===Et.FRAGMENT_SPREAD||a.kind===Et.INLINE_FRAGMENT}function nIe(a){return a.kind===Et.VARIABLE||a.kind===Et.INT||a.kind===Et.FLOAT||a.kind===Et.STRING||a.kind===Et.BOOLEAN||a.kind===Et.NULL||a.kind===Et.ENUM||a.kind===Et.LIST||a.kind===Et.OBJECT}function aIe(a){return a.kind===Et.NAMED_TYPE||a.kind===Et.LIST_TYPE||a.kind===Et.NON_NULL_TYPE}function S2e(a){return a.kind===Et.SCHEMA_DEFINITION||E2e(a)||a.kind===Et.DIRECTIVE_DEFINITION}function E2e(a){return a.kind===Et.SCALAR_TYPE_DEFINITION||a.kind===Et.OBJECT_TYPE_DEFINITION||a.kind===Et.INTERFACE_TYPE_DEFINITION||a.kind===Et.UNION_TYPE_DEFINITION||a.kind===Et.ENUM_TYPE_DEFINITION||a.kind===Et.INPUT_OBJECT_TYPE_DEFINITION}function A2e(a){return a.kind===Et.SCHEMA_EXTENSION||O2e(a)}function O2e(a){return a.kind===Et.SCALAR_TYPE_EXTENSION||a.kind===Et.OBJECT_TYPE_EXTENSION||a.kind===Et.INTERFACE_TYPE_EXTENSION||a.kind===Et.UNION_TYPE_EXTENSION||a.kind===Et.ENUM_TYPE_EXTENSION||a.kind===Et.INPUT_OBJECT_TYPE_EXTENSION}const iIe=Object.freeze(Object.defineProperty({__proto__:null,BREAK:Lg,DirectiveLocation:v2e,Kind:Et,Lexer:g2e,Location:iB,Source:nB,Token:Sn,TokenKind:pt,getLocation:AF,getVisitFn:OF,isDefinitionNode:tIe,isExecutableDefinitionNode:w2e,isSelectionNode:rIe,isTypeDefinitionNode:E2e,isTypeExtensionNode:O2e,isTypeNode:aIe,isTypeSystemDefinitionNode:S2e,isTypeSystemExtensionNode:A2e,isValueNode:nIe,parse:GNe,parseType:XNe,parseValue:$Ne,print:WNe,printLocation:h2e,printSourceLocation:aB,visit:T2e,visitInParallel:JNe},Symbol.toStringTag,{value:"Module"})),uIe=VF(iIe);var C2={},df={},L2={},ff={},Fs={},XY;function oIe(){if(XY)return Fs;XY=1,Object.defineProperty(Fs,"__esModule",{value:!0}),Fs.removeDotSegmentsOfPath=Fs.removeDotSegments=Fs.resolve=void 0;function a(r,t){t=t||"";const i=t.indexOf("#");if(i>0&&(t=t.substr(0,i)),!r.length){if(t.indexOf(":")<0)throw new Error(`Found invalid baseIRI '${t}' for value '${r}'`);return t}if(r.startsWith("?")){const p=t.indexOf("?");return p>0&&(t=t.substr(0,p)),t+r}if(r.startsWith("#"))return t+r;if(!t.length){const p=r.indexOf(":");if(p<0)throw new Error(`Found invalid relative IRI '${r}' for a missing baseIRI`);return u(r,p)}const o=r.indexOf(":");if(o>=0)return u(r,o);const l=t.indexOf(":");if(l<0)throw new Error(`Found invalid baseIRI '${t}' for value '${r}'`);const s=t.substr(0,l+1);if(r.indexOf("//")===0)return s+u(r,o);let c;if(t.indexOf("//",l)===l+1){if(c=t.indexOf("/",l+3),c<0)return t.length>l+3?t+"/"+u(r,o):s+u(r,o)}else if(c=t.indexOf("/",l+1),c<0)return s+u(r,o);if(r.indexOf("/")===0)return t.substr(0,c)+e(r);let d=t.substr(c);const f=d.lastIndexOf("/");return f>=0&&f<d.length-1&&(d=d.substr(0,f+1),r[0]==="."&&r[1]!=="."&&r[1]!=="/"&&r[2]&&(r=r.substr(1))),r=d+r,r=e(r),t.substr(0,c)+r}Fs.resolve=a;function e(r){const t=[];let i=0;for(;i<r.length;)switch(r[i]){case"/":if(r[i+1]===".")if(r[i+2]==="."){if(!n(r[i+3])){t.push([]),i++;break}t.pop(),r[i+3]||t.push([]),i+=3}else{if(!n(r[i+2])){t.push([]),i++;break}r[i+2]||t.push([]),i+=2}else t.push([]),i++;break;case"#":case"?":t.length||t.push([]),t[t.length-1].push(r.substr(i)),i=r.length;break;default:t.length||t.push([]),t[t.length-1].push(r[i]),i++;break}return"/"+t.map(o=>o.join("")).join("/")}Fs.removeDotSegments=e;function u(r,t){let i=t+1;t>=0?r[t+1]==="/"&&r[t+2]==="/"&&(i=t+3):r[0]==="/"&&r[1]==="/"&&(i=2);const o=r.indexOf("/",i);if(o<0)return r;const l=r.substr(0,o),s=r.substr(o);return l+e(s)}Fs.removeDotSegmentsOfPath=u;function n(r){return!r||r==="#"||r==="?"||r==="/"}return Fs}var KY;function Xn(){return KY||(KY=1,(function(a){var e=ff&&ff.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t),Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[t]}})}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ff&&ff.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(oIe(),a)})(ff)),ff}var aM={},JY;function dP(){return JY||(JY=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ERROR_CODES=a.ErrorCoded=void 0;class e extends Error{constructor(n,r){super(n),this.code=r}}a.ErrorCoded=e,(function(u){u.COLLIDING_KEYWORDS="colliding keywords",u.CONFLICTING_INDEXES="conflicting indexes",u.CYCLIC_IRI_MAPPING="cyclic IRI mapping",u.INVALID_ID_VALUE="invalid @id value",u.INVALID_INDEX_VALUE="invalid @index value",u.INVALID_NEST_VALUE="invalid @nest value",u.INVALID_PREFIX_VALUE="invalid @prefix value",u.INVALID_PROPAGATE_VALUE="invalid @propagate value",u.INVALID_REVERSE_VALUE="invalid @reverse value",u.INVALID_IMPORT_VALUE="invalid @import value",u.INVALID_VERSION_VALUE="invalid @version value",u.INVALID_BASE_IRI="invalid base IRI",u.INVALID_CONTAINER_MAPPING="invalid container mapping",u.INVALID_CONTEXT_ENTRY="invalid context entry",u.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",u.INVALID_DEFAULT_LANGUAGE="invalid default language",u.INVALID_INCLUDED_VALUE="invalid @included value",u.INVALID_IRI_MAPPING="invalid IRI mapping",u.INVALID_JSON_LITERAL="invalid JSON literal",u.INVALID_KEYWORD_ALIAS="invalid keyword alias",u.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",u.INVALID_LANGUAGE_MAPPING="invalid language mapping",u.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",u.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",u.INVALID_LOCAL_CONTEXT="invalid local context",u.INVALID_REMOTE_CONTEXT="invalid remote context",u.INVALID_REVERSE_PROPERTY="invalid reverse property",u.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",u.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",u.INVALID_SCOPED_CONTEXT="invalid scoped context",u.INVALID_SCRIPT_ELEMENT="invalid script element",u.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",u.INVALID_TERM_DEFINITION="invalid term definition",u.INVALID_TYPE_MAPPING="invalid type mapping",u.INVALID_TYPE_VALUE="invalid type value",u.INVALID_TYPED_VALUE="invalid typed value",u.INVALID_VALUE_OBJECT="invalid value object",u.INVALID_VALUE_OBJECT_VALUE="invalid value object value",u.INVALID_VOCAB_MAPPING="invalid vocab mapping",u.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",u.KEYWORD_REDEFINITION="keyword redefinition",u.LOADING_DOCUMENT_FAILED="loading document failed",u.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",u.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",u.PROCESSING_MODE_CONFLICT="processing mode conflict",u.PROTECTED_TERM_REDEFINITION="protected term redefinition",u.CONTEXT_OVERFLOW="context overflow",u.INVALID_BASE_DIRECTION="invalid base direction",u.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",u.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",u.INVALID_EMBEDDED_NODE="invalid embedded node",u.INVALID_ANNOTATION="invalid annotation"})(a.ERROR_CODES||(a.ERROR_CODES={}))})(aM)),aM}var q2={},iM,WY;function X4(){if(WY)return iM;WY=1;var a=/^utf-?8|ascii|utf-?16-?le|ucs-?2|base-?64|latin-?1$/i,e=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,u=/\s|\uFEFF|\xA0/,n=/\r?\n[\x20\x09]+/g,r=/[;,"]/,t=/[;,"]|\s/,i=/^[!#$%&'*+\-\.^_`|~\da-zA-Z]+$/,o={IDLE:1,URI:2,ATTR:4};function l(h){return h.replace(e,"")}function s(h){return u.test(h)}function c(h,g){for(;s(h[g]);)g++;return g}function d(h){return t.test(h)||!i.test(h)}function f(h,g){return Object.keys(h).length===Object.keys(g).length&&Object.keys(h).every(v=>v in g&&h[v]===g[v])}class p{constructor(g){this.refs=[],g&&this.parse(g)}rel(g){for(var v=[],m=g.toLowerCase(),T=0;T<this.refs.length;T++)typeof this.refs[T].rel=="string"&&this.refs[T].rel.toLowerCase()===m&&v.push(this.refs[T]);return v}get(g,v){g=g.toLowerCase(),v=v.toLowerCase();for(var m=[],T=0;T<this.refs.length;T++)typeof this.refs[T][g]=="string"&&this.refs[T][g].toLowerCase()===v&&m.push(this.refs[T]);return m}set(g){return this.refs.push(g),this}setUnique(g){return this.refs.some(v=>f(v,g))||this.refs.push(g),this}has(g,v){g=g.toLowerCase(),v=v.toLowerCase();for(var m=0;m<this.refs.length;m++)if(typeof this.refs[m][g]=="string"&&this.refs[m][g].toLowerCase()===v)return!0;return!1}parse(g,w){w=w||0,g=w?g.slice(w):g,g=l(g).replace(n,"");for(var m=o.IDLE,T=g.length,w=0,E=null;w<T;)if(m===o.IDLE){if(s(g[w])){w++;continue}else if(g[w]==="<"){E!=null&&(E.rel!=null?this.refs.push(...p.expandRelations(E)):this.refs.push(E));var S=g.indexOf(">",w);if(S===-1)throw new Error("Expected end of URI delimiter at offset "+w);E={uri:g.slice(w+1,S)},w=S,m=o.URI}else throw new Error('Unexpected character "'+g[w]+'" at offset '+w);w++}else if(m===o.URI)if(s(g[w])){w++;continue}else if(g[w]===";")m=o.ATTR,w++;else if(g[w]===",")m=o.IDLE,w++;else throw new Error('Unexpected character "'+g[w]+'" at offset '+w);else if(m===o.ATTR){if(g[w]===";"||s(g[w])){w++;continue}var S=g.indexOf("=",w);S===-1&&(S=g.indexOf(";",w)),S===-1&&(S=g.length);var N=l(g.slice(w,S)).toLowerCase(),j="";if(w=S+1,w=c(g,w),g[w]==='"')for(w++;w<T;){if(g[w]==='"'){w++;break}g[w]==="\\"&&w++,j+=g[w],w++}else{for(var S=w+1;!r.test(g[S])&&S<T;)S++;j=g.slice(w,S),w=S}switch(E[N]&&p.isSingleOccurenceAttr(N)||(N[N.length-1]==="*"?E[N]=p.parseExtendedValue(j):(j=N==="type"?j.toLowerCase():j,E[N]!=null?Array.isArray(E[N])?E[N].push(j):E[N]=[E[N],j]:E[N]=j)),g[w]){case",":m=o.IDLE;break;case";":m=o.ATTR;break}w++}else throw new Error('Unknown parser state "'+m+'"');return E!=null&&(E.rel!=null?this.refs.push(...p.expandRelations(E)):this.refs.push(E)),E=null,this}toString(){for(var g=[],v="",m=null,T=0;T<this.refs.length;T++)m=this.refs[T],v=Object.keys(this.refs[T]).reduce(function(w,E){return E==="uri"?w:w+"; "+p.formatAttribute(E,m[E])},"<"+m.uri+">"),g.push(v);return g.join(", ")}}return p.isCompatibleEncoding=function(h){return a.test(h)},p.parse=function(h,g){return new p().parse(h,g)},p.isSingleOccurenceAttr=function(h){return h==="rel"||h==="type"||h==="media"||h==="title"||h==="title*"},p.isTokenAttr=function(h){return h==="rel"||h==="type"||h==="anchor"},p.escapeQuotes=function(h){return h.replace(/"/g,'\\"')},p.expandRelations=function(h){var g=h.rel.split(" ");return g.map(function(v){var m=Object.assign({},h);return m.rel=v,m})},p.parseExtendedValue=function(h){var g=/([^']+)?(?:'([^']*)')?(.+)/.exec(h);return{language:g[2].toLowerCase(),encoding:p.isCompatibleEncoding(g[1])?null:g[1].toLowerCase(),value:p.isCompatibleEncoding(g[1])?decodeURIComponent(g[3]):g[3]}},p.formatExtendedAttribute=function(h,g){var v=(g.encoding||"utf-8").toUpperCase(),m=g.language||"en",T="";return Buffer.isBuffer(g.value)&&p.isCompatibleEncoding(v)?T=g.value.toString(v):Buffer.isBuffer(g.value)?T=g.value.toString("hex").replace(/[0-9a-f]{2}/gi,"%$1"):T=encodeURIComponent(g.value),h+"="+v+"'"+m+"'"+T},p.formatAttribute=function(h,g){return Array.isArray(g)?g.map(v=>p.formatAttribute(h,v)).join("; "):h[h.length-1]==="*"||typeof g!="string"?p.formatExtendedAttribute(h,g):(p.isTokenAttr(h)?g=d(g)?'"'+p.escapeQuotes(g)+'"':p.escapeQuotes(g):d(g)&&(g=encodeURIComponent(g),g=g.replace(/%20/g," ").replace(/%2C/g,",").replace(/%3B/g,";"),g='"'+g+'"'),h+"="+g)},iM=p,iM}var YY;function x2e(){if(YY)return q2;YY=1,Object.defineProperty(q2,"__esModule",{value:!0}),q2.FetchDocumentLoader=void 0;const a=dP(),e=X4(),u=Xn();class n{constructor(t){this.fetcher=t}async load(t){const i=await(this.fetcher||fetch)(t,{headers:new Headers({accept:"application/ld+json"})});if(i.ok&&i.headers){let o=i.headers.get("Content-Type");if(o){const l=o.indexOf(";");l>0&&(o=o.substr(0,l))}if(o==="application/ld+json")return await i.json();if(i.headers.has("Link")){let l;if(i.headers.forEach((s,c)=>{if(c==="link"){const d=(0,e.parse)(s);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(l)throw new Error("Multiple JSON-LD alternate links were found on "+t);l=(0,u.resolve)(f.uri,t)}}}),l)return this.load(l)}throw new a.ErrorCoded(`Unsupported JSON-LD media type ${o}`,a.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(i.statusText||`Status code: ${i.status}`)}}return q2.FetchDocumentLoader=n,q2}var uM={},B2={},ZY;function oB(){if(ZY)return B2;ZY=1,Object.defineProperty(B2,"__esModule",{value:!0}),B2.Util=void 0;class a{static isCompactIri(u){return u.indexOf(":")>0&&!(u&&u[0]==="#")}static getPrefix(u,n){if(u&&u[0]==="#")return null;const r=u.indexOf(":");if(r>=0){if(u.length>r+1&&u.charAt(r+1)==="/"&&u.charAt(r+2)==="/")return null;const t=u.substr(0,r);if(t==="_")return null;if(n[t])return t}return null}static getContextValueId(u){if(u===null||typeof u=="string")return u;const n=u["@id"];return n||null}static isSimpleTermDefinitionPrefix(u,n){return!a.isPotentialKeyword(u)&&(n.allowPrefixNonGenDelims||typeof u=="string"&&(u[0]==="_"||a.isPrefixIriEndingWithGenDelim(u)))}static isPotentialKeyword(u){return typeof u=="string"&&a.KEYWORD_REGEX.test(u)}static isPrefixIriEndingWithGenDelim(u){return a.ENDS_WITH_GEN_DELIM.test(u)}static isPrefixValue(u){return u&&(typeof u=="string"||u&&typeof u=="object")}static isValidIri(u){return!!(u&&a.IRI_REGEX.test(u))}static isValidIriWeak(u){return!!u&&u[0]!==":"&&a.IRI_REGEX_WEAK.test(u)}static isValidKeyword(u){return a.VALID_KEYWORDS[u]}static isTermProtected(u,n){const r=u[n];return typeof r!="string"&&r&&r["@protected"]}static hasProtectedTerms(u){for(const n of Object.keys(u))if(a.isTermProtected(u,n))return!0;return!1}static isReservedInternalKeyword(u){return u.startsWith("@__")}static deepEqual(u,n){const r=Object.keys(u),t=Object.keys(n);return r.length!==t.length?!1:r.every(i=>{const o=u[i],l=n[i];return o===l||o!==null&&l!==null&&typeof o=="object"&&typeof l=="object"&&this.deepEqual(o,l)})}}return a.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,a.IRI_REGEX_WEAK=/(?::[^:])|\//,a.KEYWORD_REGEX=/^@[a-z]+$/i,a.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,a.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,a.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,a.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},a.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],a.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],a.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],a.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],a.CONTAINERS_1_0=["@list","@set","@index"],B2.Util=a,B2}var eZ;function R2e(){return eZ||(eZ=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.defaultExpandOptions=a.JsonLdContextNormalized=void 0;const e=Xn(),u=dP(),n=oB();class r{constructor(i){this.contextRaw=i}getContextRaw(){return this.contextRaw}expandTerm(i,o,l=a.defaultExpandOptions){const s=this.contextRaw[i];if(s===null||s&&s["@id"]===null)return null;let c=!0;if(s&&o){const v=n.Util.getContextValueId(s);if(v&&v!==i)if(typeof v!="string"||!n.Util.isValidIri(v)&&!n.Util.isValidKeyword(v))n.Util.isPotentialKeyword(v)||(c=!1);else return v}const d=n.Util.getPrefix(i,this.contextRaw),f=this.contextRaw["@vocab"],p=(!!f||f==="")&&f.indexOf(":")<0,h=this.contextRaw["@base"],g=n.Util.isPotentialKeyword(i);if(d){const v=this.contextRaw[d],m=n.Util.getContextValueId(v);if(m){if(typeof v=="string"||!l.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(m,l))return i}else if(m[0]!=="_"&&!g&&!v["@prefix"]&&!(i in this.contextRaw))return i;return m+i.substr(d.length+1)}}else if(o&&(f||f===""||l.allowVocabRelativeToBase&&h&&p)&&!g&&!n.Util.isCompactIri(i))if(p){if(l.allowVocabRelativeToBase)return(f||h?(0,e.resolve)(f,h):"")+i;throw new u.ErrorCoded(`Relative vocab expansion for term '${i}' with vocab '${f}' is not allowed.`,u.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+i;else if(!o&&h&&!g&&!n.Util.isCompactIri(i))return(0,e.resolve)(i,h);if(c)return i;throw new u.ErrorCoded(`Invalid IRI mapping found for context entry '${i}': '${JSON.stringify(s)}'`,u.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(i,o){if(o&&this.contextRaw["@vocab"]&&i.startsWith(this.contextRaw["@vocab"]))return i.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&i.startsWith(this.contextRaw["@base"]))return i.substr(this.contextRaw["@base"].length);const l={prefix:"",suffix:i};for(const s in this.contextRaw){const c=this.contextRaw[s];if(c&&!n.Util.isPotentialKeyword(s)){const d=n.Util.getContextValueId(c);if(i.startsWith(d)){const f=i.substr(d.length);if(f)f.length<l.suffix.length&&(l.prefix=s,l.suffix=f);else if(o)return s}}}return l.prefix?l.prefix+":"+l.suffix:i}}a.JsonLdContextNormalized=r,a.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(uM)),uM}var tZ;function sIe(){if(tZ)return L2;tZ=1,Object.defineProperty(L2,"__esModule",{value:!0}),L2.ContextParser=void 0;const a=Xn(),e=dP(),u=x2e(),n=R2e(),r=oB();class t{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new u.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,l,s){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,s);if(!r.Util.REGEX_LANGUAGE_TAG.test(o)){if(l)throw new e.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,s);return!1}return!0}static validateDirection(o,l){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);if(!r.Util.REGEX_DIRECTION_TAG.test(o)){if(l)throw new e.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const l of Object.keys(o)){let s=o[l];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||r.Util.isValidKeyword(s["@reverse"]))throw new e.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);s=o[l]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],r.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return o}expandPrefixedTerms(o,l,s){const c=o.getContextRaw();for(const d of s||Object.keys(c))if(r.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!r.Util.isReservedInternalKeyword(d)){const f=c[d];if(r.Util.isPotentialKeyword(d)&&r.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof c[d]=="object"&&!(c[d]["@protected"]||c[d]["@container"]==="@set")))throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.KEYWORD_REDEFINITION);if(r.Util.ALIAS_RANGE_BLACKLIST.indexOf(r.Util.getContextValueId(f))>=0)throw new e.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&r.Util.isPotentialKeyword(r.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new e.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);for(;r.Util.isPrefixValue(c[d]);){const p=c[d];let h=!1;if(typeof p=="string")c[d]=o.expandTerm(p,!0),h=h||p!==c[d];else{const g=p["@id"],v=p["@type"],m=!("@prefix"in p)||r.Util.isValidIri(d);if("@id"in p)g!=null&&typeof g=="string"&&(c[d]=Object.assign(Object.assign({},c[d]),{"@id":o.expandTerm(g,!0)}),h=h||g!==c[d]["@id"]);else if(!r.Util.isPotentialKeyword(d)&&m){const T=o.expandTerm(d,!0);T!==d&&(c[d]=Object.assign(Object.assign({},c[d]),{"@id":T}),h=!0)}if(v&&typeof v=="string"&&v!=="@vocab"&&(!p["@container"]||!p["@container"]["@type"])&&m){let T=o.expandTerm(v,!0);l&&v===T&&(T=o.expandTerm(v,!1)),T!==v&&(h=!0,c[d]=Object.assign(Object.assign({},c[d]),{"@type":T}))}}if(!h)break}}}normalize(o,{processingMode:l,normalizeLanguageTags:s}){if(s||l===1)for(const c of Object.keys(o))if(c==="@language"&&typeof o[c]=="string")o[c]=o[c].toLowerCase();else{const d=o[c];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[c]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const l of Object.keys(o)){const s=o[l];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")o[l]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const c={};for(const d of s["@container"])c[d]=!0;o[l]=Object.assign(Object.assign({},s),{"@container":c})}}}}applyScopedProtected(o,{processingMode:l},s){if(l&&l>=1.1&&o["@protected"]){for(const c of Object.keys(o))if(!r.Util.isReservedInternalKeyword(c)&&!r.Util.isPotentialKeyword(c)&&!r.Util.isTermProtected(o,c)){const d=o[c];d&&typeof d=="object"?"@protected"in o[c]||(o[c]=Object.assign(Object.assign({},o[c]),{"@protected":!0})):(o[c]={"@id":d,"@protected":!0},r.Util.isSimpleTermDefinitionPrefix(d,s)&&(o[c]=Object.assign(Object.assign({},o[c]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,l,s,c){for(const d of c??Object.keys(l))if(r.Util.isTermProtected(o,d)&&(typeof l[d]=="string"?l[d]={"@id":l[d],"@protected":!0}:l[d]=Object.assign(Object.assign({},l[d]),{"@protected":!0}),!r.Util.deepEqual(o[d],l[d])))throw new e.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(r.Util.getContextValueId(o[d]))} to ${JSON.stringify(r.Util.getContextValueId(l[d]))}`,e.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:l}){for(const s of Object.keys(o)){if(r.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new e.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(o[s])}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);const c=o[s],d=typeof c;if(r.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(c!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @vocab IRI: ${c}`,e.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(c!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @base IRI: ${o[s]}`,e.ERROR_CODES.INVALID_BASE_IRI);break;case"language":c!==null&&t.validateLanguage(c,!0,e.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(c!==null&&d!=="number")throw new e.ErrorCoded(`Found an invalid @version number: ${c}`,e.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":c!==null&&t.validateDirection(c,!0);break;case"propagate":if(l===1)throw new e.ErrorCoded(`Found an illegal @propagate keyword: ${c}`,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(c!==null&&d!=="boolean")throw new e.ErrorCoded(`Found an invalid @propagate value: ${c}`,e.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(r.Util.isValidKeyword(s)&&r.Util.isValidKeyword(r.Util.getContextValueId(c)))throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${r.Util.getContextValueId(c)}'`,e.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(c!==null)switch(d){case"string":if(r.Util.getPrefix(c,o)===s)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(c==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${c}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(c)&&c!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${c}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!r.Util.isCompactIri(s)&&!("@id"in c)&&(c["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new e.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(c)){const p=c[f];if(p)switch(f){case"@id":if(r.Util.isValidKeyword(p)&&p!=="@type"&&p!=="@id"&&p!=="@graph"&&p!=="@nest")throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(p==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(p)&&p!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof p!="string")throw new e.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.getPrefix(p,o)===s)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(c["@container"]==="@type"&&p!=="@id"&&p!=="@vocab")throw new e.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${p}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof p!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(p!=="@id"&&p!=="@vocab"&&(l===1||p!=="@json")&&(l===1||p!=="@none")&&(p[0]==="_"||!r.Util.isValidIri(p)))throw new e.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${p}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof p=="string"&&c["@id"]&&c["@id"]!==p)throw new e.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${p}' and '${c["@id"]}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in c)throw new e.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(l===1&&(Object.keys(p).length>1||r.Util.CONTAINERS_1_0.indexOf(Object.keys(p)[0])<0))throw new e.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(p)}') in 1.0, must be only one of ${r.Util.CONTAINERS_1_0.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const h of Object.keys(p)){if(h==="@list"&&c["@reverse"])throw new e.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(r.Util.CONTAINERS.indexOf(h)<0)throw new e.ErrorCoded(`Invalid term @container for '${s}' ('${h}'), must be one of ${r.Util.CONTAINERS.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":t.validateLanguage(p,!0,e.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":t.validateDirection(p,!0);break;case"@prefix":if(p!==null&&typeof p!="boolean")throw new e.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in c)&&!r.Util.isValidIri(s))throw new e.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(l===1||!c["@container"]||!c["@container"]["@index"])throw new e.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(r.Util.isPotentialKeyword(p)&&p!=="@nest")throw new e.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new e.ErrorCoded(`Found an invalid term value: '${s}': '${c}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,l,s){return typeof o=="string"||(s&&!("@base"in o)&&l.parentContext&&typeof l.parentContext=="object"&&"@base"in l.parentContext&&(o["@base"]=l.parentContext["@base"],l.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),l.baseIRI&&!l.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!r.Util.isValidIri(o["@base"])&&(o["@base"]=(0,a.resolve)(o["@base"],l.parentContext&&l.parentContext["@base"]||l.baseIRI)):(o["@base"]=l.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,l){if(!r.Util.isValidIri(o))try{o=(0,a.resolve)(o,l)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,l,s){for(const c of s??Object.keys(o)){const d=o[c];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!l.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[c]:Object.assign({},o[c])});delete f[c]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},l),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new e.ErrorCoded(f.message,e.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[c]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},l),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,l={},s={}){const{baseIRI:c,parentContext:d,external:f,processingMode:p=t.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:h,ignoreProtection:g,minimalProcessing:v}=l,m=l.remoteContexts||{};if(Object.keys(m).length>=this.remoteContextsDepthLimit)throw new e.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(m),e.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!g&&d&&r.Util.hasProtectedTerms(d))throw new e.ErrorCoded("Illegal context nullification when terms are protected",e.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},l,!1))}else if(typeof o=="string"){const T=this.normalizeContextIri(o,c),w=this.getOverriddenLoad(T,l);if(w)return new n.JsonLdContextNormalized(w);const E=await this.parse(await this.load(T),Object.assign(Object.assign({},l),{baseIRI:T,external:!0,remoteContexts:Object.assign(Object.assign({},m),{[T]:!0})}));return this.applyBaseEntry(E.getContextRaw(),l,!0),E}else if(Array.isArray(o)){const T=[],w=await Promise.all(o.map((S,N)=>{if(typeof S=="string"){const j=this.normalizeContextIri(S,c);T[N]=j;const q=this.getOverriddenLoad(j,l);return q||this.load(j)}else return S}));if(v)return new n.JsonLdContextNormalized(w);const E=await w.reduce((S,N,j)=>S.then(q=>this.parse(N,Object.assign(Object.assign({},l),{baseIRI:T[j]||l.baseIRI,external:!!T[j]||l.external,parentContext:q.getContextRaw(),remoteContexts:T[j]?Object.assign(Object.assign({},m),{[T[j]]:!0}):m}),{skipValidation:j<w.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(E.getContextRaw(),l,!0),E}else if(typeof o=="object"){if("@context"in o)return await this.parse(o["@context"],l);if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,l,!0),this.containersToHash(o),v)return new n.JsonLdContextNormalized(o);let T={};if("@import"in o)if(p>=1.1){if(typeof o["@import"]!="string")throw new e.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],e.ERROR_CODES.INVALID_IMPORT_VALUE);T=await this.loadImportContext(this.normalizeContextIri(o["@import"],c)),delete o["@import"]}else throw new e.ErrorCoded("Context importing is not supported in JSON-LD 1.0",e.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(T,{processingMode:p},n.defaultExpandOptions);const w=Object.assign(T,o);this.idifyReverseTerms(w),this.normalize(w,{processingMode:p,normalizeLanguageTags:h}),this.applyScopedProtected(w,{processingMode:p},n.defaultExpandOptions);const E=Object.keys(w),S=[];if(typeof d=="object")for(const j in d)j in w?S.push(j):w[j]=d[j];await this.parseInnerContexts(w,l,E);const N=new n.JsonLdContextNormalized(w);return(w&&w["@version"]||t.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?w["@vocab"]=d["@vocab"]+o["@vocab"]:(r.Util.isCompactIri(o["@vocab"])||o["@vocab"]in w)&&(w["@vocab"]=N.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(N,this.expandContentTypeToBase,E),!g&&d&&p>=1.1&&this.validateKeywordRedefinitions(d,w,n.defaultExpandOptions,S),this.validateContext&&!s.skipValidation&&this.validate(w,{processingMode:p}),N}else throw new e.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,e.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const l=this.documentCache[o];if(l)return l;let s;try{s=await this.documentLoader.load(o)}catch(c){throw new e.ErrorCoded(`Failed to load remote context ${o}: ${c.message}`,e.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new e.ErrorCoded(`Missing @context in remote context at ${o}`,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=s["@context"]}getOverriddenLoad(o,l){if(o in(l.remoteContexts||{})){if(l.ignoreRemoteScopedContexts)return o;throw new e.ErrorCoded("Detected a cyclic context inclusion of "+o,e.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let l=await this.load(o);if(typeof l!="object"||Array.isArray(l))throw new e.ErrorCoded("An imported context must be a single object: "+o,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in l)throw new e.ErrorCoded("An imported context can not import another context: "+o,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);return l=Object.assign({},l),this.containersToHash(l),l}}return t.DEFAULT_PROCESSING_MODE=1.1,L2.ContextParser=t,L2}var oM={},rZ;function cIe(){return rZ||(rZ=1,Object.defineProperty(oM,"__esModule",{value:!0})),oM}var sM={},nZ;function lIe(){return nZ||(nZ=1,Object.defineProperty(sM,"__esModule",{value:!0})),sM}var aZ;function dIe(){return aZ||(aZ=1,(function(a){var e=df&&df.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=df&&df.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(sIe(),a),u(dP(),a),u(x2e(),a),u(cIe(),a),u(lIe(),a),u(R2e(),a),u(oB(),a)})(df)),df}var iZ;function N2e(){if(iZ)return C2;iZ=1,Object.defineProperty(C2,"__esModule",{value:!0}),C2.Util=void 0;const a=Rr(),e=dIe(),u=rB();class n{constructor(t){this.nodeHandlers={},this.nodeValueHandlers={},this.directiveNodeHandlers={},this.settings=t,this.dataFactory=t.dataFactory||new a.DataFactory,this.operationFactory=new u.Factory(this.dataFactory),this.contextParser=new e.ContextParser}registerNodeHandler(t){this.nodeHandlers[t.targetKind]=t}registerNodeValueHandler(t){this.nodeValueHandlers[t.targetKind]=t}registerDirectiveNodeHandler(t){this.directiveNodeHandlers[t.targetKind]=t}handleNode(t,i){const o=this.nodeHandlers[t.kind];if(!o)throw new Error(`Unsupported GraphQL node '${t.kind}'`);return o.handle(t,i)}handleNodeValue(t,i,o){const l=this.nodeValueHandlers[t.kind];if(!l)throw new Error(`Unsupported GraphQL value node '${t.kind}'`);return l.handle(t,i,o)}handleDirectiveNode(t,i){const o=this.directiveNodeHandlers[t.directive.name.value];return o?o.handle(t,i):null}joinOperations(t){if(t.length===1)return t[0];const i=[],o=[];for(const l of t)l.type==="bgp"?i.push(l):o.push(l);if(i.length===t.length)return this.joinOperationsAsBgp(i);if(i.length===t.length-1&&o[0].type==="leftjoin"&&o[0].input[0].type==="bgp"){const l=o[0];return i.push(l.input[0]),this.operationFactory.createLeftJoin(this.joinOperationsAsBgp(i),l.input[1])}else return o.length===t.length?this.joinOperationsAsNestedJoin(o):this.joinOperationsAsNestedJoin([this.joinOperationsAsBgp(i),this.joinOperationsAsNestedJoin(o)])}joinOperationsAsBgp(t){return this.operationFactory.createBgp([].concat.apply([],t.map(i=>i.patterns)))}joinOperationsAsNestedJoin(t){return this.operationFactory.createJoin(t)}appendFieldToPath(t,i){return t.concat([i])}getFieldLabel(t){return(t.alias?t.alias:t.name).value}nameToVariable(t,i){return this.dataFactory.variable((i.path.length?i.path.join(this.settings.variableDelimiter)+this.settings.variableDelimiter:"")+t)}valueToNamedNode(t,i){const o=i.expandTerm(t,!0);if(this.settings.requireContext&&!o)throw new Error("No context entry was found for "+t);return this.dataFactory.namedNode(o||t)}getArgument(t,i){if(t){for(const o of t)if(o.name.value===i)return o}}newTypePattern(t,i,o){return this.operationFactory.createPattern(t,this.dataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),this.valueToNamedNode(i.name.value,o.context),o.graph)}createQuadPattern(t,i,o,l,s){const c=this.valueToNamedNode(i.value,s);return s&&s.getContextRaw()[i.value]&&s.getContextRaw()[i.value]["@reverse"]?this.operationFactory.createPattern(o,c,t,l):this.operationFactory.createPattern(t,c,o,l)}createQuadPath(t,i,o,l,s,c){const d=this.valueToNamedNode(i.value,c);let f=this.operationFactory.createLink(d);for(const p of o.values){if(p.kind!=="EnumValue")throw new Error("Invalid value type for 'alt' argument, must be EnumValue, but got "+p.kind);f=this.operationFactory.createAlt([f,this.operationFactory.createLink(this.valueToNamedNode(p.value,c))])}return c&&c.getContextRaw()[i.value]&&c.getContextRaw()[i.value]["@reverse"]?this.operationFactory.createPath(l,f,t,s):this.operationFactory.createPath(t,f,l,s)}}return C2.Util=n,C2}var uZ;function fIe(){if(uZ)return lf;uZ=1;var a=lf&&lf.__awaiter||function(o,l,s,c){function d(f){return f instanceof s?f:new s(function(p){p(f)})}return new(s||(s=Promise))(function(f,p){function h(m){try{v(c.next(m))}catch(T){p(T)}}function g(m){try{v(c.throw(m))}catch(T){p(T)}}function v(m){m.done?f(m.value):d(m.value).then(h,g)}v((c=c.apply(o,l||[])).next())})};Object.defineProperty(lf,"__esModule",{value:!0}),lf.Converter=void 0;const e=uIe,u=l2e(),n=c2e(),r=G4(),t=N2e();class i{constructor(l){l=l||{},l.variableDelimiter=l.variableDelimiter||"_",l.expressionVariableCounter=l.expressionVariableCounter||0,this.util=new t.Util(l),this.initializeNodeHandlers(l)}static registerNodeHandlers(l,s){l.registerNodeHandler(new u.NodeHandlerDocument(l,s)),l.registerNodeHandler(new u.NodeHandlerDefinitionOperation(l,s)),l.registerNodeHandler(new u.NodeHandlerDefinitionFragment(l,s)),l.registerNodeHandler(new u.NodeHandlerSelectionFragmentSpread(l,s)),l.registerNodeHandler(new u.NodeHandlerSelectionInlineFragment(l,s)),l.registerNodeHandler(new u.NodeHandlerSelectionField(l,s))}static registerNodeValueHandlers(l,s){l.registerNodeValueHandler(new u.NodeValueHandlerVariable(l,s)),l.registerNodeValueHandler(new u.NodeValueHandlerInt(l,s)),l.registerNodeValueHandler(new u.NodeValueHandlerFloat(l,s)),l.registerNodeValueHandler(new u.NodeValueHandlerString(l,s)),l.registerNodeValueHandler(new u.NodeValueHandlerBoolean(l,s)),l.registerNodeValueHandler(new u.NodeValueHandlerNull(l,s)),l.registerNodeValueHandler(new u.NodeValueHandlerEnum(l,s)),l.registerNodeValueHandler(new u.NodeValueHandlerList(l,s)),l.registerNodeValueHandler(new u.NodeValueHandlerObject(l,s))}static registerDirectiveNodeHandlers(l,s){l.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerInclude(l,s)),l.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerOptional(l,s)),l.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerPlural(l,s)),l.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerSingle(l,s)),l.registerDirectiveNodeHandler(new n.DirectiveNodeHandlerSkip(l,s))}graphqlToSparqlAlgebra(l,s,c){return a(this,void 0,void 0,function*(){return this.graphqlToSparqlAlgebraRawContext(l,yield this.util.contextParser.parse(s),c)})}graphqlToSparqlAlgebraRawContext(l,s,c){c=c||{};const d=typeof l=="string"?(0,e.parse)(l):l,f=this.indexFragments(d),p={context:s,fragmentDefinitions:f,graph:this.util.dataFactory.defaultGraph(),path:[],singularizeState:r.SingularizeState.PLURAL,singularizeVariables:c.singularizeVariables||{},subject:null,terminalVariables:[],variablesDict:c.variablesDict||{},variablesMetaDict:{}};return this.util.handleNode(d,p)}indexFragments(l){const s={},c=[];for(const d of l.definitions)d.kind==="FragmentDefinition"?s[d.name.value]=d:c.push(d);return l.definitions=c,s}initializeNodeHandlers(l){i.registerNodeHandlers(this.util,l),i.registerNodeValueHandlers(this.util,l),i.registerDirectiveNodeHandlers(this.util,l)}}return lf.Converter=i,lf}var cM={},oZ;function pIe(){return oZ||(oZ=1,Object.defineProperty(cM,"__esModule",{value:!0})),cM}var sZ;function hIe(){return sZ||(sZ=1,(function(a){var e=af&&af.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=af&&af.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(l2e(),a),u(fIe(),a),u(G4(),a),u(pIe(),a),u(N2e(),a)})(af)),af}var cZ;function yIe(){if(cZ)return l2;cZ=1,Object.defineProperty(l2,"__esModule",{value:!0}),l2.ActorQueryParseGraphql=void 0;const a=s2e(),e=lt(),u=De(),n=hIe();let r=class extends a.ActorQueryParse{constructor(i){super(i),this.graphqlToSparql=new n.Converter({requireContext:!0})}async test(i){return i.queryFormat?.language!=="graphql"?(0,u.failTest)("This actor can only parse GraphQL queries"):(0,u.passTestVoid)()}async run(i){const o=i.context.get(e.KeysInitQuery.jsonLdContext)||{},l={singularizeVariables:i.context.get(e.KeysInitQuery.graphqlSingularizeVariables)};return{operation:await this.graphqlToSparql.graphqlToSparqlAlgebra(i.query,o,l)}}};return l2.ActorQueryParseGraphql=r,l2}var lZ;function sB(){return lZ||(lZ=1,(function(a){var e=nf&&nf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=nf&&nf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(yIe(),a)})(nf)),nf}var pf={},U2={},hf={},Q2={},yf={},V2={},dZ;function I2e(){if(dZ)return V2;dZ=1,Object.defineProperty(V2,"__esModule",{value:!0}),V2.ActorAbstractMediaTyped=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}async run(n){if("handle"in n){const r=n;return{handle:await this.runHandle(r.handle,r.handleMediaType,n.context)}}if("mediaTypes"in n)return{mediaTypes:await this.getMediaTypes(n.context)};if("mediaTypeFormats"in n)return{mediaTypeFormats:await this.getMediaTypeFormats(n.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}async test(n){if("handle"in n){const r=n;return(await this.testHandle(r.handle,r.handleMediaType,n.context)).map(t=>({handle:t}))}return"mediaTypes"in n?(await this.testMediaType(n.context)).map(r=>({mediaTypes:r})):"mediaTypeFormats"in n?(await this.testMediaTypeFormats(n.context)).map(r=>({mediaTypeFormats:r})):(0,a.failTest)("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}};return V2.ActorAbstractMediaTyped=e,V2}var H2={},fZ;function mIe(){if(fZ)return H2;fZ=1,Object.defineProperty(H2,"__esModule",{value:!0}),H2.ActorAbstractMediaTypedFixed=void 0;const a=De(),e=I2e();let u=class extends e.ActorAbstractMediaTyped{constructor(r){super(r);const t=this.priorityScale||this.priorityScale===0?this.priorityScale:1;if(this.mediaTypePriorities)for(const[i,[o,l]]of Object.entries(this.mediaTypePriorities).entries())this.mediaTypePriorities[o]=t*l;this.mediaTypePriorities=Object.freeze(this.mediaTypePriorities),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats)}async testHandle(r,t,i){return!t||!(t in this.mediaTypePriorities)?(0,a.failTest)(`Unrecognized media type: ${t}`):await this.testHandleChecked(r,i)}async testMediaType(r){return(0,a.passTestVoid)()}async getMediaTypes(r){return this.mediaTypePriorities}async testMediaTypeFormats(r){return(0,a.passTestVoid)()}async getMediaTypeFormats(r){return this.mediaTypeFormats}};return H2.ActorAbstractMediaTypedFixed=u,H2}var pZ;function w1(){return pZ||(pZ=1,(function(a){var e=yf&&yf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=yf&&yf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(I2e(),a),u(mIe(),a)})(yf)),yf}var hZ;function bIe(){if(hZ)return Q2;hZ=1,Object.defineProperty(Q2,"__esModule",{value:!0}),Q2.ActorQueryResultSerialize=void 0;const a=w1();let e=class extends a.ActorAbstractMediaTyped{constructor(n){super(n)}};return Q2.ActorQueryResultSerialize=e,Q2}var k2={},yZ;function gIe(){if(yZ)return k2;yZ=1,Object.defineProperty(k2,"__esModule",{value:!0}),k2.ActorQueryResultSerializeFixedMediaTypes=void 0;const a=w1(),e=De();let u=class extends a.ActorAbstractMediaTypedFixed{constructor(r){super(r)}async testHandleChecked(r,t){return(0,e.passTestVoid)()}};return k2.ActorQueryResultSerializeFixedMediaTypes=u,k2}var mZ;function $o(){return mZ||(mZ=1,(function(a){var e=hf&&hf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=hf&&hf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(bIe(),a),u(gIe(),a)})(hf)),hf}var lM={exports:{}},dM={exports:{}},fM={},z2={},bZ;function vIe(){if(bZ)return z2;bZ=1,z2.byteLength=o,z2.toByteArray=s,z2.fromByteArray=f;for(var a=[],e=[],u=typeof Uint8Array<"u"?Uint8Array:Array,n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",r=0,t=n.length;r<t;++r)a[r]=n[r],e[n.charCodeAt(r)]=r;e[45]=62,e[95]=63;function i(p){var h=p.length;if(h%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var g=p.indexOf("=");g===-1&&(g=h);var v=g===h?0:4-g%4;return[g,v]}function o(p){var h=i(p),g=h[0],v=h[1];return(g+v)*3/4-v}function l(p,h,g){return(h+g)*3/4-g}function s(p){var h,g=i(p),v=g[0],m=g[1],T=new u(l(p,v,m)),w=0,E=m>0?v-4:v,S;for(S=0;S<E;S+=4)h=e[p.charCodeAt(S)]<<18|e[p.charCodeAt(S+1)]<<12|e[p.charCodeAt(S+2)]<<6|e[p.charCodeAt(S+3)],T[w++]=h>>16&255,T[w++]=h>>8&255,T[w++]=h&255;return m===2&&(h=e[p.charCodeAt(S)]<<2|e[p.charCodeAt(S+1)]>>4,T[w++]=h&255),m===1&&(h=e[p.charCodeAt(S)]<<10|e[p.charCodeAt(S+1)]<<4|e[p.charCodeAt(S+2)]>>2,T[w++]=h>>8&255,T[w++]=h&255),T}function c(p){return a[p>>18&63]+a[p>>12&63]+a[p>>6&63]+a[p&63]}function d(p,h,g){for(var v,m=[],T=h;T<g;T+=3)v=(p[T]<<16&16711680)+(p[T+1]<<8&65280)+(p[T+2]&255),m.push(c(v));return m.join("")}function f(p){for(var h,g=p.length,v=g%3,m=[],T=16383,w=0,E=g-v;w<E;w+=T)m.push(d(p,w,w+T>E?E:w+T));return v===1?(h=p[g-1],m.push(a[h>>2]+a[h<<4&63]+"==")):v===2&&(h=(p[g-2]<<8)+p[g-1],m.push(a[h>>10]+a[h>>4&63]+a[h<<2&63]+"=")),m.join("")}return z2}var GI={};var gZ;function _Ie(){return gZ||(gZ=1,GI.read=function(a,e,u,n,r){var t,i,o=r*8-n-1,l=(1<<o)-1,s=l>>1,c=-7,d=u?r-1:0,f=u?-1:1,p=a[e+d];for(d+=f,t=p&(1<<-c)-1,p>>=-c,c+=o;c>0;t=t*256+a[e+d],d+=f,c-=8);for(i=t&(1<<-c)-1,t>>=-c,c+=n;c>0;i=i*256+a[e+d],d+=f,c-=8);if(t===0)t=1-s;else{if(t===l)return i?NaN:(p?-1:1)*(1/0);i=i+Math.pow(2,n),t=t-s}return(p?-1:1)*i*Math.pow(2,t-n)},GI.write=function(a,e,u,n,r,t){var i,o,l,s=t*8-r-1,c=(1<<s)-1,d=c>>1,f=r===23?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:t-1,h=n?1:-1,g=e<0||e===0&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(o=isNaN(e)?1:0,i=c):(i=Math.floor(Math.log(e)/Math.LN2),e*(l=Math.pow(2,-i))<1&&(i--,l*=2),i+d>=1?e+=f/l:e+=f*Math.pow(2,1-d),e*l>=2&&(i++,l/=2),i+d>=c?(o=0,i=c):i+d>=1?(o=(e*l-1)*Math.pow(2,r),i=i+d):(o=e*Math.pow(2,d-1)*Math.pow(2,r),i=0));r>=8;a[u+p]=o&255,p+=h,o/=256,r-=8);for(i=i<<r|o,s+=r;s>0;a[u+p]=i&255,p+=h,i/=256,s-=8);a[u+p-h]|=g*128}),GI}var vZ;function Xo(){return vZ||(vZ=1,(function(a){const e=vIe(),u=_Ie(),n=typeof Symbol=="function"&&typeof Symbol.for=="function"?Symbol.for("nodejs.util.inspect.custom"):null;a.Buffer=o,a.SlowBuffer=T,a.INSPECT_MAX_BYTES=50;const r=2147483647;a.kMaxLength=r,o.TYPED_ARRAY_SUPPORT=t(),!o.TYPED_ARRAY_SUPPORT&&typeof console<"u"&&typeof console.error=="function"&&console.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.");function t(){try{const oe=new Uint8Array(1),X={foo:function(){return 42}};return Object.setPrototypeOf(X,Uint8Array.prototype),Object.setPrototypeOf(oe,X),oe.foo()===42}catch{return!1}}Object.defineProperty(o.prototype,"parent",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.buffer}}),Object.defineProperty(o.prototype,"offset",{enumerable:!0,get:function(){if(o.isBuffer(this))return this.byteOffset}});function i(oe){if(oe>r)throw new RangeError('The value "'+oe+'" is invalid for option "size"');const X=new Uint8Array(oe);return Object.setPrototypeOf(X,o.prototype),X}function o(oe,X,J){if(typeof oe=="number"){if(typeof X=="string")throw new TypeError('The "string" argument must be of type string. Received type number');return d(oe)}return l(oe,X,J)}o.poolSize=8192;function l(oe,X,J){if(typeof oe=="string")return f(oe,X);if(ArrayBuffer.isView(oe))return h(oe);if(oe==null)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe);if(xe(oe,ArrayBuffer)||oe&&xe(oe.buffer,ArrayBuffer)||typeof SharedArrayBuffer<"u"&&(xe(oe,SharedArrayBuffer)||oe&&xe(oe.buffer,SharedArrayBuffer)))return g(oe,X,J);if(typeof oe=="number")throw new TypeError('The "value" argument must not be of type number. Received type number');const he=oe.valueOf&&oe.valueOf();if(he!=null&&he!==oe)return o.from(he,X,J);const ve=v(oe);if(ve)return ve;if(typeof Symbol<"u"&&Symbol.toPrimitive!=null&&typeof oe[Symbol.toPrimitive]=="function")return o.from(oe[Symbol.toPrimitive]("string"),X,J);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof oe)}o.from=function(oe,X,J){return l(oe,X,J)},Object.setPrototypeOf(o.prototype,Uint8Array.prototype),Object.setPrototypeOf(o,Uint8Array);function s(oe){if(typeof oe!="number")throw new TypeError('"size" argument must be of type number');if(oe<0)throw new RangeError('The value "'+oe+'" is invalid for option "size"')}function c(oe,X,J){return s(oe),oe<=0?i(oe):X!==void 0?typeof J=="string"?i(oe).fill(X,J):i(oe).fill(X):i(oe)}o.alloc=function(oe,X,J){return c(oe,X,J)};function d(oe){return s(oe),i(oe<0?0:m(oe)|0)}o.allocUnsafe=function(oe){return d(oe)},o.allocUnsafeSlow=function(oe){return d(oe)};function f(oe,X){if((typeof X!="string"||X==="")&&(X="utf8"),!o.isEncoding(X))throw new TypeError("Unknown encoding: "+X);const J=w(oe,X)|0;let he=i(J);const ve=he.write(oe,X);return ve!==J&&(he=he.slice(0,ve)),he}function p(oe){const X=oe.length<0?0:m(oe.length)|0,J=i(X);for(let he=0;he<X;he+=1)J[he]=oe[he]&255;return J}function h(oe){if(xe(oe,Uint8Array)){const X=new Uint8Array(oe);return g(X.buffer,X.byteOffset,X.byteLength)}return p(oe)}function g(oe,X,J){if(X<0||oe.byteLength<X)throw new RangeError('"offset" is outside of buffer bounds');if(oe.byteLength<X+(J||0))throw new RangeError('"length" is outside of buffer bounds');let he;return X===void 0&&J===void 0?he=new Uint8Array(oe):J===void 0?he=new Uint8Array(oe,X):he=new Uint8Array(oe,X,J),Object.setPrototypeOf(he,o.prototype),he}function v(oe){if(o.isBuffer(oe)){const X=m(oe.length)|0,J=i(X);return J.length===0||oe.copy(J,0,0,X),J}if(oe.length!==void 0)return typeof oe.length!="number"||Ce(oe.length)?i(0):p(oe);if(oe.type==="Buffer"&&Array.isArray(oe.data))return p(oe.data)}function m(oe){if(oe>=r)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+r.toString(16)+" bytes");return oe|0}function T(oe){return+oe!=oe&&(oe=0),o.alloc(+oe)}o.isBuffer=function(X){return X!=null&&X._isBuffer===!0&&X!==o.prototype},o.compare=function(X,J){if(xe(X,Uint8Array)&&(X=o.from(X,X.offset,X.byteLength)),xe(J,Uint8Array)&&(J=o.from(J,J.offset,J.byteLength)),!o.isBuffer(X)||!o.isBuffer(J))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(X===J)return 0;let he=X.length,ve=J.length;for(let ye=0,re=Math.min(he,ve);ye<re;++ye)if(X[ye]!==J[ye]){he=X[ye],ve=J[ye];break}return he<ve?-1:ve<he?1:0},o.isEncoding=function(X){switch(String(X).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},o.concat=function(X,J){if(!Array.isArray(X))throw new TypeError('"list" argument must be an Array of Buffers');if(X.length===0)return o.alloc(0);let he;if(J===void 0)for(J=0,he=0;he<X.length;++he)J+=X[he].length;const ve=o.allocUnsafe(J);let ye=0;for(he=0;he<X.length;++he){let re=X[he];if(xe(re,Uint8Array))ye+re.length>ve.length?(o.isBuffer(re)||(re=o.from(re)),re.copy(ve,ye)):Uint8Array.prototype.set.call(ve,re,ye);else if(o.isBuffer(re))re.copy(ve,ye);else throw new TypeError('"list" argument must be an Array of Buffers');ye+=re.length}return ve};function w(oe,X){if(o.isBuffer(oe))return oe.length;if(ArrayBuffer.isView(oe)||xe(oe,ArrayBuffer))return oe.byteLength;if(typeof oe!="string")throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof oe);const J=oe.length,he=arguments.length>2&&arguments[2]===!0;if(!he&&J===0)return 0;let ve=!1;for(;;)switch(X){case"ascii":case"latin1":case"binary":return J;case"utf8":case"utf-8":return $(oe).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return J*2;case"hex":return J>>>1;case"base64":return ce(oe).length;default:if(ve)return he?-1:$(oe).length;X=(""+X).toLowerCase(),ve=!0}}o.byteLength=w;function E(oe,X,J){let he=!1;if((X===void 0||X<0)&&(X=0),X>this.length||((J===void 0||J>this.length)&&(J=this.length),J<=0)||(J>>>=0,X>>>=0,J<=X))return"";for(oe||(oe="utf8");;)switch(oe){case"hex":return ae(this,X,J);case"utf8":case"utf-8":return B(this,X,J);case"ascii":return G(this,X,J);case"latin1":case"binary":return Z(this,X,J);case"base64":return C(this,X,J);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return W(this,X,J);default:if(he)throw new TypeError("Unknown encoding: "+oe);oe=(oe+"").toLowerCase(),he=!0}}o.prototype._isBuffer=!0;function S(oe,X,J){const he=oe[X];oe[X]=oe[J],oe[J]=he}o.prototype.swap16=function(){const X=this.length;if(X%2!==0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let J=0;J<X;J+=2)S(this,J,J+1);return this},o.prototype.swap32=function(){const X=this.length;if(X%4!==0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let J=0;J<X;J+=4)S(this,J,J+3),S(this,J+1,J+2);return this},o.prototype.swap64=function(){const X=this.length;if(X%8!==0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let J=0;J<X;J+=8)S(this,J,J+7),S(this,J+1,J+6),S(this,J+2,J+5),S(this,J+3,J+4);return this},o.prototype.toString=function(){const X=this.length;return X===0?"":arguments.length===0?B(this,0,X):E.apply(this,arguments)},o.prototype.toLocaleString=o.prototype.toString,o.prototype.equals=function(X){if(!o.isBuffer(X))throw new TypeError("Argument must be a Buffer");return this===X?!0:o.compare(this,X)===0},o.prototype.inspect=function(){let X="";const J=a.INSPECT_MAX_BYTES;return X=this.toString("hex",0,J).replace(/(.{2})/g,"$1 ").trim(),this.length>J&&(X+=" ... "),"<Buffer "+X+">"},n&&(o.prototype[n]=o.prototype.inspect),o.prototype.compare=function(X,J,he,ve,ye){if(xe(X,Uint8Array)&&(X=o.from(X,X.offset,X.byteLength)),!o.isBuffer(X))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof X);if(J===void 0&&(J=0),he===void 0&&(he=X?X.length:0),ve===void 0&&(ve=0),ye===void 0&&(ye=this.length),J<0||he>X.length||ve<0||ye>this.length)throw new RangeError("out of range index");if(ve>=ye&&J>=he)return 0;if(ve>=ye)return-1;if(J>=he)return 1;if(J>>>=0,he>>>=0,ve>>>=0,ye>>>=0,this===X)return 0;let re=ye-ve,Ne=he-J;const Le=Math.min(re,Ne),Pe=this.slice(ve,ye),Fe=X.slice(J,he);for(let R=0;R<Le;++R)if(Pe[R]!==Fe[R]){re=Pe[R],Ne=Fe[R];break}return re<Ne?-1:Ne<re?1:0};function N(oe,X,J,he,ve){if(oe.length===0)return-1;if(typeof J=="string"?(he=J,J=0):J>2147483647?J=2147483647:J<-2147483648&&(J=-2147483648),J=+J,Ce(J)&&(J=ve?0:oe.length-1),J<0&&(J=oe.length+J),J>=oe.length){if(ve)return-1;J=oe.length-1}else if(J<0)if(ve)J=0;else return-1;if(typeof X=="string"&&(X=o.from(X,he)),o.isBuffer(X))return X.length===0?-1:j(oe,X,J,he,ve);if(typeof X=="number")return X=X&255,typeof Uint8Array.prototype.indexOf=="function"?ve?Uint8Array.prototype.indexOf.call(oe,X,J):Uint8Array.prototype.lastIndexOf.call(oe,X,J):j(oe,[X],J,he,ve);throw new TypeError("val must be string, number or Buffer")}function j(oe,X,J,he,ve){let ye=1,re=oe.length,Ne=X.length;if(he!==void 0&&(he=String(he).toLowerCase(),he==="ucs2"||he==="ucs-2"||he==="utf16le"||he==="utf-16le")){if(oe.length<2||X.length<2)return-1;ye=2,re/=2,Ne/=2,J/=2}function Le(Fe,R){return ye===1?Fe[R]:Fe.readUInt16BE(R*ye)}let Pe;if(ve){let Fe=-1;for(Pe=J;Pe<re;Pe++)if(Le(oe,Pe)===Le(X,Fe===-1?0:Pe-Fe)){if(Fe===-1&&(Fe=Pe),Pe-Fe+1===Ne)return Fe*ye}else Fe!==-1&&(Pe-=Pe-Fe),Fe=-1}else for(J+Ne>re&&(J=re-Ne),Pe=J;Pe>=0;Pe--){let Fe=!0;for(let R=0;R<Ne;R++)if(Le(oe,Pe+R)!==Le(X,R)){Fe=!1;break}if(Fe)return Pe}return-1}o.prototype.includes=function(X,J,he){return this.indexOf(X,J,he)!==-1},o.prototype.indexOf=function(X,J,he){return N(this,X,J,he,!0)},o.prototype.lastIndexOf=function(X,J,he){return N(this,X,J,he,!1)};function q(oe,X,J,he){J=Number(J)||0;const ve=oe.length-J;he?(he=Number(he),he>ve&&(he=ve)):he=ve;const ye=X.length;he>ye/2&&(he=ye/2);let re;for(re=0;re<he;++re){const Ne=parseInt(X.substr(re*2,2),16);if(Ce(Ne))return re;oe[J+re]=Ne}return re}function O(oe,X,J,he){return Se($(X,oe.length-J),oe,J,he)}function I(oe,X,J,he){return Se(ue(X),oe,J,he)}function A(oe,X,J,he){return Se(ce(X),oe,J,he)}function P(oe,X,J,he){return Se(ne(X,oe.length-J),oe,J,he)}o.prototype.write=function(X,J,he,ve){if(J===void 0)ve="utf8",he=this.length,J=0;else if(he===void 0&&typeof J=="string")ve=J,he=this.length,J=0;else if(isFinite(J))J=J>>>0,isFinite(he)?(he=he>>>0,ve===void 0&&(ve="utf8")):(ve=he,he=void 0);else throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");const ye=this.length-J;if((he===void 0||he>ye)&&(he=ye),X.length>0&&(he<0||J<0)||J>this.length)throw new RangeError("Attempt to write outside buffer bounds");ve||(ve="utf8");let re=!1;for(;;)switch(ve){case"hex":return q(this,X,J,he);case"utf8":case"utf-8":return O(this,X,J,he);case"ascii":case"latin1":case"binary":return I(this,X,J,he);case"base64":return A(this,X,J,he);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return P(this,X,J,he);default:if(re)throw new TypeError("Unknown encoding: "+ve);ve=(""+ve).toLowerCase(),re=!0}},o.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};function C(oe,X,J){return X===0&&J===oe.length?e.fromByteArray(oe):e.fromByteArray(oe.slice(X,J))}function B(oe,X,J){J=Math.min(oe.length,J);const he=[];let ve=X;for(;ve<J;){const ye=oe[ve];let re=null,Ne=ye>239?4:ye>223?3:ye>191?2:1;if(ve+Ne<=J){let Le,Pe,Fe,R;switch(Ne){case 1:ye<128&&(re=ye);break;case 2:Le=oe[ve+1],(Le&192)===128&&(R=(ye&31)<<6|Le&63,R>127&&(re=R));break;case 3:Le=oe[ve+1],Pe=oe[ve+2],(Le&192)===128&&(Pe&192)===128&&(R=(ye&15)<<12|(Le&63)<<6|Pe&63,R>2047&&(R<55296||R>57343)&&(re=R));break;case 4:Le=oe[ve+1],Pe=oe[ve+2],Fe=oe[ve+3],(Le&192)===128&&(Pe&192)===128&&(Fe&192)===128&&(R=(ye&15)<<18|(Le&63)<<12|(Pe&63)<<6|Fe&63,R>65535&&R<1114112&&(re=R))}}re===null?(re=65533,Ne=1):re>65535&&(re-=65536,he.push(re>>>10&1023|55296),re=56320|re&1023),he.push(re),ve+=Ne}return V(he)}const H=4096;function V(oe){const X=oe.length;if(X<=H)return String.fromCharCode.apply(String,oe);let J="",he=0;for(;he<X;)J+=String.fromCharCode.apply(String,oe.slice(he,he+=H));return J}function G(oe,X,J){let he="";J=Math.min(oe.length,J);for(let ve=X;ve<J;++ve)he+=String.fromCharCode(oe[ve]&127);return he}function Z(oe,X,J){let he="";J=Math.min(oe.length,J);for(let ve=X;ve<J;++ve)he+=String.fromCharCode(oe[ve]);return he}function ae(oe,X,J){const he=oe.length;(!X||X<0)&&(X=0),(!J||J<0||J>he)&&(J=he);let ve="";for(let ye=X;ye<J;++ye)ve+=Ve[oe[ye]];return ve}function W(oe,X,J){const he=oe.slice(X,J);let ve="";for(let ye=0;ye<he.length-1;ye+=2)ve+=String.fromCharCode(he[ye]+he[ye+1]*256);return ve}o.prototype.slice=function(X,J){const he=this.length;X=~~X,J=J===void 0?he:~~J,X<0?(X+=he,X<0&&(X=0)):X>he&&(X=he),J<0?(J+=he,J<0&&(J=0)):J>he&&(J=he),J<X&&(J=X);const ve=this.subarray(X,J);return Object.setPrototypeOf(ve,o.prototype),ve};function te(oe,X,J){if(oe%1!==0||oe<0)throw new RangeError("offset is not uint");if(oe+X>J)throw new RangeError("Trying to access beyond buffer length")}o.prototype.readUintLE=o.prototype.readUIntLE=function(X,J,he){X=X>>>0,J=J>>>0,he||te(X,J,this.length);let ve=this[X],ye=1,re=0;for(;++re<J&&(ye*=256);)ve+=this[X+re]*ye;return ve},o.prototype.readUintBE=o.prototype.readUIntBE=function(X,J,he){X=X>>>0,J=J>>>0,he||te(X,J,this.length);let ve=this[X+--J],ye=1;for(;J>0&&(ye*=256);)ve+=this[X+--J]*ye;return ve},o.prototype.readUint8=o.prototype.readUInt8=function(X,J){return X=X>>>0,J||te(X,1,this.length),this[X]},o.prototype.readUint16LE=o.prototype.readUInt16LE=function(X,J){return X=X>>>0,J||te(X,2,this.length),this[X]|this[X+1]<<8},o.prototype.readUint16BE=o.prototype.readUInt16BE=function(X,J){return X=X>>>0,J||te(X,2,this.length),this[X]<<8|this[X+1]},o.prototype.readUint32LE=o.prototype.readUInt32LE=function(X,J){return X=X>>>0,J||te(X,4,this.length),(this[X]|this[X+1]<<8|this[X+2]<<16)+this[X+3]*16777216},o.prototype.readUint32BE=o.prototype.readUInt32BE=function(X,J){return X=X>>>0,J||te(X,4,this.length),this[X]*16777216+(this[X+1]<<16|this[X+2]<<8|this[X+3])},o.prototype.readBigUInt64LE=Ke(function(X){X=X>>>0,D(X,"offset");const J=this[X],he=this[X+7];(J===void 0||he===void 0)&&L(X,this.length-8);const ve=J+this[++X]*2**8+this[++X]*2**16+this[++X]*2**24,ye=this[++X]+this[++X]*2**8+this[++X]*2**16+he*2**24;return BigInt(ve)+(BigInt(ye)<<BigInt(32))}),o.prototype.readBigUInt64BE=Ke(function(X){X=X>>>0,D(X,"offset");const J=this[X],he=this[X+7];(J===void 0||he===void 0)&&L(X,this.length-8);const ve=J*2**24+this[++X]*2**16+this[++X]*2**8+this[++X],ye=this[++X]*2**24+this[++X]*2**16+this[++X]*2**8+he;return(BigInt(ve)<<BigInt(32))+BigInt(ye)}),o.prototype.readIntLE=function(X,J,he){X=X>>>0,J=J>>>0,he||te(X,J,this.length);let ve=this[X],ye=1,re=0;for(;++re<J&&(ye*=256);)ve+=this[X+re]*ye;return ye*=128,ve>=ye&&(ve-=Math.pow(2,8*J)),ve},o.prototype.readIntBE=function(X,J,he){X=X>>>0,J=J>>>0,he||te(X,J,this.length);let ve=J,ye=1,re=this[X+--ve];for(;ve>0&&(ye*=256);)re+=this[X+--ve]*ye;return ye*=128,re>=ye&&(re-=Math.pow(2,8*J)),re},o.prototype.readInt8=function(X,J){return X=X>>>0,J||te(X,1,this.length),this[X]&128?(255-this[X]+1)*-1:this[X]},o.prototype.readInt16LE=function(X,J){X=X>>>0,J||te(X,2,this.length);const he=this[X]|this[X+1]<<8;return he&32768?he|4294901760:he},o.prototype.readInt16BE=function(X,J){X=X>>>0,J||te(X,2,this.length);const he=this[X+1]|this[X]<<8;return he&32768?he|4294901760:he},o.prototype.readInt32LE=function(X,J){return X=X>>>0,J||te(X,4,this.length),this[X]|this[X+1]<<8|this[X+2]<<16|this[X+3]<<24},o.prototype.readInt32BE=function(X,J){return X=X>>>0,J||te(X,4,this.length),this[X]<<24|this[X+1]<<16|this[X+2]<<8|this[X+3]},o.prototype.readBigInt64LE=Ke(function(X){X=X>>>0,D(X,"offset");const J=this[X],he=this[X+7];(J===void 0||he===void 0)&&L(X,this.length-8);const ve=this[X+4]+this[X+5]*2**8+this[X+6]*2**16+(he<<24);return(BigInt(ve)<<BigInt(32))+BigInt(J+this[++X]*2**8+this[++X]*2**16+this[++X]*2**24)}),o.prototype.readBigInt64BE=Ke(function(X){X=X>>>0,D(X,"offset");const J=this[X],he=this[X+7];(J===void 0||he===void 0)&&L(X,this.length-8);const ve=(J<<24)+this[++X]*2**16+this[++X]*2**8+this[++X];return(BigInt(ve)<<BigInt(32))+BigInt(this[++X]*2**24+this[++X]*2**16+this[++X]*2**8+he)}),o.prototype.readFloatLE=function(X,J){return X=X>>>0,J||te(X,4,this.length),u.read(this,X,!0,23,4)},o.prototype.readFloatBE=function(X,J){return X=X>>>0,J||te(X,4,this.length),u.read(this,X,!1,23,4)},o.prototype.readDoubleLE=function(X,J){return X=X>>>0,J||te(X,8,this.length),u.read(this,X,!0,52,8)},o.prototype.readDoubleBE=function(X,J){return X=X>>>0,J||te(X,8,this.length),u.read(this,X,!1,52,8)};function se(oe,X,J,he,ve,ye){if(!o.isBuffer(oe))throw new TypeError('"buffer" argument must be a Buffer instance');if(X>ve||X<ye)throw new RangeError('"value" argument is out of bounds');if(J+he>oe.length)throw new RangeError("Index out of range")}o.prototype.writeUintLE=o.prototype.writeUIntLE=function(X,J,he,ve){if(X=+X,J=J>>>0,he=he>>>0,!ve){const Ne=Math.pow(2,8*he)-1;se(this,X,J,he,Ne,0)}let ye=1,re=0;for(this[J]=X&255;++re<he&&(ye*=256);)this[J+re]=X/ye&255;return J+he},o.prototype.writeUintBE=o.prototype.writeUIntBE=function(X,J,he,ve){if(X=+X,J=J>>>0,he=he>>>0,!ve){const Ne=Math.pow(2,8*he)-1;se(this,X,J,he,Ne,0)}let ye=he-1,re=1;for(this[J+ye]=X&255;--ye>=0&&(re*=256);)this[J+ye]=X/re&255;return J+he},o.prototype.writeUint8=o.prototype.writeUInt8=function(X,J,he){return X=+X,J=J>>>0,he||se(this,X,J,1,255,0),this[J]=X&255,J+1},o.prototype.writeUint16LE=o.prototype.writeUInt16LE=function(X,J,he){return X=+X,J=J>>>0,he||se(this,X,J,2,65535,0),this[J]=X&255,this[J+1]=X>>>8,J+2},o.prototype.writeUint16BE=o.prototype.writeUInt16BE=function(X,J,he){return X=+X,J=J>>>0,he||se(this,X,J,2,65535,0),this[J]=X>>>8,this[J+1]=X&255,J+2},o.prototype.writeUint32LE=o.prototype.writeUInt32LE=function(X,J,he){return X=+X,J=J>>>0,he||se(this,X,J,4,4294967295,0),this[J+3]=X>>>24,this[J+2]=X>>>16,this[J+1]=X>>>8,this[J]=X&255,J+4},o.prototype.writeUint32BE=o.prototype.writeUInt32BE=function(X,J,he){return X=+X,J=J>>>0,he||se(this,X,J,4,4294967295,0),this[J]=X>>>24,this[J+1]=X>>>16,this[J+2]=X>>>8,this[J+3]=X&255,J+4};function pe(oe,X,J,he,ve){F(X,he,ve,oe,J,7);let ye=Number(X&BigInt(4294967295));oe[J++]=ye,ye=ye>>8,oe[J++]=ye,ye=ye>>8,oe[J++]=ye,ye=ye>>8,oe[J++]=ye;let re=Number(X>>BigInt(32)&BigInt(4294967295));return oe[J++]=re,re=re>>8,oe[J++]=re,re=re>>8,oe[J++]=re,re=re>>8,oe[J++]=re,J}function le(oe,X,J,he,ve){F(X,he,ve,oe,J,7);let ye=Number(X&BigInt(4294967295));oe[J+7]=ye,ye=ye>>8,oe[J+6]=ye,ye=ye>>8,oe[J+5]=ye,ye=ye>>8,oe[J+4]=ye;let re=Number(X>>BigInt(32)&BigInt(4294967295));return oe[J+3]=re,re=re>>8,oe[J+2]=re,re=re>>8,oe[J+1]=re,re=re>>8,oe[J]=re,J+8}o.prototype.writeBigUInt64LE=Ke(function(X,J=0){return pe(this,X,J,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeBigUInt64BE=Ke(function(X,J=0){return le(this,X,J,BigInt(0),BigInt("0xffffffffffffffff"))}),o.prototype.writeIntLE=function(X,J,he,ve){if(X=+X,J=J>>>0,!ve){const Le=Math.pow(2,8*he-1);se(this,X,J,he,Le-1,-Le)}let ye=0,re=1,Ne=0;for(this[J]=X&255;++ye<he&&(re*=256);)X<0&&Ne===0&&this[J+ye-1]!==0&&(Ne=1),this[J+ye]=(X/re>>0)-Ne&255;return J+he},o.prototype.writeIntBE=function(X,J,he,ve){if(X=+X,J=J>>>0,!ve){const Le=Math.pow(2,8*he-1);se(this,X,J,he,Le-1,-Le)}let ye=he-1,re=1,Ne=0;for(this[J+ye]=X&255;--ye>=0&&(re*=256);)X<0&&Ne===0&&this[J+ye+1]!==0&&(Ne=1),this[J+ye]=(X/re>>0)-Ne&255;return J+he},o.prototype.writeInt8=function(X,J,he){return X=+X,J=J>>>0,he||se(this,X,J,1,127,-128),X<0&&(X=255+X+1),this[J]=X&255,J+1},o.prototype.writeInt16LE=function(X,J,he){return X=+X,J=J>>>0,he||se(this,X,J,2,32767,-32768),this[J]=X&255,this[J+1]=X>>>8,J+2},o.prototype.writeInt16BE=function(X,J,he){return X=+X,J=J>>>0,he||se(this,X,J,2,32767,-32768),this[J]=X>>>8,this[J+1]=X&255,J+2},o.prototype.writeInt32LE=function(X,J,he){return X=+X,J=J>>>0,he||se(this,X,J,4,2147483647,-2147483648),this[J]=X&255,this[J+1]=X>>>8,this[J+2]=X>>>16,this[J+3]=X>>>24,J+4},o.prototype.writeInt32BE=function(X,J,he){return X=+X,J=J>>>0,he||se(this,X,J,4,2147483647,-2147483648),X<0&&(X=4294967295+X+1),this[J]=X>>>24,this[J+1]=X>>>16,this[J+2]=X>>>8,this[J+3]=X&255,J+4},o.prototype.writeBigInt64LE=Ke(function(X,J=0){return pe(this,X,J,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),o.prototype.writeBigInt64BE=Ke(function(X,J=0){return le(this,X,J,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))});function Ee(oe,X,J,he,ve,ye){if(J+he>oe.length)throw new RangeError("Index out of range");if(J<0)throw new RangeError("Index out of range")}function Oe(oe,X,J,he,ve){return X=+X,J=J>>>0,ve||Ee(oe,X,J,4),u.write(oe,X,J,he,23,4),J+4}o.prototype.writeFloatLE=function(X,J,he){return Oe(this,X,J,!0,he)},o.prototype.writeFloatBE=function(X,J,he){return Oe(this,X,J,!1,he)};function Ie(oe,X,J,he,ve){return X=+X,J=J>>>0,ve||Ee(oe,X,J,8),u.write(oe,X,J,he,52,8),J+8}o.prototype.writeDoubleLE=function(X,J,he){return Ie(this,X,J,!0,he)},o.prototype.writeDoubleBE=function(X,J,he){return Ie(this,X,J,!1,he)},o.prototype.copy=function(X,J,he,ve){if(!o.isBuffer(X))throw new TypeError("argument should be a Buffer");if(he||(he=0),!ve&&ve!==0&&(ve=this.length),J>=X.length&&(J=X.length),J||(J=0),ve>0&&ve<he&&(ve=he),ve===he||X.length===0||this.length===0)return 0;if(J<0)throw new RangeError("targetStart out of bounds");if(he<0||he>=this.length)throw new RangeError("Index out of range");if(ve<0)throw new RangeError("sourceEnd out of bounds");ve>this.length&&(ve=this.length),X.length-J<ve-he&&(ve=X.length-J+he);const ye=ve-he;return this===X&&typeof Uint8Array.prototype.copyWithin=="function"?this.copyWithin(J,he,ve):Uint8Array.prototype.set.call(X,this.subarray(he,ve),J),ye},o.prototype.fill=function(X,J,he,ve){if(typeof X=="string"){if(typeof J=="string"?(ve=J,J=0,he=this.length):typeof he=="string"&&(ve=he,he=this.length),ve!==void 0&&typeof ve!="string")throw new TypeError("encoding must be a string");if(typeof ve=="string"&&!o.isEncoding(ve))throw new TypeError("Unknown encoding: "+ve);if(X.length===1){const re=X.charCodeAt(0);(ve==="utf8"&&re<128||ve==="latin1")&&(X=re)}}else typeof X=="number"?X=X&255:typeof X=="boolean"&&(X=Number(X));if(J<0||this.length<J||this.length<he)throw new RangeError("Out of range index");if(he<=J)return this;J=J>>>0,he=he===void 0?this.length:he>>>0,X||(X=0);let ye;if(typeof X=="number")for(ye=J;ye<he;++ye)this[ye]=X;else{const re=o.isBuffer(X)?X:o.from(X,ve),Ne=re.length;if(Ne===0)throw new TypeError('The value "'+X+'" is invalid for argument "value"');for(ye=0;ye<he-J;++ye)this[ye+J]=re[ye%Ne]}return this};const Ae={};function be(oe,X,J){Ae[oe]=class extends J{constructor(){super(),Object.defineProperty(this,"message",{value:X.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${oe}]`,this.stack,delete this.name}get code(){return oe}set code(ve){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:ve,writable:!0})}toString(){return`${this.name} [${oe}]: ${this.message}`}}}be("ERR_BUFFER_OUT_OF_BOUNDS",function(oe){return oe?`${oe} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),be("ERR_INVALID_ARG_TYPE",function(oe,X){return`The "${oe}" argument must be of type number. Received type ${typeof X}`},TypeError),be("ERR_OUT_OF_RANGE",function(oe,X,J){let he=`The value of "${oe}" is out of range.`,ve=J;return Number.isInteger(J)&&Math.abs(J)>2**32?ve=ee(String(J)):typeof J=="bigint"&&(ve=String(J),(J>BigInt(2)**BigInt(32)||J<-(BigInt(2)**BigInt(32)))&&(ve=ee(ve)),ve+="n"),he+=` It must be ${X}. Received ${ve}`,he},RangeError);function ee(oe){let X="",J=oe.length;const he=oe[0]==="-"?1:0;for(;J>=he+4;J-=3)X=`_${oe.slice(J-3,J)}${X}`;return`${oe.slice(0,J)}${X}`}function _(oe,X,J){D(X,"offset"),(oe[X]===void 0||oe[X+J]===void 0)&&L(X,oe.length-(J+1))}function F(oe,X,J,he,ve,ye){if(oe>J||oe<X){const re=typeof X=="bigint"?"n":"";let Ne;throw X===0||X===BigInt(0)?Ne=`>= 0${re} and < 2${re} ** ${(ye+1)*8}${re}`:Ne=`>= -(2${re} ** ${(ye+1)*8-1}${re}) and < 2 ** ${(ye+1)*8-1}${re}`,new Ae.ERR_OUT_OF_RANGE("value",Ne,oe)}_(he,ve,ye)}function D(oe,X){if(typeof oe!="number")throw new Ae.ERR_INVALID_ARG_TYPE(X,"number",oe)}function L(oe,X,J){throw Math.floor(oe)!==oe?(D(oe,J),new Ae.ERR_OUT_OF_RANGE("offset","an integer",oe)):X<0?new Ae.ERR_BUFFER_OUT_OF_BOUNDS:new Ae.ERR_OUT_OF_RANGE("offset",`>= 0 and <= ${X}`,oe)}const Q=/[^+/0-9A-Za-z-_]/g;function Y(oe){if(oe=oe.split("=")[0],oe=oe.trim().replace(Q,""),oe.length<2)return"";for(;oe.length%4!==0;)oe=oe+"=";return oe}function $(oe,X){X=X||1/0;let J;const he=oe.length;let ve=null;const ye=[];for(let re=0;re<he;++re){if(J=oe.charCodeAt(re),J>55295&&J<57344){if(!ve){if(J>56319){(X-=3)>-1&&ye.push(239,191,189);continue}else if(re+1===he){(X-=3)>-1&&ye.push(239,191,189);continue}ve=J;continue}if(J<56320){(X-=3)>-1&&ye.push(239,191,189),ve=J;continue}J=(ve-55296<<10|J-56320)+65536}else ve&&(X-=3)>-1&&ye.push(239,191,189);if(ve=null,J<128){if((X-=1)<0)break;ye.push(J)}else if(J<2048){if((X-=2)<0)break;ye.push(J>>6|192,J&63|128)}else if(J<65536){if((X-=3)<0)break;ye.push(J>>12|224,J>>6&63|128,J&63|128)}else if(J<1114112){if((X-=4)<0)break;ye.push(J>>18|240,J>>12&63|128,J>>6&63|128,J&63|128)}else throw new Error("Invalid code point")}return ye}function ue(oe){const X=[];for(let J=0;J<oe.length;++J)X.push(oe.charCodeAt(J)&255);return X}function ne(oe,X){let J,he,ve;const ye=[];for(let re=0;re<oe.length&&!((X-=2)<0);++re)J=oe.charCodeAt(re),he=J>>8,ve=J%256,ye.push(ve),ye.push(he);return ye}function ce(oe){return e.toByteArray(Y(oe))}function Se(oe,X,J,he){let ve;for(ve=0;ve<he&&!(ve+J>=X.length||ve>=oe.length);++ve)X[ve+J]=oe[ve];return ve}function xe(oe,X){return oe instanceof X||oe!=null&&oe.constructor!=null&&oe.constructor.name!=null&&oe.constructor.name===X.name}function Ce(oe){return oe!==oe}const Ve=(function(){const oe="0123456789abcdef",X=new Array(256);for(let J=0;J<16;++J){const he=J*16;for(let ve=0;ve<16;++ve)X[he+ve]=oe[J]+oe[ve]}return X})();function Ke(oe){return typeof BigInt>"u"?Ye:oe}function Ye(){throw new Error("BigInt not supported")}})(fM)),fM}var pM,_Z;function An(){if(_Z)return pM;_Z=1;class a extends Error{constructor(u){if(!Array.isArray(u))throw new TypeError(`Expected input to be an Array, got ${typeof u}`);let n="";for(let r=0;r<u.length;r++)n+=`    ${u[r].stack}
`;super(n),this.name="AggregateError",this.errors=u}}return pM={AggregateError:a,ArrayIsArray(e){return Array.isArray(e)},ArrayPrototypeIncludes(e,u){return e.includes(u)},ArrayPrototypeIndexOf(e,u){return e.indexOf(u)},ArrayPrototypeJoin(e,u){return e.join(u)},ArrayPrototypeMap(e,u){return e.map(u)},ArrayPrototypePop(e,u){return e.pop(u)},ArrayPrototypePush(e,u){return e.push(u)},ArrayPrototypeSlice(e,u,n){return e.slice(u,n)},Error,FunctionPrototypeCall(e,u,...n){return e.call(u,...n)},FunctionPrototypeSymbolHasInstance(e,u){return Function.prototype[Symbol.hasInstance].call(e,u)},MathFloor:Math.floor,Number,NumberIsInteger:Number.isInteger,NumberIsNaN:Number.isNaN,NumberMAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,NumberMIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,NumberParseInt:Number.parseInt,ObjectDefineProperties(e,u){return Object.defineProperties(e,u)},ObjectDefineProperty(e,u,n){return Object.defineProperty(e,u,n)},ObjectGetOwnPropertyDescriptor(e,u){return Object.getOwnPropertyDescriptor(e,u)},ObjectKeys(e){return Object.keys(e)},ObjectSetPrototypeOf(e,u){return Object.setPrototypeOf(e,u)},Promise,PromisePrototypeCatch(e,u){return e.catch(u)},PromisePrototypeThen(e,u,n){return e.then(u,n)},PromiseReject(e){return Promise.reject(e)},PromiseResolve(e){return Promise.resolve(e)},ReflectApply:Reflect.apply,RegExpPrototypeTest(e,u){return e.test(u)},SafeSet:Set,String,StringPrototypeSlice(e,u,n){return e.slice(u,n)},StringPrototypeToLowerCase(e){return e.toLowerCase()},StringPrototypeToUpperCase(e){return e.toUpperCase()},StringPrototypeTrim(e){return e.trim()},Symbol,SymbolFor:Symbol.for,SymbolAsyncIterator:Symbol.asyncIterator,SymbolHasInstance:Symbol.hasInstance,SymbolIterator:Symbol.iterator,SymbolDispose:Symbol.dispose||Symbol("Symbol.dispose"),SymbolAsyncDispose:Symbol.asyncDispose||Symbol("Symbol.asyncDispose"),TypedArrayPrototypeSet(e,u,n){return e.set(u,n)},Boolean,Uint8Array},pM}var hM={exports:{}},yM,TZ;function D2e(){return TZ||(TZ=1,yM={format(a,...e){return a.replace(/%([sdifj])/g,function(...[u,n]){const r=e.shift();return n==="f"?r.toFixed(6):n==="j"?JSON.stringify(r):n==="s"&&typeof r=="object"?`${r.constructor!==Object?r.constructor.name:""} {}`.trim():r.toString()})},inspect(a){switch(typeof a){case"string":if(a.includes("'"))if(a.includes('"')){if(!a.includes("`")&&!a.includes("${"))return`\`${a}\``}else return`"${a}"`;return`'${a}'`;case"number":return isNaN(a)?"NaN":Object.is(a,-0)?String(a):a;case"bigint":return`${String(a)}n`;case"boolean":case"undefined":return String(a);case"object":return"{}"}}}),yM}var mM,wZ;function ti(){if(wZ)return mM;wZ=1;const{format:a,inspect:e}=D2e(),{AggregateError:u}=An(),n=globalThis.AggregateError||u,r=Symbol("kIsNodeError"),t=["string","function","number","object","Function","Object","boolean","bigint","symbol"],i=/^([A-Z][a-z0-9]*)+$/,o="__node_internal_",l={};function s(v,m){if(!v)throw new l.ERR_INTERNAL_ASSERTION(m)}function c(v){let m="",T=v.length;const w=v[0]==="-"?1:0;for(;T>=w+4;T-=3)m=`_${v.slice(T-3,T)}${m}`;return`${v.slice(0,T)}${m}`}function d(v,m,T){if(typeof m=="function")return s(m.length<=T.length,`Code: ${v}; The provided arguments length (${T.length}) does not match the required ones (${m.length}).`),m(...T);const w=(m.match(/%[dfijoOs]/g)||[]).length;return s(w===T.length,`Code: ${v}; The provided arguments length (${T.length}) does not match the required ones (${w}).`),T.length===0?m:a(m,...T)}function f(v,m,T){T||(T=Error);class w extends T{constructor(...S){super(d(v,m,S))}toString(){return`${this.name} [${v}]: ${this.message}`}}Object.defineProperties(w.prototype,{name:{value:T.name,writable:!0,enumerable:!1,configurable:!0},toString:{value(){return`${this.name} [${v}]: ${this.message}`},writable:!0,enumerable:!1,configurable:!0}}),w.prototype.code=v,w.prototype[r]=!0,l[v]=w}function p(v){const m=o+v.name;return Object.defineProperty(v,"name",{value:m}),v}function h(v,m){if(v&&m&&v!==m){if(Array.isArray(m.errors))return m.errors.push(v),m;const T=new n([m,v],m.message);return T.code=m.code,T}return v||m}class g extends Error{constructor(m="The operation was aborted",T=void 0){if(T!==void 0&&typeof T!="object")throw new l.ERR_INVALID_ARG_TYPE("options","Object",T);super(m,T),this.code="ABORT_ERR",this.name="AbortError"}}return f("ERR_ASSERTION","%s",Error),f("ERR_INVALID_ARG_TYPE",(v,m,T)=>{s(typeof v=="string","'name' must be a string"),Array.isArray(m)||(m=[m]);let w="The ";v.endsWith(" argument")?w+=`${v} `:w+=`"${v}" ${v.includes(".")?"property":"argument"} `,w+="must be ";const E=[],S=[],N=[];for(const q of m)s(typeof q=="string","All expected entries have to be of type string"),t.includes(q)?E.push(q.toLowerCase()):i.test(q)?S.push(q):(s(q!=="object",'The value "object" should be written as "Object"'),N.push(q));if(S.length>0){const q=E.indexOf("object");q!==-1&&(E.splice(E,q,1),S.push("Object"))}if(E.length>0){switch(E.length){case 1:w+=`of type ${E[0]}`;break;case 2:w+=`one of type ${E[0]} or ${E[1]}`;break;default:{const q=E.pop();w+=`one of type ${E.join(", ")}, or ${q}`}}(S.length>0||N.length>0)&&(w+=" or ")}if(S.length>0){switch(S.length){case 1:w+=`an instance of ${S[0]}`;break;case 2:w+=`an instance of ${S[0]} or ${S[1]}`;break;default:{const q=S.pop();w+=`an instance of ${S.join(", ")}, or ${q}`}}N.length>0&&(w+=" or ")}switch(N.length){case 0:break;case 1:N[0].toLowerCase()!==N[0]&&(w+="an "),w+=`${N[0]}`;break;case 2:w+=`one of ${N[0]} or ${N[1]}`;break;default:{const q=N.pop();w+=`one of ${N.join(", ")}, or ${q}`}}if(T==null)w+=`. Received ${T}`;else if(typeof T=="function"&&T.name)w+=`. Received function ${T.name}`;else if(typeof T=="object"){var j;if((j=T.constructor)!==null&&j!==void 0&&j.name)w+=`. Received an instance of ${T.constructor.name}`;else{const q=e(T,{depth:-1});w+=`. Received ${q}`}}else{let q=e(T,{colors:!1});q.length>25&&(q=`${q.slice(0,25)}...`),w+=`. Received type ${typeof T} (${q})`}return w},TypeError),f("ERR_INVALID_ARG_VALUE",(v,m,T="is invalid")=>{let w=e(m);return w.length>128&&(w=w.slice(0,128)+"..."),`The ${v.includes(".")?"property":"argument"} '${v}' ${T}. Received ${w}`},TypeError),f("ERR_INVALID_RETURN_VALUE",(v,m,T)=>{var w;const E=T!=null&&(w=T.constructor)!==null&&w!==void 0&&w.name?`instance of ${T.constructor.name}`:`type ${typeof T}`;return`Expected ${v} to be returned from the "${m}" function but got ${E}.`},TypeError),f("ERR_MISSING_ARGS",(...v)=>{s(v.length>0,"At least one arg needs to be specified");let m;const T=v.length;switch(v=(Array.isArray(v)?v:[v]).map(w=>`"${w}"`).join(" or "),T){case 1:m+=`The ${v[0]} argument`;break;case 2:m+=`The ${v[0]} and ${v[1]} arguments`;break;default:{const w=v.pop();m+=`The ${v.join(", ")}, and ${w} arguments`}break}return`${m} must be specified`},TypeError),f("ERR_OUT_OF_RANGE",(v,m,T)=>{s(m,'Missing "range" argument');let w;if(Number.isInteger(T)&&Math.abs(T)>2**32)w=c(String(T));else if(typeof T=="bigint"){w=String(T);const E=BigInt(2)**BigInt(32);(T>E||T<-E)&&(w=c(w)),w+="n"}else w=e(T);return`The value of "${v}" is out of range. It must be ${m}. Received ${w}`},RangeError),f("ERR_MULTIPLE_CALLBACK","Callback called multiple times",Error),f("ERR_METHOD_NOT_IMPLEMENTED","The %s method is not implemented",Error),f("ERR_STREAM_ALREADY_FINISHED","Cannot call %s after a stream was finished",Error),f("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable",Error),f("ERR_STREAM_DESTROYED","Cannot call %s after a stream was destroyed",Error),f("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),f("ERR_STREAM_PREMATURE_CLOSE","Premature close",Error),f("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF",Error),f("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event",Error),f("ERR_STREAM_WRITE_AFTER_END","write after end",Error),f("ERR_UNKNOWN_ENCODING","Unknown encoding: %s",TypeError),mM={AbortError:g,aggregateTwoErrors:p(h),hideStackFrames:p,codes:l},mM}var G2={exports:{}},SZ;function y4(){if(SZ)return G2.exports;SZ=1;const{AbortController:a,AbortSignal:e}=typeof self<"u"?self:typeof window<"u"?window:void 0;return G2.exports=a,G2.exports.AbortSignal=e,G2.exports.default=a,G2.exports}var EZ;function mi(){return EZ||(EZ=1,(function(a){const e=Xo(),{format:u,inspect:n}=D2e(),{codes:{ERR_INVALID_ARG_TYPE:r}}=ti(),{kResistStopPropagation:t,AggregateError:i,SymbolDispose:o}=An(),l=globalThis.AbortSignal||y4().AbortSignal,s=globalThis.AbortController||y4().AbortController,c=Object.getPrototypeOf(async function(){}).constructor,d=globalThis.Blob||e.Blob,f=typeof d<"u"?function(v){return v instanceof d}:function(v){return!1},p=(g,v)=>{if(g!==void 0&&(g===null||typeof g!="object"||!("aborted"in g)))throw new r(v,"AbortSignal",g)},h=(g,v)=>{if(typeof g!="function")throw new r(v,"Function",g)};a.exports={AggregateError:i,kEmptyObject:Object.freeze({}),once(g){let v=!1;return function(...m){v||(v=!0,g.apply(this,m))}},createDeferredPromise:function(){let g,v;return{promise:new Promise((T,w)=>{g=T,v=w}),resolve:g,reject:v}},promisify(g){return new Promise((v,m)=>{g((T,...w)=>T?m(T):v(...w))})},debuglog(){return function(){}},format:u,inspect:n,types:{isAsyncFunction(g){return g instanceof c},isArrayBufferView(g){return ArrayBuffer.isView(g)}},isBlob:f,deprecate(g,v){return g},addAbortListener:z4().addAbortListener||function(v,m){if(v===void 0)throw new r("signal","AbortSignal",v);p(v,"signal"),h(m,"listener");let T;return v.aborted?queueMicrotask(()=>m()):(v.addEventListener("abort",m,{__proto__:null,once:!0,[t]:!0}),T=()=>{v.removeEventListener("abort",m)}),{__proto__:null,[o](){var w;(w=T)===null||w===void 0||w()}}},AbortSignalAny:l.any||function(v){if(v.length===1)return v[0];const m=new s,T=()=>m.abort();return v.forEach(w=>{p(w,"signals"),w.addEventListener("abort",T,{once:!0})}),m.signal.addEventListener("abort",()=>{v.forEach(w=>w.removeEventListener("abort",T))},{once:!0}),m.signal}},a.exports.promisify.custom=Symbol.for("nodejs.util.promisify.custom")})(hM)),hM.exports}var $I={},bM,AZ;function K4(){if(AZ)return bM;AZ=1;const{ArrayIsArray:a,ArrayPrototypeIncludes:e,ArrayPrototypeJoin:u,ArrayPrototypeMap:n,NumberIsInteger:r,NumberIsNaN:t,NumberMAX_SAFE_INTEGER:i,NumberMIN_SAFE_INTEGER:o,NumberParseInt:l,ObjectPrototypeHasOwnProperty:s,RegExpPrototypeExec:c,String:d,StringPrototypeToUpperCase:f,StringPrototypeTrim:p}=An(),{hideStackFrames:h,codes:{ERR_SOCKET_BAD_PORT:g,ERR_INVALID_ARG_TYPE:v,ERR_INVALID_ARG_VALUE:m,ERR_OUT_OF_RANGE:T,ERR_UNKNOWN_SIGNAL:w}}=ti(),{normalizeEncoding:E}=mi(),{isAsyncFunction:S,isArrayBufferView:N}=mi().types,j={};function q(ne){return ne===(ne|0)}function O(ne){return ne===ne>>>0}const I=/^[0-7]+$/,A="must be a 32-bit unsigned integer or an octal string";function P(ne,ce,Se){if(typeof ne>"u"&&(ne=Se),typeof ne=="string"){if(c(I,ne)===null)throw new m(ce,ne,A);ne=l(ne,8)}return H(ne,ce),ne}const C=h((ne,ce,Se=o,xe=i)=>{if(typeof ne!="number")throw new v(ce,"number",ne);if(!r(ne))throw new T(ce,"an integer",ne);if(ne<Se||ne>xe)throw new T(ce,`>= ${Se} && <= ${xe}`,ne)}),B=h((ne,ce,Se=-2147483648,xe=2147483647)=>{if(typeof ne!="number")throw new v(ce,"number",ne);if(!r(ne))throw new T(ce,"an integer",ne);if(ne<Se||ne>xe)throw new T(ce,`>= ${Se} && <= ${xe}`,ne)}),H=h((ne,ce,Se=!1)=>{if(typeof ne!="number")throw new v(ce,"number",ne);if(!r(ne))throw new T(ce,"an integer",ne);const xe=Se?1:0,Ce=4294967295;if(ne<xe||ne>Ce)throw new T(ce,`>= ${xe} && <= ${Ce}`,ne)});function V(ne,ce){if(typeof ne!="string")throw new v(ce,"string",ne)}function G(ne,ce,Se=void 0,xe){if(typeof ne!="number")throw new v(ce,"number",ne);if(Se!=null&&ne<Se||xe!=null&&ne>xe||(Se!=null||xe!=null)&&t(ne))throw new T(ce,`${Se!=null?`>= ${Se}`:""}${Se!=null&&xe!=null?" && ":""}${xe!=null?`<= ${xe}`:""}`,ne)}const Z=h((ne,ce,Se)=>{if(!e(Se,ne)){const Ce="must be one of: "+u(n(Se,Ve=>typeof Ve=="string"?`'${Ve}'`:d(Ve)),", ");throw new m(ce,ne,Ce)}});function ae(ne,ce){if(typeof ne!="boolean")throw new v(ce,"boolean",ne)}function W(ne,ce,Se){return ne==null||!s(ne,ce)?Se:ne[ce]}const te=h((ne,ce,Se=null)=>{const xe=W(Se,"allowArray",!1),Ce=W(Se,"allowFunction",!1);if(!W(Se,"nullable",!1)&&ne===null||!xe&&a(ne)||typeof ne!="object"&&(!Ce||typeof ne!="function"))throw new v(ce,"Object",ne)}),se=h((ne,ce)=>{if(ne!=null&&typeof ne!="object"&&typeof ne!="function")throw new v(ce,"a dictionary",ne)}),pe=h((ne,ce,Se=0)=>{if(!a(ne))throw new v(ce,"Array",ne);if(ne.length<Se){const xe=`must be longer than ${Se}`;throw new m(ce,ne,xe)}});function le(ne,ce){pe(ne,ce);for(let Se=0;Se<ne.length;Se++)V(ne[Se],`${ce}[${Se}]`)}function Ee(ne,ce){pe(ne,ce);for(let Se=0;Se<ne.length;Se++)ae(ne[Se],`${ce}[${Se}]`)}function Oe(ne,ce){pe(ne,ce);for(let Se=0;Se<ne.length;Se++){const xe=ne[Se],Ce=`${ce}[${Se}]`;if(xe==null)throw new v(Ce,"AbortSignal",xe);_(xe,Ce)}}function Ie(ne,ce="signal"){if(V(ne,ce),j[ne]===void 0)throw j[f(ne)]!==void 0?new w(ne+" (signals must use all capital letters)"):new w(ne)}const Ae=h((ne,ce="buffer")=>{if(!N(ne))throw new v(ce,["Buffer","TypedArray","DataView"],ne)});function be(ne,ce){const Se=E(ce),xe=ne.length;if(Se==="hex"&&xe%2!==0)throw new m("encoding",ce,`is invalid for data of length ${xe}`)}function ee(ne,ce="Port",Se=!0){if(typeof ne!="number"&&typeof ne!="string"||typeof ne=="string"&&p(ne).length===0||+ne!==+ne>>>0||ne>65535||ne===0&&!Se)throw new g(ce,ne,Se);return ne|0}const _=h((ne,ce)=>{if(ne!==void 0&&(ne===null||typeof ne!="object"||!("aborted"in ne)))throw new v(ce,"AbortSignal",ne)}),F=h((ne,ce)=>{if(typeof ne!="function")throw new v(ce,"Function",ne)}),D=h((ne,ce)=>{if(typeof ne!="function"||S(ne))throw new v(ce,"Function",ne)}),L=h((ne,ce)=>{if(ne!==void 0)throw new v(ce,"undefined",ne)});function Q(ne,ce,Se){if(!e(Se,ne))throw new v(ce,`('${u(Se,"|")}')`,ne)}const Y=/^(?:<[^>]*>)(?:\s*;\s*[^;"\s]+(?:=(")?[^;"\s]*\1)?)*$/;function $(ne,ce){if(typeof ne>"u"||!c(Y,ne))throw new m(ce,ne,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}function ue(ne){if(typeof ne=="string")return $(ne,"hints"),ne;if(a(ne)){const ce=ne.length;let Se="";if(ce===0)return Se;for(let xe=0;xe<ce;xe++){const Ce=ne[xe];$(Ce,"hints"),Se+=Ce,xe!==ce-1&&(Se+=", ")}return Se}throw new m("hints",ne,'must be an array or string of format "</styles.css>; rel=preload; as=style"')}return bM={isInt32:q,isUint32:O,parseFileMode:P,validateArray:pe,validateStringArray:le,validateBooleanArray:Ee,validateAbortSignalArray:Oe,validateBoolean:ae,validateBuffer:Ae,validateDictionary:se,validateEncoding:be,validateFunction:F,validateInt32:B,validateInteger:C,validateNumber:G,validateObject:te,validateOneOf:Z,validatePlainFunction:D,validatePort:ee,validateSignalName:Ie,validateString:V,validateUint32:H,validateUndefined:L,validateUnion:Q,validateAbortSignal:_,validateLinkHeaderValue:ue},bM}var XI={exports:{}},gM,OZ;function uc(){if(OZ)return gM;OZ=1;const{SymbolAsyncIterator:a,SymbolIterator:e,SymbolFor:u}=An(),n=u("nodejs.stream.destroyed"),r=u("nodejs.stream.errored"),t=u("nodejs.stream.readable"),i=u("nodejs.stream.writable"),o=u("nodejs.stream.disturbed"),l=u("nodejs.webstream.isClosedPromise"),s=u("nodejs.webstream.controllerErrorFunction");function c(W,te=!1){var se;return!!(W&&typeof W.pipe=="function"&&typeof W.on=="function"&&(!te||typeof W.pause=="function"&&typeof W.resume=="function")&&(!W._writableState||((se=W._readableState)===null||se===void 0?void 0:se.readable)!==!1)&&(!W._writableState||W._readableState))}function d(W){var te;return!!(W&&typeof W.write=="function"&&typeof W.on=="function"&&(!W._readableState||((te=W._writableState)===null||te===void 0?void 0:te.writable)!==!1))}function f(W){return!!(W&&typeof W.pipe=="function"&&W._readableState&&typeof W.on=="function"&&typeof W.write=="function")}function p(W){return W&&(W._readableState||W._writableState||typeof W.write=="function"&&typeof W.on=="function"||typeof W.pipe=="function"&&typeof W.on=="function")}function h(W){return!!(W&&!p(W)&&typeof W.pipeThrough=="function"&&typeof W.getReader=="function"&&typeof W.cancel=="function")}function g(W){return!!(W&&!p(W)&&typeof W.getWriter=="function"&&typeof W.abort=="function")}function v(W){return!!(W&&!p(W)&&typeof W.readable=="object"&&typeof W.writable=="object")}function m(W){return h(W)||g(W)||v(W)}function T(W,te){return W==null?!1:te===!0?typeof W[a]=="function":te===!1?typeof W[e]=="function":typeof W[a]=="function"||typeof W[e]=="function"}function w(W){if(!p(W))return null;const te=W._writableState,se=W._readableState,pe=te||se;return!!(W.destroyed||W[n]||pe!=null&&pe.destroyed)}function E(W){if(!d(W))return null;if(W.writableEnded===!0)return!0;const te=W._writableState;return te!=null&&te.errored?!1:typeof te?.ended!="boolean"?null:te.ended}function S(W,te){if(!d(W))return null;if(W.writableFinished===!0)return!0;const se=W._writableState;return se!=null&&se.errored?!1:typeof se?.finished!="boolean"?null:!!(se.finished||te===!1&&se.ended===!0&&se.length===0)}function N(W){if(!c(W))return null;if(W.readableEnded===!0)return!0;const te=W._readableState;return!te||te.errored?!1:typeof te?.ended!="boolean"?null:te.ended}function j(W,te){if(!c(W))return null;const se=W._readableState;return se!=null&&se.errored?!1:typeof se?.endEmitted!="boolean"?null:!!(se.endEmitted||te===!1&&se.ended===!0&&se.length===0)}function q(W){return W&&W[t]!=null?W[t]:typeof W?.readable!="boolean"?null:w(W)?!1:c(W)&&W.readable&&!j(W)}function O(W){return W&&W[i]!=null?W[i]:typeof W?.writable!="boolean"?null:w(W)?!1:d(W)&&W.writable&&!E(W)}function I(W,te){return p(W)?w(W)?!0:!(te?.readable!==!1&&q(W)||te?.writable!==!1&&O(W)):null}function A(W){var te,se;return p(W)?W.writableErrored?W.writableErrored:(te=(se=W._writableState)===null||se===void 0?void 0:se.errored)!==null&&te!==void 0?te:null:null}function P(W){var te,se;return p(W)?W.readableErrored?W.readableErrored:(te=(se=W._readableState)===null||se===void 0?void 0:se.errored)!==null&&te!==void 0?te:null:null}function C(W){if(!p(W))return null;if(typeof W.closed=="boolean")return W.closed;const te=W._writableState,se=W._readableState;return typeof te?.closed=="boolean"||typeof se?.closed=="boolean"?te?.closed||se?.closed:typeof W._closed=="boolean"&&B(W)?W._closed:null}function B(W){return typeof W._closed=="boolean"&&typeof W._defaultKeepAlive=="boolean"&&typeof W._removedConnection=="boolean"&&typeof W._removedContLen=="boolean"}function H(W){return typeof W._sent100=="boolean"&&B(W)}function V(W){var te;return typeof W._consuming=="boolean"&&typeof W._dumped=="boolean"&&((te=W.req)===null||te===void 0?void 0:te.upgradeOrConnect)===void 0}function G(W){if(!p(W))return null;const te=W._writableState,se=W._readableState,pe=te||se;return!pe&&H(W)||!!(pe&&pe.autoDestroy&&pe.emitClose&&pe.closed===!1)}function Z(W){var te;return!!(W&&((te=W[o])!==null&&te!==void 0?te:W.readableDidRead||W.readableAborted))}function ae(W){var te,se,pe,le,Ee,Oe,Ie,Ae,be,ee;return!!(W&&((te=(se=(pe=(le=(Ee=(Oe=W[r])!==null&&Oe!==void 0?Oe:W.readableErrored)!==null&&Ee!==void 0?Ee:W.writableErrored)!==null&&le!==void 0?le:(Ie=W._readableState)===null||Ie===void 0?void 0:Ie.errorEmitted)!==null&&pe!==void 0?pe:(Ae=W._writableState)===null||Ae===void 0?void 0:Ae.errorEmitted)!==null&&se!==void 0?se:(be=W._readableState)===null||be===void 0?void 0:be.errored)!==null&&te!==void 0?te:!((ee=W._writableState)===null||ee===void 0)&&ee.errored))}return gM={isDestroyed:w,kIsDestroyed:n,isDisturbed:Z,kIsDisturbed:o,isErrored:ae,kIsErrored:r,isReadable:q,kIsReadable:t,kIsClosedPromise:l,kControllerErrorFunction:s,kIsWritable:i,isClosed:C,isDuplexNodeStream:f,isFinished:I,isIterable:T,isReadableNodeStream:c,isReadableStream:h,isReadableEnded:N,isReadableFinished:j,isReadableErrored:P,isNodeStream:p,isWebStream:m,isWritable:O,isWritableNodeStream:d,isWritableStream:g,isWritableEnded:E,isWritableFinished:S,isWritableErrored:A,isServerRequest:V,isServerResponse:H,willEmitClose:G,isTransformStream:v},gM}var xZ;function _l(){if(xZ)return XI.exports;xZ=1;const a=vl(),{AbortError:e,codes:u}=ti(),{ERR_INVALID_ARG_TYPE:n,ERR_STREAM_PREMATURE_CLOSE:r}=u,{kEmptyObject:t,once:i}=mi(),{validateAbortSignal:o,validateFunction:l,validateObject:s,validateBoolean:c}=K4(),{Promise:d,PromisePrototypeThen:f,SymbolDispose:p}=An(),{isClosed:h,isReadable:g,isReadableNodeStream:v,isReadableStream:m,isReadableFinished:T,isReadableErrored:w,isWritable:E,isWritableNodeStream:S,isWritableStream:N,isWritableFinished:j,isWritableErrored:q,isNodeStream:O,willEmitClose:I,kIsClosedPromise:A}=uc();let P;function C(Z){return Z.setHeader&&typeof Z.abort=="function"}const B=()=>{};function H(Z,ae,W){var te,se;if(arguments.length===2?(W=ae,ae=t):ae==null?ae=t:s(ae,"options"),l(W,"callback"),o(ae.signal,"options.signal"),W=i(W),m(Z)||N(Z))return V(Z,ae,W);if(!O(Z))throw new n("stream",["ReadableStream","WritableStream","Stream"],Z);const pe=(te=ae.readable)!==null&&te!==void 0?te:v(Z),le=(se=ae.writable)!==null&&se!==void 0?se:S(Z),Ee=Z._writableState,Oe=Z._readableState,Ie=()=>{Z.writable||ee()};let Ae=I(Z)&&v(Z)===pe&&S(Z)===le,be=j(Z,!1);const ee=()=>{be=!0,Z.destroyed&&(Ae=!1),!(Ae&&(!Z.readable||pe))&&(!pe||_)&&W.call(Z)};let _=T(Z,!1);const F=()=>{_=!0,Z.destroyed&&(Ae=!1),!(Ae&&(!Z.writable||le))&&(!le||be)&&W.call(Z)},D=ne=>{W.call(Z,ne)};let L=h(Z);const Q=()=>{L=!0;const ne=q(Z)||w(Z);if(ne&&typeof ne!="boolean")return W.call(Z,ne);if(pe&&!_&&v(Z,!0)&&!T(Z,!1))return W.call(Z,new r);if(le&&!be&&!j(Z,!1))return W.call(Z,new r);W.call(Z)},Y=()=>{L=!0;const ne=q(Z)||w(Z);if(ne&&typeof ne!="boolean")return W.call(Z,ne);W.call(Z)},$=()=>{Z.req.on("finish",ee)};C(Z)?(Z.on("complete",ee),Ae||Z.on("abort",Q),Z.req?$():Z.on("request",$)):le&&!Ee&&(Z.on("end",Ie),Z.on("close",Ie)),!Ae&&typeof Z.aborted=="boolean"&&Z.on("aborted",Q),Z.on("end",F),Z.on("finish",ee),ae.error!==!1&&Z.on("error",D),Z.on("close",Q),L?a.nextTick(Q):Ee!=null&&Ee.errorEmitted||Oe!=null&&Oe.errorEmitted?Ae||a.nextTick(Y):(!pe&&(!Ae||g(Z))&&(be||E(Z)===!1)||!le&&(!Ae||E(Z))&&(_||g(Z)===!1)||Oe&&Z.req&&Z.aborted)&&a.nextTick(Y);const ue=()=>{W=B,Z.removeListener("aborted",Q),Z.removeListener("complete",ee),Z.removeListener("abort",Q),Z.removeListener("request",$),Z.req&&Z.req.removeListener("finish",ee),Z.removeListener("end",Ie),Z.removeListener("close",Ie),Z.removeListener("finish",ee),Z.removeListener("end",F),Z.removeListener("error",D),Z.removeListener("close",Q)};if(ae.signal&&!L){const ne=()=>{const ce=W;ue(),ce.call(Z,new e(void 0,{cause:ae.signal.reason}))};if(ae.signal.aborted)a.nextTick(ne);else{P=P||mi().addAbortListener;const ce=P(ae.signal,ne),Se=W;W=i((...xe)=>{ce[p](),Se.apply(Z,xe)})}}return ue}function V(Z,ae,W){let te=!1,se=B;if(ae.signal)if(se=()=>{te=!0,W.call(Z,new e(void 0,{cause:ae.signal.reason}))},ae.signal.aborted)a.nextTick(se);else{P=P||mi().addAbortListener;const le=P(ae.signal,se),Ee=W;W=i((...Oe)=>{le[p](),Ee.apply(Z,Oe)})}const pe=(...le)=>{te||a.nextTick(()=>W.apply(Z,le))};return f(Z[A].promise,pe,pe),B}function G(Z,ae){var W;let te=!1;return ae===null&&(ae=t),(W=ae)!==null&&W!==void 0&&W.cleanup&&(c(ae.cleanup,"cleanup"),te=ae.cleanup),new d((se,pe)=>{const le=H(Z,ae,Ee=>{te&&le(),Ee?pe(Ee):se()})})}return XI.exports=H,XI.exports.finished=G,XI.exports}var vM,RZ;function S1(){if(RZ)return vM;RZ=1;const a=vl(),{aggregateTwoErrors:e,codes:{ERR_MULTIPLE_CALLBACK:u},AbortError:n}=ti(),{Symbol:r}=An(),{kIsDestroyed:t,isDestroyed:i,isFinished:o,isServerRequest:l}=uc(),s=r("kDestroy"),c=r("kConstruct");function d(I,A,P){I&&(I.stack,A&&!A.errored&&(A.errored=I),P&&!P.errored&&(P.errored=I))}function f(I,A){const P=this._readableState,C=this._writableState,B=C||P;return C!=null&&C.destroyed||P!=null&&P.destroyed?(typeof A=="function"&&A(),this):(d(I,C,P),C&&(C.destroyed=!0),P&&(P.destroyed=!0),B.constructed?p(this,I,A):this.once(s,function(H){p(this,e(H,I),A)}),this)}function p(I,A,P){let C=!1;function B(H){if(C)return;C=!0;const V=I._readableState,G=I._writableState;d(H,G,V),G&&(G.closed=!0),V&&(V.closed=!0),typeof P=="function"&&P(H),H?a.nextTick(h,I,H):a.nextTick(g,I)}try{I._destroy(A||null,B)}catch(H){B(H)}}function h(I,A){v(I,A),g(I)}function g(I){const A=I._readableState,P=I._writableState;P&&(P.closeEmitted=!0),A&&(A.closeEmitted=!0),(P!=null&&P.emitClose||A!=null&&A.emitClose)&&I.emit("close")}function v(I,A){const P=I._readableState,C=I._writableState;C!=null&&C.errorEmitted||P!=null&&P.errorEmitted||(C&&(C.errorEmitted=!0),P&&(P.errorEmitted=!0),I.emit("error",A))}function m(){const I=this._readableState,A=this._writableState;I&&(I.constructed=!0,I.closed=!1,I.closeEmitted=!1,I.destroyed=!1,I.errored=null,I.errorEmitted=!1,I.reading=!1,I.ended=I.readable===!1,I.endEmitted=I.readable===!1),A&&(A.constructed=!0,A.destroyed=!1,A.closed=!1,A.closeEmitted=!1,A.errored=null,A.errorEmitted=!1,A.finalCalled=!1,A.prefinished=!1,A.ended=A.writable===!1,A.ending=A.writable===!1,A.finished=A.writable===!1)}function T(I,A,P){const C=I._readableState,B=I._writableState;if(B!=null&&B.destroyed||C!=null&&C.destroyed)return this;C!=null&&C.autoDestroy||B!=null&&B.autoDestroy?I.destroy(A):A&&(A.stack,B&&!B.errored&&(B.errored=A),C&&!C.errored&&(C.errored=A),P?a.nextTick(v,I,A):v(I,A))}function w(I,A){if(typeof I._construct!="function")return;const P=I._readableState,C=I._writableState;P&&(P.constructed=!1),C&&(C.constructed=!1),I.once(c,A),!(I.listenerCount(c)>1)&&a.nextTick(E,I)}function E(I){let A=!1;function P(C){if(A){T(I,C??new u);return}A=!0;const B=I._readableState,H=I._writableState,V=H||B;B&&(B.constructed=!0),H&&(H.constructed=!0),V.destroyed?I.emit(s,C):C?T(I,C,!0):a.nextTick(S,I)}try{I._construct(C=>{a.nextTick(P,C)})}catch(C){a.nextTick(P,C)}}function S(I){I.emit(c)}function N(I){return I?.setHeader&&typeof I.abort=="function"}function j(I){I.emit("close")}function q(I,A){I.emit("error",A),a.nextTick(j,I)}function O(I,A){!I||i(I)||(!A&&!o(I)&&(A=new n),l(I)?(I.socket=null,I.destroy(A)):N(I)?I.abort():N(I.req)?I.req.abort():typeof I.destroy=="function"?I.destroy(A):typeof I.close=="function"?I.close():A?a.nextTick(q,I,A):a.nextTick(j,I),I.destroyed||(I[t]=!0))}return vM={construct:w,destroyer:O,destroy:f,undestroy:m,errorOrDestroy:T},vM}var _M,NZ;function cB(){if(NZ)return _M;NZ=1;const{ArrayIsArray:a,ObjectSetPrototypeOf:e}=An(),{EventEmitter:u}=z4();function n(t){u.call(this,t)}e(n.prototype,u.prototype),e(n,u),n.prototype.pipe=function(t,i){const o=this;function l(g){t.writable&&t.write(g)===!1&&o.pause&&o.pause()}o.on("data",l);function s(){o.readable&&o.resume&&o.resume()}t.on("drain",s),!t._isStdio&&(!i||i.end!==!1)&&(o.on("end",d),o.on("close",f));let c=!1;function d(){c||(c=!0,t.end())}function f(){c||(c=!0,typeof t.destroy=="function"&&t.destroy())}function p(g){h(),u.listenerCount(this,"error")===0&&this.emit("error",g)}r(o,"error",p),r(t,"error",p);function h(){o.removeListener("data",l),t.removeListener("drain",s),o.removeListener("end",d),o.removeListener("close",f),o.removeListener("error",p),t.removeListener("error",p),o.removeListener("end",h),o.removeListener("close",h),t.removeListener("close",h)}return o.on("end",h),o.on("close",h),t.on("close",h),t.emit("pipe",o),t};function r(t,i,o){if(typeof t.prependListener=="function")return t.prependListener(i,o);!t._events||!t._events[i]?t.on(i,o):a(t._events[i])?t._events[i].unshift(o):t._events[i]=[o,t._events[i]]}return _M={Stream:n,prependListener:r},_M}var TM={exports:{}},IZ;function fP(){return IZ||(IZ=1,(function(a){const{SymbolDispose:e}=An(),{AbortError:u,codes:n}=ti(),{isNodeStream:r,isWebStream:t,kControllerErrorFunction:i}=uc(),o=_l(),{ERR_INVALID_ARG_TYPE:l}=n;let s;const c=(d,f)=>{if(typeof d!="object"||!("aborted"in d))throw new l(f,"AbortSignal",d)};a.exports.addAbortSignal=function(f,p){if(c(f,"signal"),!r(p)&&!t(p))throw new l("stream",["ReadableStream","WritableStream","Stream"],p);return a.exports.addAbortSignalNoValidate(f,p)},a.exports.addAbortSignalNoValidate=function(d,f){if(typeof d!="object"||!("aborted"in d))return f;const p=r(f)?()=>{f.destroy(new u(void 0,{cause:d.reason}))}:()=>{f[i](new u(void 0,{cause:d.reason}))};if(d.aborted)p();else{s=s||mi().addAbortListener;const h=s(d,p);o(f,h[e])}return f}})(TM)),TM.exports}var wM,DZ;function TIe(){if(DZ)return wM;DZ=1;const{StringPrototypeSlice:a,SymbolIterator:e,TypedArrayPrototypeSet:u,Uint8Array:n}=An(),{Buffer:r}=Xo(),{inspect:t}=mi();return wM=class{constructor(){this.head=null,this.tail=null,this.length=0}push(o){const l={data:o,next:null};this.length>0?this.tail.next=l:this.head=l,this.tail=l,++this.length}unshift(o){const l={data:o,next:this.head};this.length===0&&(this.tail=l),this.head=l,++this.length}shift(){if(this.length===0)return;const o=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,o}clear(){this.head=this.tail=null,this.length=0}join(o){if(this.length===0)return"";let l=this.head,s=""+l.data;for(;(l=l.next)!==null;)s+=o+l.data;return s}concat(o){if(this.length===0)return r.alloc(0);const l=r.allocUnsafe(o>>>0);let s=this.head,c=0;for(;s;)u(l,s.data,c),c+=s.data.length,s=s.next;return l}consume(o,l){const s=this.head.data;if(o<s.length){const c=s.slice(0,o);return this.head.data=s.slice(o),c}return o===s.length?this.shift():l?this._getString(o):this._getBuffer(o)}first(){return this.head.data}*[e](){for(let o=this.head;o;o=o.next)yield o.data}_getString(o){let l="",s=this.head,c=0;do{const d=s.data;if(o>d.length)l+=d,o-=d.length;else{o===d.length?(l+=d,++c,s.next?this.head=s.next:this.head=this.tail=null):(l+=a(d,0,o),this.head=s,s.data=a(d,o));break}++c}while((s=s.next)!==null);return this.length-=c,l}_getBuffer(o){const l=r.allocUnsafe(o),s=o;let c=this.head,d=0;do{const f=c.data;if(o>f.length)u(l,f,s-o),o-=f.length;else{o===f.length?(u(l,f,s-o),++d,c.next?this.head=c.next:this.head=this.tail=null):(u(l,new n(f.buffer,f.byteOffset,o),s-o),this.head=c,c.data=f.slice(o));break}++d}while((c=c.next)!==null);return this.length-=d,l}[Symbol.for("nodejs.util.inspect.custom")](o,l){return t(this,{...l,depth:0,customInspect:!1})}},wM}var SM,FZ;function pP(){if(FZ)return SM;FZ=1;const{MathFloor:a,NumberIsInteger:e}=An(),{validateInteger:u}=K4(),{ERR_INVALID_ARG_VALUE:n}=ti().codes;let r=16*1024,t=16;function i(c,d,f){return c.highWaterMark!=null?c.highWaterMark:d?c[f]:null}function o(c){return c?t:r}function l(c,d){u(d,"value",0),c?t=d:r=d}function s(c,d,f,p){const h=i(d,p,f);if(h!=null){if(!e(h)||h<0){const g=p?`options.${f}`:"options.highWaterMark";throw new n(g,h)}return a(h)}return o(c.objectMode)}return SM={getHighWaterMark:s,getDefaultHighWaterMark:o,setDefaultHighWaterMark:l},SM}var EM={},KI={exports:{}};var PZ;function wIe(){return PZ||(PZ=1,(function(a,e){var u=Xo(),n=u.Buffer;function r(i,o){for(var l in i)o[l]=i[l]}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?a.exports=u:(r(u,e),e.Buffer=t);function t(i,o,l){return n(i,o,l)}t.prototype=Object.create(n.prototype),r(n,t),t.from=function(i,o,l){if(typeof i=="number")throw new TypeError("Argument must not be a number");return n(i,o,l)},t.alloc=function(i,o,l){if(typeof i!="number")throw new TypeError("Argument must be a number");var s=n(i);return o!==void 0?typeof l=="string"?s.fill(o,l):s.fill(o):s.fill(0),s},t.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return n(i)},t.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return u.SlowBuffer(i)}})(KI,KI.exports)),KI.exports}var jZ;function SIe(){if(jZ)return EM;jZ=1;var a=wIe().Buffer,e=a.isEncoding||function(m){switch(m=""+m,m&&m.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function u(m){if(!m)return"utf8";for(var T;;)switch(m){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return m;default:if(T)return;m=(""+m).toLowerCase(),T=!0}}function n(m){var T=u(m);if(typeof T!="string"&&(a.isEncoding===e||!e(m)))throw new Error("Unknown encoding: "+m);return T||m}EM.StringDecoder=r;function r(m){this.encoding=n(m);var T;switch(this.encoding){case"utf16le":this.text=d,this.end=f,T=4;break;case"utf8":this.fillLast=l,T=4;break;case"base64":this.text=p,this.end=h,T=3;break;default:this.write=g,this.end=v;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=a.allocUnsafe(T)}r.prototype.write=function(m){if(m.length===0)return"";var T,w;if(this.lastNeed){if(T=this.fillLast(m),T===void 0)return"";w=this.lastNeed,this.lastNeed=0}else w=0;return w<m.length?T?T+this.text(m,w):this.text(m,w):T||""},r.prototype.end=c,r.prototype.text=s,r.prototype.fillLast=function(m){if(this.lastNeed<=m.length)return m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,this.lastTotal-this.lastNeed,0,m.length),this.lastNeed-=m.length};function t(m){return m<=127?0:m>>5===6?2:m>>4===14?3:m>>3===30?4:m>>6===2?-1:-2}function i(m,T,w){var E=T.length-1;if(E<w)return 0;var S=t(T[E]);return S>=0?(S>0&&(m.lastNeed=S-1),S):--E<w||S===-2?0:(S=t(T[E]),S>=0?(S>0&&(m.lastNeed=S-2),S):--E<w||S===-2?0:(S=t(T[E]),S>=0?(S>0&&(S===2?S=0:m.lastNeed=S-3),S):0))}function o(m,T,w){if((T[0]&192)!==128)return m.lastNeed=0,"";if(m.lastNeed>1&&T.length>1){if((T[1]&192)!==128)return m.lastNeed=1,"";if(m.lastNeed>2&&T.length>2&&(T[2]&192)!==128)return m.lastNeed=2,""}}function l(m){var T=this.lastTotal-this.lastNeed,w=o(this,m);if(w!==void 0)return w;if(this.lastNeed<=m.length)return m.copy(this.lastChar,T,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);m.copy(this.lastChar,T,0,m.length),this.lastNeed-=m.length}function s(m,T){var w=i(this,m,T);if(!this.lastNeed)return m.toString("utf8",T);this.lastTotal=w;var E=m.length-(w-this.lastNeed);return m.copy(this.lastChar,0,E),m.toString("utf8",T,E)}function c(m){var T=m&&m.length?this.write(m):"";return this.lastNeed?T+"":T}function d(m,T){if((m.length-T)%2===0){var w=m.toString("utf16le",T);if(w){var E=w.charCodeAt(w.length-1);if(E>=55296&&E<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1],w.slice(0,-1)}return w}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=m[m.length-1],m.toString("utf16le",T,m.length-1)}function f(m){var T=m&&m.length?this.write(m):"";if(this.lastNeed){var w=this.lastTotal-this.lastNeed;return T+this.lastChar.toString("utf16le",0,w)}return T}function p(m,T){var w=(m.length-T)%3;return w===0?m.toString("base64",T):(this.lastNeed=3-w,this.lastTotal=3,w===1?this.lastChar[0]=m[m.length-1]:(this.lastChar[0]=m[m.length-2],this.lastChar[1]=m[m.length-1]),m.toString("base64",T,m.length-w))}function h(m){var T=m&&m.length?this.write(m):"";return this.lastNeed?T+this.lastChar.toString("base64",0,3-this.lastNeed):T}function g(m){return m.toString(this.encoding)}function v(m){return m&&m.length?this.write(m):""}return EM}var AM,MZ;function F2e(){if(MZ)return AM;MZ=1;const a=vl(),{PromisePrototypeThen:e,SymbolAsyncIterator:u,SymbolIterator:n}=An(),{Buffer:r}=Xo(),{ERR_INVALID_ARG_TYPE:t,ERR_STREAM_NULL_VALUES:i}=ti().codes;function o(l,s,c){let d;if(typeof s=="string"||s instanceof r)return new l({objectMode:!0,...c,read(){this.push(s),this.push(null)}});let f;if(s&&s[u])f=!0,d=s[u]();else if(s&&s[n])f=!1,d=s[n]();else throw new t("iterable",["Iterable"],s);const p=new l({objectMode:!0,highWaterMark:1,...c});let h=!1;p._read=function(){h||(h=!0,v())},p._destroy=function(m,T){e(g(m),()=>a.nextTick(T,m),w=>a.nextTick(T,w||m))};async function g(m){const T=m!=null,w=typeof d.throw=="function";if(T&&w){const{value:E,done:S}=await d.throw(m);if(await E,S)return}if(typeof d.return=="function"){const{value:E}=await d.return();await E}}async function v(){for(;;){try{const{value:m,done:T}=f?await d.next():d.next();if(T)p.push(null);else{const w=m&&typeof m.then=="function"?await m:m;if(w===null)throw h=!1,new i;if(p.push(w))continue;h=!1}}catch(m){p.destroy(m)}break}}return p}return AM=o,AM}var OM,CZ;function hP(){if(CZ)return OM;CZ=1;const a=vl(),{ArrayPrototypeIndexOf:e,NumberIsInteger:u,NumberIsNaN:n,NumberParseInt:r,ObjectDefineProperties:t,ObjectKeys:i,ObjectSetPrototypeOf:o,Promise:l,SafeSet:s,SymbolAsyncDispose:c,SymbolAsyncIterator:d,Symbol:f}=An();OM=xe,xe.ReadableState=Se;const{EventEmitter:p}=z4(),{Stream:h,prependListener:g}=cB(),{Buffer:v}=Xo(),{addAbortSignal:m}=fP(),T=_l();let w=mi().debuglog("stream",fe=>{w=fe});const E=TIe(),S=S1(),{getHighWaterMark:N,getDefaultHighWaterMark:j}=pP(),{aggregateTwoErrors:q,codes:{ERR_INVALID_ARG_TYPE:O,ERR_METHOD_NOT_IMPLEMENTED:I,ERR_OUT_OF_RANGE:A,ERR_STREAM_PUSH_AFTER_EOF:P,ERR_STREAM_UNSHIFT_AFTER_END_EVENT:C},AbortError:B}=ti(),{validateObject:H}=K4(),V=f("kPaused"),{StringDecoder:G}=SIe(),Z=F2e();o(xe.prototype,h.prototype),o(xe,h);const ae=()=>{},{errorOrDestroy:W}=S,te=1,se=2,pe=4,le=8,Ee=16,Oe=32,Ie=64,Ae=128,be=256,ee=512,_=1024,F=2048,D=4096,L=8192,Q=16384,Y=32768,$=65536,ue=1<<17,ne=1<<18;function ce(fe){return{enumerable:!1,get(){return(this.state&fe)!==0},set(Te){Te?this.state|=fe:this.state&=~fe}}}t(Se.prototype,{objectMode:ce(te),ended:ce(se),endEmitted:ce(pe),reading:ce(le),constructed:ce(Ee),sync:ce(Oe),needReadable:ce(Ie),emittedReadable:ce(Ae),readableListening:ce(be),resumeScheduled:ce(ee),errorEmitted:ce(_),emitClose:ce(F),autoDestroy:ce(D),destroyed:ce(L),closed:ce(Q),closeEmitted:ce(Y),multiAwaitDrain:ce($),readingMore:ce(ue),dataEmitted:ce(ne)});function Se(fe,Te,qe){typeof qe!="boolean"&&(qe=Te instanceof ec()),this.state=F|D|Ee|Oe,fe&&fe.objectMode&&(this.state|=te),qe&&fe&&fe.readableObjectMode&&(this.state|=te),this.highWaterMark=fe?N(this,fe,"readableHighWaterMark",qe):j(!1),this.buffer=new E,this.length=0,this.pipes=[],this.flowing=null,this[V]=null,fe&&fe.emitClose===!1&&(this.state&=~F),fe&&fe.autoDestroy===!1&&(this.state&=~D),this.errored=null,this.defaultEncoding=fe&&fe.defaultEncoding||"utf8",this.awaitDrainWriters=null,this.decoder=null,this.encoding=null,fe&&fe.encoding&&(this.decoder=new G(fe.encoding),this.encoding=fe.encoding)}function xe(fe){if(!(this instanceof xe))return new xe(fe);const Te=this instanceof ec();this._readableState=new Se(fe,this,Te),fe&&(typeof fe.read=="function"&&(this._read=fe.read),typeof fe.destroy=="function"&&(this._destroy=fe.destroy),typeof fe.construct=="function"&&(this._construct=fe.construct),fe.signal&&!Te&&m(fe.signal,this)),h.call(this,fe),S.construct(this,()=>{this._readableState.needReadable&&ve(this,this._readableState)})}xe.prototype.destroy=S.destroy,xe.prototype._undestroy=S.undestroy,xe.prototype._destroy=function(fe,Te){Te(fe)},xe.prototype[p.captureRejectionSymbol]=function(fe){this.destroy(fe)},xe.prototype[c]=function(){let fe;return this.destroyed||(fe=this.readableEnded?null:new B,this.destroy(fe)),new l((Te,qe)=>T(this,it=>it&&it!==fe?qe(it):Te(null)))},xe.prototype.push=function(fe,Te){return Ce(this,fe,Te,!1)},xe.prototype.unshift=function(fe,Te){return Ce(this,fe,Te,!0)};function Ce(fe,Te,qe,it){w("readableAddChunk",Te);const Me=fe._readableState;let st;if((Me.state&te)===0&&(typeof Te=="string"?(qe=qe||Me.defaultEncoding,Me.encoding!==qe&&(it&&Me.encoding?Te=v.from(Te,qe).toString(Me.encoding):(Te=v.from(Te,qe),qe=""))):Te instanceof v?qe="":h._isUint8Array(Te)?(Te=h._uint8ArrayToBuffer(Te),qe=""):Te!=null&&(st=new O("chunk",["string","Buffer","Uint8Array"],Te))),st)W(fe,st);else if(Te===null)Me.state&=~le,X(fe,Me);else if((Me.state&te)!==0||Te&&Te.length>0)if(it)if((Me.state&pe)!==0)W(fe,new C);else{if(Me.destroyed||Me.errored)return!1;Ve(fe,Me,Te,!0)}else if(Me.ended)W(fe,new P);else{if(Me.destroyed||Me.errored)return!1;Me.state&=~le,Me.decoder&&!qe?(Te=Me.decoder.write(Te),Me.objectMode||Te.length!==0?Ve(fe,Me,Te,!1):ve(fe,Me)):Ve(fe,Me,Te,!1)}else it||(Me.state&=~le,ve(fe,Me));return!Me.ended&&(Me.length<Me.highWaterMark||Me.length===0)}function Ve(fe,Te,qe,it){Te.flowing&&Te.length===0&&!Te.sync&&fe.listenerCount("data")>0?((Te.state&$)!==0?Te.awaitDrainWriters.clear():Te.awaitDrainWriters=null,Te.dataEmitted=!0,fe.emit("data",qe)):(Te.length+=Te.objectMode?1:qe.length,it?Te.buffer.unshift(qe):Te.buffer.push(qe),(Te.state&Ie)!==0&&J(fe)),ve(fe,Te)}xe.prototype.isPaused=function(){const fe=this._readableState;return fe[V]===!0||fe.flowing===!1},xe.prototype.setEncoding=function(fe){const Te=new G(fe);this._readableState.decoder=Te,this._readableState.encoding=this._readableState.decoder.encoding;const qe=this._readableState.buffer;let it="";for(const Me of qe)it+=Te.write(Me);return qe.clear(),it!==""&&qe.push(it),this._readableState.length=it.length,this};const Ke=1073741824;function Ye(fe){if(fe>Ke)throw new A("size","<= 1GiB",fe);return fe--,fe|=fe>>>1,fe|=fe>>>2,fe|=fe>>>4,fe|=fe>>>8,fe|=fe>>>16,fe++,fe}function oe(fe,Te){return fe<=0||Te.length===0&&Te.ended?0:(Te.state&te)!==0?1:n(fe)?Te.flowing&&Te.length?Te.buffer.first().length:Te.length:fe<=Te.length?fe:Te.ended?Te.length:0}xe.prototype.read=function(fe){w("read",fe),fe===void 0?fe=NaN:u(fe)||(fe=r(fe,10));const Te=this._readableState,qe=fe;if(fe>Te.highWaterMark&&(Te.highWaterMark=Ye(fe)),fe!==0&&(Te.state&=~Ae),fe===0&&Te.needReadable&&((Te.highWaterMark!==0?Te.length>=Te.highWaterMark:Te.length>0)||Te.ended))return w("read: emitReadable",Te.length,Te.ended),Te.length===0&&Te.ended?ge(this):J(this),null;if(fe=oe(fe,Te),fe===0&&Te.ended)return Te.length===0&&ge(this),null;let it=(Te.state&Ie)!==0;if(w("need readable",it),(Te.length===0||Te.length-fe<Te.highWaterMark)&&(it=!0,w("length less than watermark",it)),Te.ended||Te.reading||Te.destroyed||Te.errored||!Te.constructed)it=!1,w("reading, ended or constructing",it);else if(it){w("do read"),Te.state|=le|Oe,Te.length===0&&(Te.state|=Ie);try{this._read(Te.highWaterMark)}catch(st){W(this,st)}Te.state&=~Oe,Te.reading||(fe=oe(qe,Te))}let Me;return fe>0?Me=de(fe,Te):Me=null,Me===null?(Te.needReadable=Te.length<=Te.highWaterMark,fe=0):(Te.length-=fe,Te.multiAwaitDrain?Te.awaitDrainWriters.clear():Te.awaitDrainWriters=null),Te.length===0&&(Te.ended||(Te.needReadable=!0),qe!==fe&&Te.ended&&ge(this)),Me!==null&&!Te.errorEmitted&&!Te.closeEmitted&&(Te.dataEmitted=!0,this.emit("data",Me)),Me};function X(fe,Te){if(w("onEofChunk"),!Te.ended){if(Te.decoder){const qe=Te.decoder.end();qe&&qe.length&&(Te.buffer.push(qe),Te.length+=Te.objectMode?1:qe.length)}Te.ended=!0,Te.sync?J(fe):(Te.needReadable=!1,Te.emittedReadable=!0,he(fe))}}function J(fe){const Te=fe._readableState;w("emitReadable",Te.needReadable,Te.emittedReadable),Te.needReadable=!1,Te.emittedReadable||(w("emitReadable",Te.flowing),Te.emittedReadable=!0,a.nextTick(he,fe))}function he(fe){const Te=fe._readableState;w("emitReadable_",Te.destroyed,Te.length,Te.ended),!Te.destroyed&&!Te.errored&&(Te.length||Te.ended)&&(fe.emit("readable"),Te.emittedReadable=!1),Te.needReadable=!Te.flowing&&!Te.ended&&Te.length<=Te.highWaterMark,R(fe)}function ve(fe,Te){!Te.readingMore&&Te.constructed&&(Te.readingMore=!0,a.nextTick(ye,fe,Te))}function ye(fe,Te){for(;!Te.reading&&!Te.ended&&(Te.length<Te.highWaterMark||Te.flowing&&Te.length===0);){const qe=Te.length;if(w("maybeReadMore read 0"),fe.read(0),qe===Te.length)break}Te.readingMore=!1}xe.prototype._read=function(fe){throw new I("_read()")},xe.prototype.pipe=function(fe,Te){const qe=this,it=this._readableState;it.pipes.length===1&&(it.multiAwaitDrain||(it.multiAwaitDrain=!0,it.awaitDrainWriters=new s(it.awaitDrainWriters?[it.awaitDrainWriters]:[]))),it.pipes.push(fe),w("pipe count=%d opts=%j",it.pipes.length,Te);const st=(!Te||Te.end!==!1)&&fe!==a.stdout&&fe!==a.stderr?Ot:Re;it.endEmitted?a.nextTick(st):qe.once("end",st),fe.on("unpipe",tt);function tt(Qe,ke){w("onunpipe"),Qe===qe&&ke&&ke.hasUnpiped===!1&&(ke.hasUnpiped=!0,Tt())}function Ot(){w("onend"),fe.end()}let yt,bt=!1;function Tt(){w("cleanup"),fe.removeListener("close",lr),fe.removeListener("finish",ht),yt&&fe.removeListener("drain",yt),fe.removeListener("error",gt),fe.removeListener("unpipe",tt),qe.removeListener("end",Ot),qe.removeListener("end",Re),qe.removeListener("data",wt),bt=!0,yt&&it.awaitDrainWriters&&(!fe._writableState||fe._writableState.needDrain)&&yt()}function xt(){bt||(it.pipes.length===1&&it.pipes[0]===fe?(w("false write response, pause",0),it.awaitDrainWriters=fe,it.multiAwaitDrain=!1):it.pipes.length>1&&it.pipes.includes(fe)&&(w("false write response, pause",it.awaitDrainWriters.size),it.awaitDrainWriters.add(fe)),qe.pause()),yt||(yt=re(qe,fe),fe.on("drain",yt))}qe.on("data",wt);function wt(Qe){w("ondata");const ke=fe.write(Qe);w("dest.write",ke),ke===!1&&xt()}function gt(Qe){if(w("onerror",Qe),Re(),fe.removeListener("error",gt),fe.listenerCount("error")===0){const ke=fe._writableState||fe._readableState;ke&&!ke.errorEmitted?W(fe,Qe):fe.emit("error",Qe)}}g(fe,"error",gt);function lr(){fe.removeListener("finish",ht),Re()}fe.once("close",lr);function ht(){w("onfinish"),fe.removeListener("close",lr),Re()}fe.once("finish",ht);function Re(){w("unpipe"),qe.unpipe(fe)}return fe.emit("pipe",qe),fe.writableNeedDrain===!0?xt():it.flowing||(w("pipe resume"),qe.resume()),fe};function re(fe,Te){return function(){const it=fe._readableState;it.awaitDrainWriters===Te?(w("pipeOnDrain",1),it.awaitDrainWriters=null):it.multiAwaitDrain&&(w("pipeOnDrain",it.awaitDrainWriters.size),it.awaitDrainWriters.delete(Te)),(!it.awaitDrainWriters||it.awaitDrainWriters.size===0)&&fe.listenerCount("data")&&fe.resume()}}xe.prototype.unpipe=function(fe){const Te=this._readableState,qe={hasUnpiped:!1};if(Te.pipes.length===0)return this;if(!fe){const Me=Te.pipes;Te.pipes=[],this.pause();for(let st=0;st<Me.length;st++)Me[st].emit("unpipe",this,{hasUnpiped:!1});return this}const it=e(Te.pipes,fe);return it===-1?this:(Te.pipes.splice(it,1),Te.pipes.length===0&&this.pause(),fe.emit("unpipe",this,qe),this)},xe.prototype.on=function(fe,Te){const qe=h.prototype.on.call(this,fe,Te),it=this._readableState;return fe==="data"?(it.readableListening=this.listenerCount("readable")>0,it.flowing!==!1&&this.resume()):fe==="readable"&&!it.endEmitted&&!it.readableListening&&(it.readableListening=it.needReadable=!0,it.flowing=!1,it.emittedReadable=!1,w("on readable",it.length,it.reading),it.length?J(this):it.reading||a.nextTick(Le,this)),qe},xe.prototype.addListener=xe.prototype.on,xe.prototype.removeListener=function(fe,Te){const qe=h.prototype.removeListener.call(this,fe,Te);return fe==="readable"&&a.nextTick(Ne,this),qe},xe.prototype.off=xe.prototype.removeListener,xe.prototype.removeAllListeners=function(fe){const Te=h.prototype.removeAllListeners.apply(this,arguments);return(fe==="readable"||fe===void 0)&&a.nextTick(Ne,this),Te};function Ne(fe){const Te=fe._readableState;Te.readableListening=fe.listenerCount("readable")>0,Te.resumeScheduled&&Te[V]===!1?Te.flowing=!0:fe.listenerCount("data")>0?fe.resume():Te.readableListening||(Te.flowing=null)}function Le(fe){w("readable nexttick read 0"),fe.read(0)}xe.prototype.resume=function(){const fe=this._readableState;return fe.flowing||(w("resume"),fe.flowing=!fe.readableListening,Pe(this,fe)),fe[V]=!1,this};function Pe(fe,Te){Te.resumeScheduled||(Te.resumeScheduled=!0,a.nextTick(Fe,fe,Te))}function Fe(fe,Te){w("resume",Te.reading),Te.reading||fe.read(0),Te.resumeScheduled=!1,fe.emit("resume"),R(fe),Te.flowing&&!Te.reading&&fe.read(0)}xe.prototype.pause=function(){return w("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(w("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState[V]=!0,this};function R(fe){const Te=fe._readableState;for(w("flow",Te.flowing);Te.flowing&&fe.read()!==null;);}xe.prototype.wrap=function(fe){let Te=!1;fe.on("data",it=>{!this.push(it)&&fe.pause&&(Te=!0,fe.pause())}),fe.on("end",()=>{this.push(null)}),fe.on("error",it=>{W(this,it)}),fe.on("close",()=>{this.destroy()}),fe.on("destroy",()=>{this.destroy()}),this._read=()=>{Te&&fe.resume&&(Te=!1,fe.resume())};const qe=i(fe);for(let it=1;it<qe.length;it++){const Me=qe[it];this[Me]===void 0&&typeof fe[Me]=="function"&&(this[Me]=fe[Me].bind(fe))}return this},xe.prototype[d]=function(){return k(this)},xe.prototype.iterator=function(fe){return fe!==void 0&&H(fe,"options"),k(this,fe)};function k(fe,Te){typeof fe.read!="function"&&(fe=xe.wrap(fe,{objectMode:!0}));const qe=K(fe,Te);return qe.stream=fe,qe}async function*K(fe,Te){let qe=ae;function it(tt){this===fe?(qe(),qe=ae):qe=tt}fe.on("readable",it);let Me;const st=T(fe,{writable:!1},tt=>{Me=tt?q(Me,tt):null,qe(),qe=ae});try{for(;;){const tt=fe.destroyed?null:fe.read();if(tt!==null)yield tt;else{if(Me)throw Me;if(Me===null)return;await new l(it)}}}catch(tt){throw Me=q(Me,tt),Me}finally{(Me||Te?.destroyOnReturn!==!1)&&(Me===void 0||fe._readableState.autoDestroy)?S.destroyer(fe,null):(fe.off("readable",it),st())}}t(xe.prototype,{readable:{__proto__:null,get(){const fe=this._readableState;return!!fe&&fe.readable!==!1&&!fe.destroyed&&!fe.errorEmitted&&!fe.endEmitted},set(fe){this._readableState&&(this._readableState.readable=!!fe)}},readableDidRead:{__proto__:null,enumerable:!1,get:function(){return this._readableState.dataEmitted}},readableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._readableState.readable!==!1&&(this._readableState.destroyed||this._readableState.errored)&&!this._readableState.endEmitted)}},readableHighWaterMark:{__proto__:null,enumerable:!1,get:function(){return this._readableState.highWaterMark}},readableBuffer:{__proto__:null,enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}},readableFlowing:{__proto__:null,enumerable:!1,get:function(){return this._readableState.flowing},set:function(fe){this._readableState&&(this._readableState.flowing=fe)}},readableLength:{__proto__:null,enumerable:!1,get(){return this._readableState.length}},readableObjectMode:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.objectMode:!1}},readableEncoding:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.encoding:null}},errored:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.errored:null}},closed:{__proto__:null,get(){return this._readableState?this._readableState.closed:!1}},destroyed:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.destroyed:!1},set(fe){this._readableState&&(this._readableState.destroyed=fe)}},readableEnded:{__proto__:null,enumerable:!1,get(){return this._readableState?this._readableState.endEmitted:!1}}}),t(Se.prototype,{pipesCount:{__proto__:null,get(){return this.pipes.length}},paused:{__proto__:null,get(){return this[V]!==!1},set(fe){this[V]=!!fe}}}),xe._fromList=de;function de(fe,Te){if(Te.length===0)return null;let qe;return Te.objectMode?qe=Te.buffer.shift():!fe||fe>=Te.length?(Te.decoder?qe=Te.buffer.join(""):Te.buffer.length===1?qe=Te.buffer.first():qe=Te.buffer.concat(Te.length),Te.buffer.clear()):qe=Te.buffer.consume(fe,Te.decoder),qe}function ge(fe){const Te=fe._readableState;w("endReadable",Te.endEmitted),Te.endEmitted||(Te.ended=!0,a.nextTick(Ue,Te,fe))}function Ue(fe,Te){if(w("endReadableNT",fe.endEmitted,fe.length),!fe.errored&&!fe.closeEmitted&&!fe.endEmitted&&fe.length===0){if(fe.endEmitted=!0,Te.emit("end"),Te.writable&&Te.allowHalfOpen===!1)a.nextTick(je,Te);else if(fe.autoDestroy){const qe=Te._writableState;(!qe||qe.autoDestroy&&(qe.finished||qe.writable===!1))&&Te.destroy()}}}function je(fe){fe.writable&&!fe.writableEnded&&!fe.destroyed&&fe.end()}xe.from=function(fe,Te){return Z(xe,fe,Te)};let ze;function at(){return ze===void 0&&(ze={}),ze}return xe.fromWeb=function(fe,Te){return at().newStreamReadableFromReadableStream(fe,Te)},xe.toWeb=function(fe,Te){return at().newReadableStreamFromStreamReadable(fe,Te)},xe.wrap=function(fe,Te){var qe,it;return new xe({objectMode:(qe=(it=fe.readableObjectMode)!==null&&it!==void 0?it:fe.objectMode)!==null&&qe!==void 0?qe:!0,...Te,destroy(Me,st){S.destroyer(fe,Me),st(Me)}}).wrap(fe)},OM}var xM,LZ;function lB(){if(LZ)return xM;LZ=1;const a=vl(),{ArrayPrototypeSlice:e,Error:u,FunctionPrototypeSymbolHasInstance:n,ObjectDefineProperty:r,ObjectDefineProperties:t,ObjectSetPrototypeOf:i,StringPrototypeToLowerCase:o,Symbol:l,SymbolHasInstance:s}=An();xM=H,H.WritableState=C;const{EventEmitter:c}=z4(),d=cB().Stream,{Buffer:f}=Xo(),p=S1(),{addAbortSignal:h}=fP(),{getHighWaterMark:g,getDefaultHighWaterMark:v}=pP(),{ERR_INVALID_ARG_TYPE:m,ERR_METHOD_NOT_IMPLEMENTED:T,ERR_MULTIPLE_CALLBACK:w,ERR_STREAM_CANNOT_PIPE:E,ERR_STREAM_DESTROYED:S,ERR_STREAM_ALREADY_FINISHED:N,ERR_STREAM_NULL_VALUES:j,ERR_STREAM_WRITE_AFTER_END:q,ERR_UNKNOWN_ENCODING:O}=ti().codes,{errorOrDestroy:I}=p;i(H.prototype,d.prototype),i(H,d);function A(){}const P=l("kOnFinished");function C(D,L,Q){typeof Q!="boolean"&&(Q=L instanceof ec()),this.objectMode=!!(D&&D.objectMode),Q&&(this.objectMode=this.objectMode||!!(D&&D.writableObjectMode)),this.highWaterMark=D?g(this,D,"writableHighWaterMark",Q):v(!1),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;const Y=!!(D&&D.decodeStrings===!1);this.decodeStrings=!Y,this.defaultEncoding=D&&D.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=W.bind(void 0,L),this.writecb=null,this.writelen=0,this.afterWriteTickInfo=null,B(this),this.pendingcb=0,this.constructed=!0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!D||D.emitClose!==!1,this.autoDestroy=!D||D.autoDestroy!==!1,this.errored=null,this.closed=!1,this.closeEmitted=!1,this[P]=[]}function B(D){D.buffered=[],D.bufferedIndex=0,D.allBuffers=!0,D.allNoop=!0}C.prototype.getBuffer=function(){return e(this.buffered,this.bufferedIndex)},r(C.prototype,"bufferedRequestCount",{__proto__:null,get(){return this.buffered.length-this.bufferedIndex}});function H(D){const L=this instanceof ec();if(!L&&!n(H,this))return new H(D);this._writableState=new C(D,this,L),D&&(typeof D.write=="function"&&(this._write=D.write),typeof D.writev=="function"&&(this._writev=D.writev),typeof D.destroy=="function"&&(this._destroy=D.destroy),typeof D.final=="function"&&(this._final=D.final),typeof D.construct=="function"&&(this._construct=D.construct),D.signal&&h(D.signal,this)),d.call(this,D),p.construct(this,()=>{const Q=this._writableState;Q.writing||le(this,Q),Ae(this,Q)})}r(H,s,{__proto__:null,value:function(D){return n(this,D)?!0:this!==H?!1:D&&D._writableState instanceof C}}),H.prototype.pipe=function(){I(this,new E)};function V(D,L,Q,Y){const $=D._writableState;if(typeof Q=="function")Y=Q,Q=$.defaultEncoding;else{if(!Q)Q=$.defaultEncoding;else if(Q!=="buffer"&&!f.isEncoding(Q))throw new O(Q);typeof Y!="function"&&(Y=A)}if(L===null)throw new j;if(!$.objectMode)if(typeof L=="string")$.decodeStrings!==!1&&(L=f.from(L,Q),Q="buffer");else if(L instanceof f)Q="buffer";else if(d._isUint8Array(L))L=d._uint8ArrayToBuffer(L),Q="buffer";else throw new m("chunk",["string","Buffer","Uint8Array"],L);let ue;return $.ending?ue=new q:$.destroyed&&(ue=new S("write")),ue?(a.nextTick(Y,ue),I(D,ue,!0),ue):($.pendingcb++,G(D,$,L,Q,Y))}H.prototype.write=function(D,L,Q){return V(this,D,L,Q)===!0},H.prototype.cork=function(){this._writableState.corked++},H.prototype.uncork=function(){const D=this._writableState;D.corked&&(D.corked--,D.writing||le(this,D))},H.prototype.setDefaultEncoding=function(L){if(typeof L=="string"&&(L=o(L)),!f.isEncoding(L))throw new O(L);return this._writableState.defaultEncoding=L,this};function G(D,L,Q,Y,$){const ue=L.objectMode?1:Q.length;L.length+=ue;const ne=L.length<L.highWaterMark;return ne||(L.needDrain=!0),L.writing||L.corked||L.errored||!L.constructed?(L.buffered.push({chunk:Q,encoding:Y,callback:$}),L.allBuffers&&Y!=="buffer"&&(L.allBuffers=!1),L.allNoop&&$!==A&&(L.allNoop=!1)):(L.writelen=ue,L.writecb=$,L.writing=!0,L.sync=!0,D._write(Q,Y,L.onwrite),L.sync=!1),ne&&!L.errored&&!L.destroyed}function Z(D,L,Q,Y,$,ue,ne){L.writelen=Y,L.writecb=ne,L.writing=!0,L.sync=!0,L.destroyed?L.onwrite(new S("write")):Q?D._writev($,L.onwrite):D._write($,ue,L.onwrite),L.sync=!1}function ae(D,L,Q,Y){--L.pendingcb,Y(Q),pe(L),I(D,Q)}function W(D,L){const Q=D._writableState,Y=Q.sync,$=Q.writecb;if(typeof $!="function"){I(D,new w);return}Q.writing=!1,Q.writecb=null,Q.length-=Q.writelen,Q.writelen=0,L?(L.stack,Q.errored||(Q.errored=L),D._readableState&&!D._readableState.errored&&(D._readableState.errored=L),Y?a.nextTick(ae,D,Q,L,$):ae(D,Q,L,$)):(Q.buffered.length>Q.bufferedIndex&&le(D,Q),Y?Q.afterWriteTickInfo!==null&&Q.afterWriteTickInfo.cb===$?Q.afterWriteTickInfo.count++:(Q.afterWriteTickInfo={count:1,cb:$,stream:D,state:Q},a.nextTick(te,Q.afterWriteTickInfo)):se(D,Q,1,$))}function te({stream:D,state:L,count:Q,cb:Y}){return L.afterWriteTickInfo=null,se(D,L,Q,Y)}function se(D,L,Q,Y){for(!L.ending&&!D.destroyed&&L.length===0&&L.needDrain&&(L.needDrain=!1,D.emit("drain"));Q-- >0;)L.pendingcb--,Y();L.destroyed&&pe(L),Ae(D,L)}function pe(D){if(D.writing)return;for(let $=D.bufferedIndex;$<D.buffered.length;++$){var L;const{chunk:ue,callback:ne}=D.buffered[$],ce=D.objectMode?1:ue.length;D.length-=ce,ne((L=D.errored)!==null&&L!==void 0?L:new S("write"))}const Q=D[P].splice(0);for(let $=0;$<Q.length;$++){var Y;Q[$]((Y=D.errored)!==null&&Y!==void 0?Y:new S("end"))}B(D)}function le(D,L){if(L.corked||L.bufferProcessing||L.destroyed||!L.constructed)return;const{buffered:Q,bufferedIndex:Y,objectMode:$}=L,ue=Q.length-Y;if(!ue)return;let ne=Y;if(L.bufferProcessing=!0,ue>1&&D._writev){L.pendingcb-=ue-1;const ce=L.allNoop?A:xe=>{for(let Ce=ne;Ce<Q.length;++Ce)Q[Ce].callback(xe)},Se=L.allNoop&&ne===0?Q:e(Q,ne);Se.allBuffers=L.allBuffers,Z(D,L,!0,L.length,Se,"",ce),B(L)}else{do{const{chunk:ce,encoding:Se,callback:xe}=Q[ne];Q[ne++]=null;const Ce=$?1:ce.length;Z(D,L,!1,Ce,ce,Se,xe)}while(ne<Q.length&&!L.writing);ne===Q.length?B(L):ne>256?(Q.splice(0,ne),L.bufferedIndex=0):L.bufferedIndex=ne}L.bufferProcessing=!1}H.prototype._write=function(D,L,Q){if(this._writev)this._writev([{chunk:D,encoding:L}],Q);else throw new T("_write()")},H.prototype._writev=null,H.prototype.end=function(D,L,Q){const Y=this._writableState;typeof D=="function"?(Q=D,D=null,L=null):typeof L=="function"&&(Q=L,L=null);let $;if(D!=null){const ue=V(this,D,L);ue instanceof u&&($=ue)}return Y.corked&&(Y.corked=1,this.uncork()),$||(!Y.errored&&!Y.ending?(Y.ending=!0,Ae(this,Y,!0),Y.ended=!0):Y.finished?$=new N("end"):Y.destroyed&&($=new S("end"))),typeof Q=="function"&&($||Y.finished?a.nextTick(Q,$):Y[P].push(Q)),this};function Ee(D){return D.ending&&!D.destroyed&&D.constructed&&D.length===0&&!D.errored&&D.buffered.length===0&&!D.finished&&!D.writing&&!D.errorEmitted&&!D.closeEmitted}function Oe(D,L){let Q=!1;function Y($){if(Q){I(D,$??w());return}if(Q=!0,L.pendingcb--,$){const ue=L[P].splice(0);for(let ne=0;ne<ue.length;ne++)ue[ne]($);I(D,$,L.sync)}else Ee(L)&&(L.prefinished=!0,D.emit("prefinish"),L.pendingcb++,a.nextTick(be,D,L))}L.sync=!0,L.pendingcb++;try{D._final(Y)}catch($){Y($)}L.sync=!1}function Ie(D,L){!L.prefinished&&!L.finalCalled&&(typeof D._final=="function"&&!L.destroyed?(L.finalCalled=!0,Oe(D,L)):(L.prefinished=!0,D.emit("prefinish")))}function Ae(D,L,Q){Ee(L)&&(Ie(D,L),L.pendingcb===0&&(Q?(L.pendingcb++,a.nextTick((Y,$)=>{Ee($)?be(Y,$):$.pendingcb--},D,L)):Ee(L)&&(L.pendingcb++,be(D,L))))}function be(D,L){L.pendingcb--,L.finished=!0;const Q=L[P].splice(0);for(let Y=0;Y<Q.length;Y++)Q[Y]();if(D.emit("finish"),L.autoDestroy){const Y=D._readableState;(!Y||Y.autoDestroy&&(Y.endEmitted||Y.readable===!1))&&D.destroy()}}t(H.prototype,{closed:{__proto__:null,get(){return this._writableState?this._writableState.closed:!1}},destroyed:{__proto__:null,get(){return this._writableState?this._writableState.destroyed:!1},set(D){this._writableState&&(this._writableState.destroyed=D)}},writable:{__proto__:null,get(){const D=this._writableState;return!!D&&D.writable!==!1&&!D.destroyed&&!D.errored&&!D.ending&&!D.ended},set(D){this._writableState&&(this._writableState.writable=!!D)}},writableFinished:{__proto__:null,get(){return this._writableState?this._writableState.finished:!1}},writableObjectMode:{__proto__:null,get(){return this._writableState?this._writableState.objectMode:!1}},writableBuffer:{__proto__:null,get(){return this._writableState&&this._writableState.getBuffer()}},writableEnded:{__proto__:null,get(){return this._writableState?this._writableState.ending:!1}},writableNeedDrain:{__proto__:null,get(){const D=this._writableState;return D?!D.destroyed&&!D.ending&&D.needDrain:!1}},writableHighWaterMark:{__proto__:null,get(){return this._writableState&&this._writableState.highWaterMark}},writableCorked:{__proto__:null,get(){return this._writableState?this._writableState.corked:0}},writableLength:{__proto__:null,get(){return this._writableState&&this._writableState.length}},errored:{__proto__:null,enumerable:!1,get(){return this._writableState?this._writableState.errored:null}},writableAborted:{__proto__:null,enumerable:!1,get:function(){return!!(this._writableState.writable!==!1&&(this._writableState.destroyed||this._writableState.errored)&&!this._writableState.finished)}}});const ee=p.destroy;H.prototype.destroy=function(D,L){const Q=this._writableState;return!Q.destroyed&&(Q.bufferedIndex<Q.buffered.length||Q[P].length)&&a.nextTick(pe,Q),ee.call(this,D,L),this},H.prototype._undestroy=p.undestroy,H.prototype._destroy=function(D,L){L(D)},H.prototype[c.captureRejectionSymbol]=function(D){this.destroy(D)};let _;function F(){return _===void 0&&(_={}),_}return H.fromWeb=function(D,L){return F().newStreamWritableFromWritableStream(D,L)},H.toWeb=function(D){return F().newWritableStreamFromStreamWritable(D)},xM}var RM,qZ;function EIe(){if(qZ)return RM;qZ=1;const a=vl(),e=Xo(),{isReadable:u,isWritable:n,isIterable:r,isNodeStream:t,isReadableNodeStream:i,isWritableNodeStream:o,isDuplexNodeStream:l,isReadableStream:s,isWritableStream:c}=uc(),d=_l(),{AbortError:f,codes:{ERR_INVALID_ARG_TYPE:p,ERR_INVALID_RETURN_VALUE:h}}=ti(),{destroyer:g}=S1(),v=ec(),m=hP(),T=lB(),{createDeferredPromise:w}=mi(),E=F2e(),S=globalThis.Blob||e.Blob,N=typeof S<"u"?function(C){return C instanceof S}:function(C){return!1},j=globalThis.AbortController||y4().AbortController,{FunctionPrototypeCall:q}=An();class O extends v{constructor(C){super(C),C?.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),C?.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)}}RM=function P(C,B){if(l(C))return C;if(i(C))return A({readable:C});if(o(C))return A({writable:C});if(t(C))return A({writable:!1,readable:!1});if(s(C))return A({readable:m.fromWeb(C)});if(c(C))return A({writable:T.fromWeb(C)});if(typeof C=="function"){const{value:V,write:G,final:Z,destroy:ae}=I(C);if(r(V))return E(O,V,{objectMode:!0,write:G,final:Z,destroy:ae});const W=V?.then;if(typeof W=="function"){let te;const se=q(W,V,pe=>{if(pe!=null)throw new h("nully","body",pe)},pe=>{g(te,pe)});return te=new O({objectMode:!0,readable:!1,write:G,final(pe){Z(async()=>{try{await se,a.nextTick(pe,null)}catch(le){a.nextTick(pe,le)}})},destroy:ae})}throw new h("Iterable, AsyncIterable or AsyncFunction",B,V)}if(N(C))return P(C.arrayBuffer());if(r(C))return E(O,C,{objectMode:!0,writable:!1});if(s(C?.readable)&&c(C?.writable))return O.fromWeb(C);if(typeof C?.writable=="object"||typeof C?.readable=="object"){const V=C!=null&&C.readable?i(C?.readable)?C?.readable:P(C.readable):void 0,G=C!=null&&C.writable?o(C?.writable)?C?.writable:P(C.writable):void 0;return A({readable:V,writable:G})}const H=C?.then;if(typeof H=="function"){let V;return q(H,C,G=>{G!=null&&V.push(G),V.push(null)},G=>{g(V,G)}),V=new O({objectMode:!0,writable:!1,read(){}})}throw new p(B,["Blob","ReadableStream","WritableStream","Stream","Iterable","AsyncIterable","Function","{ readable, writable } pair","Promise"],C)};function I(P){let{promise:C,resolve:B}=w();const H=new j,V=H.signal;return{value:P((async function*(){for(;;){const Z=C;C=null;const{chunk:ae,done:W,cb:te}=await Z;if(a.nextTick(te),W)return;if(V.aborted)throw new f(void 0,{cause:V.reason});({promise:C,resolve:B}=w()),yield ae}})(),{signal:V}),write(Z,ae,W){const te=B;B=null,te({chunk:Z,done:!1,cb:W})},final(Z){const ae=B;B=null,ae({done:!0,cb:Z})},destroy(Z,ae){H.abort(),ae(Z)}}}function A(P){const C=P.readable&&typeof P.readable.read!="function"?m.wrap(P.readable):P.readable,B=P.writable;let H=!!u(C),V=!!n(B),G,Z,ae,W,te;function se(pe){const le=W;W=null,le?le(pe):pe&&te.destroy(pe)}return te=new O({readableObjectMode:!!(C!=null&&C.readableObjectMode),writableObjectMode:!!(B!=null&&B.writableObjectMode),readable:H,writable:V}),V&&(d(B,pe=>{V=!1,pe&&g(C,pe),se(pe)}),te._write=function(pe,le,Ee){B.write(pe,le)?Ee():G=Ee},te._final=function(pe){B.end(),Z=pe},B.on("drain",function(){if(G){const pe=G;G=null,pe()}}),B.on("finish",function(){if(Z){const pe=Z;Z=null,pe()}})),H&&(d(C,pe=>{H=!1,pe&&g(C,pe),se(pe)}),C.on("readable",function(){if(ae){const pe=ae;ae=null,pe()}}),C.on("end",function(){te.push(null)}),te._read=function(){for(;;){const pe=C.read();if(pe===null){ae=te._read;return}if(!te.push(pe))return}}),te._destroy=function(pe,le){!pe&&W!==null&&(pe=new f),ae=null,G=null,Z=null,W===null?le(pe):(W=le,g(B,pe),g(C,pe))},te}return RM}var NM,BZ;function ec(){if(BZ)return NM;BZ=1;const{ObjectDefineProperties:a,ObjectGetOwnPropertyDescriptor:e,ObjectKeys:u,ObjectSetPrototypeOf:n}=An();NM=i;const r=hP(),t=lB();n(i.prototype,r.prototype),n(i,r);{const c=u(t.prototype);for(let d=0;d<c.length;d++){const f=c[d];i.prototype[f]||(i.prototype[f]=t.prototype[f])}}function i(c){if(!(this instanceof i))return new i(c);r.call(this,c),t.call(this,c),c?(this.allowHalfOpen=c.allowHalfOpen!==!1,c.readable===!1&&(this._readableState.readable=!1,this._readableState.ended=!0,this._readableState.endEmitted=!0),c.writable===!1&&(this._writableState.writable=!1,this._writableState.ending=!0,this._writableState.ended=!0,this._writableState.finished=!0)):this.allowHalfOpen=!0}a(i.prototype,{writable:{__proto__:null,...e(t.prototype,"writable")},writableHighWaterMark:{__proto__:null,...e(t.prototype,"writableHighWaterMark")},writableObjectMode:{__proto__:null,...e(t.prototype,"writableObjectMode")},writableBuffer:{__proto__:null,...e(t.prototype,"writableBuffer")},writableLength:{__proto__:null,...e(t.prototype,"writableLength")},writableFinished:{__proto__:null,...e(t.prototype,"writableFinished")},writableCorked:{__proto__:null,...e(t.prototype,"writableCorked")},writableEnded:{__proto__:null,...e(t.prototype,"writableEnded")},writableNeedDrain:{__proto__:null,...e(t.prototype,"writableNeedDrain")},destroyed:{__proto__:null,get(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set(c){this._readableState&&this._writableState&&(this._readableState.destroyed=c,this._writableState.destroyed=c)}}});let o;function l(){return o===void 0&&(o={}),o}i.fromWeb=function(c,d){return l().newStreamDuplexFromReadableWritablePair(c,d)},i.toWeb=function(c){return l().newReadableWritablePairFromDuplex(c)};let s;return i.from=function(c){return s||(s=EIe()),s(c,"body")},NM}var IM,UZ;function P2e(){if(UZ)return IM;UZ=1;const{ObjectSetPrototypeOf:a,Symbol:e}=An();IM=i;const{ERR_METHOD_NOT_IMPLEMENTED:u}=ti().codes,n=ec(),{getHighWaterMark:r}=pP();a(i.prototype,n.prototype),a(i,n);const t=e("kCallback");function i(s){if(!(this instanceof i))return new i(s);const c=s?r(this,s,"readableHighWaterMark",!0):null;c===0&&(s={...s,highWaterMark:null,readableHighWaterMark:c,writableHighWaterMark:s.writableHighWaterMark||0}),n.call(this,s),this._readableState.sync=!1,this[t]=null,s&&(typeof s.transform=="function"&&(this._transform=s.transform),typeof s.flush=="function"&&(this._flush=s.flush)),this.on("prefinish",l)}function o(s){typeof this._flush=="function"&&!this.destroyed?this._flush((c,d)=>{if(c){s?s(c):this.destroy(c);return}d!=null&&this.push(d),this.push(null),s&&s()}):(this.push(null),s&&s())}function l(){this._final!==o&&o.call(this)}return i.prototype._final=o,i.prototype._transform=function(s,c,d){throw new u("_transform()")},i.prototype._write=function(s,c,d){const f=this._readableState,p=this._writableState,h=f.length;this._transform(s,c,(g,v)=>{if(g){d(g);return}v!=null&&this.push(v),p.ended||h===f.length||f.length<f.highWaterMark?d():this[t]=d})},i.prototype._read=function(){if(this[t]){const s=this[t];this[t]=null,s()}},IM}var DM,QZ;function j2e(){if(QZ)return DM;QZ=1;const{ObjectSetPrototypeOf:a}=An();DM=u;const e=P2e();a(u.prototype,e.prototype),a(u,e);function u(n){if(!(this instanceof u))return new u(n);e.call(this,n)}return u.prototype._transform=function(n,r,t){t(null,n)},DM}var FM,VZ;function dB(){if(VZ)return FM;VZ=1;const a=vl(),{ArrayIsArray:e,Promise:u,SymbolAsyncIterator:n,SymbolDispose:r}=An(),t=_l(),{once:i}=mi(),o=S1(),l=ec(),{aggregateTwoErrors:s,codes:{ERR_INVALID_ARG_TYPE:c,ERR_INVALID_RETURN_VALUE:d,ERR_MISSING_ARGS:f,ERR_STREAM_DESTROYED:p,ERR_STREAM_PREMATURE_CLOSE:h},AbortError:g}=ti(),{validateFunction:v,validateAbortSignal:m}=K4(),{isIterable:T,isReadable:w,isReadableNodeStream:E,isNodeStream:S,isTransformStream:N,isWebStream:j,isReadableStream:q,isReadableFinished:O}=uc(),I=globalThis.AbortController||y4().AbortController;let A,P,C;function B(pe,le,Ee){let Oe=!1;pe.on("close",()=>{Oe=!0});const Ie=t(pe,{readable:le,writable:Ee},Ae=>{Oe=!Ae});return{destroy:Ae=>{Oe||(Oe=!0,o.destroyer(pe,Ae||new p("pipe")))},cleanup:Ie}}function H(pe){return v(pe[pe.length-1],"streams[stream.length - 1]"),pe.pop()}function V(pe){if(T(pe))return pe;if(E(pe))return G(pe);throw new c("val",["Readable","Iterable","AsyncIterable"],pe)}async function*G(pe){P||(P=hP()),yield*P.prototype[n].call(pe)}async function Z(pe,le,Ee,{end:Oe}){let Ie,Ae=null;const be=F=>{if(F&&(Ie=F),Ae){const D=Ae;Ae=null,D()}},ee=()=>new u((F,D)=>{Ie?D(Ie):Ae=()=>{Ie?D(Ie):F()}});le.on("drain",be);const _=t(le,{readable:!1},be);try{le.writableNeedDrain&&await ee();for await(const F of pe)le.write(F)||await ee();Oe&&(le.end(),await ee()),Ee()}catch(F){Ee(Ie!==F?s(Ie,F):F)}finally{_(),le.off("drain",be)}}async function ae(pe,le,Ee,{end:Oe}){N(le)&&(le=le.writable);const Ie=le.getWriter();try{for await(const Ae of pe)await Ie.ready,Ie.write(Ae).catch(()=>{});await Ie.ready,Oe&&await Ie.close(),Ee()}catch(Ae){try{await Ie.abort(Ae),Ee(Ae)}catch(be){Ee(be)}}}function W(...pe){return te(pe,i(H(pe)))}function te(pe,le,Ee){if(pe.length===1&&e(pe[0])&&(pe=pe[0]),pe.length<2)throw new f("streams");const Oe=new I,Ie=Oe.signal,Ae=Ee?.signal,be=[];m(Ae,"options.signal");function ee(){$(new g)}C=C||mi().addAbortListener;let _;Ae&&(_=C(Ae,ee));let F,D;const L=[];let Q=0;function Y(xe){$(xe,--Q===0)}function $(xe,Ce){var Ve;if(xe&&(!F||F.code==="ERR_STREAM_PREMATURE_CLOSE")&&(F=xe),!(!F&&!Ce)){for(;L.length;)L.shift()(F);(Ve=_)===null||Ve===void 0||Ve[r](),Oe.abort(),Ce&&(F||be.forEach(Ke=>Ke()),a.nextTick(le,F,D))}}let ue;for(let xe=0;xe<pe.length;xe++){const Ce=pe[xe],Ve=xe<pe.length-1,Ke=xe>0,Ye=Ve||Ee?.end!==!1,oe=xe===pe.length-1;if(S(Ce)){let X=function(J){J&&J.name!=="AbortError"&&J.code!=="ERR_STREAM_PREMATURE_CLOSE"&&Y(J)};var Se=X;if(Ye){const{destroy:J,cleanup:he}=B(Ce,Ve,Ke);L.push(J),w(Ce)&&oe&&be.push(he)}Ce.on("error",X),w(Ce)&&oe&&be.push(()=>{Ce.removeListener("error",X)})}if(xe===0)if(typeof Ce=="function"){if(ue=Ce({signal:Ie}),!T(ue))throw new d("Iterable, AsyncIterable or Stream","source",ue)}else T(Ce)||E(Ce)||N(Ce)?ue=Ce:ue=l.from(Ce);else if(typeof Ce=="function"){if(N(ue)){var ne;ue=V((ne=ue)===null||ne===void 0?void 0:ne.readable)}else ue=V(ue);if(ue=Ce(ue,{signal:Ie}),Ve){if(!T(ue,!0))throw new d("AsyncIterable",`transform[${xe-1}]`,ue)}else{var ce;A||(A=j2e());const X=new A({objectMode:!0}),J=(ce=ue)===null||ce===void 0?void 0:ce.then;if(typeof J=="function")Q++,J.call(ue,ye=>{D=ye,ye!=null&&X.write(ye),Ye&&X.end(),a.nextTick(Y)},ye=>{X.destroy(ye),a.nextTick(Y,ye)});else if(T(ue,!0))Q++,Z(ue,X,Y,{end:Ye});else if(q(ue)||N(ue)){const ye=ue.readable||ue;Q++,Z(ye,X,Y,{end:Ye})}else throw new d("AsyncIterable or Promise","destination",ue);ue=X;const{destroy:he,cleanup:ve}=B(ue,!1,!0);L.push(he),oe&&be.push(ve)}}else if(S(Ce)){if(E(ue)){Q+=2;const X=se(ue,Ce,Y,{end:Ye});w(Ce)&&oe&&be.push(X)}else if(N(ue)||q(ue)){const X=ue.readable||ue;Q++,Z(X,Ce,Y,{end:Ye})}else if(T(ue))Q++,Z(ue,Ce,Y,{end:Ye});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ue);ue=Ce}else if(j(Ce)){if(E(ue))Q++,ae(V(ue),Ce,Y,{end:Ye});else if(q(ue)||T(ue))Q++,ae(ue,Ce,Y,{end:Ye});else if(N(ue))Q++,ae(ue.readable,Ce,Y,{end:Ye});else throw new c("val",["Readable","Iterable","AsyncIterable","ReadableStream","TransformStream"],ue);ue=Ce}else ue=l.from(Ce)}return(Ie!=null&&Ie.aborted||Ae!=null&&Ae.aborted)&&a.nextTick(ee),ue}function se(pe,le,Ee,{end:Oe}){let Ie=!1;if(le.on("close",()=>{Ie||Ee(new h)}),pe.pipe(le,{end:!1}),Oe){let be=function(){Ie=!0,le.end()};var Ae=be;O(pe)?a.nextTick(be):pe.once("end",be)}else Ee();return t(pe,{readable:!0,writable:!1},be=>{const ee=pe._readableState;be&&be.code==="ERR_STREAM_PREMATURE_CLOSE"&&ee&&ee.ended&&!ee.errored&&!ee.errorEmitted?pe.once("end",Ee).once("error",Ee):Ee(be)}),t(le,{readable:!1,writable:!0},Ee)}return FM={pipelineImpl:te,pipeline:W},FM}var PM,HZ;function M2e(){if(HZ)return PM;HZ=1;const{pipeline:a}=dB(),e=ec(),{destroyer:u}=S1(),{isNodeStream:n,isReadable:r,isWritable:t,isWebStream:i,isTransformStream:o,isWritableStream:l,isReadableStream:s}=uc(),{AbortError:c,codes:{ERR_INVALID_ARG_VALUE:d,ERR_MISSING_ARGS:f}}=ti(),p=_l();return PM=function(...g){if(g.length===0)throw new f("streams");if(g.length===1)return e.from(g[0]);const v=[...g];if(typeof g[0]=="function"&&(g[0]=e.from(g[0])),typeof g[g.length-1]=="function"){const A=g.length-1;g[A]=e.from(g[A])}for(let A=0;A<g.length;++A)if(!(!n(g[A])&&!i(g[A]))){if(A<g.length-1&&!(r(g[A])||s(g[A])||o(g[A])))throw new d(`streams[${A}]`,v[A],"must be readable");if(A>0&&!(t(g[A])||l(g[A])||o(g[A])))throw new d(`streams[${A}]`,v[A],"must be writable")}let m,T,w,E,S;function N(A){const P=E;E=null,P?P(A):A?S.destroy(A):!I&&!O&&S.destroy()}const j=g[0],q=a(g,N),O=!!(t(j)||l(j)||o(j)),I=!!(r(q)||s(q)||o(q));if(S=new e({writableObjectMode:!!(j!=null&&j.writableObjectMode),readableObjectMode:!!(q!=null&&q.readableObjectMode),writable:O,readable:I}),O){if(n(j))S._write=function(P,C,B){j.write(P,C)?B():m=B},S._final=function(P){j.end(),T=P},j.on("drain",function(){if(m){const P=m;m=null,P()}});else if(i(j)){const C=(o(j)?j.writable:j).getWriter();S._write=async function(B,H,V){try{await C.ready,C.write(B).catch(()=>{}),V()}catch(G){V(G)}},S._final=async function(B){try{await C.ready,C.close().catch(()=>{}),T=B}catch(H){B(H)}}}const A=o(q)?q.readable:q;p(A,()=>{if(T){const P=T;T=null,P()}})}if(I){if(n(q))q.on("readable",function(){if(w){const A=w;w=null,A()}}),q.on("end",function(){S.push(null)}),S._read=function(){for(;;){const A=q.read();if(A===null){w=S._read;return}if(!S.push(A))return}};else if(i(q)){const P=(o(q)?q.readable:q).getReader();S._read=async function(){for(;;)try{const{value:C,done:B}=await P.read();if(!S.push(C))return;if(B){S.push(null);return}}catch{return}}}}return S._destroy=function(A,P){!A&&E!==null&&(A=new c),w=null,m=null,T=null,E===null?P(A):(E=P,n(q)&&u(q,A))},S},PM}var kZ;function AIe(){if(kZ)return $I;kZ=1;const a=globalThis.AbortController||y4().AbortController,{codes:{ERR_INVALID_ARG_VALUE:e,ERR_INVALID_ARG_TYPE:u,ERR_MISSING_ARGS:n,ERR_OUT_OF_RANGE:r},AbortError:t}=ti(),{validateAbortSignal:i,validateInteger:o,validateObject:l}=K4(),s=An().Symbol("kWeak"),c=An().Symbol("kResistStopPropagation"),{finished:d}=_l(),f=M2e(),{addAbortSignalNoValidate:p}=fP(),{isWritable:h,isNodeStream:g}=uc(),{deprecate:v}=mi(),{ArrayPrototypePush:m,Boolean:T,MathFloor:w,Number:E,NumberIsNaN:S,Promise:N,PromiseReject:j,PromiseResolve:q,PromisePrototypeThen:O,Symbol:I}=An(),A=I("kEmpty"),P=I("kEof");function C(Ae,be){if(be!=null&&l(be,"options"),be?.signal!=null&&i(be.signal,"options.signal"),g(Ae)&&!h(Ae))throw new e("stream",Ae,"must be writable");const ee=f(this,Ae);return be!=null&&be.signal&&p(be.signal,ee),ee}function B(Ae,be){if(typeof Ae!="function")throw new u("fn",["Function","AsyncFunction"],Ae);be!=null&&l(be,"options"),be?.signal!=null&&i(be.signal,"options.signal");let ee=1;be?.concurrency!=null&&(ee=w(be.concurrency));let _=ee-1;return be?.highWaterMark!=null&&(_=w(be.highWaterMark)),o(ee,"options.concurrency",1),o(_,"options.highWaterMark",0),_+=ee,(async function*(){const D=mi().AbortSignalAny([be?.signal].filter(T)),L=this,Q=[],Y={signal:D};let $,ue,ne=!1,ce=0;function Se(){ne=!0,xe()}function xe(){ce-=1,Ce()}function Ce(){ue&&!ne&&ce<ee&&Q.length<_&&(ue(),ue=null)}async function Ve(){try{for await(let Ke of L){if(ne)return;if(D.aborted)throw new t;try{if(Ke=Ae(Ke,Y),Ke===A)continue;Ke=q(Ke)}catch(Ye){Ke=j(Ye)}ce+=1,O(Ke,xe,Se),Q.push(Ke),$&&($(),$=null),!ne&&(Q.length>=_||ce>=ee)&&await new N(Ye=>{ue=Ye})}Q.push(P)}catch(Ke){const Ye=j(Ke);O(Ye,xe,Se),Q.push(Ye)}finally{ne=!0,$&&($(),$=null)}}Ve();try{for(;;){for(;Q.length>0;){const Ke=await Q[0];if(Ke===P)return;if(D.aborted)throw new t;Ke!==A&&(yield Ke),Q.shift(),Ce()}await new N(Ke=>{$=Ke})}}finally{ne=!0,ue&&(ue(),ue=null)}}).call(this)}function H(Ae=void 0){return Ae!=null&&l(Ae,"options"),Ae?.signal!=null&&i(Ae.signal,"options.signal"),(async function*(){let ee=0;for await(const F of this){var _;if(Ae!=null&&(_=Ae.signal)!==null&&_!==void 0&&_.aborted)throw new t({cause:Ae.signal.reason});yield[ee++,F]}}).call(this)}async function V(Ae,be=void 0){for await(const ee of W.call(this,Ae,be))return!0;return!1}async function G(Ae,be=void 0){if(typeof Ae!="function")throw new u("fn",["Function","AsyncFunction"],Ae);return!await V.call(this,async(...ee)=>!await Ae(...ee),be)}async function Z(Ae,be){for await(const ee of W.call(this,Ae,be))return ee}async function ae(Ae,be){if(typeof Ae!="function")throw new u("fn",["Function","AsyncFunction"],Ae);async function ee(_,F){return await Ae(_,F),A}for await(const _ of B.call(this,ee,be));}function W(Ae,be){if(typeof Ae!="function")throw new u("fn",["Function","AsyncFunction"],Ae);async function ee(_,F){return await Ae(_,F)?_:A}return B.call(this,ee,be)}class te extends n{constructor(){super("reduce"),this.message="Reduce of an empty stream requires an initial value"}}async function se(Ae,be,ee){var _;if(typeof Ae!="function")throw new u("reducer",["Function","AsyncFunction"],Ae);ee!=null&&l(ee,"options"),ee?.signal!=null&&i(ee.signal,"options.signal");let F=arguments.length>1;if(ee!=null&&(_=ee.signal)!==null&&_!==void 0&&_.aborted){const $=new t(void 0,{cause:ee.signal.reason});throw this.once("error",()=>{}),await d(this.destroy($)),$}const D=new a,L=D.signal;if(ee!=null&&ee.signal){const $={once:!0,[s]:this,[c]:!0};ee.signal.addEventListener("abort",()=>D.abort(),$)}let Q=!1;try{for await(const $ of this){var Y;if(Q=!0,ee!=null&&(Y=ee.signal)!==null&&Y!==void 0&&Y.aborted)throw new t;F?be=await Ae(be,$,{signal:L}):(be=$,F=!0)}if(!Q&&!F)throw new te}finally{D.abort()}return be}async function pe(Ae){Ae!=null&&l(Ae,"options"),Ae?.signal!=null&&i(Ae.signal,"options.signal");const be=[];for await(const _ of this){var ee;if(Ae!=null&&(ee=Ae.signal)!==null&&ee!==void 0&&ee.aborted)throw new t(void 0,{cause:Ae.signal.reason});m(be,_)}return be}function le(Ae,be){const ee=B.call(this,Ae,be);return(async function*(){for await(const F of ee)yield*F}).call(this)}function Ee(Ae){if(Ae=E(Ae),S(Ae))return 0;if(Ae<0)throw new r("number",">= 0",Ae);return Ae}function Oe(Ae,be=void 0){return be!=null&&l(be,"options"),be?.signal!=null&&i(be.signal,"options.signal"),Ae=Ee(Ae),(async function*(){var _;if(be!=null&&(_=be.signal)!==null&&_!==void 0&&_.aborted)throw new t;for await(const D of this){var F;if(be!=null&&(F=be.signal)!==null&&F!==void 0&&F.aborted)throw new t;Ae--<=0&&(yield D)}}).call(this)}function Ie(Ae,be=void 0){return be!=null&&l(be,"options"),be?.signal!=null&&i(be.signal,"options.signal"),Ae=Ee(Ae),(async function*(){var _;if(be!=null&&(_=be.signal)!==null&&_!==void 0&&_.aborted)throw new t;for await(const D of this){var F;if(be!=null&&(F=be.signal)!==null&&F!==void 0&&F.aborted)throw new t;if(Ae-- >0&&(yield D),Ae<=0)return}}).call(this)}return $I.streamReturningOperators={asIndexedPairs:v(H,"readable.asIndexedPairs will be removed in a future version."),drop:Oe,filter:W,flatMap:le,map:B,take:Ie,compose:C},$I.promiseReturningOperators={every:G,forEach:ae,reduce:se,toArray:pe,some:V,find:Z},$I}var jM,zZ;function C2e(){if(zZ)return jM;zZ=1;const{ArrayPrototypePop:a,Promise:e}=An(),{isIterable:u,isNodeStream:n,isWebStream:r}=uc(),{pipelineImpl:t}=dB(),{finished:i}=_l();L2e();function o(...l){return new e((s,c)=>{let d,f;const p=l[l.length-1];if(p&&typeof p=="object"&&!n(p)&&!u(p)&&!r(p)){const h=a(l);d=h.signal,f=h.end}t(l,(h,g)=>{h?c(h):s(g)},{signal:d,end:f})})}return jM={finished:i,pipeline:o},jM}var GZ;function L2e(){if(GZ)return dM.exports;GZ=1;const{Buffer:a}=Xo(),{ObjectDefineProperty:e,ObjectKeys:u,ReflectApply:n}=An(),{promisify:{custom:r}}=mi(),{streamReturningOperators:t,promiseReturningOperators:i}=AIe(),{codes:{ERR_ILLEGAL_CONSTRUCTOR:o}}=ti(),l=M2e(),{setDefaultHighWaterMark:s,getDefaultHighWaterMark:c}=pP(),{pipeline:d}=dB(),{destroyer:f}=S1(),p=_l(),h=C2e(),g=uc(),v=dM.exports=cB().Stream;v.isDestroyed=g.isDestroyed,v.isDisturbed=g.isDisturbed,v.isErrored=g.isErrored,v.isReadable=g.isReadable,v.isWritable=g.isWritable,v.Readable=hP();for(const w of u(t)){let S=function(...N){if(new.target)throw o();return v.Readable.from(n(E,this,N))};var T=S;const E=t[w];e(S,"name",{__proto__:null,value:E.name}),e(S,"length",{__proto__:null,value:E.length}),e(v.Readable.prototype,w,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}for(const w of u(i)){let S=function(...j){if(new.target)throw o();return n(E,this,j)};var T=S;const E=i[w];e(S,"name",{__proto__:null,value:E.name}),e(S,"length",{__proto__:null,value:E.length}),e(v.Readable.prototype,w,{__proto__:null,value:S,enumerable:!1,configurable:!0,writable:!0})}v.Writable=lB(),v.Duplex=ec(),v.Transform=P2e(),v.PassThrough=j2e(),v.pipeline=d;const{addAbortSignal:m}=fP();return v.addAbortSignal=m,v.finished=p,v.destroy=f,v.compose=l,v.setDefaultHighWaterMark=s,v.getDefaultHighWaterMark=c,e(v,"promises",{__proto__:null,configurable:!0,enumerable:!0,get(){return h}}),e(d,r,{__proto__:null,enumerable:!0,get(){return h.pipeline}}),e(p,r,{__proto__:null,enumerable:!0,get(){return h.finished}}),v.Stream=v,v._isUint8Array=function(E){return E instanceof Uint8Array},v._uint8ArrayToBuffer=function(E){return a.from(E.buffer,E.byteOffset,E.byteLength)},dM.exports}var $Z;function Nr(){return $Z||($Z=1,(function(a){const e=L2e(),u=C2e(),n=e.Readable.destroy;a.exports=e.Readable,a.exports._uint8ArrayToBuffer=e._uint8ArrayToBuffer,a.exports._isUint8Array=e._isUint8Array,a.exports.isDisturbed=e.isDisturbed,a.exports.isErrored=e.isErrored,a.exports.isReadable=e.isReadable,a.exports.Readable=e.Readable,a.exports.Writable=e.Writable,a.exports.Duplex=e.Duplex,a.exports.Transform=e.Transform,a.exports.PassThrough=e.PassThrough,a.exports.addAbortSignal=e.addAbortSignal,a.exports.finished=e.finished,a.exports.destroy=e.destroy,a.exports.destroy=n,a.exports.pipeline=e.pipeline,a.exports.compose=e.compose,Object.defineProperty(e,"promises",{configurable:!0,enumerable:!0,get(){return u}}),a.exports.Stream=e.Stream,a.exports.default=a.exports})(lM)),lM.exports}var XZ;function OIe(){if(XZ)return U2;XZ=1,Object.defineProperty(U2,"__esModule",{value:!0}),U2.ActorQueryResultSerializeJson=void 0;const a=$o(),e=De(),u=zt(),n=$t(),r=Nr();let t=class extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}async testHandleChecked(o,l){return["bindings","quads","boolean"].includes(o.type)?(0,e.passTestVoid)():(0,e.failTest)("This actor can only handle bindings or quad streams.")}async runHandle(o,l,s){const c=new r.Readable;if(c._read=()=>{},o.type==="bindings"||o.type==="quads"){let d=o.type==="bindings"?(0,u.wrap)(o.bindingsStream).map(p=>JSON.stringify(Object.fromEntries([...p].map(([h,g])=>[h.value,n.termToString(g)])))):(0,u.wrap)(o.quadStream).map(p=>JSON.stringify(n.quadToStringQuad(p))),f=!0;d=d.map(p=>{const h=`${f?"":","}
${p}`;return f=!1,h}).prepend(["["]).append([`
]
`]),c.wrap(d)}else try{c.push(`${JSON.stringify(await o.execute())}
`),c.push(null)}catch(d){setTimeout(()=>c.emit("error",d))}return{data:c}}};return U2.ActorQueryResultSerializeJson=t,U2}var KZ;function fB(){return KZ||(KZ=1,(function(a){var e=pf&&pf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=pf&&pf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(OIe(),a)})(pf)),pf}var mf={},$2={},JZ;function xIe(){if(JZ)return $2;JZ=1,Object.defineProperty($2,"__esModule",{value:!0}),$2.ActorQueryResultSerializeSimple=void 0;const a=$o(),e=De(),u=zt(),n=$t(),r=Nr();let t=class Dg extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}async testHandleChecked(o,l){return["bindings","quads","boolean","void"].includes(o.type)?(0,e.passTestVoid)():(0,e.failTest)("This actor can only handle bindings streams, quad streams, booleans, or updates.")}static termToString(o){return o.termType==="Quad"?(0,n.termToString)(o):o.value}async runHandle(o,l,s){const c=new r.Readable;return o.type==="bindings"?c.wrap(o.bindingsStream.map(d=>`${[...d].map(([f,p])=>`?${f.value}: ${Dg.termToString(p)}`).join(`
`)}

`)):o.type==="quads"?c.wrap(o.quadStream.map(d=>`subject: ${Dg.termToString(d.subject)}
predicate: ${Dg.termToString(d.predicate)}
object: ${Dg.termToString(d.object)}
graph: ${Dg.termToString(d.graph)}

`)):c.wrap((0,u.wrap)(o.type==="boolean"?o.execute().then(d=>[`${d}
`]):o.execute().then(()=>[`ok
`]))),{data:c}}};return $2.ActorQueryResultSerializeSimple=t,$2}var WZ;function pB(){return WZ||(WZ=1,(function(a){var e=mf&&mf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=mf&&mf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(xIe(),a)})(mf)),mf}var bf={},X2={},YZ;function RIe(){if(YZ)return X2;YZ=1,Object.defineProperty(X2,"__esModule",{value:!0}),X2.ActorQueryResultSerializeSparqlCsv=void 0;const a=$o(),e=De(),u=Nr();let n=class Q6 extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(t){super(t)}static bindingToCsvBindings(t){if(!t)return"";let i=t.value;if(t.termType==="Literal")i=`${i}`;else if(t.termType==="BlankNode")i=`_:${i}`;else if(t.termType==="Quad"){let o=Q6.bindingToCsvBindings(t.object);t.object.termType==="Literal"&&(o=`"${o.replaceAll('"','""')}"`),i=`<< ${Q6.bindingToCsvBindings(t.subject)} ${Q6.bindingToCsvBindings(t.predicate)} ${o} >>`}else i=`<${i}>`;return/[",\n\r]/u.test(i)&&(i=`"${i.replaceAll('"','""')}"`),i}async testHandleChecked(t,i){return t.type!=="bindings"?(0,e.failTest)("This actor can only handle bindings streams."):(0,e.passTestVoid)()}async runHandle(t,i,o){const l=t,s=new u.Readable,c=await l.metadata();return s.push(`${c.variables.map(d=>d.variable.value).join(",")}\r
`),s.wrap(l.bindingsStream.map(d=>`${c.variables.map(f=>Q6.bindingToCsvBindings(d.get(f.variable))).join(",")}\r
`)),{data:s}}};return X2.ActorQueryResultSerializeSparqlCsv=n,X2}var ZZ;function hB(){return ZZ||(ZZ=1,(function(a){var e=bf&&bf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=bf&&bf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(RIe(),a)})(bf)),bf}var gf={},K2={},MM={},Ta={},eee;function NIe(){if(eee)return Ta;eee=1,Object.defineProperty(Ta,"__esModule",{value:!0}),Ta.stringQuadToQuad=Ta.quadToStringQuad=Ta.stringToTerm=Ta.getLiteralLanguage=Ta.getLiteralType=Ta.getLiteralValue=Ta.termToString=void 0;const a=Rr(),e=new a.DataFactory;function u(h){if(h)switch(h.termType){case"NamedNode":return`<${s(h.value)}>`;case"BlankNode":return`_:${h.value}`;case"Literal":{const g=h;return`"${c(g.value)}"${g.datatype&&g.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&g.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"?`^^<${g.datatype.value}>`:""}${g.language?`@${g.language}`:""}`}case"Quad":return`<<${u(h.subject)} ${u(h.predicate)} ${u(h.object)}${h.graph.termType==="DefaultGraph"?"":` ${u(h.graph)}`}>>`;case"Variable":return`?${h.value}`;case"DefaultGraph":return h.value}}Ta.termToString=u;function n(h){const g=/^"([^]*)"((\^\^.*)|(@.*))?$/u.exec(h);if(!g)throw new Error(`${h} is not a literal`);return g[1].replace(/\\"/ug,'"')}Ta.getLiteralValue=n;function r(h){const g=/^"[^]*"(?:\^\^<([^"]+)>|(@)[^@"]+)?$/u.exec(h);if(!g)throw new Error(`${h} is not a literal`);return g[1]||(g[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}Ta.getLiteralType=r;function t(h){const g=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/u.exec(h);if(!g)throw new Error(`${h} is not a literal`);return g[1]?g[1].toLowerCase():""}Ta.getLiteralLanguage=t;function i(h,g){if(g=g||e,!h||h.length===0)return g.defaultGraph();switch(h[0]){case"_":return g.blankNode(h.slice(2));case"?":if(!g.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return g.variable(h.slice(1));case'"':{const v=t(h),m=g.namedNode(r(h));return g.literal(n(h),v||m)}default:if(h.startsWith("<<")&&h.endsWith(">>")){const v=h.slice(2,-2),m=[];let T=0,w=0;for(let E=0;E<v.length;E++){const S=v[E];if(S==="<"&&T++,S===">"){if(T===0)throw new Error(`Found closing tag without opening tag in ${h}`);T--}S===" "&&T===0&&(m.push(v.slice(w,E)),w=E+1)}if(T!==0)throw new Error(`Found opening tag without closing tag in ${h}`);if(m.push(v.slice(w,v.length)),m.length!==3&&m.length!==4)throw new Error(`Nested quad syntax error ${h}`);return g.quad(i(m[0]),i(m[1]),i(m[2]),m[3]?i(m[3]):void 0)}if(!h.startsWith("<")||!h.endsWith(">"))throw new Error(`Detected invalid iri for named node (must be wrapped in <>): ${h}`);return g.namedNode(h.slice(1,-1))}}Ta.stringToTerm=i;function o(h){return{subject:u(h.subject),predicate:u(h.predicate),object:u(h.object),graph:u(h.graph)}}Ta.quadToStringQuad=o;function l(h,g){return g=g||e,g.quad(i(h.subject,g),i(h.predicate,g),i(h.object,g),i(h.graph,g))}Ta.stringQuadToQuad=l;function s(h){return h.replace(d,p)}function c(h){return d.test(h)&&(h=h.replace(d,p)),h}const d=/["\\\t\n\r\b\f\u0000-\u0019]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,f=new Map([["\\","\\\\"],['"','\\"'],["	","\\t"],[`
`,"\\n"],["\r","\\r"],["\b","\\b"],["\f","\\f"]]);function p(h){const g=f.get(h);if(!g){if(h.length===1){const m=h.charCodeAt(0).toString(16);return`${"\\u0000".slice(0,-m.length)}${m}`}const v=((h.charCodeAt(0)-55296)*1024+h.charCodeAt(1)+9216).toString(16);return`${"\\U00000000".slice(0,-v.length)}${v}`}return g}return Ta}var tee;function J4(){return tee||(tee=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralLanguage=void 0;const e=NIe();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(MM)),MM}var ree;function IIe(){if(ree)return K2;ree=1,Object.defineProperty(K2,"__esModule",{value:!0}),K2.ActorQueryResultSerializeSparqlTsv=void 0;const a=$o(),e=De(),u=J4(),n=Nr();let r=class q2e extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(i){super(i)}static bindingToTsvBindings(i){return i?(0,u.termToString)(i).replaceAll("	","\\t").replaceAll(`
`,"\\n").replaceAll("\r","\\r"):""}async testHandleChecked(i,o){return i.type!=="bindings"?(0,e.failTest)("This actor can only handle bindings streams."):(0,e.passTestVoid)()}async runHandle(i,o,l){const s=i,c=new n.Readable,d=await s.metadata();return c.push(`${d.variables.map(f=>f.variable.value).join("	")}
`),c.wrap(s.bindingsStream.map(f=>`${d.variables.map(p=>q2e.bindingToTsvBindings(f.get(p.variable))).join("	")}
`)),{data:c}}};return K2.ActorQueryResultSerializeSparqlTsv=r,K2}var nee;function yB(){return nee||(nee=1,(function(a){var e=gf&&gf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=gf&&gf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(IIe(),a)})(gf)),gf}var vf={},J2={},W2={},aee;function DIe(){if(aee)return W2;aee=1,Object.defineProperty(W2,"__esModule",{value:!0}),W2.XmlSerializer=void 0;let a=class{constructor(){this.stack=[]}open(u,n){const r=`${this.identation()+this.formatTag(u,n,"open")}
`;return this.stack.push(u),r}close(){const u=this.stack.pop();if(u===void 0)throw new Error("There is no tag left to close");return`${this.identation()+this.formatTag(u,{},"close")}
`}serializeNode(u){if(u.children===void 0)return`${this.identation()+this.formatTag(u.name,u.attributes,"self-closing")}
`;if(typeof u.children=="string")return`${this.identation()+this.formatTag(u.name,u.attributes,"open")+this.escape(u.children)+this.formatTag(u.name,{},"close")}
`;const n=[];n.push(`${this.identation()+this.formatTag(u.name,u.attributes,"open")}
`),this.stack.push(u.name);for(const r of u.children)n.push(this.serializeNode(r));return this.stack.pop(),n.push(`${this.identation()+this.formatTag(u.name,{},"close")}
`),n.join("")}identation(){return this.stack.map(u=>"  ").join("")}formatTag(u,n,r){return`<${r==="close"?"/":""}${u}${Object.entries(n??{}).map(t=>` ${t[0]}="${this.escape(t[1])}"`)}${r==="self-closing"?"/":""}>`}escape(u){return u.replaceAll(/["&'<>]/gu,(n=>{switch(n){case"<":return"&lt;";case">":return"&gt;";case"&":return"&amp;";case"'":return"&apos;";case'"':return"&quot;"}}))}};return W2.XmlSerializer=a,a.header=`<?xml version="1.0" encoding="UTF-8"?>
`,W2}var iee;function FIe(){if(iee)return J2;iee=1,Object.defineProperty(J2,"__esModule",{value:!0}),J2.ActorQueryResultSerializeSparqlXml=void 0;const a=$o(),e=De(),u=zt(),n=Nr(),r=DIe();let t=class B2e extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}static bindingToXmlBindings(o,l){return{name:"binding",attributes:{name:l.value},children:[this.valueToXmlValue(o)]}}static valueToXmlValue(o){let l;switch(o.termType){case"Literal":return o.language?l={"xml:lang":o.language}:o.datatype&&o.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"?l={datatype:o.datatype.value}:l={},{name:"literal",attributes:l,children:o.value};case"BlankNode":return{name:"bnode",children:o.value};case"Quad":return{name:"triple",children:[{name:"subject",children:[this.valueToXmlValue(o.subject)]},{name:"predicate",children:[this.valueToXmlValue(o.predicate)]},{name:"object",children:[this.valueToXmlValue(o.object)]}]};default:return{name:"uri",children:o.value}}}async testHandleChecked(o,l){return["bindings","boolean"].includes(o.type)?(0,e.passTestVoid)():(0,e.failTest)("This actor can only handle bindings streams or booleans.")}async runHandle(o,l,s){const c=new n.Readable;c._read=()=>{};const d=new r.XmlSerializer,f=await o.metadata();if(c.push(r.XmlSerializer.header),c.push(d.open("sparql",{xmlns:"http://www.w3.org/2005/sparql-results#"})),c.push(d.serializeNode({name:"head",children:f.variables.map(p=>({name:"variable",attributes:{name:p.variable.value}}))})),o.type==="bindings"){function*p(){yield d.close(),yield d.close()}c.push(d.open("results"));const h=(0,u.wrap)(o.bindingsStream).map(g=>d.serializeNode({name:"result",children:[...g].map(([v,m])=>B2e.bindingToXmlBindings(m,v))})).append((0,u.wrap)(p()));c.wrap(h)}else try{const p=await o.execute();c.push(d.serializeNode({name:"boolean",children:p.toString()})),c.push(d.close()),setTimeout(()=>c.push(null))}catch(p){setTimeout(()=>c.emit("error",p))}return{data:c}}};return J2.ActorQueryResultSerializeSparqlXml=t,J2}var uee;function mB(){return uee||(uee=1,(function(a){var e=vf&&vf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=vf&&vf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(FIe(),a)})(vf)),vf}var _f={},Y2={},oee;function PIe(){if(oee)return Y2;oee=1,Object.defineProperty(Y2,"__esModule",{value:!0}),Y2.ActorQueryResultSerializeTable=void 0;const a=$o(),e=lt(),u=De(),n=$t(),r=Yr(),t=Nr();let i=class o7 extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(l){super(l),this.padding=o7.repeat(" ",this.columnWidth)}static repeat(l,s){return l.repeat(s)}async testHandleChecked(l,s){return["bindings","quads"].includes(l.type)?(0,u.passTestVoid)():(0,u.failTest)("This actor can only handle bindings or quad streams.")}termToString(l){return l.termType==="Quad"?(0,n.termToString)(l):l.value}pad(l){return l.length<=this.columnWidth?l+this.padding.slice(l.length):`${l.slice(0,this.columnWidth-1)}`}pushHeader(l,s){const c=s.map(d=>this.pad(d.value)).join(" ");l.push(`${c}
${o7.repeat("-",c.length)}
`)}createRow(l,s){return`${l.map(c=>s.has(c)?this.termToString(s.get(c)):"").map(c=>this.pad(c)).join(" ")}
`}async runHandle(l,s,c){const d=new t.Readable;let f;if(l.type==="bindings"){f=l.bindingsStream.map(h=>this.createRow(p,h));const p=(await l.metadata()).variables.map(h=>h.variable);this.pushHeader(d,p)}else{f=l.quadStream.map(h=>`${(0,r.getTerms)(h).map(g=>this.pad(this.termToString(g))).join(" ")}
`);const p=l.context.getSafe(e.KeysInitQuery.dataFactory);this.pushHeader(d,r.QUAD_TERM_NAMES.map(h=>p.variable(h)))}return d.wrap(f),{data:d}}};return Y2.ActorQueryResultSerializeTable=i,Y2}var see;function bB(){return see||(see=1,(function(a){var e=_f&&_f.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=_f&&_f.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(PIe(),a)})(_f)),_f}var Tf={},Z2={},wf={},eT={},Sf={},Ef={},tT={},rT={},cee;function a1(){if(cee)return rT;cee=1,Object.defineProperty(rT,"__esModule",{value:!0}),rT.Translator=void 0;let a=class{constructor(){this.supportedRdfDatatypes=[],this.fromRdfHandlers={},this.toRdfHandlers={}}static incorrectRdfDataType(u){throw new Error(`Invalid RDF ${u.datatype.value} value: '${u.value}'`)}registerHandler(u,n,r){for(const t of n)this.supportedRdfDatatypes.push(t),this.fromRdfHandlers[t.value]=u;for(const t of r){let i=this.toRdfHandlers[t];i||(this.toRdfHandlers[t]=i=[]),i.push(u)}}fromRdf(u,n){const r=this.fromRdfHandlers[u.datatype.value];return r?r.fromRdf(u,n):u.value}toRdf(u,n){const r=this.toRdfHandlers[typeof u];if(r)for(const t of r){const i=t.toRdf(u,n);if(i)return i}throw new Error(`Invalid JavaScript value: '${u}'`)}getSupportedRdfDatatypes(){return this.supportedRdfDatatypes}getSupportedJavaScriptPrimitives(){return Object.keys(this.toRdfHandlers)}};return rT.Translator=a,rT}var lee;function jIe(){if(lee)return tT;lee=1,Object.defineProperty(tT,"__esModule",{value:!0}),tT.TypeHandlerBoolean=void 0;const a=a1();let e=class U2e{fromRdf(n,r){switch(n.value){case"true":return!0;case"false":return!1;case"1":return!0;case"0":return!1}return r&&a.Translator.incorrectRdfDataType(n),!1}toRdf(n,{datatype:r,dataFactory:t}){return t.literal(n?"true":"false",r||t.namedNode(U2e.TYPE))}};return e.TYPE="http://www.w3.org/2001/XMLSchema#boolean",tT.TypeHandlerBoolean=e,tT}var nT={},dee;function MIe(){if(dee)return nT;dee=1,Object.defineProperty(nT,"__esModule",{value:!0}),nT.TypeHandlerDate=void 0;const a=a1();let e=class s7{fromRdf(n,r){switch(r&&!n.value.match(s7.VALIDATORS[n.datatype.value.substr(33,n.datatype.value.length)])&&a.Translator.incorrectRdfDataType(n),n.datatype.value){case"http://www.w3.org/2001/XMLSchema#gDay":return new Date(0,0,parseInt(n.value,10));case"http://www.w3.org/2001/XMLSchema#gMonthDay":const t=n.value.split("-");return new Date(0,parseInt(t[0],10)-1,parseInt(t[1],10));case"http://www.w3.org/2001/XMLSchema#gYear":return new Date(n.value+"-01-01");case"http://www.w3.org/2001/XMLSchema#gYearMonth":return new Date(n.value+"-01");default:return new Date(n.value)}}toRdf(n,{datatype:r,dataFactory:t}){if(r=r||t.namedNode(s7.TYPES[0]),!(n instanceof Date))return null;const i=n;let o;switch(r.value){case"http://www.w3.org/2001/XMLSchema#gDay":o=String(i.getUTCDate());break;case"http://www.w3.org/2001/XMLSchema#gMonthDay":o=i.getUTCMonth()+1+"-"+i.getUTCDate();break;case"http://www.w3.org/2001/XMLSchema#gYear":o=String(i.getUTCFullYear());break;case"http://www.w3.org/2001/XMLSchema#gYearMonth":o=i.getUTCFullYear()+"-"+(i.getUTCMonth()+1);break;case"http://www.w3.org/2001/XMLSchema#date":o=i.toISOString().replace(/T.*$/,"");break;default:o=i.toISOString()}return t.literal(o,r)}};return e.TYPES=["http://www.w3.org/2001/XMLSchema#dateTime","http://www.w3.org/2001/XMLSchema#date","http://www.w3.org/2001/XMLSchema#gDay","http://www.w3.org/2001/XMLSchema#gMonthDay","http://www.w3.org/2001/XMLSchema#gYear","http://www.w3.org/2001/XMLSchema#gYearMonth"],e.VALIDATORS={date:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,dateTime:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9](\.[0-9][0-9][0-9])?((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,gDay:/^[0-9]+$/,gMonthDay:/^[0-9]+-[0-9][0-9]$/,gYear:/^[0-9]+$/,gYearMonth:/^[0-9]+-[0-9][0-9]$/},nT.TypeHandlerDate=e,nT}var aT={},fee;function CIe(){if(fee)return aT;fee=1,Object.defineProperty(aT,"__esModule",{value:!0}),aT.TypeHandlerNumberDouble=void 0;const a=a1();let e=class Q2e{fromRdf(n,r){const t=parseFloat(n.value);return r&&isNaN(t)&&a.Translator.incorrectRdfDataType(n),t}toRdf(n,{datatype:r,dataFactory:t}){return r=r||t.namedNode(Q2e.TYPES[0]),isNaN(n)?t.literal("NaN",r):isFinite(n)?n%1===0?null:t.literal(n.toExponential(15).replace(/(\d)0*e\+?/,"$1E"),r):t.literal(n>0?"INF":"-INF",r)}};return e.TYPES=["http://www.w3.org/2001/XMLSchema#double","http://www.w3.org/2001/XMLSchema#decimal","http://www.w3.org/2001/XMLSchema#float"],aT.TypeHandlerNumberDouble=e,aT}var iT={},pee;function LIe(){if(pee)return iT;pee=1,Object.defineProperty(iT,"__esModule",{value:!0}),iT.TypeHandlerNumberInteger=void 0;const a=a1();let e=class V6{fromRdf(n,r){const t=parseInt(n.value,10);return r&&(isNaN(t)||n.value.indexOf(".")>=0)&&a.Translator.incorrectRdfDataType(n),t}toRdf(n,{datatype:r,dataFactory:t}){return t.literal(String(n),r||(n<=V6.MAX_INT&&n>=V6.MIN_INT?t.namedNode(V6.TYPES[0]):t.namedNode(V6.TYPES[1])))}};return e.TYPES=["http://www.w3.org/2001/XMLSchema#integer","http://www.w3.org/2001/XMLSchema#long","http://www.w3.org/2001/XMLSchema#int","http://www.w3.org/2001/XMLSchema#byte","http://www.w3.org/2001/XMLSchema#short","http://www.w3.org/2001/XMLSchema#negativeInteger","http://www.w3.org/2001/XMLSchema#nonNegativeInteger","http://www.w3.org/2001/XMLSchema#nonPositiveInteger","http://www.w3.org/2001/XMLSchema#positiveInteger","http://www.w3.org/2001/XMLSchema#unsignedByte","http://www.w3.org/2001/XMLSchema#unsignedInt","http://www.w3.org/2001/XMLSchema#unsignedLong","http://www.w3.org/2001/XMLSchema#unsignedShort"],e.MAX_INT=2147483647,e.MIN_INT=-2147483648,iT.TypeHandlerNumberInteger=e,iT}var uT={},hee;function qIe(){if(hee)return uT;hee=1,Object.defineProperty(uT,"__esModule",{value:!0}),uT.TypeHandlerString=void 0;let a=class{fromRdf(u){return u.value}toRdf(u,{datatype:n,dataFactory:r}){return r.literal(u,n)}};return a.TYPES=["http://www.w3.org/2001/XMLSchema#string","http://www.w3.org/2001/XMLSchema#normalizedString","http://www.w3.org/2001/XMLSchema#anyURI","http://www.w3.org/2001/XMLSchema#base64Binary","http://www.w3.org/2001/XMLSchema#language","http://www.w3.org/2001/XMLSchema#Name","http://www.w3.org/2001/XMLSchema#NCName","http://www.w3.org/2001/XMLSchema#NMTOKEN","http://www.w3.org/2001/XMLSchema#token","http://www.w3.org/2001/XMLSchema#hexBinary","http://www.w3.org/1999/02/22-rdf-syntax-ns#langString","http://www.w3.org/2001/XMLSchema#time","http://www.w3.org/2001/XMLSchema#duration"],uT.TypeHandlerString=a,uT}var yee;function mee(){return yee||(yee=1,(function(a){var e=Ef&&Ef.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ef&&Ef.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(jIe(),a),u(MIe(),a),u(CIe(),a),u(LIe(),a),u(qIe(),a)})(Ef)),Ef}var CM={},bee;function BIe(){return bee||(bee=1,Object.defineProperty(CM,"__esModule",{value:!0})),CM}var gee;function UIe(){return gee||(gee=1,(function(a){var e=Sf&&Sf.__createBinding||(Object.create?(function(p,h,g,v){v===void 0&&(v=g);var m=Object.getOwnPropertyDescriptor(h,g);(!m||("get"in m?!h.__esModule:m.writable||m.configurable))&&(m={enumerable:!0,get:function(){return h[g]}}),Object.defineProperty(p,v,m)}):(function(p,h,g,v){v===void 0&&(v=g),p[v]=h[g]})),u=Sf&&Sf.__exportStar||function(p,h){for(var g in p)g!=="default"&&!Object.prototype.hasOwnProperty.call(h,g)&&e(h,p,g)};Object.defineProperty(a,"__esModule",{value:!0}),a.getSupportedJavaScriptPrimitives=a.getSupportedRdfDatatypes=a.getTermRaw=a.toRdf=a.fromRdf=void 0;const n=Rr(),r=mee(),t=a1();u(mee(),a),u(BIe(),a),u(a1(),a);const i=new n.DataFactory,o=new t.Translator;o.registerHandler(new r.TypeHandlerString,r.TypeHandlerString.TYPES.map(p=>i.namedNode(p)),["string"]),o.registerHandler(new r.TypeHandlerBoolean,[r.TypeHandlerBoolean.TYPE].map(p=>i.namedNode(p)),["boolean"]),o.registerHandler(new r.TypeHandlerNumberDouble,r.TypeHandlerNumberDouble.TYPES.map(p=>i.namedNode(p)),["number"]),o.registerHandler(new r.TypeHandlerNumberInteger,r.TypeHandlerNumberInteger.TYPES.map(p=>i.namedNode(p)),["number"]),o.registerHandler(new r.TypeHandlerDate,r.TypeHandlerDate.TYPES.map(p=>i.namedNode(p)),["object"]);function l(p,h){return o.fromRdf(p,h)}a.fromRdf=l;function s(p,h){return h&&"namedNode"in h&&(h={dataFactory:h}),h=h||{},h&&!h.dataFactory&&(h.dataFactory=i),o.toRdf(p,h)}a.toRdf=s;function c(p,h){return p.termType==="Literal"?l(p,h):p.value}a.getTermRaw=c;function d(){return o.getSupportedRdfDatatypes()}a.getSupportedRdfDatatypes=d;function f(){return o.getSupportedJavaScriptPrimitives()}a.getSupportedJavaScriptPrimitives=f})(Sf)),Sf}var Af={},oT={},LM,vee;function gB(){if(vee)return LM;vee=1;var{Buffer:a}=Xo(),e={},u=e.LEFT_BRACE=1,n=e.RIGHT_BRACE=2,r=e.LEFT_BRACKET=3,t=e.RIGHT_BRACKET=4,i=e.COLON=5,o=e.COMMA=6,l=e.TRUE=7,s=e.FALSE=8,c=e.NULL=9,d=e.STRING=10,f=e.NUMBER=11,p=e.START=17,h=e.STOP=18,g=e.TRUE1=33,v=e.TRUE2=34,m=e.TRUE3=35,T=e.FALSE1=49,w=e.FALSE2=50,E=e.FALSE3=51,S=e.FALSE4=52,N=e.NULL1=65,j=e.NULL2=66,q=e.NULL3=67,O=e.NUMBER1=81,I=e.NUMBER3=83,A=e.STRING1=97,P=e.STRING2=98,C=e.STRING3=99,B=e.STRING4=100,H=e.STRING5=101,V=e.STRING6=102,G=e.VALUE=113,Z=e.KEY=114,ae=e.OBJECT=129,W=e.ARRAY=130,te=92,se=47,pe=8,le=12,Ee=10,Oe=13,Ie=9,Ae=64*1024;function be(F){return a.alloc?a.alloc(F):new a(F)}function ee(){this.tState=p,this.value=void 0,this.string=void 0,this.stringBuffer=be(Ae),this.stringBufferOffset=0,this.unicode=void 0,this.highSurrogate=void 0,this.key=void 0,this.mode=void 0,this.stack=[],this.state=G,this.bytes_remaining=0,this.bytes_in_sequence=0,this.temp_buffs={2:be(2),3:be(3),4:be(4)},this.offset=-1}ee.toknam=function(F){for(var D=Object.keys(e),L=0,Q=D.length;L<Q;L++){var Y=D[L];if(e[Y]===F)return Y}return F&&"0x"+F.toString(16)};var _=ee.prototype;return _.onError=function(F){throw F},_.charError=function(F,D){this.tState=h,this.onError(new Error("Unexpected "+JSON.stringify(String.fromCharCode(F[D]))+" at position "+D+" in state "+ee.toknam(this.tState)))},_.appendStringChar=function(F){this.stringBufferOffset>=Ae&&(this.string+=this.stringBuffer.toString("utf8"),this.stringBufferOffset=0),this.stringBuffer[this.stringBufferOffset++]=F},_.appendStringBuf=function(F,D,L){var Q=F.length;typeof D=="number"&&(typeof L=="number"?L<0?Q=F.length-D+L:Q=L-D:Q=F.length-D),Q<0&&(Q=0),this.stringBufferOffset+Q>Ae&&(this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0),F.copy(this.stringBuffer,this.stringBufferOffset,D,L),this.stringBufferOffset+=Q},_.write=function(F){typeof F=="string"&&(F=new a(F));for(var D,L=0,Q=F.length;L<Q;L++)if(this.tState===p){if(D=F[L],this.offset++,D===123)this.onToken(u,"{");else if(D===125)this.onToken(n,"}");else if(D===91)this.onToken(r,"[");else if(D===93)this.onToken(t,"]");else if(D===58)this.onToken(i,":");else if(D===44)this.onToken(o,",");else if(D===116)this.tState=g;else if(D===102)this.tState=T;else if(D===110)this.tState=N;else if(D===34)this.string="",this.stringBufferOffset=0,this.tState=A;else if(D===45)this.string="-",this.tState=O;else if(D>=48&&D<64)this.string=String.fromCharCode(D),this.tState=I;else if(!(D===32||D===9||D===10||D===13))return this.charError(F,L)}else if(this.tState===A)if(D=F[L],this.bytes_remaining>0){for(var Y=0;Y<this.bytes_remaining;Y++)this.temp_buffs[this.bytes_in_sequence][this.bytes_in_sequence-this.bytes_remaining+Y]=F[Y];this.appendStringBuf(this.temp_buffs[this.bytes_in_sequence]),this.bytes_in_sequence=this.bytes_remaining=0,L=L+Y-1}else if(this.bytes_remaining===0&&D>=128){if(D<=193||D>244)return this.onError(new Error("Invalid UTF-8 character at position "+L+" in state "+ee.toknam(this.tState)));if(D>=194&&D<=223&&(this.bytes_in_sequence=2),D>=224&&D<=239&&(this.bytes_in_sequence=3),D>=240&&D<=244&&(this.bytes_in_sequence=4),this.bytes_in_sequence+L>F.length){for(var $=0;$<=F.length-1-L;$++)this.temp_buffs[this.bytes_in_sequence][$]=F[L+$];this.bytes_remaining=L+this.bytes_in_sequence-F.length,L=F.length-1}else this.appendStringBuf(F,L,L+this.bytes_in_sequence),L=L+this.bytes_in_sequence-1}else if(D===34)this.tState=p,this.string+=this.stringBuffer.toString("utf8",0,this.stringBufferOffset),this.stringBufferOffset=0,this.onToken(d,this.string),this.offset+=a.byteLength(this.string,"utf8")+1,this.string=void 0;else if(D===92)this.tState=P;else if(D>=32)this.appendStringChar(D);else return this.charError(F,L);else if(this.tState===P)if(D=F[L],D===34)this.appendStringChar(D),this.tState=A;else if(D===92)this.appendStringChar(te),this.tState=A;else if(D===47)this.appendStringChar(se),this.tState=A;else if(D===98)this.appendStringChar(pe),this.tState=A;else if(D===102)this.appendStringChar(le),this.tState=A;else if(D===110)this.appendStringChar(Ee),this.tState=A;else if(D===114)this.appendStringChar(Oe),this.tState=A;else if(D===116)this.appendStringChar(Ie),this.tState=A;else if(D===117)this.unicode="",this.tState=C;else return this.charError(F,L);else if(this.tState===C||this.tState===B||this.tState===H||this.tState===V)if(D=F[L],D>=48&&D<64||D>64&&D<=70||D>96&&D<=102){if(this.unicode+=String.fromCharCode(D),this.tState++===V){var ue=parseInt(this.unicode,16);this.unicode=void 0,this.highSurrogate!==void 0&&ue>=56320&&ue<57344?(this.appendStringBuf(new a(String.fromCharCode(this.highSurrogate,ue))),this.highSurrogate=void 0):this.highSurrogate===void 0&&ue>=55296&&ue<56320?this.highSurrogate=ue:(this.highSurrogate!==void 0&&(this.appendStringBuf(new a(String.fromCharCode(this.highSurrogate))),this.highSurrogate=void 0),this.appendStringBuf(new a(String.fromCharCode(ue)))),this.tState=A}}else return this.charError(F,L);else if(this.tState===O||this.tState===I)switch(D=F[L],D){case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:case 46:case 101:case 69:case 43:case 45:this.string+=String.fromCharCode(D),this.tState=I;break;default:this.tState=p;var ne=this.numberReviver(this.string,F,L);if(ne)return ne;this.offset+=this.string.length-1,this.string=void 0,L--;break}else if(this.tState===g)if(F[L]===114)this.tState=v;else return this.charError(F,L);else if(this.tState===v)if(F[L]===117)this.tState=m;else return this.charError(F,L);else if(this.tState===m)if(F[L]===101)this.tState=p,this.onToken(l,!0),this.offset+=3;else return this.charError(F,L);else if(this.tState===T)if(F[L]===97)this.tState=w;else return this.charError(F,L);else if(this.tState===w)if(F[L]===108)this.tState=E;else return this.charError(F,L);else if(this.tState===E)if(F[L]===115)this.tState=S;else return this.charError(F,L);else if(this.tState===S)if(F[L]===101)this.tState=p,this.onToken(s,!1),this.offset+=4;else return this.charError(F,L);else if(this.tState===N)if(F[L]===117)this.tState=j;else return this.charError(F,L);else if(this.tState===j)if(F[L]===108)this.tState=q;else return this.charError(F,L);else if(this.tState===q)if(F[L]===108)this.tState=p,this.onToken(c,null),this.offset+=3;else return this.charError(F,L)},_.onToken=function(F,D){},_.parseError=function(F,D){this.tState=h,this.onError(new Error("Unexpected "+ee.toknam(F)+(D?"("+JSON.stringify(D)+")":"")+" in state "+ee.toknam(this.state)))},_.push=function(){this.stack.push({value:this.value,key:this.key,mode:this.mode})},_.pop=function(){var F=this.value,D=this.stack.pop();this.value=D.value,this.key=D.key,this.mode=D.mode,this.emit(F),this.mode||(this.state=G)},_.emit=function(F){this.mode&&(this.state=o),this.onValue(F)},_.onValue=function(F){},_.onToken=function(F,D){if(this.state===G)if(F===d||F===f||F===l||F===s||F===c)this.value&&(this.value[this.key]=D),this.emit(D);else if(F===u)this.push(),this.value?this.value=this.value[this.key]={}:this.value={},this.key=void 0,this.state=Z,this.mode=ae;else if(F===r)this.push(),this.value?this.value=this.value[this.key]=[]:this.value=[],this.key=0,this.mode=W,this.state=G;else if(F===n)if(this.mode===ae)this.pop();else return this.parseError(F,D);else if(F===t)if(this.mode===W)this.pop();else return this.parseError(F,D);else return this.parseError(F,D);else if(this.state===Z)if(F===d)this.key=D,this.state=i;else if(F===n)this.pop();else return this.parseError(F,D);else if(this.state===i)if(F===i)this.state=G;else return this.parseError(F,D);else if(this.state===o)if(F===o)this.mode===W?(this.key++,this.state=G):this.mode===ae&&(this.state=Z);else if(F===t&&this.mode===W||F===n&&this.mode===ae)this.pop();else return this.parseError(F,D);else return this.parseError(F,D)},_.numberReviver=function(F,D,L){var Q=Number(F);if(isNaN(Q))return this.charError(D,L);F.match(/[0-9]+/)==F&&Q.toString()!=F?this.onToken(d,F):this.onToken(f,Q)},ee.C=e,LM=ee,LM}var _ee;function QIe(){if(_ee)return oT;_ee=1,Object.defineProperty(oT,"__esModule",{value:!0}),oT.SparqlJsonParser=void 0;const a=Rr(),e=Nr(),u=gB();class n{constructor(t){var i;t=t||{},this.dataFactory=t.dataFactory||new a.DataFactory,this.prefixVariableQuestionMark=!!t.prefixVariableQuestionMark,this.suppressMissingStreamResultsError=(i=t.suppressMissingStreamResultsError)!==null&&i!==void 0?i:!0}parseJsonResults(t){return t.results.bindings.map(i=>this.parseJsonBindings(i))}parseJsonResultsStream(t){const i=d=>c.emit("error",d);t.on("error",i);const o=new u;o.onError=i;let l=!1,s=!1;o.onValue=d=>{if(o.key==="vars"&&o.stack.length===2&&o.stack[1].key==="head")c.emit("variables",d.map(f=>this.dataFactory.variable(f))),l=!0;else if(o.key==="results"&&o.stack.length===1)s=!0;else if(typeof o.key=="number"&&o.stack.length===3&&o.stack[1].key==="results"&&o.stack[2].key==="bindings")try{c.push(this.parseJsonBindings(d))}catch(f){c.emit("error",f)}else o.key==="metadata"&&o.stack.length===1&&c.emit("metadata",d)};const c=t.on("end",d=>{!s&&!this.suppressMissingStreamResultsError?c.emit("error",new Error("No valid SPARQL query results were found.")):l||c.emit("variables",[])}).pipe(new e.Transform({objectMode:!0,transform(d,f,p){o.write(d),p()}}));return c}parseJsonBindings(t){const i={};for(const o in t){const l=t[o];i[this.prefixVariableQuestionMark?"?"+o:o]=this.parseJsonValue(l)}return i}parseJsonValue(t){let i;switch(t.type){case"bnode":i=this.dataFactory.blankNode(t.value);break;case"literal":t["xml:lang"]?i=this.dataFactory.literal(t.value,t["xml:lang"]):t.datatype?i=this.dataFactory.literal(t.value,this.dataFactory.namedNode(t.datatype)):i=this.dataFactory.literal(t.value);break;case"typed-literal":i=this.dataFactory.literal(t.value,this.dataFactory.namedNode(t.datatype));break;case"triple":const o=t.value;if(!o||!o.subject||!o.predicate||!o.object)throw new Error("Invalid quoted triple: "+JSON.stringify(t));i=this.dataFactory.quad(this.parseJsonValue(o.subject),this.parseJsonValue(o.predicate),this.parseJsonValue(o.object));break;default:i=this.dataFactory.namedNode(t.value);break}return i}parseJsonBoolean(t){if("boolean"in t)return t.boolean;throw new Error("No valid ASK response was found.")}parseJsonBooleanStream(t){return new Promise((i,o)=>{const l=new u;l.onError=o,l.onValue=s=>{l.key==="boolean"&&typeof s=="boolean"&&l.stack.length===1&&i(s)},t.on("error",o).on("data",s=>l.write(s)).on("end",()=>o(new Error("No valid ASK response was found.")))})}}return oT.SparqlJsonParser=n,oT}var Tee;function VIe(){return Tee||(Tee=1,(function(a){var e=Af&&Af.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Af&&Af.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(QIe(),a)})(Af)),Af}var wee;function HIe(){if(wee)return eT;wee=1,Object.defineProperty(eT,"__esModule",{value:!0}),eT.Converter=void 0;const a=UIe(),e=VIe();let u=class Hs{constructor(r){r=r||{delimiter:"_"},r.prefixVariableQuestionMark=!1,this.delimiter=r.delimiter||"_",this.parser=new e.SparqlJsonParser(r),this.materializeRdfJsTerms=r.materializeRdfJsTerms}static addValueToTree(r,t,i,o,l,s){const c=t[0],d=o?o+s+c:c,f=l.singularizeVariables[d];if(t.length===1)f?r[c]||(r[c]=i):(r[c]||(r[c]=[]),r[c].push(i));else{let p;f?(r[c]||(r[c]={}),p=r[c]):(r[c]||(r[c]=[{}]),p=r[c][0]),Hs.addValueToTree(p,t.slice(1),i,d,l,s)}}static mergeTrees(r,t){if(typeof r!=typeof t)throw new Error(`Two incompatible tree nodes were found: ${typeof r} and ${typeof t}`);if(Array.isArray(r)!==Array.isArray(t))throw new Error(`Two incompatible tree nodes were found: Array?${Array.isArray(r)} and Array?${Array.isArray(t)}`);if(typeof r=="object"&&typeof t=="object"){if(r.termType&&t.termType)return r.equals(t)?{valid:!0,result:r}:{valid:!1,result:r};if(Array.isArray(r)&&Array.isArray(t)){if(r.length>0){const i=[];let o=!1;for(const l of r){const s=Hs.mergeTrees(l,t[0]);s.valid?(o=!0,i.push(s.result)):i.push(l)}if(o)return{valid:!0,result:i}}return{valid:!0,result:r.concat(t)}}else{const i={};for(const o in t)i[o]=t[o];for(const o in r)if(i[o]){const l=Hs.mergeTrees(r[o],i[o]);if(l.valid)i[o]=l.result;else return{valid:!1,result:r}}else i[o]=r[o];return{valid:!0,result:i}}}else throw new Error(`Unmergable tree types: ${typeof r} and ${typeof t}`)}static materializeTree(r){if(r.termType)return(0,a.getTermRaw)(r);if(Array.isArray(r))return r.map(Hs.materializeTree);{const t={};for(const i in r)t[i]=Hs.materializeTree(r[i]);return t}}sparqlJsonResultsToTree(r,t){return this.bindingsToTree(this.parser.parseJsonResults(r),t||{singularizeVariables:{}})}bindingsToTree(r,t){const i=t&&t.singularizeVariables[""];let o=i?{}:[];for(const l of r){const s=i?{}:[{}];for(const c in l){const d=c.split(this.delimiter),f=l[c];Hs.addValueToTree(i?s:s[0],d,f,"",t,this.delimiter)}o=Hs.mergeTrees(o,s).result}return this.materializeRdfJsTerms&&(o=Hs.materializeTree(o)),o}};return eT.Converter=u,eT}var See;function kIe(){return See||(See=1,(function(a){var e=wf&&wf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=wf&&wf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(HIe(),a)})(wf)),wf}var Eee;function Aee(){if(Eee)return Z2;Eee=1,Object.defineProperty(Z2,"__esModule",{value:!0}),Z2.ActorQueryResultSerializeTree=void 0;const a=$o(),e=lt(),u=De(),n=Nr(),r=kIe();let t=class V2e extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}static async bindingsStreamToGraphQl(o,l,s){const c=u.ActionContext.ensureActionContext(l),d=new r.Converter(s),f={singularizeVariables:c.get(e.KeysInitQuery.graphqlSingularizeVariables)??{}};return d.bindingsToTree(await o.map(p=>Object.fromEntries([...p].map(([h,g])=>[h.value,g]))).toArray(),f)}async testHandleChecked(o){return o.type!=="bindings"?(0,u.failTest)("This actor can only handle bindings streams."):(0,u.passTestVoid)()}async runHandle(o,l){const s=new n.Readable;return s._read=()=>{s._read=()=>{},V2e.bindingsStreamToGraphQl(o.bindingsStream,o.context,{materializeRdfJsTerms:!0}).then(c=>{s.push(JSON.stringify(c,null,"  ")),s.push(null)}).catch(c=>s.emit("error",c))},{data:s}}};return Z2.ActorQueryResultSerializeTree=t,Z2}var Oee;function vB(){return Oee||(Oee=1,(function(a){var e=Tf&&Tf.__createBinding||(Object.create?(function(t,i,o,l){l===void 0&&(l=o);var s=Object.getOwnPropertyDescriptor(i,o);(!s||("get"in s?!i.__esModule:s.writable||s.configurable))&&(s={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(t,l,s)}):(function(t,i,o,l){l===void 0&&(l=o),t[l]=i[o]})),u=Tf&&Tf.__exportStar||function(t,i){for(var o in t)o!=="default"&&!Object.prototype.hasOwnProperty.call(i,o)&&e(i,t,o)};Object.defineProperty(a,"__esModule",{value:!0}),a.bindingsStreamToGraphQl=void 0;const n=Aee(),{bindingsStreamToGraphQl:r}=n.ActorQueryResultSerializeTree;a.bindingsStreamToGraphQl=r,u(Aee(),a)})(Tf)),Tf}var Of={},sT={},xee;function zIe(){if(xee)return sT;xee=1,Object.defineProperty(sT,"__esModule",{value:!0}),sT.MediatorCombineUnion=void 0;const a=De();let e=class extends a.Mediator{constructor(n){super(n),this.combiner=this.createCombiner()}async mediate(n){let r;try{r=this.publish(n)}catch{r=[]}if(this.filterFailures){const o=[];for(const l of r)(await l.reply).isPassed()&&o.push(l);r=o}const t=[];await Promise.all(r.map(async({reply:o},l)=>{const s=await o,c=s.getOrThrow();return t[l]=s.getSideData(),c}));const i=await Promise.all(r.map((o,l)=>o.actor.runObservable(n,t[l])));return this.combiner(i)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return n=>{const r={};return r[this.field]={},[{}].concat(n.map(t=>t[this.field])).forEach(t=>{r[this.field]={...t,...r[this.field]}}),r}}};return sT.MediatorCombineUnion=e,sT}var Ree;function vn(){return Ree||(Ree=1,(function(a){var e=Of&&Of.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Of&&Of.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(zIe(),a)})(Of)),Of}var xf={},cT={},Nee;function GIe(){if(Nee)return cT;Nee=1,Object.defineProperty(cT,"__esModule",{value:!0}),cT.MediatorNumber=void 0;const a=De();let e=class extends a.Mediator{constructor(n){super(n),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return n=>n.reduce((r,t,i)=>{const o=this.getOrDefault(t[this.field],Number.POSITIVE_INFINITY);return o!==null&&(Number.isNaN(r[0])||r[0]>o)?[o,i]:r},[Number.NaN,-1])[1];case"max":return n=>n.reduce((r,t,i)=>{const o=this.getOrDefault(t[this.field],Number.NEGATIVE_INFINITY);return o!==null&&(Number.isNaN(r[0])||r[0]<o)?[o,i]:r},[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(n,r){return n===void 0?r:n}async mediateWith(n,r){let t=await Promise.all(r.map(({reply:c})=>c));const i=[];if(this.ignoreFailures){const c={};c[this.field]=null,t=t.map(d=>d.isFailed()?(i.push(d.getFailMessage()),(0,a.passTestWithSideData)(c,void 0)):d)}const o=[],l=t.map((c,d)=>{const f=c.getOrThrow();return o[d]=c.getSideData(),f}),s=this.indexPicker(l);return s<0?(0,a.failTest)(this.constructFailureMessage(n,i)):(0,a.passTestWithSideData)(r[s].actor,o[s])}};return cT.MediatorNumber=e,cT}var Iee;function oa(){return Iee||(Iee=1,(function(a){var e=xf&&xf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=xf&&xf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(GIe(),a)})(xf)),xf}var Rf={},lT={},Nf={},dT={},Ps={},Dee;function _B(){if(Dee)return Ps;Dee=1,Object.defineProperty(Ps,"__esModule",{value:!0}),Ps.ActorDereferenceBase=Ps.isHardError=Ps.emptyReadable=void 0;const a=lt(),e=De(),u=Nr();function n(){const i=new u.Readable;return i.push(null),i}Ps.emptyReadable=n;function r(i){return!i.get(a.KeysInitQuery.lenient)}Ps.isHardError=r;let t=class extends e.Actor{constructor(o){super(o)}async dereferenceErrorHandler(o,l,s){if(r(o.context))throw l;return this.logWarn(o.context,l.message,()=>({url:o.url})),{...s,data:n()}}};return Ps.ActorDereferenceBase=t,Ps}var Fee;function $Ie(){if(Fee)return dT;Fee=1,Object.defineProperty(dT,"__esModule",{value:!0}),dT.ActorDereference=void 0;const a=_B();let e=class extends a.ActorDereferenceBase{constructor(n){super(n)}async handleDereferenceErrors(n,r,t,i=0){return this.dereferenceErrorHandler(n,r,{url:n.url,exists:!1,headers:t,requestTime:i})}};return dT.ActorDereference=e,dT}var If={},Pee;function XIe(){if(Pee)return If;Pee=1,Object.defineProperty(If,"__esModule",{value:!0}),If.ActorDereferenceParse=If.getMediaTypeFromExtension=void 0;const a=De(),e=Nr(),u=_B();function n(t,i){const o=t.lastIndexOf(".");return o>=0&&i?.[t.slice(o+1)]||""}If.getMediaTypeFromExtension=n;let r=class extends u.ActorDereferenceBase{constructor(i){super(i)}async test(i){return(0,a.passTestVoid)()}handleDereferenceStreamErrors(i,o){return(0,u.isHardError)(i.context)||(o.on("error",l=>{this.logWarn(i.context,l.message,()=>({url:i.url})),o.push(null)}),o=o.pipe(new e.PassThrough({objectMode:!0}))),o}async run(i){const{context:o}=i,l=await this.mediatorDereference.mediate({...i,mediaTypes:async()=>(await this.mediatorParseMediatypes?.mediate({context:o,mediaTypes:!0}))?.mediaTypes});let s;if(l.exists)try{s=(await this.mediatorParse.mediate({context:o,handle:{context:o,...l,metadata:await this.getMetadata(l)},handleMediaType:l.mediaType||i.mediaType||n(l.url,this.mediaMappings)})).handle,s.data=this.handleDereferenceStreamErrors(i,s.data)}catch(c){await l.data.close?.(),s=await this.dereferenceErrorHandler(i,c,{})}else await l.data.close?.(),s={data:(0,u.emptyReadable)()};return{...l,...s}}};return If.ActorDereferenceParse=r,If}var jee;function TB(){return jee||(jee=1,(function(a){var e=Nf&&Nf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Nf&&Nf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u($Ie(),a),u(XIe(),a),u(_B(),a)})(Nf)),Nf}var Mee;function KIe(){if(Mee)return lT;Mee=1,Object.defineProperty(lT,"__esModule",{value:!0}),lT.ActorDereferenceFallback=void 0;const a=TB(),e=De();let u=class extends a.ActorDereference{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}async run(r){return this.handleDereferenceErrors(r,new Error(`Could not dereference '${r.url}'`))}};return lT.ActorDereferenceFallback=u,lT}var Cee;function wB(){return Cee||(Cee=1,(function(a){var e=Rf&&Rf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Rf&&Rf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(KIe(),a)})(Rf)),Rf}var Df={},fT={},Ff={},pT={},Lee;function JIe(){if(Lee)return pT;Lee=1,Object.defineProperty(pT,"__esModule",{value:!0}),pT.ActorRdfJoinEntriesSort=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return pT.ActorRdfJoinEntriesSort=e,pT}var qee;function WIe(){return qee||(qee=1,(function(a){var e=Ff&&Ff.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ff&&Ff.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(JIe(),a)})(Ff)),Ff}var ku={},fu={},qM={},Bee;function W4(){return Bee||(Bee=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.expressionTypes=a.types=void 0,(function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"})(a.types||(a.types={})),(function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"})(a.expressionTypes||(a.expressionTypes={}))})(qM)),qM}var No={},Uee;function yP(){if(Uee)return No;Uee=1;var a=No&&No.__createBinding||(Object.create?(function(l,s,c,d){d===void 0&&(d=c);var f=Object.getOwnPropertyDescriptor(s,c);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[c]}}),Object.defineProperty(l,d,f)}):(function(l,s,c,d){d===void 0&&(d=c),l[d]=s[c]})),e=No&&No.__setModuleDefault||(Object.create?(function(l,s){Object.defineProperty(l,"default",{enumerable:!0,value:s})}):function(l,s){l.default=s}),u=No&&No.__importStar||function(l){if(l&&l.__esModule)return l;var s={};if(l!=null)for(var c in l)c!=="default"&&Object.prototype.hasOwnProperty.call(l,c)&&a(s,l,c);return e(s,l),s};Object.defineProperty(No,"__esModule",{value:!0});const n=u(W4()),r=Rr(),t=$t(),i=$n();class o{constructor(s){this.dataFactory=s||new r.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,c=!0){return this.flattenMulti({type:n.types.ALT,input:s},c)}createAsk(s){return{type:n.types.ASK,input:s}}createBoundAggregate(s,c,d,f,p){const h=this.createAggregateExpression(c,d,f,p);return h.variable=s,h}createBgp(s){return{type:n.types.BGP,patterns:s}}createConstruct(s,c){return{type:n.types.CONSTRUCT,input:s,template:c}}createDescribe(s,c){return{type:n.types.DESCRIBE,input:s,terms:c}}createDistinct(s){return{type:n.types.DISTINCT,input:s}}createExtend(s,c,d){return{type:n.types.EXTEND,input:s,variable:c,expression:d}}createFrom(s,c,d){return{type:n.types.FROM,input:s,default:c,named:d}}createFilter(s,c){return{type:n.types.FILTER,input:s,expression:c}}createGraph(s,c){return{type:n.types.GRAPH,input:s,name:c}}createGroup(s,c,d){return{type:n.types.GROUP,input:s,variables:c,aggregates:d}}createInv(s){return{type:n.types.INV,path:s}}createJoin(s,c=!0){return this.flattenMulti({type:n.types.JOIN,input:s},c)}createLeftJoin(s,c,d){return d?{type:n.types.LEFT_JOIN,input:[s,c],expression:d}:{type:n.types.LEFT_JOIN,input:[s,c]}}createLink(s){return{type:n.types.LINK,iri:s}}createMinus(s,c){return{type:n.types.MINUS,input:[s,c]}}createNop(){return{type:n.types.NOP}}createNps(s){return{type:n.types.NPS,iris:s}}createOneOrMorePath(s){return{type:n.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,c){return{type:n.types.ORDER_BY,input:s,expressions:c}}createPath(s,c,d,f){return f?{type:n.types.PATH,subject:s,predicate:c,object:d,graph:f}:{type:n.types.PATH,subject:s,predicate:c,object:d,graph:this.dataFactory.defaultGraph()}}createPattern(s,c,d,f){const p=this.dataFactory.quad(s,c,d,f);return p.type=n.types.PATTERN,p}createProject(s,c){return{type:n.types.PROJECT,input:s,variables:c}}createReduced(s){return{type:n.types.REDUCED,input:s}}createSeq(s,c=!0){return this.flattenMulti({type:n.types.SEQ,input:s},c)}createService(s,c,d){return{type:n.types.SERVICE,input:s,name:c,silent:!!d}}createSlice(s,c,d){return c=c||0,d!==void 0?{type:n.types.SLICE,input:s,start:c,length:d}:{type:n.types.SLICE,input:s,start:c}}createUnion(s,c=!0){return this.flattenMulti({type:n.types.UNION,input:s},c)}createValues(s,c){return{type:n.types.VALUES,variables:s,bindings:c}}createZeroOrMorePath(s){return{type:n.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:n.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,c,d,f){return f?{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,separator:f,distinct:d}:{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,distinct:d}}createExistenceExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.EXISTENCE,not:s,input:c}}createNamedExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.NAMED,name:s,args:c}}createOperatorExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.OPERATOR,operator:s,args:c}}createTermExpression(s){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.WILDCARD,wildcard:new i.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,t.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:n.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,c,d){const f={type:n.types.DELETE_INSERT};return s&&(f.delete=s),c&&(f.insert=c),d&&(f.where=d),f}createLoad(s,c,d){const f={type:n.types.LOAD,source:s};return c&&(f.destination=c),this.addSilent(f,!!d)}createClear(s,c){return this.addSilent({type:n.types.CLEAR,source:s},!!c)}createCreate(s,c){return this.addSilent({type:n.types.CREATE,source:s},!!c)}createDrop(s,c){return this.addSilent({type:n.types.DROP,source:s},!!c)}createAdd(s,c,d){return this.addSilent({type:n.types.ADD,source:s,destination:c},!!d)}createMove(s,c,d){return this.addSilent({type:n.types.MOVE,source:s,destination:c},!!d)}createCopy(s,c,d){return this.addSilent({type:n.types.COPY,source:s,destination:c},!!d)}addSilent(s,c){return c&&(s.silent=c),s}flattenMulti(s,c){if(!c)return s;const d=s.type,f=s.input;let p=[];for(const h of f)h.type===d?p.push(...h.input):p.push(h);return s.input=p,s}}return No.default=o,No}var hg={},Qee;function SB(){if(Qee)return hg;Qee=1;var a=hg&&hg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(hg,"__esModule",{value:!0});const e=W4(),u=a(yP()),n=Yr();class r{static flatten(i){return Array.prototype.concat(...i).filter(o=>o)}static objectify(i){if(i.termType){if(i.termType==="Quad")return{type:"pattern",termType:"Quad",subject:r.objectify(i.subject),predicate:r.objectify(i.predicate),object:r.objectify(i.object),graph:r.objectify(i.graph)};{let o={termType:i.termType,value:i.value};return i.language&&(o.language=i.language),i.datatype&&(o.datatype=r.objectify(i.datatype)),o}}if(Array.isArray(i))return i.map(o=>r.objectify(o));if(i===Object(i)){let o={};for(let l of Object.keys(i))o[l]=r.objectify(i[l]);return o}return i}static inScopeVariables(i){const o=[];function l(c){o.find(d=>c.value===d.value)||o.push(c)}function s(c){c.subject.termType==="Variable"&&l(c.subject),c.predicate.termType==="Variable"&&l(c.predicate),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.predicate.termType==="Quad"&&s(c.predicate),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph)}return r.recurseOperation(i,{[e.types.EXPRESSION]:c=>(c.expressionType===e.expressionTypes.AGGREGATE&&c.variable&&l(c.variable),!0),[e.types.EXTEND]:c=>(l(c.variable),!0),[e.types.GRAPH]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.GROUP]:c=>(c.variables.forEach(l),!0),[e.types.PATH]:c=>(c.subject.termType==="Variable"&&l(c.subject),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph),!0),[e.types.PATTERN]:c=>(s(c),!0),[e.types.PROJECT]:c=>(c.variables.forEach(l),!1),[e.types.SERVICE]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.VALUES]:c=>(c.variables.forEach(l),!0)}),o}static recurseOperation(i,o){let l=i,s=!0;const c=o[i.type];if(c&&(s=c(i)),!s)return;let d=f=>r.recurseOperation(f,o);switch(l.type){case e.types.ALT:l.input.map(d);break;case e.types.ASK:d(l.input);break;case e.types.BGP:l.patterns.forEach(d);break;case e.types.CONSTRUCT:d(l.input),l.template.map(d);break;case e.types.DESCRIBE:d(l.input);break;case e.types.DISTINCT:d(l.input);break;case e.types.EXPRESSION:l.expressionType===e.expressionTypes.EXISTENCE&&d(l.input);break;case e.types.EXTEND:d(l.input),d(l.expression);break;case e.types.FILTER:d(l.input),d(l.expression);break;case e.types.FROM:d(l.input);break;case e.types.GRAPH:d(l.input);break;case e.types.GROUP:d(l.input),l.aggregates.forEach(d);break;case e.types.INV:d(l.path);break;case e.types.JOIN:l.input.map(d);break;case e.types.LEFT_JOIN:l.input.map(d),l.expression&&d(l.expression);break;case e.types.LINK:break;case e.types.MINUS:l.input.map(d);break;case e.types.NOP:break;case e.types.NPS:break;case e.types.ONE_OR_MORE_PATH:d(l.path);break;case e.types.ORDER_BY:d(l.input),l.expressions.forEach(d);break;case e.types.PATH:d(l.predicate);break;case e.types.PATTERN:break;case e.types.PROJECT:d(l.input);break;case e.types.REDUCED:d(l.input);break;case e.types.SEQ:l.input.map(d);break;case e.types.SERVICE:d(l.input);break;case e.types.SLICE:d(l.input);break;case e.types.UNION:l.input.map(d);break;case e.types.VALUES:break;case e.types.ZERO_OR_MORE_PATH:d(l.path);break;case e.types.ZERO_OR_ONE_PATH:d(l.path);break;case e.types.COMPOSITE_UPDATE:l.updates.forEach(f=>d(f));break;case e.types.DELETE_INSERT:l.delete&&l.delete.forEach(f=>d(f)),l.insert&&l.insert.forEach(f=>d(f)),l.where&&d(l.where);break;case e.types.LOAD:break;case e.types.CLEAR:break;case e.types.CREATE:break;case e.types.DROP:break;case e.types.ADD:break;case e.types.MOVE:break;case e.types.COPY:break;default:throw new Error(`Unknown Operation type ${l.type}`)}}static mapOperation(i,o,l){let s=i,c=!0,d=!0;l=l||new u.default;const f=o[i.type];if(f){const g=f(i,l);s=g.result,c=g.recurse,d=g.copyMetadata!==!1}let p;if(d&&(s.metadata||i.metadata)&&(p={...s.metadata,...i.metadata}),!c)return p&&(s.metadata=p),s;let h=g=>r.mapOperation(g,o,l);switch(s.type){case e.types.ALT:s=l.createAlt(s.input.map(h));break;case e.types.ASK:s=l.createAsk(h(s.input));break;case e.types.BGP:s=l.createBgp(s.patterns.map(h));break;case e.types.CONSTRUCT:s=l.createConstruct(h(s.input),s.template.map(h));break;case e.types.DESCRIBE:s=l.createDescribe(h(s.input),s.terms);break;case e.types.DISTINCT:s=l.createDistinct(h(s.input));break;case e.types.EXPRESSION:s=r.mapExpression(s,o,l);break;case e.types.EXTEND:s=l.createExtend(h(s.input),s.variable,h(s.expression));break;case e.types.FILTER:s=l.createFilter(h(s.input),h(s.expression));break;case e.types.FROM:s=l.createFrom(h(s.input),[...s.default],[...s.named]);break;case e.types.GRAPH:s=l.createGraph(h(s.input),s.name);break;case e.types.GROUP:s=l.createGroup(h(s.input),[].concat(s.variables),s.aggregates.map(h));break;case e.types.INV:s=l.createInv(h(s.path));break;case e.types.JOIN:s=l.createJoin(s.input.map(h));break;case e.types.LEFT_JOIN:s=l.createLeftJoin(h(s.input[0]),h(s.input[1]),s.expression?h(s.expression):void 0);break;case e.types.LINK:s=l.createLink(s.iri);break;case e.types.MINUS:s=l.createMinus(h(s.input[0]),h(s.input[1]));break;case e.types.NOP:s=l.createNop();break;case e.types.NPS:s=l.createNps([].concat(s.iris));break;case e.types.ONE_OR_MORE_PATH:s=l.createOneOrMorePath(h(s.path));break;case e.types.ORDER_BY:s=l.createOrderBy(h(s.input),s.expressions.map(h));break;case e.types.PATH:s=l.createPath(s.subject,h(s.predicate),s.object,s.graph);break;case e.types.PATTERN:s=l.createPattern(s.subject,s.predicate,s.object,s.graph);break;case e.types.PROJECT:s=l.createProject(h(s.input),[...s.variables]);break;case e.types.REDUCED:s=l.createReduced(h(s.input));break;case e.types.SEQ:s=l.createSeq(s.input.map(h));break;case e.types.SERVICE:s=l.createService(h(s.input),s.name,s.silent);break;case e.types.SLICE:s=l.createSlice(h(s.input),s.start,s.length);break;case e.types.UNION:s=l.createUnion(s.input.map(h));break;case e.types.VALUES:s=l.createValues([].concat(s.variables),s.bindings.map(g=>Object.assign({},g)));break;case e.types.ZERO_OR_MORE_PATH:s=l.createZeroOrMorePath(h(s.path));break;case e.types.ZERO_OR_ONE_PATH:s=l.createZeroOrOnePath(h(s.path));break;case e.types.COMPOSITE_UPDATE:s=l.createCompositeUpdate(s.updates.map(h));break;case e.types.DELETE_INSERT:s=l.createDeleteInsert(s.delete?s.delete.map(h):void 0,s.insert?s.insert.map(h):void 0,s.where?h(s.where):void 0);break;case e.types.LOAD:s=l.createLoad(s.source,s.destination,s.silent);break;case e.types.CLEAR:s=l.createClear(s.source,s.silent);break;case e.types.CREATE:s=l.createCreate(s.source,s.silent);break;case e.types.DROP:s=l.createDrop(s.source,s.silent);break;case e.types.ADD:s=l.createAdd(s.source,s.destination);break;case e.types.MOVE:s=l.createMove(s.source,s.destination);break;case e.types.COPY:s=l.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return p&&(s.metadata=p),s}static mapExpression(i,o,l){let s=i,c=!0;l=l||new u.default;const d=o[i.expressionType];if(d&&({result:s,recurse:c}=d(i,l)),!c)return s;let f=p=>r.mapOperation(p,o,l);switch(i.expressionType){case e.expressionTypes.AGGREGATE:return i.variable?l.createBoundAggregate(i.variable,i.aggregator,f(i.expression),i.distinct,i.separator):l.createAggregateExpression(i.aggregator,f(i.expression),i.distinct,i.separator);case e.expressionTypes.EXISTENCE:return l.createExistenceExpression(i.not,f(i.input));case e.expressionTypes.NAMED:return l.createNamedExpression(i.name,i.args.map(f));case e.expressionTypes.OPERATOR:return l.createOperatorExpression(i.operator,i.args.map(f));case e.expressionTypes.TERM:return l.createTermExpression(i.term);case e.expressionTypes.WILDCARD:return l.createWildcardExpression();default:throw new Error(`Unknown Expression type ${i.expressionType}`)}}static cloneOperation(i){return r.mapOperation(i,{})}static cloneExpression(i){return r.mapExpression(i,{})}static createUniqueVariable(i,o,l){let s=0,c=i;for(;o[c];)c=`${i}${s++}`;return l.variable(c)}static isSimpleTerm(i){return i.termType!==void 0&&i.termType!=="Quad"&&i.termType!=="Wildcard"}static isQuad(i){return i.termType==="Quad"}static hasQuadVariables(i){return(0,n.someTermsNested)(i,o=>o.termType==="Variable")}static isWildcard(i){return i.termType==="Wildcard"}}return hg.default=r,hg}var Vee;function YIe(){if(Vee)return fu;Vee=1;var a=fu&&fu.__createBinding||(Object.create?(function(_,F,D,L){L===void 0&&(L=D);var Q=Object.getOwnPropertyDescriptor(F,D);(!Q||("get"in Q?!F.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return F[D]}}),Object.defineProperty(_,L,Q)}):(function(_,F,D,L){L===void 0&&(L=D),_[L]=F[D]})),e=fu&&fu.__setModuleDefault||(Object.create?(function(_,F){Object.defineProperty(_,"default",{enumerable:!0,value:F})}):function(_,F){_.default=F}),u=fu&&fu.__importStar||function(_){if(_&&_.__esModule)return _;var F={};if(_!=null)for(var D in _)D!=="default"&&Object.prototype.hasOwnProperty.call(_,D)&&a(F,_,D);return e(F,_),F},n=fu&&fu.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(fu,"__esModule",{value:!0});const r=v1(),t=$t(),i=u(W4()),o=n(yP()),l=n(SB()),s=$n().Parser,c=i.types;let d=new Set,f=0,p=!1,h;function g(_,F){F=F||{},h=new o.default(F.dataFactory);let D;if(m(_)){let L=new s(F);L._resetBlanks(),D=L.parse(_)}else D=_;return v(D,F.quads,F.blankToVariable)}fu.default=g;function v(_,F,D){if(d=new Set,f=0,p=!!F,!_.type)return h.createNop();if(_.type!=="query"&&_.type!=="update")throw new Error("Translate only works on complete query or update objects.");let L;if(S(_),_.type==="query"){const Q={type:"group",patterns:_.where||[]};L=j(Q),L=W(_,L)}else _.type==="update"&&(L=pe(_));return D&&(L=ee(L)),L}function m(_){return typeof _=="string"}function T(_){return!!_?.termType}function w(_){return _.subject&&_.predicate&&_.object}function E(_){return _?.termType==="Variable"}function S(_){if(T(_))E(_)&&d.add(`?${_.value}`);else if(Array.isArray(_))for(const F of _)S(F);else if(_&&typeof _=="object")for(let F of Object.keys(_))F.startsWith("?")?d.add(F):F.startsWith("$")&&d.add(`?${F.slice(1)}`),S(_[F])}function N(_){let F={};if(w(_)){const D=[N(_.subject),N(_.predicate),N(_.object),_.graph?N(_.graph):{}];Object.assign(F,...D)}else if(T(_))E(_)&&(F[_.value]=_);else if(_.type==="bgp"){const D=_.triples;Object.assign(F,...D.map(N))}else if(_.type==="path")Object.assign(F,..._.items.map(N));else if(_.type==="group"||_.type==="union"||_.type==="optional")Object.assign(F,..._.patterns.map(N));else if(_.type==="service"||_.type==="graph")Object.assign(F,N(_.name)),Object.assign(F,..._.patterns.map(N));else if(_.type==="bind")Object.assign(F,N(_.variable));else if(_.type==="values"){if(_.values.length>0){const D=Object.keys(_.values[0]).map(L=>h.createTerm(L));Object.assign(F,...D.map(N))}}else if(_.type==="query"&&(_.queryType==="SELECT"||_.queryType==="DESCRIBE")){_.where&&_.variables.some(l.default.isWildcard)&&Object.assign(F,..._.where.map(N));for(const D of _.variables)E(D)?Object.assign(F,N(D)):D.variable&&Object.assign(F,N(D.variable));if(_.queryType==="SELECT"){if(_.group)for(const D of _.group)D.variable&&Object.assign(F,N(D.variable));if(_.values){const D={type:"values",values:_.values};Object.assign(F,N(D))}}}return F}function j(_){if(_.type==="bgp")return O(_);if(_.type==="union")return h.createUnion(_.patterns.map(F=>(F.type!=="group"&&(F={type:"group",patterns:[F]}),j(F))));if(_.type==="graph"){const F={type:"group",patterns:_.patterns};let D=j(F);return p?D=V(D,_.name):D=h.createGraph(D,_.name),D}if(_.type==="values")return ae(_);if(_.type==="query")return v(_,p,!1);if(_.type==="group"){let F=[],D=[];for(let Y of _.patterns)(Y.type==="filter"?F:D).push(Y);let L=D.reduce(G,h.createBgp([])),Q=F.map(Y=>q(Y.expression));return Q.length>0&&(L=h.createFilter(L,Q.reduce((Y,$)=>h.createOperatorExpression("&&",[Y,$])))),L}throw new Error(`Unexpected type: ${_.type}`)}function q(_){if(l.default.isSimpleTerm(_))return h.createTermExpression(_);if(l.default.isQuad(_))return l.default.hasQuadVariables(_)?h.createOperatorExpression("triple",[q(_.subject),q(_.predicate),q(_.object)]):h.createTermExpression(_);if(l.default.isWildcard(_))return h.createWildcardExpression();if("aggregation"in _)return h.createAggregateExpression(_.aggregation,q(_.expression),!!_.distinct,_.separator);if("function"in _)return h.createNamedExpression(_.function,_.args.map(q));if("operator"in _)return _.operator==="exists"||_.operator==="notexists"?h.createExistenceExpression(_.operator==="notexists",j(_.args[0])):((_.operator==="in"||_.operator==="notin")&&(_.args=[_.args[0]].concat(_.args[1])),h.createOperatorExpression(_.operator,_.args.map(q)));throw new Error(`Unknown expression: ${JSON.stringify(_)}`)}function O(_){let F=[],D=[];for(let L of _.triples)if("pathType"in L.predicate){let Q=I(L);for(let Y of Q)Y.type===c.PATH?(F.length>0&&D.push(h.createBgp(F)),F=[],D.push(Y)):F.push(Y)}else F.push(B(L));return F.length>0&&D.push(h.createBgp(F)),D.length===1?D[0]:h.createJoin(D)}function I(_){let F=_.subject,D=A(_.predicate),L=_.object;return P(F,D,L)}function A(_){if(l.default.isSimpleTerm(_)){if(_.termType==="NamedNode")return h.createLink(_);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(_)}`)}if(_.pathType==="^")return h.createInv(A(_.items[0]));if(_.pathType==="!"){let F=[],D=[],L;"pathType"in _.items[0]&&_.items[0].pathType==="|"?L=_.items[0].items:L=_.items;for(let $ of L)if(l.default.isSimpleTerm($))F.push($);else if($.pathType==="^")D.push($.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify($)}`);let Q=h.createNps(F),Y=h.createInv(h.createNps(D));return D.length===0?Q:F.length===0?Y:h.createAlt([Q,Y])}if(_.pathType==="/")return h.createSeq(_.items.map(A));if(_.pathType==="|")return h.createAlt(_.items.map(A));if(_.pathType==="*")return h.createZeroOrMorePath(A(_.items[0]));if(_.pathType==="+")return h.createOneOrMorePath(A(_.items[0]));if(_.pathType==="?")return h.createZeroOrOnePath(A(_.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(_)}`)}function P(_,F,D){if(F.type===c.LINK)return[h.createPattern(_,F.iri,D)];if(F.type===c.INV)return P(D,F.path,_);if(F.type===c.SEQ){let L=_;return l.default.flatten(F.input.map((Q,Y)=>{const $=Y===F.input.length-1?D:C(),ue=P(L,Q,$);return $.termType==="Variable"&&(L=$),ue}))}return[h.createPath(_,F,D)]}function C(){let _=`?var${f++}`;return d.has(_)?C():(d.add(_),h.createTerm(_))}function B(_){if("pathType"in _.predicate)throw new Error("Trying to translate property path to quad.");return h.createPattern(_.subject,_.predicate,_.object,_.graph)}let H=Object.values(c);function V(_,F,D){if(_.type===c.GRAPH){if(D)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");_=V(_.input,_.name)}else if(_.type!==c.SERVICE)if(_.type===c.BGP)_.patterns=_.patterns.map(L=>(D&&(L.subject.equals(F)&&(L.subject=D),L.predicate.equals(F)&&(L.predicate=D),L.object.equals(F)&&(L.object=D)),L.graph.termType==="DefaultGraph"&&(L.graph=F),L));else if(_.type===c.PATH)D&&(_.subject.equals(F)&&(_.subject=D),_.object.equals(F)&&(_.object=D)),_.graph.termType==="DefaultGraph"&&(_.graph=F);else if(_.type===c.PROJECT&&!D)_.variables.some(L=>L.equals(F))||(D=C()),_.input=V(_.input,F,D);else if(_.type===c.EXTEND&&!D)_.variable.equals(F)&&(D=C()),_.input=V(_.input,F,D);else for(let L of Object.keys(_))Array.isArray(_[L])?_[L]=_[L].map(Q=>V(Q,F,D)):H.indexOf(_[L].type)>=0?_[L]=V(_[L],F,D):D&&E(_[L])&&_[L].equals(F)&&(_[L]=D);return _}function G(_,F){if(F.type==="optional"){const D=j({type:"group",patterns:F.patterns});D.type===c.FILTER?_=h.createLeftJoin(_,D.input,D.expression):_=h.createLeftJoin(_,D)}else if(F.type==="minus"){const D=j({type:"group",patterns:F.patterns});_=h.createMinus(_,D)}else if(F.type==="bind")_=h.createExtend(_,F.variable,q(F.expression));else if(F.type==="service"){const D={type:"group",patterns:F.patterns},L=h.createService(j(D),F.name,F.silent);_=Z(_,L)}else{const D=j(F);_=Z(_,D)}return _}function Z(_,F){return _.type===c.BGP&&F.type===c.BGP?_=h.createBgp([..._.patterns,...F.patterns]):_.type===c.BGP&&_.patterns.length===0?_=F:F.type===c.BGP&&F.patterns.length===0||(_=h.createJoin([_,F])),_}function ae(_){let F=(_.values.length===0?[]:Object.keys(_.values[0])).map(h.createTerm.bind(h)),D=_.values.map(L=>{let Q=Object.keys(L);Q=Q.filter($=>L[$]!==void 0);let Y={};for(let $ of Q)Y[$]=L[$];return Y});return h.createValues(F,D)}function W(_,F){const D=_,L=[],Q={};if(D.variables=D.variables&&D.variables.map($=>te($,Q)),D.having=D.having&&D.having.map($=>te($,Q)),D.order=D.order&&D.order.map($=>te($,Q)),D.group||Object.keys(Q).length>0){const $=Object.keys(Q).map(ne=>se(Q[ne],h.createTerm(ne))),ue=[];if(D.group)for(const ne of D.group)if(l.default.isSimpleTerm(ne.expression))ue.push(ne.expression);else{const ce="variable"in ne?ne.variable:C();F=h.createExtend(F,ce,q(ne.expression)),ue.push(ce)}F=h.createGroup(F,ue,$)}if(D.having)for(let $ of D.having)F=h.createFilter(F,q($));_.values&&(F=h.createJoin([F,ae(_)]));let Y=[];if(_.queryType==="SELECT"||_.queryType==="DESCRIBE")if(_.variables.some($=>$&&l.default.isWildcard($)))Y=Object.values(N(_)).sort(($,ue)=>$.value.localeCompare(ue.value));else for(let $ of _.variables)E($)||!("variable"in $)?Y.push($):$.variable&&(Y.push($.variable),L.push($));for(let $ of L)F=h.createExtend(F,$.variable,q($.expression));return D.order&&(F=h.createOrderBy(F,D.order.map($=>{let ue=q($.expression);return $.descending&&(ue=h.createOperatorExpression("desc",[ue])),ue}))),_.queryType==="SELECT"&&(F=h.createProject(F,Y)),D.distinct&&(F=h.createDistinct(F)),D.reduced&&(F=h.createReduced(F)),_.queryType==="CONSTRUCT"?F=h.createConstruct(F,(_.template||[]).map(B)):_.queryType==="ASK"?F=h.createAsk(F):_.queryType==="DESCRIBE"&&(F=h.createDescribe(F,Y)),(D.offset||D.limit)&&(F=h.createSlice(F,D.offset||0,D.limit)),D.from&&(F=h.createFrom(F,D.from.default,D.from.named)),F}function te(_,F){if("type"in _&&_.type==="aggregate"){let D=!1,L;for(let Q of Object.keys(F))if(r(F[Q],_)){L=h.createTerm(Q),D=!0;break}return D||(L=C(),F[(0,t.termToString)(L)]=_),L}return"expression"in _&&_.expression?{..._,expression:te(_.expression,F)}:"args"in _&&_.args?{..._,args:_.args.map(D=>te(D,F))}:_}function se(_,F){if(_.type!=="aggregate"||!_.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(_)}`);const D=q(_);return D.variable=F,D}function pe(_){return _.updates.length===1?le(_.updates[0]):h.createCompositeUpdate(_.updates.map(le))}function le(_){if("type"in _){if(_.type==="load")return Ae(_);if(_.type==="clear"||_.type==="create"||_.type==="drop")return Ie(_);if(_.type==="add"||_.type==="copy"||_.type==="move")return be(_)}else if(_.updateType==="insertdelete"||_.updateType==="deletewhere"||_.updateType==="delete"||_.updateType==="insert")return Ee(_);throw new Error(`Unknown update type ${JSON.stringify(_)}`)}function Ee(_){if(!p)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let F=[],D=[],L;if(_.delete&&(F=l.default.flatten(_.delete.map(Q=>Oe(Q,_.graph)))),_.insert&&(D=l.default.flatten(_.insert.map(Q=>Oe(Q,_.graph)))),_.where&&_.where.length>0){L=j({type:"group",patterns:_.where});const Q=_.using;Q?L=h.createFrom(L,Q.default,Q.named):_.graph&&(L=V(L,_.graph))}else _.updateType==="deletewhere"&&F.length>0&&(L=h.createBgp(F));return h.createDeleteInsert(F.length>0?F:void 0,D.length>0?D:void 0,L)}function Oe(_,F){let D=F;_.type==="graph"&&(D=_.name);let L=_.triples;return D&&(L=L.map(Q=>Object.assign(Q,{graph:D}))),L.map(B)}function Ie(_){let F;switch(l.default.isSimpleTerm(_.graph)?F=_.graph:_.graph.all?F="ALL":_.graph.default?F="DEFAULT":_.graph.named?F="NAMED":F=_.graph.name,_.type){case"clear":return h.createClear(F,_.silent);case"create":return h.createCreate(F,_.silent);case"drop":return h.createDrop(F,_.silent)}}function Ae(_){return h.createLoad(_.source,_.destination,_.silent)}function be(_){const F=_.source.default?"DEFAULT":_.source.name,D=_.destination.default?"DEFAULT":_.destination.name;switch(_.type){case"copy":return h.createCopy(F,D,_.silent);case"move":return h.createMove(F,D,_.silent);case"add":return h.createAdd(F,D,_.silent)}}function ee(_){const F={},D=Array.from(d).reduce((Q,Y)=>(Q[Y]=!0,Q),{});return l.default.mapOperation(_,{[i.types.DELETE_INSERT]:Q=>({result:h.createDeleteInsert(Q.delete,Q.insert,Q.where&&ee(Q.where)),recurse:!1}),[i.types.PATH]:(Q,Y)=>({result:Y.createPath(L(Q.subject),Q.predicate,L(Q.object),L(Q.graph)),recurse:!1}),[i.types.PATTERN]:(Q,Y)=>({result:Y.createPattern(L(Q.subject),L(Q.predicate),L(Q.object),L(Q.graph)),recurse:!1}),[i.types.CONSTRUCT]:Q=>({result:h.createConstruct(ee(Q.input),Q.template),recurse:!1})});function L(Q){if(Q.termType==="BlankNode"){let Y=F[Q.value];return Y||(Y=l.default.createUniqueVariable(Q.value,D,h.dataFactory),D[Y.value]=!0,F[Q.value]=Y),Y}return Q}}return fu}var $a={},Pf={},ir={},Hee;function ZIe(){if(Hee)return ir;Hee=1,Object.defineProperty(ir,"__esModule",{value:!0}),ir.isTermGrounded=ir.termToSignature=ir.quadToSignature=ir.sha1hex=ir.hashTerm=ir.hashTerms=ir.getGraphBlankNodes=ir.uniqGraph=ir.deindexGraph=ir.indexGraph=ir.getQuadsWithoutBlankNodes=ir.getQuadsWithBlankNodes=ir.hasValue=ir.hashValues=ir.getBijectionInner=ir.getBijection=ir.isomorphic=void 0;const a=ic(),e=$t(),u=Yr();function n(S,N){return!!r(S,N)}ir.isomorphic=n;function r(S,N){const j=d(c(S)),q=d(c(N));if(Object.keys(j).length!==Object.keys(q).length)return null;for(const C in j)if(j[C]!==q[C])return null;const O=p(s(S)),I=p(s(N)),A=h(S),P=h(N);return t(O,I,A,P)}ir.getBijection=r;function t(S,N,j,q,O,I){O||(O={}),I||(I={});const[A,P]=g(S,j,O),[C,B]=g(N,q,I);if(Object.keys(A).length!==Object.keys(C).length)return null;for(const V in A)if(!l(C,A[V]))return null;let H={};for(const V of j){const G=e.termToString(V),Z=P[G];for(const ae in B)if(B[ae]===Z){H[G]=ae,delete B[ae];break}}if(!i(Object.keys(H).sort(),j.map(e.termToString).sort())||!i(o(H).sort(),q.map(e.termToString).sort())){H=null;for(const V of j){const G=e.termToString(V);if(!A[G])for(const Z of q){const ae=e.termToString(Z);if(!C[ae]&&P[G]===B[ae]){const W=m(G);H=t(S,N,j,q,Object.assign(Object.assign({},A),{[G]:W}),Object.assign(Object.assign({},C),{[ae]:W}))}}}}return H}ir.getBijectionInner=t;function i(S,N){if(S.length!==N.length)return!1;for(let j=S.length;j--;)if(S[j]!==N[j])return!1;return!0}function o(S){const N=[];for(const j in S)N.push(S[j]);return N}ir.hashValues=o;function l(S,N){for(const j in S)if(S[j]===N)return!0;return!1}ir.hasValue=l;function s(S){return S.filter(N=>u.someTerms(N,j=>j.termType==="BlankNode"||j.termType==="Quad"&&u.getTermsNested(j).some(q=>q.termType==="BlankNode")))}ir.getQuadsWithBlankNodes=s;function c(S){return S.filter(N=>u.everyTerms(N,j=>j.termType!=="BlankNode"&&!(j.termType==="Quad"&&u.getTermsNested(j).some(q=>q.termType==="BlankNode"))))}ir.getQuadsWithoutBlankNodes=c;function d(S){const N={};for(const j of S)N[JSON.stringify(e.quadToStringQuad(j))]=!0;return N}ir.indexGraph=d;function f(S){return Object.keys(S).map(N=>e.stringQuadToQuad(JSON.parse(N)))}ir.deindexGraph=f;function p(S){return f(d(S))}ir.uniqGraph=p;function h(S){return u.uniqTerms(S.map(N=>u.getBlankNodes(u.getTermsNested(N))).reduce((N,j)=>N.concat(j),[]))}ir.getGraphBlankNodes=h;function g(S,N,j){const q=Object.assign({},j),O={};let I=!0;for(;I;){const A=Object.keys(q).length;for(const C of N){const B=e.termToString(C);if(!q[B]){const[H,V]=v(C,S,q);H&&(q[B]=V),O[B]=V}}const P={};for(const C in O){const B=O[C];P[B]===void 0?P[B]=C:P[B]=!1}for(const C in P){const B=P[C];B&&(q[B]=C)}I=A!==Object.keys(q).length}return[q,O]}ir.hashTerms=g;function v(S,N,j){const q=[];let O=!0;for(const A of N){const P=u.getTermsNested(A);if(P.some(C=>C.equals(S))){q.push(T(A,j,S));for(const C of P)!E(C,j)&&!C.equals(S)&&(O=!1)}}const I=m(q.sort().join(""));return[O,I]}ir.hashTerm=v;function m(S){return a.sha1().update(S).digest("hex")}ir.sha1hex=m;function T(S,N,j){return u.getTerms(S).map(q=>w(q,N,j)).join("|")}ir.quadToSignature=T;function w(S,N,j){return S.equals(j)?"@self":S.termType==="BlankNode"?N[e.termToString(S)]||"@blank":S.termType==="Quad"?`<${T(S,N,j)}>`:e.termToString(S)}ir.termToSignature=w;function E(S,N){return S.termType!=="BlankNode"&&!(S.termType==="Quad"&&u.getTermsNested(S).some(j=>!E(j,N)))||!!N[e.termToString(S)]}return ir.isTermGrounded=E,ir}var kee;function eDe(){return kee||(kee=1,(function(a){var e=Pf&&Pf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t),Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[t]}})}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Pf&&Pf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(ZIe(),a)})(Pf)),Pf}var zee;function tDe(){if(zee)return $a;zee=1;var a=$a&&$a.__createBinding||(Object.create?(function(R,k,K,de){de===void 0&&(de=K);var ge=Object.getOwnPropertyDescriptor(k,K);(!ge||("get"in ge?!k.__esModule:ge.writable||ge.configurable))&&(ge={enumerable:!0,get:function(){return k[K]}}),Object.defineProperty(R,de,ge)}):(function(R,k,K,de){de===void 0&&(de=K),R[de]=k[K]})),e=$a&&$a.__setModuleDefault||(Object.create?(function(R,k){Object.defineProperty(R,"default",{enumerable:!0,value:k})}):function(R,k){R.default=k}),u=$a&&$a.__importStar||function(R){if(R&&R.__esModule)return R;var k={};if(R!=null)for(var K in R)K!=="default"&&Object.prototype.hasOwnProperty.call(R,K)&&a(k,R,K);return e(k,R),k},n=$a&&$a.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty($a,"__esModule",{value:!0}),$a.toSparqlJs=$a.toSparql=void 0;const r=eDe(),t=$t(),i=$n(),o=u(W4()),l=n(yP()),s=n(SB()),c=o.types,d=o.expressionTypes;let f;const p=new l.default;function h(R,k={}){return new i.Generator(k).stringify(g(R))}$a.toSparql=h;function g(R){v(),R=Le(R);let k=m(R);return k.type==="group"?k.patterns[0]:k}$a.toSparqlJs=g;function v(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function m(R){switch(R.type!==c.EXTEND&&R.type!==c.ORDER_BY&&R.type!==c.GRAPH&&(f.project=!1),R.type){case c.EXPRESSION:return T(R);case c.ASK:return Ae(R,c.ASK);case c.BGP:return C(R);case c.CONSTRUCT:return B(R);case c.DESCRIBE:return Ae(R,c.DESCRIBE);case c.DISTINCT:return H(R);case c.EXTEND:return V(R);case c.FROM:return G(R);case c.FILTER:return Z(R);case c.GRAPH:return ae(R);case c.GROUP:return W(R);case c.JOIN:return te(R);case c.LEFT_JOIN:return se(R);case c.MINUS:return pe(R);case c.NOP:return{};case c.ORDER_BY:return le(R);case c.PATH:return Ee(R);case c.PATTERN:return Oe(R);case c.PROJECT:return Ae(R,c.PROJECT);case c.REDUCED:return ee(R);case c.SERVICE:return _(R);case c.SLICE:return F(R);case c.UNION:return D(R);case c.VALUES:return L(R);case c.COMPOSITE_UPDATE:return Ce(R);case c.DELETE_INSERT:return Ve(R);case c.LOAD:return Ke(R);case c.CLEAR:return Ye(R);case c.CREATE:return oe(R);case c.DROP:return X(R);case c.ADD:return he(R);case c.MOVE:return ve(R);case c.COPY:return ye(R)}throw new Error(`Unknown Operation type ${R.type}`)}function T(R){switch(R.expressionType){case d.AGGREGATE:return S(R);case d.EXISTENCE:return N(R);case d.NAMED:return j(R);case d.OPERATOR:return q(R);case d.TERM:return O(R);case d.WILDCARD:return I(R)}throw new Error(`Unknown Expression Operation type ${R.expressionType}`)}function w(R){switch(R.type){case c.ALT:return Q(R);case c.INV:return Y(R);case c.LINK:return $(R);case c.NPS:return ue(R);case c.ONE_OR_MORE_PATH:return ne(R);case c.SEQ:return ce(R);case c.ZERO_OR_MORE_PATH:return Se(R);case c.ZERO_OR_ONE_PATH:return xe(R)}throw new Error(`Unknown Path type ${R.type}`)}function E(R){return(0,t.termToString)(R)}function S(R){const k={expression:T(R.expression),type:"aggregate",aggregation:R.aggregator,distinct:R.distinct};return R.separator&&(k.separator=R.separator),k}function N(R){return{type:"operation",operator:R.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([m(R.input)])}]}}function j(R){return{type:"functionCall",function:R.name,args:R.args.map(T)}}function q(R){if(R.operator==="desc"){const K={expression:T(R.args[0])};return K.descending=!0,K}const k={type:"operation",operator:R.operator,args:R.args.map(T)};return(k.operator==="in"||k.operator==="notin")&&(k.args=[k.args[0]].concat([k.args.slice(1)])),k}function O(R){return R.term}function I(R){return R.wildcard}function A(R){return Array.isArray(R)?R.length===1?R[0]:{type:"group",patterns:R}:R}function P(R){return R}function C(R){let k=R.patterns.map(Oe);return k.length===0?null:{type:"bgp",triples:k}}function B(R){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:R.template.map(Oe),where:s.default.flatten([m(R.input)])}}function H(R){let k=m(R.input);return k.patterns[0].distinct=!0,k}function V(R){return f.project?(f.extend.push(R),m(R.input)):s.default.flatten([m(R.input),{type:"bind",variable:R.variable,expression:T(R.expression)}])}function G(R){const k=m(R.input);let K=k;return k.type==="group"&&(K=k.patterns[0]),K.from={default:R.default,named:R.named},k}function Z(R){return{type:"group",patterns:s.default.flatten([m(R.input),{type:"filter",expression:T(R.expression)}])}}function ae(R){return{type:"graph",patterns:s.default.flatten([m(R.input)]),name:R.name}}function W(R){const k=m(R.input),K=R.aggregates.map(P);return f.aggregates.push(...K),f.group.push(...R.variables),k}function te(R){return s.default.flatten(R.input.map(m)).reduce((K,de)=>(de.type!=="bgp"||K.length==0||K[K.length-1].type!=="bgp"?K.push(de):K[K.length-1].triples.push(...de.triples),K),[])}function se(R){const k={type:"optional",patterns:[m(R.input[1])]};return R.expression&&k.patterns.push({type:"filter",expression:T(R.expression)}),k.patterns=s.default.flatten(k.patterns),s.default.flatten([m(R.input[0]),k])}function pe(R){let k=m(R.input[1]);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),s.default.flatten([m(R.input[0]),{type:"minus",patterns:k}])}function le(R){return f.order.push(...R.expressions),m(R.input)}function Ee(R){return{type:"bgp",triples:[{subject:R.subject,predicate:w(R.predicate),object:R.object}]}}function Oe(R){return{subject:R.subject,predicate:R.predicate,object:R.object}}function Ie(R,k){let K=s.default.isSimpleTerm(R)?E(R):R;if(typeof K=="string"){if(k[K])return k[K]}else if(Array.isArray(R))R=R.map(de=>Ie(de,k));else for(let de of Object.keys(R))R[de]=Ie(R[de],k);return R}function Ae(R,k){const K={type:"query",prefixes:{}},de=K;let ge;k===c.PROJECT?(K.queryType="SELECT",ge=R.variables):k===c.ASK?K.queryType="ASK":k===c.DESCRIBE&&(K.queryType="DESCRIBE",ge=R.terms);const Ue=f.extend,je=f.group,ze=f.aggregates,at=f.order;v(),f.project=!0;let fe=s.default.flatten([m(R.input)]);fe.length===1&&fe[0].type==="group"&&(fe=fe[0].patterns),K.where=fe;let Te={};for(let Me of f.aggregates)Te[E(Me.variable)]=T(Me);let qe={};for(let Me=f.extend.length-1;Me>=0;--Me){let st=f.extend[Me];qe[E(st.variable)]=Ie(T(st.expression),Te)}f.group.length>0&&(de.group=f.group.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return{expression:Me}})),f.order.length>0&&(de.order=f.order.map(m).map(Me=>Me.descending?Me:{expression:Me})),ge&&(de.variables=ge.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return Me}),de.variables.length===0&&(de.variables=[new i.Wildcard]));const it=Object.entries(qe);if(it.length>0){de.where=de.where||[];for(const[Me,st]of it)de.where.push({type:"bind",variable:(0,t.stringToTerm)(Me),expression:st})}if(K.where.length>0&&K.where[K.where.length-1].type==="filter"){const Me=K.where[K.where.length-1];be(Me,Object.keys(Te))&&(de.having=s.default.flatten([Ie(Me.expression,Te)]),K.where.splice(-1))}return f.extend=Ue,f.group=je,f.aggregates=ze,f.order=at,{type:"group",patterns:[de]}}function be(R,k){return s.default.isSimpleTerm(R)?k.indexOf(E(R))>=0:Array.isArray(R)?R.some(K=>be(K,k)):R===Object(R)?Object.keys(R).some(K=>be(R[K],k)):k.indexOf(R)>=0}function ee(R){let k=m(R.input);return k.patterns[0].reduced=!0,k}function _(R){let k=m(R.input);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),{type:"service",name:R.name,silent:R.silent,patterns:k}}function F(R){let k=m(R.input),K=k;return k.type&&k.type==="group"&&(K=k.patterns[0]),R.start!==0&&(K.offset=R.start),R.length!==void 0&&(K.limit=R.length),k}function D(R){return{type:"union",patterns:R.input.map(m).map(A)}}function L(R){return{type:"values",values:R.bindings.map(k=>{let K={};for(let de of R.variables){let ge=`?${de.value}`;k[ge]?K[ge]=k[ge]:K[ge]=void 0}return K})}}function Q(R){const k=R.input.map(w);return k.every(K=>"pathType"in K&&K.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(k.map(K=>K.items))}]}:{type:"path",pathType:"|",items:k}}function Y(R){if(R.path.type===c.NPS){const k=R.path.iris.map(K=>({type:"path",pathType:"^",items:[K]}));return k.length<=1?{type:"path",pathType:"!",items:k}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:k}]}}return{type:"path",pathType:"^",items:[w(R.path)]}}function $(R){return R.iri}function ue(R){return R.iris.length<=1?{type:"path",pathType:"!",items:R.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:R.iris}]}}function ne(R){return{type:"path",pathType:"+",items:[w(R.path)]}}function ce(R){return{type:"path",pathType:"/",items:R.input.map(w)}}function Se(R){return{type:"path",pathType:"*",items:[w(R.path)]}}function xe(R){return{type:"path",pathType:"?",items:[w(R.path)]}}function Ce(R){const k=R.updates.map(K=>m(K).updates[0]);return{prefixes:{},type:"update",updates:k}}function Ve(R){var k;let K=R.where,de;if(K&&K.type===c.FROM){let Ue=K;K=Ue.input,de={default:Ue.default,named:Ue.named}}const ge=[{updateType:"insertdelete",delete:Ne(R.delete||[]),insert:Ne(R.insert||[])}];if(de&&(ge[0].using=de),!K||K.type===c.BGP&&K.patterns.length===0)ge[0].where=[];else{const Ue=[];let je=m(Pe(K,Ue));if(je.type==="group"?ge[0].where=je.patterns:ge[0].where=[je],Ue.length>0){if(Ue.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((k=Ue[0])===null||k===void 0?void 0:k.value)!==""&&(ge[0].where=[{type:"graph",patterns:ge[0].where,name:Ue[0]}])}}return!R.delete&&!R.where?(ge[0].updateType="insert",delete ge[0].delete,delete ge[0].where):!R.insert&&!R.where?(delete ge[0].insert,delete ge[0].where,R.delete.some(Ue=>Ue.subject.termType==="Variable"||Ue.predicate.termType==="Variable"||Ue.object.termType==="Variable")?ge[0].updateType="deletewhere":ge[0].updateType="delete"):!R.insert&&R.where&&R.where.type==="bgp"&&(0,r.isomorphic)(R.delete,R.where.patterns)&&(delete ge[0].where,ge[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:ge}}function Ke(R){const k=[{type:"load",silent:!!R.silent,source:R.source}];return R.destination&&(k[0].destination=R.destination),{prefixes:{},type:"update",updates:k}}function Ye(R){return J(R,"clear")}function oe(R){return J(R,"create")}function X(R){return J(R,"drop")}function J(R,k){const K=[{type:k,silent:!!R.silent}];return R.source==="DEFAULT"?K[0].graph={default:!0}:R.source==="NAMED"?K[0].graph={named:!0}:R.source==="ALL"?K[0].graph={all:!0}:K[0].graph={type:"graph",name:R.source},{prefixes:{},type:"update",updates:K}}function he(R){return re(R,"add")}function ve(R){return re(R,"move")}function ye(R){return re(R,"copy")}function re(R,k){const K=[{type:k,silent:!!R.silent}];return K[0].source=R.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.source},K[0].destination=R.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.destination},{prefixes:{},type:"update",updates:K}}function Ne(R){if(!R)return[];const k={};return R.forEach(K=>{const de=K.graph.value;k[de]||(k[de]=[]),k[de].push(K)}),Object.keys(k).map(K=>K===""?{type:"bgp",triples:k[K].map(Oe)}:{type:"graph",triples:k[K].map(Oe),name:k[K][0].graph})}function Le(R){return Pe(R,[])}function Pe(R,k){if(Array.isArray(R))return R.map(je=>Pe(je,k));if(!R.type||R.type===c.DELETE_INSERT)return R;if((R.type===c.PATTERN||R.type===c.PATH)&&R.graph)return k.push(R.graph),R.graph.name!==""?R.type===c.PATTERN?p.createPattern(R.subject,R.predicate,R.object):p.createPath(R.subject,R.predicate,R.object):R;const K={},de={},ge={};for(let je of Object.keys(R)){const ze=[];if(K[je]=Pe(R[je],ze),ze.length>0){de[je]=ze;for(const at of ze)ge[at.value]=at}}const Ue=Object.keys(ge);if(Ue.length>0)if(Ue.length===1&&![c.PROJECT,c.SERVICE].includes(R.type))k.push(ge[Ue[0]]);else{if(R.type===c.BGP)return Fe(R,de.patterns);for(let je of Object.keys(de)){const ze=K[je];Array.isArray(ze)?K[je]=ze.map((at,fe)=>de[je][0].value===""?at:p.createGraph(at,de[je][fe])):de[je][0].value!==""&&(K[je]=p.createGraph(ze,de[je][0]))}}return K}function Fe(R,k){var K;const de={};for(let je=0;je<R.patterns.length;++je){const ze=R.patterns[je],at=k[je].value;de[at]=(K=de[at])!==null&&K!==void 0?K:{patterns:[],graph:k[je]},de[at].patterns.push(ze)}let ge=[];for(const[je,{patterns:ze,graph:at}]of Object.entries(de)){const fe=p.createBgp(ze);ge.push(je===""?fe:p.createGraph(fe,at))}let Ue=ge[0];for(let je=1;je<ge.length;++je)Ue=p.createJoin([Ue,ge[je]]);return Ue}return $a}var Gee;function rDe(){return Gee||(Gee=1,(function(a){var e=ku&&ku.__createBinding||(Object.create?(function(c,d,f,p){p===void 0&&(p=f);var h=Object.getOwnPropertyDescriptor(d,f);(!h||("get"in h?!d.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(c,p,h)}):(function(c,d,f,p){p===void 0&&(p=f),c[p]=d[f]})),u=ku&&ku.__setModuleDefault||(Object.create?(function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}):function(c,d){c.default=d}),n=ku&&ku.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&e(d,c,f);return u(d,c),d},r=ku&&ku.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.toSparqlJs=a.toSparql=a.Factory=a.Algebra=a.translate=void 0;const t=r(YIe());a.translate=t.default;const i=n(W4());a.Algebra=i;const o=r(yP());a.Factory=o.default;const l=tDe();Object.defineProperty(a,"toSparql",{enumerable:!0,get:function(){return l.toSparql}}),Object.defineProperty(a,"toSparqlJs",{enumerable:!0,get:function(){return l.toSparqlJs}});const s=r(SB());a.Util=s.default})(ku)),ku}var $ee;function nDe(){if($ee)return fT;$ee=1,Object.defineProperty(fT,"__esModule",{value:!0}),fT.ActorRdfJoinEntriesSortTraversalZeroKnowledge=void 0;const a=WIe(),e=lt(),u=De(),n=Yr(),r=rDe();let t=class Xc extends a.ActorRdfJoinEntriesSort{constructor(o){super(o)}static getPatternNonVocabUris(o){let l;const s=[];return o.type==="pattern"?s.push(o.predicate):r.Util.recurseOperation(o,{link(c){return s.push(c.iri),!1},nps(c){for(const d of c.iris)s.push(d);return!1}}),s.some(c=>c.termType==="NamedNode"&&c.value==="http://www.w3.org/1999/02/22-rdf-syntax-ns#type")?l=[o.subject,o.graph]:l=[o.subject,o.object,o.graph],(0,n.getNamedNodes)(l)}static getSourceUri(o){const l=o.value,s=l.indexOf("#");return s>0?l.slice(0,s):l}static getScoreSeedNonVocab(o,l){return Xc.getPatternNonVocabUris(o).map(s=>Xc.getSourceUri(s)).filter(s=>l.includes(s)).length}static getScoreSelectivity(o){const l=o.type==="pattern"?(0,n.getTerms)(o):[o.subject,o.object,o.graph];return n.QUAD_TERM_NAMES.length-(0,n.getVariables)(l).length}static sortJoinEntries(o,l){return[...o].sort((s,c)=>{if((s.operation.type===r.Algebra.types.PATTERN||s.operation.type===r.Algebra.types.PATH)&&(c.operation.type===r.Algebra.types.PATTERN||c.operation.type===r.Algebra.types.PATH)){const d=Xc.getScoreSeedNonVocab(c.operation,l)-Xc.getScoreSeedNonVocab(s.operation,l);return d===0?Xc.getScoreSelectivity(c.operation)-Xc.getScoreSelectivity(s.operation):d}return s.operation.type===r.Algebra.types.PATTERN?-1:1})}async test(o){return(0,u.passTest)({accuracy:1})}async run(o){const l=[],s=o.context.get(e.KeysQueryOperation.querySources);if(s)for(const c of s){const d=c.source.referenceValue;typeof d=="string"&&l.push(d)}return{entries:Xc.sortJoinEntries(o.entries,l)}}};return fT.ActorRdfJoinEntriesSortTraversalZeroKnowledge=t,fT}var Xee;function EB(){return Xee||(Xee=1,(function(a){var e=Df&&Df.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Df&&Df.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(nDe(),a)})(Df)),Df}var jf={},Mf={},Cf={},hT={},Kee;function aDe(){if(Kee)return hT;Kee=1,Object.defineProperty(hT,"__esModule",{value:!0}),hT.ActorRdfJoinSelectivity=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return hT.ActorRdfJoinSelectivity=e,hT}var Jee;function iDe(){return Jee||(Jee=1,(function(a){var e=Cf&&Cf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Cf&&Cf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(aDe(),a)})(Cf)),Cf}var Wee;function uDe(){if(Wee)return Mf;Wee=1,Object.defineProperty(Mf,"__esModule",{value:!0}),Mf.JoinTypes=Mf.ActorRdfJoinSelectivityVariableCounting=void 0;const a=iDe(),e=De(),u=Ut();let n=class Gm extends a.ActorRdfJoinSelectivity{constructor(i){super(i)}async test(i){return(0,e.passTest)({accuracy:.5})}static getPatternCost(i){let o=1;return i.subject.termType==="Variable"&&(o+=4),(i.predicate.termType==="Variable"||i.type===u.Algebra.types.PATH)&&(o+=1),i.object.termType==="Variable"&&(o+=2),i.graph.termType==="Variable"&&(o+=1),o/9}static getJoinTypes(i,o){const l=[];return i.subject.termType==="Variable"?(i.subject.equals(o.subject)&&l.push(r.unboundSS),o.type==="pattern"&&i.subject.equals(o.predicate)&&l.push(r.unboundSP),i.subject.equals(o.object)&&l.push(r.unboundSO),i.subject.equals(o.graph)&&l.push(r.unboundSG)):(i.subject.equals(o.subject)&&l.push(r.boundSS),o.type==="pattern"&&i.subject.equals(o.predicate)&&l.push(r.boundSP),i.subject.equals(o.object)&&l.push(r.boundSO),i.subject.equals(o.graph)&&l.push(r.boundSG)),i.type==="pattern"&&(i.predicate.termType==="Variable"?(i.predicate.equals(o.subject)&&l.push(r.unboundPS),o.type==="pattern"&&i.predicate.equals(o.predicate)&&l.push(r.unboundPP),i.predicate.equals(o.object)&&l.push(r.unboundPO),i.predicate.equals(o.graph)&&l.push(r.unboundPG)):(i.predicate.equals(o.subject)&&l.push(r.boundPS),o.type==="pattern"&&i.predicate.equals(o.predicate)&&l.push(r.boundPP),i.predicate.equals(o.object)&&l.push(r.boundPO),i.predicate.equals(o.graph)&&l.push(r.boundPG))),i.object.termType==="Variable"?(i.object.equals(o.subject)&&l.push(r.unboundOS),o.type==="pattern"&&i.object.equals(o.predicate)&&l.push(r.unboundOP),i.object.equals(o.object)&&l.push(r.unboundOO),i.object.equals(o.graph)&&l.push(r.unboundOG)):(i.object.equals(o.subject)&&l.push(r.boundOS),o.type==="pattern"&&i.object.equals(o.predicate)&&l.push(r.boundOP),i.object.equals(o.object)&&l.push(r.boundOO),i.object.equals(o.graph)&&l.push(r.boundOG)),i.graph.termType==="Variable"?(i.graph.equals(o.subject)&&l.push(r.unboundGS),o.type==="pattern"&&i.graph.equals(o.predicate)&&l.push(r.unboundGP),i.graph.equals(o.object)&&l.push(r.unboundGO),i.graph.equals(o.graph)&&l.push(r.unboundGG)):(i.graph.equals(o.subject)&&l.push(r.boundGS),o.type==="pattern"&&i.graph.equals(o.predicate)&&l.push(r.boundGP),i.graph.equals(o.object)&&l.push(r.boundGO),i.graph.equals(o.graph)&&l.push(r.boundGG)),l}static getOperationsPairwiseJoinCost(i,o){let l=Gm.MAX_PAIRWISE_COST;for(const s of Gm.getJoinTypes(i,o))switch(s){case r.boundSS:l-=4;break;case r.boundSP:l-=6;break;case r.boundSO:l-=2;break;case r.boundSG:l-=6;break;case r.boundPS:l-=6;break;case r.boundPP:return 1;case r.boundPO:l-=6;break;case r.boundPG:l-=6;break;case r.boundOS:l-=2;break;case r.boundOP:l-=6;break;case r.boundOO:l-=2;break;case r.boundOG:l-=6;break;case r.boundGS:l-=6;break;case r.boundGP:l-=6;break;case r.boundGO:l-=6;break;case r.boundGG:l-=6;break;case r.unboundSS:l-=2;break;case r.unboundSP:l-=3;break;case r.unboundSO:l-=1;break;case r.unboundSG:l-=3;break;case r.unboundPS:l-=3;break;case r.unboundPP:l-=3;break;case r.unboundPO:l-=3;break;case r.unboundPG:l-=3;break;case r.unboundOS:l-=1;break;case r.unboundOP:l-=3;break;case r.unboundOO:l-=1;break;case r.unboundOG:l-=3;break;case r.unboundGS:l-=3;break;case r.unboundGP:l-=3;break;case r.unboundGO:l-=3;break;case r.unboundGG:l-=3;break}return l/Gm.MAX_PAIRWISE_COST}static getOperationsJoinCost(i){const o=[];for(const c of i)u.Util.recurseOperation(c,{[u.Algebra.types.PATTERN](d){return o.push(d),!1},[u.Algebra.types.PATH](d){return o.push(d),!1}});let l=0,s=0;for(const c of o)for(const d of o)c!==d&&(l+=Gm.getOperationsPairwiseJoinCost(c,d),s++);return s===0?1:l/s*o.reduce((c,d)=>c*Gm.getPatternCost(d),1)}async run(i){return i.entries.length<=1?{selectivity:1}:{selectivity:Gm.getOperationsJoinCost(i.entries.map(o=>o.operation))}}};Mf.ActorRdfJoinSelectivityVariableCounting=n,n.MAX_PAIRWISE_COST=82;var r;return(function(t){t[t.boundSS=0]="boundSS",t[t.boundSP=1]="boundSP",t[t.boundSO=2]="boundSO",t[t.boundSG=3]="boundSG",t[t.boundPS=4]="boundPS",t[t.boundPP=5]="boundPP",t[t.boundPO=6]="boundPO",t[t.boundPG=7]="boundPG",t[t.boundOS=8]="boundOS",t[t.boundOP=9]="boundOP",t[t.boundOO=10]="boundOO",t[t.boundOG=11]="boundOG",t[t.boundGS=12]="boundGS",t[t.boundGP=13]="boundGP",t[t.boundGO=14]="boundGO",t[t.boundGG=15]="boundGG",t[t.unboundSS=16]="unboundSS",t[t.unboundSP=17]="unboundSP",t[t.unboundSO=18]="unboundSO",t[t.unboundSG=19]="unboundSG",t[t.unboundPS=20]="unboundPS",t[t.unboundPP=21]="unboundPP",t[t.unboundPO=22]="unboundPO",t[t.unboundPG=23]="unboundPG",t[t.unboundOS=24]="unboundOS",t[t.unboundOP=25]="unboundOP",t[t.unboundOO=26]="unboundOO",t[t.unboundOG=27]="unboundOG",t[t.unboundGS=28]="unboundGS",t[t.unboundGP=29]="unboundGP",t[t.unboundGO=30]="unboundGO",t[t.unboundGG=31]="unboundGG"})(r||(Mf.JoinTypes=r={})),Mf}var Yee;function AB(){return Yee||(Yee=1,(function(a){var e=jf&&jf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=jf&&jf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(uDe(),a)})(jf)),jf}var Lf={},yT={},qf={},mT={},Zee;function oDe(){if(Zee)return mT;Zee=1,Object.defineProperty(mT,"__esModule",{value:!0}),mT.ActorRdfMetadata=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return mT.ActorRdfMetadata=e,mT}var ete;function H2e(){return ete||(ete=1,(function(a){var e=qf&&qf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=qf&&qf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(oDe(),a)})(qf)),qf}var tte;function sDe(){if(tte)return yT;tte=1,Object.defineProperty(yT,"__esModule",{value:!0}),yT.ActorRdfMetadataPrimaryTopic=void 0;const a=H2e(),e=De(),u=Nr();let n=class extends a.ActorRdfMetadata{constructor(t){super(t)}async test(t){return t.triples?(0,e.failTest)("This actor only supports non-triple quad streams."):(0,e.passTestVoid)()}async run(t){const i=new u.Readable({objectMode:!0}),o=new u.Readable({objectMode:!0}),l=()=>{i._read=o._read=()=>{},t.quads.on("error",f=>{i.emit("error",f),o.emit("error",f)});const s={};let c;const d={};t.quads.on("data",f=>{f.predicate.value==="http://rdfs.org/ns/void#subset"&&f.object.value===t.url?c=f.subject.value:f.predicate.value==="http://xmlns.com/foaf/0.1/primaryTopic"&&(d[f.object.value]=f.subject.value);let p=s[f.graph.value];p||(p=s[f.graph.value]=[]),p.push(f)}),t.quads.on("end",()=>{const f=c?d[c]:void 0;for(const p in s)if(p===f){for(const h of s[p])o.push(h);if(this.metadataToData)for(const h of s[p])i.push(h)}else{for(const h of s[p])i.push(h);if(!f&&this.dataToMetadataOnInvalidMetadataGraph)for(const h of s[p])o.push(h)}i.push(null),o.push(null)})};return i._read=o._read=()=>{l()},{data:i,metadata:o}}};return yT.ActorRdfMetadataPrimaryTopic=n,yT}var rte;function OB(){return rte||(rte=1,(function(a){var e=Lf&&Lf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Lf&&Lf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(sDe(),a)})(Lf)),Lf}var Bf={},bT={},nte;function cDe(){if(nte)return bT;nte=1,Object.defineProperty(bT,"__esModule",{value:!0}),bT.ActorRdfMetadataAll=void 0;const a=H2e(),e=De(),u=Nr();let n=class extends a.ActorRdfMetadata{constructor(t){super(t)}async test(t){return(0,e.passTestVoid)()}async run(t){const i=new u.Readable({objectMode:!0}),o=new u.Readable({objectMode:!0});t.quads.on("error",s=>{i.emit("error",s),o.emit("error",s)}),t.quads.on("end",()=>{i.push(null),o.push(null)});const l=i._read=o._read=s=>{for(;s>0;){const c=t.quads.read();if(c===null)return t.quads.once("readable",()=>l(s));s--,i.push(c),o.push(c)}};return{data:i,metadata:o}}};return bT.ActorRdfMetadataAll=n,bT}var ate;function xB(){return ate||(ate=1,(function(a){var e=Bf&&Bf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Bf&&Bf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(cDe(),a)})(Bf)),Bf}var Uf={},gT={},Qf={},vT={},ite;function lDe(){if(ite)return vT;ite=1,Object.defineProperty(vT,"__esModule",{value:!0}),vT.ActorRdfMetadataAccumulate=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return vT.ActorRdfMetadataAccumulate=e,vT}var ute;function RB(){return ute||(ute=1,(function(a){var e=Qf&&Qf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Qf&&Qf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(lDe(),a)})(Qf)),Qf}var ote;function dDe(){if(ote)return gT;ote=1,Object.defineProperty(gT,"__esModule",{value:!0}),gT.ActorRdfMetadataAccumulateCardinality=void 0;const a=RB(),e=De();let u=class extends a.ActorRdfMetadataAccumulate{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}async run(r){if(r.mode==="initialize")return{metadata:{cardinality:{type:"exact",value:0}}};const t={...r.accumulatedMetadata.cardinality};if(t.dataset){if(r.accumulatedMetadata.defaultGraph===t.dataset&&t.dataset!==r.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:r.appendingMetadata.cardinality}};if(r.appendingMetadata.cardinality.dataset){if(t.dataset!==r.appendingMetadata.cardinality.dataset&&r.appendingMetadata.subsetOf===t.dataset)return{metadata:{cardinality:r.appendingMetadata.cardinality}};if(t.dataset===r.appendingMetadata.cardinality.dataset)return{metadata:{cardinality:t}};delete t.dataset}else return{metadata:{cardinality:t}}}return!r.appendingMetadata.cardinality||!Number.isFinite(r.appendingMetadata.cardinality.value)?(t.type="estimate",t.value=Number.POSITIVE_INFINITY):(r.appendingMetadata.cardinality.type==="estimate"&&(t.type="estimate"),t.value+=r.appendingMetadata.cardinality.value),{metadata:{cardinality:t}}}};return gT.ActorRdfMetadataAccumulateCardinality=u,gT}var ste;function NB(){return ste||(ste=1,(function(a){var e=Uf&&Uf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Uf&&Uf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(dDe(),a)})(Uf)),Uf}var Vf={},_T={},cte;function fDe(){if(cte)return _T;cte=1,Object.defineProperty(_T,"__esModule",{value:!0}),_T.ActorRdfMetadataAccumulatePageSize=void 0;const a=RB(),e=De();let u=class extends a.ActorRdfMetadataAccumulate{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}async run(r){return r.mode==="initialize"?{metadata:{}}:{metadata:{..."pageSize"in r.accumulatedMetadata||"pageSize"in r.appendingMetadata?{pageSize:(r.accumulatedMetadata.pageSize??0)+(r.appendingMetadata.pageSize??0)}:{}}}}};return _T.ActorRdfMetadataAccumulatePageSize=u,_T}var lte;function IB(){return lte||(lte=1,(function(a){var e=Vf&&Vf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Vf&&Vf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(fDe(),a)})(Vf)),Vf}var Hf={},TT={},dte;function pDe(){if(dte)return TT;dte=1,Object.defineProperty(TT,"__esModule",{value:!0}),TT.ActorRdfMetadataAccumulateRequestTime=void 0;const a=RB(),e=De();let u=class extends a.ActorRdfMetadataAccumulate{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}async run(r){return r.mode==="initialize"?{metadata:{}}:{metadata:{..."requestTime"in r.accumulatedMetadata||"requestTime"in r.appendingMetadata?{requestTime:(r.accumulatedMetadata.requestTime??0)+(r.appendingMetadata.requestTime??0)}:{}}}}};return TT.ActorRdfMetadataAccumulateRequestTime=u,TT}var fte;function DB(){return fte||(fte=1,(function(a){var e=Hf&&Hf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Hf&&Hf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(pDe(),a)})(Hf)),Hf}var kf={},wT={},zf={},ST={},pte;function hDe(){if(pte)return ST;pte=1,Object.defineProperty(ST,"__esModule",{value:!0}),ST.ActorRdfMetadataExtract=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return ST.ActorRdfMetadataExtract=e,ST}var hte;function oc(){return hte||(hte=1,(function(a){var e=zf&&zf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=zf&&zf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(hDe(),a)})(zf)),zf}var BM={exports:{}},yte;function yDe(){return yte||(yte=1,(function(a){(function(e){var u=(function(){function h(g){this.options=g}return h.prototype.toString=function(){return JSON&&JSON.stringify?JSON.stringify(this.options):this.options},h})(),n=(function(){function h(j){return Object.prototype.toString.apply(j)==="[object Array]"}function g(j){return Object.prototype.toString.apply(j)==="[object String]"}function v(j){return Object.prototype.toString.apply(j)==="[object Number]"}function m(j){return Object.prototype.toString.apply(j)==="[object Boolean]"}function T(j,q){var O="",I=!0,A;for(A=0;A<j.length;A+=1)I?I=!1:O+=q,O+=j[A];return O}function w(j,q){for(var O=[],I=0;I<j.length;I+=1)O.push(q(j[I]));return O}function E(j,q){for(var O=[],I=0;I<j.length;I+=1)q(j[I])&&O.push(j[I]);return O}function S(j){if(typeof j!="object"||j===null)return j;Object.freeze(j);var q,O;for(O in j)j.hasOwnProperty(O)&&(q=j[O],typeof q=="object"&&N(q));return j}function N(j){return typeof Object.freeze=="function"?S(j):j}return{isArray:h,isString:g,isNumber:v,isBoolean:m,join:T,map:w,filter:E,deepFreeze:N}})(),r=(function(){function h(m){return m>="a"&&m<="z"||m>="A"&&m<="Z"}function g(m){return m>="0"&&m<="9"}function v(m){return g(m)||m>="a"&&m<="f"||m>="A"&&m<="F"}return{isAlpha:h,isDigit:g,isHexDigit:v}})(),t=(function(){var h={encode:function(E){return unescape(encodeURIComponent(E))},numBytes:function(E){return E<=127?1:194<=E&&E<=223?2:224<=E&&E<=239?3:240<=E&&E<=244?4:0},isValidFollowingCharCode:function(E){return 128<=E&&E<=191}};function g(E){var S="",N=h.encode(E),j,q;for(q=0;q<N.length;q+=1)j=N.charCodeAt(q),S+="%"+(j<16?"0":"")+j.toString(16).toUpperCase();return S}function v(E,S){return E.charAt(S)==="%"&&r.isHexDigit(E.charAt(S+1))&&r.isHexDigit(E.charAt(S+2))}function m(E,S){return parseInt(E.substr(S,2),16)}function T(E){if(!v(E,0))return!1;var S=m(E,1),N=h.numBytes(S);if(N===0)return!1;for(var j=1;j<N;j+=1)if(!v(E,3*j)||!h.isValidFollowingCharCode(m(E,3*j+1)))return!1;return!0}function w(E,S){var N=E.charAt(S);if(!v(E,S))return N;var j=m(E,S+1),q=h.numBytes(j);if(q===0)return N;for(var O=1;O<q;O+=1)if(!v(E,S+3*O)||!h.isValidFollowingCharCode(m(E,S+3*O+1)))return N;return E.substr(S,3*q)}return{encodeCharacter:g,isPctEncoded:T,pctCharAt:w}})(),i=(function(){function h(m){return r.isAlpha(m)||r.isDigit(m)||m==="_"||t.isPctEncoded(m)}function g(m){return r.isAlpha(m)||r.isDigit(m)||m==="-"||m==="."||m==="_"||m==="~"}function v(m){return m===":"||m==="/"||m==="?"||m==="#"||m==="["||m==="]"||m==="@"||m==="!"||m==="$"||m==="&"||m==="("||m===")"||m==="*"||m==="+"||m===","||m===";"||m==="="||m==="'"}return{isVarchar:h,isUnreserved:g,isReserved:v}})(),o=(function(){function h(T,w){var E="",S,N="";for((typeof T=="number"||typeof T=="boolean")&&(T=T.toString()),S=0;S<T.length;S+=N.length)N=T.charAt(S),E+=i.isUnreserved(N)||w&&i.isReserved(N)?N:t.encodeCharacter(N);return E}function g(T){return h(T,!0)}function v(T,w){var E=t.pctCharAt(T,w);return E.length>1||i.isReserved(E)||i.isUnreserved(E)?E:t.encodeCharacter(E)}function m(T){var w="",E,S="";for(E=0;E<T.length;E+=S.length)S=t.pctCharAt(T,E),S.length>1?w+=S:w+=i.isReserved(S)||i.isUnreserved(S)?S:t.encodeCharacter(S);return w}return{encode:h,encodePassReserved:g,encodeLiteral:m,encodeLiteralCharacter:v}})(),l=(function(){var h={};function g(v){h[v]={symbol:v,separator:v==="?"?"&":v===""||v==="+"||v==="#"?",":v,named:v===";"||v==="&"||v==="?",ifEmpty:v==="&"||v==="?"?"=":"",first:v==="+"?"":v,encode:v==="+"||v==="#"?o.encodePassReserved:o.encode,toString:function(){return this.symbol}}}return g(""),g("+"),g("#"),g("."),g("/"),g(";"),g("?"),g("&"),{valueOf:function(v){return h[v]?h[v]:"=,!@|".indexOf(v)>=0?null:h[""]}}})();function s(h){var g;if(h==null)return!1;if(n.isArray(h))return h.length>0;if(typeof h=="string"||typeof h=="number"||typeof h=="boolean")return!0;for(g in h)if(h.hasOwnProperty(g)&&s(h[g]))return!0;return!1}var c=(function(){function h(g){this.literal=o.encodeLiteral(g)}return h.prototype.expand=function(){return this.literal},h.prototype.toString=h.prototype.expand,h})(),d=(function(){function h(v){var m,T=[],w=null,E=null,S=null,N,j="";function q(){var I=v.substring(E,N);if(I.length===0)throw new u({expressionText:v,message:"a varname must be specified",position:N});w={varname:I,exploded:!1,maxLength:null},E=null}function O(){if(S===N)throw new u({expressionText:v,message:"after a ':' you have to specify the length",position:N});w.maxLength=parseInt(v.substring(S,N),10),S=null}for(m=(function(I){var A=l.valueOf(I);if(A===null)throw new u({expressionText:v,message:"illegal use of reserved operator",position:N,operator:I});return A})(v.charAt(0)),N=m.symbol.length,E=N;N<v.length;N+=j.length){if(j=t.pctCharAt(v,N),E!==null){if(j==="."){if(E===N)throw new u({expressionText:v,message:"a varname MUST NOT start with a dot",position:N});continue}if(i.isVarchar(j))continue;q()}if(S!==null){if(N===S&&j==="0")throw new u({expressionText:v,message:"A :prefix must not start with digit 0",position:N});if(r.isDigit(j)){if(N-S>=4)throw new u({expressionText:v,message:"A :prefix must have max 4 digits",position:N});continue}O()}if(j===":"){if(w.maxLength!==null)throw new u({expressionText:v,message:"only one :maxLength is allowed per varspec",position:N});if(w.exploded)throw new u({expressionText:v,message:"an exploeded varspec MUST NOT be varspeced",position:N});S=N+1;continue}if(j==="*"){if(w===null)throw new u({expressionText:v,message:"exploded without varspec",position:N});if(w.exploded)throw new u({expressionText:v,message:"exploded twice",position:N});if(w.maxLength)throw new u({expressionText:v,message:"an explode (*) MUST NOT follow to a prefix",position:N});w.exploded=!0;continue}if(j===","){T.push(w),w=null,E=N+1;continue}throw new u({expressionText:v,message:"illegal character",character:j,position:N})}return E!==null&&q(),S!==null&&O(),T.push(w),new f(v,m,T)}function g(v){var m,T,w=[],E=null,S=0;for(m=0;m<v.length;m+=1){if(T=v.charAt(m),S!==null){if(T==="}")throw new u({templateText:v,message:"unopened brace closed",position:m});T==="{"&&(S<m&&w.push(new c(v.substring(S,m))),S=null,E=m);continue}if(E!==null){if(T==="{")throw new u({templateText:v,message:"brace already opened",position:m});if(T==="}"){if(E+1===m)throw new u({templateText:v,message:"empty braces",position:E});try{w.push(h(v.substring(E+1,m)))}catch(N){throw N.prototype===u.prototype?new u({templateText:v,message:N.options.message,position:E+N.options.position,details:N.options}):N}E=null,S=m+1}continue}throw new Error("reached unreachable code")}if(E!==null)throw new u({templateText:v,message:"unclosed brace",position:E});return S<v.length&&w.push(new c(v.substr(S))),new p(v,w)}return g})(),f=(function(){function h(j){return JSON&&JSON.stringify?JSON.stringify(j):j}function g(j){if(!s(j))return!0;if(n.isString(j))return j==="";if(n.isNumber(j)||n.isBoolean(j))return!1;if(n.isArray(j))return j.length===0;for(var q in j)if(j.hasOwnProperty(q))return!1;return!0}function v(j){var q=[],O;for(O in j)j.hasOwnProperty(O)&&q.push({name:O,value:j[O]});return q}function m(j,q,O){this.templateText=j,this.operator=q,this.varspecs=O}m.prototype.toString=function(){return this.templateText};function T(j,q,O){var I="";if(O=O.toString(),q.named){if(I+=o.encodeLiteral(j.varname),O==="")return I+=q.ifEmpty,I;I+="="}return j.maxLength!==null&&(O=O.substr(0,j.maxLength)),I+=q.encode(O),I}function w(j){return s(j.value)}function E(j,q,O){var I=[],A="";if(q.named){if(A+=o.encodeLiteral(j.varname),g(O))return A+=q.ifEmpty,A;A+="="}return n.isArray(O)?(I=O,I=n.filter(I,s),I=n.map(I,q.encode),A+=n.join(I,",")):(I=v(O),I=n.filter(I,w),I=n.map(I,function(P){return q.encode(P.name)+","+q.encode(P.value)}),A+=n.join(I,",")),A}function S(j,q,O){var I=n.isArray(O),A=[];return I?(A=O,A=n.filter(A,s),A=n.map(A,function(P){var C=o.encodeLiteral(j.varname);return g(P)?C+=q.ifEmpty:C+="="+q.encode(P),C})):(A=v(O),A=n.filter(A,w),A=n.map(A,function(P){var C=o.encodeLiteral(P.name);return g(P.value)?C+=q.ifEmpty:C+="="+q.encode(P.value),C})),n.join(A,q.separator)}function N(j,q){var O=[],I="";return n.isArray(q)?(O=q,O=n.filter(O,s),O=n.map(O,j.encode),I+=n.join(O,j.separator)):(O=v(q),O=n.filter(O,function(A){return s(A.value)}),O=n.map(O,function(A){return j.encode(A.name)+"="+j.encode(A.value)}),I+=n.join(O,j.separator)),I}return m.prototype.expand=function(j){var q=[],O,I,A,P=this.operator;for(O=0;O<this.varspecs.length;O+=1)if(I=this.varspecs[O],A=j[I.varname],A!=null)if(I.exploded,n.isArray(A),typeof A=="string"||typeof A=="number"||typeof A=="boolean")q.push(T(I,P,A));else{if(I.maxLength&&s(A))throw new Error("Prefix modifiers are not applicable to variables that have composite values. You tried to expand "+this+" with "+h(A));I.exploded?s(A)&&(P.named?q.push(S(I,P,A)):q.push(N(P,A))):(P.named||!g(A))&&q.push(E(I,P,A))}return q.length===0?"":P.first+n.join(q,P.separator)},m})(),p=(function(){function h(g,v){this.templateText=g,this.expressions=v,n.deepFreeze(this)}return h.prototype.toString=function(){return this.templateText},h.prototype.expand=function(g){var v,m="";for(v=0;v<this.expressions.length;v+=1)m+=this.expressions[v].expand(g);return m},h.parse=d,h.UriTemplateError=u,h})();e(p)})(function(e){a.exports=e})})(BM)),BM.exports}var mte;function mDe(){if(mte)return wT;mte=1,Object.defineProperty(wT,"__esModule",{value:!0}),wT.ActorRdfMetadataExtractHydraControls=void 0;const a=oc(),e=De(),u=yDe();let n=class tF extends a.ActorRdfMetadataExtract{constructor(t){super(t),this.parsedUriTemplateCache={}}async test(t){return(0,e.passTestVoid)()}getLinks(t,i){return Object.fromEntries(tF.LINK_TYPES.map(o=>{const l=i[o]||i[`${o}Page`],s=l&&l[t];return[o,s&&s.length>0?[s[0]]:[]]}))}parseUriTemplateCached(t){const i=this.parsedUriTemplateCache[t];return i||(this.parsedUriTemplateCache[t]=(0,u.parse)(t))}getSearchForms(t){const i=t.search,o=[];if(i)for(const l in i)for(const s of i[l]){const c=(t.template||{})[s]||[];if(c.length!==1)throw new Error(`Expected 1 hydra:template for ${s}`);const d=c[0],f=this.parseUriTemplateCached(d),p=Object.fromEntries(((t.mapping||{})[s]||[]).map(g=>{const v=((t.variable||{})[g]||[])[0],m=((t.property||{})[g]||[])[0];if(!v)throw new Error(`Expected a hydra:variable for ${g}`);if(!m)throw new Error(`Expected a hydra:property for ${g}`);return[m,v]})),h=g=>f.expand(Object.fromEntries(Object.keys(g).map(v=>[p[v],g[v]])));o.push({dataset:l,template:d,mappings:p,getUri:h})}return{values:o}}getHydraProperties(t){return new Promise((i,o)=>{t.on("error",o);const l={};t.on("data",s=>{if(s.predicate.value.startsWith(tF.HYDRA)){const c=s.predicate.value.slice(tF.HYDRA.length),d=l[c]||(l[c]={});(d[s.subject.value]||(d[s.subject.value]=[])).push(s.object.value)}}),t.on("end",()=>i(l))})}async run(t){const i={},o=await this.getHydraProperties(t.metadata);return Object.assign(i,this.getLinks(t.url,o)),i.searchForms=this.getSearchForms(o),{metadata:i}}};return wT.ActorRdfMetadataExtractHydraControls=n,n.HYDRA="http://www.w3.org/ns/hydra/core#",n.LINK_TYPES=["first","next","previous","last"],wT}var bte;function FB(){return bte||(bte=1,(function(a){var e=kf&&kf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=kf&&kf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(mDe(),a)})(kf)),kf}var Gf={},ET={},gte;function bDe(){if(gte)return ET;gte=1,Object.defineProperty(ET,"__esModule",{value:!0}),ET.ActorRdfMetadataExtractHydraCount=void 0;const a=oc(),e=De();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}run(r){return new Promise((t,i)=>{r.metadata.on("error",i),r.metadata.on("data",o=>{this.predicates.includes(o.predicate.value)&&t({metadata:{cardinality:{type:"estimate",value:Number.parseInt(o.object.value,10),dataset:o.subject.value}}})}),r.metadata.on("end",()=>{t({metadata:{cardinality:{type:"estimate",value:0}}})})})}};return ET.ActorRdfMetadataExtractHydraCount=u,ET}var vte;function PB(){return vte||(vte=1,(function(a){var e=Gf&&Gf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Gf&&Gf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(bDe(),a)})(Gf)),Gf}var $f={},AT={},_te;function gDe(){if(_te)return AT;_te=1,Object.defineProperty(AT,"__esModule",{value:!0}),AT.ActorRdfMetadataExtractHydraPagesize=void 0;const a=oc(),e=De();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}async run(r){return new Promise((t,i)=>{r.metadata.on("error",i),r.metadata.on("data",o=>{this.predicates.includes(o.predicate.value)&&t({metadata:{pageSize:Number.parseInt(o.object.value,10)}})}),r.metadata.on("end",()=>{t({metadata:{}})})})}};return AT.ActorRdfMetadataExtractHydraPagesize=u,AT}var Tte;function jB(){return Tte||(Tte=1,(function(a){var e=$f&&$f.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=$f&&$f.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(gDe(),a)})($f)),$f}var Xf={},OT={},wte;function vDe(){if(wte)return OT;wte=1,Object.defineProperty(OT,"__esModule",{value:!0}),OT.ActorRdfMetadataExtractRequestTime=void 0;const a=oc(),e=De();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}async run(r){return{metadata:{requestTime:r.requestTime}}}};return OT.ActorRdfMetadataExtractRequestTime=u,OT}var Ste;function MB(){return Ste||(Ste=1,(function(a){var e=Xf&&Xf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Xf&&Xf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(vDe(),a)})(Xf)),Xf}var Kf={},xT={},Ete;function _De(){if(Ete)return xT;Ete=1,Object.defineProperty(xT,"__esModule",{value:!0}),xT.ActorRdfMetadataExtractAllowHttpMethods=void 0;const a=oc(),e=De();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}async run(r){const t={};return r.headers?.get("allow")&&(t.allowHttpMethods=r.headers.get("allow")?.split(/, */u)),{metadata:t}}};return xT.ActorRdfMetadataExtractAllowHttpMethods=u,xT}var Ate;function CB(){return Ate||(Ate=1,(function(a){var e=Kf&&Kf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Kf&&Kf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(_De(),a)})(Kf)),Kf}var Jf={},RT={},Ote;function TDe(){if(Ote)return RT;Ote=1,Object.defineProperty(RT,"__esModule",{value:!0}),RT.ActorRdfMetadataExtractPutAccepted=void 0;const a=oc(),e=De();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}async run(r){const t={},i=r.headers?.get("accept-put");return i&&(t.putAccepted=i.split(/, */u)),{metadata:t}}};return RT.ActorRdfMetadataExtractPutAccepted=u,RT}var xte;function LB(){return xte||(xte=1,(function(a){var e=Jf&&Jf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Jf&&Jf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(TDe(),a)})(Jf)),Jf}var Wf={},NT={},Rte;function wDe(){if(Rte)return NT;Rte=1,Object.defineProperty(NT,"__esModule",{value:!0}),NT.ActorRdfMetadataExtractPatchSparqlUpdate=void 0;const a=oc(),e=De();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}async run(r){const t={};return(r.headers?.get("accept-patch")?.includes("application/sparql-update")??r.headers?.get("ms-author-via")?.includes("SPARQL"))&&(t.patchSparqlUpdate=!0),{metadata:t}}};return NT.ActorRdfMetadataExtractPatchSparqlUpdate=u,NT}var Nte;function qB(){return Nte||(Nte=1,(function(a){var e=Wf&&Wf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Wf&&Wf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(wDe(),a)})(Wf)),Wf}var Yf={},IT={},Ite;function SDe(){if(Ite)return IT;Ite=1,Object.defineProperty(IT,"__esModule",{value:!0}),IT.ActorRdfMetadataExtractSparqlService=void 0;const a=oc(),e=De(),u=Xn();let n=class yu extends a.ActorRdfMetadataExtract{constructor(t){super(t)}async test(t){return(0,e.passTestVoid)()}async run(t){return new Promise((i,o)=>{t.metadata.on("error",o);const l=new Set([t.url]),s={},c=new Set,d=new Set,f=new Set,p=new Set,h=new Set;t.metadata.on("data",g=>{if(g.predicate.value==="http://rdfs.org/ns/void#subset"&&g.object.value===t.url)l.add(g.subject.value);else if(g.subject.value===s.defaultDataset||g.subject.termType==="BlankNode"||l.has(g.subject.value))switch(g.predicate.value){case`${yu.SD}endpoint`:s.sparqlService=g.object.termType==="Literal"?(0,u.resolve)(g.object.value,t.url):g.object.value,this.inferHttpsEndpoint&&t.url.startsWith("https")&&!g.object.value.startsWith("https")&&(s.sparqlService=s.sparqlService.replace(/^http:/u,"https:"));break;case`${yu.SD}defaultDataset`:s.defaultDataset=g.object.value;break;case`${yu.SD}defaultGraph`:s.defaultGraph=g.object.value;break;case`${yu.SD}inputFormat`:c.add(g.object.value);break;case`${yu.SD}resultFormat`:d.add(g.object.value);break;case`${yu.SD}supportedLanguage`:f.add(g.object.value);break;case`${yu.SD}propertyFeature`:h.add(g.object.value);break;case`${yu.SD}feature`:g.object.value===`${yu.SD}UnionDefaultGraph`?s.unionDefaultGraph=!0:g.object.value===`${yu.SD}BasicFederatedQuery`&&(s.basicFederatedQuery=!0);break;case`${yu.SD}extensionFunction`:p.add(g.object.value);break}}),t.metadata.on("end",()=>{i({metadata:{...s,...c.size>0?{inputFormats:[...c.values()]}:{},...d.size>0?{resultFormats:[...d.values()]}:{},...f.size>0?{supportedLanguages:[...f.values()]}:{},...p.size>0?{extensionFunctions:[...p.values()]}:{},...h.size>0?{propertyFeatures:[...h.values()]}:{}}})})})}};return IT.ActorRdfMetadataExtractSparqlService=n,n.SD="http://www.w3.org/ns/sparql-service-description#",IT}var Dte;function BB(){return Dte||(Dte=1,(function(a){var e=Yf&&Yf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Yf&&Yf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(SDe(),a)})(Yf)),Yf}var Zf={},DT={},ep={},FT={},Fte;function EDe(){if(Fte)return FT;Fte=1,Object.defineProperty(FT,"__esModule",{value:!0}),FT.ActorRdfParse=void 0;const a=w1();let e=class extends a.ActorAbstractMediaTyped{constructor(n){super(n)}};return FT.ActorRdfParse=e,FT}var PT={},Pte;function ADe(){if(Pte)return PT;Pte=1,Object.defineProperty(PT,"__esModule",{value:!0}),PT.ActorRdfParseFixedMediaTypes=void 0;const a=w1(),e=De();let u=class extends a.ActorAbstractMediaTypedFixed{constructor(r){super(r)}async testHandleChecked(r){return(0,e.passTestVoid)()}};return PT.ActorRdfParseFixedMediaTypes=u,PT}var jte;function E1(){return jte||(jte=1,(function(a){var e=ep&&ep.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ep&&ep.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(EDe(),a),u(ADe(),a)})(ep)),ep}var ODe=Xo();const jT="http://www.w3.org/1999/02/22-rdf-syntax-ns#",MT="http://www.w3.org/2001/XMLSchema#",JI="http://www.w3.org/2000/10/swap/",wa={xsd:{decimal:`${MT}decimal`,boolean:`${MT}boolean`,double:`${MT}double`,integer:`${MT}integer`,string:`${MT}string`},rdf:{type:`${jT}type`,nil:`${jT}nil`,first:`${jT}first`,rest:`${jT}rest`,langString:`${jT}langString`},owl:{sameAs:"http://www.w3.org/2002/07/owl#sameAs"},r:{forSome:`${JI}reify#forSome`,forAll:`${JI}reify#forAll`},log:{implies:`${JI}log#implies`,isImpliedBy:`${JI}log#isImpliedBy`}},{xsd:WI}=wa,xDe=/\\u([a-fA-F0-9]{4})|\\U([a-fA-F0-9]{8})|\\([^])/g,Mte={"\\":"\\","'":"'",'"':'"',n:`
`,r:"\r",t:"	",f:"\f",b:"\b",_:"_","~":"~",".":".","-":"-","!":"!",$:"$","&":"&","(":"(",")":")","*":"*","+":"+",",":",",";":";","=":"=","/":"/","?":"?","#":"#","@":"@","%":"%"},RDe=/[\x00-\x20<>\\"\{\}\|\^\`]/,NDe={_iri:!0,_unescapedIri:!0,_simpleQuotedString:!0,_langcode:!0,_blank:!0,_newline:!0,_comment:!0,_whitespace:!0,_endOfFile:!0},IDe=/$0^/;class UB{constructor(e){if(this._iri=/^<((?:[^ <>{}\\]|\\[uU])+)>[ \t]*/,this._unescapedIri=/^<([^\x00-\x20<>\\"\{\}\|\^\`]*)>[ \t]*/,this._simpleQuotedString=/^"([^"\\\r\n]*)"(?=[^"])/,this._simpleApostropheString=/^'([^'\\\r\n]*)'(?=[^'])/,this._langcode=/^@([a-z]+(?:-[a-z0-9]+)*)(?=[^a-z0-9\-])/i,this._prefix=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:(?=[#\s<])/,this._prefixed=/^((?:[A-Za-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)?:((?:(?:[0-:A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])(?:(?:[\.\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~])*(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff]|%[0-9a-fA-F]{2}|\\[!#-\/;=?\-@_~]))?)?)(?:[ \t]+|(?=\.?[,;!\^\s#()\[\]\{\}"'<>]))/,this._variable=/^\?(?:(?:[A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:[\-0-:A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?=[.,;!\^\s#()\[\]\{\}"'<>])/,this._blank=/^_:((?:[0-9A-Z_a-z\xc0-\xd6\xd8-\xf6\xf8-\u02ff\u0370-\u037d\u037f-\u1fff\u200c\u200d\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])(?:\.?[\-0-9A-Z_a-z\xb7\xc0-\xd6\xd8-\xf6\xf8-\u037d\u037f-\u1fff\u200c\u200d\u203f\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]|[\ud800-\udb7f][\udc00-\udfff])*)(?:[ \t]+|(?=\.?[,;:\s#()\[\]\{\}"'<>]))/,this._number=/^[\-+]?(?:(\d+\.\d*|\.?\d+)[eE][\-+]?|\d*(\.)?)\d+(?=\.?[,;:\s#()\[\]\{\}"'<>])/,this._boolean=/^(?:true|false)(?=[.,;\s#()\[\]\{\}"'<>])/,this._keyword=/^@[a-z]+(?=[\s#<:])/i,this._sparqlKeyword=/^(?:PREFIX|BASE|GRAPH)(?=[\s#<])/i,this._shortPredicates=/^a(?=[\s#()\[\]\{\}"'<>])/,this._newline=/^[ \t]*(?:#[^\n\r]*)?(?:\r\n|\n|\r)[ \t]*/,this._comment=/#([^\n\r]*)/,this._whitespace=/^[ \t]+/,this._endOfFile=/^(?:#[^\n\r]*)?$/,e=e||{},this._isImpliedBy=e.isImpliedBy,this._lineMode=!!e.lineMode){this._n3Mode=!1;for(const u in this)!(u in NDe)&&this[u]instanceof RegExp&&(this[u]=IDe)}else this._n3Mode=e.n3!==!1;this.comments=!!e.comments,this._literalClosingPos=0}_tokenizeToEnd(e,u){let n=this._input,r=n.length;for(;;){let o,l;for(;o=this._newline.exec(n);)this.comments&&(l=this._comment.exec(o[0]))&&t("comment",l[1],"",this._line,o[0].length),n=n.substr(o[0].length,n.length),r=n.length,this._line++;if(!o&&(o=this._whitespace.exec(n))&&(n=n.substr(o[0].length,n.length)),this._endOfFile.test(n))return u&&(this.comments&&(l=this._comment.exec(n))&&t("comment",l[1],"",this._line,n.length),n=null,t("eof","","",this._line,0)),this._input=n;const s=this._line,c=n[0];let d="",f="",p="",h=null,g=0,v=!1;switch(c){case"^":if(n.length<3)break;if(n[1]==="^"){if(this._previousMarker="^^",n=n.substr(2),n[0]!=="<"){v=!0;break}}else{this._n3Mode&&(g=1,d="^");break}case"<":if(h=this._unescapedIri.exec(n))d="IRI",f=h[1];else if(h=this._iri.exec(n)){if(f=this._unescape(h[1]),f===null||RDe.test(f))return i(this);d="IRI"}else n.length>1&&n[1]==="<"?(d="<<",g=2):this._n3Mode&&n.length>1&&n[1]==="="&&(g=2,this._isImpliedBy?(d="abbreviation",f="<"):(d="inverse",f=">"));break;case">":n.length>1&&n[1]===">"&&(d=">>",g=2);break;case"_":((h=this._blank.exec(n))||u&&(h=this._blank.exec(`${n} `)))&&(d="blank",p="_",f=h[1]);break;case'"':if(h=this._simpleQuotedString.exec(n))f=h[1];else if({value:f,matchLength:g}=this._parseLiteral(n),f===null)return i(this);(h!==null||g!==0)&&(d="literal",this._literalClosingPos=0);break;case"'":if(!this._lineMode){if(h=this._simpleApostropheString.exec(n))f=h[1];else if({value:f,matchLength:g}=this._parseLiteral(n),f===null)return i(this);(h!==null||g!==0)&&(d="literal",this._literalClosingPos=0)}break;case"?":this._n3Mode&&(h=this._variable.exec(n))&&(d="var",f=h[0]);break;case"@":this._previousMarker==="literal"&&(h=this._langcode.exec(n))?(d="langcode",f=h[1]):(h=this._keyword.exec(n))&&(d=h[0]);break;case".":if(n.length===1?u:n[1]<"0"||n[1]>"9"){d=".",g=1;break}case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":case"+":case"-":(h=this._number.exec(n)||u&&(h=this._number.exec(`${n} `)))&&(d="literal",f=h[0],p=typeof h[1]=="string"?WI.double:typeof h[2]=="string"?WI.decimal:WI.integer);break;case"B":case"b":case"p":case"P":case"G":case"g":(h=this._sparqlKeyword.exec(n))?d=h[0].toUpperCase():v=!0;break;case"f":case"t":(h=this._boolean.exec(n))?(d="literal",f=h[0],p=WI.boolean):v=!0;break;case"a":(h=this._shortPredicates.exec(n))?(d="abbreviation",f="a"):v=!0;break;case"=":this._n3Mode&&n.length>1&&(d="abbreviation",n[1]!==">"?(g=1,f="="):(g=2,f=">"));break;case"!":if(!this._n3Mode)break;case",":case";":case"[":case"]":case"(":case")":case"}":this._lineMode||(g=1,d=c);break;case"{":!this._lineMode&&n.length>=2&&(n[1]==="|"?(d="{|",g=2):(d=c,g=1));break;case"|":n.length>=2&&n[1]==="}"&&(d="|}",g=2);break;default:v=!0}if(v&&((this._previousMarker==="@prefix"||this._previousMarker==="PREFIX")&&(h=this._prefix.exec(n))?(d="prefix",f=h[1]||""):((h=this._prefixed.exec(n))||u&&(h=this._prefixed.exec(`${n} `)))&&(d="prefixed",p=h[1]||"",f=this._unescape(h[2]))),this._previousMarker==="^^")switch(d){case"prefixed":d="type";break;case"IRI":d="typeIRI";break;default:d=""}if(!d)return u||!/^'''|^"""/.test(n)&&/\n|\r/.test(n)?i(this):this._input=n;const m=g||h[0].length,T=t(d,f,p,s,m);this.previousToken=T,this._previousMarker=d,n=n.substr(m,n.length)}function t(o,l,s,c,d){const f=n?r-n.length:r,p=f+d,h={type:o,value:l,prefix:s,line:c,start:f,end:p};return e(null,h),h}function i(o){e(o._syntaxError(/^\S*/.exec(n)[0]))}}_unescape(e){let u=!1;const n=e.replace(xDe,(r,t,i,o)=>{if(typeof t=="string")return String.fromCharCode(Number.parseInt(t,16));if(typeof i=="string"){let l=Number.parseInt(i,16);return l<=65535?String.fromCharCode(Number.parseInt(i,16)):String.fromCharCode(55296+((l-=65536)>>10),56320+(l&1023))}return o in Mte?Mte[o]:(u=!0,"")});return u?null:n}_parseLiteral(e){if(e.length>=3){const u=e.match(/^(?:"""|"|'''|'|)/)[0],n=u.length;let r=Math.max(this._literalClosingPos,n);for(;(r=e.indexOf(u,r))>0;){let t=0;for(;e[r-t-1]==="\\";)t++;if(t%2===0){const i=e.substring(n,r),o=i.split(/\r\n|\r|\n/).length-1,l=r+n;if(n===1&&o!==0||n===3&&this._lineMode)break;return this._line+=o,{value:this._unescape(i),matchLength:l}}r++}this._literalClosingPos=e.length-n+1}return{value:"",matchLength:0}}_syntaxError(e){this._input=null;const u=new Error(`Unexpected "${e}" on line ${this._line}.`);return u.context={token:void 0,line:this._line,previousToken:this.previousToken},u}_readStartingBom(e){return e.startsWith("\uFEFF")?e.substr(1):e}tokenize(e,u){if(this._line=1,typeof e=="string")if(this._input=this._readStartingBom(e),typeof u=="function")queueMicrotask(()=>this._tokenizeToEnd(u,!0));else{const n=[];let r;if(this._tokenizeToEnd((t,i)=>t?r=t:n.push(i),!0),r)throw r;return n}else this._pendingBuffer=null,typeof e.setEncoding=="function"&&e.setEncoding("utf8"),e.on("data",n=>{this._input!==null&&n.length!==0&&(this._pendingBuffer&&(n=ODe.Buffer.concat([this._pendingBuffer,n]),this._pendingBuffer=null),n[n.length-1]&128?this._pendingBuffer=n:(typeof this._input>"u"?this._input=this._readStartingBom(typeof n=="string"?n:n.toString()):this._input+=n,this._tokenizeToEnd(u,!1)))}),e.on("end",()=>{typeof this._input=="string"&&this._tokenizeToEnd(u,!0)}),e.on("error",u)}}const{rdf:DDe,xsd:eb}=wa;let A1,FDe=0;const fo={namedNode:z2e,blankNode:G2e,variable:X2e,literal:$2e,defaultGraph:PDe,quad:c7,triple:c7,fromTerm:H6,fromQuad:K2e};class Hi{constructor(e){this.id=e}get value(){return this.id}equals(e){return e instanceof Hi?this.id===e.id:!!e&&this.termType===e.termType&&this.value===e.value}hashCode(){return 0}toJSON(){return{termType:this.termType,value:this.value}}}let mP=class extends Hi{get termType(){return"NamedNode"}},Qg=class k2e extends Hi{get termType(){return"Literal"}get value(){return this.id.substring(1,this.id.lastIndexOf('"'))}get language(){const e=this.id;let u=e.lastIndexOf('"')+1;return u<e.length&&e[u++]==="@"?e.substr(u).toLowerCase():""}get datatype(){return new mP(this.datatypeString)}get datatypeString(){const e=this.id,u=e.lastIndexOf('"')+1,n=u<e.length?e[u]:"";return n==="^"?e.substr(u+2):n!=="@"?eb.string:DDe.langString}equals(e){return e instanceof k2e?this.id===e.id:!!e&&!!e.datatype&&this.termType===e.termType&&this.value===e.value&&this.language===e.language&&this.datatype.value===e.datatype.value}toJSON(){return{termType:this.termType,value:this.value,language:this.language,datatype:{termType:"NamedNode",value:this.datatypeString}}}},QB=class extends Hi{constructor(e){super(`_:${e}`)}get termType(){return"BlankNode"}get value(){return this.id.substr(2)}},VB=class extends Hi{constructor(e){super(`?${e}`)}get termType(){return"Variable"}get value(){return this.id.substr(1)}},HB=class extends Hi{constructor(){return super(""),A1||this}get termType(){return"DefaultGraph"}equals(e){return this===e||!!e&&this.termType===e.termType}};A1=new HB;function ab(a,e,u){if(e=e||fo,!a)return e.defaultGraph();switch(a[0]){case"?":return e.variable(a.substr(1));case"_":return e.blankNode(a.substr(2));case'"':if(e===fo)return new Qg(a);if(a[a.length-1]==='"')return e.literal(a.substr(1,a.length-2));const n=a.lastIndexOf('"',a.length-1);return e.literal(a.substr(1,n-1),a[n+1]==="@"?a.substr(n+2):e.namedNode(a.substr(n+3)));case"[":a=JSON.parse(a);break;default:if(!u||!Array.isArray(a))return e.namedNode(a)}return e.quad(ab(a[0],e,!0),ab(a[1],e,!0),ab(a[2],e,!0),a[3]&&ab(a[3],e,!0))}function tl(a,e){if(typeof a=="string")return a;if(a instanceof Hi&&a.termType!=="Quad")return a.id;if(!a)return A1.id;switch(a.termType){case"NamedNode":return a.value;case"BlankNode":return`_:${a.value}`;case"Variable":return`?${a.value}`;case"DefaultGraph":return"";case"Literal":return`"${a.value}"${a.language?`@${a.language}`:a.datatype&&a.datatype.value!==eb.string?`^^${a.datatype.value}`:""}`;case"Quad":const u=[tl(a.subject,!0),tl(a.predicate,!0),tl(a.object,!0)];return a.graph&&a.graph.termType!=="DefaultGraph"&&u.push(tl(a.graph,!0)),e?u:JSON.stringify(u);default:throw new Error(`Unexpected termType: ${a.termType}`)}}let i1=class extends Hi{constructor(e,u,n,r){super(""),this._subject=e,this._predicate=u,this._object=n,this._graph=r||A1}get termType(){return"Quad"}get subject(){return this._subject}get predicate(){return this._predicate}get object(){return this._object}get graph(){return this._graph}toJSON(){return{termType:this.termType,subject:this._subject.toJSON(),predicate:this._predicate.toJSON(),object:this._object.toJSON(),graph:this._graph.toJSON()}}equals(e){return!!e&&this._subject.equals(e.subject)&&this._predicate.equals(e.predicate)&&this._object.equals(e.object)&&this._graph.equals(e.graph)}};function z2e(a){return new mP(a)}function G2e(a){return new QB(a||`n3-${FDe++}`)}function $2e(a,e){if(typeof e=="string")return new Qg(`"${a}"@${e.toLowerCase()}`);let u=e?e.value:"";return u===""&&(typeof a=="boolean"?u=eb.boolean:typeof a=="number"&&(Number.isFinite(a)?u=Number.isInteger(a)?eb.integer:eb.double:(u=eb.double,Number.isNaN(a)||(a=a>0?"INF":"-INF")))),u===""||u===eb.string?new Qg(`"${a}"`):new Qg(`"${a}"^^${u}`)}function X2e(a){return new VB(a)}function PDe(){return A1}function c7(a,e,u,n){return new i1(a,e,u,n)}function H6(a){if(a instanceof Hi)return a;switch(a.termType){case"NamedNode":return z2e(a.value);case"BlankNode":return G2e(a.value);case"Variable":return X2e(a.value);case"DefaultGraph":return A1;case"Literal":return $2e(a.value,a.language||a.datatype);case"Quad":return K2e(a);default:throw new Error(`Unexpected termType: ${a.termType}`)}}function K2e(a){if(a instanceof i1)return a;if(a.termType!=="Quad")throw new Error(`Unexpected termType: ${a.termType}`);return c7(H6(a.subject),H6(a.predicate),H6(a.object),H6(a.graph))}let Cte=0;class bP{constructor(e){this._contextStack=[],this._graph=null,e=e||{},this._setBase(e.baseIRI),e.factory&&J2e(this,e.factory);const u=typeof e.format=="string"?e.format.match(/\w*$/)[0].toLowerCase():"",n=/turtle/.test(u),r=/trig/.test(u),t=/triple/.test(u),i=/quad/.test(u),o=this._n3Mode=/n3/.test(u),l=t||i;(this._supportsNamedGraphs=!(n||o))||(this._readPredicateOrNamedGraph=this._readPredicate),this._supportsQuads=!(n||r||t||o),this._isImpliedBy=e.isImpliedBy,this._supportsRDFStar=u===""||/star|\*$/.test(u),l&&(this._resolveRelativeIRI=s=>null),this._blankNodePrefix=typeof e.blankNodePrefix!="string"?"":e.blankNodePrefix.replace(/^(?!_:)/,"_:"),this._lexer=e.lexer||new UB({lineMode:l,n3:o,isImpliedBy:this._isImpliedBy}),this._explicitQuantifiers=!!e.explicitQuantifiers}static _resetBlankNodePrefix(){Cte=0}_setBase(e){if(!e)this._base="",this._basePath="";else{const u=e.indexOf("#");u>=0&&(e=e.substr(0,u)),this._base=e,this._basePath=e.indexOf("/")<0?e:e.replace(/[^\/?]*(?:\?.*)?$/,""),e=e.match(/^(?:([a-z][a-z0-9+.-]*:))?(?:\/\/[^\/]*)?/i),this._baseRoot=e[0],this._baseScheme=e[1]}}_saveContext(e,u,n,r,t){const i=this._n3Mode;this._contextStack.push({type:e,subject:n,predicate:r,object:t,graph:u,inverse:i?this._inversePredicate:!1,blankPrefix:i?this._prefixes._:"",quantified:i?this._quantified:null}),i&&(this._inversePredicate=!1,this._prefixes._=this._graph?`${this._graph.value}.`:".",this._quantified=Object.create(this._quantified))}_restoreContext(e,u){const n=this._contextStack.pop();if(!n||n.type!==e)return this._error(`Unexpected ${u.type}`,u);this._subject=n.subject,this._predicate=n.predicate,this._object=n.object,this._graph=n.graph,this._n3Mode&&(this._inversePredicate=n.inverse,this._prefixes._=n.blankPrefix,this._quantified=n.quantified)}_readInTopContext(e){switch(e.type){case"eof":return this._graph!==null?this._error("Unclosed graph",e):(delete this._prefixes._,this._callback(null,null,this._prefixes));case"PREFIX":this._sparqlStyle=!0;case"@prefix":return this._readPrefix;case"BASE":this._sparqlStyle=!0;case"@base":return this._readBaseIRI;case"{":if(this._supportsNamedGraphs)return this._graph="",this._subject=null,this._readSubject;case"GRAPH":if(this._supportsNamedGraphs)return this._readNamedGraphLabel;default:return this._readSubject(e)}}_readEntity(e,u){let n;switch(e.type){case"IRI":case"typeIRI":const r=this._resolveIRI(e.value);if(r===null)return this._error("Invalid IRI",e);n=this._factory.namedNode(r);break;case"type":case"prefixed":const t=this._prefixes[e.prefix];if(t===void 0)return this._error(`Undefined prefix "${e.prefix}:"`,e);n=this._factory.namedNode(t+e.value);break;case"blank":n=this._factory.blankNode(this._prefixes[e.prefix]+e.value);break;case"var":n=this._factory.variable(e.value.substr(1));break;default:return this._error(`Expected entity but got ${e.type}`,e)}return!u&&this._n3Mode&&n.id in this._quantified&&(n=this._quantified[n.id]),n}_readSubject(e){switch(this._predicate=null,e.type){case"[":return this._saveContext("blank",this._graph,this._subject=this._factory.blankNode(),null,null),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this.RDF_NIL,null,null),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._graph=this._factory.blankNode(),null,null),this._readSubject):this._error("Unexpected graph",e);case"}":return this._readPunctuation(e);case"@forSome":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORSOME,this._quantifier="blankNode",this._readQuantifierList):this._error('Unexpected "@forSome"',e);case"@forAll":return this._n3Mode?(this._subject=null,this._predicate=this.N3_FORALL,this._quantifier="variable",this._readQuantifierList):this._error('Unexpected "@forAll"',e);case"literal":if(!this._n3Mode)return this._error("Unexpected literal",e);if(e.prefix.length===0)return this._literalValue=e.value,this._completeSubjectLiteral;this._subject=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,null,null,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._subject=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._readPredicateOrNamedGraph)}return this._readPredicateOrNamedGraph}_readPredicate(e){const u=e.type;switch(u){case"inverse":this._inversePredicate=!0;case"abbreviation":this._predicate=this.ABBREVIATIONS[e.value];break;case".":case"]":case"}":return this._predicate===null?this._error(`Unexpected ${u}`,e):(this._subject=null,u==="]"?this._readBlankNodeTail(e):this._readPunctuation(e));case";":return this._predicate!==null?this._readPredicate:this._error("Expected predicate but got ;",e);case"[":if(this._n3Mode)return this._saveContext("blank",this._graph,this._subject,this._subject=this._factory.blankNode(),null),this._readBlankNodeHead;case"blank":if(!this._n3Mode)return this._error("Disallowed blank node as predicate",e);default:if((this._predicate=this._readEntity(e))===void 0)return}return this._readObject}_readObject(e){switch(e.type){case"literal":if(e.prefix.length===0)return this._literalValue=e.value,this._readDataTypeOrLang;this._object=this._factory.literal(e.value,this._factory.namedNode(e.prefix));break;case"[":return this._saveContext("blank",this._graph,this._subject,this._predicate,this._subject=this._factory.blankNode()),this._readBlankNodeHead;case"(":return this._saveContext("list",this._graph,this._subject,this._predicate,this.RDF_NIL),this._subject=null,this._readListItem;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);case"<<":return this._supportsRDFStar?(this._saveContext("<<",this._graph,this._subject,this._predicate,null),this._graph=null,this._readSubject):this._error("Unexpected RDF-star syntax",e);default:if((this._object=this._readEntity(e))===void 0)return;if(this._n3Mode)return this._getPathReader(this._getContextEndReader())}return this._getContextEndReader()}_readPredicateOrNamedGraph(e){return e.type==="{"?this._readGraph(e):this._readPredicate(e)}_readGraph(e){return e.type!=="{"?this._error(`Expected graph but got ${e.type}`,e):(this._graph=this._subject,this._subject=null,this._readSubject)}_readBlankNodeHead(e){return e.type==="]"?(this._subject=null,this._readBlankNodeTail(e)):(this._predicate=null,this._readPredicate(e))}_readBlankNodeTail(e){if(e.type!=="]")return this._readBlankNodePunctuation(e);this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph);const u=this._predicate===null;return this._restoreContext("blank",e),this._object!==null?this._getContextEndReader():this._predicate!==null?this._readObject:u?this._readPredicateOrNamedGraph:this._readPredicateAfterBlank}_readPredicateAfterBlank(e){switch(e.type){case".":case"}":return this._subject=null,this._readPunctuation(e);default:return this._readPredicate(e)}}_readListItem(e){let u=null,n=null,r=this._readListItem;const t=this._subject,i=this._contextStack,o=i[i.length-1];switch(e.type){case"[":this._saveContext("blank",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this._subject=u=this._factory.blankNode()),r=this._readBlankNodeHead;break;case"(":this._saveContext("list",this._graph,n=this._factory.blankNode(),this.RDF_FIRST,this.RDF_NIL),this._subject=null;break;case")":if(this._restoreContext("list",e),i.length!==0&&i[i.length-1].type==="list"&&this._emit(this._subject,this._predicate,this._object,this._graph),this._predicate===null){if(r=this._readPredicate,this._subject===this.RDF_NIL)return r}else if(r=this._getContextEndReader(),this._object===this.RDF_NIL)return r;n=this.RDF_NIL;break;case"literal":e.prefix.length===0?(this._literalValue=e.value,r=this._readListItemDataTypeOrLang):(u=this._factory.literal(e.value,this._factory.namedNode(e.prefix)),r=this._getContextEndReader());break;case"{":return this._n3Mode?(this._saveContext("formula",this._graph,this._subject,this._predicate,this._graph=this._factory.blankNode()),this._readSubject):this._error("Unexpected graph",e);default:if((u=this._readEntity(e))===void 0)return}if(n===null&&(this._subject=n=this._factory.blankNode()),t===null?o.predicate===null?o.subject=n:o.object=n:this._emit(t,this.RDF_REST,n,this._graph),u!==null){if(this._n3Mode&&(e.type==="IRI"||e.type==="prefixed"))return this._saveContext("item",this._graph,n,this.RDF_FIRST,u),this._subject=u,this._predicate=null,this._getPathReader(this._readListItem);this._emit(n,this.RDF_FIRST,u,this._graph)}return r}_readDataTypeOrLang(e){return this._completeObjectLiteral(e,!1)}_readListItemDataTypeOrLang(e){return this._completeObjectLiteral(e,!0)}_completeLiteral(e){let u=this._factory.literal(this._literalValue);switch(e.type){case"type":case"typeIRI":const n=this._readEntity(e);if(n===void 0)return;u=this._factory.literal(this._literalValue,n),e=null;break;case"langcode":u=this._factory.literal(this._literalValue,e.value),e=null;break}return{token:e,literal:u}}_completeSubjectLiteral(e){return this._subject=this._completeLiteral(e).literal,this._readPredicateOrNamedGraph}_completeObjectLiteral(e,u){const n=this._completeLiteral(e);if(n)return this._object=n.literal,u&&this._emit(this._subject,this.RDF_FIRST,this._object,this._graph),n.token===null?this._getContextEndReader():(this._readCallback=this._getContextEndReader(),this._readCallback(n.token))}_readFormulaTail(e){return e.type!=="}"?this._readPunctuation(e):(this._subject!==null&&this._emit(this._subject,this._predicate,this._object,this._graph),this._restoreContext("formula",e),this._object===null?this._readPredicate:this._getContextEndReader())}_readPunctuation(e){let u,n=this._graph;const r=this._subject,t=this._inversePredicate;switch(e.type){case"}":if(this._graph===null)return this._error("Unexpected graph closing",e);if(this._n3Mode)return this._readFormulaTail(e);this._graph=null;case".":this._subject=null,u=this._contextStack.length?this._readSubject:this._readInTopContext,t&&(this._inversePredicate=!1);break;case";":u=this._readPredicate;break;case",":u=this._readObject;break;case"{|":if(!this._supportsRDFStar)return this._error("Unexpected RDF-star syntax",e);const i=this._predicate,o=this._object;this._subject=this._factory.quad(r,i,o,this.DEFAULTGRAPH),u=this._readPredicate;break;case"|}":if(this._subject.termType!=="Quad")return this._error("Unexpected asserted triple closing",e);this._subject=null,u=this._readPunctuation;break;default:if(this._supportsQuads&&this._graph===null&&(n=this._readEntity(e))!==void 0){u=this._readQuadPunctuation;break}return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}if(r!==null){const i=this._predicate,o=this._object;t?this._emit(o,i,r,n):this._emit(r,i,o,n)}return u}_readBlankNodePunctuation(e){let u;switch(e.type){case";":u=this._readPredicate;break;case",":u=this._readObject;break;default:return this._error(`Expected punctuation to follow "${this._object.id}"`,e)}return this._emit(this._subject,this._predicate,this._object,this._graph),u}_readQuadPunctuation(e){return e.type!=="."?this._error("Expected dot to follow quad",e):this._readInTopContext}_readPrefix(e){return e.type!=="prefix"?this._error("Expected prefix to follow @prefix",e):(this._prefix=e.value,this._readPrefixIRI)}_readPrefixIRI(e){if(e.type!=="IRI")return this._error(`Expected IRI to follow prefix "${this._prefix}:"`,e);const u=this._readEntity(e);return this._prefixes[this._prefix]=u.value,this._prefixCallback(this._prefix,u),this._readDeclarationPunctuation}_readBaseIRI(e){const u=e.type==="IRI"&&this._resolveIRI(e.value);return u?(this._setBase(u),this._readDeclarationPunctuation):this._error("Expected valid IRI to follow base declaration",e)}_readNamedGraphLabel(e){switch(e.type){case"IRI":case"blank":case"prefixed":return this._readSubject(e),this._readGraph;case"[":return this._readNamedGraphBlankLabel;default:return this._error("Invalid graph label",e)}}_readNamedGraphBlankLabel(e){return e.type!=="]"?this._error("Invalid graph label",e):(this._subject=this._factory.blankNode(),this._readGraph)}_readDeclarationPunctuation(e){return this._sparqlStyle?(this._sparqlStyle=!1,this._readInTopContext(e)):e.type!=="."?this._error("Expected declaration to end with a dot",e):this._readInTopContext}_readQuantifierList(e){let u;switch(e.type){case"IRI":case"prefixed":if((u=this._readEntity(e,!0))!==void 0)break;default:return this._error(`Unexpected ${e.type}`,e)}return this._explicitQuantifiers?(this._subject===null?this._emit(this._graph||this.DEFAULTGRAPH,this._predicate,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH):this._emit(this._subject,this.RDF_REST,this._subject=this._factory.blankNode(),this.QUANTIFIERS_GRAPH),this._emit(this._subject,this.RDF_FIRST,u,this.QUANTIFIERS_GRAPH)):this._quantified[u.id]=this._factory[this._quantifier](this._factory.blankNode().value),this._readQuantifierPunctuation}_readQuantifierPunctuation(e){return e.type===","?this._readQuantifierList:(this._explicitQuantifiers&&(this._emit(this._subject,this.RDF_REST,this.RDF_NIL,this.QUANTIFIERS_GRAPH),this._subject=null),this._readCallback=this._getContextEndReader(),this._readCallback(e))}_getPathReader(e){return this._afterPath=e,this._readPath}_readPath(e){switch(e.type){case"!":return this._readForwardPath;case"^":return this._readBackwardPath;default:const u=this._contextStack,n=u.length&&u[u.length-1];if(n&&n.type==="item"){const r=this._subject;this._restoreContext("item",e),this._emit(this._subject,this.RDF_FIRST,r,this._graph)}return this._afterPath(e)}}_readForwardPath(e){let u,n;const r=this._factory.blankNode();if((n=this._readEntity(e))!==void 0)return this._predicate===null?(u=this._subject,this._subject=r):(u=this._object,this._object=r),this._emit(u,n,r,this._graph),this._readPath}_readBackwardPath(e){const u=this._factory.blankNode();let n,r;if((n=this._readEntity(e))!==void 0)return this._predicate===null?(r=this._subject,this._subject=u):(r=this._object,this._object=u),this._emit(u,n,r,this._graph),this._readPath}_readRDFStarTailOrGraph(e){return e.type!==">>"?this._supportsQuads&&this._graph===null&&(this._graph=this._readEntity(e))!==void 0?this._readRDFStarTail:this._error(`Expected >> to follow "${this._object.id}"`,e):this._readRDFStarTail(e)}_readRDFStarTail(e){if(e.type!==">>")return this._error(`Expected >> but got ${e.type}`,e);const u=this._factory.quad(this._subject,this._predicate,this._object,this._graph||this.DEFAULTGRAPH);return this._restoreContext("<<",e),this._subject===null?(this._subject=u,this._readPredicate):(this._object=u,this._getContextEndReader())}_getContextEndReader(){const e=this._contextStack;if(!e.length)return this._readPunctuation;switch(e[e.length-1].type){case"blank":return this._readBlankNodeTail;case"list":return this._readListItem;case"formula":return this._readFormulaTail;case"<<":return this._readRDFStarTailOrGraph}}_emit(e,u,n,r){this._callback(null,this._factory.quad(e,u,n,r||this.DEFAULTGRAPH))}_error(e,u){const n=new Error(`${e} on line ${u.line}.`);n.context={token:u,line:u.line,previousToken:this._lexer.previousToken},this._callback(n),this._callback=YI}_resolveIRI(e){return/^[a-z][a-z0-9+.-]*:/i.test(e)?e:this._resolveRelativeIRI(e)}_resolveRelativeIRI(e){if(!e.length)return this._base;switch(e[0]){case"#":return this._base+e;case"?":return this._base.replace(/(?:\?.*)?$/,e);case"/":return(e[1]==="/"?this._baseScheme:this._baseRoot)+this._removeDotSegments(e);default:return/^[^/:]*:/.test(e)?null:this._removeDotSegments(this._basePath+e)}}_removeDotSegments(e){if(!/(^|\/)\.\.?($|[/#?])/.test(e))return e;const u=e.length;let n="",r=-1,t=-1,i=0,o="/";for(;r<u;){switch(o){case":":if(t<0&&e[++r]==="/"&&e[++r]==="/")for(;(t=r+1)<u&&e[t]!=="/";)r=t;break;case"?":case"#":r=u;break;case"/":if(e[r+1]===".")switch(o=e[++r+1],o){case"/":n+=e.substring(i,r-1),i=r+1;break;case void 0:case"?":case"#":return n+e.substring(i,r)+e.substr(r+1);case".":if(o=e[++r+1],o===void 0||o==="/"||o==="?"||o==="#"){if(n+=e.substring(i,r-2),(i=n.lastIndexOf("/"))>=t&&(n=n.substr(0,i)),o!=="/")return`${n}/${e.substr(r+1)}`;i=r+1}}}o=e[++r]}return n+e.substring(i)}parse(e,u,n){let r,t,i;if(u&&(u.onQuad||u.onPrefix||u.onComment)?(r=u.onQuad,t=u.onPrefix,i=u.onComment):(r=u,t=n),this._readCallback=this._readInTopContext,this._sparqlStyle=!1,this._prefixes=Object.create(null),this._prefixes._=this._blankNodePrefix?this._blankNodePrefix.substr(2):`b${Cte++}_`,this._prefixCallback=t||YI,this._inversePredicate=!1,this._quantified=Object.create(null),!r){const l=[];let s;if(this._callback=(c,d)=>{c?s=c:d&&l.push(d)},this._lexer.tokenize(e).every(c=>this._readCallback=this._readCallback(c)),s)throw s;return l}let o=(l,s)=>{l!==null?(this._callback(l),this._callback=YI):this._readCallback&&(this._readCallback=this._readCallback(s))};i&&(this._lexer.comments=!0,o=(l,s)=>{l!==null?(this._callback(l),this._callback=YI):this._readCallback&&(s.type==="comment"?i(s.value):this._readCallback=this._readCallback(s))}),this._callback=r,this._lexer.tokenize(e,o)}}function YI(){}function J2e(a,e){a._factory=e,a.DEFAULTGRAPH=e.defaultGraph(),a.RDF_FIRST=e.namedNode(wa.rdf.first),a.RDF_REST=e.namedNode(wa.rdf.rest),a.RDF_NIL=e.namedNode(wa.rdf.nil),a.N3_FORALL=e.namedNode(wa.r.forAll),a.N3_FORSOME=e.namedNode(wa.r.forSome),a.ABBREVIATIONS={a:e.namedNode(wa.rdf.type),"=":e.namedNode(wa.owl.sameAs),">":e.namedNode(wa.log.implies),"<":e.namedNode(wa.log.isImpliedBy)},a.QUANTIFIERS_GRAPH=e.namedNode("urn:n3:quantifiers")}J2e(bP.prototype,fo);function jDe(a){return!!a&&a.termType==="NamedNode"}function MDe(a){return!!a&&a.termType==="BlankNode"}function CDe(a){return!!a&&a.termType==="Literal"}function LDe(a){return!!a&&a.termType==="Variable"}function qDe(a){return!!a&&a.termType==="Quad"}function m4(a){return!!a&&a.termType==="DefaultGraph"}function BDe(a){return m4(a.graph)}function UDe(a,e){return W2e({"":a.value||a},e)("")}function W2e(a,e){const u=Object.create(null);for(const r in a)n(r,a[r]);e=e||fo;function n(r,t){if(typeof t=="string"){const i=Object.create(null);u[r]=o=>i[o]||(i[o]=e.namedNode(t+o))}else if(!(r in u))throw new Error(`Unknown prefix: ${r}`);return u[r]}return n}const Y2e=Object.freeze(Object.defineProperty({__proto__:null,inDefaultGraph:BDe,isBlankNode:MDe,isDefaultGraph:m4,isLiteral:CDe,isNamedNode:jDe,isQuad:qDe,isVariable:LDe,prefix:UDe,prefixes:W2e},Symbol.toStringTag,{value:"Module"}));function rF(a){return a.replace(/[\]\/\(\)\*\+\?\.\\\$]/g,"\\$&")}const QDe=/^:?[^:?#]*(?:[?#]|$)|^file:|^[^:]*:\/*[^?#]+?\/(?:\.\.?(?:\/|$)|\/)/i,VDe=/^(?:(?:[^/?#]{3,}|\.?[^/?#.]\.?)(?:\/[^/?#]{3,}|\.?[^/?#.]\.?)*\/?)?(?:[?#]|$)/,Lte="./",HDe="../",UM="?",qte="#";class Y4{constructor(e){this.base=e,this._baseLength=0,this._baseMatcher=null,this._pathReplacements=new Array(e.length+1)}static supports(e){return!QDe.test(e)}_getBaseMatcher(){if(this._baseMatcher)return this._baseMatcher;if(!Y4.supports(this.base))return this._baseMatcher=/.^/;const e=/^[^:]*:\/*/.exec(this.base)[0],u=["^",rF(e)],n=[],r=[],t=/[^/?#]*([/?#])/y;let i,o=0,l=0,s=t.lastIndex=e.length;for(;!o&&!l&&(i=t.exec(this.base));)i[1]===qte?l=t.lastIndex-1:(u.push(rF(i[0]),"(?:"),n.push(")?"),i[1]!==UM?r.push(s=t.lastIndex):(o=s=t.lastIndex,l=this.base.indexOf(qte,o),this._pathReplacements[o]=UM));for(let c=0;c<r.length;c++)this._pathReplacements[r[c]]=HDe.repeat(r.length-c-1);return this._pathReplacements[r[r.length-1]]=Lte,this._baseLength=l>0?l:this.base.length,u.push(rF(this.base.substring(s,this._baseLength)),o?"(?:#|$)":"(?:[?#]|$)"),this._baseMatcher=new RegExp([...u,...n].join(""))}toRelative(e){const u=this._getBaseMatcher().exec(e);if(!u)return e;const n=u[0].length;if(n===this._baseLength&&n===e.length)return"";const r=this._pathReplacements[n];if(r){const t=e.substring(n);return r!==UM&&!VDe.test(t)?e:r===Lte&&/^[^?#]/.test(t)?t:r+t}return e.substring(n-1)}}const CT=fo.defaultGraph(),{rdf:kDe,xsd:yg}=wa,Bte=/["\\\t\n\r\b\f\u0000-\u0019\ud800-\udbff]/,Ute=/["\\\t\n\r\b\f\u0000-\u0019]|[\ud800-\udbff][\udc00-\udfff]/g,zDe={"\\":"\\\\",'"':'\\"',"	":"\\t","\n":"\\n","\r":"\\r","\b":"\\b","\f":"\\f"};class LT extends Hi{equals(e){return e===this}}class Z4{constructor(e,u){if(this._prefixRegex=/$0^/,e&&typeof e.write!="function"&&(u=e,e=null),u=u||{},this._lists=u.lists,e)this._outputStream=e,this._endStream=u.end===void 0?!0:!!u.end;else{let n="";this._outputStream={write(r,t,i){n+=r,i&&i()},end:r=>{r&&r(null,n)}},this._endStream=!0}this._subject=null,/triple|quad/i.test(u.format)?(this._lineMode=!0,this._writeQuad=this._writeQuadLine):(this._lineMode=!1,this._graph=CT,this._prefixIRIs=Object.create(null),u.prefixes&&this.addPrefixes(u.prefixes),u.baseIRI&&(this._baseIri=new Y4(u.baseIRI)))}get _inDefaultGraph(){return CT.equals(this._graph)}_write(e,u){this._outputStream.write(e,"utf8",u)}_writeQuad(e,u,n,r,t){try{r.equals(this._graph)||(this._write((this._subject===null?"":this._inDefaultGraph?`.
`:`
}
`)+(CT.equals(r)?"":`${this._encodeIriOrBlank(r)} {
`)),this._graph=r,this._subject=null),e.equals(this._subject)?u.equals(this._predicate)?this._write(`, ${this._encodeObject(n)}`,t):this._write(`;
    ${this._encodePredicate(this._predicate=u)} ${this._encodeObject(n)}`,t):this._write(`${(this._subject===null?"":`.
`)+this._encodeSubject(this._subject=e)} ${this._encodePredicate(this._predicate=u)} ${this._encodeObject(n)}`,t)}catch(i){t&&t(i)}}_writeQuadLine(e,u,n,r,t){delete this._prefixMatch,this._write(this.quadToString(e,u,n,r),t)}quadToString(e,u,n,r){return`${this._encodeSubject(e)} ${this._encodeIriOrBlank(u)} ${this._encodeObject(n)}${r&&r.value?` ${this._encodeIriOrBlank(r)} .
`:` .
`}`}quadsToString(e){let u="";for(const n of e)u+=this.quadToString(n.subject,n.predicate,n.object,n.graph);return u}_encodeSubject(e){return e.termType==="Quad"?this._encodeQuad(e):this._encodeIriOrBlank(e)}_encodeIriOrBlank(e){if(e.termType!=="NamedNode")return this._lists&&e.value in this._lists&&(e=this.list(this._lists[e.value])),"id"in e?e.id:`_:${e.value}`;let u=e.value;this._baseIri&&(u=this._baseIri.toRelative(u)),Bte.test(u)&&(u=u.replace(Ute,Qte));const n=this._prefixRegex.exec(u);return n?n[1]?this._prefixIRIs[n[1]]+n[2]:u:`<${u}>`}_encodeLiteral(e){let u=e.value;if(Bte.test(u)&&(u=u.replace(Ute,Qte)),e.language)return`"${u}"@${e.language}`;if(this._lineMode){if(e.datatype.value===yg.string)return`"${u}"`}else switch(e.datatype.value){case yg.string:return`"${u}"`;case yg.boolean:if(u==="true"||u==="false")return u;break;case yg.integer:if(/^[+-]?\d+$/.test(u))return u;break;case yg.decimal:if(/^[+-]?\d*\.\d+$/.test(u))return u;break;case yg.double:if(/^[+-]?(?:\d+\.\d*|\.?\d+)[eE][+-]?\d+$/.test(u))return u;break}return`"${u}"^^${this._encodeIriOrBlank(e.datatype)}`}_encodePredicate(e){return e.value===kDe.type?"a":this._encodeIriOrBlank(e)}_encodeObject(e){switch(e.termType){case"Quad":return this._encodeQuad(e);case"Literal":return this._encodeLiteral(e);default:return this._encodeIriOrBlank(e)}}_encodeQuad({subject:e,predicate:u,object:n,graph:r}){return`<<${this._encodeSubject(e)} ${this._encodePredicate(u)} ${this._encodeObject(n)}${m4(r)?"":` ${this._encodeIriOrBlank(r)}`}>>`}_blockedWrite(){throw new Error("Cannot write because the writer has been closed.")}addQuad(e,u,n,r,t){n===void 0?this._writeQuad(e.subject,e.predicate,e.object,e.graph,u):typeof r=="function"?this._writeQuad(e,u,n,CT,r):this._writeQuad(e,u,n,r||CT,t)}addQuads(e){for(let u=0;u<e.length;u++)this.addQuad(e[u])}addPrefix(e,u,n){const r={};r[e]=u,this.addPrefixes(r,n)}addPrefixes(e,u){if(!this._prefixIRIs)return u&&u();let n=!1;for(let r in e){let t=e[r];typeof t!="string"&&(t=t.value),n=!0,this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null,this._graph=""),this._prefixIRIs[t]=r+=":",this._write(`@prefix ${r} <${t}>.
`)}if(n){let r="",t="";for(const i in this._prefixIRIs)r+=r?`|${i}`:i,t+=(t?"|":"")+this._prefixIRIs[i];r=rF(r),this._prefixRegex=new RegExp(`^(?:${t})[^/]*$|^(${r})([_a-zA-Z0-9][\\-_a-zA-Z0-9]*)$`)}this._write(n?`
`:"",u)}blank(e,u){let n=e,r,t;switch(e===void 0?n=[]:e.termType?n=[{predicate:e,object:u}]:"length"in e||(n=[e]),t=n.length){case 0:return new LT("[]");case 1:if(r=n[0],!(r.object instanceof LT))return new LT(`[ ${this._encodePredicate(r.predicate)} ${this._encodeObject(r.object)} ]`);default:let i="[";for(let o=0;o<t;o++)r=n[o],r.predicate.equals(e)?i+=`, ${this._encodeObject(r.object)}`:(i+=`${(o?`;
  `:`
  `)+this._encodePredicate(r.predicate)} ${this._encodeObject(r.object)}`,e=r.predicate);return new LT(`${i}
]`)}}list(e){const u=e&&e.length||0,n=new Array(u);for(let r=0;r<u;r++)n[r]=this._encodeObject(e[r]);return new LT(`(${n.join(" ")})`)}end(e){this._subject!==null&&(this._write(this._inDefaultGraph?`.
`:`
}
`),this._subject=null),this._write=this._blockedWrite;let u=e&&((n,r)=>{u=null,e(n,r)});if(this._endStream)try{return this._outputStream.end(u)}catch{}u&&u()}}function Qte(a){let e=zDe[a];return e===void 0&&(a.length===1?(e=a.charCodeAt(0).toString(16),e="\\u0000".substr(0,6-e.length)+e):(e=((a.charCodeAt(0)-55296)*1024+a.charCodeAt(1)+9216).toString(16),e="\\U00000000".substr(0,10-e.length)+e)),e}var gP=Nr();const QM=Symbol("iter");function r4(a,e,u=4){if(u===0)return Object.assign(a,e);for(const n in e)a[n]=r4(a[n]||Object.create(null),e[n],u-1);return a}function Z2e(a,e,u=4){let n=!1;for(const r in a)if(r in e){const t=u===0?null:Z2e(a[r],e[r],u-1);if(t!==!1)n=n||Object.create(null),n[r]=t;else if(u===3)return!1}return n}function eTe(a,e,u=4){let n=!1;for(const r in a)if(!(r in e))n=n||Object.create(null),n[r]=u===0?null:r4({},a[r],u-1);else if(u!==0){const t=eTe(a[r],e[r],u-1);if(t!==!1)n=n||Object.create(null),n[r]=t;else if(u===3)return!1}return n}class kB{constructor(e={}){this._id=1,this._ids=Object.create(null),this._ids[""]=1,this._entities=Object.create(null),this._entities[1]="",this._blankNodeIndex=0,this._factory=e.factory||fo}_termFromId(e){if(e[0]==="."){const u=this._entities,n=e.split(".");return this._factory.quad(this._termFromId(u[n[1]]),this._termFromId(u[n[2]]),this._termFromId(u[n[3]]),n[4]&&this._termFromId(u[n[4]]))}return ab(e,this._factory)}_termToNumericId(e){if(e.termType==="Quad"){const u=this._termToNumericId(e.subject),n=this._termToNumericId(e.predicate),r=this._termToNumericId(e.object);let t;return u&&n&&r&&(m4(e.graph)||(t=this._termToNumericId(e.graph)))&&this._ids[t?`.${u}.${n}.${r}.${t}`:`.${u}.${n}.${r}`]}return this._ids[tl(e)]}_termToNewNumericId(e){const u=e&&e.termType==="Quad"?`.${this._termToNewNumericId(e.subject)}.${this._termToNewNumericId(e.predicate)}.${this._termToNewNumericId(e.object)}${m4(e.graph)?"":`.${this._termToNewNumericId(e.graph)}`}`:tl(e);return this._ids[u]||(this._ids[this._entities[++this._id]=u]=this._id)}createBlankNode(e){let u,n;if(e)for(u=e=`_:${e}`,n=1;this._ids[u];)u=e+n++;else do u=`_:b${this._blankNodeIndex++}`;while(this._ids[u]);return this._ids[u]=++this._id,this._entities[this._id]=u,this._factory.blankNode(u.substr(2))}}class ja{constructor(e,u){this._size=0,this._graphs=Object.create(null),!u&&e&&!e[0]&&typeof e.match!="function"&&(u=e,e=null),u=u||{},this._factory=u.factory||fo,this._entityIndex=u.entityIndex||new kB({factory:this._factory}),this._entities=this._entityIndex._entities,this._termFromId=this._entityIndex._termFromId.bind(this._entityIndex),this._termToNumericId=this._entityIndex._termToNumericId.bind(this._entityIndex),this._termToNewNumericId=this._entityIndex._termToNewNumericId.bind(this._entityIndex),e&&this.addAll(e)}get size(){let e=this._size;if(e!==null)return e;e=0;const u=this._graphs;let n,r;for(const t in u)for(const i in n=u[t].subjects)for(const o in r=n[i])e+=Object.keys(r[o]).length;return this._size=e}_addToIndex(e,u,n,r){const t=e[u]||(e[u]={}),i=t[n]||(t[n]={}),o=r in i;return o||(i[r]=null),!o}_removeFromIndex(e,u,n,r){const t=e[u],i=t[n];delete i[r];for(const o in i)return;delete t[n];for(const o in t)return;delete e[u]}*_findInIndex(e,u,n,r,t,i,o,l){let s,c,d;const f=this._entities,p=this._termFromId(f[l]),h={subject:null,predicate:null,object:null};u&&((s=e,e={})[u]=s[u]);for(const g in e)if(c=e[g]){h[t]=this._termFromId(f[g]),n&&((s=c,c={})[n]=s[n]);for(const v in c)if(d=c[v]){h[i]=this._termFromId(f[v]);const m=r?r in d?[r]:[]:Object.keys(d);for(let T=0;T<m.length;T++)h[o]=this._termFromId(f[m[T]]),yield this._factory.quad(h.subject,h.predicate,h.object,p)}}}_loop(e,u){for(const n in e)u(n)}_loopByKey0(e,u,n){let r,t;if(r=e[u])for(t in r)n(t)}_loopByKey1(e,u,n){let r,t;for(r in e)t=e[r],t[u]&&n(r)}_loopBy2Keys(e,u,n,r){let t,i,o;if((t=e[u])&&(i=t[n]))for(o in i)r(o)}_countInIndex(e,u,n,r){let t=0,i,o,l;u&&((i=e,e={})[u]=i[u]);for(const s in e)if(o=e[s]){n&&((i=o,o={})[n]=i[n]);for(const c in o)(l=o[c])&&(r?r in l&&t++:t+=Object.keys(l).length)}return t}_getGraphs(e){return e=e===""?1:e&&(this._termToNumericId(e)||-1),typeof e!="number"?this._graphs:{[e]:this._graphs[e]}}_uniqueEntities(e){const u=Object.create(null);return n=>{n in u||(u[n]=!0,e(this._termFromId(this._entities[n],this._factory)))}}add(e){return this.addQuad(e),this}addQuad(e,u,n,r){u||(r=e.graph,n=e.object,u=e.predicate,e=e.subject),r=r?this._termToNewNumericId(r):1;let t=this._graphs[r];return t||(t=this._graphs[r]={subjects:{},predicates:{},objects:{}},Object.freeze(t)),e=this._termToNewNumericId(e),u=this._termToNewNumericId(u),n=this._termToNewNumericId(n),this._addToIndex(t.subjects,e,u,n)?(this._addToIndex(t.predicates,u,n,e),this._addToIndex(t.objects,n,e,u),this._size=null,!0):!1}addQuads(e){for(let u=0;u<e.length;u++)this.addQuad(e[u])}delete(e){return this.removeQuad(e),this}has(e,u,n,r){return e&&e.subject&&({subject:e,predicate:u,object:n,graph:r}=e),!this.readQuads(e,u,n,r).next().done}import(e){return e.on("data",u=>{this.addQuad(u)}),e}removeQuad(e,u,n,r){u||({subject:e,predicate:u,object:n,graph:r}=e),r=r?this._termToNumericId(r):1;const t=this._graphs;let i,o,l;if(!(e=e&&this._termToNumericId(e))||!(u=u&&this._termToNumericId(u))||!(n=n&&this._termToNumericId(n))||!(i=t[r])||!(o=i.subjects[e])||!(l=o[u])||!(n in l))return!1;this._removeFromIndex(i.subjects,e,u,n),this._removeFromIndex(i.predicates,u,n,e),this._removeFromIndex(i.objects,n,e,u),this._size!==null&&this._size--;for(e in i.subjects)return!0;return delete t[r],!0}removeQuads(e){for(let u=0;u<e.length;u++)this.removeQuad(e[u])}remove(e){return e.on("data",u=>{this.removeQuad(u)}),e}removeMatches(e,u,n,r){const t=new gP.Readable({objectMode:!0}),i=this.readQuads(e,u,n,r);return t._read=o=>{for(;--o>=0;){const{done:l,value:s}=i.next();if(l){t.push(null);return}t.push(s)}},this.remove(t)}deleteGraph(e){return this.removeMatches(null,null,null,e)}getQuads(e,u,n,r){return[...this.readQuads(e,u,n,r)]}*readQuads(e,u,n,r){const t=this._getGraphs(r);let i,o,l,s;if(!(e&&!(o=this._termToNumericId(e))||u&&!(l=this._termToNumericId(u))||n&&!(s=this._termToNumericId(n))))for(const c in t)(i=t[c])&&(o?s?yield*this._findInIndex(i.objects,s,o,l,"object","subject","predicate",c):yield*this._findInIndex(i.subjects,o,l,null,"subject","predicate","object",c):l?yield*this._findInIndex(i.predicates,l,s,null,"predicate","object","subject",c):s?yield*this._findInIndex(i.objects,s,null,null,"object","subject","predicate",c):yield*this._findInIndex(i.subjects,null,null,null,"subject","predicate","object",c))}match(e,u,n,r){return new Zc(this,e,u,n,r,{entityIndex:this._entityIndex})}countQuads(e,u,n,r){const t=this._getGraphs(r);let i=0,o,l,s,c;if(e&&!(l=this._termToNumericId(e))||u&&!(s=this._termToNumericId(u))||n&&!(c=this._termToNumericId(n)))return 0;for(const d in t)(o=t[d])&&(e?n?i+=this._countInIndex(o.objects,c,l,s):i+=this._countInIndex(o.subjects,l,s,c):u?i+=this._countInIndex(o.predicates,s,c,l):i+=this._countInIndex(o.objects,c,l,s));return i}forEach(e,u,n,r,t){this.some(i=>(e(i,this),!1),u,n,r,t)}every(e,u,n,r,t){return!this.some(i=>!e(i,this),u,n,r,t)}some(e,u,n,r,t){for(const i of this.readQuads(u,n,r,t))if(e(i,this))return!0;return!1}getSubjects(e,u,n){const r=[];return this.forSubjects(t=>{r.push(t)},e,u,n),r}forSubjects(e,u,n,r){const t=this._getGraphs(r);let i,o,l;if(e=this._uniqueEntities(e),!(u&&!(o=this._termToNumericId(u))||n&&!(l=this._termToNumericId(n))))for(r in t)(i=t[r])&&(o?l?this._loopBy2Keys(i.predicates,o,l,e):this._loopByKey1(i.subjects,o,e):l?this._loopByKey0(i.objects,l,e):this._loop(i.subjects,e))}getPredicates(e,u,n){const r=[];return this.forPredicates(t=>{r.push(t)},e,u,n),r}forPredicates(e,u,n,r){const t=this._getGraphs(r);let i,o,l;if(e=this._uniqueEntities(e),!(u&&!(o=this._termToNumericId(u))||n&&!(l=this._termToNumericId(n))))for(r in t)(i=t[r])&&(o?l?this._loopBy2Keys(i.objects,l,o,e):this._loopByKey0(i.subjects,o,e):l?this._loopByKey1(i.predicates,l,e):this._loop(i.predicates,e))}getObjects(e,u,n){const r=[];return this.forObjects(t=>{r.push(t)},e,u,n),r}forObjects(e,u,n,r){const t=this._getGraphs(r);let i,o,l;if(e=this._uniqueEntities(e),!(u&&!(o=this._termToNumericId(u))||n&&!(l=this._termToNumericId(n))))for(r in t)(i=t[r])&&(o?l?this._loopBy2Keys(i.subjects,o,l,e):this._loopByKey1(i.objects,o,e):l?this._loopByKey0(i.predicates,l,e):this._loop(i.objects,e))}getGraphs(e,u,n){const r=[];return this.forGraphs(t=>{r.push(t)},e,u,n),r}forGraphs(e,u,n,r){for(const t in this._graphs)this.some(i=>(e(i.graph),!0),u,n,r,this._termFromId(this._entities[t]))}createBlankNode(e){return this._entityIndex.createBlankNode(e)}extractLists({remove:e=!1,ignoreErrors:u=!1}={}){const n={},r=u?(()=>!0):((o,l)=>{throw new Error(`${o.value} ${l}`)}),t=this.getQuads(null,wa.rdf.rest,wa.rdf.nil,null),i=e?[...t]:[];return t.forEach(o=>{const l=[];let s=!1,c,d;const f=o.graph;let p=o.subject;for(;p&&!s;){const h=this.getQuads(null,null,p,null),g=this.getQuads(p,null,null,null);let v,m=null,T=null,w=null;for(let E=0;E<g.length&&!s;E++)v=g[E],v.graph.equals(f)?c?s=r(p,"has non-list arcs out"):v.predicate.value===wa.rdf.first?m?s=r(p,"has multiple rdf:first arcs"):i.push(m=v):v.predicate.value===wa.rdf.rest?T?s=r(p,"has multiple rdf:rest arcs"):i.push(T=v):h.length?s=r(p,"can't be subject and object"):(c=v,d="subject"):s=r(p,"not confined to single graph");for(let E=0;E<h.length&&!s;++E)v=h[E],c?s=r(p,"can't have coreferences"):v.predicate.value===wa.rdf.rest?w?s=r(p,"has incoming rdf:rest arcs"):w=v:(c=v,d="object");m?l.unshift(m.object):s=r(p,"has no list head"),p=w&&w.subject}s?e=!1:c&&(n[c[d].value]=l)}),e&&this.removeQuads(i),n}addAll(e){if(e instanceof Zc&&(e=e.filtered),Array.isArray(e))this.addQuads(e);else if(e instanceof ja&&e._entityIndex===this._entityIndex)e._size!==0&&(this._graphs=r4(this._graphs,e._graphs),this._size=null);else for(const u of e)this.add(u);return this}contains(e){if(e instanceof Zc&&(e=e.filtered),e===this)return!0;if(!(e instanceof ja)||this._entityIndex!==e._entityIndex)return e.every(s=>this.has(s));const u=this._graphs,n=e._graphs;let r,t,i,o,l;for(const s in n){if(!(r=u[s]))return!1;r=r.subjects;for(const c in t=n[s].subjects){if(!(i=r[c]))return!1;for(const d in o=t[c]){if(!(l=i[d]))return!1;for(const f in o[d])if(!(f in l))return!1}}}return!0}deleteMatches(e,u,n,r){for(const t of this.match(e,u,n,r))this.removeQuad(t);return this}difference(e){if(e&&e instanceof Zc&&(e=e.filtered),e===this)return new ja({entityIndex:this._entityIndex});if(e instanceof ja&&e._entityIndex===this._entityIndex){const u=new ja({entityIndex:this._entityIndex}),n=eTe(this._graphs,e._graphs);return n&&(u._graphs=n,u._size=null),u}return this.filter(u=>!e.has(u))}equals(e){return e instanceof Zc&&(e=e.filtered),e===this||this.size===e.size&&this.contains(e)}filter(e){const u=new ja({entityIndex:this._entityIndex});for(const n of this)e(n,this)&&u.add(n);return u}intersection(e){if(e instanceof Zc&&(e=e.filtered),e===this){const u=new ja({entityIndex:this._entityIndex});return u._graphs=r4(Object.create(null),this._graphs),u._size=this._size,u}else if(e instanceof ja&&this._entityIndex===e._entityIndex){const u=new ja({entityIndex:this._entityIndex}),n=Z2e(e._graphs,this._graphs);return n&&(u._graphs=n,u._size=null),u}return this.filter(u=>e.has(u))}map(e){const u=new ja({entityIndex:this._entityIndex});for(const n of this)u.add(e(n,this));return u}reduce(e,u){const n=this.readQuads();let r=u===void 0?n.next().value:u;for(const t of n)r=e(r,t,this);return r}toArray(){return this.getQuads()}toCanonical(){throw new Error("not implemented")}toStream(){return this.match()}toString(){return new Z4().quadsToString(this)}union(e){const u=new ja({entityIndex:this._entityIndex});return u._graphs=r4(Object.create(null),this._graphs),u._size=this._size,u.addAll(e),u}*[Symbol.iterator](){yield*this.readQuads()}}function Co(a,e,u=0){const n=e[u];if(n&&!(n in a))return!1;let r=!1;for(const t in n?{[n]:a[n]}:a){const i=u===2?null:Co(a[t],e,u+1);i!==!1&&(r=r||Object.create(null),r[t]=i)}return r}class Zc extends gP.Readable{constructor(e,u,n,r,t,i){super({objectMode:!0}),Object.assign(this,{n3Store:e,subject:u,predicate:n,object:r,graph:t,options:i})}get filtered(){if(!this._filtered){const{n3Store:e,graph:u,object:n,predicate:r,subject:t}=this,i=this._filtered=new ja({factory:e._factory,entityIndex:this.options.entityIndex});let o,l,s;if(t&&!(o=i._termToNumericId(t))||r&&!(l=i._termToNumericId(r))||n&&!(s=i._termToNumericId(n)))return i;const c=e._getGraphs(u);for(const d in c){let f,p,h,g;(g=c[d])&&(!o&&l?(p=Co(g.predicates,[l,s,o]))&&(f=Co(g.subjects,[o,l,s]),h=Co(g.objects,[s,o,l])):s?(h=Co(g.objects,[s,o,l]))&&(f=Co(g.subjects,[o,l,s]),p=Co(g.predicates,[l,s,o])):(f=Co(g.subjects,[o,l,s]))&&(p=Co(g.predicates,[l,s,o]),h=Co(g.objects,[s,o,l])),f&&(i._graphs[d]={subjects:f,predicates:p,objects:h}))}i._size=null}return this._filtered}get size(){return this.filtered.size}_read(e){e>0&&!this[QM]&&(this[QM]=this[Symbol.iterator]());const u=this[QM];for(;--e>=0;){const{done:n,value:r}=u.next();if(n){this.push(null);return}this.push(r)}}addAll(e){return this.filtered.addAll(e)}contains(e){return this.filtered.contains(e)}deleteMatches(e,u,n,r){return this.filtered.deleteMatches(e,u,n,r)}difference(e){return this.filtered.difference(e)}equals(e){return this.filtered.equals(e)}every(e,u,n,r,t){return this.filtered.every(e,u,n,r,t)}filter(e){return this.filtered.filter(e)}forEach(e,u,n,r,t){return this.filtered.forEach(e,u,n,r,t)}import(e){return this.filtered.import(e)}intersection(e){return this.filtered.intersection(e)}map(e){return this.filtered.map(e)}some(e,u,n,r,t){return this.filtered.some(e,u,n,r,t)}toCanonical(){return this.filtered.toCanonical()}toStream(){return this._filtered?this._filtered.toStream():this.n3Store.match(this.subject,this.predicate,this.object,this.graph)}union(e){return this._filtered?this._filtered.union(e):this.n3Store.match(this.subject,this.predicate,this.object,this.graph).addAll(e)}toArray(){return this._filtered?this._filtered.toArray():this.n3Store.getQuads(this.subject,this.predicate,this.object,this.graph)}reduce(e,u){return this.filtered.reduce(e,u)}toString(){return new Z4().quadsToString(this)}add(e){return this.filtered.add(e)}delete(e){return this.filtered.delete(e)}has(e){return this.filtered.has(e)}match(e,u,n,r){return new Zc(this.filtered,e,u,n,r,this.options)}*[Symbol.iterator](){yield*this._filtered||this.n3Store.readQuads(this.subject,this.predicate,this.object,this.graph)}}class tTe{dataset(e){return new ja(e)}}function rTe(a){const e=[];for(const{subject:u,object:n}of a.match(null,fo.namedNode("http://www.w3.org/2000/10/swap/log#implies"),null,fo.defaultGraph())){const r=[...a.match(null,null,null,u)],t=[...a.match(null,null,null,n)];e.push({premise:r,conclusion:t})}return e}class nTe{constructor(e){this._store=e}_add(e,u,n,r,t){this._store._addToIndex(r.subjects,e,u,n)&&(this._store._addToIndex(r.predicates,u,n,e),this._store._addToIndex(r.objects,n,e,u),t())}_evaluatePremise(e,u,n,r=0){let t,i,o,l,s;const[c,d,f]=e.premise[r].value,p=u[e.premise[r].content],h=!(o=c.value);for(o in h?p:{[o]:p[o]})if(l=p[o]){h&&(c.value=Number(o)),t=!(o=d.value);for(o in t?l:{[o]:l[o]})if(s=l[o]){t&&(d.value=Number(o)),i=!(o=f.value);for(o in i?s:{[o]:s[o]})i&&(f.value=Number(o)),r===e.premise.length-1?e.conclusion.forEach(g=>{this._add(g.subject.value,g.predicate.value,g.object.value,u,()=>{n(g)})}):this._evaluatePremise(e,u,n,r+1);i&&(f.value=null)}t&&(d.value=null)}h&&(c.value=null)}_evaluateRules(e,u,n){for(let r=0;r<e.length;r++)this._evaluatePremise(e[r],u,n)}_reasonGraphNaive(e,u){const n=[];function r(o){o.next&&o.next.forEach(l=>{n.push([o.subject.value,o.predicate.value,o.object.value,l])})}const t=o=>{o.forEach(l=>{this._add(l.subject.value,l.predicate.value,l.object.value,u,()=>{r(l)})})};this._evaluateRules(e,u,r);let i;for(;(i=n.pop())!==void 0;){const[o,l,s,c]=i,d=c.basePremise.subject.value;d||(c.basePremise.subject.value=o);const f=c.basePremise.predicate.value;f||(c.basePremise.predicate.value=l);const p=c.basePremise.object.value;p||(c.basePremise.object.value=s),c.premise.length===0?t(c.conclusion):this._evaluatePremise(c,u,r),d||(c.basePremise.subject.value=null),f||(c.basePremise.predicate.value=null),p||(c.basePremise.object.value=null)}}_createRule({premise:e,conclusion:u}){const n={},r=i=>i.termType==="Variable"?n[i.value]=n[i.value]||{}:{value:this._store._termToNewNumericId(i)},t=i=>({subject:r(i.subject),predicate:r(i.predicate),object:r(i.object)});return{premise:e.map(i=>t(i)),conclusion:u.map(i=>t(i)),variables:Object.values(n)}}reason(e){Array.isArray(e)||(e=rTe(e)),e=e.map(n=>this._createRule(n));for(const n of e)for(const r of e)for(let t=0;t<r.premise.length;t++){const i=r.premise[t];for(const o of n.conclusion){if(VM(i.subject,o.subject)&&VM(i.predicate,o.predicate)&&VM(i.object,o.object)){const l=new Set,s=[];i.subject.value=i.subject.value||1,i.object.value=i.object.value||1,i.predicate.value=i.predicate.value||1;for(let c=0;c<r.premise.length;c++)c!==t&&s.push(Vte(r.premise[c],l));(o.next=o.next||[]).push({premise:s,conclusion:r.conclusion,basePremise:i})}r.variables.forEach(l=>{l.value=null})}}for(const n of e){const r=new Set;n.premise=n.premise.map(t=>Vte(t,r))}const u=this._store._getGraphs();for(const n in u)this._reasonGraphNaive(e,u[n]);this._store._size=null}}function Vte({subject:a,predicate:e,object:u},n){const r=a.value||n.has(a)||(n.add(a),!1),t=e.value||n.has(e)||(n.add(e),!1),i=u.value||n.has(u)||(n.add(u),!1);return!r&&t?{content:"predicates",value:[e,u,a]}:i?{content:"objects",value:[u,a,e]}:{content:"subjects",value:[a,e,u]}}function VM(a,e){return a.value===null&&(a.value=e.value),a.value===e.value}class aTe extends gP.Transform{constructor(e){super({decodeStrings:!0}),this._readableState.objectMode=!0;const u=new bP(e);let n,r;const t={onQuad:(i,o)=>{i&&this.emit("error",i)||o&&this.push(o)},onPrefix:(i,o)=>{this.emit("prefix",i,o)}};e&&e.comments&&(t.onComment=i=>{this.emit("comment",i)}),u.parse({on:(i,o)=>{switch(i){case"data":n=o;break;case"end":r=o;break}}},t),this._transform=(i,o,l)=>{n(i),l()},this._flush=i=>{r(),i()}}import(e){return e.on("data",u=>{this.write(u)}),e.on("end",()=>{this.end()}),e.on("error",u=>{this.emit("error",u)}),this}}class iTe extends gP.Transform{constructor(e){super({encoding:"utf8",writableObjectMode:!0});const u=this._writer=new Z4({write:(n,r,t)=>{this.push(n),t&&t()},end:n=>{this.push(null),n&&n()}},e);this._transform=(n,r,t)=>{u.addQuad(n,t)},this._flush=n=>{u.end(n)}}import(e){return e.on("data",u=>{this.write(u)}),e.on("end",()=>{this.end()}),e.on("error",u=>{this.emit("error",u)}),e.on("prefix",(u,n)=>{this._writer.addPrefix(u,n)}),this}}const GDe={Lexer:UB,Parser:bP,Writer:Z4,Store:ja,StoreFactory:tTe,EntityIndex:kB,StreamParser:aTe,StreamWriter:iTe,Util:Y2e,Reasoner:nTe,BaseIRI:Y4,DataFactory:fo,Term:Hi,NamedNode:mP,Literal:Qg,BlankNode:QB,Variable:VB,DefaultGraph:HB,Quad:i1,Triple:i1,termFromId:ab,termToId:tl},$De=Object.freeze(Object.defineProperty({__proto__:null,BaseIRI:Y4,BlankNode:QB,DataFactory:fo,DefaultGraph:HB,EntityIndex:kB,Lexer:UB,Literal:Qg,NamedNode:mP,Parser:bP,Quad:i1,Reasoner:nTe,Store:ja,StoreFactory:tTe,StreamParser:aTe,StreamWriter:iTe,Term:Hi,Triple:i1,Util:Y2e,Variable:VB,Writer:Z4,default:GDe,getRulesFromDataset:rTe,termFromId:ab,termToId:tl},Symbol.toStringTag,{value:"Module"})),Tl=VF($De);var Hte;function XDe(){if(Hte)return DT;Hte=1,Object.defineProperty(DT,"__esModule",{value:!0}),DT.ActorRdfParseN3=void 0;const a=E1(),e=lt(),u=Tl;let n=class extends a.ActorRdfParseFixedMediaTypes{constructor(t){super(t)}async runHandle(t,i,o){const l=t.context.getSafe(e.KeysInitQuery.dataFactory);t.data.on("error",c=>s.emit("error",c));const s=t.data.pipe(new u.StreamParser({factory:l,baseIRI:t.metadata?.baseIRI,format:i.endsWith("n3")?i:`${i}*`}));return{data:s,metadata:{triples:i==="text/turtle"||i==="application/n-triples"||i==="text/n3"}}}};return DT.ActorRdfParseN3=n,DT}var kte;function zB(){return kte||(kte=1,(function(a){var e=Zf&&Zf.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Zf&&Zf.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(XDe(),a)})(Zf)),Zf}var tp={},qT={},rp={},np={},ap={},HM={},zte;function KDe(){return zte||(zte=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.CHAR=`	
\r ---`,a.S=` 	\r
`,a.NAME_START_CHAR=":A-Z_a-z-----------",a.NAME_CHAR="-"+a.NAME_START_CHAR+".0-9--",a.CHAR_RE=new RegExp("^["+a.CHAR+"]$","u"),a.S_RE=new RegExp("^["+a.S+"]+$","u"),a.NAME_START_CHAR_RE=new RegExp("^["+a.NAME_START_CHAR+"]$","u"),a.NAME_CHAR_RE=new RegExp("^["+a.NAME_CHAR+"]$","u"),a.NAME_RE=new RegExp("^["+a.NAME_START_CHAR+"]["+a.NAME_CHAR+"]*$","u"),a.NMTOKEN_RE=new RegExp("^["+a.NAME_CHAR+"]+$","u");var e=9,u=10,n=13,r=32;a.S_LIST=[r,u,n,e];function t(s){return s>=r&&s<=55295||s===u||s===n||s===e||s>=57344&&s<=65533||s>=65536&&s<=1114111}a.isChar=t;function i(s){return s===r||s===u||s===n||s===e}a.isS=i;function o(s){return s>=65&&s<=90||s>=97&&s<=122||s===58||s===95||s===8204||s===8205||s>=192&&s<=214||s>=216&&s<=246||s>=248&&s<=767||s>=880&&s<=893||s>=895&&s<=8191||s>=8304&&s<=8591||s>=11264&&s<=12271||s>=12289&&s<=55295||s>=63744&&s<=64975||s>=65008&&s<=65533||s>=65536&&s<=983039}a.isNameStartChar=o;function l(s){return o(s)||s>=48&&s<=57||s===45||s===46||s===183||s>=768&&s<=879||s>=8255&&s<=8256}a.isNameChar=l})(HM)),HM}var kM={},Gte;function JDe(){return Gte||(Gte=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.CHAR="---",a.RESTRICTED_CHAR="-\b\v\f---",a.S=` 	\r
`,a.NAME_START_CHAR=":A-Z_a-z-----------",a.NAME_CHAR="-"+a.NAME_START_CHAR+".0-9--",a.CHAR_RE=new RegExp("^["+a.CHAR+"]$","u"),a.RESTRICTED_CHAR_RE=new RegExp("^["+a.RESTRICTED_CHAR+"]$","u"),a.S_RE=new RegExp("^["+a.S+"]+$","u"),a.NAME_START_CHAR_RE=new RegExp("^["+a.NAME_START_CHAR+"]$","u"),a.NAME_CHAR_RE=new RegExp("^["+a.NAME_CHAR+"]$","u"),a.NAME_RE=new RegExp("^["+a.NAME_START_CHAR+"]["+a.NAME_CHAR+"]*$","u"),a.NMTOKEN_RE=new RegExp("^["+a.NAME_CHAR+"]+$","u");var e=9,u=10,n=13,r=32;a.S_LIST=[r,u,n,e];function t(d){return d>=1&&d<=55295||d>=57344&&d<=65533||d>=65536&&d<=1114111}a.isChar=t;function i(d){return d>=1&&d<=8||d===11||d===12||d>=14&&d<=31||d>=127&&d<=132||d>=134&&d<=159}a.isRestrictedChar=i;function o(d){return d===9||d===10||d===13||d>31&&d<127||d===133||d>159&&d<=55295||d>=57344&&d<=65533||d>=65536&&d<=1114111}a.isCharAndNotRestricted=o;function l(d){return d===r||d===u||d===n||d===e}a.isS=l;function s(d){return d>=65&&d<=90||d>=97&&d<=122||d===58||d===95||d===8204||d===8205||d>=192&&d<=214||d>=216&&d<=246||d>=248&&d<=767||d>=880&&d<=893||d>=895&&d<=8191||d>=8304&&d<=8591||d>=11264&&d<=12271||d>=12289&&d<=55295||d>=63744&&d<=64975||d>=65008&&d<=65533||d>=65536&&d<=983039}a.isNameStartChar=s;function c(d){return s(d)||d>=48&&d<=57||d===45||d===46||d===183||d>=768&&d<=879||d>=8255&&d<=8256}a.isNameChar=c})(kM)),kM}var zM={},$te;function WDe(){return $te||($te=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.NC_NAME_START_CHAR="A-Z_a-z------------",a.NC_NAME_CHAR="-"+a.NC_NAME_START_CHAR+".0-9--",a.NC_NAME_START_CHAR_RE=new RegExp("^["+a.NC_NAME_START_CHAR+"]$","u"),a.NC_NAME_CHAR_RE=new RegExp("^["+a.NC_NAME_CHAR+"]$","u"),a.NC_NAME_RE=new RegExp("^["+a.NC_NAME_START_CHAR+"]["+a.NC_NAME_CHAR+"]*$","u");function e(n){return n>=65&&n<=90||n===95||n>=97&&n<=122||n>=192&&n<=214||n>=216&&n<=246||n>=248&&n<=767||n>=880&&n<=893||n>=895&&n<=8191||n>=8204&&n<=8205||n>=8304&&n<=8591||n>=11264&&n<=12271||n>=12289&&n<=55295||n>=63744&&n<=64975||n>=65008&&n<=65533||n>=65536&&n<=983039}a.isNCNameStartChar=e;function u(n){return e(n)||n===45||n===46||n>=48&&n<=57||n===183||n>=768&&n<=879||n>=8255&&n<=8256}a.isNCNameChar=u})(zM)),zM}var Xte;function uTe(){if(Xte)return ap;Xte=1,Object.defineProperty(ap,"__esModule",{value:!0}),ap.SaxesParser=ap.EVENTS=void 0;const a=KDe(),e=JDe(),u=WDe();var n=a.isS,r=a.isChar,t=a.isNameStartChar,i=a.isNameChar,o=a.S_LIST,l=a.NAME_RE,s=e.isChar,c=u.isNCNameStartChar,d=u.isNCNameChar,f=u.NC_NAME_RE;const p="http://www.w3.org/XML/1998/namespace",h="http://www.w3.org/2000/xmlns/",g={__proto__:null,xml:p,xmlns:h},v={__proto__:null,amp:"&",gt:">",lt:"<",quot:'"',apos:"'"},m=-1,T=-2,w=0,E=1,S=2,N=3,j=4,q=5,O=6,I=7,A=8,P=9,C=10,B=11,H=12,V=13,G=14,Z=15,ae=16,W=17,te=18,se=19,pe=20,le=21,Ee=22,Oe=23,Ie=24,Ae=25,be=26,ee=27,_=28,F=29,D=30,L=31,Q=32,Y=33,$=34,ue=35,ne=36,ce=37,Se=38,xe=39,Ce=40,Ve=41,Ke=42,Ye=43,oe=44,X=9,J=10,he=13,ve=32,ye=33,re=34,Ne=38,Le=39,Pe=45,Fe=47,R=59,k=60,K=61,de=62,ge=63,Ue=91,je=93,ze=133,at=8232,fe=ht=>ht===re||ht===Le,Te=[re,Le],qe=[...Te,Ue,de],it=[...Te,k,je],Me=[K,ge,...o],st=[...o,de,Ne,k];function tt(ht,Re,Qe){switch(Re){case"xml":Qe!==p&&ht.fail(`xml prefix must be bound to ${p}.`);break;case"xmlns":Qe!==h&&ht.fail(`xmlns prefix must be bound to ${h}.`);break}switch(Qe){case h:ht.fail(Re===""?`the default namespace may not be set to ${Qe}.`:`may not assign a prefix (even "xmlns") to the URI ${h}.`);break;case p:switch(Re){case"xml":break;case"":ht.fail(`the default namespace may not be set to ${Qe}.`);break;default:ht.fail("may not assign the xml namespace to another prefix.")}break}}function Ot(ht,Re){for(const Qe of Object.keys(Re))tt(ht,Qe,Re[Qe])}const yt=ht=>f.test(ht),bt=ht=>l.test(ht),Tt=0,xt=1,wt=2;ap.EVENTS=["xmldecl","text","processinginstruction","doctype","comment","opentagstart","attribute","opentag","closetag","cdata","error","end","ready"];const gt={xmldecl:"xmldeclHandler",text:"textHandler",processinginstruction:"piHandler",doctype:"doctypeHandler",comment:"commentHandler",opentagstart:"openTagStartHandler",attribute:"attributeHandler",opentag:"openTagHandler",closetag:"closeTagHandler",cdata:"cdataHandler",error:"errorHandler",end:"endHandler",ready:"readyHandler"};class lr{get closed(){return this._closed}constructor(Re){this.opt=Re??{},this.fragmentOpt=!!this.opt.fragment;const Qe=this.xmlnsOpt=!!this.opt.xmlns;if(this.trackPosition=this.opt.position!==!1,this.fileName=this.opt.fileName,Qe){this.nameStartCheck=c,this.nameCheck=d,this.isName=yt,this.processAttribs=this.processAttribsNS,this.pushAttrib=this.pushAttribNS,this.ns=Object.assign({__proto__:null},g);const ke=this.opt.additionalNamespaces;ke!=null&&(Ot(this,ke),Object.assign(this.ns,ke))}else this.nameStartCheck=t,this.nameCheck=i,this.isName=bt,this.processAttribs=this.processAttribsPlain,this.pushAttrib=this.pushAttribPlain;this.stateTable=[this.sBegin,this.sBeginWhitespace,this.sDoctype,this.sDoctypeQuote,this.sDTD,this.sDTDQuoted,this.sDTDOpenWaka,this.sDTDOpenWakaBang,this.sDTDComment,this.sDTDCommentEnding,this.sDTDCommentEnded,this.sDTDPI,this.sDTDPIEnding,this.sText,this.sEntity,this.sOpenWaka,this.sOpenWakaBang,this.sComment,this.sCommentEnding,this.sCommentEnded,this.sCData,this.sCDataEnding,this.sCDataEnding2,this.sPIFirstChar,this.sPIRest,this.sPIBody,this.sPIEnding,this.sXMLDeclNameStart,this.sXMLDeclName,this.sXMLDeclEq,this.sXMLDeclValueStart,this.sXMLDeclValue,this.sXMLDeclSeparator,this.sXMLDeclEnding,this.sOpenTag,this.sOpenTagSlash,this.sAttrib,this.sAttribName,this.sAttribNameSawWhite,this.sAttribValue,this.sAttribValueQuoted,this.sAttribValueClosed,this.sAttribValueUnquoted,this.sCloseTag,this.sCloseTagSawWhite],this._init()}_init(){var Re;this.openWakaBang="",this.text="",this.name="",this.piTarget="",this.entity="",this.q=null,this.tags=[],this.tag=null,this.topNS=null,this.chunk="",this.chunkPosition=0,this.i=0,this.prevI=0,this.carriedFromPrevious=void 0,this.forbiddenState=Tt,this.attribList=[];const{fragmentOpt:Qe}=this;this.state=Qe?V:w,this.reportedTextBeforeRoot=this.reportedTextAfterRoot=this.closedRoot=this.sawRoot=Qe,this.xmlDeclPossible=!Qe,this.xmlDeclExpects=["version"],this.entityReturnState=void 0;let{defaultXMLVersion:ke}=this.opt;if(ke===void 0){if(this.opt.forceXMLVersion===!0)throw new Error("forceXMLVersion set but defaultXMLVersion is not set");ke="1.0"}this.setXMLVersion(ke),this.positionAtNewLine=0,this.doctype=!1,this._closed=!1,this.xmlDecl={version:void 0,encoding:void 0,standalone:void 0},this.line=1,this.column=0,this.ENTITIES=Object.create(v),(Re=this.readyHandler)===null||Re===void 0||Re.call(this)}get position(){return this.chunkPosition+this.i}get columnIndex(){return this.position-this.positionAtNewLine}on(Re,Qe){this[gt[Re]]=Qe}off(Re){this[gt[Re]]=void 0}makeError(Re){var Qe;let ke=(Qe=this.fileName)!==null&&Qe!==void 0?Qe:"";return this.trackPosition&&(ke.length>0&&(ke+=":"),ke+=`${this.line}:${this.column}`),ke.length>0&&(ke+=": "),new Error(ke+Re)}fail(Re){const Qe=this.makeError(Re),ke=this.errorHandler;if(ke===void 0)throw Qe;return ke(Qe),this}write(Re){if(this.closed)return this.fail("cannot write after close; assign an onready handler.");let Qe=!1;Re===null?(Qe=!0,Re=""):typeof Re=="object"&&(Re=Re.toString()),this.carriedFromPrevious!==void 0&&(Re=`${this.carriedFromPrevious}${Re}`,this.carriedFromPrevious=void 0);let ke=Re.length;const vt=Re.charCodeAt(ke-1);!Qe&&(vt===he||vt>=55296&&vt<=56319)&&(this.carriedFromPrevious=Re[ke-1],ke--,Re=Re.slice(0,ke));const{stateTable:St}=this;for(this.chunk=Re,this.i=0;this.i<ke;)St[this.state].call(this);return this.chunkPosition+=ke,Qe?this.end():this}close(){return this.write(null)}getCode10(){const{chunk:Re,i:Qe}=this;if(this.prevI=Qe,this.i=Qe+1,Qe>=Re.length)return m;const ke=Re.charCodeAt(Qe);if(this.column++,ke<55296){if(ke>=ve||ke===X)return ke;switch(ke){case J:return this.line++,this.column=0,this.positionAtNewLine=this.position,J;case he:return Re.charCodeAt(Qe+1)===J&&(this.i=Qe+2),this.line++,this.column=0,this.positionAtNewLine=this.position,T;default:return this.fail("disallowed character."),ke}}if(ke>56319)return ke>=57344&&ke<=65533||this.fail("disallowed character."),ke;const vt=65536+(ke-55296)*1024+(Re.charCodeAt(Qe+1)-56320);return this.i=Qe+2,vt>1114111&&this.fail("disallowed character."),vt}getCode11(){const{chunk:Re,i:Qe}=this;if(this.prevI=Qe,this.i=Qe+1,Qe>=Re.length)return m;const ke=Re.charCodeAt(Qe);if(this.column++,ke<55296){if(ke>31&&ke<127||ke>159&&ke!==at||ke===X)return ke;switch(ke){case J:return this.line++,this.column=0,this.positionAtNewLine=this.position,J;case he:{const St=Re.charCodeAt(Qe+1);(St===J||St===ze)&&(this.i=Qe+2)}case ze:case at:return this.line++,this.column=0,this.positionAtNewLine=this.position,T;default:return this.fail("disallowed character."),ke}}if(ke>56319)return ke>=57344&&ke<=65533||this.fail("disallowed character."),ke;const vt=65536+(ke-55296)*1024+(Re.charCodeAt(Qe+1)-56320);return this.i=Qe+2,vt>1114111&&this.fail("disallowed character."),vt}getCodeNorm(){const Re=this.getCode();return Re===T?J:Re}unget(){this.i=this.prevI,this.column--}captureTo(Re){let{i:Qe}=this;const{chunk:ke}=this;for(;;){const vt=this.getCode(),St=vt===T,Qt=St?J:vt;if(Qt===m||Re.includes(Qt))return this.text+=ke.slice(Qe,this.prevI),Qt;St&&(this.text+=`${ke.slice(Qe,this.prevI)}
`,Qe=this.i)}}captureToChar(Re){let{i:Qe}=this;const{chunk:ke}=this;for(;;){let vt=this.getCode();switch(vt){case T:this.text+=`${ke.slice(Qe,this.prevI)}
`,Qe=this.i,vt=J;break;case m:return this.text+=ke.slice(Qe),!1}if(vt===Re)return this.text+=ke.slice(Qe,this.prevI),!0}}captureNameChars(){const{chunk:Re,i:Qe}=this;for(;;){const ke=this.getCode();if(ke===m)return this.name+=Re.slice(Qe),m;if(!i(ke))return this.name+=Re.slice(Qe,this.prevI),ke===T?J:ke}}skipSpaces(){for(;;){const Re=this.getCodeNorm();if(Re===m||!n(Re))return Re}}setXMLVersion(Re){this.currentXMLVersion=Re,Re==="1.0"?(this.isChar=r,this.getCode=this.getCode10):(this.isChar=s,this.getCode=this.getCode11)}sBegin(){this.chunk.charCodeAt(0)===65279&&(this.i++,this.column++),this.state=E}sBeginWhitespace(){const Re=this.i,Qe=this.skipSpaces();switch(this.prevI!==Re&&(this.xmlDeclPossible=!1),Qe){case k:if(this.state=Z,this.text.length!==0)throw new Error("no-empty text at start");break;case m:break;default:this.unget(),this.state=V,this.xmlDeclPossible=!1}}sDoctype(){var Re;const Qe=this.captureTo(qe);switch(Qe){case de:{(Re=this.doctypeHandler)===null||Re===void 0||Re.call(this,this.text),this.text="",this.state=V,this.doctype=!0;break}case m:break;default:this.text+=String.fromCodePoint(Qe),Qe===Ue?this.state=j:fe(Qe)&&(this.state=N,this.q=Qe)}}sDoctypeQuote(){const Re=this.q;this.captureToChar(Re)&&(this.text+=String.fromCodePoint(Re),this.q=null,this.state=S)}sDTD(){const Re=this.captureTo(it);Re!==m&&(this.text+=String.fromCodePoint(Re),Re===je?this.state=S:Re===k?this.state=O:fe(Re)&&(this.state=q,this.q=Re))}sDTDQuoted(){const Re=this.q;this.captureToChar(Re)&&(this.text+=String.fromCodePoint(Re),this.state=j,this.q=null)}sDTDOpenWaka(){const Re=this.getCodeNorm();switch(this.text+=String.fromCodePoint(Re),Re){case ye:this.state=I,this.openWakaBang="";break;case ge:this.state=B;break;default:this.state=j}}sDTDOpenWakaBang(){const Re=String.fromCodePoint(this.getCodeNorm()),Qe=this.openWakaBang+=Re;this.text+=Re,Qe!=="-"&&(this.state=Qe==="--"?A:j,this.openWakaBang="")}sDTDComment(){this.captureToChar(Pe)&&(this.text+="-",this.state=P)}sDTDCommentEnding(){const Re=this.getCodeNorm();this.text+=String.fromCodePoint(Re),this.state=Re===Pe?C:A}sDTDCommentEnded(){const Re=this.getCodeNorm();this.text+=String.fromCodePoint(Re),Re===de?this.state=j:(this.fail("malformed comment."),this.state=A)}sDTDPI(){this.captureToChar(ge)&&(this.text+="?",this.state=H)}sDTDPIEnding(){const Re=this.getCodeNorm();this.text+=String.fromCodePoint(Re),Re===de&&(this.state=j)}sText(){this.tags.length!==0?this.handleTextInRoot():this.handleTextOutsideRoot()}sEntity(){let{i:Re}=this;const{chunk:Qe}=this;e:for(;;)switch(this.getCode()){case T:this.entity+=`${Qe.slice(Re,this.prevI)}
`,Re=this.i;break;case R:{const{entityReturnState:ke}=this,vt=this.entity+Qe.slice(Re,this.prevI);this.state=ke;let St;vt===""?(this.fail("empty entity name."),St="&;"):(St=this.parseEntity(vt),this.entity=""),(ke!==V||this.textHandler!==void 0)&&(this.text+=St);break e}case m:this.entity+=Qe.slice(Re);break e}}sOpenWaka(){const Re=this.getCode();if(t(Re))this.state=$,this.unget(),this.xmlDeclPossible=!1;else switch(Re){case Fe:this.state=Ye,this.xmlDeclPossible=!1;break;case ye:this.state=ae,this.openWakaBang="",this.xmlDeclPossible=!1;break;case ge:this.state=Oe;break;default:this.fail("disallowed character in tag name"),this.state=V,this.xmlDeclPossible=!1}}sOpenWakaBang(){switch(this.openWakaBang+=String.fromCodePoint(this.getCodeNorm()),this.openWakaBang){case"[CDATA[":!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0),this.state=pe,this.openWakaBang="";break;case"--":this.state=W,this.openWakaBang="";break;case"DOCTYPE":this.state=S,(this.doctype||this.sawRoot)&&this.fail("inappropriately located doctype declaration."),this.openWakaBang="";break;default:this.openWakaBang.length>=7&&this.fail("incorrect syntax.")}}sComment(){this.captureToChar(Pe)&&(this.state=te)}sCommentEnding(){var Re;const Qe=this.getCodeNorm();Qe===Pe?(this.state=se,(Re=this.commentHandler)===null||Re===void 0||Re.call(this,this.text),this.text=""):(this.text+=`-${String.fromCodePoint(Qe)}`,this.state=W)}sCommentEnded(){const Re=this.getCodeNorm();Re!==de?(this.fail("malformed comment."),this.text+=`--${String.fromCodePoint(Re)}`,this.state=W):this.state=V}sCData(){this.captureToChar(je)&&(this.state=le)}sCDataEnding(){const Re=this.getCodeNorm();Re===je?this.state=Ee:(this.text+=`]${String.fromCodePoint(Re)}`,this.state=pe)}sCDataEnding2(){var Re;const Qe=this.getCodeNorm();switch(Qe){case de:{(Re=this.cdataHandler)===null||Re===void 0||Re.call(this,this.text),this.text="",this.state=V;break}case je:this.text+="]";break;default:this.text+=`]]${String.fromCodePoint(Qe)}`,this.state=pe}}sPIFirstChar(){const Re=this.getCodeNorm();this.nameStartCheck(Re)?(this.piTarget+=String.fromCodePoint(Re),this.state=Ie):Re===ge||n(Re)?(this.fail("processing instruction without a target."),this.state=Re===ge?be:Ae):(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(Re),this.state=Ie)}sPIRest(){const{chunk:Re,i:Qe}=this;for(;;){const ke=this.getCodeNorm();if(ke===m){this.piTarget+=Re.slice(Qe);return}if(!this.nameCheck(ke)){this.piTarget+=Re.slice(Qe,this.prevI);const vt=ke===ge;vt||n(ke)?this.piTarget==="xml"?(this.xmlDeclPossible||this.fail("an XML declaration must be at the start of the document."),this.state=vt?Y:ee):this.state=vt?be:Ae:(this.fail("disallowed character in processing instruction name."),this.piTarget+=String.fromCodePoint(ke));break}}}sPIBody(){if(this.text.length===0){const Re=this.getCodeNorm();Re===ge?this.state=be:n(Re)||(this.text=String.fromCodePoint(Re))}else this.captureToChar(ge)&&(this.state=be)}sPIEnding(){var Re;const Qe=this.getCodeNorm();if(Qe===de){const{piTarget:ke}=this;ke.toLowerCase()==="xml"&&this.fail("the XML declaration must appear at the start of the document."),(Re=this.piHandler)===null||Re===void 0||Re.call(this,{target:ke,body:this.text}),this.piTarget=this.text="",this.state=V}else Qe===ge?this.text+="?":(this.text+=`?${String.fromCodePoint(Qe)}`,this.state=Ae);this.xmlDeclPossible=!1}sXMLDeclNameStart(){const Re=this.skipSpaces();if(Re===ge){this.state=Y;return}Re!==m&&(this.state=_,this.name=String.fromCodePoint(Re))}sXMLDeclName(){const Re=this.captureTo(Me);if(Re===ge){this.state=Y,this.name+=this.text,this.text="",this.fail("XML declaration is incomplete.");return}if(n(Re)||Re===K){if(this.name+=this.text,this.text="",!this.xmlDeclExpects.includes(this.name))switch(this.name.length){case 0:this.fail("did not expect any more name/value pairs.");break;case 1:this.fail(`expected the name ${this.xmlDeclExpects[0]}.`);break;default:this.fail(`expected one of ${this.xmlDeclExpects.join(", ")}`)}this.state=Re===K?D:F}}sXMLDeclEq(){const Re=this.getCodeNorm();if(Re===ge){this.state=Y,this.fail("XML declaration is incomplete.");return}n(Re)||(Re!==K&&this.fail("value required."),this.state=D)}sXMLDeclValueStart(){const Re=this.getCodeNorm();if(Re===ge){this.state=Y,this.fail("XML declaration is incomplete.");return}n(Re)||(fe(Re)?this.q=Re:(this.fail("value must be quoted."),this.q=ve),this.state=L)}sXMLDeclValue(){const Re=this.captureTo([this.q,ge]);if(Re===ge){this.state=Y,this.text="",this.fail("XML declaration is incomplete.");return}if(Re===m)return;const Qe=this.text;switch(this.text="",this.name){case"version":{this.xmlDeclExpects=["encoding","standalone"];const ke=Qe;this.xmlDecl.version=ke,/^1\.[0-9]+$/.test(ke)?this.opt.forceXMLVersion||this.setXMLVersion(ke):this.fail("version number must match /^1\\.[0-9]+$/.");break}case"encoding":/^[A-Za-z][A-Za-z0-9._-]*$/.test(Qe)||this.fail("encoding value must match 	/^[A-Za-z0-9][A-Za-z0-9._-]*$/."),this.xmlDeclExpects=["standalone"],this.xmlDecl.encoding=Qe;break;case"standalone":Qe!=="yes"&&Qe!=="no"&&this.fail('standalone value must match "yes" or "no".'),this.xmlDeclExpects=[],this.xmlDecl.standalone=Qe;break}this.name="",this.state=Q}sXMLDeclSeparator(){const Re=this.getCodeNorm();if(Re===ge){this.state=Y;return}n(Re)||(this.fail("whitespace required."),this.unget()),this.state=ee}sXMLDeclEnding(){var Re;this.getCodeNorm()===de?(this.piTarget!=="xml"?this.fail("processing instructions are not allowed before root."):this.name!=="version"&&this.xmlDeclExpects.includes("version")&&this.fail("XML declaration must contain a version."),(Re=this.xmldeclHandler)===null||Re===void 0||Re.call(this,this.xmlDecl),this.name="",this.piTarget=this.text="",this.state=V):this.fail("The character ? is disallowed anywhere in XML declarations."),this.xmlDeclPossible=!1}sOpenTag(){var Re;const Qe=this.captureNameChars();if(Qe===m)return;const ke=this.tag={name:this.name,attributes:Object.create(null)};switch(this.name="",this.xmlnsOpt&&(this.topNS=ke.ns=Object.create(null)),(Re=this.openTagStartHandler)===null||Re===void 0||Re.call(this,ke),this.sawRoot=!0,!this.fragmentOpt&&this.closedRoot&&this.fail("documents may contain only one root."),Qe){case de:this.openTag();break;case Fe:this.state=ue;break;default:n(Qe)||this.fail("disallowed character in tag name."),this.state=ne}}sOpenTagSlash(){this.getCode()===de?this.openSelfClosingTag():(this.fail("forward-slash in opening tag not followed by >."),this.state=ne)}sAttrib(){const Re=this.skipSpaces();Re!==m&&(t(Re)?(this.unget(),this.state=ce):Re===de?this.openTag():Re===Fe?this.state=ue:this.fail("disallowed character in attribute name."))}sAttribName(){const Re=this.captureNameChars();Re===K?this.state=xe:n(Re)?this.state=Se:Re===de?(this.fail("attribute without value."),this.pushAttrib(this.name,this.name),this.name=this.text="",this.openTag()):Re!==m&&this.fail("disallowed character in attribute name.")}sAttribNameSawWhite(){const Re=this.skipSpaces();switch(Re){case m:return;case K:this.state=xe;break;default:this.fail("attribute without value."),this.text="",this.name="",Re===de?this.openTag():t(Re)?(this.unget(),this.state=ce):(this.fail("disallowed character in attribute name."),this.state=ne)}}sAttribValue(){const Re=this.getCodeNorm();fe(Re)?(this.q=Re,this.state=Ce):n(Re)||(this.fail("unquoted attribute value."),this.state=Ke,this.unget())}sAttribValueQuoted(){const{q:Re,chunk:Qe}=this;let{i:ke}=this;for(;;)switch(this.getCode()){case Re:this.pushAttrib(this.name,this.text+Qe.slice(ke,this.prevI)),this.name=this.text="",this.q=null,this.state=Ve;return;case Ne:this.text+=Qe.slice(ke,this.prevI),this.state=G,this.entityReturnState=Ce;return;case J:case T:case X:this.text+=`${Qe.slice(ke,this.prevI)} `,ke=this.i;break;case k:this.text+=Qe.slice(ke,this.prevI),this.fail("disallowed character.");return;case m:this.text+=Qe.slice(ke);return}}sAttribValueClosed(){const Re=this.getCodeNorm();n(Re)?this.state=ne:Re===de?this.openTag():Re===Fe?this.state=ue:t(Re)?(this.fail("no whitespace between attributes."),this.unget(),this.state=ce):this.fail("disallowed character in attribute name.")}sAttribValueUnquoted(){const Re=this.captureTo(st);switch(Re){case Ne:this.state=G,this.entityReturnState=Ke;break;case k:this.fail("disallowed character.");break;case m:break;default:this.text.includes("]]>")&&this.fail('the string "]]>" is disallowed in char data.'),this.pushAttrib(this.name,this.text),this.name=this.text="",Re===de?this.openTag():this.state=ne}}sCloseTag(){const Re=this.captureNameChars();Re===de?this.closeTag():n(Re)?this.state=oe:Re!==m&&this.fail("disallowed character in closing tag.")}sCloseTagSawWhite(){switch(this.skipSpaces()){case de:this.closeTag();break;case m:break;default:this.fail("disallowed character in closing tag.")}}handleTextInRoot(){let{i:Re,forbiddenState:Qe}=this;const{chunk:ke,textHandler:vt}=this;e:for(;;)switch(this.getCode()){case k:{if(this.state=Z,vt!==void 0){const{text:St}=this,Qt=ke.slice(Re,this.prevI);St.length!==0?(vt(St+Qt),this.text=""):Qt.length!==0&&vt(Qt)}Qe=Tt;break e}case Ne:this.state=G,this.entityReturnState=V,vt!==void 0&&(this.text+=ke.slice(Re,this.prevI)),Qe=Tt;break e;case je:switch(Qe){case Tt:Qe=xt;break;case xt:Qe=wt;break;case wt:break;default:throw new Error("impossible state")}break;case de:Qe===wt&&this.fail('the string "]]>" is disallowed in char data.'),Qe=Tt;break;case T:vt!==void 0&&(this.text+=`${ke.slice(Re,this.prevI)}
`),Re=this.i,Qe=Tt;break;case m:vt!==void 0&&(this.text+=ke.slice(Re));break e;default:Qe=Tt}this.forbiddenState=Qe}handleTextOutsideRoot(){let{i:Re}=this;const{chunk:Qe,textHandler:ke}=this;let vt=!1;e:for(;;){const St=this.getCode();switch(St){case k:{if(this.state=Z,ke!==void 0){const{text:Qt}=this,Tr=Qe.slice(Re,this.prevI);Qt.length!==0?(ke(Qt+Tr),this.text=""):Tr.length!==0&&ke(Tr)}break e}case Ne:this.state=G,this.entityReturnState=V,ke!==void 0&&(this.text+=Qe.slice(Re,this.prevI)),vt=!0;break e;case T:ke!==void 0&&(this.text+=`${Qe.slice(Re,this.prevI)}
`),Re=this.i;break;case m:ke!==void 0&&(this.text+=Qe.slice(Re));break e;default:n(St)||(vt=!0)}}vt&&(!this.sawRoot&&!this.reportedTextBeforeRoot&&(this.fail("text data outside of root node."),this.reportedTextBeforeRoot=!0),this.closedRoot&&!this.reportedTextAfterRoot&&(this.fail("text data outside of root node."),this.reportedTextAfterRoot=!0))}pushAttribNS(Re,Qe){var ke;const{prefix:vt,local:St}=this.qname(Re),Qt={name:Re,prefix:vt,local:St,value:Qe};if(this.attribList.push(Qt),(ke=this.attributeHandler)===null||ke===void 0||ke.call(this,Qt),vt==="xmlns"){const Tr=Qe.trim();this.currentXMLVersion==="1.0"&&Tr===""&&this.fail("invalid attempt to undefine prefix in XML 1.0"),this.topNS[St]=Tr,tt(this,St,Tr)}else if(Re==="xmlns"){const Tr=Qe.trim();this.topNS[""]=Tr,tt(this,"",Tr)}}pushAttribPlain(Re,Qe){var ke;const vt={name:Re,value:Qe};this.attribList.push(vt),(ke=this.attributeHandler)===null||ke===void 0||ke.call(this,vt)}end(){var Re,Qe;this.sawRoot||this.fail("document must contain a root element.");const{tags:ke}=this;for(;ke.length>0;){const St=ke.pop();this.fail(`unclosed tag: ${St.name}`)}this.state!==w&&this.state!==V&&this.fail("unexpected end.");const{text:vt}=this;return vt.length!==0&&((Re=this.textHandler)===null||Re===void 0||Re.call(this,vt),this.text=""),this._closed=!0,(Qe=this.endHandler)===null||Qe===void 0||Qe.call(this),this._init(),this}resolve(Re){var Qe,ke;let vt=this.topNS[Re];if(vt!==void 0)return vt;const{tags:St}=this;for(let Qt=St.length-1;Qt>=0;Qt--)if(vt=St[Qt].ns[Re],vt!==void 0)return vt;return vt=this.ns[Re],vt!==void 0?vt:(ke=(Qe=this.opt).resolvePrefix)===null||ke===void 0?void 0:ke.call(Qe,Re)}qname(Re){const Qe=Re.indexOf(":");if(Qe===-1)return{prefix:"",local:Re};const ke=Re.slice(Qe+1),vt=Re.slice(0,Qe);return(vt===""||ke===""||ke.includes(":"))&&this.fail(`malformed name: ${Re}.`),{prefix:vt,local:ke}}processAttribsNS(){var Re;const{attribList:Qe}=this,ke=this.tag;{const{prefix:Qt,local:Tr}=this.qname(ke.name);ke.prefix=Qt,ke.local=Tr;const pr=ke.uri=(Re=this.resolve(Qt))!==null&&Re!==void 0?Re:"";Qt!==""&&(Qt==="xmlns"&&this.fail('tags may not have "xmlns" as prefix.'),pr===""&&(this.fail(`unbound namespace prefix: ${JSON.stringify(Qt)}.`),ke.uri=Qt))}if(Qe.length===0)return;const{attributes:vt}=ke,St=new Set;for(const Qt of Qe){const{name:Tr,prefix:pr,local:aa}=Qt;let hr,Ir;pr===""?(hr=Tr==="xmlns"?h:"",Ir=Tr):(hr=this.resolve(pr),hr===void 0&&(this.fail(`unbound namespace prefix: ${JSON.stringify(pr)}.`),hr=pr),Ir=`{${hr}}${aa}`),St.has(Ir)&&this.fail(`duplicate attribute: ${Ir}.`),St.add(Ir),Qt.uri=hr,vt[Tr]=Qt}this.attribList=[]}processAttribsPlain(){const{attribList:Re}=this,Qe=this.tag.attributes;for(const{name:ke,value:vt}of Re)Qe[ke]!==void 0&&this.fail(`duplicate attribute: ${ke}.`),Qe[ke]=vt;this.attribList=[]}openTag(){var Re;this.processAttribs();const{tags:Qe}=this,ke=this.tag;ke.isSelfClosing=!1,(Re=this.openTagHandler)===null||Re===void 0||Re.call(this,ke),Qe.push(ke),this.state=V,this.name=""}openSelfClosingTag(){var Re,Qe,ke;this.processAttribs();const{tags:vt}=this,St=this.tag;St.isSelfClosing=!0,(Re=this.openTagHandler)===null||Re===void 0||Re.call(this,St),(Qe=this.closeTagHandler)===null||Qe===void 0||Qe.call(this,St),(this.tag=(ke=vt[vt.length-1])!==null&&ke!==void 0?ke:null)===null&&(this.closedRoot=!0),this.state=V,this.name=""}closeTag(){const{tags:Re,name:Qe}=this;if(this.state=V,this.name="",Qe===""){this.fail("weird empty close tag."),this.text+="</>";return}const ke=this.closeTagHandler;let vt=Re.length;for(;vt-- >0;){const St=this.tag=Re.pop();if(this.topNS=St.ns,ke?.(St),St.name===Qe)break;this.fail("unexpected close tag.")}vt===0?this.closedRoot=!0:vt<0&&(this.fail(`unmatched closing tag: ${Qe}.`),this.text+=`</${Qe}>`)}parseEntity(Re){if(Re[0]!=="#"){const ke=this.ENTITIES[Re];return ke!==void 0?ke:(this.fail(this.isName(Re)?"undefined entity.":"disallowed character in entity name."),`&${Re};`)}let Qe=NaN;return Re[1]==="x"&&/^#x[0-9a-f]+$/i.test(Re)?Qe=parseInt(Re.slice(2),16):/^#[0-9]+$/.test(Re)&&(Qe=parseInt(Re.slice(1),10)),this.isChar(Qe)?String.fromCodePoint(Qe):(this.fail("malformed character entity."),`&${Re};`)}}return ap.SaxesParser=lr,ap}var BT={},Kte;function YDe(){if(Kte)return BT;Kte=1,Object.defineProperty(BT,"__esModule",{value:!0}),BT.ParseError=void 0;let a=class extends Error{constructor(u,n){const r=u.saxParser;super(u.trackPosition?`Line ${r.line} column ${r.column+1}: ${n}`:n)}};return BT.ParseError=a,BT}var ip={},GM={},Jte;function ZDe(){return Jte||(Jte=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.validateIri=a.IriValidationStrategy=void 0;function e(){const o="[!$&'()*+,;=]",l="%[a-fA-F0-9]{2}",s="([0-9]|[1-9][0-9]|1[0-9][0-9]|2[0-4][0-9]|25[0-5])",c=`${s}\\.${s}\\.${s}\\.${s}`,d="[a-fA-F0-9]{1,4}",f=`(${d}:${d}|${c})`,p=`((${d}:){6}${f}|::(${d}:){5}${f}|(${d})?::(${d}:){4}${f}|((${d}:){0,1}${d})?::(${d}:){3}${f}|((${d}:){0,2}${d})?::(${d}:){2}${f}|((${d}:){0,3}${d})?::${d}:${f}|((${d}:){0,4}${d})?::${f}|((${d}:){0,5}${d})?::${d}|((${d}:){0,6}${d})?::)`,h=`v[a-fA-F0-9]+\\.(${o}|${o}|":)+`,g=`\\[(${p}|${h})\\]`,v="[0-9]*",m="[a-zA-Z][a-zA-Z0-9+\\-.]*",w="[---]",N="[a-zA-Z0-9\\-._~-----------------]",j=`(${N}|${l}|${o}|[:@])*`,q=`(${j}|[\\/?])*`,O=`(${j}|${w}|[\\/?])*`,I=`(${j})+`,A=`(${j})*`,P="",C=`${I}(\\/${A})*`,B=`\\/(${I}(\\/${A})*)?`,H=`(\\/${A})*`,V=`(${N}|${l}|${o})*`,G=`(${g}|${c}|${V})`,W=`(\\/\\/${`(${`(${N}|${l}|${o}|:)*`}@)?${G}(:${v})?`}${H}|${B}|${C}|${P})`,te=`^${m}:${W}(\\?${O})?(#${q})?$`;return new RegExp(te,"u")}const u=e(),n=/^[A-Za-z][\d+-.A-Za-z]*:[^\u0000-\u0020"<>\\^`{|}]*$/u;var r;(function(i){i.Strict="strict",i.Pragmatic="pragmatic",i.None="none"})(r=a.IriValidationStrategy||(a.IriValidationStrategy={}));function t(i,o=r.Strict){switch(o){case r.Strict:return u.test(i)?void 0:new Error(`Invalid IRI according to RFC 3987: '${i}'`);case r.Pragmatic:return n.test(i)?void 0:new Error(`Invalid IRI according to RDF Turtle: '${i}'`);case r.None:return;default:return new Error(`Not supported validation strategy "${o}"`)}}a.validateIri=t})(GM)),GM}var Wte;function eFe(){return Wte||(Wte=1,(function(a){var e=ip&&ip.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ip&&ip.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(ZDe(),a)})(ip)),ip}var Yte;function tFe(){if(Yte)return np;Yte=1,Object.defineProperty(np,"__esModule",{value:!0}),np.ParseType=np.RdfXmlParser=void 0;const a=Xn(),e=uTe(),u=Nr(),n=YDe(),r=Rr(),t=eFe();let i=class Tn extends u.Transform{constructor(s){super({readableObjectMode:!0}),this.activeTagStack=[],this.nodeIds={},s&&(Object.assign(this,s),this.options=s),this.dataFactory||(this.dataFactory=new r.DataFactory),this.baseIRI||(this.baseIRI=""),this.defaultGraph||(this.defaultGraph=this.dataFactory.defaultGraph()),this.validateUri!==!1&&(this.validateUri=!0),this.iriValidationStrategy||(this.iriValidationStrategy=this.validateUri?t.IriValidationStrategy.Pragmatic:t.IriValidationStrategy.None),this.saxParser=new e.SaxesParser({xmlns:!0,position:this.trackPosition}),this.attachSaxListeners()}import(s){const c=new u.PassThrough({readableObjectMode:!0});s.on("error",f=>d.emit("error",f)),s.on("data",f=>c.push(f)),s.on("end",()=>c.push(null));const d=c.pipe(new Tn(this.options));return d}_transform(s,c,d){try{this.saxParser.write(s)}catch(f){return d(f)}d()}newParseError(s){return new n.ParseError(this,s)}valueToUri(s,c){return this.uriToNamedNode((0,a.resolve)(s,c.baseIRI))}uriToNamedNode(s){const c=(0,t.validateIri)(s,this.iriValidationStrategy);if(c instanceof Error)throw this.newParseError(c.message);return this.dataFactory.namedNode(s)}validateNcname(s){if(!Tn.NCNAME_MATCHER.test(s))throw this.newParseError(`Not a valid NCName: ${s}`)}attachSaxListeners(){this.saxParser.on("error",s=>this.emit("error",s)),this.saxParser.on("opentag",this.onTag.bind(this)),this.saxParser.on("text",this.onText.bind(this)),this.saxParser.on("cdata",this.onText.bind(this)),this.saxParser.on("closetag",this.onCloseTag.bind(this)),this.saxParser.on("doctype",this.onDoctype.bind(this))}onTag(s){const c=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;let d=o.RESOURCE;if(c&&(c.hadChildren=!0,d=c.childrenParseType),c&&c.childrenStringTags){const p=s.name;let h="";for(const T in s.attributes)h+=` ${T}="${s.attributes[T].value}"`;const v=`<${`${p}${h}`}>`;c.childrenStringTags.push(v);const m={childrenStringTags:c.childrenStringTags};m.childrenStringEmitClosingTag=`</${p}>`,this.activeTagStack.push(m);return}const f={};c?(f.language=c.language,f.baseIRI=c.baseIRI):f.baseIRI=this.baseIRI,this.activeTagStack.push(f),d===o.RESOURCE?this.onTagResource(s,f,c,!c):this.onTagProperty(s,f,c)}onTagResource(s,c,d,f){c.childrenParseType=o.PROPERTY;let p=!0;if(s.uri===Tn.RDF){if(!f&&Tn.FORBIDDEN_NODE_ELEMENTS.indexOf(s.local)>=0)throw this.newParseError(`Illegal node element name: ${s.local}`);switch(s.local){case"RDF":c.childrenParseType=o.RESOURCE;case"Description":p=!1}}const h=[],g=[];let v=null,m=!1,T=!1,w=null;for(const E in s.attributes){const S=s.attributes[E];if(d&&S.uri===Tn.RDF)switch(S.local){case"about":if(v)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${S.value} and ${v} where found.`);v=S.value;continue;case"ID":if(v)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${S.value} and ${v} where found.`);this.validateNcname(S.value),v="#"+S.value,m=!0;continue;case"nodeID":if(v)throw this.newParseError(`Only one of rdf:about, rdf:nodeID and rdf:ID can be present, while ${S.value} and ${v} where found.`);this.validateNcname(S.value),v=S.value,T=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"type":w=S.value;continue;case"aboutEach":throw this.newParseError("rdf:aboutEach is not supported.");case"aboutEachPrefix":throw this.newParseError("rdf:aboutEachPrefix is not supported.");case"li":throw this.newParseError("rdf:li on node elements are not supported.")}else if(S.uri===Tn.XML){if(S.local==="lang"){c.language=S.value===""?null:S.value.toLowerCase();continue}else if(S.local==="base"){c.baseIRI=(0,a.resolve)(S.value,c.baseIRI);continue}}S.prefix!=="xml"&&S.prefix!=="xmlns"&&(S.prefix!==""||S.local!=="xmlns")&&S.uri&&(h.push(this.uriToNamedNode(S.uri+S.local)),g.push(S.value))}if(v!==null&&(c.subject=T?this.dataFactory.blankNode(v):this.valueToUri(v,c),m&&this.claimNodeId(c.subject)),c.subject||(c.subject=this.dataFactory.blankNode()),p){const E=this.uriToNamedNode(s.uri+s.local);this.emitTriple(c.subject,this.dataFactory.namedNode(Tn.RDF+"type"),E,d?d.reifiedStatementId:null)}if(d){if(d.predicate)if(d.childrenCollectionSubject){const E=this.dataFactory.blankNode();this.emitTriple(d.childrenCollectionSubject,d.childrenCollectionPredicate,E,d.reifiedStatementId),this.emitTriple(E,this.dataFactory.namedNode(Tn.RDF+"first"),c.subject,c.reifiedStatementId),d.childrenCollectionSubject=E,d.childrenCollectionPredicate=this.dataFactory.namedNode(Tn.RDF+"rest")}else{this.emitTriple(d.subject,d.predicate,c.subject,d.reifiedStatementId);for(let E=0;E<d.predicateSubPredicates.length;E++)this.emitTriple(c.subject,d.predicateSubPredicates[E],d.predicateSubObjects[E],null);d.predicateSubPredicates=[],d.predicateSubObjects=[],d.predicateEmitted=!0}for(let E=0;E<h.length;E++){const S=this.dataFactory.literal(g[E],c.datatype||c.language);this.emitTriple(c.subject,h[E],S,d.reifiedStatementId)}w&&this.emitTriple(c.subject,this.dataFactory.namedNode(Tn.RDF+"type"),this.uriToNamedNode(w),null)}}onTagProperty(s,c,d){if(c.childrenParseType=o.RESOURCE,c.subject=d.subject,s.uri===Tn.RDF&&s.local==="li"?(d.listItemCounter||(d.listItemCounter=1),c.predicate=this.uriToNamedNode(s.uri+"_"+d.listItemCounter++)):c.predicate=this.uriToNamedNode(s.uri+s.local),s.uri===Tn.RDF&&Tn.FORBIDDEN_PROPERTY_ELEMENTS.indexOf(s.local)>=0)throw this.newParseError(`Illegal property element name: ${s.local}`);c.predicateSubPredicates=[],c.predicateSubObjects=[];let f=!1,p=!1,h=null,g=!0;const v=[],m=[];for(const T in s.attributes){const w=s.attributes[T];if(w.uri===Tn.RDF)switch(w.local){case"resource":if(h)throw this.newParseError(`Found both rdf:resource (${w.value}) and rdf:nodeID (${h}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:resource (${w.value})`);c.hadChildren=!0,h=w.value,g=!1;continue;case"datatype":if(p)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:datatype (${w.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${w.value})`);c.datatype=this.valueToUri(w.value,c);continue;case"nodeID":if(p)throw this.newParseError(`Found both non-rdf:* property attributes and rdf:nodeID (${w.value}).`);if(c.hadChildren)throw this.newParseError(`Found both rdf:resource and rdf:nodeID (${w.value}).`);if(f)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID (${w.value})`);this.validateNcname(w.value),c.hadChildren=!0,h=w.value,g=!0;continue;case"bagID":throw this.newParseError("rdf:bagID is not supported.");case"parseType":if(p)throw this.newParseError("rdf:parseType is not allowed when non-rdf:* property attributes are present");if(c.datatype)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:datatype (${c.datatype.value})`);if(h)throw this.newParseError(`rdf:parseType is not allowed on property elements with rdf:nodeID or rdf:resource (${h})`);if(w.value==="Resource"){f=!0,c.childrenParseType=o.PROPERTY;const E=this.dataFactory.blankNode();this.emitTriple(c.subject,c.predicate,E,c.reifiedStatementId),c.subject=E,c.predicate=null}else w.value==="Collection"?(f=!0,c.hadChildren=!0,c.childrenCollectionSubject=c.subject,c.childrenCollectionPredicate=c.predicate,g=!1):w.value==="Literal"&&(f=!0,c.childrenTagsToString=!0,c.childrenStringTags=[]);continue;case"ID":this.validateNcname(w.value),c.reifiedStatementId=this.valueToUri("#"+w.value,c),this.claimNodeId(c.reifiedStatementId);continue}else if(w.uri===Tn.XML&&w.local==="lang"){c.language=w.value===""?null:w.value.toLowerCase();continue}if(w.prefix!=="xml"&&w.prefix!=="xmlns"&&(w.prefix!==""||w.local!=="xmlns")&&w.uri){if(f||c.datatype)throw this.newParseError(`Found illegal rdf:* properties on property element with attribute: ${w.value}`);c.hadChildren=!0,p=!0,v.push(this.uriToNamedNode(w.uri+w.local)),m.push(this.dataFactory.literal(w.value,c.datatype||c.language))}}if(h!==null){const T=c.subject;c.subject=g?this.dataFactory.blankNode(h):this.valueToUri(h,c),this.emitTriple(T,c.predicate,c.subject,c.reifiedStatementId);for(let w=0;w<v.length;w++)this.emitTriple(c.subject,v[w],m[w],null);c.predicateEmitted=!0}else g&&(c.predicateSubPredicates=v,c.predicateSubObjects=m,c.predicateEmitted=!1)}emitTriple(s,c,d,f){this.push(this.dataFactory.quad(s,c,d,this.defaultGraph)),f&&(this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Tn.RDF+"type"),this.dataFactory.namedNode(Tn.RDF+"Statement"),this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Tn.RDF+"subject"),s,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Tn.RDF+"predicate"),c,this.defaultGraph)),this.push(this.dataFactory.quad(f,this.dataFactory.namedNode(Tn.RDF+"object"),d,this.defaultGraph)))}claimNodeId(s){if(!this.allowDuplicateRdfIds){if(this.nodeIds[s.value])throw this.newParseError(`Found multiple occurrences of rdf:ID='${s.value}'.`);this.nodeIds[s.value]=!0}}onText(s){const c=this.activeTagStack.length?this.activeTagStack[this.activeTagStack.length-1]:null;c&&(c.childrenStringTags?c.childrenStringTags.push(s):c.predicate&&(c.text=s))}onCloseTag(){const s=this.activeTagStack.pop();if(s.childrenStringEmitClosingTag&&s.childrenStringTags.push(s.childrenStringEmitClosingTag),s.childrenTagsToString&&(s.datatype=this.dataFactory.namedNode(Tn.RDF+"XMLLiteral"),s.text=s.childrenStringTags.join(""),s.hadChildren=!1),s.childrenCollectionSubject)this.emitTriple(s.childrenCollectionSubject,s.childrenCollectionPredicate,this.dataFactory.namedNode(Tn.RDF+"nil"),s.reifiedStatementId);else if(s.predicate){if(!s.hadChildren&&s.childrenParseType!==o.PROPERTY)this.emitTriple(s.subject,s.predicate,this.dataFactory.literal(s.text||"",s.datatype||s.language),s.reifiedStatementId);else if(!s.predicateEmitted){const c=this.dataFactory.blankNode();this.emitTriple(s.subject,s.predicate,c,s.reifiedStatementId);for(let d=0;d<s.predicateSubPredicates.length;d++)this.emitTriple(c,s.predicateSubPredicates[d],s.predicateSubObjects[d],null)}}}onDoctype(s){s.replace(/<!ENTITY\s+([^\s]+)\s+["']([^"']+)["']\s*>/g,(c,d,f)=>(this.saxParser.ENTITIES[d]=f,""))}};np.RdfXmlParser=i,i.MIME_TYPE="application/rdf+xml",i.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",i.XML="http://www.w3.org/XML/1998/namespace",i.FORBIDDEN_NODE_ELEMENTS=["RDF","ID","about","bagID","parseType","resource","nodeID","li","aboutEach","aboutEachPrefix"],i.FORBIDDEN_PROPERTY_ELEMENTS=["Description","RDF","ID","about","bagID","parseType","resource","nodeID","aboutEach","aboutEachPrefix"],i.NCNAME_MATCHER=/^([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_])([A-Za-z\xC0-\xD6\xD8-\xF6\u{F8}-\u{2FF}\u{370}-\u{37D}\u{37F}-\u{1FFF}\u{200C}-\u{200D}\u{2070}-\u{218F}\u{2C00}-\u{2FEF}\u{3001}-\u{D7FF}\u{F900}-\u{FDCF}\u{FDF0}-\u{FFFD}\u{10000}-\u{EFFFF}_\-.0-9#xB7\u{0300}-\u{036F}\u{203F}-\u{2040}])*$/u;var o;return(function(l){l[l.RESOURCE=0]="RESOURCE",l[l.PROPERTY=1]="PROPERTY"})(o||(np.ParseType=o={})),np}var Zte;function rFe(){return Zte||(Zte=1,(function(a){var e=rp&&rp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=rp&&rp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(tFe(),a)})(rp)),rp}var ere;function nFe(){if(ere)return qT;ere=1,Object.defineProperty(qT,"__esModule",{value:!0}),qT.ActorRdfParseRdfXml=void 0;const a=E1(),e=lt(),u=rFe();let n=class extends a.ActorRdfParseFixedMediaTypes{constructor(t){super(t)}async runHandle(t){const i=t.context.getSafe(e.KeysInitQuery.dataFactory);t.data.on("error",l=>o.emit("error",l));const o=t.data.pipe(new u.RdfXmlParser({dataFactory:i,baseIRI:t.metadata?.baseIRI}));return{data:o,metadata:{triples:!0}}}};return qT.ActorRdfParseRdfXml=n,qT}var tre;function GB(){return tre||(tre=1,(function(a){var e=tp&&tp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=tp&&tp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(nFe(),a)})(tp)),tp}var up={},UT={},op={},$M={},rre;function aFe(){return rre||(rre=1,Object.defineProperty($M,"__esModule",{value:!0})),$M}var XM={},nre;function iFe(){return nre||(nre=1,Object.defineProperty(XM,"__esModule",{value:!0})),XM}var KM={},are;function uFe(){return are||(are=1,Object.defineProperty(KM,"__esModule",{value:!0})),KM}var QT={},zu={},Gu={},JM={},$u={},ZI={},ire;function oFe(){return ire||(ire=1,Object.defineProperty(ZI,"__esModule",{value:!0}),ZI.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(a){return a.charCodeAt(0)}))),ZI}var eD={},ure;function sFe(){return ure||(ure=1,Object.defineProperty(eD,"__esModule",{value:!0}),eD.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(a){return a.charCodeAt(0)}))),eD}var WM={},ore;function sre(){return ore||(ore=1,(function(a){var e;Object.defineProperty(a,"__esModule",{value:!0}),a.replaceCodePoint=a.fromCodePoint=void 0;var u=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);a.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(t){var i="";return t>65535&&(t-=65536,i+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),i+=String.fromCharCode(t),i};function n(t){var i;return t>=55296&&t<=57343||t>1114111?65533:(i=u.get(t))!==null&&i!==void 0?i:t}a.replaceCodePoint=n;function r(t){return(0,a.fromCodePoint)(n(t))}a.default=r})(WM)),WM}var cre;function oTe(){return cre||(cre=1,(function(a){var e=$u&&$u.__createBinding||(Object.create?(function(A,P,C,B){B===void 0&&(B=C);var H=Object.getOwnPropertyDescriptor(P,C);(!H||("get"in H?!P.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return P[C]}}),Object.defineProperty(A,B,H)}):(function(A,P,C,B){B===void 0&&(B=C),A[B]=P[C]})),u=$u&&$u.__setModuleDefault||(Object.create?(function(A,P){Object.defineProperty(A,"default",{enumerable:!0,value:P})}):function(A,P){A.default=P}),n=$u&&$u.__importStar||function(A){if(A&&A.__esModule)return A;var P={};if(A!=null)for(var C in A)C!=="default"&&Object.prototype.hasOwnProperty.call(A,C)&&e(P,A,C);return u(P,A),P},r=$u&&$u.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(a,"__esModule",{value:!0}),a.decodeXML=a.decodeHTMLStrict=a.decodeHTMLAttribute=a.decodeHTML=a.determineBranch=a.EntityDecoder=a.DecodingMode=a.BinTrieFlags=a.fromCodePoint=a.replaceCodePoint=a.decodeCodePoint=a.xmlDecodeTree=a.htmlDecodeTree=void 0;var t=r(oFe());a.htmlDecodeTree=t.default;var i=r(sFe());a.xmlDecodeTree=i.default;var o=n(sre());a.decodeCodePoint=o.default;var l=sre();Object.defineProperty(a,"replaceCodePoint",{enumerable:!0,get:function(){return l.replaceCodePoint}}),Object.defineProperty(a,"fromCodePoint",{enumerable:!0,get:function(){return l.fromCodePoint}});var s;(function(A){A[A.NUM=35]="NUM",A[A.SEMI=59]="SEMI",A[A.EQUALS=61]="EQUALS",A[A.ZERO=48]="ZERO",A[A.NINE=57]="NINE",A[A.LOWER_A=97]="LOWER_A",A[A.LOWER_F=102]="LOWER_F",A[A.LOWER_X=120]="LOWER_X",A[A.LOWER_Z=122]="LOWER_Z",A[A.UPPER_A=65]="UPPER_A",A[A.UPPER_F=70]="UPPER_F",A[A.UPPER_Z=90]="UPPER_Z"})(s||(s={}));var c=32,d;(function(A){A[A.VALUE_LENGTH=49152]="VALUE_LENGTH",A[A.BRANCH_LENGTH=16256]="BRANCH_LENGTH",A[A.JUMP_TABLE=127]="JUMP_TABLE"})(d=a.BinTrieFlags||(a.BinTrieFlags={}));function f(A){return A>=s.ZERO&&A<=s.NINE}function p(A){return A>=s.UPPER_A&&A<=s.UPPER_F||A>=s.LOWER_A&&A<=s.LOWER_F}function h(A){return A>=s.UPPER_A&&A<=s.UPPER_Z||A>=s.LOWER_A&&A<=s.LOWER_Z||f(A)}function g(A){return A===s.EQUALS||h(A)}var v;(function(A){A[A.EntityStart=0]="EntityStart",A[A.NumericStart=1]="NumericStart",A[A.NumericDecimal=2]="NumericDecimal",A[A.NumericHex=3]="NumericHex",A[A.NamedEntity=4]="NamedEntity"})(v||(v={}));var m;(function(A){A[A.Legacy=0]="Legacy",A[A.Strict=1]="Strict",A[A.Attribute=2]="Attribute"})(m=a.DecodingMode||(a.DecodingMode={}));var T=(function(){function A(P,C,B){this.decodeTree=P,this.emitCodePoint=C,this.errors=B,this.state=v.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=m.Strict}return A.prototype.startEntity=function(P){this.decodeMode=P,this.state=v.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},A.prototype.write=function(P,C){switch(this.state){case v.EntityStart:return P.charCodeAt(C)===s.NUM?(this.state=v.NumericStart,this.consumed+=1,this.stateNumericStart(P,C+1)):(this.state=v.NamedEntity,this.stateNamedEntity(P,C));case v.NumericStart:return this.stateNumericStart(P,C);case v.NumericDecimal:return this.stateNumericDecimal(P,C);case v.NumericHex:return this.stateNumericHex(P,C);case v.NamedEntity:return this.stateNamedEntity(P,C)}},A.prototype.stateNumericStart=function(P,C){return C>=P.length?-1:(P.charCodeAt(C)|c)===s.LOWER_X?(this.state=v.NumericHex,this.consumed+=1,this.stateNumericHex(P,C+1)):(this.state=v.NumericDecimal,this.stateNumericDecimal(P,C))},A.prototype.addToNumericResult=function(P,C,B,H){if(C!==B){var V=B-C;this.result=this.result*Math.pow(H,V)+parseInt(P.substr(C,V),H),this.consumed+=V}},A.prototype.stateNumericHex=function(P,C){for(var B=C;C<P.length;){var H=P.charCodeAt(C);if(f(H)||p(H))C+=1;else return this.addToNumericResult(P,B,C,16),this.emitNumericEntity(H,3)}return this.addToNumericResult(P,B,C,16),-1},A.prototype.stateNumericDecimal=function(P,C){for(var B=C;C<P.length;){var H=P.charCodeAt(C);if(f(H))C+=1;else return this.addToNumericResult(P,B,C,10),this.emitNumericEntity(H,2)}return this.addToNumericResult(P,B,C,10),-1},A.prototype.emitNumericEntity=function(P,C){var B;if(this.consumed<=C)return(B=this.errors)===null||B===void 0||B.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(P===s.SEMI)this.consumed+=1;else if(this.decodeMode===m.Strict)return 0;return this.emitCodePoint((0,o.replaceCodePoint)(this.result),this.consumed),this.errors&&(P!==s.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},A.prototype.stateNamedEntity=function(P,C){for(var B=this.decodeTree,H=B[this.treeIndex],V=(H&d.VALUE_LENGTH)>>14;C<P.length;C++,this.excess++){var G=P.charCodeAt(C);if(this.treeIndex=E(B,H,this.treeIndex+Math.max(1,V),G),this.treeIndex<0)return this.result===0||this.decodeMode===m.Attribute&&(V===0||g(G))?0:this.emitNotTerminatedNamedEntity();if(H=B[this.treeIndex],V=(H&d.VALUE_LENGTH)>>14,V!==0){if(G===s.SEMI)return this.emitNamedEntityData(this.treeIndex,V,this.consumed+this.excess);this.decodeMode!==m.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},A.prototype.emitNotTerminatedNamedEntity=function(){var P,C=this,B=C.result,H=C.decodeTree,V=(H[B]&d.VALUE_LENGTH)>>14;return this.emitNamedEntityData(B,V,this.consumed),(P=this.errors)===null||P===void 0||P.missingSemicolonAfterCharacterReference(),this.consumed},A.prototype.emitNamedEntityData=function(P,C,B){var H=this.decodeTree;return this.emitCodePoint(C===1?H[P]&~d.VALUE_LENGTH:H[P+1],B),C===3&&this.emitCodePoint(H[P+2],B),B},A.prototype.end=function(){var P;switch(this.state){case v.NamedEntity:return this.result!==0&&(this.decodeMode!==m.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case v.NumericDecimal:return this.emitNumericEntity(0,2);case v.NumericHex:return this.emitNumericEntity(0,3);case v.NumericStart:return(P=this.errors)===null||P===void 0||P.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case v.EntityStart:return 0}},A})();a.EntityDecoder=T;function w(A){var P="",C=new T(A,function(B){return P+=(0,o.fromCodePoint)(B)});return function(H,V){for(var G=0,Z=0;(Z=H.indexOf("&",Z))>=0;){P+=H.slice(G,Z),C.startEntity(V);var ae=C.write(H,Z+1);if(ae<0){G=Z+C.end();break}G=Z+ae,Z=ae===0?G+1:G}var W=P+H.slice(G);return P="",W}}function E(A,P,C,B){var H=(P&d.BRANCH_LENGTH)>>7,V=P&d.JUMP_TABLE;if(H===0)return V!==0&&B===V?C:-1;if(V){var G=B-V;return G<0||G>=H?-1:A[C+G]-1}for(var Z=C,ae=Z+H-1;Z<=ae;){var W=Z+ae>>>1,te=A[W];if(te<B)Z=W+1;else if(te>B)ae=W-1;else return A[W+H]}return-1}a.determineBranch=E;var S=w(t.default),N=w(i.default);function j(A,P){return P===void 0&&(P=m.Legacy),S(A,P)}a.decodeHTML=j;function q(A){return S(A,m.Attribute)}a.decodeHTMLAttribute=q;function O(A){return S(A,m.Strict)}a.decodeHTMLStrict=O;function I(A){return N(A,m.Strict)}a.decodeXML=I})($u)),$u}var lre;function sTe(){return lre||(lre=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.QuoteType=void 0;var e=oTe(),u;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(u||(u={}));var n;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(n||(n={}));function r(f){return f===u.Space||f===u.NewLine||f===u.Tab||f===u.FormFeed||f===u.CarriageReturn}function t(f){return f===u.Slash||f===u.Gt||r(f)}function i(f){return f>=u.Zero&&f<=u.Nine}function o(f){return f>=u.LowerA&&f<=u.LowerZ||f>=u.UpperA&&f<=u.UpperZ}function l(f){return f>=u.UpperA&&f<=u.UpperF||f>=u.LowerA&&f<=u.LowerF}var s;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(s=a.QuoteType||(a.QuoteType={}));var c={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},d=(function(){function f(p,h){var g=p.xmlMode,v=g===void 0?!1:g,m=p.decodeEntities,T=m===void 0?!0:m;this.cbs=h,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=v,this.decodeEntities=T,this.entityTrie=v?e.xmlDecodeTree:e.htmlDecodeTree}return f.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(p){this.offset+=this.buffer.length,this.buffer=p,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(p){p===u.Lt||!this.decodeEntities&&this.fastForwardTo(u.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&p===u.Amp&&(this.state=n.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(p){var h=this.sequenceIndex===this.currentSequence.length,g=h?t(p):(p|32)===this.currentSequence[this.sequenceIndex];if(!g)this.isSpecial=!1;else if(!h){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(p)},f.prototype.stateInSpecialTag=function(p){if(this.sequenceIndex===this.currentSequence.length){if(p===u.Gt||r(p)){var h=this.index-this.currentSequence.length;if(this.sectionStart<h){var g=this.index;this.index=h,this.cbs.ontext(this.sectionStart,h),this.index=g}this.isSpecial=!1,this.sectionStart=h+2,this.stateInClosingTagName(p);return}this.sequenceIndex=0}(p|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===c.TitleEnd?this.decodeEntities&&p===u.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(u.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(p===u.Lt)},f.prototype.stateCDATASequence=function(p){p===c.Cdata[this.sequenceIndex]?++this.sequenceIndex===c.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=c.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(p))},f.prototype.fastForwardTo=function(p){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===p)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(p){p===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):p!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(p){return this.xmlMode?!t(p):o(p)},f.prototype.startSpecial=function(p,h){this.isSpecial=!0,this.currentSequence=p,this.sequenceIndex=h,this.state=n.SpecialStartSequence},f.prototype.stateBeforeTagName=function(p){if(p===u.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(p===u.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(p)){var h=p|32;this.sectionStart=this.index,!this.xmlMode&&h===c.TitleEnd[2]?this.startSpecial(c.TitleEnd,3):this.state=!this.xmlMode&&h===c.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else p===u.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(p))},f.prototype.stateInTagName=function(p){t(p)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateBeforeClosingTagName=function(p){r(p)||(p===u.Gt?this.state=n.Text:(this.state=this.isTagStartChar(p)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(p){(p===u.Gt||r(p))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(p))},f.prototype.stateAfterClosingTagName=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(p){p===u.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):p===u.Slash?this.state=n.InSelfClosingTag:r(p)||(this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(p){p===u.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):r(p)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateInAttributeName=function(p){(p===u.Eq||t(p))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(p))},f.prototype.stateAfterAttributeName=function(p){p===u.Eq?this.state=n.BeforeAttributeValue:p===u.Slash||p===u.Gt?(this.cbs.onattribend(s.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):r(p)||(this.cbs.onattribend(s.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(p){p===u.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):p===u.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):r(p)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(p))},f.prototype.handleInAttributeValue=function(p,h){p===h||!this.decodeEntities&&this.fastForwardTo(h)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(h===u.DoubleQuote?s.Double:s.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&p===u.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(p){this.handleInAttributeValue(p,u.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(p){this.handleInAttributeValue(p,u.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(p){r(p)||p===u.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):this.decodeEntities&&p===u.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(p){p===u.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=p===u.Dash?n.BeforeComment:n.InDeclaration},f.prototype.stateInDeclaration=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(p){p===u.Dash?(this.state=n.InCommentLike,this.currentSequence=c.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},f.prototype.stateInSpecialComment=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(p){var h=p|32;h===c.ScriptEnd[3]?this.startSpecial(c.ScriptEnd,4):h===c.StyleEnd[3]?this.startSpecial(c.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(p))},f.prototype.stateBeforeEntity=function(p){this.entityExcess=1,this.entityResult=0,p===u.Number?this.state=n.BeforeNumericEntity:p===u.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(p))},f.prototype.stateInNamedEntity=function(p){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,p),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var h=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(h){var g=(h>>14)-1;if(!this.allowLegacyEntity()&&p!==u.Semi)this.trieIndex+=g;else{var v=this.index-this.entityExcess+1;v>this.sectionStart&&this.emitPartial(this.sectionStart,v),this.entityResult=this.trieIndex,this.trieIndex+=g,this.entityExcess=0,this.sectionStart=this.index+1,g===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var p=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(p){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(p){(p|32)===u.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(p))},f.prototype.emitNumericEntity=function(p){var h=this.index-this.entityExcess-1,g=h+2+ +(this.state===n.InHexEntity);g!==this.index&&(h>this.sectionStart&&this.emitPartial(this.sectionStart,h),this.sectionStart=this.index+Number(p),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(p){p===u.Semi?this.emitNumericEntity(!0):i(p)?(this.entityResult=this.entityResult*10+(p-u.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(p){p===u.Semi?this.emitNumericEntity(!0):i(p)?(this.entityResult=this.entityResult*16+(p-u.Zero),this.entityExcess++):l(p)?(this.entityResult=this.entityResult*16+((p|32)-u.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var p=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(p);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(p);break}case n.InSpecialTag:{this.stateInSpecialTag(p);break}case n.CDATASequence:{this.stateCDATASequence(p);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(p);break}case n.InAttributeName:{this.stateInAttributeName(p);break}case n.InCommentLike:{this.stateInCommentLike(p);break}case n.InSpecialComment:{this.stateInSpecialComment(p);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(p);break}case n.InTagName:{this.stateInTagName(p);break}case n.InClosingTagName:{this.stateInClosingTagName(p);break}case n.BeforeTagName:{this.stateBeforeTagName(p);break}case n.AfterAttributeName:{this.stateAfterAttributeName(p);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(p);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(p);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(p);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(p);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(p);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(p);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(p);break}case n.InDeclaration:{this.stateInDeclaration(p);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(p);break}case n.BeforeComment:{this.stateBeforeComment(p);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(p);break}case n.InNamedEntity:{this.stateInNamedEntity(p);break}case n.BeforeEntity:{this.stateBeforeEntity(p);break}case n.InHexEntity:{this.stateInHexEntity(p);break}case n.InNumericEntity:{this.stateInNumericEntity(p);break}default:this.stateBeforeNumericEntity(p)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var p=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,p,0):this.cbs.oncomment(this.sectionStart,p,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,p)},f.prototype.emitPartial=function(p,h){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(p,h):this.cbs.ontext(p,h)},f.prototype.emitCodePoint=function(p){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(p):this.cbs.ontextentity(p)},f})();a.default=d})(JM)),JM}var dre;function fre(){if(dre)return Gu;dre=1;var a=Gu&&Gu.__createBinding||(Object.create?(function(v,m,T,w){w===void 0&&(w=T);var E=Object.getOwnPropertyDescriptor(m,T);(!E||("get"in E?!m.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return m[T]}}),Object.defineProperty(v,w,E)}):(function(v,m,T,w){w===void 0&&(w=T),v[w]=m[T]})),e=Gu&&Gu.__setModuleDefault||(Object.create?(function(v,m){Object.defineProperty(v,"default",{enumerable:!0,value:m})}):function(v,m){v.default=m}),u=Gu&&Gu.__importStar||function(v){if(v&&v.__esModule)return v;var m={};if(v!=null)for(var T in v)T!=="default"&&Object.prototype.hasOwnProperty.call(v,T)&&a(m,v,T);return e(m,v),m};Object.defineProperty(Gu,"__esModule",{value:!0}),Gu.Parser=void 0;var n=u(sTe()),r=oTe(),t=new Set(["input","option","optgroup","select","button","datalist","textarea"]),i=new Set(["p"]),o=new Set(["thead","tbody"]),l=new Set(["dd","dt"]),s=new Set(["rt","rp"]),c=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",i],["h1",i],["h2",i],["h3",i],["h4",i],["h5",i],["h6",i],["select",t],["input",t],["output",t],["button",t],["datalist",t],["textarea",t],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",l],["dt",l],["address",i],["article",i],["aside",i],["blockquote",i],["details",i],["div",i],["dl",i],["fieldset",i],["figcaption",i],["figure",i],["footer",i],["form",i],["header",i],["hr",i],["main",i],["nav",i],["ol",i],["pre",i],["section",i],["table",i],["ul",i],["rt",s],["rp",s],["tbody",o],["tfoot",o]]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),h=/\s|\//,g=(function(){function v(m,T){T===void 0&&(T={});var w,E,S,N,j;this.options=T,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=m??{},this.lowerCaseTagNames=(w=T.lowerCaseTags)!==null&&w!==void 0?w:!T.xmlMode,this.lowerCaseAttributeNames=(E=T.lowerCaseAttributeNames)!==null&&E!==void 0?E:!T.xmlMode,this.tokenizer=new((S=T.Tokenizer)!==null&&S!==void 0?S:n.default)(this.options,this),(j=(N=this.cbs).onparserinit)===null||j===void 0||j.call(N,this)}return v.prototype.ontext=function(m,T){var w,E,S=this.getSlice(m,T);this.endIndex=T-1,(E=(w=this.cbs).ontext)===null||E===void 0||E.call(w,S),this.startIndex=T},v.prototype.ontextentity=function(m){var T,w,E=this.tokenizer.getSectionStart();this.endIndex=E-1,(w=(T=this.cbs).ontext)===null||w===void 0||w.call(T,(0,r.fromCodePoint)(m)),this.startIndex=E},v.prototype.isVoidElement=function(m){return!this.options.xmlMode&&d.has(m)},v.prototype.onopentagname=function(m,T){this.endIndex=T;var w=this.getSlice(m,T);this.lowerCaseTagNames&&(w=w.toLowerCase()),this.emitOpenTag(w)},v.prototype.emitOpenTag=function(m){var T,w,E,S;this.openTagStart=this.startIndex,this.tagname=m;var N=!this.options.xmlMode&&c.get(m);if(N)for(;this.stack.length>0&&N.has(this.stack[this.stack.length-1]);){var j=this.stack.pop();(w=(T=this.cbs).onclosetag)===null||w===void 0||w.call(T,j,!0)}this.isVoidElement(m)||(this.stack.push(m),f.has(m)?this.foreignContext.push(!0):p.has(m)&&this.foreignContext.push(!1)),(S=(E=this.cbs).onopentagname)===null||S===void 0||S.call(E,m),this.cbs.onopentag&&(this.attribs={})},v.prototype.endOpenTag=function(m){var T,w;this.startIndex=this.openTagStart,this.attribs&&((w=(T=this.cbs).onopentag)===null||w===void 0||w.call(T,this.tagname,this.attribs,m),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},v.prototype.onopentagend=function(m){this.endIndex=m,this.endOpenTag(!1),this.startIndex=m+1},v.prototype.onclosetag=function(m,T){var w,E,S,N,j,q;this.endIndex=T;var O=this.getSlice(m,T);if(this.lowerCaseTagNames&&(O=O.toLowerCase()),(f.has(O)||p.has(O))&&this.foreignContext.pop(),this.isVoidElement(O))!this.options.xmlMode&&O==="br"&&((E=(w=this.cbs).onopentagname)===null||E===void 0||E.call(w,"br"),(N=(S=this.cbs).onopentag)===null||N===void 0||N.call(S,"br",{},!0),(q=(j=this.cbs).onclosetag)===null||q===void 0||q.call(j,"br",!1));else{var I=this.stack.lastIndexOf(O);if(I!==-1)if(this.cbs.onclosetag)for(var A=this.stack.length-I;A--;)this.cbs.onclosetag(this.stack.pop(),A!==0);else this.stack.length=I;else!this.options.xmlMode&&O==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=T+1},v.prototype.onselfclosingtag=function(m){this.endIndex=m,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=m+1):this.onopentagend(m)},v.prototype.closeCurrentTag=function(m){var T,w,E=this.tagname;this.endOpenTag(m),this.stack[this.stack.length-1]===E&&((w=(T=this.cbs).onclosetag)===null||w===void 0||w.call(T,E,!m),this.stack.pop())},v.prototype.onattribname=function(m,T){this.startIndex=m;var w=this.getSlice(m,T);this.attribname=this.lowerCaseAttributeNames?w.toLowerCase():w},v.prototype.onattribdata=function(m,T){this.attribvalue+=this.getSlice(m,T)},v.prototype.onattribentity=function(m){this.attribvalue+=(0,r.fromCodePoint)(m)},v.prototype.onattribend=function(m,T){var w,E;this.endIndex=T,(E=(w=this.cbs).onattribute)===null||E===void 0||E.call(w,this.attribname,this.attribvalue,m===n.QuoteType.Double?'"':m===n.QuoteType.Single?"'":m===n.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},v.prototype.getInstructionName=function(m){var T=m.search(h),w=T<0?m:m.substr(0,T);return this.lowerCaseTagNames&&(w=w.toLowerCase()),w},v.prototype.ondeclaration=function(m,T){this.endIndex=T;var w=this.getSlice(m,T);if(this.cbs.onprocessinginstruction){var E=this.getInstructionName(w);this.cbs.onprocessinginstruction("!".concat(E),"!".concat(w))}this.startIndex=T+1},v.prototype.onprocessinginstruction=function(m,T){this.endIndex=T;var w=this.getSlice(m,T);if(this.cbs.onprocessinginstruction){var E=this.getInstructionName(w);this.cbs.onprocessinginstruction("?".concat(E),"?".concat(w))}this.startIndex=T+1},v.prototype.oncomment=function(m,T,w){var E,S,N,j;this.endIndex=T,(S=(E=this.cbs).oncomment)===null||S===void 0||S.call(E,this.getSlice(m,T-w)),(j=(N=this.cbs).oncommentend)===null||j===void 0||j.call(N),this.startIndex=T+1},v.prototype.oncdata=function(m,T,w){var E,S,N,j,q,O,I,A,P,C;this.endIndex=T;var B=this.getSlice(m,T-w);this.options.xmlMode||this.options.recognizeCDATA?((S=(E=this.cbs).oncdatastart)===null||S===void 0||S.call(E),(j=(N=this.cbs).ontext)===null||j===void 0||j.call(N,B),(O=(q=this.cbs).oncdataend)===null||O===void 0||O.call(q)):((A=(I=this.cbs).oncomment)===null||A===void 0||A.call(I,"[CDATA[".concat(B,"]]")),(C=(P=this.cbs).oncommentend)===null||C===void 0||C.call(P)),this.startIndex=T+1},v.prototype.onend=function(){var m,T;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var w=this.stack.length;w>0;this.cbs.onclosetag(this.stack[--w],!0));}(T=(m=this.cbs).onend)===null||T===void 0||T.call(m)},v.prototype.reset=function(){var m,T,w,E;(T=(m=this.cbs).onreset)===null||T===void 0||T.call(m),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(E=(w=this.cbs).onparserinit)===null||E===void 0||E.call(w,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},v.prototype.parseComplete=function(m){this.reset(),this.end(m)},v.prototype.getSlice=function(m,T){for(;m-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var w=this.buffers[0].slice(m-this.bufferOffset,T-this.bufferOffset);T-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),w+=this.buffers[0].slice(0,T-this.bufferOffset);return w},v.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},v.prototype.write=function(m){var T,w;if(this.ended){(w=(T=this.cbs).onerror)===null||w===void 0||w.call(T,new Error(".write() after done!"));return}this.buffers.push(m),this.tokenizer.running&&(this.tokenizer.write(m),this.writeIndex++)},v.prototype.end=function(m){var T,w;if(this.ended){(w=(T=this.cbs).onerror)===null||w===void 0||w.call(T,new Error(".end() after done!"));return}m&&this.write(m),this.ended=!0,this.tokenizer.end()},v.prototype.pause=function(){this.tokenizer.pause()},v.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},v.prototype.parseChunk=function(m){this.write(m)},v.prototype.done=function(m){this.end(m)},v})();return Gu.Parser=g,Gu}var sp={},YM={},pre;function Sb(){return pre||(pre=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.Doctype=a.CDATA=a.Tag=a.Style=a.Script=a.Comment=a.Directive=a.Text=a.Root=a.isTag=a.ElementType=void 0;var e;(function(n){n.Root="root",n.Text="text",n.Directive="directive",n.Comment="comment",n.Script="script",n.Style="style",n.Tag="tag",n.CDATA="cdata",n.Doctype="doctype"})(e=a.ElementType||(a.ElementType={}));function u(n){return n.type===e.Tag||n.type===e.Script||n.type===e.Style}a.isTag=u,a.Root=e.Root,a.Text=e.Text,a.Directive=e.Directive,a.Comment=e.Comment,a.Script=e.Script,a.Style=e.Style,a.Tag=e.Tag,a.CDATA=e.CDATA,a.Doctype=e.Doctype})(YM)),YM}var Yt={},hre;function yre(){if(hre)return Yt;hre=1;var a=Yt&&Yt.__extends||(function(){var S=function(N,j){return S=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(q,O){q.__proto__=O}||function(q,O){for(var I in O)Object.prototype.hasOwnProperty.call(O,I)&&(q[I]=O[I])},S(N,j)};return function(N,j){if(typeof j!="function"&&j!==null)throw new TypeError("Class extends value "+String(j)+" is not a constructor or null");S(N,j);function q(){this.constructor=N}N.prototype=j===null?Object.create(j):(q.prototype=j.prototype,new q)}})(),e=Yt&&Yt.__assign||function(){return e=Object.assign||function(S){for(var N,j=1,q=arguments.length;j<q;j++){N=arguments[j];for(var O in N)Object.prototype.hasOwnProperty.call(N,O)&&(S[O]=N[O])}return S},e.apply(this,arguments)};Object.defineProperty(Yt,"__esModule",{value:!0}),Yt.cloneNode=Yt.hasChildren=Yt.isDocument=Yt.isDirective=Yt.isComment=Yt.isText=Yt.isCDATA=Yt.isTag=Yt.Element=Yt.Document=Yt.CDATA=Yt.NodeWithChildren=Yt.ProcessingInstruction=Yt.Comment=Yt.Text=Yt.DataNode=Yt.Node=void 0;var u=Sb(),n=(function(){function S(){this.parent=null,this.prev=null,this.next=null,this.startIndex=null,this.endIndex=null}return Object.defineProperty(S.prototype,"parentNode",{get:function(){return this.parent},set:function(N){this.parent=N},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"previousSibling",{get:function(){return this.prev},set:function(N){this.prev=N},enumerable:!1,configurable:!0}),Object.defineProperty(S.prototype,"nextSibling",{get:function(){return this.next},set:function(N){this.next=N},enumerable:!1,configurable:!0}),S.prototype.cloneNode=function(N){return N===void 0&&(N=!1),w(this,N)},S})();Yt.Node=n;var r=(function(S){a(N,S);function N(j){var q=S.call(this)||this;return q.data=j,q}return Object.defineProperty(N.prototype,"nodeValue",{get:function(){return this.data},set:function(j){this.data=j},enumerable:!1,configurable:!0}),N})(n);Yt.DataNode=r;var t=(function(S){a(N,S);function N(){var j=S!==null&&S.apply(this,arguments)||this;return j.type=u.ElementType.Text,j}return Object.defineProperty(N.prototype,"nodeType",{get:function(){return 3},enumerable:!1,configurable:!0}),N})(r);Yt.Text=t;var i=(function(S){a(N,S);function N(){var j=S!==null&&S.apply(this,arguments)||this;return j.type=u.ElementType.Comment,j}return Object.defineProperty(N.prototype,"nodeType",{get:function(){return 8},enumerable:!1,configurable:!0}),N})(r);Yt.Comment=i;var o=(function(S){a(N,S);function N(j,q){var O=S.call(this,q)||this;return O.name=j,O.type=u.ElementType.Directive,O}return Object.defineProperty(N.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),N})(r);Yt.ProcessingInstruction=o;var l=(function(S){a(N,S);function N(j){var q=S.call(this)||this;return q.children=j,q}return Object.defineProperty(N.prototype,"firstChild",{get:function(){var j;return(j=this.children[0])!==null&&j!==void 0?j:null},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"lastChild",{get:function(){return this.children.length>0?this.children[this.children.length-1]:null},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"childNodes",{get:function(){return this.children},set:function(j){this.children=j},enumerable:!1,configurable:!0}),N})(n);Yt.NodeWithChildren=l;var s=(function(S){a(N,S);function N(){var j=S!==null&&S.apply(this,arguments)||this;return j.type=u.ElementType.CDATA,j}return Object.defineProperty(N.prototype,"nodeType",{get:function(){return 4},enumerable:!1,configurable:!0}),N})(l);Yt.CDATA=s;var c=(function(S){a(N,S);function N(){var j=S!==null&&S.apply(this,arguments)||this;return j.type=u.ElementType.Root,j}return Object.defineProperty(N.prototype,"nodeType",{get:function(){return 9},enumerable:!1,configurable:!0}),N})(l);Yt.Document=c;var d=(function(S){a(N,S);function N(j,q,O,I){O===void 0&&(O=[]),I===void 0&&(I=j==="script"?u.ElementType.Script:j==="style"?u.ElementType.Style:u.ElementType.Tag);var A=S.call(this,O)||this;return A.name=j,A.attribs=q,A.type=I,A}return Object.defineProperty(N.prototype,"nodeType",{get:function(){return 1},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"tagName",{get:function(){return this.name},set:function(j){this.name=j},enumerable:!1,configurable:!0}),Object.defineProperty(N.prototype,"attributes",{get:function(){var j=this;return Object.keys(this.attribs).map(function(q){var O,I;return{name:q,value:j.attribs[q],namespace:(O=j["x-attribsNamespace"])===null||O===void 0?void 0:O[q],prefix:(I=j["x-attribsPrefix"])===null||I===void 0?void 0:I[q]}})},enumerable:!1,configurable:!0}),N})(l);Yt.Element=d;function f(S){return(0,u.isTag)(S)}Yt.isTag=f;function p(S){return S.type===u.ElementType.CDATA}Yt.isCDATA=p;function h(S){return S.type===u.ElementType.Text}Yt.isText=h;function g(S){return S.type===u.ElementType.Comment}Yt.isComment=g;function v(S){return S.type===u.ElementType.Directive}Yt.isDirective=v;function m(S){return S.type===u.ElementType.Root}Yt.isDocument=m;function T(S){return Object.prototype.hasOwnProperty.call(S,"children")}Yt.hasChildren=T;function w(S,N){N===void 0&&(N=!1);var j;if(h(S))j=new t(S.data);else if(g(S))j=new i(S.data);else if(f(S)){var q=N?E(S.children):[],O=new d(S.name,e({},S.attribs),q);q.forEach(function(C){return C.parent=O}),S.namespace!=null&&(O.namespace=S.namespace),S["x-attribsNamespace"]&&(O["x-attribsNamespace"]=e({},S["x-attribsNamespace"])),S["x-attribsPrefix"]&&(O["x-attribsPrefix"]=e({},S["x-attribsPrefix"])),j=O}else if(p(S)){var q=N?E(S.children):[],I=new s(q);q.forEach(function(B){return B.parent=I}),j=I}else if(m(S)){var q=N?E(S.children):[],A=new c(q);q.forEach(function(B){return B.parent=A}),S["x-mode"]&&(A["x-mode"]=S["x-mode"]),j=A}else if(v(S)){var P=new o(S.name,S.data);S["x-name"]!=null&&(P["x-name"]=S["x-name"],P["x-publicId"]=S["x-publicId"],P["x-systemId"]=S["x-systemId"]),j=P}else throw new Error("Not implemented yet: ".concat(S.type));return j.startIndex=S.startIndex,j.endIndex=S.endIndex,S.sourceCodeLocation!=null&&(j.sourceCodeLocation=S.sourceCodeLocation),j}Yt.cloneNode=w;function E(S){for(var N=S.map(function(q){return w(q,!0)}),j=1;j<N.length;j++)N[j].prev=N[j-1],N[j-1].next=N[j];return N}return Yt}var mre;function Su(){return mre||(mre=1,(function(a){var e=sp&&sp.__createBinding||(Object.create?(function(o,l,s,c){c===void 0&&(c=s);var d=Object.getOwnPropertyDescriptor(l,s);(!d||("get"in d?!l.__esModule:d.writable||d.configurable))&&(d={enumerable:!0,get:function(){return l[s]}}),Object.defineProperty(o,c,d)}):(function(o,l,s,c){c===void 0&&(c=s),o[c]=l[s]})),u=sp&&sp.__exportStar||function(o,l){for(var s in o)s!=="default"&&!Object.prototype.hasOwnProperty.call(l,s)&&e(l,o,s)};Object.defineProperty(a,"__esModule",{value:!0}),a.DomHandler=void 0;var n=Sb(),r=yre();u(yre(),a);var t={withStartIndices:!1,withEndIndices:!1,xmlMode:!1},i=(function(){function o(l,s,c){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null,typeof s=="function"&&(c=s,s=t),typeof l=="object"&&(s=l,l=void 0),this.callback=l??null,this.options=s??t,this.elementCB=c??null}return o.prototype.onparserinit=function(l){this.parser=l},o.prototype.onreset=function(){this.dom=[],this.root=new r.Document(this.dom),this.done=!1,this.tagStack=[this.root],this.lastNode=null,this.parser=null},o.prototype.onend=function(){this.done||(this.done=!0,this.parser=null,this.handleCallback(null))},o.prototype.onerror=function(l){this.handleCallback(l)},o.prototype.onclosetag=function(){this.lastNode=null;var l=this.tagStack.pop();this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),this.elementCB&&this.elementCB(l)},o.prototype.onopentag=function(l,s){var c=this.options.xmlMode?n.ElementType.Tag:void 0,d=new r.Element(l,s,void 0,c);this.addNode(d),this.tagStack.push(d)},o.prototype.ontext=function(l){var s=this.lastNode;if(s&&s.type===n.ElementType.Text)s.data+=l,this.options.withEndIndices&&(s.endIndex=this.parser.endIndex);else{var c=new r.Text(l);this.addNode(c),this.lastNode=c}},o.prototype.oncomment=function(l){if(this.lastNode&&this.lastNode.type===n.ElementType.Comment){this.lastNode.data+=l;return}var s=new r.Comment(l);this.addNode(s),this.lastNode=s},o.prototype.oncommentend=function(){this.lastNode=null},o.prototype.oncdatastart=function(){var l=new r.Text(""),s=new r.CDATA([l]);this.addNode(s),l.parent=s,this.lastNode=l},o.prototype.oncdataend=function(){this.lastNode=null},o.prototype.onprocessinginstruction=function(l,s){var c=new r.ProcessingInstruction(l,s);this.addNode(c)},o.prototype.handleCallback=function(l){if(typeof this.callback=="function")this.callback(l,this.dom);else if(l)throw l},o.prototype.addNode=function(l){var s=this.tagStack[this.tagStack.length-1],c=s.children[s.children.length-1];this.options.withStartIndices&&(l.startIndex=this.parser.startIndex),this.options.withEndIndices&&(l.endIndex=this.parser.endIndex),s.children.push(l),c&&(l.prev=c,c.next=l),l.parent=s,this.lastNode=null},o})();a.DomHandler=i,a.default=i})(sp)),sp}var cp={},Io={},li={},ZM={},Xu={},tD={},bre;function cFe(){return bre||(bre=1,Object.defineProperty(tD,"__esModule",{value:!0}),tD.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(a){return a.charCodeAt(0)}))),tD}var rD={},gre;function lFe(){return gre||(gre=1,Object.defineProperty(rD,"__esModule",{value:!0}),rD.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(a){return a.charCodeAt(0)}))),rD}var eC={},vre;function _re(){return vre||(vre=1,(function(a){var e;Object.defineProperty(a,"__esModule",{value:!0}),a.replaceCodePoint=a.fromCodePoint=void 0;var u=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);a.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(t){var i="";return t>65535&&(t-=65536,i+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),i+=String.fromCharCode(t),i};function n(t){var i;return t>=55296&&t<=57343||t>1114111?65533:(i=u.get(t))!==null&&i!==void 0?i:t}a.replaceCodePoint=n;function r(t){return(0,a.fromCodePoint)(n(t))}a.default=r})(eC)),eC}var Tre;function wre(){return Tre||(Tre=1,(function(a){var e=Xu&&Xu.__createBinding||(Object.create?(function(A,P,C,B){B===void 0&&(B=C);var H=Object.getOwnPropertyDescriptor(P,C);(!H||("get"in H?!P.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return P[C]}}),Object.defineProperty(A,B,H)}):(function(A,P,C,B){B===void 0&&(B=C),A[B]=P[C]})),u=Xu&&Xu.__setModuleDefault||(Object.create?(function(A,P){Object.defineProperty(A,"default",{enumerable:!0,value:P})}):function(A,P){A.default=P}),n=Xu&&Xu.__importStar||function(A){if(A&&A.__esModule)return A;var P={};if(A!=null)for(var C in A)C!=="default"&&Object.prototype.hasOwnProperty.call(A,C)&&e(P,A,C);return u(P,A),P},r=Xu&&Xu.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(a,"__esModule",{value:!0}),a.decodeXML=a.decodeHTMLStrict=a.decodeHTMLAttribute=a.decodeHTML=a.determineBranch=a.EntityDecoder=a.DecodingMode=a.BinTrieFlags=a.fromCodePoint=a.replaceCodePoint=a.decodeCodePoint=a.xmlDecodeTree=a.htmlDecodeTree=void 0;var t=r(cFe());a.htmlDecodeTree=t.default;var i=r(lFe());a.xmlDecodeTree=i.default;var o=n(_re());a.decodeCodePoint=o.default;var l=_re();Object.defineProperty(a,"replaceCodePoint",{enumerable:!0,get:function(){return l.replaceCodePoint}}),Object.defineProperty(a,"fromCodePoint",{enumerable:!0,get:function(){return l.fromCodePoint}});var s;(function(A){A[A.NUM=35]="NUM",A[A.SEMI=59]="SEMI",A[A.EQUALS=61]="EQUALS",A[A.ZERO=48]="ZERO",A[A.NINE=57]="NINE",A[A.LOWER_A=97]="LOWER_A",A[A.LOWER_F=102]="LOWER_F",A[A.LOWER_X=120]="LOWER_X",A[A.LOWER_Z=122]="LOWER_Z",A[A.UPPER_A=65]="UPPER_A",A[A.UPPER_F=70]="UPPER_F",A[A.UPPER_Z=90]="UPPER_Z"})(s||(s={}));var c=32,d;(function(A){A[A.VALUE_LENGTH=49152]="VALUE_LENGTH",A[A.BRANCH_LENGTH=16256]="BRANCH_LENGTH",A[A.JUMP_TABLE=127]="JUMP_TABLE"})(d=a.BinTrieFlags||(a.BinTrieFlags={}));function f(A){return A>=s.ZERO&&A<=s.NINE}function p(A){return A>=s.UPPER_A&&A<=s.UPPER_F||A>=s.LOWER_A&&A<=s.LOWER_F}function h(A){return A>=s.UPPER_A&&A<=s.UPPER_Z||A>=s.LOWER_A&&A<=s.LOWER_Z||f(A)}function g(A){return A===s.EQUALS||h(A)}var v;(function(A){A[A.EntityStart=0]="EntityStart",A[A.NumericStart=1]="NumericStart",A[A.NumericDecimal=2]="NumericDecimal",A[A.NumericHex=3]="NumericHex",A[A.NamedEntity=4]="NamedEntity"})(v||(v={}));var m;(function(A){A[A.Legacy=0]="Legacy",A[A.Strict=1]="Strict",A[A.Attribute=2]="Attribute"})(m=a.DecodingMode||(a.DecodingMode={}));var T=(function(){function A(P,C,B){this.decodeTree=P,this.emitCodePoint=C,this.errors=B,this.state=v.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=m.Strict}return A.prototype.startEntity=function(P){this.decodeMode=P,this.state=v.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},A.prototype.write=function(P,C){switch(this.state){case v.EntityStart:return P.charCodeAt(C)===s.NUM?(this.state=v.NumericStart,this.consumed+=1,this.stateNumericStart(P,C+1)):(this.state=v.NamedEntity,this.stateNamedEntity(P,C));case v.NumericStart:return this.stateNumericStart(P,C);case v.NumericDecimal:return this.stateNumericDecimal(P,C);case v.NumericHex:return this.stateNumericHex(P,C);case v.NamedEntity:return this.stateNamedEntity(P,C)}},A.prototype.stateNumericStart=function(P,C){return C>=P.length?-1:(P.charCodeAt(C)|c)===s.LOWER_X?(this.state=v.NumericHex,this.consumed+=1,this.stateNumericHex(P,C+1)):(this.state=v.NumericDecimal,this.stateNumericDecimal(P,C))},A.prototype.addToNumericResult=function(P,C,B,H){if(C!==B){var V=B-C;this.result=this.result*Math.pow(H,V)+parseInt(P.substr(C,V),H),this.consumed+=V}},A.prototype.stateNumericHex=function(P,C){for(var B=C;C<P.length;){var H=P.charCodeAt(C);if(f(H)||p(H))C+=1;else return this.addToNumericResult(P,B,C,16),this.emitNumericEntity(H,3)}return this.addToNumericResult(P,B,C,16),-1},A.prototype.stateNumericDecimal=function(P,C){for(var B=C;C<P.length;){var H=P.charCodeAt(C);if(f(H))C+=1;else return this.addToNumericResult(P,B,C,10),this.emitNumericEntity(H,2)}return this.addToNumericResult(P,B,C,10),-1},A.prototype.emitNumericEntity=function(P,C){var B;if(this.consumed<=C)return(B=this.errors)===null||B===void 0||B.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(P===s.SEMI)this.consumed+=1;else if(this.decodeMode===m.Strict)return 0;return this.emitCodePoint((0,o.replaceCodePoint)(this.result),this.consumed),this.errors&&(P!==s.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},A.prototype.stateNamedEntity=function(P,C){for(var B=this.decodeTree,H=B[this.treeIndex],V=(H&d.VALUE_LENGTH)>>14;C<P.length;C++,this.excess++){var G=P.charCodeAt(C);if(this.treeIndex=E(B,H,this.treeIndex+Math.max(1,V),G),this.treeIndex<0)return this.result===0||this.decodeMode===m.Attribute&&(V===0||g(G))?0:this.emitNotTerminatedNamedEntity();if(H=B[this.treeIndex],V=(H&d.VALUE_LENGTH)>>14,V!==0){if(G===s.SEMI)return this.emitNamedEntityData(this.treeIndex,V,this.consumed+this.excess);this.decodeMode!==m.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},A.prototype.emitNotTerminatedNamedEntity=function(){var P,C=this,B=C.result,H=C.decodeTree,V=(H[B]&d.VALUE_LENGTH)>>14;return this.emitNamedEntityData(B,V,this.consumed),(P=this.errors)===null||P===void 0||P.missingSemicolonAfterCharacterReference(),this.consumed},A.prototype.emitNamedEntityData=function(P,C,B){var H=this.decodeTree;return this.emitCodePoint(C===1?H[P]&~d.VALUE_LENGTH:H[P+1],B),C===3&&this.emitCodePoint(H[P+2],B),B},A.prototype.end=function(){var P;switch(this.state){case v.NamedEntity:return this.result!==0&&(this.decodeMode!==m.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case v.NumericDecimal:return this.emitNumericEntity(0,2);case v.NumericHex:return this.emitNumericEntity(0,3);case v.NumericStart:return(P=this.errors)===null||P===void 0||P.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case v.EntityStart:return 0}},A})();a.EntityDecoder=T;function w(A){var P="",C=new T(A,function(B){return P+=(0,o.fromCodePoint)(B)});return function(H,V){for(var G=0,Z=0;(Z=H.indexOf("&",Z))>=0;){P+=H.slice(G,Z),C.startEntity(V);var ae=C.write(H,Z+1);if(ae<0){G=Z+C.end();break}G=Z+ae,Z=ae===0?G+1:G}var W=P+H.slice(G);return P="",W}}function E(A,P,C,B){var H=(P&d.BRANCH_LENGTH)>>7,V=P&d.JUMP_TABLE;if(H===0)return V!==0&&B===V?C:-1;if(V){var G=B-V;return G<0||G>=H?-1:A[C+G]-1}for(var Z=C,ae=Z+H-1;Z<=ae;){var W=Z+ae>>>1,te=A[W];if(te<B)Z=W+1;else if(te>B)ae=W-1;else return A[W+H]}return-1}a.determineBranch=E;var S=w(t.default),N=w(i.default);function j(A,P){return P===void 0&&(P=m.Legacy),S(A,P)}a.decodeHTML=j;function q(A){return S(A,m.Attribute)}a.decodeHTMLAttribute=q;function O(A){return S(A,m.Strict)}a.decodeHTMLStrict=O;function I(A){return N(A,m.Strict)}a.decodeXML=I})(Xu)),Xu}var js={},nD={},Sre;function dFe(){if(Sre)return nD;Sre=1,Object.defineProperty(nD,"__esModule",{value:!0});function a(e){for(var u=1;u<e.length;u++)e[u][0]+=e[u-1][0]+1;return e}return nD.default=new Map(a([[9,"&Tab;"],[0,"&NewLine;"],[22,"&excl;"],[0,"&quot;"],[0,"&num;"],[0,"&dollar;"],[0,"&percnt;"],[0,"&amp;"],[0,"&apos;"],[0,"&lpar;"],[0,"&rpar;"],[0,"&ast;"],[0,"&plus;"],[0,"&comma;"],[1,"&period;"],[0,"&sol;"],[10,"&colon;"],[0,"&semi;"],[0,{v:"&lt;",n:8402,o:"&nvlt;"}],[0,{v:"&equals;",n:8421,o:"&bne;"}],[0,{v:"&gt;",n:8402,o:"&nvgt;"}],[0,"&quest;"],[0,"&commat;"],[26,"&lbrack;"],[0,"&bsol;"],[0,"&rbrack;"],[0,"&Hat;"],[0,"&lowbar;"],[0,"&DiacriticalGrave;"],[5,{n:106,o:"&fjlig;"}],[20,"&lbrace;"],[0,"&verbar;"],[0,"&rbrace;"],[34,"&nbsp;"],[0,"&iexcl;"],[0,"&cent;"],[0,"&pound;"],[0,"&curren;"],[0,"&yen;"],[0,"&brvbar;"],[0,"&sect;"],[0,"&die;"],[0,"&copy;"],[0,"&ordf;"],[0,"&laquo;"],[0,"&not;"],[0,"&shy;"],[0,"&circledR;"],[0,"&macr;"],[0,"&deg;"],[0,"&PlusMinus;"],[0,"&sup2;"],[0,"&sup3;"],[0,"&acute;"],[0,"&micro;"],[0,"&para;"],[0,"&centerdot;"],[0,"&cedil;"],[0,"&sup1;"],[0,"&ordm;"],[0,"&raquo;"],[0,"&frac14;"],[0,"&frac12;"],[0,"&frac34;"],[0,"&iquest;"],[0,"&Agrave;"],[0,"&Aacute;"],[0,"&Acirc;"],[0,"&Atilde;"],[0,"&Auml;"],[0,"&angst;"],[0,"&AElig;"],[0,"&Ccedil;"],[0,"&Egrave;"],[0,"&Eacute;"],[0,"&Ecirc;"],[0,"&Euml;"],[0,"&Igrave;"],[0,"&Iacute;"],[0,"&Icirc;"],[0,"&Iuml;"],[0,"&ETH;"],[0,"&Ntilde;"],[0,"&Ograve;"],[0,"&Oacute;"],[0,"&Ocirc;"],[0,"&Otilde;"],[0,"&Ouml;"],[0,"&times;"],[0,"&Oslash;"],[0,"&Ugrave;"],[0,"&Uacute;"],[0,"&Ucirc;"],[0,"&Uuml;"],[0,"&Yacute;"],[0,"&THORN;"],[0,"&szlig;"],[0,"&agrave;"],[0,"&aacute;"],[0,"&acirc;"],[0,"&atilde;"],[0,"&auml;"],[0,"&aring;"],[0,"&aelig;"],[0,"&ccedil;"],[0,"&egrave;"],[0,"&eacute;"],[0,"&ecirc;"],[0,"&euml;"],[0,"&igrave;"],[0,"&iacute;"],[0,"&icirc;"],[0,"&iuml;"],[0,"&eth;"],[0,"&ntilde;"],[0,"&ograve;"],[0,"&oacute;"],[0,"&ocirc;"],[0,"&otilde;"],[0,"&ouml;"],[0,"&div;"],[0,"&oslash;"],[0,"&ugrave;"],[0,"&uacute;"],[0,"&ucirc;"],[0,"&uuml;"],[0,"&yacute;"],[0,"&thorn;"],[0,"&yuml;"],[0,"&Amacr;"],[0,"&amacr;"],[0,"&Abreve;"],[0,"&abreve;"],[0,"&Aogon;"],[0,"&aogon;"],[0,"&Cacute;"],[0,"&cacute;"],[0,"&Ccirc;"],[0,"&ccirc;"],[0,"&Cdot;"],[0,"&cdot;"],[0,"&Ccaron;"],[0,"&ccaron;"],[0,"&Dcaron;"],[0,"&dcaron;"],[0,"&Dstrok;"],[0,"&dstrok;"],[0,"&Emacr;"],[0,"&emacr;"],[2,"&Edot;"],[0,"&edot;"],[0,"&Eogon;"],[0,"&eogon;"],[0,"&Ecaron;"],[0,"&ecaron;"],[0,"&Gcirc;"],[0,"&gcirc;"],[0,"&Gbreve;"],[0,"&gbreve;"],[0,"&Gdot;"],[0,"&gdot;"],[0,"&Gcedil;"],[1,"&Hcirc;"],[0,"&hcirc;"],[0,"&Hstrok;"],[0,"&hstrok;"],[0,"&Itilde;"],[0,"&itilde;"],[0,"&Imacr;"],[0,"&imacr;"],[2,"&Iogon;"],[0,"&iogon;"],[0,"&Idot;"],[0,"&imath;"],[0,"&IJlig;"],[0,"&ijlig;"],[0,"&Jcirc;"],[0,"&jcirc;"],[0,"&Kcedil;"],[0,"&kcedil;"],[0,"&kgreen;"],[0,"&Lacute;"],[0,"&lacute;"],[0,"&Lcedil;"],[0,"&lcedil;"],[0,"&Lcaron;"],[0,"&lcaron;"],[0,"&Lmidot;"],[0,"&lmidot;"],[0,"&Lstrok;"],[0,"&lstrok;"],[0,"&Nacute;"],[0,"&nacute;"],[0,"&Ncedil;"],[0,"&ncedil;"],[0,"&Ncaron;"],[0,"&ncaron;"],[0,"&napos;"],[0,"&ENG;"],[0,"&eng;"],[0,"&Omacr;"],[0,"&omacr;"],[2,"&Odblac;"],[0,"&odblac;"],[0,"&OElig;"],[0,"&oelig;"],[0,"&Racute;"],[0,"&racute;"],[0,"&Rcedil;"],[0,"&rcedil;"],[0,"&Rcaron;"],[0,"&rcaron;"],[0,"&Sacute;"],[0,"&sacute;"],[0,"&Scirc;"],[0,"&scirc;"],[0,"&Scedil;"],[0,"&scedil;"],[0,"&Scaron;"],[0,"&scaron;"],[0,"&Tcedil;"],[0,"&tcedil;"],[0,"&Tcaron;"],[0,"&tcaron;"],[0,"&Tstrok;"],[0,"&tstrok;"],[0,"&Utilde;"],[0,"&utilde;"],[0,"&Umacr;"],[0,"&umacr;"],[0,"&Ubreve;"],[0,"&ubreve;"],[0,"&Uring;"],[0,"&uring;"],[0,"&Udblac;"],[0,"&udblac;"],[0,"&Uogon;"],[0,"&uogon;"],[0,"&Wcirc;"],[0,"&wcirc;"],[0,"&Ycirc;"],[0,"&ycirc;"],[0,"&Yuml;"],[0,"&Zacute;"],[0,"&zacute;"],[0,"&Zdot;"],[0,"&zdot;"],[0,"&Zcaron;"],[0,"&zcaron;"],[19,"&fnof;"],[34,"&imped;"],[63,"&gacute;"],[65,"&jmath;"],[142,"&circ;"],[0,"&caron;"],[16,"&breve;"],[0,"&DiacriticalDot;"],[0,"&ring;"],[0,"&ogon;"],[0,"&DiacriticalTilde;"],[0,"&dblac;"],[51,"&DownBreve;"],[127,"&Alpha;"],[0,"&Beta;"],[0,"&Gamma;"],[0,"&Delta;"],[0,"&Epsilon;"],[0,"&Zeta;"],[0,"&Eta;"],[0,"&Theta;"],[0,"&Iota;"],[0,"&Kappa;"],[0,"&Lambda;"],[0,"&Mu;"],[0,"&Nu;"],[0,"&Xi;"],[0,"&Omicron;"],[0,"&Pi;"],[0,"&Rho;"],[1,"&Sigma;"],[0,"&Tau;"],[0,"&Upsilon;"],[0,"&Phi;"],[0,"&Chi;"],[0,"&Psi;"],[0,"&ohm;"],[7,"&alpha;"],[0,"&beta;"],[0,"&gamma;"],[0,"&delta;"],[0,"&epsi;"],[0,"&zeta;"],[0,"&eta;"],[0,"&theta;"],[0,"&iota;"],[0,"&kappa;"],[0,"&lambda;"],[0,"&mu;"],[0,"&nu;"],[0,"&xi;"],[0,"&omicron;"],[0,"&pi;"],[0,"&rho;"],[0,"&sigmaf;"],[0,"&sigma;"],[0,"&tau;"],[0,"&upsi;"],[0,"&phi;"],[0,"&chi;"],[0,"&psi;"],[0,"&omega;"],[7,"&thetasym;"],[0,"&Upsi;"],[2,"&phiv;"],[0,"&piv;"],[5,"&Gammad;"],[0,"&digamma;"],[18,"&kappav;"],[0,"&rhov;"],[3,"&epsiv;"],[0,"&backepsilon;"],[10,"&IOcy;"],[0,"&DJcy;"],[0,"&GJcy;"],[0,"&Jukcy;"],[0,"&DScy;"],[0,"&Iukcy;"],[0,"&YIcy;"],[0,"&Jsercy;"],[0,"&LJcy;"],[0,"&NJcy;"],[0,"&TSHcy;"],[0,"&KJcy;"],[1,"&Ubrcy;"],[0,"&DZcy;"],[0,"&Acy;"],[0,"&Bcy;"],[0,"&Vcy;"],[0,"&Gcy;"],[0,"&Dcy;"],[0,"&IEcy;"],[0,"&ZHcy;"],[0,"&Zcy;"],[0,"&Icy;"],[0,"&Jcy;"],[0,"&Kcy;"],[0,"&Lcy;"],[0,"&Mcy;"],[0,"&Ncy;"],[0,"&Ocy;"],[0,"&Pcy;"],[0,"&Rcy;"],[0,"&Scy;"],[0,"&Tcy;"],[0,"&Ucy;"],[0,"&Fcy;"],[0,"&KHcy;"],[0,"&TScy;"],[0,"&CHcy;"],[0,"&SHcy;"],[0,"&SHCHcy;"],[0,"&HARDcy;"],[0,"&Ycy;"],[0,"&SOFTcy;"],[0,"&Ecy;"],[0,"&YUcy;"],[0,"&YAcy;"],[0,"&acy;"],[0,"&bcy;"],[0,"&vcy;"],[0,"&gcy;"],[0,"&dcy;"],[0,"&iecy;"],[0,"&zhcy;"],[0,"&zcy;"],[0,"&icy;"],[0,"&jcy;"],[0,"&kcy;"],[0,"&lcy;"],[0,"&mcy;"],[0,"&ncy;"],[0,"&ocy;"],[0,"&pcy;"],[0,"&rcy;"],[0,"&scy;"],[0,"&tcy;"],[0,"&ucy;"],[0,"&fcy;"],[0,"&khcy;"],[0,"&tscy;"],[0,"&chcy;"],[0,"&shcy;"],[0,"&shchcy;"],[0,"&hardcy;"],[0,"&ycy;"],[0,"&softcy;"],[0,"&ecy;"],[0,"&yucy;"],[0,"&yacy;"],[1,"&iocy;"],[0,"&djcy;"],[0,"&gjcy;"],[0,"&jukcy;"],[0,"&dscy;"],[0,"&iukcy;"],[0,"&yicy;"],[0,"&jsercy;"],[0,"&ljcy;"],[0,"&njcy;"],[0,"&tshcy;"],[0,"&kjcy;"],[1,"&ubrcy;"],[0,"&dzcy;"],[7074,"&ensp;"],[0,"&emsp;"],[0,"&emsp13;"],[0,"&emsp14;"],[1,"&numsp;"],[0,"&puncsp;"],[0,"&ThinSpace;"],[0,"&hairsp;"],[0,"&NegativeMediumSpace;"],[0,"&zwnj;"],[0,"&zwj;"],[0,"&lrm;"],[0,"&rlm;"],[0,"&dash;"],[2,"&ndash;"],[0,"&mdash;"],[0,"&horbar;"],[0,"&Verbar;"],[1,"&lsquo;"],[0,"&CloseCurlyQuote;"],[0,"&lsquor;"],[1,"&ldquo;"],[0,"&CloseCurlyDoubleQuote;"],[0,"&bdquo;"],[1,"&dagger;"],[0,"&Dagger;"],[0,"&bull;"],[2,"&nldr;"],[0,"&hellip;"],[9,"&permil;"],[0,"&pertenk;"],[0,"&prime;"],[0,"&Prime;"],[0,"&tprime;"],[0,"&backprime;"],[3,"&lsaquo;"],[0,"&rsaquo;"],[3,"&oline;"],[2,"&caret;"],[1,"&hybull;"],[0,"&frasl;"],[10,"&bsemi;"],[7,"&qprime;"],[7,{v:"&MediumSpace;",n:8202,o:"&ThickSpace;"}],[0,"&NoBreak;"],[0,"&af;"],[0,"&InvisibleTimes;"],[0,"&ic;"],[72,"&euro;"],[46,"&tdot;"],[0,"&DotDot;"],[37,"&complexes;"],[2,"&incare;"],[4,"&gscr;"],[0,"&hamilt;"],[0,"&Hfr;"],[0,"&Hopf;"],[0,"&planckh;"],[0,"&hbar;"],[0,"&imagline;"],[0,"&Ifr;"],[0,"&lagran;"],[0,"&ell;"],[1,"&naturals;"],[0,"&numero;"],[0,"&copysr;"],[0,"&weierp;"],[0,"&Popf;"],[0,"&Qopf;"],[0,"&realine;"],[0,"&real;"],[0,"&reals;"],[0,"&rx;"],[3,"&trade;"],[1,"&integers;"],[2,"&mho;"],[0,"&zeetrf;"],[0,"&iiota;"],[2,"&bernou;"],[0,"&Cayleys;"],[1,"&escr;"],[0,"&Escr;"],[0,"&Fouriertrf;"],[1,"&Mellintrf;"],[0,"&order;"],[0,"&alefsym;"],[0,"&beth;"],[0,"&gimel;"],[0,"&daleth;"],[12,"&CapitalDifferentialD;"],[0,"&dd;"],[0,"&ee;"],[0,"&ii;"],[10,"&frac13;"],[0,"&frac23;"],[0,"&frac15;"],[0,"&frac25;"],[0,"&frac35;"],[0,"&frac45;"],[0,"&frac16;"],[0,"&frac56;"],[0,"&frac18;"],[0,"&frac38;"],[0,"&frac58;"],[0,"&frac78;"],[49,"&larr;"],[0,"&ShortUpArrow;"],[0,"&rarr;"],[0,"&darr;"],[0,"&harr;"],[0,"&updownarrow;"],[0,"&nwarr;"],[0,"&nearr;"],[0,"&LowerRightArrow;"],[0,"&LowerLeftArrow;"],[0,"&nlarr;"],[0,"&nrarr;"],[1,{v:"&rarrw;",n:824,o:"&nrarrw;"}],[0,"&Larr;"],[0,"&Uarr;"],[0,"&Rarr;"],[0,"&Darr;"],[0,"&larrtl;"],[0,"&rarrtl;"],[0,"&LeftTeeArrow;"],[0,"&mapstoup;"],[0,"&map;"],[0,"&DownTeeArrow;"],[1,"&hookleftarrow;"],[0,"&hookrightarrow;"],[0,"&larrlp;"],[0,"&looparrowright;"],[0,"&harrw;"],[0,"&nharr;"],[1,"&lsh;"],[0,"&rsh;"],[0,"&ldsh;"],[0,"&rdsh;"],[1,"&crarr;"],[0,"&cularr;"],[0,"&curarr;"],[2,"&circlearrowleft;"],[0,"&circlearrowright;"],[0,"&leftharpoonup;"],[0,"&DownLeftVector;"],[0,"&RightUpVector;"],[0,"&LeftUpVector;"],[0,"&rharu;"],[0,"&DownRightVector;"],[0,"&dharr;"],[0,"&dharl;"],[0,"&RightArrowLeftArrow;"],[0,"&udarr;"],[0,"&LeftArrowRightArrow;"],[0,"&leftleftarrows;"],[0,"&upuparrows;"],[0,"&rightrightarrows;"],[0,"&ddarr;"],[0,"&leftrightharpoons;"],[0,"&Equilibrium;"],[0,"&nlArr;"],[0,"&nhArr;"],[0,"&nrArr;"],[0,"&DoubleLeftArrow;"],[0,"&DoubleUpArrow;"],[0,"&DoubleRightArrow;"],[0,"&dArr;"],[0,"&DoubleLeftRightArrow;"],[0,"&DoubleUpDownArrow;"],[0,"&nwArr;"],[0,"&neArr;"],[0,"&seArr;"],[0,"&swArr;"],[0,"&lAarr;"],[0,"&rAarr;"],[1,"&zigrarr;"],[6,"&larrb;"],[0,"&rarrb;"],[15,"&DownArrowUpArrow;"],[7,"&loarr;"],[0,"&roarr;"],[0,"&hoarr;"],[0,"&forall;"],[0,"&comp;"],[0,{v:"&part;",n:824,o:"&npart;"}],[0,"&exist;"],[0,"&nexist;"],[0,"&empty;"],[1,"&Del;"],[0,"&Element;"],[0,"&NotElement;"],[1,"&ni;"],[0,"&notni;"],[2,"&prod;"],[0,"&coprod;"],[0,"&sum;"],[0,"&minus;"],[0,"&MinusPlus;"],[0,"&dotplus;"],[1,"&Backslash;"],[0,"&lowast;"],[0,"&compfn;"],[1,"&radic;"],[2,"&prop;"],[0,"&infin;"],[0,"&angrt;"],[0,{v:"&ang;",n:8402,o:"&nang;"}],[0,"&angmsd;"],[0,"&angsph;"],[0,"&mid;"],[0,"&nmid;"],[0,"&DoubleVerticalBar;"],[0,"&NotDoubleVerticalBar;"],[0,"&and;"],[0,"&or;"],[0,{v:"&cap;",n:65024,o:"&caps;"}],[0,{v:"&cup;",n:65024,o:"&cups;"}],[0,"&int;"],[0,"&Int;"],[0,"&iiint;"],[0,"&conint;"],[0,"&Conint;"],[0,"&Cconint;"],[0,"&cwint;"],[0,"&ClockwiseContourIntegral;"],[0,"&awconint;"],[0,"&there4;"],[0,"&becaus;"],[0,"&ratio;"],[0,"&Colon;"],[0,"&dotminus;"],[1,"&mDDot;"],[0,"&homtht;"],[0,{v:"&sim;",n:8402,o:"&nvsim;"}],[0,{v:"&backsim;",n:817,o:"&race;"}],[0,{v:"&ac;",n:819,o:"&acE;"}],[0,"&acd;"],[0,"&VerticalTilde;"],[0,"&NotTilde;"],[0,{v:"&eqsim;",n:824,o:"&nesim;"}],[0,"&sime;"],[0,"&NotTildeEqual;"],[0,"&cong;"],[0,"&simne;"],[0,"&ncong;"],[0,"&ap;"],[0,"&nap;"],[0,"&ape;"],[0,{v:"&apid;",n:824,o:"&napid;"}],[0,"&backcong;"],[0,{v:"&asympeq;",n:8402,o:"&nvap;"}],[0,{v:"&bump;",n:824,o:"&nbump;"}],[0,{v:"&bumpe;",n:824,o:"&nbumpe;"}],[0,{v:"&doteq;",n:824,o:"&nedot;"}],[0,"&doteqdot;"],[0,"&efDot;"],[0,"&erDot;"],[0,"&Assign;"],[0,"&ecolon;"],[0,"&ecir;"],[0,"&circeq;"],[1,"&wedgeq;"],[0,"&veeeq;"],[1,"&triangleq;"],[2,"&equest;"],[0,"&ne;"],[0,{v:"&Congruent;",n:8421,o:"&bnequiv;"}],[0,"&nequiv;"],[1,{v:"&le;",n:8402,o:"&nvle;"}],[0,{v:"&ge;",n:8402,o:"&nvge;"}],[0,{v:"&lE;",n:824,o:"&nlE;"}],[0,{v:"&gE;",n:824,o:"&ngE;"}],[0,{v:"&lnE;",n:65024,o:"&lvertneqq;"}],[0,{v:"&gnE;",n:65024,o:"&gvertneqq;"}],[0,{v:"&ll;",n:new Map(a([[824,"&nLtv;"],[7577,"&nLt;"]]))}],[0,{v:"&gg;",n:new Map(a([[824,"&nGtv;"],[7577,"&nGt;"]]))}],[0,"&between;"],[0,"&NotCupCap;"],[0,"&nless;"],[0,"&ngt;"],[0,"&nle;"],[0,"&nge;"],[0,"&lesssim;"],[0,"&GreaterTilde;"],[0,"&nlsim;"],[0,"&ngsim;"],[0,"&LessGreater;"],[0,"&gl;"],[0,"&NotLessGreater;"],[0,"&NotGreaterLess;"],[0,"&pr;"],[0,"&sc;"],[0,"&prcue;"],[0,"&sccue;"],[0,"&PrecedesTilde;"],[0,{v:"&scsim;",n:824,o:"&NotSucceedsTilde;"}],[0,"&NotPrecedes;"],[0,"&NotSucceeds;"],[0,{v:"&sub;",n:8402,o:"&NotSubset;"}],[0,{v:"&sup;",n:8402,o:"&NotSuperset;"}],[0,"&nsub;"],[0,"&nsup;"],[0,"&sube;"],[0,"&supe;"],[0,"&NotSubsetEqual;"],[0,"&NotSupersetEqual;"],[0,{v:"&subne;",n:65024,o:"&varsubsetneq;"}],[0,{v:"&supne;",n:65024,o:"&varsupsetneq;"}],[1,"&cupdot;"],[0,"&UnionPlus;"],[0,{v:"&sqsub;",n:824,o:"&NotSquareSubset;"}],[0,{v:"&sqsup;",n:824,o:"&NotSquareSuperset;"}],[0,"&sqsube;"],[0,"&sqsupe;"],[0,{v:"&sqcap;",n:65024,o:"&sqcaps;"}],[0,{v:"&sqcup;",n:65024,o:"&sqcups;"}],[0,"&CirclePlus;"],[0,"&CircleMinus;"],[0,"&CircleTimes;"],[0,"&osol;"],[0,"&CircleDot;"],[0,"&circledcirc;"],[0,"&circledast;"],[1,"&circleddash;"],[0,"&boxplus;"],[0,"&boxminus;"],[0,"&boxtimes;"],[0,"&dotsquare;"],[0,"&RightTee;"],[0,"&dashv;"],[0,"&DownTee;"],[0,"&bot;"],[1,"&models;"],[0,"&DoubleRightTee;"],[0,"&Vdash;"],[0,"&Vvdash;"],[0,"&VDash;"],[0,"&nvdash;"],[0,"&nvDash;"],[0,"&nVdash;"],[0,"&nVDash;"],[0,"&prurel;"],[1,"&LeftTriangle;"],[0,"&RightTriangle;"],[0,{v:"&LeftTriangleEqual;",n:8402,o:"&nvltrie;"}],[0,{v:"&RightTriangleEqual;",n:8402,o:"&nvrtrie;"}],[0,"&origof;"],[0,"&imof;"],[0,"&multimap;"],[0,"&hercon;"],[0,"&intcal;"],[0,"&veebar;"],[1,"&barvee;"],[0,"&angrtvb;"],[0,"&lrtri;"],[0,"&bigwedge;"],[0,"&bigvee;"],[0,"&bigcap;"],[0,"&bigcup;"],[0,"&diam;"],[0,"&sdot;"],[0,"&sstarf;"],[0,"&divideontimes;"],[0,"&bowtie;"],[0,"&ltimes;"],[0,"&rtimes;"],[0,"&leftthreetimes;"],[0,"&rightthreetimes;"],[0,"&backsimeq;"],[0,"&curlyvee;"],[0,"&curlywedge;"],[0,"&Sub;"],[0,"&Sup;"],[0,"&Cap;"],[0,"&Cup;"],[0,"&fork;"],[0,"&epar;"],[0,"&lessdot;"],[0,"&gtdot;"],[0,{v:"&Ll;",n:824,o:"&nLl;"}],[0,{v:"&Gg;",n:824,o:"&nGg;"}],[0,{v:"&leg;",n:65024,o:"&lesg;"}],[0,{v:"&gel;",n:65024,o:"&gesl;"}],[2,"&cuepr;"],[0,"&cuesc;"],[0,"&NotPrecedesSlantEqual;"],[0,"&NotSucceedsSlantEqual;"],[0,"&NotSquareSubsetEqual;"],[0,"&NotSquareSupersetEqual;"],[2,"&lnsim;"],[0,"&gnsim;"],[0,"&precnsim;"],[0,"&scnsim;"],[0,"&nltri;"],[0,"&NotRightTriangle;"],[0,"&nltrie;"],[0,"&NotRightTriangleEqual;"],[0,"&vellip;"],[0,"&ctdot;"],[0,"&utdot;"],[0,"&dtdot;"],[0,"&disin;"],[0,"&isinsv;"],[0,"&isins;"],[0,{v:"&isindot;",n:824,o:"&notindot;"}],[0,"&notinvc;"],[0,"&notinvb;"],[1,{v:"&isinE;",n:824,o:"&notinE;"}],[0,"&nisd;"],[0,"&xnis;"],[0,"&nis;"],[0,"&notnivc;"],[0,"&notnivb;"],[6,"&barwed;"],[0,"&Barwed;"],[1,"&lceil;"],[0,"&rceil;"],[0,"&LeftFloor;"],[0,"&rfloor;"],[0,"&drcrop;"],[0,"&dlcrop;"],[0,"&urcrop;"],[0,"&ulcrop;"],[0,"&bnot;"],[1,"&profline;"],[0,"&profsurf;"],[1,"&telrec;"],[0,"&target;"],[5,"&ulcorn;"],[0,"&urcorn;"],[0,"&dlcorn;"],[0,"&drcorn;"],[2,"&frown;"],[0,"&smile;"],[9,"&cylcty;"],[0,"&profalar;"],[7,"&topbot;"],[6,"&ovbar;"],[1,"&solbar;"],[60,"&angzarr;"],[51,"&lmoustache;"],[0,"&rmoustache;"],[2,"&OverBracket;"],[0,"&bbrk;"],[0,"&bbrktbrk;"],[37,"&OverParenthesis;"],[0,"&UnderParenthesis;"],[0,"&OverBrace;"],[0,"&UnderBrace;"],[2,"&trpezium;"],[4,"&elinters;"],[59,"&blank;"],[164,"&circledS;"],[55,"&boxh;"],[1,"&boxv;"],[9,"&boxdr;"],[3,"&boxdl;"],[3,"&boxur;"],[3,"&boxul;"],[3,"&boxvr;"],[7,"&boxvl;"],[7,"&boxhd;"],[7,"&boxhu;"],[7,"&boxvh;"],[19,"&boxH;"],[0,"&boxV;"],[0,"&boxdR;"],[0,"&boxDr;"],[0,"&boxDR;"],[0,"&boxdL;"],[0,"&boxDl;"],[0,"&boxDL;"],[0,"&boxuR;"],[0,"&boxUr;"],[0,"&boxUR;"],[0,"&boxuL;"],[0,"&boxUl;"],[0,"&boxUL;"],[0,"&boxvR;"],[0,"&boxVr;"],[0,"&boxVR;"],[0,"&boxvL;"],[0,"&boxVl;"],[0,"&boxVL;"],[0,"&boxHd;"],[0,"&boxhD;"],[0,"&boxHD;"],[0,"&boxHu;"],[0,"&boxhU;"],[0,"&boxHU;"],[0,"&boxvH;"],[0,"&boxVh;"],[0,"&boxVH;"],[19,"&uhblk;"],[3,"&lhblk;"],[3,"&block;"],[8,"&blk14;"],[0,"&blk12;"],[0,"&blk34;"],[13,"&square;"],[8,"&blacksquare;"],[0,"&EmptyVerySmallSquare;"],[1,"&rect;"],[0,"&marker;"],[2,"&fltns;"],[1,"&bigtriangleup;"],[0,"&blacktriangle;"],[0,"&triangle;"],[2,"&blacktriangleright;"],[0,"&rtri;"],[3,"&bigtriangledown;"],[0,"&blacktriangledown;"],[0,"&dtri;"],[2,"&blacktriangleleft;"],[0,"&ltri;"],[6,"&loz;"],[0,"&cir;"],[32,"&tridot;"],[2,"&bigcirc;"],[8,"&ultri;"],[0,"&urtri;"],[0,"&lltri;"],[0,"&EmptySmallSquare;"],[0,"&FilledSmallSquare;"],[8,"&bigstar;"],[0,"&star;"],[7,"&phone;"],[49,"&female;"],[1,"&male;"],[29,"&spades;"],[2,"&clubs;"],[1,"&hearts;"],[0,"&diamondsuit;"],[3,"&sung;"],[2,"&flat;"],[0,"&natural;"],[0,"&sharp;"],[163,"&check;"],[3,"&cross;"],[8,"&malt;"],[21,"&sext;"],[33,"&VerticalSeparator;"],[25,"&lbbrk;"],[0,"&rbbrk;"],[84,"&bsolhsub;"],[0,"&suphsol;"],[28,"&LeftDoubleBracket;"],[0,"&RightDoubleBracket;"],[0,"&lang;"],[0,"&rang;"],[0,"&Lang;"],[0,"&Rang;"],[0,"&loang;"],[0,"&roang;"],[7,"&longleftarrow;"],[0,"&longrightarrow;"],[0,"&longleftrightarrow;"],[0,"&DoubleLongLeftArrow;"],[0,"&DoubleLongRightArrow;"],[0,"&DoubleLongLeftRightArrow;"],[1,"&longmapsto;"],[2,"&dzigrarr;"],[258,"&nvlArr;"],[0,"&nvrArr;"],[0,"&nvHarr;"],[0,"&Map;"],[6,"&lbarr;"],[0,"&bkarow;"],[0,"&lBarr;"],[0,"&dbkarow;"],[0,"&drbkarow;"],[0,"&DDotrahd;"],[0,"&UpArrowBar;"],[0,"&DownArrowBar;"],[2,"&Rarrtl;"],[2,"&latail;"],[0,"&ratail;"],[0,"&lAtail;"],[0,"&rAtail;"],[0,"&larrfs;"],[0,"&rarrfs;"],[0,"&larrbfs;"],[0,"&rarrbfs;"],[2,"&nwarhk;"],[0,"&nearhk;"],[0,"&hksearow;"],[0,"&hkswarow;"],[0,"&nwnear;"],[0,"&nesear;"],[0,"&seswar;"],[0,"&swnwar;"],[8,{v:"&rarrc;",n:824,o:"&nrarrc;"}],[1,"&cudarrr;"],[0,"&ldca;"],[0,"&rdca;"],[0,"&cudarrl;"],[0,"&larrpl;"],[2,"&curarrm;"],[0,"&cularrp;"],[7,"&rarrpl;"],[2,"&harrcir;"],[0,"&Uarrocir;"],[0,"&lurdshar;"],[0,"&ldrushar;"],[2,"&LeftRightVector;"],[0,"&RightUpDownVector;"],[0,"&DownLeftRightVector;"],[0,"&LeftUpDownVector;"],[0,"&LeftVectorBar;"],[0,"&RightVectorBar;"],[0,"&RightUpVectorBar;"],[0,"&RightDownVectorBar;"],[0,"&DownLeftVectorBar;"],[0,"&DownRightVectorBar;"],[0,"&LeftUpVectorBar;"],[0,"&LeftDownVectorBar;"],[0,"&LeftTeeVector;"],[0,"&RightTeeVector;"],[0,"&RightUpTeeVector;"],[0,"&RightDownTeeVector;"],[0,"&DownLeftTeeVector;"],[0,"&DownRightTeeVector;"],[0,"&LeftUpTeeVector;"],[0,"&LeftDownTeeVector;"],[0,"&lHar;"],[0,"&uHar;"],[0,"&rHar;"],[0,"&dHar;"],[0,"&luruhar;"],[0,"&ldrdhar;"],[0,"&ruluhar;"],[0,"&rdldhar;"],[0,"&lharul;"],[0,"&llhard;"],[0,"&rharul;"],[0,"&lrhard;"],[0,"&udhar;"],[0,"&duhar;"],[0,"&RoundImplies;"],[0,"&erarr;"],[0,"&simrarr;"],[0,"&larrsim;"],[0,"&rarrsim;"],[0,"&rarrap;"],[0,"&ltlarr;"],[1,"&gtrarr;"],[0,"&subrarr;"],[1,"&suplarr;"],[0,"&lfisht;"],[0,"&rfisht;"],[0,"&ufisht;"],[0,"&dfisht;"],[5,"&lopar;"],[0,"&ropar;"],[4,"&lbrke;"],[0,"&rbrke;"],[0,"&lbrkslu;"],[0,"&rbrksld;"],[0,"&lbrksld;"],[0,"&rbrkslu;"],[0,"&langd;"],[0,"&rangd;"],[0,"&lparlt;"],[0,"&rpargt;"],[0,"&gtlPar;"],[0,"&ltrPar;"],[3,"&vzigzag;"],[1,"&vangrt;"],[0,"&angrtvbd;"],[6,"&ange;"],[0,"&range;"],[0,"&dwangle;"],[0,"&uwangle;"],[0,"&angmsdaa;"],[0,"&angmsdab;"],[0,"&angmsdac;"],[0,"&angmsdad;"],[0,"&angmsdae;"],[0,"&angmsdaf;"],[0,"&angmsdag;"],[0,"&angmsdah;"],[0,"&bemptyv;"],[0,"&demptyv;"],[0,"&cemptyv;"],[0,"&raemptyv;"],[0,"&laemptyv;"],[0,"&ohbar;"],[0,"&omid;"],[0,"&opar;"],[1,"&operp;"],[1,"&olcross;"],[0,"&odsold;"],[1,"&olcir;"],[0,"&ofcir;"],[0,"&olt;"],[0,"&ogt;"],[0,"&cirscir;"],[0,"&cirE;"],[0,"&solb;"],[0,"&bsolb;"],[3,"&boxbox;"],[3,"&trisb;"],[0,"&rtriltri;"],[0,{v:"&LeftTriangleBar;",n:824,o:"&NotLeftTriangleBar;"}],[0,{v:"&RightTriangleBar;",n:824,o:"&NotRightTriangleBar;"}],[11,"&iinfin;"],[0,"&infintie;"],[0,"&nvinfin;"],[4,"&eparsl;"],[0,"&smeparsl;"],[0,"&eqvparsl;"],[5,"&blacklozenge;"],[8,"&RuleDelayed;"],[1,"&dsol;"],[9,"&bigodot;"],[0,"&bigoplus;"],[0,"&bigotimes;"],[1,"&biguplus;"],[1,"&bigsqcup;"],[5,"&iiiint;"],[0,"&fpartint;"],[2,"&cirfnint;"],[0,"&awint;"],[0,"&rppolint;"],[0,"&scpolint;"],[0,"&npolint;"],[0,"&pointint;"],[0,"&quatint;"],[0,"&intlarhk;"],[10,"&pluscir;"],[0,"&plusacir;"],[0,"&simplus;"],[0,"&plusdu;"],[0,"&plussim;"],[0,"&plustwo;"],[1,"&mcomma;"],[0,"&minusdu;"],[2,"&loplus;"],[0,"&roplus;"],[0,"&Cross;"],[0,"&timesd;"],[0,"&timesbar;"],[1,"&smashp;"],[0,"&lotimes;"],[0,"&rotimes;"],[0,"&otimesas;"],[0,"&Otimes;"],[0,"&odiv;"],[0,"&triplus;"],[0,"&triminus;"],[0,"&tritime;"],[0,"&intprod;"],[2,"&amalg;"],[0,"&capdot;"],[1,"&ncup;"],[0,"&ncap;"],[0,"&capand;"],[0,"&cupor;"],[0,"&cupcap;"],[0,"&capcup;"],[0,"&cupbrcap;"],[0,"&capbrcup;"],[0,"&cupcup;"],[0,"&capcap;"],[0,"&ccups;"],[0,"&ccaps;"],[2,"&ccupssm;"],[2,"&And;"],[0,"&Or;"],[0,"&andand;"],[0,"&oror;"],[0,"&orslope;"],[0,"&andslope;"],[1,"&andv;"],[0,"&orv;"],[0,"&andd;"],[0,"&ord;"],[1,"&wedbar;"],[6,"&sdote;"],[3,"&simdot;"],[2,{v:"&congdot;",n:824,o:"&ncongdot;"}],[0,"&easter;"],[0,"&apacir;"],[0,{v:"&apE;",n:824,o:"&napE;"}],[0,"&eplus;"],[0,"&pluse;"],[0,"&Esim;"],[0,"&Colone;"],[0,"&Equal;"],[1,"&ddotseq;"],[0,"&equivDD;"],[0,"&ltcir;"],[0,"&gtcir;"],[0,"&ltquest;"],[0,"&gtquest;"],[0,{v:"&leqslant;",n:824,o:"&nleqslant;"}],[0,{v:"&geqslant;",n:824,o:"&ngeqslant;"}],[0,"&lesdot;"],[0,"&gesdot;"],[0,"&lesdoto;"],[0,"&gesdoto;"],[0,"&lesdotor;"],[0,"&gesdotol;"],[0,"&lap;"],[0,"&gap;"],[0,"&lne;"],[0,"&gne;"],[0,"&lnap;"],[0,"&gnap;"],[0,"&lEg;"],[0,"&gEl;"],[0,"&lsime;"],[0,"&gsime;"],[0,"&lsimg;"],[0,"&gsiml;"],[0,"&lgE;"],[0,"&glE;"],[0,"&lesges;"],[0,"&gesles;"],[0,"&els;"],[0,"&egs;"],[0,"&elsdot;"],[0,"&egsdot;"],[0,"&el;"],[0,"&eg;"],[2,"&siml;"],[0,"&simg;"],[0,"&simlE;"],[0,"&simgE;"],[0,{v:"&LessLess;",n:824,o:"&NotNestedLessLess;"}],[0,{v:"&GreaterGreater;",n:824,o:"&NotNestedGreaterGreater;"}],[1,"&glj;"],[0,"&gla;"],[0,"&ltcc;"],[0,"&gtcc;"],[0,"&lescc;"],[0,"&gescc;"],[0,"&smt;"],[0,"&lat;"],[0,{v:"&smte;",n:65024,o:"&smtes;"}],[0,{v:"&late;",n:65024,o:"&lates;"}],[0,"&bumpE;"],[0,{v:"&PrecedesEqual;",n:824,o:"&NotPrecedesEqual;"}],[0,{v:"&sce;",n:824,o:"&NotSucceedsEqual;"}],[2,"&prE;"],[0,"&scE;"],[0,"&precneqq;"],[0,"&scnE;"],[0,"&prap;"],[0,"&scap;"],[0,"&precnapprox;"],[0,"&scnap;"],[0,"&Pr;"],[0,"&Sc;"],[0,"&subdot;"],[0,"&supdot;"],[0,"&subplus;"],[0,"&supplus;"],[0,"&submult;"],[0,"&supmult;"],[0,"&subedot;"],[0,"&supedot;"],[0,{v:"&subE;",n:824,o:"&nsubE;"}],[0,{v:"&supE;",n:824,o:"&nsupE;"}],[0,"&subsim;"],[0,"&supsim;"],[2,{v:"&subnE;",n:65024,o:"&varsubsetneqq;"}],[0,{v:"&supnE;",n:65024,o:"&varsupsetneqq;"}],[2,"&csub;"],[0,"&csup;"],[0,"&csube;"],[0,"&csupe;"],[0,"&subsup;"],[0,"&supsub;"],[0,"&subsub;"],[0,"&supsup;"],[0,"&suphsub;"],[0,"&supdsub;"],[0,"&forkv;"],[0,"&topfork;"],[0,"&mlcp;"],[8,"&Dashv;"],[1,"&Vdashl;"],[0,"&Barv;"],[0,"&vBar;"],[0,"&vBarv;"],[1,"&Vbar;"],[0,"&Not;"],[0,"&bNot;"],[0,"&rnmid;"],[0,"&cirmid;"],[0,"&midcir;"],[0,"&topcir;"],[0,"&nhpar;"],[0,"&parsim;"],[9,{v:"&parsl;",n:8421,o:"&nparsl;"}],[44343,{n:new Map(a([[56476,"&Ascr;"],[1,"&Cscr;"],[0,"&Dscr;"],[2,"&Gscr;"],[2,"&Jscr;"],[0,"&Kscr;"],[2,"&Nscr;"],[0,"&Oscr;"],[0,"&Pscr;"],[0,"&Qscr;"],[1,"&Sscr;"],[0,"&Tscr;"],[0,"&Uscr;"],[0,"&Vscr;"],[0,"&Wscr;"],[0,"&Xscr;"],[0,"&Yscr;"],[0,"&Zscr;"],[0,"&ascr;"],[0,"&bscr;"],[0,"&cscr;"],[0,"&dscr;"],[1,"&fscr;"],[1,"&hscr;"],[0,"&iscr;"],[0,"&jscr;"],[0,"&kscr;"],[0,"&lscr;"],[0,"&mscr;"],[0,"&nscr;"],[1,"&pscr;"],[0,"&qscr;"],[0,"&rscr;"],[0,"&sscr;"],[0,"&tscr;"],[0,"&uscr;"],[0,"&vscr;"],[0,"&wscr;"],[0,"&xscr;"],[0,"&yscr;"],[0,"&zscr;"],[52,"&Afr;"],[0,"&Bfr;"],[1,"&Dfr;"],[0,"&Efr;"],[0,"&Ffr;"],[0,"&Gfr;"],[2,"&Jfr;"],[0,"&Kfr;"],[0,"&Lfr;"],[0,"&Mfr;"],[0,"&Nfr;"],[0,"&Ofr;"],[0,"&Pfr;"],[0,"&Qfr;"],[1,"&Sfr;"],[0,"&Tfr;"],[0,"&Ufr;"],[0,"&Vfr;"],[0,"&Wfr;"],[0,"&Xfr;"],[0,"&Yfr;"],[1,"&afr;"],[0,"&bfr;"],[0,"&cfr;"],[0,"&dfr;"],[0,"&efr;"],[0,"&ffr;"],[0,"&gfr;"],[0,"&hfr;"],[0,"&ifr;"],[0,"&jfr;"],[0,"&kfr;"],[0,"&lfr;"],[0,"&mfr;"],[0,"&nfr;"],[0,"&ofr;"],[0,"&pfr;"],[0,"&qfr;"],[0,"&rfr;"],[0,"&sfr;"],[0,"&tfr;"],[0,"&ufr;"],[0,"&vfr;"],[0,"&wfr;"],[0,"&xfr;"],[0,"&yfr;"],[0,"&zfr;"],[0,"&Aopf;"],[0,"&Bopf;"],[1,"&Dopf;"],[0,"&Eopf;"],[0,"&Fopf;"],[0,"&Gopf;"],[1,"&Iopf;"],[0,"&Jopf;"],[0,"&Kopf;"],[0,"&Lopf;"],[0,"&Mopf;"],[1,"&Oopf;"],[3,"&Sopf;"],[0,"&Topf;"],[0,"&Uopf;"],[0,"&Vopf;"],[0,"&Wopf;"],[0,"&Xopf;"],[0,"&Yopf;"],[1,"&aopf;"],[0,"&bopf;"],[0,"&copf;"],[0,"&dopf;"],[0,"&eopf;"],[0,"&fopf;"],[0,"&gopf;"],[0,"&hopf;"],[0,"&iopf;"],[0,"&jopf;"],[0,"&kopf;"],[0,"&lopf;"],[0,"&mopf;"],[0,"&nopf;"],[0,"&oopf;"],[0,"&popf;"],[0,"&qopf;"],[0,"&ropf;"],[0,"&sopf;"],[0,"&topf;"],[0,"&uopf;"],[0,"&vopf;"],[0,"&wopf;"],[0,"&xopf;"],[0,"&yopf;"],[0,"&zopf;"]]))}],[8906,"&fflig;"],[0,"&filig;"],[0,"&fllig;"],[0,"&ffilig;"],[0,"&ffllig;"]])),nD}var tC={},Ere;function l7(){return Ere||(Ere=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.escapeText=a.escapeAttribute=a.escapeUTF8=a.escape=a.encodeXML=a.getCodePoint=a.xmlReplacer=void 0,a.xmlReplacer=/["&'<>$\x80-\uFFFF]/g;var e=new Map([[34,"&quot;"],[38,"&amp;"],[39,"&apos;"],[60,"&lt;"],[62,"&gt;"]]);a.getCodePoint=String.prototype.codePointAt!=null?function(r,t){return r.codePointAt(t)}:function(r,t){return(r.charCodeAt(t)&64512)===55296?(r.charCodeAt(t)-55296)*1024+r.charCodeAt(t+1)-56320+65536:r.charCodeAt(t)};function u(r){for(var t="",i=0,o;(o=a.xmlReplacer.exec(r))!==null;){var l=o.index,s=r.charCodeAt(l),c=e.get(s);c!==void 0?(t+=r.substring(i,l)+c,i=l+1):(t+="".concat(r.substring(i,l),"&#x").concat((0,a.getCodePoint)(r,l).toString(16),";"),i=a.xmlReplacer.lastIndex+=+((s&64512)===55296))}return t+r.substr(i)}a.encodeXML=u,a.escape=u;function n(r,t){return function(o){for(var l,s=0,c="";l=r.exec(o);)s!==l.index&&(c+=o.substring(s,l.index)),c+=t.get(l[0].charCodeAt(0)),s=l.index+1;return c+o.substring(s)}}a.escapeUTF8=n(/[&<>'"]/g,e),a.escapeAttribute=n(/["&\u00A0]/g,new Map([[34,"&quot;"],[38,"&amp;"],[160,"&nbsp;"]])),a.escapeText=n(/[&<>\u00A0]/g,new Map([[38,"&amp;"],[60,"&lt;"],[62,"&gt;"],[160,"&nbsp;"]]))})(tC)),tC}var Are;function Ore(){if(Are)return js;Are=1;var a=js&&js.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(js,"__esModule",{value:!0}),js.encodeNonAsciiHTML=js.encodeHTML=void 0;var e=a(dFe()),u=l7(),n=/[\t\n!-,./:-@[-`\f{-}$\x80-\uFFFF]/g;function r(o){return i(n,o)}js.encodeHTML=r;function t(o){return i(u.xmlReplacer,o)}js.encodeNonAsciiHTML=t;function i(o,l){for(var s="",c=0,d;(d=o.exec(l))!==null;){var f=d.index;s+=l.substring(c,f);var p=l.charCodeAt(f),h=e.default.get(p);if(typeof h=="object"){if(f+1<l.length){var g=l.charCodeAt(f+1),v=typeof h.n=="number"?h.n===g?h.o:void 0:h.n.get(g);if(v!==void 0){s+=v,c=o.lastIndex+=1;continue}}h=h.v}if(h!==void 0)s+=h,c=f+1;else{var m=(0,u.getCodePoint)(l,f);s+="&#x".concat(m.toString(16),";"),c=o.lastIndex+=+(m!==p)}}return s+l.substr(c)}return js}var xre;function fFe(){return xre||(xre=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.decodeXMLStrict=a.decodeHTML5Strict=a.decodeHTML4Strict=a.decodeHTML5=a.decodeHTML4=a.decodeHTMLAttribute=a.decodeHTMLStrict=a.decodeHTML=a.decodeXML=a.DecodingMode=a.EntityDecoder=a.encodeHTML5=a.encodeHTML4=a.encodeNonAsciiHTML=a.encodeHTML=a.escapeText=a.escapeAttribute=a.escapeUTF8=a.escape=a.encodeXML=a.encode=a.decodeStrict=a.decode=a.EncodingMode=a.EntityLevel=void 0;var e=wre(),u=Ore(),n=l7(),r;(function(f){f[f.XML=0]="XML",f[f.HTML=1]="HTML"})(r=a.EntityLevel||(a.EntityLevel={}));var t;(function(f){f[f.UTF8=0]="UTF8",f[f.ASCII=1]="ASCII",f[f.Extensive=2]="Extensive",f[f.Attribute=3]="Attribute",f[f.Text=4]="Text"})(t=a.EncodingMode||(a.EncodingMode={}));function i(f,p){p===void 0&&(p=r.XML);var h=typeof p=="number"?p:p.level;if(h===r.HTML){var g=typeof p=="object"?p.mode:void 0;return(0,e.decodeHTML)(f,g)}return(0,e.decodeXML)(f)}a.decode=i;function o(f,p){var h;p===void 0&&(p=r.XML);var g=typeof p=="number"?{level:p}:p;return(h=g.mode)!==null&&h!==void 0||(g.mode=e.DecodingMode.Strict),i(f,g)}a.decodeStrict=o;function l(f,p){p===void 0&&(p=r.XML);var h=typeof p=="number"?{level:p}:p;return h.mode===t.UTF8?(0,n.escapeUTF8)(f):h.mode===t.Attribute?(0,n.escapeAttribute)(f):h.mode===t.Text?(0,n.escapeText)(f):h.level===r.HTML?h.mode===t.ASCII?(0,u.encodeNonAsciiHTML)(f):(0,u.encodeHTML)(f):(0,n.encodeXML)(f)}a.encode=l;var s=l7();Object.defineProperty(a,"encodeXML",{enumerable:!0,get:function(){return s.encodeXML}}),Object.defineProperty(a,"escape",{enumerable:!0,get:function(){return s.escape}}),Object.defineProperty(a,"escapeUTF8",{enumerable:!0,get:function(){return s.escapeUTF8}}),Object.defineProperty(a,"escapeAttribute",{enumerable:!0,get:function(){return s.escapeAttribute}}),Object.defineProperty(a,"escapeText",{enumerable:!0,get:function(){return s.escapeText}});var c=Ore();Object.defineProperty(a,"encodeHTML",{enumerable:!0,get:function(){return c.encodeHTML}}),Object.defineProperty(a,"encodeNonAsciiHTML",{enumerable:!0,get:function(){return c.encodeNonAsciiHTML}}),Object.defineProperty(a,"encodeHTML4",{enumerable:!0,get:function(){return c.encodeHTML}}),Object.defineProperty(a,"encodeHTML5",{enumerable:!0,get:function(){return c.encodeHTML}});var d=wre();Object.defineProperty(a,"EntityDecoder",{enumerable:!0,get:function(){return d.EntityDecoder}}),Object.defineProperty(a,"DecodingMode",{enumerable:!0,get:function(){return d.DecodingMode}}),Object.defineProperty(a,"decodeXML",{enumerable:!0,get:function(){return d.decodeXML}}),Object.defineProperty(a,"decodeHTML",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(a,"decodeHTMLStrict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(a,"decodeHTMLAttribute",{enumerable:!0,get:function(){return d.decodeHTMLAttribute}}),Object.defineProperty(a,"decodeHTML4",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(a,"decodeHTML5",{enumerable:!0,get:function(){return d.decodeHTML}}),Object.defineProperty(a,"decodeHTML4Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(a,"decodeHTML5Strict",{enumerable:!0,get:function(){return d.decodeHTMLStrict}}),Object.defineProperty(a,"decodeXMLStrict",{enumerable:!0,get:function(){return d.decodeXML}})})(ZM)),ZM}var lp={},Rre;function pFe(){return Rre||(Rre=1,Object.defineProperty(lp,"__esModule",{value:!0}),lp.attributeNames=lp.elementNames=void 0,lp.elementNames=new Map(["altGlyph","altGlyphDef","altGlyphItem","animateColor","animateMotion","animateTransform","clipPath","feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","foreignObject","glyphRef","linearGradient","radialGradient","textPath"].map(function(a){return[a.toLowerCase(),a]})),lp.attributeNames=new Map(["definitionURL","attributeName","attributeType","baseFrequency","baseProfile","calcMode","clipPathUnits","diffuseConstant","edgeMode","filterUnits","glyphRef","gradientTransform","gradientUnits","kernelMatrix","kernelUnitLength","keyPoints","keySplines","keyTimes","lengthAdjust","limitingConeAngle","markerHeight","markerUnits","markerWidth","maskContentUnits","maskUnits","numOctaves","pathLength","patternContentUnits","patternTransform","patternUnits","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","refX","refY","repeatCount","repeatDur","requiredExtensions","requiredFeatures","specularConstant","specularExponent","spreadMethod","startOffset","stdDeviation","stitchTiles","surfaceScale","systemLanguage","tableValues","targetX","targetY","textLength","viewBox","viewTarget","xChannelSelector","yChannelSelector","zoomAndPan"].map(function(a){return[a.toLowerCase(),a]}))),lp}var Nre;function hFe(){if(Nre)return li;Nre=1;var a=li&&li.__assign||function(){return a=Object.assign||function(E){for(var S,N=1,j=arguments.length;N<j;N++){S=arguments[N];for(var q in S)Object.prototype.hasOwnProperty.call(S,q)&&(E[q]=S[q])}return E},a.apply(this,arguments)},e=li&&li.__createBinding||(Object.create?(function(E,S,N,j){j===void 0&&(j=N);var q=Object.getOwnPropertyDescriptor(S,N);(!q||("get"in q?!S.__esModule:q.writable||q.configurable))&&(q={enumerable:!0,get:function(){return S[N]}}),Object.defineProperty(E,j,q)}):(function(E,S,N,j){j===void 0&&(j=N),E[j]=S[N]})),u=li&&li.__setModuleDefault||(Object.create?(function(E,S){Object.defineProperty(E,"default",{enumerable:!0,value:S})}):function(E,S){E.default=S}),n=li&&li.__importStar||function(E){if(E&&E.__esModule)return E;var S={};if(E!=null)for(var N in E)N!=="default"&&Object.prototype.hasOwnProperty.call(E,N)&&e(S,E,N);return u(S,E),S};Object.defineProperty(li,"__esModule",{value:!0}),li.render=void 0;var r=n(Sb()),t=fFe(),i=pFe(),o=new Set(["style","script","xmp","iframe","noembed","noframes","plaintext","noscript"]);function l(E){return E.replace(/"/g,"&quot;")}function s(E,S){var N;if(E){var j=((N=S.encodeEntities)!==null&&N!==void 0?N:S.decodeEntities)===!1?l:S.xmlMode||S.encodeEntities!=="utf8"?t.encodeXML:t.escapeAttribute;return Object.keys(E).map(function(q){var O,I,A=(O=E[q])!==null&&O!==void 0?O:"";return S.xmlMode==="foreign"&&(q=(I=i.attributeNames.get(q))!==null&&I!==void 0?I:q),!S.emptyAttrs&&!S.xmlMode&&A===""?q:"".concat(q,'="').concat(j(A),'"')}).join(" ")}}var c=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]);function d(E,S){S===void 0&&(S={});for(var N=("length"in E)?E:[E],j="",q=0;q<N.length;q++)j+=f(N[q],S);return j}li.render=d,li.default=d;function f(E,S){switch(E.type){case r.Root:return d(E.children,S);case r.Doctype:case r.Directive:return v(E);case r.Comment:return w(E);case r.CDATA:return T(E);case r.Script:case r.Style:case r.Tag:return g(E,S);case r.Text:return m(E,S)}}var p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignObject","desc","title"]),h=new Set(["svg","math"]);function g(E,S){var N;S.xmlMode==="foreign"&&(E.name=(N=i.elementNames.get(E.name))!==null&&N!==void 0?N:E.name,E.parent&&p.has(E.parent.name)&&(S=a(a({},S),{xmlMode:!1}))),!S.xmlMode&&h.has(E.name)&&(S=a(a({},S),{xmlMode:"foreign"}));var j="<".concat(E.name),q=s(E.attribs,S);return q&&(j+=" ".concat(q)),E.children.length===0&&(S.xmlMode?S.selfClosingTags!==!1:S.selfClosingTags&&c.has(E.name))?(S.xmlMode||(j+=" "),j+="/>"):(j+=">",E.children.length>0&&(j+=d(E.children,S)),(S.xmlMode||!c.has(E.name))&&(j+="</".concat(E.name,">"))),j}function v(E){return"<".concat(E.data,">")}function m(E,S){var N,j=E.data||"";return((N=S.encodeEntities)!==null&&N!==void 0?N:S.decodeEntities)!==!1&&!(!S.xmlMode&&E.parent&&o.has(E.parent.name))&&(j=S.xmlMode||S.encodeEntities!=="utf8"?(0,t.encodeXML)(j):(0,t.escapeText)(j)),j}function T(E){return"<![CDATA[".concat(E.children[0].data,"]]>")}function w(E){return"<!--".concat(E.data,"-->")}return li}var Ire;function cTe(){if(Ire)return Io;Ire=1;var a=Io&&Io.__importDefault||function(s){return s&&s.__esModule?s:{default:s}};Object.defineProperty(Io,"__esModule",{value:!0}),Io.getOuterHTML=r,Io.getInnerHTML=t,Io.getText=i,Io.textContent=o,Io.innerText=l;var e=Su(),u=a(hFe()),n=Sb();function r(s,c){return(0,u.default)(s,c)}function t(s,c){return(0,e.hasChildren)(s)?s.children.map(function(d){return r(d,c)}).join(""):""}function i(s){return Array.isArray(s)?s.map(i).join(""):(0,e.isTag)(s)?s.name==="br"?`
`:i(s.children):(0,e.isCDATA)(s)?i(s.children):(0,e.isText)(s)?s.data:""}function o(s){return Array.isArray(s)?s.map(o).join(""):(0,e.hasChildren)(s)&&!(0,e.isComment)(s)?o(s.children):(0,e.isText)(s)?s.data:""}function l(s){return Array.isArray(s)?s.map(l).join(""):(0,e.hasChildren)(s)&&(s.type===n.ElementType.Tag||(0,e.isCDATA)(s))?l(s.children):(0,e.isText)(s)?s.data:""}return Io}var Ku={},Dre;function yFe(){if(Dre)return Ku;Dre=1,Object.defineProperty(Ku,"__esModule",{value:!0}),Ku.getChildren=e,Ku.getParent=u,Ku.getSiblings=n,Ku.getAttributeValue=r,Ku.hasAttrib=t,Ku.getName=i,Ku.nextElementSibling=o,Ku.prevElementSibling=l;var a=Su();function e(s){return(0,a.hasChildren)(s)?s.children:[]}function u(s){return s.parent||null}function n(s){var c,d,f=u(s);if(f!=null)return e(f);for(var p=[s],h=s.prev,g=s.next;h!=null;)p.unshift(h),c=h,h=c.prev;for(;g!=null;)p.push(g),d=g,g=d.next;return p}function r(s,c){var d;return(d=s.attribs)===null||d===void 0?void 0:d[c]}function t(s,c){return s.attribs!=null&&Object.prototype.hasOwnProperty.call(s.attribs,c)&&s.attribs[c]!=null}function i(s){return s.name}function o(s){for(var c,d=s.next;d!==null&&!(0,a.isTag)(d);)c=d,d=c.next;return d}function l(s){for(var c,d=s.prev;d!==null&&!(0,a.isTag)(d);)c=d,d=c.prev;return d}return Ku}var Ms={},Fre;function mFe(){if(Fre)return Ms;Fre=1,Object.defineProperty(Ms,"__esModule",{value:!0}),Ms.removeElement=a,Ms.replaceElement=e,Ms.appendChild=u,Ms.append=n,Ms.prependChild=r,Ms.prepend=t;function a(i){if(i.prev&&(i.prev.next=i.next),i.next&&(i.next.prev=i.prev),i.parent){var o=i.parent.children,l=o.lastIndexOf(i);l>=0&&o.splice(l,1)}i.next=null,i.prev=null,i.parent=null}function e(i,o){var l=o.prev=i.prev;l&&(l.next=o);var s=o.next=i.next;s&&(s.prev=o);var c=o.parent=i.parent;if(c){var d=c.children;d[d.lastIndexOf(i)]=o,i.parent=null}}function u(i,o){if(a(o),o.next=null,o.parent=i,i.children.push(o)>1){var l=i.children[i.children.length-2];l.next=o,o.prev=l}else o.prev=null}function n(i,o){a(o);var l=i.parent,s=i.next;if(o.next=s,o.prev=i,i.next=o,o.parent=l,s){if(s.prev=o,l){var c=l.children;c.splice(c.lastIndexOf(s),0,o)}}else l&&l.children.push(o)}function r(i,o){if(a(o),o.parent=i,o.prev=null,i.children.unshift(o)!==1){var l=i.children[1];l.prev=o,o.next=l}else o.next=null}function t(i,o){a(o);var l=i.parent;if(l){var s=l.children;s.splice(s.indexOf(i),0,o)}i.prev&&(i.prev.next=o),o.parent=l,o.prev=i.prev,o.next=i,i.prev=o}return Ms}var Cs={},Pre;function lTe(){if(Pre)return Cs;Pre=1,Object.defineProperty(Cs,"__esModule",{value:!0}),Cs.filter=e,Cs.find=u,Cs.findOneChild=n,Cs.findOne=r,Cs.existsOne=t,Cs.findAll=i;var a=Su();function e(o,l,s,c){return s===void 0&&(s=!0),c===void 0&&(c=1/0),u(o,Array.isArray(l)?l:[l],s,c)}function u(o,l,s,c){for(var d=[],f=[Array.isArray(l)?l:[l]],p=[0];;){if(p[0]>=f[0].length){if(p.length===1)return d;f.shift(),p.shift();continue}var h=f[0][p[0]++];if(o(h)&&(d.push(h),--c<=0))return d;s&&(0,a.hasChildren)(h)&&h.children.length>0&&(p.unshift(0),f.unshift(h.children))}}function n(o,l){return l.find(o)}function r(o,l,s){s===void 0&&(s=!0);for(var c=Array.isArray(l)?l:[l],d=0;d<c.length;d++){var f=c[d];if((0,a.isTag)(f)&&o(f))return f;if(s&&(0,a.hasChildren)(f)&&f.children.length>0){var p=r(o,f.children,!0);if(p)return p}}return null}function t(o,l){return(Array.isArray(l)?l:[l]).some(function(s){return(0,a.isTag)(s)&&o(s)||(0,a.hasChildren)(s)&&t(o,s.children)})}function i(o,l){for(var s=[],c=[Array.isArray(l)?l:[l]],d=[0];;){if(d[0]>=c[0].length){if(c.length===1)return s;c.shift(),d.shift();continue}var f=c[0][d[0]++];(0,a.isTag)(f)&&o(f)&&s.push(f),(0,a.hasChildren)(f)&&f.children.length>0&&(d.unshift(0),c.unshift(f.children))}}return Cs}var Ls={},jre;function dTe(){if(jre)return Ls;jre=1,Object.defineProperty(Ls,"__esModule",{value:!0}),Ls.testElement=i,Ls.getElements=o,Ls.getElementById=l,Ls.getElementsByTagName=s,Ls.getElementsByClassName=c,Ls.getElementsByTagType=d;var a=Su(),e=lTe(),u={tag_name:function(f){return typeof f=="function"?function(p){return(0,a.isTag)(p)&&f(p.name)}:f==="*"?a.isTag:function(p){return(0,a.isTag)(p)&&p.name===f}},tag_type:function(f){return typeof f=="function"?function(p){return f(p.type)}:function(p){return p.type===f}},tag_contains:function(f){return typeof f=="function"?function(p){return(0,a.isText)(p)&&f(p.data)}:function(p){return(0,a.isText)(p)&&p.data===f}}};function n(f,p){return typeof p=="function"?function(h){return(0,a.isTag)(h)&&p(h.attribs[f])}:function(h){return(0,a.isTag)(h)&&h.attribs[f]===p}}function r(f,p){return function(h){return f(h)||p(h)}}function t(f){var p=Object.keys(f).map(function(h){var g=f[h];return Object.prototype.hasOwnProperty.call(u,h)?u[h](g):n(h,g)});return p.length===0?null:p.reduce(r)}function i(f,p){var h=t(f);return h?h(p):!0}function o(f,p,h,g){g===void 0&&(g=1/0);var v=t(f);return v?(0,e.filter)(v,p,h,g):[]}function l(f,p,h){return h===void 0&&(h=!0),Array.isArray(p)||(p=[p]),(0,e.findOne)(n("id",f),p,h)}function s(f,p,h,g){return h===void 0&&(h=!0),g===void 0&&(g=1/0),(0,e.filter)(u.tag_name(f),p,h,g)}function c(f,p,h,g){return h===void 0&&(h=!0),g===void 0&&(g=1/0),(0,e.filter)(n("class",f),p,h,g)}function d(f,p,h,g){return h===void 0&&(h=!0),g===void 0&&(g=1/0),(0,e.filter)(u.tag_type(f),p,h,g)}return Ls}var kc={},Mre;function bFe(){if(Mre)return kc;Mre=1,Object.defineProperty(kc,"__esModule",{value:!0}),kc.DocumentPosition=void 0,kc.removeSubsets=e,kc.compareDocumentPosition=n,kc.uniqueSort=r;var a=Su();function e(t){for(var i=t.length;--i>=0;){var o=t[i];if(i>0&&t.lastIndexOf(o,i-1)>=0){t.splice(i,1);continue}for(var l=o.parent;l;l=l.parent)if(t.includes(l)){t.splice(i,1);break}}return t}var u;(function(t){t[t.DISCONNECTED=1]="DISCONNECTED",t[t.PRECEDING=2]="PRECEDING",t[t.FOLLOWING=4]="FOLLOWING",t[t.CONTAINS=8]="CONTAINS",t[t.CONTAINED_BY=16]="CONTAINED_BY"})(u||(kc.DocumentPosition=u={}));function n(t,i){var o=[],l=[];if(t===i)return 0;for(var s=(0,a.hasChildren)(t)?t:t.parent;s;)o.unshift(s),s=s.parent;for(s=(0,a.hasChildren)(i)?i:i.parent;s;)l.unshift(s),s=s.parent;for(var c=Math.min(o.length,l.length),d=0;d<c&&o[d]===l[d];)d++;if(d===0)return u.DISCONNECTED;var f=o[d-1],p=f.children,h=o[d],g=l[d];return p.indexOf(h)>p.indexOf(g)?f===i?u.FOLLOWING|u.CONTAINED_BY:u.FOLLOWING:f===t?u.PRECEDING|u.CONTAINS:u.PRECEDING}function r(t){return t=t.filter(function(i,o,l){return!l.includes(i,o+1)}),t.sort(function(i,o){var l=n(i,o);return l&u.PRECEDING?-1:l&u.FOLLOWING?1:0}),t}return kc}var aD={},Cre;function gFe(){if(Cre)return aD;Cre=1,Object.defineProperty(aD,"__esModule",{value:!0}),aD.getFeed=u;var a=cTe(),e=dTe();function u(f){var p=l(d,f);return p?p.name==="feed"?n(p):r(p):null}function n(f){var p,h=f.children,g={type:"atom",items:(0,e.getElementsByTagName)("entry",h).map(function(T){var w,E=T.children,S={media:o(E)};c(S,"id","id",E),c(S,"title","title",E);var N=(w=l("link",E))===null||w===void 0?void 0:w.attribs.href;N&&(S.link=N);var j=s("summary",E)||s("content",E);j&&(S.description=j);var q=s("updated",E);return q&&(S.pubDate=new Date(q)),S})};c(g,"id","id",h),c(g,"title","title",h);var v=(p=l("link",h))===null||p===void 0?void 0:p.attribs.href;v&&(g.link=v),c(g,"description","subtitle",h);var m=s("updated",h);return m&&(g.updated=new Date(m)),c(g,"author","email",h,!0),g}function r(f){var p,h,g=(h=(p=l("channel",f.children))===null||p===void 0?void 0:p.children)!==null&&h!==void 0?h:[],v={type:f.name.substr(0,3),id:"",items:(0,e.getElementsByTagName)("item",f.children).map(function(T){var w=T.children,E={media:o(w)};c(E,"id","guid",w),c(E,"title","title",w),c(E,"link","link",w),c(E,"description","description",w);var S=s("pubDate",w)||s("dc:date",w);return S&&(E.pubDate=new Date(S)),E})};c(v,"title","title",g),c(v,"link","link",g),c(v,"description","description",g);var m=s("lastBuildDate",g);return m&&(v.updated=new Date(m)),c(v,"author","managingEditor",g,!0),v}var t=["url","type","lang"],i=["fileSize","bitrate","framerate","samplingrate","channels","duration","height","width"];function o(f){return(0,e.getElementsByTagName)("media:content",f).map(function(p){for(var h=p.attribs,g={medium:h.medium,isDefault:!!h.isDefault},v=0,m=t;v<m.length;v++){var T=m[v];h[T]&&(g[T]=h[T])}for(var w=0,E=i;w<E.length;w++){var T=E[w];h[T]&&(g[T]=parseInt(h[T],10))}return h.expression&&(g.expression=h.expression),g})}function l(f,p){return(0,e.getElementsByTagName)(f,p,!0,1)[0]}function s(f,p,h){return h===void 0&&(h=!1),(0,a.textContent)((0,e.getElementsByTagName)(f,p,h,1)).trim()}function c(f,p,h,g,v){v===void 0&&(v=!1);var m=s(h,g,v);m&&(f[p]=m)}function d(f){return f==="rss"||f==="feed"||f==="rdf:RDF"}return aD}var Lre;function Ws(){return Lre||(Lre=1,(function(a){var e=cp&&cp.__createBinding||(Object.create?(function(r,t,i,o){o===void 0&&(o=i);var l=Object.getOwnPropertyDescriptor(t,i);(!l||("get"in l?!t.__esModule:l.writable||l.configurable))&&(l={enumerable:!0,get:function(){return t[i]}}),Object.defineProperty(r,o,l)}):(function(r,t,i,o){o===void 0&&(o=i),r[o]=t[i]})),u=cp&&cp.__exportStar||function(r,t){for(var i in r)i!=="default"&&!Object.prototype.hasOwnProperty.call(t,i)&&e(t,r,i)};Object.defineProperty(a,"__esModule",{value:!0}),a.hasChildren=a.isDocument=a.isComment=a.isText=a.isCDATA=a.isTag=void 0,u(cTe(),a),u(yFe(),a),u(mFe(),a),u(lTe(),a),u(dTe(),a),u(bFe(),a),u(gFe(),a);var n=Su();Object.defineProperty(a,"isTag",{enumerable:!0,get:function(){return n.isTag}}),Object.defineProperty(a,"isCDATA",{enumerable:!0,get:function(){return n.isCDATA}}),Object.defineProperty(a,"isText",{enumerable:!0,get:function(){return n.isText}}),Object.defineProperty(a,"isComment",{enumerable:!0,get:function(){return n.isComment}}),Object.defineProperty(a,"isDocument",{enumerable:!0,get:function(){return n.isDocument}}),Object.defineProperty(a,"hasChildren",{enumerable:!0,get:function(){return n.hasChildren}})})(cp)),cp}var qre;function vFe(){return qre||(qre=1,(function(a){var e=zu&&zu.__createBinding||(Object.create?(function(m,T,w,E){E===void 0&&(E=w);var S=Object.getOwnPropertyDescriptor(T,w);(!S||("get"in S?!T.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return T[w]}}),Object.defineProperty(m,E,S)}):(function(m,T,w,E){E===void 0&&(E=w),m[E]=T[w]})),u=zu&&zu.__setModuleDefault||(Object.create?(function(m,T){Object.defineProperty(m,"default",{enumerable:!0,value:T})}):function(m,T){m.default=T}),n=zu&&zu.__importStar||function(m){if(m&&m.__esModule)return m;var T={};if(m!=null)for(var w in m)w!=="default"&&Object.prototype.hasOwnProperty.call(m,w)&&e(T,m,w);return u(T,m),T},r=zu&&zu.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomUtils=a.parseFeed=a.getFeed=a.ElementType=a.Tokenizer=a.createDomStream=a.parseDOM=a.parseDocument=a.DefaultHandler=a.DomHandler=a.Parser=void 0;var t=fre(),i=fre();Object.defineProperty(a,"Parser",{enumerable:!0,get:function(){return i.Parser}});var o=Su(),l=Su();Object.defineProperty(a,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(a,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}});function s(m,T){var w=new o.DomHandler(void 0,T);return new t.Parser(w,T).end(m),w.root}a.parseDocument=s;function c(m,T){return s(m,T).children}a.parseDOM=c;function d(m,T,w){var E=new o.DomHandler(m,T,w);return new t.Parser(E,T)}a.createDomStream=d;var f=sTe();Object.defineProperty(a,"Tokenizer",{enumerable:!0,get:function(){return r(f).default}}),a.ElementType=n(Sb());var p=Ws(),h=Ws();Object.defineProperty(a,"getFeed",{enumerable:!0,get:function(){return h.getFeed}});var g={xmlMode:!0};function v(m,T){return T===void 0&&(T=g),(0,p.getFeed)(c(m,T))}a.parseFeed=v,a.DomUtils=n(Ws())})(zu)),zu}const _Fe={"@context":{alternate:"http://www.w3.org/1999/xhtml/vocab#alternate",appendix:"http://www.w3.org/1999/xhtml/vocab#appendix",cite:"http://www.w3.org/1999/xhtml/vocab#cite",bookmark:"http://www.w3.org/1999/xhtml/vocab#bookmark",contents:"http://www.w3.org/1999/xhtml/vocab#contents",chapter:"http://www.w3.org/1999/xhtml/vocab#chapter",copyright:"http://www.w3.org/1999/xhtml/vocab#copyright",first:"http://www.w3.org/1999/xhtml/vocab#first",glossary:"http://www.w3.org/1999/xhtml/vocab#glossary",help:"http://www.w3.org/1999/xhtml/vocab#help",icon:"http://www.w3.org/1999/xhtml/vocab#icon",index:"http://www.w3.org/1999/xhtml/vocab#index",last:"http://www.w3.org/1999/xhtml/vocab#last",license:"http://www.w3.org/1999/xhtml/vocab#license",meta:"http://www.w3.org/1999/xhtml/vocab#meta",next:"http://www.w3.org/1999/xhtml/vocab#next",prev:"http://www.w3.org/1999/xhtml/vocab#prev",previous:"http://www.w3.org/1999/xhtml/vocab#previous",section:"http://www.w3.org/1999/xhtml/vocab#section",start:"http://www.w3.org/1999/xhtml/vocab#start",stylesheet:"http://www.w3.org/1999/xhtml/vocab#stylesheet",subsection:"http://www.w3.org/1999/xhtml/vocab#subsection",top:"http://www.w3.org/1999/xhtml/vocab#top",up:"http://www.w3.org/1999/xhtml/vocab#up",p3pv1:"http://www.w3.org/1999/xhtml/vocab#p3pv1"}},TFe={"@context":{as:"https://www.w3.org/ns/activitystreams#",cat:"http://www.w3.org/ns/dcat#",cc:"http://creativecommons.org/ns#",cnt:"http://www.w3.org/2008/content#",csvw:"http://www.w3.org/ns/csvw#",ctag:"http://commontag.org/ns#",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcat:"http://www.w3.org/ns/dcat#",dcterms:"http://purl.org/dc/terms/",dqv:"http://www.w3.org/ns/dqv#",duv:"https://www.w3.org/TR/vocab-duv#",earl:"http://www.w3.org/ns/earl#",foaf:"http://xmlns.com/foaf/0.1/",gldp:"http://www.w3.org/ns/people#",gr:"http://purl.org/goodrelations/v1#",grddl:"http://www.w3.org/2003/g/data-view#",ht:"http://www.w3.org/2006/http#",ical:"http://www.w3.org/2002/12/cal/icaltzd#",ldp:"http://www.w3.org/ns/ldp#",ma:"http://www.w3.org/ns/ma-ont#",oa:"http://www.w3.org/ns/oa#",odrl:"http://www.w3.org/ns/odrl/2/",og:"http://ogp.me/ns#",org:"http://www.w3.org/ns/org#",owl:"http://www.w3.org/2002/07/owl#",prov:"http://www.w3.org/ns/prov#",ptr:"http://www.w3.org/2009/pointers#",qb:"http://purl.org/linked-data/cube#",rev:"http://purl.org/stuff/rev#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfa:"http://www.w3.org/ns/rdfa#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",rif:"http://www.w3.org/2007/rif#",rr:"http://www.w3.org/ns/r2rml#",schema:"http://schema.org/",sd:"http://www.w3.org/ns/sparql-service-description#",sioc:"http://rdfs.org/sioc/ns#",skos:"http://www.w3.org/2004/02/skos/core#",skosxl:"http://www.w3.org/2008/05/skos-xl#",ssn:"http://www.w3.org/ns/ssn/",sosa:"http://www.w3.org/ns/sosa/",time:"http://www.w3.org/2006/time#",v:"http://rdf.data-vocabulary.org/#",vcard:"http://www.w3.org/2006/vcard/ns#",void:"http://rdfs.org/ns/void#",wdr:"http://www.w3.org/2007/05/powder#",wdrs:"http://www.w3.org/2007/05/powder-s#",xhv:"http://www.w3.org/1999/xhtml/vocab#",xml:"http://www.w3.org/XML/1998/namespace",xsd:"http://www.w3.org/2001/XMLSchema#",describedby:"http://www.w3.org/2007/05/powder-s#describedby",license:"http://www.w3.org/1999/xhtml/vocab#license",role:"http://www.w3.org/1999/xhtml/vocab#role"}};var dp={},Bre;function $B(){return Bre||(Bre=1,Object.defineProperty(dp,"__esModule",{value:!0}),dp.RDFA_CONTENTTYPES=dp.RDFA_FEATURES=void 0,dp.RDFA_FEATURES={"":{baseTag:!0,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},core:{baseTag:!1,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!1,datetimeAttribute:!1,timeTag:!1,htmlDatatype:!1,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!1},html:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0},xhtml:{baseTag:!0,xmlBase:!1,langAttribute:!0,onlyAllowUriRelRevIfProperty:!0,inheritSubjectInHeadBody:!0,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!0,copyRdfaPatterns:!0,xmlnsPrefixMappings:!0,xhtmlInitialContext:!0,roleAttribute:!0},xml:{baseTag:!1,xmlBase:!0,langAttribute:!0,onlyAllowUriRelRevIfProperty:!1,inheritSubjectInHeadBody:!1,datetimeAttribute:!0,timeTag:!0,htmlDatatype:!1,copyRdfaPatterns:!1,xmlnsPrefixMappings:!0,xhtmlInitialContext:!1,roleAttribute:!0}},dp.RDFA_CONTENTTYPES={"text/html":"html","application/xhtml+xml":"xhtml","application/xml":"xml","text/xml":"xml","image/svg+xml":"xml"}),dp}var VT={},Ure;function fTe(){if(Ure)return VT;Ure=1,Object.defineProperty(VT,"__esModule",{value:!0}),VT.Util=void 0;const a=Xn(),e=$B(),u=Rr();class n{constructor(t,i){this.dataFactory=t||new u.DataFactory,this.baseIRI=this.dataFactory.namedNode(i||""),this.baseIRIDocument=this.baseIRI}static parsePrefixes(t,i,o){const l={};if(o)for(const s in t)s.startsWith("xmlns")&&(l[s.substr(6)]=t[s]);if(t.prefix||Object.keys(l).length>0){const s=Object.assign(Object.assign({},i),l);if(t.prefix){let c;for(;c=n.PREFIX_REGEX.exec(t.prefix);)s[c[1]]=c[2]}return s}else return i}static expandPrefixedTerm(t,i){const o=t.indexOf(":");let l,s;if(o>=0&&(l=t.substr(0,o),s=t.substr(o+1)),l==="")return"http://www.w3.org/1999/xhtml/vocab#"+s;if(l){const c=i.prefixesAll[l];if(c)return c+s}if(t){const c=i.prefixesAll[t.toLocaleLowerCase()];if(c)return c}return t}static isValidIri(t){return n.IRI_REGEX.test(t)}static contentTypeToProfile(t){return e.RDFA_CONTENTTYPES[t]||""}getBaseIRI(t){let i=t;const o=i.indexOf("#");return o>=0&&(i=i.substr(0,o)),this.dataFactory.namedNode((0,a.resolve)(i,this.baseIRI.value))}getResourceOrBaseIri(t,i){return t===!0?this.getBaseIriTerm(i):t}getBaseIriTerm(t){return t.localBaseIRI||this.baseIRI}createVocabIris(t,i,o,l){return t.split(/\s+/).filter(s=>s&&(o||s.indexOf(":")>=0)).map(s=>this.createIri(s,i,!0,!0,l)).filter(s=>s!=null)}createLiteral(t,i){if(i.interpretObjectAsTime&&!i.datatype){for(const o of n.TIME_REGEXES)if(t.match(o.regex)){i.datatype=this.dataFactory.namedNode(n.XSD+o.type);break}}return this.dataFactory.literal(t,i.datatype||i.language)}createBlankNode(){return this.blankNodeFactory?this.blankNodeFactory():this.dataFactory.blankNode()}createIri(t,i,o,l,s){if(t=t||"",!l)return o||(t=(0,a.resolve)(t,this.getBaseIriTerm(i).value)),n.isValidIri(t)?this.dataFactory.namedNode(t):null;if(t.length>0&&t[0]==="["&&t[t.length-1]==="]"&&(t=t.substr(1,t.length-2),t.indexOf(":")<0))return null;if(t.startsWith("_:"))return s?this.dataFactory.blankNode(t.substr(2)||"b_identity"):null;if(o&&i.vocab&&t.indexOf(":")<0)return this.dataFactory.namedNode(i.vocab+t);let c=n.expandPrefixedTerm(t,i);return o?t!==c&&(c=(0,a.resolve)(c,this.baseIRIDocument.value)):c=(0,a.resolve)(c,this.getBaseIriTerm(i).value),n.isValidIri(c)?this.dataFactory.namedNode(c):null}}return VT.Util=n,n.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",n.XSD="http://www.w3.org/2001/XMLSchema#",n.RDFA="http://www.w3.org/ns/rdfa#",n.PREFIX_REGEX=/\s*([^:\s]*)*:\s*([^\s]*)*\s*/g,n.TIME_REGEXES=[{regex:/^-?P([0-9]+Y)?([0-9]+M)?([0-9]+D)?(T([0-9]+H)?([0-9]+M)?([0-9]+(\.[0-9])?S)?)?$/,type:"duration"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]T[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"dateTime"},{regex:/^[0-9]+-[0-9][0-9]-[0-9][0-9]Z?$/,type:"date"},{regex:/^[0-9][0-9]:[0-9][0-9]:[0-9][0-9]((Z?)|([\+-][0-9][0-9]:[0-9][0-9]))$/,type:"time"},{regex:/^[0-9]+-[0-9][0-9]$/,type:"gYearMonth"},{regex:/^[0-9]+$/,type:"gYear"}],n.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`]*$/,VT}var Qre;function wFe(){if(Qre)return QT;Qre=1,Object.defineProperty(QT,"__esModule",{value:!0}),QT.RdfaParser=void 0;const a=vFe(),e=Nr(),u=_Fe,n=TFe,r=$B(),t=fTe();let i=class pTe extends e.Transform{constructor(l){super({readableObjectMode:!0}),this.activeTagStack=[],l=l||{},this.options=l,this.util=new t.Util(l.dataFactory,l.baseIRI),this.defaultGraph=l.defaultGraph||this.util.dataFactory.defaultGraph();const s=l.contentType?t.Util.contentTypeToProfile(l.contentType):l.profile||"";this.features=l.features||r.RDFA_FEATURES[s],this.htmlParseListener=l.htmlParseListener,this.rdfaPatterns=this.features.copyRdfaPatterns?{}:null,this.pendingRdfaPatternCopies=this.features.copyRdfaPatterns?{}:null,this.parser=this.initializeParser(s==="xml"),this.activeTagStack.push({incompleteTriples:[],inlist:!1,language:l.language,listMapping:{},listMappingLocal:{},name:"",prefixesAll:Object.assign(Object.assign({},n["@context"]),this.features.xhtmlInitialContext?u["@context"]:{}),prefixesCustom:{},skipElement:!1,vocab:l.vocab})}import(l){const s=new e.PassThrough({readableObjectMode:!0});l.on("error",d=>c.emit("error",d)),l.on("data",d=>s.push(d)),l.on("end",()=>s.push(null));const c=s.pipe(new pTe(this.options));return c}_transform(l,s,c){this.parser.write(l.toString()),c()}_flush(l){this.parser.end(),l()}onTagOpen(l,s){let c=this.activeTagStack.length-1;for(;c>0&&this.activeTagStack[c].skipElement;)c--;let d=this.activeTagStack[c];c!==this.activeTagStack.length-1&&(d=Object.assign(Object.assign({},d),{language:this.activeTagStack[this.activeTagStack.length-1].language,prefixesAll:this.activeTagStack[this.activeTagStack.length-1].prefixesAll,prefixesCustom:this.activeTagStack[this.activeTagStack.length-1].prefixesCustom,vocab:this.activeTagStack[this.activeTagStack.length-1].vocab}));const f={collectChildTags:d.collectChildTags,incompleteTriples:[],inlist:"inlist"in s,listMapping:[],listMappingLocal:d.listMapping,localBaseIRI:d.localBaseIRI,name:l,prefixesAll:null,prefixesCustom:null,skipElement:!1};if(this.activeTagStack.push(f),f.collectChildTags){for(const S of Object.keys(d.prefixesCustom).sort()){const N=d.prefixesCustom[S],j=S===""?"xmlns":"xmlns:"+S;j in s||(s[j]=N)}const E=Object.keys(s).map(S=>`${S}="${s[S]}"`).join(" ");if(f.text=[`<${l}${E?" "+E:""}>`],this.features.skipHandlingXmlLiteralChildren)return}let p=!0,h=!0;if(this.features.onlyAllowUriRelRevIfProperty&&("property"in s&&"rel"in s&&(p=!1,s.rel.indexOf(":")<0&&delete s.rel),"property"in s&&"rev"in s&&(h=!1,s.rev.indexOf(":")<0&&delete s.rev)),this.features.copyRdfaPatterns){if(d.collectedPatternTag){const E={attributes:s,children:[],name:l,referenced:!1,rootPattern:!1,text:[]};d.collectedPatternTag.children.push(E),f.collectedPatternTag=E;return}if(s.typeof==="rdfa:Pattern"){f.collectedPatternTag={attributes:s,children:[],name:l,parentTag:d,referenced:!1,rootPattern:!0,text:[]};return}if(s.property==="rdfa:copy"){const E=s.resource||s.href||s.src;this.rdfaPatterns[E]?this.emitPatternCopy(d,this.rdfaPatterns[E],E):(this.pendingRdfaPatternCopies[E]||(this.pendingRdfaPatternCopies[E]=[]),this.pendingRdfaPatternCopies[E].push(d));return}}this.features.baseTag&&l==="base"&&s.href&&(this.util.baseIRI=this.util.getBaseIRI(s.href)),this.features.xmlBase&&s["xml:base"]&&(f.localBaseIRI=this.util.getBaseIRI(s["xml:base"])),this.features.timeTag&&l==="time"&&!s.datatype&&(f.interpretObjectAsTime=!0);let g,v,m;if("vocab"in s?s.vocab?(f.vocab=s.vocab,this.emitTriple(this.util.getBaseIriTerm(f),this.util.dataFactory.namedNode(t.Util.RDFA+"usesVocabulary"),this.util.dataFactory.namedNode(f.vocab))):f.vocab=this.activeTagStack[0].vocab:f.vocab=d.vocab,f.prefixesCustom=t.Util.parsePrefixes(s,d.prefixesCustom,this.features.xmlnsPrefixMappings),f.prefixesAll=Object.keys(f.prefixesCustom).length>0?Object.assign(Object.assign({},d.prefixesAll),f.prefixesCustom):d.prefixesAll,this.features.roleAttribute&&s.role){const E=s.id?this.util.createIri("#"+s.id,f,!1,!1,!1):this.util.createBlankNode(),S=f.vocab;f.vocab="http://www.w3.org/1999/xhtml/vocab#";for(const N of this.util.createVocabIris(s.role,f,!0,!1))this.emitTriple(E,this.util.dataFactory.namedNode("http://www.w3.org/1999/xhtml/vocab#role"),N);f.vocab=S}"xml:lang"in s||this.features.langAttribute&&"lang"in s?f.language=s["xml:lang"]||s.lang:f.language=d.language;const T=this.activeTagStack.length===2;if(!("rel"in s)&&!("rev"in s)?"property"in s&&!("content"in s)&&!("datatype"in s)?("about"in s?(g=this.util.createIri(s.about,f,!1,!0,!0),f.explicitNewSubject=!!g):T?g=!0:d.object&&(g=d.object),"typeof"in s&&("about"in s&&(m=this.util.createIri(s.about,f,!1,!0,!0)),!m&&T&&(m=!0),!m&&"resource"in s&&(m=this.util.createIri(s.resource,f,!1,!0,!0)),!m&&("href"in s||"src"in s)&&(m=this.util.createIri(s.href||s.src,f,!1,!1,!0)),!m&&this.isInheritSubjectInHeadBody(l)&&(m=g),m||(m=this.util.createBlankNode()),v=m)):(("about"in s||"resource"in s)&&(g=this.util.createIri(s.about||s.resource,f,!1,!0,!0),f.explicitNewSubject=!!g),!g&&("href"in s||"src"in s)&&(g=this.util.createIri(s.href||s.src,f,!1,!1,!0),f.explicitNewSubject=!!g),g||(T?g=!0:this.isInheritSubjectInHeadBody(l)?g=d.object:"typeof"in s?(g=this.util.createBlankNode(),f.explicitNewSubject=!0):d.object&&(g=d.object,"property"in s||(f.skipElement=!0))),"typeof"in s&&(m=g)):("about"in s?(g=this.util.createIri(s.about,f,!1,!0,!0),f.explicitNewSubject=!!g,"typeof"in s&&(m=g)):T?g=!0:d.object&&(g=d.object),"resource"in s&&(v=this.util.createIri(s.resource,f,!1,!0,!0)),v||("href"in s||"src"in s?v=this.util.createIri(s.href||s.src,f,!1,!1,!0):"typeof"in s&&!("about"in s)&&!this.isInheritSubjectInHeadBody(l)&&(v=this.util.createBlankNode())),"typeof"in s&&!("about"in s)&&(this.isInheritSubjectInHeadBody(l)?m=g:m=v)),m)for(const E of this.util.createVocabIris(s.typeof,f,!0,!0))this.emitTriple(this.util.getResourceOrBaseIri(m,f),this.util.dataFactory.namedNode(t.Util.RDF+"type"),E);if(g&&(f.listMapping={}),v){if("rel"in s&&"inlist"in s)for(const E of this.util.createVocabIris(s.rel,f,p,!1))this.addListMapping(f,g,E,v);if(!("rel"in s&&"inlist"in s)){if("rel"in s)for(const E of this.util.createVocabIris(s.rel,f,p,!1))this.emitTriple(this.util.getResourceOrBaseIri(g,f),E,this.util.getResourceOrBaseIri(v,f));if("rev"in s)for(const E of this.util.createVocabIris(s.rev,f,h,!1))this.emitTriple(this.util.getResourceOrBaseIri(v,f),E,this.util.getResourceOrBaseIri(g,f))}}if(!v){if("rel"in s)if("inlist"in s)for(const E of this.util.createVocabIris(s.rel,f,p,!1))this.addListMapping(f,g,E,null),f.incompleteTriples.push({predicate:E,reverse:!1,list:!0});else for(const E of this.util.createVocabIris(s.rel,f,p,!1))f.incompleteTriples.push({predicate:E,reverse:!1});if("rev"in s)for(const E of this.util.createVocabIris(s.rev,f,h,!1))f.incompleteTriples.push({predicate:E,reverse:!0});f.incompleteTriples.length>0&&(v=this.util.createBlankNode())}if("property"in s){f.predicates=this.util.createVocabIris(s.property,f,!0,!1);let E;if("datatype"in s?(f.datatype=this.util.createIri(s.datatype,f,!0,!0,!1),f.datatype&&(f.datatype.value===t.Util.RDF+"XMLLiteral"||this.features.htmlDatatype&&f.datatype.value===t.Util.RDF+"HTML")&&(f.collectChildTags=!0)):(!("rev"in s)&&!("rel"in s)&&!("content"in s)&&("resource"in s&&(E=this.util.createIri(s.resource,f,!1,!0,!0)),!E&&"href"in s&&(E=this.util.createIri(s.href,f,!1,!1,!0)),!E&&"src"in s&&(E=this.util.createIri(s.src,f,!1,!1,!0))),"typeof"in s&&!("about"in s)&&(E=m)),"content"in s){const S=this.util.createLiteral(s.content,f);if("inlist"in s)for(const N of f.predicates)this.addListMapping(f,g,N,S);else{const N=this.util.getResourceOrBaseIri(g,f);for(const j of f.predicates)this.emitTriple(N,j,S)}f.predicates=null}else if(this.features.datetimeAttribute&&"datetime"in s){f.interpretObjectAsTime=!0;const S=this.util.createLiteral(s.datetime,f);if("inlist"in s)for(const N of f.predicates)this.addListMapping(f,g,N,S);else{const N=this.util.getResourceOrBaseIri(g,f);for(const j of f.predicates)this.emitTriple(N,j,S)}f.predicates=null}else if(E){const S=this.util.getResourceOrBaseIri(E,f);if("inlist"in s)for(const N of f.predicates)this.addListMapping(f,g,N,S);else{const N=this.util.getResourceOrBaseIri(g,f);for(const j of f.predicates)this.emitTriple(N,j,S)}f.predicates=null}}let w=!1;if(!f.skipElement&&g&&d.incompleteTriples.length>0){w=!0;const E=this.util.getResourceOrBaseIri(d.subject,f),S=this.util.getResourceOrBaseIri(g,f);for(const N of d.incompleteTriples)if(N.reverse)this.emitTriple(S,N.predicate,E);else if(N.list){let j=null;for(let q=this.activeTagStack.length-1;q>=0;q--)if(this.activeTagStack[q].inlist){j=this.activeTagStack[q];break}this.addListMapping(j,g,N.predicate,S)}else this.emitTriple(E,N.predicate,S)}!w&&d.incompleteTriples.length>0&&(f.incompleteTriples=f.incompleteTriples.concat(d.incompleteTriples)),f.subject=g||d.subject,f.object=v||g}onText(l){const s=this.activeTagStack[this.activeTagStack.length-1];if(this.features.copyRdfaPatterns&&s.collectedPatternTag){s.collectedPatternTag.text.push(l);return}s.text||(s.text=[]),s.text.push(l)}onTagClose(){const l=this.activeTagStack[this.activeTagStack.length-1],s=this.activeTagStack[this.activeTagStack.length-2];if(!(l.collectChildTags&&s.collectChildTags&&this.features.skipHandlingXmlLiteralChildren)){if(this.features.copyRdfaPatterns&&l.collectedPatternTag&&l.collectedPatternTag.rootPattern){const c=l.collectedPatternTag.attributes.resource;if(delete l.collectedPatternTag.attributes.resource,delete l.collectedPatternTag.attributes.typeof,this.rdfaPatterns[c]=l.collectedPatternTag,this.pendingRdfaPatternCopies[c]){for(const d of this.pendingRdfaPatternCopies[c])this.emitPatternCopy(d,l.collectedPatternTag,c);delete this.pendingRdfaPatternCopies[c]}this.activeTagStack.pop();return}if(l.predicates){const c=this.util.getResourceOrBaseIri(l.subject,l);let d=l.text||[];l.collectChildTags&&s.collectChildTags&&(d=d.slice(1));const f=this.util.createLiteral(d.join(""),l);if(l.inlist)for(const p of l.predicates)this.addListMapping(l,c,p,f);else for(const p of l.predicates)this.emitTriple(c,p,f);s.predicates||(l.text=null)}if(l.object&&Object.keys(l.listMapping).length>0){const c=this.util.getResourceOrBaseIri(l.object,l);for(const d in l.listMapping){const f=this.util.dataFactory.namedNode(d),p=l.listMapping[d];if(p.length>0){const h=p.map(()=>this.util.createBlankNode());for(let g=0;g<p.length;g++){const v=this.util.getResourceOrBaseIri(p[g],l);this.emitTriple(h[g],this.util.dataFactory.namedNode(t.Util.RDF+"first"),v),this.emitTriple(h[g],this.util.dataFactory.namedNode(t.Util.RDF+"rest"),g<p.length-1?h[g+1]:this.util.dataFactory.namedNode(t.Util.RDF+"nil"))}this.emitTriple(c,f,h[0])}else this.emitTriple(c,f,this.util.dataFactory.namedNode(t.Util.RDF+"nil"))}}}this.activeTagStack.pop(),l.collectChildTags&&l.text&&l.text.push(`</${l.name}>`),l.text&&s&&(s.text?s.text=s.text.concat(l.text):s.text=l.text)}onEnd(){if(this.features.copyRdfaPatterns){this.features.copyRdfaPatterns=!1;for(const l in this.rdfaPatterns){const s=this.rdfaPatterns[l];s.referenced||(s.attributes.typeof="rdfa:Pattern",s.attributes.resource=l,this.emitPatternCopy(s.parentTag,s,l),s.referenced=!1,delete s.attributes.typeof,delete s.attributes.resource)}for(const l in this.pendingRdfaPatternCopies)for(const s of this.pendingRdfaPatternCopies[l])this.activeTagStack.push(s),this.onTagOpen("link",{property:"rdfa:copy",href:l}),this.onTagClose(),this.activeTagStack.pop();this.features.copyRdfaPatterns=!0}}isInheritSubjectInHeadBody(l){return this.features.inheritSubjectInHeadBody&&(l==="head"||l==="body")}addListMapping(l,s,c,d){if(l.explicitNewSubject){const f=this.util.createBlankNode();this.emitTriple(this.util.getResourceOrBaseIri(s,l),c,f),this.emitTriple(f,this.util.dataFactory.namedNode(t.Util.RDF+"first"),this.util.getResourceOrBaseIri(d,l)),this.emitTriple(f,this.util.dataFactory.namedNode(t.Util.RDF+"rest"),this.util.dataFactory.namedNode(t.Util.RDF+"nil"))}else{let f=l.listMappingLocal[c.value];f||(l.listMappingLocal[c.value]=f=[]),d&&f.push(d)}}emitTriple(l,s,c){l.termType==="NamedNode"&&l.value.indexOf(":")<0||s.termType==="NamedNode"&&s.value.indexOf(":")<0||c.termType==="NamedNode"&&c.value.indexOf(":")<0||this.push(this.util.dataFactory.quad(l,s,c,this.defaultGraph))}emitPatternCopy(l,s,c){if(this.activeTagStack.push(l),s.referenced=!0,!s.constructedBlankNodes)s.constructedBlankNodes=[],this.util.blankNodeFactory=()=>{const d=this.util.dataFactory.blankNode();return s.constructedBlankNodes.push(d),d};else{let d=0;this.util.blankNodeFactory=()=>s.constructedBlankNodes[d++]}this.emitPatternCopyAbsolute(s,!0,c),this.util.blankNodeFactory=null,this.activeTagStack.pop()}emitPatternCopyAbsolute(l,s,c){if(!(!s&&l.attributes.property==="rdfa:copy"&&l.attributes.href===c)){this.onTagOpen(l.name,l.attributes);for(const d of l.text)this.onText(d);for(const d of l.children)this.emitPatternCopyAbsolute(d,!1,c);this.onTagClose()}}initializeParser(l){return new a.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(s){this.emit("error",s)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(s){this.emit("error",s)}},onopentag:(s,c)=>{try{this.onTagOpen(s,c),this.htmlParseListener&&this.htmlParseListener.onTagOpen(s,c)}catch(d){this.emit("error",d)}},ontext:s=>{try{this.onText(s),this.htmlParseListener&&this.htmlParseListener.onText(s)}catch(c){this.emit("error",c)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:l})}};return QT.RdfaParser=i,QT}var Vre;function hTe(){return Vre||(Vre=1,(function(a){var e=op&&op.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=op&&op.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(aFe(),a),u(iFe(),a),u(uFe(),a),u(wFe(),a),u($B(),a),u(fTe(),a)})(op)),op}var Hre;function SFe(){if(Hre)return UT;Hre=1,Object.defineProperty(UT,"__esModule",{value:!0}),UT.ActorRdfParseXmlRdfa=void 0;const a=E1(),e=lt(),u=hTe();let n=class extends a.ActorRdfParseFixedMediaTypes{constructor(t){super(t)}async runHandle(t,i,o){const l=t.context.getSafe(e.KeysInitQuery.dataFactory),s=(t.headers&&t.headers.get("content-language"))??void 0;t.data.on("error",d=>c.emit("error",d));const c=t.data.pipe(new u.RdfaParser({dataFactory:l,baseIRI:t.metadata?.baseIRI,profile:"xml",language:s}));return{data:c,metadata:{triples:!0}}}};return UT.ActorRdfParseXmlRdfa=n,UT}var kre;function XB(){return kre||(kre=1,(function(a){var e=up&&up.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=up&&up.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(SFe(),a)})(up)),up}var fp={},HT={},mg={},kT={},zre;function yTe(){if(zre)return kT;zre=1,Object.defineProperty(kT,"__esModule",{value:!0}),kT.promisifyEventEmitter=void 0;function a(e,u){return new Promise((n,r)=>{e.on("end",()=>n(u)),e.on("error",r)})}return kT.promisifyEventEmitter=a,kT}var Gre;function O1(){if(Gre)return mg;Gre=1;var a=mg&&mg.__awaiter||function(n,r,t,i){function o(l){return l instanceof t?l:new t(function(s){s(l)})}return new(t||(t=Promise))(function(l,s){function c(p){try{f(i.next(p))}catch(h){s(h)}}function d(p){try{f(i.throw(p))}catch(h){s(h)}}function f(p){p.done?l(p.value):o(p.value).then(c,d)}f((i=i.apply(n,r||[])).next())})};Object.defineProperty(mg,"__esModule",{value:!0}),mg.stringify=u;const e=yTe();function u(n){return a(this,void 0,void 0,function*(){let r="";return n.on("data",t=>{r+=t}),yield(0,e.promisifyEventEmitter)(n),r})}return mg}var iD={},rC,$re;function EFe(){if($re)return rC;$re=1;var a=(function(){var e=function(Ot,yt,bt,Tt){for(bt=bt||{},Tt=Ot.length;Tt--;bt[Ot[Tt]]=yt);return bt},u=[7,12,13,14,15,16,20,25,115,130],n=[7,13,16,20,25,115,130],r=[7,13,16,115,130],t=[1,25],i=[1,29],o=[1,27],l=[1,28],s=[13,16,115,130],c=[13,16,28,38,40,42,44,46,48,53,56,61,67,85,87,92,93,95,96,102,110,111,115,119,120,126,128,129,130,131,132,133,134,135,136],d=[28,56],f=[1,42],p=[46,48,53,56],h=[1,54],g=[1,60],v=[1,56],m=[1,57],T=[1,58],w=[1,63],E=[1,64],S=[1,65],N=[1,66],j=[1,67],q=[1,68],O=[1,75],I=[28,46,48,53,56],A=[28,42,46,48,53,56],P=[13,16,28,38,40,42,44,46,48,53,56,92,115,119,120,130,131,132,133,134,135,136],C=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,119,120,126,128,129,130,131,132,133,134,135,136],B=[13,16,38,40,44,92,115,119,120,130,131,132,133,134,135,136],H=[13,16,28,38,40,42,44,46,48,53,56,67,85,87,92,95,96,115,117,118,119,120,126,128,129,130,131,132,133,134,135,136],V=[13,16,28,56,115,130],G=[13,16,38,58,87,96,109,115,126,130],Z=[1,116],ae=[1,112],W=[1,108],te=[1,114],se=[1,111],pe=[7,13,16,20,25,44,48,53,56,67,85,87,95,96,115,128,129,130],le=[48,53],Ee=[48,53,87,96,126],Oe=[13,16,44,48,53,56,85,87,95,96,115,128,129,130],Ie=[1,126],Ae=[13,16,40,44,48,53,56,85,87,95,96,115,128,129,130],be=[1,129],ee=[48,53,67,87,96,126],_=[13,16,40,44,48,53,56,67,85,87,95,96,115,128,129,130],F=[1,133],D=[13,16,40,44,48,53,56,67,85,87,95,96,102,115,128,129,130],L=[13,16,40,44,48,53,56,67,85,87,93,95,96,102,110,111,115,128,129,130],Q=[1,151],Y=[1,153],$=[1,156],ue=[1,157],ne=[1,158],ce=[1,167],Se=[1,175],xe=[13,16,44,48,53,56,67,85,87,95,96,115,128,129,130],Ce=[13,16,44,48,53,56,67,85,87,95,96,115,126,128,129,130],Ve=[13,16,46,92,115,119,120,130,131,132,133,134,135,136],Ke={trace:function(){},yy:{},symbols_:{error:2,shaclDoc:3,shaclDoc_repetition0:4,shaclDoc_repetition1:5,ttlSection:6,EOF:7,directive:8,baseDecl:9,importsDecl:10,prefixDecl:11,KW_BASE:12,IRIREF:13,KW_IMPORTS:14,KW_PREFIX:15,PNAME_NS:16,nodeShapeIri:17,iri:18,nodeShape:19,KW_SHAPE:20,nodeShape_option0:21,nodeShape_option1:22,nodeShapeBody:23,shapeClass:24,KW_SHAPE_CLASS:25,shapeClass_option0:26,turtleAnnotation:27,";":28,turtleAnnotation2:29,predicate:30,turtleAnnotation2_option0:31,objectList:32,object:33,objectList_repetition0:34,iriOrLiteral:35,blankNodeSection:36,list:37,"(":38,list_repetition0:39,")":40,objectTail:41,",":42,LB:43,"[":44,RB:45,"]":46,LP:47,"%":48,RP:49,pcSection:50,iriHead:51,ttlStatement:52,".":53,ttlSection_repetition0:54,startNodeShape:55,"{":56,endNodeShape:57,"}":58,nodeShapeBody_repetition0:59,targetClass:60,"->":61,targetClass_repetition_plus0:62,constraint:63,constraint_group0:64,constraint_option0:65,orNotComponent:66,"|":67,nodeNot:68,nodeOrEmit:69,nodeOr:70,nodeOr_repetition_plus0:71,nodeValue:72,negation:73,nodeValue_group0:74,"=":75,iriOrLiteralOrArray:76,propertyShape:77,path:78,propertyShape_repetition0:79,propertyOrComponent:80,propertyNot:81,propertyOr:82,propertyOr_repetition_plus0:83,propertyAtom:84,NODEKIND:85,shapeRef:86,PARAM:87,propertyCount:88,propertyMinCount:89,"..":90,propertyMaxCount:91,INTEGER:92,"*":93,shapeRef_group0:94,"@":95,"!":96,pathAlternative:97,additionalAlternative:98,pathSequence:99,pathAlternative_repetition_plus0:100,additionalSequence:101,"/":102,pathEltOrInverse:103,pathSequence_repetition_plus0:104,pathElt:105,pathPrimary:106,pathMod:107,pathInverse:108,"^":109,"?":110,"+":111,iriOrLiteralOrArray_repetition0:112,literal:113,iri_group0:114,a:115,string:116,LANGTAG:117,"^^":118,DECIMAL:119,DOUBLE:120,literal_group0:121,string_group0:122,string_group1:123,shaclDoc_repetition1_group0:124,constraint_group0_repetition_plus0:125,TARGET:126,propertyShape_repetition0_group0:127,ATPNAME_LN:128,ATPNAME_NS:129,PNAME_LN:130,KW_TRUE:131,KW_FALSE:132,STRING_LITERAL1:133,STRING_LITERAL2:134,STRING_LITERAL_LONG1:135,STRING_LITERAL_LONG2:136,$accept:0,$end:1},terminals_:{2:"error",7:"EOF",12:"KW_BASE",13:"IRIREF",14:"KW_IMPORTS",15:"KW_PREFIX",16:"PNAME_NS",20:"KW_SHAPE",25:"KW_SHAPE_CLASS",28:";",38:"(",40:")",42:",",44:"[",46:"]",48:"%",53:".",56:"{",58:"}",61:"->",67:"|",75:"=",85:"NODEKIND",87:"PARAM",90:"..",92:"INTEGER",93:"*",95:"@",96:"!",102:"/",109:"^",110:"?",111:"+",115:"a",117:"LANGTAG",118:"^^",119:"DECIMAL",120:"DOUBLE",126:"TARGET",128:"ATPNAME_LN",129:"ATPNAME_NS",130:"PNAME_LN",131:"KW_TRUE",132:"KW_FALSE",133:"STRING_LITERAL1",134:"STRING_LITERAL2",135:"STRING_LITERAL_LONG1",136:"STRING_LITERAL_LONG2"},productions_:[0,[3,4],[8,1],[8,1],[8,1],[9,2],[10,2],[11,3],[17,1],[19,5],[24,4],[27,2],[29,2],[30,2],[32,2],[33,1],[33,1],[33,1],[37,3],[41,2],[43,1],[45,1],[36,3],[47,1],[49,1],[50,3],[51,1],[52,3],[6,1],[55,1],[57,1],[23,3],[60,2],[63,3],[66,2],[69,1],[70,1],[70,2],[68,1],[68,2],[72,3],[77,2],[80,2],[82,1],[82,2],[81,1],[81,2],[84,1],[84,1],[84,1],[84,3],[84,1],[88,5],[89,1],[91,1],[91,1],[86,1],[86,2],[73,1],[78,1],[98,2],[97,1],[97,2],[101,2],[99,1],[99,2],[105,1],[105,2],[103,1],[103,2],[108,1],[107,1],[107,1],[107,1],[106,1],[106,3],[76,1],[76,3],[35,1],[35,1],[18,1],[18,1],[18,1],[113,1],[113,2],[113,3],[113,1],[113,1],[113,1],[113,1],[116,1],[116,1],[4,0],[4,2],[124,1],[124,1],[5,0],[5,2],[21,0],[21,1],[22,0],[22,1],[26,0],[26,1],[31,0],[31,1],[34,0],[34,2],[39,0],[39,2],[54,0],[54,2],[59,0],[59,2],[62,1],[62,2],[125,1],[125,2],[64,1],[64,1],[65,0],[65,1],[71,1],[71,2],[74,1],[74,1],[127,1],[127,1],[79,0],[79,2],[83,1],[83,2],[94,1],[94,1],[100,1],[100,2],[104,1],[104,2],[112,0],[112,2],[114,1],[114,1],[121,1],[121,1],[122,1],[122,1],[123,1],[123,1]],performAction:function(yt,bt,Tt,xt,wt,gt,lr){var ht=gt.length-1;switch(wt){case 1:this.$=Te(tt.factory.namedNode(de("")),tt.factory.namedNode(oe),tt.factory.namedNode(Fe+"Ontology"));break;case 5:tt.base=tt.factory.namedNode(gt[ht].slice(1,-1)),tt.n3Parser._setBase(de(tt.base.value));break;case 6:this.$=Te(tt.base,tt.factory.namedNode(Fe+"imports"),tt.factory.namedNode(gt[ht].slice(1,-1)));break;case 7:this.$=tt.prefixes[gt[ht-1].substr(0,gt[ht-1].length-1)]=de(gt[ht]);break;case 8:tt.nodeShapeStack=!1,Te(tt.currentNodeShape=gt[ht],tt.factory.namedNode(oe),tt.factory.namedNode(Pe+"NodeShape"));break;case 10:this.$=Te(tt.currentNodeShape,tt.factory.namedNode(oe),tt.factory.namedNode(R+"Class"));break;case 11:this.$=Me();break;case 13:this.$=gt[ht].forEach(ke=>Te(tt.currentNodeShape,gt[ht-1],ke));break;case 14:this.$=[gt[ht-1],...gt[ht]];break;case 18:this.$=K(gt[ht-1],!0);break;case 19:case 34:case 42:case 60:case 63:this.$=gt[ht];break;case 20:tt.tempCurrentNodeShape=tt.currentNodeShape,this.$=tt.currentNodeShape=ze();break;case 21:tt.currentNodeShape=tt.tempCurrentNodeShape;break;case 22:case 31:this.$=gt[ht-2];break;case 23:tt.tempCurrentNodeShape=tt.currentNodeShape,tt.currentNodeShape=tt.currentPropertyNode;break;case 24:tt.currentNodeShape=tt.tempCurrentNodeShape;break;case 26:tt.currentNodeShape=gt[ht];break;case 29:tt.nodeShapeStack?(tt.nodeShapeStack.push(tt.currentNodeShape),Te(tt.currentPropertyNode,tt.factory.namedNode(Pe+"node"),tt.currentNodeShape=ze())):tt.nodeShapeStack=[],this.$=tt.currentNodeShape;break;case 30:tt.nodeShapeStack.length>0&&(tt.currentNodeShape=tt.nodeShapeStack.pop());break;case 32:this.$=gt[ht].forEach(ke=>{Te(tt.currentNodeShape,tt.factory.namedNode(Pe+"targetClass"),ke)});break;case 35:this.$=Te(tt.currentNodeShape,tt.factory.namedNode(Pe+gt[ht][0]),gt[ht][1]);break;case 36:break;case 37:const Re=K([gt[ht-1],...gt[ht]].map(ke=>{const vt=ze();return Te(vt,tt.factory.namedNode(Pe+ke[0]),ke[1]),vt}));this.$=["or",Re];break;case 39:case 46:this.$=it("not",...gt[ht]);break;case 40:case 50:this.$=[gt[ht-2],gt[ht]];break;case 43:this.$=gt[ht]&&qe(...gt[ht]);break;case 44:this.$=qe("or",K([gt[ht-1],...gt[ht]].map(ke=>{const vt=ze();return Te(vt,tt.factory.namedNode(Pe+ke[0]),ke[1]),vt})));break;case 47:this.$=[k[gt[ht].value]?"datatype":"class",gt[ht]];break;case 48:this.$=["nodeKind",tt.factory.namedNode(Pe+gt[ht])];break;case 49:this.$=["node",tt.factory.namedNode(gt[ht])];break;case 51:this.$=void 0;break;case 53:this.$=gt[ht]>0&&qe("minCount",Ue(gt[ht],ye));break;case 54:this.$=qe("maxCount",Ue(gt[ht],ye));break;case 56:this.$=ge(gt[ht].slice(1));break;case 57:this.$=de(gt[ht]);break;case 59:Te(tt.currentNodeShape,tt.factory.namedNode(Pe+"property"),tt.currentPropertyNode=ze()),qe("path",gt[ht]);break;case 62:const Qe=ze();Te(Qe,tt.factory.namedNode(Pe+"alternativePath"),K([gt[ht-1],...gt[ht]])),this.$=Qe;break;case 65:this.$=K([gt[ht-1],...gt[ht]]);break;case 67:Te(this.$=ze(),tt.factory.namedNode(Pe+gt[ht]),gt[ht-1]);break;case 69:Te(this.$=ze(),tt.factory.namedNode(Pe+"inversePath"),gt[ht]);break;case 71:this.$="zeroOrOnePath";break;case 72:this.$="zeroOrMorePath";break;case 73:this.$="oneOrMorePath";break;case 75:this.$=gt[ht-1];break;case 77:this.$=K(gt[ht-1]);break;case 80:this.$=tt.factory.namedNode(de(gt[ht]));break;case 81:this.$=tt.factory.namedNode(ge(gt[ht]));break;case 82:this.$=Me(tt.factory.namedNode(oe));break;case 83:this.$=Ue(gt[ht]);break;case 84:this.$=je(gt[ht-1],gt[ht].substr(1).toLowerCase());break;case 85:this.$=Ue(gt[ht-2],gt[ht]);break;case 86:this.$=Ue(gt[ht],ye);break;case 87:this.$=Ue(gt[ht],re);break;case 88:this.$=Ue(gt[ht].toLowerCase(),Ne);break;case 89:this.$=Ue(gt[ht].toLowerCase(),Le);break;case 90:this.$=fe(gt[ht],1);break;case 91:this.$=fe(gt[ht],3);break;case 92:case 96:case 106:case 108:case 110:case 112:case 128:case 138:this.$=[];break;case 93:case 97:case 107:case 109:case 111:case 113:case 115:case 117:case 123:case 129:case 131:case 135:case 137:case 139:gt[ht-1].push(gt[ht]);break;case 114:case 116:case 122:case 130:case 134:case 136:this.$=[gt[ht]];break}},table:[e(u,[2,92],{3:1,4:2}),{1:[3]},e(n,[2,96],{5:3,8:4,9:5,10:6,11:7,12:[1,8],14:[1,9],15:[1,10]}),e(r,[2,110],{6:11,124:12,54:13,19:14,24:15,20:[1,16],25:[1,17]}),e(u,[2,93]),e(u,[2,2]),e(u,[2,3]),e(u,[2,4]),{13:[1,18]},{13:[1,19]},{16:[1,20]},{7:[1,21]},e(n,[2,97]),{7:[2,28],13:t,16:i,18:24,51:23,52:22,114:26,115:o,130:l},e(n,[2,94]),e(n,[2,95]),{13:t,16:i,17:30,18:31,114:26,115:o,130:l},{13:t,16:i,17:32,18:31,114:26,115:o,130:l},e(u,[2,5]),e(u,[2,6]),{13:[1,33]},{1:[2,1]},e(r,[2,111]),{13:t,16:i,18:36,29:34,30:35,114:26,115:o,130:l},e(s,[2,26]),e(c,[2,80]),e(c,[2,81]),e(c,[2,82]),e(c,[2,140]),e(c,[2,141]),e(d,[2,98],{21:37,60:38,61:[1,39]}),e([28,56,61],[2,8]),{26:40,27:41,28:f,56:[2,102]},e(u,[2,7]),{53:[1,43]},e(p,[2,104],{31:44,27:45,28:f}),{13:t,16:i,18:51,32:46,33:47,35:48,36:49,37:50,38:h,43:53,44:g,92:v,113:52,114:26,115:o,116:55,119:m,120:T,121:59,122:61,123:62,130:l,131:w,132:E,133:S,134:N,135:j,136:q},{22:69,27:70,28:f,56:[2,100]},e(d,[2,99]),{13:t,16:i,18:72,62:71,114:26,115:o,130:l},{23:73,55:74,56:O},{56:[2,103]},{13:t,16:i,18:36,29:76,30:35,114:26,115:o,130:l},e(r,[2,27]),e(p,[2,12]),e(p,[2,105]),e(I,[2,13]),e(A,[2,106],{34:77}),e(P,[2,15]),e(P,[2,16]),e(P,[2,17]),e(C,[2,78]),e(C,[2,79]),{13:t,16:i,18:36,29:78,30:35,114:26,115:o,130:l},e(B,[2,108],{39:79}),e(C,[2,83],{117:[1,80],118:[1,81]}),e(C,[2,86]),e(C,[2,87]),e(C,[2,88]),e(C,[2,89]),e(s,[2,20]),e(H,[2,90]),e(H,[2,91]),e(C,[2,142]),e(C,[2,143]),e(H,[2,144]),e(H,[2,145]),e(H,[2,146]),e(H,[2,147]),{23:82,55:74,56:O},{56:[2,101]},e(d,[2,32],{114:26,18:83,13:t,16:i,115:o,130:l}),e(V,[2,114]),e(n,[2,10]),e(G,[2,112],{59:84}),e(G,[2,29]),e(p,[2,11]),e(I,[2,14],{41:85,42:[1,86]}),{45:87,46:[1,88]},{13:t,16:i,18:51,33:90,35:48,36:49,37:50,38:h,40:[1,89],43:53,44:g,92:v,113:52,114:26,115:o,116:55,119:m,120:T,121:59,122:61,123:62,130:l,131:w,132:E,133:S,134:N,135:j,136:q},e(C,[2,84]),{13:t,16:i,18:91,114:26,115:o,130:l},e(n,[2,9]),e(V,[2,115]),{13:t,16:i,18:115,38:Z,57:92,58:[1,94],63:93,64:95,68:102,69:98,70:100,72:104,73:105,74:107,77:97,78:99,87:ae,96:W,97:101,99:103,103:106,105:109,106:113,108:110,109:te,114:26,115:o,125:96,126:se,130:l},e(A,[2,107]),{13:t,16:i,18:51,33:117,35:48,36:49,37:50,38:h,43:53,44:g,92:v,113:52,114:26,115:o,116:55,119:m,120:T,121:59,122:61,123:62,130:l,131:w,132:E,133:S,134:N,135:j,136:q},e(P,[2,22]),e(P,[2,21]),e(P,[2,18]),e(B,[2,109]),e(C,[2,85]),e(pe,[2,31]),e(G,[2,113]),e(pe,[2,30]),{47:120,48:[1,121],50:119,53:[2,120],65:118},e(le,[2,118],{70:100,68:102,72:104,73:105,74:107,69:122,87:ae,96:W,126:se}),e(le,[2,119]),e(Ee,[2,116]),e(Oe,[2,128],{79:123}),e(Ee,[2,35]),e(Oe,[2,59]),e(Ee,[2,36],{71:124,66:125,67:Ie}),e(Ae,[2,61],{100:127,98:128,67:be}),e(ee,[2,38]),{72:130,74:107,87:ae,126:se},e(_,[2,64],{104:131,101:132,102:F}),{75:[1,134]},e([13,16,56,85,87,95,115,126,128,129,130],[2,58]),e(D,[2,68]),{13:t,16:i,18:115,38:Z,105:135,106:113,114:26,115:o,130:l},{75:[2,124]},{75:[2,125]},e(D,[2,66],{107:136,93:[1,138],110:[1,137],111:[1,139]}),e([13,16,38,115,130],[2,70]),e(L,[2,74]),{13:t,16:i,18:115,38:Z,97:140,99:103,103:106,105:109,106:113,108:110,109:te,114:26,115:o,130:l},e(A,[2,19]),{53:[1,141]},{53:[2,121]},{13:t,16:i,18:36,29:142,30:35,114:26,115:o,130:l},e(s,[2,23]),e(Ee,[2,117]),e(le,[2,41],{114:26,55:74,127:143,88:144,82:145,81:147,84:148,73:149,18:150,86:152,23:154,94:155,13:t,16:i,44:[1,146],56:O,85:Q,87:Y,95:$,96:W,115:o,128:ue,129:ne,130:l}),e(Ee,[2,37],{66:159,67:Ie}),e(ee,[2,122]),{68:160,72:104,73:105,74:107,87:ae,96:W,126:se},e(Ae,[2,62],{98:161,67:be}),e(_,[2,134]),{13:t,16:i,18:115,38:Z,99:162,103:106,105:109,106:113,108:110,109:te,114:26,115:o,130:l},e(ee,[2,39]),e(_,[2,65],{101:163,102:F}),e(D,[2,136]),{13:t,16:i,18:115,38:Z,103:164,105:109,106:113,108:110,109:te,114:26,115:o,130:l},{13:t,16:i,18:51,35:166,44:ce,76:165,92:v,113:52,114:26,115:o,116:55,119:m,120:T,121:59,122:61,123:62,130:l,131:w,132:E,133:S,134:N,135:j,136:q},e(D,[2,69]),e(D,[2,67]),e(D,[2,71]),e(D,[2,72]),e(D,[2,73]),{40:[1,168]},e(G,[2,33]),{48:[1,170],49:169},e(Oe,[2,129]),e(Oe,[2,126]),e(Oe,[2,127]),{89:171,92:[1,172]},e(Oe,[2,43],{83:173,80:174,67:Se}),e(xe,[2,45]),{13:t,16:i,18:150,23:154,55:74,56:O,84:176,85:Q,86:152,87:Y,94:155,95:$,114:26,115:o,128:ue,129:ne,130:l},e(xe,[2,47]),e(xe,[2,48]),e(xe,[2,49]),{75:[1,177]},e(xe,[2,51]),e(xe,[2,56]),{13:[1,178]},e(xe,[2,132]),e(xe,[2,133]),e(ee,[2,123]),e(ee,[2,34]),e(_,[2,135]),e(_,[2,60]),e(D,[2,137]),e(D,[2,63]),e(ee,[2,40]),e(Ce,[2,76]),e(Ve,[2,138],{112:179}),e(L,[2,75]),{53:[2,25]},{53:[2,24]},{90:[1,180]},{90:[2,53]},e(Oe,[2,44],{80:181,67:Se}),e(xe,[2,130]),{13:t,16:i,18:150,23:154,55:74,56:O,73:149,81:182,84:148,85:Q,86:152,87:Y,94:155,95:$,96:W,114:26,115:o,128:ue,129:ne,130:l},e(xe,[2,46]),{13:t,16:i,18:51,35:166,44:ce,76:183,92:v,113:52,114:26,115:o,116:55,119:m,120:T,121:59,122:61,123:62,130:l,131:w,132:E,133:S,134:N,135:j,136:q},e(xe,[2,57]),{13:t,16:i,18:51,35:185,46:[1,184],92:v,113:52,114:26,115:o,116:55,119:m,120:T,121:59,122:61,123:62,130:l,131:w,132:E,133:S,134:N,135:j,136:q},{91:186,92:[1,187],93:[1,188]},e(xe,[2,131]),e(xe,[2,42]),e(xe,[2,50]),e(Ce,[2,77]),e(Ve,[2,139]),{46:[1,189]},{46:[2,54]},{46:[2,55]},e(Oe,[2,52])],defaultActions:{21:[2,1],41:[2,103],70:[2,101],111:[2,124],112:[2,125],119:[2,121],169:[2,25],170:[2,24],172:[2,53],187:[2,54],188:[2,55]},parseError:function(yt,bt){if(bt.recoverable)this.trace(yt);else{var Tt=new Error(yt);throw Tt.hash=bt,Tt}},parse:function(yt){var bt=this,Tt=[0],xt=[null],wt=[],gt=this.table,lr="",ht=0,Re=0,Qe=2,ke=1,vt=wt.slice.call(arguments,1),St=Object.create(this.lexer),Qt={yy:{}};for(var Tr in this.yy)Object.prototype.hasOwnProperty.call(this.yy,Tr)&&(Qt.yy[Tr]=this.yy[Tr]);St.setInput(yt,Qt.yy),Qt.yy.lexer=St,Qt.yy.parser=this,typeof St.yylloc>"u"&&(St.yylloc={});var pr=St.yylloc;wt.push(pr);var aa=St.options&&St.options.ranges;typeof Qt.yy.parseError=="function"?this.parseError=Qt.yy.parseError:this.parseError=Object.getPrototypeOf(this).parseError;for(var hr=function(){var $r;return $r=St.lex()||ke,typeof $r!="number"&&($r=bt.symbols_[$r]||$r),$r},Ir,fa,Or,xn,hn={},_i,Rn,yo,yn;;){if(fa=Tt[Tt.length-1],this.defaultActions[fa]?Or=this.defaultActions[fa]:((Ir===null||typeof Ir>"u")&&(Ir=hr()),Or=gt[fa]&&gt[fa][Ir]),typeof Or>"u"||!Or.length||!Or[0]){var Nn="";yn=[];for(_i in gt[fa])this.terminals_[_i]&&_i>Qe&&yn.push("'"+this.terminals_[_i]+"'");St.showPosition?Nn="Parse error on line "+(ht+1)+`:
`+St.showPosition()+`
Expecting `+yn.join(", ")+", got '"+(this.terminals_[Ir]||Ir)+"'":Nn="Parse error on line "+(ht+1)+": Unexpected "+(Ir==ke?"end of input":"'"+(this.terminals_[Ir]||Ir)+"'"),this.parseError(Nn,{text:St.match,token:this.terminals_[Ir]||Ir,line:St.yylineno,loc:pr,expected:yn})}if(Or[0]instanceof Array&&Or.length>1)throw new Error("Parse Error: multiple actions possible at state: "+fa+", token: "+Ir);switch(Or[0]){case 1:Tt.push(Ir),xt.push(St.yytext),wt.push(St.yylloc),Tt.push(Or[1]),Ir=null,Re=St.yyleng,lr=St.yytext,ht=St.yylineno,pr=St.yylloc;break;case 2:if(Rn=this.productions_[Or[1]][1],hn.$=xt[xt.length-Rn],hn._$={first_line:wt[wt.length-(Rn||1)].first_line,last_line:wt[wt.length-1].last_line,first_column:wt[wt.length-(Rn||1)].first_column,last_column:wt[wt.length-1].last_column},aa&&(hn._$.range=[wt[wt.length-(Rn||1)].range[0],wt[wt.length-1].range[1]]),xn=this.performAction.apply(hn,[lr,Re,ht,Qt.yy,Or[1],xt,wt].concat(vt)),typeof xn<"u")return xn;Rn&&(Tt=Tt.slice(0,-1*Rn*2),xt=xt.slice(0,-1*Rn),wt=wt.slice(0,-1*Rn)),Tt.push(this.productions_[Or[1]][0]),xt.push(hn.$),wt.push(hn._$),yo=gt[Tt[Tt.length-2]][Tt[Tt.length-1]],Tt.push(yo);break;case 3:return!0}}return!0}};const Ye="http://www.w3.org/1999/02/22-rdf-syntax-ns#",oe=Ye+"type",X=Ye+"first",J=Ye+"rest",he=Ye+"nil",ve="http://www.w3.org/2001/XMLSchema#",ye=ve+"integer",re=ve+"decimal",Ne=ve+"double",Le=ve+"boolean",Pe="http://www.w3.org/ns/shacl#",Fe="http://www.w3.org/2002/07/owl#",R="http://www.w3.org/2000/01/rdf-schema#",k={[ye]:!0,[re]:!0,[ve+"float"]:!0,[Ne]:!0,[ve+"string"]:!0,[Le]:!0,[ve+"dateTime"]:!0,[ve+"nonPositiveInteger"]:!0,[ve+"negativeInteger"]:!0,[ve+"long"]:!0,[ve+"int"]:!0,[ve+"short"]:!0,[ve+"byte"]:!0,[ve+"nonNegativeInteger"]:!0,[ve+"unsignedLong"]:!0,[ve+"unsignedShort"]:!0,[ve+"unsignedByte"]:!0,[ve+"positiveInteger"]:!0,[Ye+"langString"]:!0};function K(Ot,yt=!1){let bt=0,Tt=Ot.length;if(yt&&Tt===0)return tt.factory.namedNode(he);const xt=head=ze();return Tt===0&&Te(head,tt.factory.namedNode(J),tt.factory.namedNode(he)),Ot.forEach(wt=>{if(wt===void 0)throw new Error("b");Te(head,tt.factory.namedNode(X),wt),Te(head,tt.factory.namedNode(J),head=++bt<Tt?ze():tt.factory.namedNode(he))}),xt}function de(Ot){return tt.n3Parser._resolveIRI(Ot[0]==="<"?Ot.substring(1,Ot.length-1):Ot)}function ge(Ot){const yt=Ot.indexOf(":"),bt=Ot.substr(0,yt),Tt=tt.prefixes[bt];if(!Tt)throw new Error("Unknown prefix: "+bt);return de(Tt+Ot.substr(yt+1))}function Ue(Ot,yt){return yt&&yt.termType!=="NamedNode"&&(yt=tt.factory.namedNode(yt)),tt.factory.literal(Ot,yt)}function je(Ot,yt){return tt.factory.literal(Ot,yt)}function ze(Ot){return tt.factory.blankNode("g_"+at++)}var at=0;tt._resetBlanks=function(){at=0};function fe(Ot,yt){return tt.n3Parser._lexer._unescape(Ot.substring(yt,Ot.length-yt))}function Te(Ot,yt,bt){if(!Ot.termType||!yt.termType||yt.value.includes(",")||!bt.termType)throw new Error(`boo ${Ot.value} ${yt.value} ${bt.value}`);tt.onQuad(tt.factory.quad(Ot,yt,bt))}function qe(Ot,yt){Te(tt.currentPropertyNode,tt.factory.namedNode(Pe+Ot),yt)}function it(Ot,yt,bt){const Tt=ze();return Te(Tt,tt.factory.namedNode(Pe+yt),bt),[Ot,Tt]}function Me(Ot){if(!tt.extended)throw new Error("Encountered extended SHACLC syntax; but extended parsing is disabled");return Ot}var st=(function(){var Ot={EOF:1,parseError:function(bt,Tt){if(this.yy.parser)this.yy.parser.parseError(bt,Tt);else throw new Error(bt)},setInput:function(yt,bt){return this.yy=bt||this.yy||{},this._input=yt,this._more=this._backtrack=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var yt=this._input[0];this.yytext+=yt,this.yyleng++,this.offset++,this.match+=yt,this.matched+=yt;var bt=yt.match(/(?:\r\n?|\n).*/g);return bt?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),yt},unput:function(yt){var bt=yt.length,Tt=yt.split(/(?:\r\n?|\n)/g);this._input=yt+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-bt),this.offset-=bt;var xt=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),Tt.length-1&&(this.yylineno-=Tt.length-1);var wt=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:Tt?(Tt.length===xt.length?this.yylloc.first_column:0)+xt[xt.length-Tt.length].length-Tt[0].length:this.yylloc.first_column-bt},this.options.ranges&&(this.yylloc.range=[wt[0],wt[0]+this.yyleng-bt]),this.yyleng=this.yytext.length,this},more:function(){return this._more=!0,this},reject:function(){if(this.options.backtrack_lexer)this._backtrack=!0;else return this.parseError("Lexical error on line "+(this.yylineno+1)+`. You can only invoke reject() in the lexer when the lexer is of the backtracking persuasion (options.backtrack_lexer = true).
`+this.showPosition(),{text:"",token:null,line:this.yylineno});return this},less:function(yt){this.unput(this.match.slice(yt))},pastInput:function(){var yt=this.matched.substr(0,this.matched.length-this.match.length);return(yt.length>20?"...":"")+yt.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var yt=this.match;return yt.length<20&&(yt+=this._input.substr(0,20-yt.length)),(yt.substr(0,20)+(yt.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var yt=this.pastInput(),bt=new Array(yt.length+1).join("-");return yt+this.upcomingInput()+`
`+bt+"^"},test_match:function(yt,bt){var Tt,xt,wt;if(this.options.backtrack_lexer&&(wt={yylineno:this.yylineno,yylloc:{first_line:this.yylloc.first_line,last_line:this.last_line,first_column:this.yylloc.first_column,last_column:this.yylloc.last_column},yytext:this.yytext,match:this.match,matches:this.matches,matched:this.matched,yyleng:this.yyleng,offset:this.offset,_more:this._more,_input:this._input,yy:this.yy,conditionStack:this.conditionStack.slice(0),done:this.done},this.options.ranges&&(wt.yylloc.range=this.yylloc.range.slice(0))),xt=yt[0].match(/(?:\r\n?|\n).*/g),xt&&(this.yylineno+=xt.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:xt?xt[xt.length-1].length-xt[xt.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+yt[0].length},this.yytext+=yt[0],this.match+=yt[0],this.matches=yt,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._backtrack=!1,this._input=this._input.slice(yt[0].length),this.matched+=yt[0],Tt=this.performAction.call(this,this.yy,this,bt,this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),Tt)return Tt;if(this._backtrack){for(var gt in wt)this[gt]=wt[gt];return!1}return!1},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var yt,bt,Tt,xt;this._more||(this.yytext="",this.match="");for(var wt=this._currentRules(),gt=0;gt<wt.length;gt++)if(Tt=this._input.match(this.rules[wt[gt]]),Tt&&(!bt||Tt[0].length>bt[0].length)){if(bt=Tt,xt=gt,this.options.backtrack_lexer){if(yt=this.test_match(Tt,wt[gt]),yt!==!1)return yt;if(this._backtrack){bt=!1;continue}else return!1}else if(!this.options.flex)break}return bt?(yt=this.test_match(bt,wt[xt]),yt!==!1?yt:!1):this._input===""?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+`. Unrecognized text.
`+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var bt=this.next();return bt||this.lex()},begin:function(bt){this.conditionStack.push(bt)},popState:function(){var bt=this.conditionStack.length-1;return bt>0?this.conditionStack.pop():this.conditionStack[0]},_currentRules:function(){return this.conditionStack.length&&this.conditionStack[this.conditionStack.length-1]?this.conditions[this.conditionStack[this.conditionStack.length-1]].rules:this.conditions.INITIAL.rules},topState:function(bt){return bt=this.conditionStack.length-1-Math.abs(bt||0),bt>=0?this.conditionStack[bt]:"INITIAL"},pushState:function(bt){this.begin(bt)},stateStackSize:function(){return this.conditionStack.length},options:{flex:!0,"case-insensitive":!0},performAction:function(bt,Tt,xt,wt){switch(xt){case 0:break;case 1:return 12;case 2:return 14;case 3:return 15;case 4:return 25;case 5:return 20;case 6:return 131;case 7:return 132;case 8:return 85;case 9:return 126;case 10:return 87;case 11:return"PASS";case 12:return"COMMENT";case 13:return 13;case 14:return 16;case 15:return 130;case 16:return 129;case 17:return 128;case 18:return 117;case 19:return 92;case 20:return 119;case 21:return 120;case 22:return"EXPONENT";case 23:return 133;case 24:return 134;case 25:return 135;case 26:return 136;case 27:return 61;case 28:return 90;case 29:return 58;case 30:return 56;case 31:return 38;case 32:return 40;case 33:return 44;case 34:return 46;case 35:return 110;case 36:return 93;case 37:return 111;case 38:return 67;case 39:return 118;case 40:return 53;case 41:return 96;case 42:return 102;case 43:return 75;case 44:return 95;case 45:return 109;case 46:return 28;case 47:return 42;case 48:return 48;case 49:return 115;case 50:return 7;case 51:console.log(Tt.yytext);break}},rules:[/^(?:\s+|#[^\n\r]*)/i,/^(?:BASE)/i,/^(?:IMPORTS)/i,/^(?:PREFIX)/i,/^(?:shapeClass)/i,/^(?:shape)/i,/^(?:true)/i,/^(?:false)/i,/^(?:(BlankNode|IRI|Literal|BlankNodeOrIRI|BlankNodeOrLiteral|IRIOrLiteral\b))/i,/^(?:(targetNode|targetObjectsOf|targetSubjectsOf\b))/i,/^(?:(deactivated|severity|message|class|datatype|nodeKind|minExclusive|minInclusive|maxExclusive|maxInclusive|minLength|maxLength|pattern|flags|languageIn|uniqueLang|equals|disjoint|lessThan|lessThanOrEquals|qualifiedValueShape|qualifiedMinCount|qualifiedMaxCount|qualifiedValueShapesDisjoint|closed|ignoredProperties|hasValue|in))/i,/^(?:([ \t\r\n]+))/i,/^(?:(#[\r\n]*))/i,/^(?:(<([^=<>\"\{\}\|\^`\\\u0000-\u0020]|(\\u([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])|\\U([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f])))*>))/i,/^(?:((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@(([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:))/i,/^(?:(@((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.)*((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040]))?)?:)(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|:|[0-9]|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))((((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|\.|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%))))*(((([A-Z]|[a-z]|[\u00C0-\u00D6]|[\u00D8-\u00F6]|[\u00F8-\u02FF]|[\u0370-\u037D]|[\u037F-\u1FFF]|[\u200C-\u200D]|[\u2070-\u218F]|[\u2C00-\u2FEF]|[\u3001-\uD7FF]|[\uF900-\uFDCF]|[\uFDF0-\uFFFD])|_\b)|-|[0-9]|[\u00B7]|[\u0300-\u036F]|[\u203F-\u2040])|:|((%([0-9]|[A-F]|[a-f])([0-9]|[A-F]|[a-f]))|(\\(_|~|\.|-|!|\$|&|'|\(|\)|\*|\+|,|;|=|\/|\?|#|@|%)))))?)))/i,/^(?:(@[a-zA-Z]+(-[a-zA-Z0-9]+)*))/i,/^(?:([+-]?[0-9]+))/i,/^(?:([+-]?[0-9]*\.[0-9]+))/i,/^(?:([+-]?([0-9]+\.[0-9]*([eE][+-]?[0-9]+)|\.?[0-9]+([eE][+-]?[0-9]+))))/i,/^(?:([eE][+-]?[0-9]+))/i,/^(?:('(?:(?:[^\u0027\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*'))/i,/^(?:("(?:(?:[^\u0022\u005C\u000A\u000D])|(\\[tbnrf\\\"\']))*"))/i,/^(?:('''(?:(?:'|'')?(?:[^'\\]|(\\[tbnrf\\\"\'])))*'''))/i,/^(?:("""(?:(?:"|"")?(?:[^\"\\]|(\\[tbnrf\\\"\'])))*"""))/i,/^(?:->)/i,/^(?:\.\.)/i,/^(?:\})/i,/^(?:\{)/i,/^(?:\()/i,/^(?:\))/i,/^(?:\[)/i,/^(?:\])/i,/^(?:\?)/i,/^(?:\*)/i,/^(?:\+)/i,/^(?:\|)/i,/^(?:\^\^)/i,/^(?:\.)/i,/^(?:!)/i,/^(?:\/)/i,/^(?:=)/i,/^(?:@)/i,/^(?:\^)/i,/^(?:;)/i,/^(?:,)/i,/^(?:%)/i,/^(?:a)/i,/^(?:$)/i,/^(?:.)/i],conditions:{INITIAL:{rules:[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51],inclusive:!0}}};return Ot})();Ke.lexer=st;function tt(){this.yy={}}return tt.prototype=Ke,Ke.Parser=tt,new tt})();return rC=a,rC}var Xre;function AFe(){if(Xre)return iD;Xre=1;const a=EFe().Parser,e=Tl;class u{constructor(){}parse(r,{extendedSyntax:t,baseIRI:i}={}){this._parser=new a,this._parser.Parser.factory=e.DataFactory,this._parser.Parser.base=e.DataFactory.namedNode(i||"urn:x-base:default"),this._parser.Parser.extended=t===!0,this._parser.Parser.prefixes={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#",owl:"http://www.w3.org/2002/07/owl#"},this._parser.Parser.currentNodeShape=void 0,this._parser.Parser.currentPropertyNode=void 0,this._parser.Parser.nodeShapeStack=[],this._parser.Parser.tempCurrentNodeShape=void 0,this._parser.Parser.n3Parser=new e.Parser({baseIRI:i||"urn:x-base:default"});const o=[];return this._parser.Parser.onQuad=l=>{o.push(l)},this._parser.parse(r),o.prefixes=this._parser.Parser.prefixes,o}}return iD.Parser=u,iD.parse=function(r,t){return new u().parse(r,t)},iD}var zT={},Kre;function OFe(){if(Kre)return zT;Kre=1,Object.defineProperty(zT,"__esModule",{value:!0}),zT.PrefixWrappingIterator=void 0;const a=zt();let e=class extends a.WrappingIterator{constructor(n){super(n?.then(r=>(this.prefixes=r.prefixes,r)))}read(){if(this.prefixes){for(const n of Object.entries(this.prefixes))this.emit("prefix",...n);delete this.prefixes}return super.read()}};return zT.PrefixWrappingIterator=e,zT}var Jre;function xFe(){if(Jre)return HT;Jre=1,Object.defineProperty(HT,"__esModule",{value:!0}),HT.ActorRdfParseShaclc=void 0;const a=E1(),e=O1(),u=Nr(),n=AFe(),r=OFe();let t=class extends a.ActorRdfParseFixedMediaTypes{constructor(o){super(o)}async runHandle(o,l,s){const c=new r.PrefixWrappingIterator((0,e.stringify)(o.data).then(f=>(0,n.parse)(f,{extendedSyntax:l==="text/shaclc-ext",baseIRI:o.metadata?.baseIRI}))),d=new u.Readable({objectMode:!0});return c.on("prefix",(...f)=>d.emit("prefix",...f)),{data:d.wrap(c),metadata:{triples:!0}}}};return HT.ActorRdfParseShaclc=t,HT}var Wre;function KB(){return Wre||(Wre=1,(function(a){var e=fp&&fp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=fp&&fp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(xFe(),a)})(fp)),fp}var pp={},GT={},Ju={},Wu={},bg={},nC={},$T={},Yre;function Zre(){return Yre||(Yre=1,Object.defineProperty($T,"__esModule",{value:!0}),$T.htmlDecodeTree=void 0,$T.htmlDecodeTree=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(a=>a.charCodeAt(0)))),$T}var XT={},ene;function tne(){return ene||(ene=1,Object.defineProperty(XT,"__esModule",{value:!0}),XT.xmlDecodeTree=void 0,XT.xmlDecodeTree=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(a=>a.charCodeAt(0)))),XT}var aC={},rne;function nne(){return rne||(rne=1,(function(a){var e;Object.defineProperty(a,"__esModule",{value:!0}),a.fromCodePoint=void 0,a.replaceCodePoint=n,a.decodeCodePoint=r;const u=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);a.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(t){let i="";return t>65535&&(t-=65536,i+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),i+=String.fromCharCode(t),i};function n(t){var i;return t>=55296&&t<=57343||t>1114111?65533:(i=u.get(t))!==null&&i!==void 0?i:t}function r(t){return(0,a.fromCodePoint)(n(t))}})(aC)),aC}var ane;function mTe(){return ane||(ane=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.fromCodePoint=a.replaceCodePoint=a.decodeCodePoint=a.xmlDecodeTree=a.htmlDecodeTree=a.EntityDecoder=a.DecodingMode=a.BinTrieFlags=void 0,a.determineBranch=g,a.decodeHTML=T,a.decodeHTMLAttribute=w,a.decodeHTMLStrict=E,a.decodeXML=S;const e=Zre(),u=tne(),n=nne();var r;(function(O){O[O.NUM=35]="NUM",O[O.SEMI=59]="SEMI",O[O.EQUALS=61]="EQUALS",O[O.ZERO=48]="ZERO",O[O.NINE=57]="NINE",O[O.LOWER_A=97]="LOWER_A",O[O.LOWER_F=102]="LOWER_F",O[O.LOWER_X=120]="LOWER_X",O[O.LOWER_Z=122]="LOWER_Z",O[O.UPPER_A=65]="UPPER_A",O[O.UPPER_F=70]="UPPER_F",O[O.UPPER_Z=90]="UPPER_Z"})(r||(r={}));const t=32;var i;(function(O){O[O.VALUE_LENGTH=49152]="VALUE_LENGTH",O[O.BRANCH_LENGTH=16256]="BRANCH_LENGTH",O[O.JUMP_TABLE=127]="JUMP_TABLE"})(i||(a.BinTrieFlags=i={}));function o(O){return O>=r.ZERO&&O<=r.NINE}function l(O){return O>=r.UPPER_A&&O<=r.UPPER_F||O>=r.LOWER_A&&O<=r.LOWER_F}function s(O){return O>=r.UPPER_A&&O<=r.UPPER_Z||O>=r.LOWER_A&&O<=r.LOWER_Z||o(O)}function c(O){return O===r.EQUALS||s(O)}var d;(function(O){O[O.EntityStart=0]="EntityStart",O[O.NumericStart=1]="NumericStart",O[O.NumericDecimal=2]="NumericDecimal",O[O.NumericHex=3]="NumericHex",O[O.NamedEntity=4]="NamedEntity"})(d||(d={}));var f;(function(O){O[O.Legacy=0]="Legacy",O[O.Strict=1]="Strict",O[O.Attribute=2]="Attribute"})(f||(a.DecodingMode=f={}));class p{constructor(I,A,P){this.decodeTree=I,this.emitCodePoint=A,this.errors=P,this.state=d.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=f.Strict}startEntity(I){this.decodeMode=I,this.state=d.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1}write(I,A){switch(this.state){case d.EntityStart:return I.charCodeAt(A)===r.NUM?(this.state=d.NumericStart,this.consumed+=1,this.stateNumericStart(I,A+1)):(this.state=d.NamedEntity,this.stateNamedEntity(I,A));case d.NumericStart:return this.stateNumericStart(I,A);case d.NumericDecimal:return this.stateNumericDecimal(I,A);case d.NumericHex:return this.stateNumericHex(I,A);case d.NamedEntity:return this.stateNamedEntity(I,A)}}stateNumericStart(I,A){return A>=I.length?-1:(I.charCodeAt(A)|t)===r.LOWER_X?(this.state=d.NumericHex,this.consumed+=1,this.stateNumericHex(I,A+1)):(this.state=d.NumericDecimal,this.stateNumericDecimal(I,A))}addToNumericResult(I,A,P,C){if(A!==P){const B=P-A;this.result=this.result*Math.pow(C,B)+Number.parseInt(I.substr(A,B),C),this.consumed+=B}}stateNumericHex(I,A){const P=A;for(;A<I.length;){const C=I.charCodeAt(A);if(o(C)||l(C))A+=1;else return this.addToNumericResult(I,P,A,16),this.emitNumericEntity(C,3)}return this.addToNumericResult(I,P,A,16),-1}stateNumericDecimal(I,A){const P=A;for(;A<I.length;){const C=I.charCodeAt(A);if(o(C))A+=1;else return this.addToNumericResult(I,P,A,10),this.emitNumericEntity(C,2)}return this.addToNumericResult(I,P,A,10),-1}emitNumericEntity(I,A){var P;if(this.consumed<=A)return(P=this.errors)===null||P===void 0||P.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(I===r.SEMI)this.consumed+=1;else if(this.decodeMode===f.Strict)return 0;return this.emitCodePoint((0,n.replaceCodePoint)(this.result),this.consumed),this.errors&&(I!==r.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed}stateNamedEntity(I,A){const{decodeTree:P}=this;let C=P[this.treeIndex],B=(C&i.VALUE_LENGTH)>>14;for(;A<I.length;A++,this.excess++){const H=I.charCodeAt(A);if(this.treeIndex=g(P,C,this.treeIndex+Math.max(1,B),H),this.treeIndex<0)return this.result===0||this.decodeMode===f.Attribute&&(B===0||c(H))?0:this.emitNotTerminatedNamedEntity();if(C=P[this.treeIndex],B=(C&i.VALUE_LENGTH)>>14,B!==0){if(H===r.SEMI)return this.emitNamedEntityData(this.treeIndex,B,this.consumed+this.excess);this.decodeMode!==f.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1}emitNotTerminatedNamedEntity(){var I;const{result:A,decodeTree:P}=this,C=(P[A]&i.VALUE_LENGTH)>>14;return this.emitNamedEntityData(A,C,this.consumed),(I=this.errors)===null||I===void 0||I.missingSemicolonAfterCharacterReference(),this.consumed}emitNamedEntityData(I,A,P){const{decodeTree:C}=this;return this.emitCodePoint(A===1?C[I]&~i.VALUE_LENGTH:C[I+1],P),A===3&&this.emitCodePoint(C[I+2],P),P}end(){var I;switch(this.state){case d.NamedEntity:return this.result!==0&&(this.decodeMode!==f.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case d.NumericDecimal:return this.emitNumericEntity(0,2);case d.NumericHex:return this.emitNumericEntity(0,3);case d.NumericStart:return(I=this.errors)===null||I===void 0||I.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case d.EntityStart:return 0}}}a.EntityDecoder=p;function h(O){let I="";const A=new p(O,P=>I+=(0,n.fromCodePoint)(P));return function(C,B){let H=0,V=0;for(;(V=C.indexOf("&",V))>=0;){I+=C.slice(H,V),A.startEntity(B);const Z=A.write(C,V+1);if(Z<0){H=V+A.end();break}H=V+Z,V=Z===0?H+1:H}const G=I+C.slice(H);return I="",G}}function g(O,I,A,P){const C=(I&i.BRANCH_LENGTH)>>7,B=I&i.JUMP_TABLE;if(C===0)return B!==0&&P===B?A:-1;if(B){const G=P-B;return G<0||G>=C?-1:O[A+G]-1}let H=A,V=H+C-1;for(;H<=V;){const G=H+V>>>1,Z=O[G];if(Z<P)H=G+1;else if(Z>P)V=G-1;else return O[G+C]}return-1}const v=h(e.htmlDecodeTree),m=h(u.xmlDecodeTree);function T(O,I=f.Legacy){return v(O,I)}function w(O){return v(O,f.Attribute)}function E(O){return v(O,f.Strict)}function S(O){return m(O,f.Strict)}var N=Zre();Object.defineProperty(a,"htmlDecodeTree",{enumerable:!0,get:function(){return N.htmlDecodeTree}});var j=tne();Object.defineProperty(a,"xmlDecodeTree",{enumerable:!0,get:function(){return j.xmlDecodeTree}});var q=nne();Object.defineProperty(a,"decodeCodePoint",{enumerable:!0,get:function(){return q.decodeCodePoint}}),Object.defineProperty(a,"replaceCodePoint",{enumerable:!0,get:function(){return q.replaceCodePoint}}),Object.defineProperty(a,"fromCodePoint",{enumerable:!0,get:function(){return q.fromCodePoint}})})(nC)),nC}var ine;function bTe(){if(ine)return bg;ine=1,Object.defineProperty(bg,"__esModule",{value:!0}),bg.QuoteType=void 0;const a=mTe();var e;(function(s){s[s.Tab=9]="Tab",s[s.NewLine=10]="NewLine",s[s.FormFeed=12]="FormFeed",s[s.CarriageReturn=13]="CarriageReturn",s[s.Space=32]="Space",s[s.ExclamationMark=33]="ExclamationMark",s[s.Number=35]="Number",s[s.Amp=38]="Amp",s[s.SingleQuote=39]="SingleQuote",s[s.DoubleQuote=34]="DoubleQuote",s[s.Dash=45]="Dash",s[s.Slash=47]="Slash",s[s.Zero=48]="Zero",s[s.Nine=57]="Nine",s[s.Semi=59]="Semi",s[s.Lt=60]="Lt",s[s.Eq=61]="Eq",s[s.Gt=62]="Gt",s[s.Questionmark=63]="Questionmark",s[s.UpperA=65]="UpperA",s[s.LowerA=97]="LowerA",s[s.UpperF=70]="UpperF",s[s.LowerF=102]="LowerF",s[s.UpperZ=90]="UpperZ",s[s.LowerZ=122]="LowerZ",s[s.LowerX=120]="LowerX",s[s.OpeningSquareBracket=91]="OpeningSquareBracket"})(e||(e={}));var u;(function(s){s[s.Text=1]="Text",s[s.BeforeTagName=2]="BeforeTagName",s[s.InTagName=3]="InTagName",s[s.InSelfClosingTag=4]="InSelfClosingTag",s[s.BeforeClosingTagName=5]="BeforeClosingTagName",s[s.InClosingTagName=6]="InClosingTagName",s[s.AfterClosingTagName=7]="AfterClosingTagName",s[s.BeforeAttributeName=8]="BeforeAttributeName",s[s.InAttributeName=9]="InAttributeName",s[s.AfterAttributeName=10]="AfterAttributeName",s[s.BeforeAttributeValue=11]="BeforeAttributeValue",s[s.InAttributeValueDq=12]="InAttributeValueDq",s[s.InAttributeValueSq=13]="InAttributeValueSq",s[s.InAttributeValueNq=14]="InAttributeValueNq",s[s.BeforeDeclaration=15]="BeforeDeclaration",s[s.InDeclaration=16]="InDeclaration",s[s.InProcessingInstruction=17]="InProcessingInstruction",s[s.BeforeComment=18]="BeforeComment",s[s.CDATASequence=19]="CDATASequence",s[s.InSpecialComment=20]="InSpecialComment",s[s.InCommentLike=21]="InCommentLike",s[s.BeforeSpecialS=22]="BeforeSpecialS",s[s.BeforeSpecialT=23]="BeforeSpecialT",s[s.SpecialStartSequence=24]="SpecialStartSequence",s[s.InSpecialTag=25]="InSpecialTag",s[s.InEntity=26]="InEntity"})(u||(u={}));function n(s){return s===e.Space||s===e.NewLine||s===e.Tab||s===e.FormFeed||s===e.CarriageReturn}function r(s){return s===e.Slash||s===e.Gt||n(s)}function t(s){return s>=e.LowerA&&s<=e.LowerZ||s>=e.UpperA&&s<=e.UpperZ}var i;(function(s){s[s.NoValue=0]="NoValue",s[s.Unquoted=1]="Unquoted",s[s.Single=2]="Single",s[s.Double=3]="Double"})(i||(bg.QuoteType=i={}));const o={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101]),TextareaEnd:new Uint8Array([60,47,116,101,120,116,97,114,101,97]),XmpEnd:new Uint8Array([60,47,120,109,112])};class l{constructor({xmlMode:c=!1,decodeEntities:d=!0},f){this.cbs=f,this.state=u.Text,this.buffer="",this.sectionStart=0,this.index=0,this.entityStart=0,this.baseState=u.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.xmlMode=c,this.decodeEntities=d,this.entityDecoder=new a.EntityDecoder(c?a.xmlDecodeTree:a.htmlDecodeTree,(p,h)=>this.emitCodePoint(p,h))}reset(){this.state=u.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=u.Text,this.currentSequence=void 0,this.running=!0,this.offset=0}write(c){this.offset+=this.buffer.length,this.buffer=c,this.parse()}end(){this.running&&this.finish()}pause(){this.running=!1}resume(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()}stateText(c){c===e.Lt||!this.decodeEntities&&this.fastForwardTo(e.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=u.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&c===e.Amp&&this.startEntity()}stateSpecialStartSequence(c){const d=this.sequenceIndex===this.currentSequence.length;if(!(d?r(c):(c|32)===this.currentSequence[this.sequenceIndex]))this.isSpecial=!1;else if(!d){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=u.InTagName,this.stateInTagName(c)}stateInSpecialTag(c){if(this.sequenceIndex===this.currentSequence.length){if(c===e.Gt||n(c)){const d=this.index-this.currentSequence.length;if(this.sectionStart<d){const f=this.index;this.index=d,this.cbs.ontext(this.sectionStart,d),this.index=f}this.isSpecial=!1,this.sectionStart=d+2,this.stateInClosingTagName(c);return}this.sequenceIndex=0}(c|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===o.TitleEnd?this.decodeEntities&&c===e.Amp&&this.startEntity():this.fastForwardTo(e.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(c===e.Lt)}stateCDATASequence(c){c===o.Cdata[this.sequenceIndex]?++this.sequenceIndex===o.Cdata.length&&(this.state=u.InCommentLike,this.currentSequence=o.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=u.InDeclaration,this.stateInDeclaration(c))}fastForwardTo(c){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===c)return!0;return this.index=this.buffer.length+this.offset-1,!1}stateInCommentLike(c){c===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=u.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):c!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)}isTagStartChar(c){return this.xmlMode?!r(c):t(c)}startSpecial(c,d){this.isSpecial=!0,this.currentSequence=c,this.sequenceIndex=d,this.state=u.SpecialStartSequence}stateBeforeTagName(c){if(c===e.ExclamationMark)this.state=u.BeforeDeclaration,this.sectionStart=this.index+1;else if(c===e.Questionmark)this.state=u.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(c)){const d=c|32;this.sectionStart=this.index,this.xmlMode?this.state=u.InTagName:d===o.ScriptEnd[2]?this.state=u.BeforeSpecialS:d===o.TitleEnd[2]||d===o.XmpEnd[2]?this.state=u.BeforeSpecialT:this.state=u.InTagName}else c===e.Slash?this.state=u.BeforeClosingTagName:(this.state=u.Text,this.stateText(c))}stateInTagName(c){r(c)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(c))}stateBeforeClosingTagName(c){n(c)||(c===e.Gt?this.state=u.Text:(this.state=this.isTagStartChar(c)?u.InClosingTagName:u.InSpecialComment,this.sectionStart=this.index))}stateInClosingTagName(c){(c===e.Gt||n(c))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=u.AfterClosingTagName,this.stateAfterClosingTagName(c))}stateAfterClosingTagName(c){(c===e.Gt||this.fastForwardTo(e.Gt))&&(this.state=u.Text,this.sectionStart=this.index+1)}stateBeforeAttributeName(c){c===e.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=u.InSpecialTag,this.sequenceIndex=0):this.state=u.Text,this.sectionStart=this.index+1):c===e.Slash?this.state=u.InSelfClosingTag:n(c)||(this.state=u.InAttributeName,this.sectionStart=this.index)}stateInSelfClosingTag(c){c===e.Gt?(this.cbs.onselfclosingtag(this.index),this.state=u.Text,this.sectionStart=this.index+1,this.isSpecial=!1):n(c)||(this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(c))}stateInAttributeName(c){(c===e.Eq||r(c))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=this.index,this.state=u.AfterAttributeName,this.stateAfterAttributeName(c))}stateAfterAttributeName(c){c===e.Eq?this.state=u.BeforeAttributeValue:c===e.Slash||c===e.Gt?(this.cbs.onattribend(i.NoValue,this.sectionStart),this.sectionStart=-1,this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(c)):n(c)||(this.cbs.onattribend(i.NoValue,this.sectionStart),this.state=u.InAttributeName,this.sectionStart=this.index)}stateBeforeAttributeValue(c){c===e.DoubleQuote?(this.state=u.InAttributeValueDq,this.sectionStart=this.index+1):c===e.SingleQuote?(this.state=u.InAttributeValueSq,this.sectionStart=this.index+1):n(c)||(this.sectionStart=this.index,this.state=u.InAttributeValueNq,this.stateInAttributeValueNoQuotes(c))}handleInAttributeValue(c,d){c===d||!this.decodeEntities&&this.fastForwardTo(d)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(d===e.DoubleQuote?i.Double:i.Single,this.index+1),this.state=u.BeforeAttributeName):this.decodeEntities&&c===e.Amp&&this.startEntity()}stateInAttributeValueDoubleQuotes(c){this.handleInAttributeValue(c,e.DoubleQuote)}stateInAttributeValueSingleQuotes(c){this.handleInAttributeValue(c,e.SingleQuote)}stateInAttributeValueNoQuotes(c){n(c)||c===e.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(i.Unquoted,this.index),this.state=u.BeforeAttributeName,this.stateBeforeAttributeName(c)):this.decodeEntities&&c===e.Amp&&this.startEntity()}stateBeforeDeclaration(c){c===e.OpeningSquareBracket?(this.state=u.CDATASequence,this.sequenceIndex=0):this.state=c===e.Dash?u.BeforeComment:u.InDeclaration}stateInDeclaration(c){(c===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=u.Text,this.sectionStart=this.index+1)}stateInProcessingInstruction(c){(c===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=u.Text,this.sectionStart=this.index+1)}stateBeforeComment(c){c===e.Dash?(this.state=u.InCommentLike,this.currentSequence=o.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=u.InDeclaration}stateInSpecialComment(c){(c===e.Gt||this.fastForwardTo(e.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=u.Text,this.sectionStart=this.index+1)}stateBeforeSpecialS(c){const d=c|32;d===o.ScriptEnd[3]?this.startSpecial(o.ScriptEnd,4):d===o.StyleEnd[3]?this.startSpecial(o.StyleEnd,4):(this.state=u.InTagName,this.stateInTagName(c))}stateBeforeSpecialT(c){switch(c|32){case o.TitleEnd[3]:{this.startSpecial(o.TitleEnd,4);break}case o.TextareaEnd[3]:{this.startSpecial(o.TextareaEnd,4);break}case o.XmpEnd[3]:{this.startSpecial(o.XmpEnd,4);break}default:this.state=u.InTagName,this.stateInTagName(c)}}startEntity(){this.baseState=this.state,this.state=u.InEntity,this.entityStart=this.index,this.entityDecoder.startEntity(this.xmlMode?a.DecodingMode.Strict:this.baseState===u.Text||this.baseState===u.InSpecialTag?a.DecodingMode.Legacy:a.DecodingMode.Attribute)}stateInEntity(){const c=this.entityDecoder.write(this.buffer,this.index-this.offset);c>=0?(this.state=this.baseState,c===0&&(this.index=this.entityStart)):this.index=this.offset+this.buffer.length-1}cleanup(){this.running&&this.sectionStart!==this.index&&(this.state===u.Text||this.state===u.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===u.InAttributeValueDq||this.state===u.InAttributeValueSq||this.state===u.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))}shouldContinue(){return this.index<this.buffer.length+this.offset&&this.running}parse(){for(;this.shouldContinue();){const c=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case u.Text:{this.stateText(c);break}case u.SpecialStartSequence:{this.stateSpecialStartSequence(c);break}case u.InSpecialTag:{this.stateInSpecialTag(c);break}case u.CDATASequence:{this.stateCDATASequence(c);break}case u.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(c);break}case u.InAttributeName:{this.stateInAttributeName(c);break}case u.InCommentLike:{this.stateInCommentLike(c);break}case u.InSpecialComment:{this.stateInSpecialComment(c);break}case u.BeforeAttributeName:{this.stateBeforeAttributeName(c);break}case u.InTagName:{this.stateInTagName(c);break}case u.InClosingTagName:{this.stateInClosingTagName(c);break}case u.BeforeTagName:{this.stateBeforeTagName(c);break}case u.AfterAttributeName:{this.stateAfterAttributeName(c);break}case u.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(c);break}case u.BeforeAttributeValue:{this.stateBeforeAttributeValue(c);break}case u.BeforeClosingTagName:{this.stateBeforeClosingTagName(c);break}case u.AfterClosingTagName:{this.stateAfterClosingTagName(c);break}case u.BeforeSpecialS:{this.stateBeforeSpecialS(c);break}case u.BeforeSpecialT:{this.stateBeforeSpecialT(c);break}case u.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(c);break}case u.InSelfClosingTag:{this.stateInSelfClosingTag(c);break}case u.InDeclaration:{this.stateInDeclaration(c);break}case u.BeforeDeclaration:{this.stateBeforeDeclaration(c);break}case u.BeforeComment:{this.stateBeforeComment(c);break}case u.InProcessingInstruction:{this.stateInProcessingInstruction(c);break}case u.InEntity:{this.stateInEntity();break}}this.index++}this.cleanup()}finish(){this.state===u.InEntity&&(this.entityDecoder.end(),this.state=this.baseState),this.handleTrailingData(),this.cbs.onend()}handleTrailingData(){const c=this.buffer.length+this.offset;this.sectionStart>=c||(this.state===u.InCommentLike?this.currentSequence===o.CdataEnd?this.cbs.oncdata(this.sectionStart,c,0):this.cbs.oncomment(this.sectionStart,c,0):this.state===u.InTagName||this.state===u.BeforeAttributeName||this.state===u.BeforeAttributeValue||this.state===u.AfterAttributeName||this.state===u.InAttributeName||this.state===u.InAttributeValueSq||this.state===u.InAttributeValueDq||this.state===u.InAttributeValueNq||this.state===u.InClosingTagName||this.cbs.ontext(this.sectionStart,c))}emitCodePoint(c,d){this.baseState!==u.Text&&this.baseState!==u.InSpecialTag?(this.sectionStart<this.entityStart&&this.cbs.onattribdata(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+d,this.index=this.sectionStart-1,this.cbs.onattribentity(c)):(this.sectionStart<this.entityStart&&this.cbs.ontext(this.sectionStart,this.entityStart),this.sectionStart=this.entityStart+d,this.index=this.sectionStart-1,this.cbs.ontextentity(c,this.sectionStart))}}return bg.default=l,bg}var une;function one(){if(une)return Wu;une=1;var a=Wu&&Wu.__createBinding||(Object.create?(function(v,m,T,w){w===void 0&&(w=T);var E=Object.getOwnPropertyDescriptor(m,T);(!E||("get"in E?!m.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return m[T]}}),Object.defineProperty(v,w,E)}):(function(v,m,T,w){w===void 0&&(w=T),v[w]=m[T]})),e=Wu&&Wu.__setModuleDefault||(Object.create?(function(v,m){Object.defineProperty(v,"default",{enumerable:!0,value:m})}):function(v,m){v.default=m}),u=Wu&&Wu.__importStar||(function(){var v=function(m){return v=Object.getOwnPropertyNames||function(T){var w=[];for(var E in T)Object.prototype.hasOwnProperty.call(T,E)&&(w[w.length]=E);return w},v(m)};return function(m){if(m&&m.__esModule)return m;var T={};if(m!=null)for(var w=v(m),E=0;E<w.length;E++)w[E]!=="default"&&a(T,m,w[E]);return e(T,m),T}})();Object.defineProperty(Wu,"__esModule",{value:!0}),Wu.Parser=void 0;const n=u(bTe()),r=mTe(),t=new Set(["input","option","optgroup","select","button","datalist","textarea"]),i=new Set(["p"]),o=new Set(["thead","tbody"]),l=new Set(["dd","dt"]),s=new Set(["rt","rp"]),c=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",i],["h1",i],["h2",i],["h3",i],["h4",i],["h5",i],["h6",i],["select",t],["input",t],["output",t],["button",t],["datalist",t],["textarea",t],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",l],["dt",l],["address",i],["article",i],["aside",i],["blockquote",i],["details",i],["div",i],["dl",i],["fieldset",i],["figcaption",i],["figure",i],["footer",i],["form",i],["header",i],["hr",i],["main",i],["nav",i],["ol",i],["pre",i],["section",i],["table",i],["ul",i],["rt",s],["rp",s],["tbody",o],["tfoot",o]]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),h=/\s|\//;class g{constructor(m,T={}){var w,E,S,N,j,q;this.options=T,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=m??{},this.htmlMode=!this.options.xmlMode,this.lowerCaseTagNames=(w=T.lowerCaseTags)!==null&&w!==void 0?w:this.htmlMode,this.lowerCaseAttributeNames=(E=T.lowerCaseAttributeNames)!==null&&E!==void 0?E:this.htmlMode,this.recognizeSelfClosing=(S=T.recognizeSelfClosing)!==null&&S!==void 0?S:!this.htmlMode,this.tokenizer=new((N=T.Tokenizer)!==null&&N!==void 0?N:n.default)(this.options,this),this.foreignContext=[!this.htmlMode],(q=(j=this.cbs).onparserinit)===null||q===void 0||q.call(j,this)}ontext(m,T){var w,E;const S=this.getSlice(m,T);this.endIndex=T-1,(E=(w=this.cbs).ontext)===null||E===void 0||E.call(w,S),this.startIndex=T}ontextentity(m,T){var w,E;this.endIndex=T-1,(E=(w=this.cbs).ontext)===null||E===void 0||E.call(w,(0,r.fromCodePoint)(m)),this.startIndex=T}isVoidElement(m){return this.htmlMode&&d.has(m)}onopentagname(m,T){this.endIndex=T;let w=this.getSlice(m,T);this.lowerCaseTagNames&&(w=w.toLowerCase()),this.emitOpenTag(w)}emitOpenTag(m){var T,w,E,S;this.openTagStart=this.startIndex,this.tagname=m;const N=this.htmlMode&&c.get(m);if(N)for(;this.stack.length>0&&N.has(this.stack[0]);){const j=this.stack.shift();(w=(T=this.cbs).onclosetag)===null||w===void 0||w.call(T,j,!0)}this.isVoidElement(m)||(this.stack.unshift(m),this.htmlMode&&(f.has(m)?this.foreignContext.unshift(!0):p.has(m)&&this.foreignContext.unshift(!1))),(S=(E=this.cbs).onopentagname)===null||S===void 0||S.call(E,m),this.cbs.onopentag&&(this.attribs={})}endOpenTag(m){var T,w;this.startIndex=this.openTagStart,this.attribs&&((w=(T=this.cbs).onopentag)===null||w===void 0||w.call(T,this.tagname,this.attribs,m),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""}onopentagend(m){this.endIndex=m,this.endOpenTag(!1),this.startIndex=m+1}onclosetag(m,T){var w,E,S,N,j,q,O,I;this.endIndex=T;let A=this.getSlice(m,T);if(this.lowerCaseTagNames&&(A=A.toLowerCase()),this.htmlMode&&(f.has(A)||p.has(A))&&this.foreignContext.shift(),this.isVoidElement(A))this.htmlMode&&A==="br"&&((N=(S=this.cbs).onopentagname)===null||N===void 0||N.call(S,"br"),(q=(j=this.cbs).onopentag)===null||q===void 0||q.call(j,"br",{},!0),(I=(O=this.cbs).onclosetag)===null||I===void 0||I.call(O,"br",!1));else{const P=this.stack.indexOf(A);if(P!==-1)for(let C=0;C<=P;C++){const B=this.stack.shift();(E=(w=this.cbs).onclosetag)===null||E===void 0||E.call(w,B,C!==P)}else this.htmlMode&&A==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=T+1}onselfclosingtag(m){this.endIndex=m,this.recognizeSelfClosing||this.foreignContext[0]?(this.closeCurrentTag(!1),this.startIndex=m+1):this.onopentagend(m)}closeCurrentTag(m){var T,w;const E=this.tagname;this.endOpenTag(m),this.stack[0]===E&&((w=(T=this.cbs).onclosetag)===null||w===void 0||w.call(T,E,!m),this.stack.shift())}onattribname(m,T){this.startIndex=m;const w=this.getSlice(m,T);this.attribname=this.lowerCaseAttributeNames?w.toLowerCase():w}onattribdata(m,T){this.attribvalue+=this.getSlice(m,T)}onattribentity(m){this.attribvalue+=(0,r.fromCodePoint)(m)}onattribend(m,T){var w,E;this.endIndex=T,(E=(w=this.cbs).onattribute)===null||E===void 0||E.call(w,this.attribname,this.attribvalue,m===n.QuoteType.Double?'"':m===n.QuoteType.Single?"'":m===n.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""}getInstructionName(m){const T=m.search(h);let w=T<0?m:m.substr(0,T);return this.lowerCaseTagNames&&(w=w.toLowerCase()),w}ondeclaration(m,T){this.endIndex=T;const w=this.getSlice(m,T);if(this.cbs.onprocessinginstruction){const E=this.getInstructionName(w);this.cbs.onprocessinginstruction(`!${E}`,`!${w}`)}this.startIndex=T+1}onprocessinginstruction(m,T){this.endIndex=T;const w=this.getSlice(m,T);if(this.cbs.onprocessinginstruction){const E=this.getInstructionName(w);this.cbs.onprocessinginstruction(`?${E}`,`?${w}`)}this.startIndex=T+1}oncomment(m,T,w){var E,S,N,j;this.endIndex=T,(S=(E=this.cbs).oncomment)===null||S===void 0||S.call(E,this.getSlice(m,T-w)),(j=(N=this.cbs).oncommentend)===null||j===void 0||j.call(N),this.startIndex=T+1}oncdata(m,T,w){var E,S,N,j,q,O,I,A,P,C;this.endIndex=T;const B=this.getSlice(m,T-w);!this.htmlMode||this.options.recognizeCDATA?((S=(E=this.cbs).oncdatastart)===null||S===void 0||S.call(E),(j=(N=this.cbs).ontext)===null||j===void 0||j.call(N,B),(O=(q=this.cbs).oncdataend)===null||O===void 0||O.call(q)):((A=(I=this.cbs).oncomment)===null||A===void 0||A.call(I,`[CDATA[${B}]]`),(C=(P=this.cbs).oncommentend)===null||C===void 0||C.call(P)),this.startIndex=T+1}onend(){var m,T;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(let w=0;w<this.stack.length;w++)this.cbs.onclosetag(this.stack[w],!0)}(T=(m=this.cbs).onend)===null||T===void 0||T.call(m)}reset(){var m,T,w,E;(T=(m=this.cbs).onreset)===null||T===void 0||T.call(m),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(E=(w=this.cbs).onparserinit)===null||E===void 0||E.call(w,this),this.buffers.length=0,this.foreignContext.length=0,this.foreignContext.unshift(!this.htmlMode),this.bufferOffset=0,this.writeIndex=0,this.ended=!1}parseComplete(m){this.reset(),this.end(m)}getSlice(m,T){for(;m-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();let w=this.buffers[0].slice(m-this.bufferOffset,T-this.bufferOffset);for(;T-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),w+=this.buffers[0].slice(0,T-this.bufferOffset);return w}shiftBuffer(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()}write(m){var T,w;if(this.ended){(w=(T=this.cbs).onerror)===null||w===void 0||w.call(T,new Error(".write() after done!"));return}this.buffers.push(m),this.tokenizer.running&&(this.tokenizer.write(m),this.writeIndex++)}end(m){var T,w;if(this.ended){(w=(T=this.cbs).onerror)===null||w===void 0||w.call(T,new Error(".end() after done!"));return}m&&this.write(m),this.ended=!0,this.tokenizer.end()}pause(){this.tokenizer.pause()}resume(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()}parseChunk(m){this.write(m)}done(m){this.end(m)}}return Wu.Parser=g,Wu}var sne;function RFe(){return sne||(sne=1,(function(a){var e=Ju&&Ju.__createBinding||(Object.create?(function(T,w,E,S){S===void 0&&(S=E);var N=Object.getOwnPropertyDescriptor(w,E);(!N||("get"in N?!w.__esModule:N.writable||N.configurable))&&(N={enumerable:!0,get:function(){return w[E]}}),Object.defineProperty(T,S,N)}):(function(T,w,E,S){S===void 0&&(S=E),T[S]=w[E]})),u=Ju&&Ju.__setModuleDefault||(Object.create?(function(T,w){Object.defineProperty(T,"default",{enumerable:!0,value:w})}):function(T,w){T.default=w}),n=Ju&&Ju.__importStar||(function(){var T=function(w){return T=Object.getOwnPropertyNames||function(E){var S=[];for(var N in E)Object.prototype.hasOwnProperty.call(E,N)&&(S[S.length]=N);return S},T(w)};return function(w){if(w&&w.__esModule)return w;var E={};if(w!=null)for(var S=T(w),N=0;N<S.length;N++)S[N]!=="default"&&e(E,w,S[N]);return u(E,w),E}})(),r=Ju&&Ju.__importDefault||function(T){return T&&T.__esModule?T:{default:T}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomUtils=a.getFeed=a.ElementType=a.QuoteType=a.Tokenizer=a.DefaultHandler=a.DomHandler=a.Parser=void 0,a.parseDocument=s,a.parseDOM=c,a.createDocumentStream=d,a.createDomStream=f,a.parseFeed=m;const t=one();var i=one();Object.defineProperty(a,"Parser",{enumerable:!0,get:function(){return i.Parser}});const o=Su();var l=Su();Object.defineProperty(a,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(a,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}});function s(T,w){const E=new o.DomHandler(void 0,w);return new t.Parser(E,w).end(T),E.root}function c(T,w){return s(T,w).children}function d(T,w,E){const S=new o.DomHandler(N=>T(N,S.root),w,E);return new t.Parser(S,w)}function f(T,w,E){const S=new o.DomHandler(T,w,E);return new t.Parser(S,w)}var p=bTe();Object.defineProperty(a,"Tokenizer",{enumerable:!0,get:function(){return r(p).default}}),Object.defineProperty(a,"QuoteType",{enumerable:!0,get:function(){return p.QuoteType}}),a.ElementType=n(Sb());const h=Ws();var g=Ws();Object.defineProperty(a,"getFeed",{enumerable:!0,get:function(){return g.getFeed}});const v={xmlMode:!0};function m(T,w=v){return(0,h.getFeed)(c(T,w))}a.DomUtils=n(Ws())})(Ju)),Ju}var cne;function NFe(){if(cne)return GT;cne=1,Object.defineProperty(GT,"__esModule",{value:!0}),GT.ActorRdfParseHtml=void 0;const a=E1(),e=RFe(),u=Nr();class n extends a.ActorRdfParseFixedMediaTypes{constructor(t){super(t)}async runHandle(t,i,o){const l=new u.Readable({objectMode:!0});l._read=()=>{};let s=0,c=1;function d(h){l.emit("error",h)}function f(){--c===0&&l.push(null)}const p={baseIRI:t.metadata?.baseIRI??"",context:o,emit:h=>{s--,l.push(h)},end:f,error:d,headers:t.headers};try{const h=await Promise.all(this.busRdfParseHtml.publish(p));c+=h.length;const g=[];for(const T of h){const{htmlParseListener:w}=await T.actor.run(p,void 0);g.push(w)}const v=new e.Parser({onclosetag(){try{for(const T of g)T.onTagClose()}catch(T){d(T)}},onend(){try{for(const T of g)T.onEnd()}catch(T){d(T)}f()},onopentag(T,w){try{for(const E of g)E.onTagOpen(T,w)}catch(E){d(E)}},ontext(T){try{for(const w of g)w.onText(T)}catch(w){d(w)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:!1}),m=l._read=T=>{for(s=Math.max(T,s);s>0;){const w=t.data.read();if(w===null){t.data.once("readable",()=>m(0));return}v.write(w.toString())}};t.data.on("error",d).on("end",()=>v.end())}catch(h){setTimeout(()=>{l.emit("error",h)})}return{data:l}}}return GT.ActorRdfParseHtml=n,GT}var lne;function JB(){return lne||(lne=1,(function(a){var e=pp&&pp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=pp&&pp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(NFe(),a)})(pp)),pp}var hp={},KT={},yp={},JT={},dne;function IFe(){if(dne)return JT;dne=1,Object.defineProperty(JT,"__esModule",{value:!0}),JT.ActorRdfParseHtml=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return JT.ActorRdfParseHtml=e,JT}var fne;function WB(){return fne||(fne=1,(function(a){var e=yp&&yp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=yp&&yp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(IFe(),a)})(yp)),yp}var mp={},iC={},pne;function DFe(){return pne||(pne=1,Object.defineProperty(iC,"__esModule",{value:!0})),iC}var WT={},hne;function gTe(){if(hne)return WT;hne=1,Object.defineProperty(WT,"__esModule",{value:!0}),WT.ItemPropertyHandlerContent=void 0;let a=class{canHandle(u,n){return"content"in n}getObject(u,n,r){return n.createLiteral(u.content,r)}};return WT.ItemPropertyHandlerContent=a,WT}var YT={},ZT={},yne;function vP(){if(yne)return ZT;yne=1,Object.defineProperty(ZT,"__esModule",{value:!0}),ZT.Util=void 0;const a=Rr(),e=Xn();class u{constructor(r,t){this.dataFactory=r||new a.DataFactory,this.baseIRI=t||""}static isValidIri(r){return u.IRI_REGEX.test(r)}createVocabIris(r,t,i){return r.split(/\s+/u).filter(o=>!!o).map(o=>{if(!u.isValidIri(o)){if(!i)return;o=`${t.vocab||`${this.baseIRI}#`}${o}`}return this.dataFactory.namedNode(o)}).filter(o=>!!o)}getVocabularyExpansionType(r,t,i){const o=r.split(/\s+/u);if(o.includes("subPropertyOf")||o.includes("equivalentProperty"))return[this.dataFactory.namedNode(`${u.RDF}type`)];if(t.vocab&&t.vocab in i&&i[t.vocab].properties){let l=[];for(const[s,c]of Object.entries(i[t.vocab].properties))o.includes(s)&&(l=[...Object.values(c).map(d=>this.dataFactory.namedNode(d))]);return l}return[]}createSubject(r){if(!u.isValidIri(r))try{r=(0,e.resolve)(r,this.baseIRI)}catch{return}return this.dataFactory.namedNode(r)}createLiteral(r,t){return this.dataFactory.literal(r,t.language)}deriveVocab(r,t){let i;for(const o in t)if(r.startsWith(o)){i=o,i.endsWith("/")||(i+="#");break}if(!i){const o=r.indexOf("#");o>0?i=r.slice(0,o+1):i=(0,e.resolve)(".",r)}return i}}return ZT.Util=u,u.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",u.XSD="http://www.w3.org/2001/XMLSchema#",u.RDFA="http://www.w3.org/ns/rdfa#",u.IRI_REGEX=/^([A-Za-z][\d+-.A-Za-z]*|_):[^ "<>[\\\]`{|}]*$/u,ZT}var mne;function vTe(){if(mne)return YT;mne=1,Object.defineProperty(YT,"__esModule",{value:!0}),YT.ItemPropertyHandlerNumber=void 0;const a=vP();let e=class{constructor(n,r){this.tagName=n,this.attributeName=r}canHandle(n,r){return this.tagName===n&&this.attributeName in r}getObject(n,r,t){const i=n[this.attributeName];let o;return!Number.isNaN(Number.parseInt(i,10))&&!i.includes(".")?o=`${a.Util.XSD}integer`:Number.isNaN(Number.parseFloat(i))||(o=`${a.Util.XSD}double`),r.dataFactory.literal(i,o&&r.dataFactory.namedNode(o))}};return YT.ItemPropertyHandlerNumber=e,YT}var e3={},bne;function TTe(){if(bne)return e3;bne=1,Object.defineProperty(e3,"__esModule",{value:!0}),e3.ItemPropertyHandlerTime=void 0;const a=vP();let e=class _Te{canHandle(n,r){return n==="time"&&"datetime"in r}getObject(n,r,t){const i=n.datetime;let o;for(const l of _Te.TIME_REGEXES)if(l.regex.test(i)){o=r.dataFactory.namedNode(a.Util.XSD+l.type);break}return r.dataFactory.literal(i,o)}};return e3.ItemPropertyHandlerTime=e,e.TIME_REGEXES=[{regex:/^-?P(\d+Y)?(\d+M)?(\d+D)?(T(\d+H)?(\d+M)?(\d+(\.\d)?S)?)?$/u,type:"duration"},{regex:/^\d+-\d\d-\d\dT\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"dateTime"},{regex:/^\d+-\d\d-\d\dZ?$/u,type:"date"},{regex:/^\d\d:\d\d:\d\d((Z?)|([+-]\d\d:\d\d))$/u,type:"time"},{regex:/^\d+-\d\d$/u,type:"gYearMonth"},{regex:/^\d+$/u,type:"gYear"}],e3}var t3={},gne;function wTe(){if(gne)return t3;gne=1,Object.defineProperty(t3,"__esModule",{value:!0}),t3.ItemPropertyHandlerUrl=void 0;const a=Xn();let e=class{constructor(n,r){this.tagName=n,this.attributeName=r}canHandle(n,r){return this.tagName===n&&this.attributeName in r}getObject(n,r,t){return r.dataFactory.namedNode((0,a.resolve)(n[this.attributeName],r.baseIRI))}};return t3.ItemPropertyHandlerUrl=e,t3}var uC={},vne;function FFe(){return vne||(vne=1,Object.defineProperty(uC,"__esModule",{value:!0})),uC}var oC={},_ne;function PFe(){return _ne||(_ne=1,Object.defineProperty(oC,"__esModule",{value:!0})),oC}var sC={},Tne;function jFe(){return Tne||(Tne=1,Object.defineProperty(sC,"__esModule",{value:!0})),sC}var r3={},Yu={},Zu={},cC={},eo={},uD={},wne;function MFe(){return wne||(wne=1,Object.defineProperty(uD,"__esModule",{value:!0}),uD.default=new Uint16Array('<\0\0\0\0\0\0EMabcfglmnoprstu\\bfmsligP&cutereve;iyx}rc;r;ravepha;acr;d;gpon;f;plyFunction;ingcsr;ign;ildemlaceforsucrkslash;;ed;y;crtause;noullis;a;r;pf;eve;cmpeq;HOacdefhilorsucy;PYcpyute;;italDifferentialD;leys;aeioron;dilrc;nint;ot;dnilla;terDot;i;rcleDMPTot;inus;lus;imes;ocskwiseContourIntegral;eCurlyDQoubleQuote;uote;lnpuon;e;gitruent;nt;ourIntegral;fr;oduct;nterClockwiseContourIntegral;oss;cr;p;Cap;DJSZacefios;otrahd;cy;cy;cy;grsger;r;hv;ayron;;l;ta;r;afcmriticalADGTcute;o;bleAcute;rave;ilde;ond;ferentialD;\0\0\0\0f;;DEot;qual;bleCDLRUVontourIntegrao\0\0nArrow;eoftARTrrow;ightArrow;engLReftARrrow;ightArrow;ightArrow;ightATrrow;ee;p\0\0rrow;ownArrow;erticalBar;nABLRTarrow;BUar;pArrow;reve;eft\0\0ightVector;eeVector;ector;Bar;ight\0eeVector;ector;Bar;ee;Arrow;ctr;rok;NTacdfglmopqstuxG;Hcuteaiyron;rc;ot;r;raveement;apcr;ty\0\0mallSquare;erySmallSquare;gpon;f;silon;uail;Tilde;librium;cir;m;a;mlipsts;onentialE;cfiosy;r;lled\0\0mallSquare;erySmallSquare;\0\0\0f;All;riertrf;cJTabcdfgorstcy;>mma;d;reve;eiydil;rc;;ot;r;;pf;eaterEFGLSTqual;Less;ullEqual;reater;ess;lantEqual;ilde;cr;;AacfiosuRDcy;ctek;;irc;r;lbertSpace;\0f;izontalLine;ctrok;mpownHumqual;EJOacdfgmnostucy;lig;cy;cuteiyrc;ot;r;rave;apcgr;inaryI;lie\0;egrral;section;isibleCTomma;imes;gpton;f;a;cr;ilde;\0cy;lcfosuiyrc;;r;pf;\0r;rcy;kcy;HJacfoscy;cy;ppa;eydil;;r;pf;cr;JTaceflmostcy;<cmnprute;bda;g;lacetrf;r;aeyron;dil;;fstACDFRTUVarnrgleBracket;row;BRar;ightArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ightAVrrow;ector;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;ightsEFGLSTqualGreater;ullEqual;reater;ess;lantEqual;ilde;r;;eftarrow;idot;npwgLRlreftARrrow;ightArrow;ightArrow;eftarightightf;erLReftArrow;ightArrow;cht;rok;;acefiosup;y;dliumSpace;lintrf;r;nusPlus;pf;c;Jacefostucy;cute;aeyron;dil;;gswativeMTVediumSpace;hicneryThitedGLreaterGreateessLesLine;r;Bnptreak;BreakingSpace;f;;CDEGHLNPRSTVoungruent;pCap;oubleVerticalBar;lqxement;ual;Tilde;ists;reater;EFGLSTqual;ullEqual;reater;ess;lantEqual;ilde;umpownHump;qual;efstTriangle;BEar;qual;s;EGLSTqual;reater;ess;lantEqual;ilde;estedGLreaterGreater;essLess;recedes;ESqual;lantEqual;eiverseElement;ghtTriangle;BEar;qual;quuareSubpset;Equal;erset;Equal;bcpset;Equal;ceeds;ESTqual;lantEqual;ilde;erset;Equal;ilde;EFTqual;ullEqual;ilde;erticalBar;cr;ilde;Eacdfgmoprstuvlig;cuteiyrc;blac;r;raveaeicr;ga;cron;pf;enCurlyDQoubleQuote;uote;;clr;ashidees;mlerBParr;acek;et;arenthesis;acfhilorsrtialD;y;r;i;;usMinus;ipncareplanf;;eiocedes;ESTqual;lantEqual;ilde;me;dpuct;ortion;al;cir;;UfosOT"r;pf;cr;BEacefhiorsuarr;Gcnrute;g;r;tl;aeyron;dil;;;verseEUlqement;uilibrium;pEquilibrium;ro;ghtACDFTUVanrgleBracket;row;BLar;eftArrow;eiling;o\0bleBracket;n\0eeVector;ector;Bar;loor;ere;AVrrow;ector;iangle;BEar;qual;pDTVownVector;eeVector;ector;Bar;ector;Bar;puf;ndImplies;ightarrow;chr;;leDelayed;HOacfhimoqstuCcHcy;y;FTcy;cute;;aeiyron;dil;rc;;r;ortDLRUownArroweftArrowightArrowpArrow;gma;allCircle;pf;\0\0t;are;ISUntersection;ubpset;Equal;erset;Equal;nion;cr;ar;bcmp;set;Equal;cheeds;ESTqual;lantEqual;ilde;Th;;esrset;Equal;etHRSacfhiorsORNADE;Hccy;y;bu;;aeyron;dil;;r;ei\0efore;a;cnkSpace;Space;lde;EFTqual;ullEqual;ilde;pf;ipleDot;ctr;rok;\0\0\0\0\0\0\0cruter;ocir;r\0y;ve;iyrc;blac;r;raveacr;dierBParr;acek;et;arenthesis;on;Plus;gpon;f;ADETadpsrrow;BDar;ownArrow;ownArrow;quilibrium;ee;Arrow;ownerLReftArrow;ightArrow;i;lon;ing;cr;ilde;mlDbcdefosvash;ar;y;ash;l;er;btyar;;icalBLSTar;ine;eparator;ilde;ThinSpace;r;pf;cr;dash;cefosirc;dge;r;pf;cr;fiosr;;pf;cr;AIUacfosucy;cy;cy;cuteiyrc;;r;pf;cr;ml;Hacdefoscy;cute;ayron;;ot;\0oWidta;r;pf;cr;\0\0\0\0\0\0\0cutereve;;Ediuy;;rcte;lig;r;raveepfpsym;ha;apcclr;g;\0\0;adsvnd;;lope;;;elmrsz;esd;a;;;;;;;;t;vb;d;pth;arr;gpon;f;;Eaeiop;cir;;d;s;rox;eingctyr;;mp;eildemlcioninnt;Nabcdefiklnoprsuot;crkcepsong;psilon;rime;im;eq;ee;ed;gerk;tbrk;oy;quo;cmprtaus;eptyv;snoahw;;een;r;gcostuvwaiurc;pdptot;lus;imes;\0\0cup;ar;riangleduown;p;plus;earow;akocnklstozenge;riangle;dlrown;eft;ight;k;\0\0;;4;ck;eo;q=uiv;t;ptwxf;;tomtie;DHUVbdhmptuvLRlr;;;;;DUdu;;;;LRlr;;;;;HLRhlr;;;;;;ox;LRlr;;;;;DUdu;;;;inus;lus;imes;LRlr;;;;;HLRhlr;;;;;;evbarceior;mi;m;el;bh;sub;l;etp;Ee;;q\0\0\0\0\0\0\0\0\0\0cprute;;abcdsnd;rcup;aup;p;ot;;eot;aeiu\0s;on;dilrc;ps;sm;ot;dmnilptyv;t;err;ceiy;ck;mark;r;Ecefms;;elq;e\0\0rrowlreft;ight;RSacd;st;irc;ash;nint;id;cir;ubs;uit\0on;e;q\0\0a;t;;flemxente\0;dot;nfry;o;sr;aorr;ss;cur;bp;e;;e;dot;delprvwarrlr;;\0\0r;c;arr;p;;bcdosrcap;aup;p;ot;r;;alrvrr;m;yevwq\0\0reuee;edge;enearrowlreftightecioninnt;lcty;AHabcdefhijlorstuwzrar;glrsger;eth;h;varow;aayron;;;aogrr;tseq;glmta;ptyv;irsht;;arlraegsvm;osnd;suit;amma;in;;iode;ontimes;ncy;c\0\0rn;op;lptuwlar;f;;empsq;dot;inus;lus;quare;blebarwedgnadhownarrowarpoonlrefighkaro\0\0rn;op;cotry;;l;rok;drot;i;fahraangle;ciy;grarr;DacdefglmnopqrstuxDoocsuteter;aioyron;r;clon;;ot;Drot;;;rsave;dot;;ilsnters;;;dot;apscr;ty;svetp1;;;gs;p;gpon;f;alsr;sl;us;i;lvon;csuviorc\0\0antgltressaeils;st;v;DD;parsl;Daot;rr;cdir;oah;mrlo;cipl;seoctationential\0\0\0\0\0\0\0llingdotsey;male;ilrlig;\0\0g;ig;;lig;lig;fjaltt;ig;ns;of;\0f;ak;v;artint;aocs\0\0;;;;\0;;\0\0;;5;\0;;8;l;wn;cr;Eabcdefgijlnorstv;l;cmpute;ma;d;reve;iyrc;;ot;;lqs;qslan;cdlc;ot;o;l;;es;r;;gmel;cy;;Eaj;;;Eaes;p;prox;q;qim;pf;cir;m;el;;>;cdlqrci;r;ot;Par;uest;adels\0pror;qlqlesienrtneqq;Aabcefkosyrilmrrsfildrcy;;cwir;;ar;irc;alrrts;uitlip;con;r;sewarow;arow;amoprrr;tht;klreftarrow;ightarrow;f;bar;cltr;asrok;bpull;hen\0\0\0\0\0\0cute;iyrc;cxy;clfr;rave;inoinnt;t;fin;ta;lig;aopcgtr;elpinarh;f;ed;;cfotare;in;tie;do;celpal;grerarhk;rod;cgpty;on;f;a;uestcir;n;Edsv;ot;;v;;ilde;\0cy;lcfmosuiyrc;;r;ath;pf;\0r;rcy;kcy;acfghjosppa;v;eydil;;r;reen;cy;cy;pf;cr;ABEHabcdefghjlmnoprstuvartrail;arr;;g;ar;\0\0\0\0\0\0\0\0\0ute;mptyv;rabda;g;dl;;uor;bfhlpst;fs;s;p;l;im;l;;aeil;;s;abrrr;rk;akcek;;es;ldu;;aeuyron;diil;;cqrsa;uo;rduhar;shar;h;;fgqstahlrtrrow;taarpoonduownpeftarrows;ightahsrrow;sarpoonquigarrohreetimes;;qslan;cdgsc;ot;o;r;;es;adegspproot;qgqgtiilrsht;;;E;rdu;l;lk;cy;;achtrorneard;ri;iodot;ust;acheEaes;p;prox;q;qim;abnoptwznrg;r;rglmreftarightapsto;ightparrowlrefight;aflr;;us;imes;st;;efngear;lt;achmtrornear;d;;ri;achiqtquo;r;m;eg;;buo;r;rok;<;cdhilqrci;r;remes;arr;uest;Piar;;efrdushar;har;enrtneqq;DacdefhilnopsuDot;clprret;;ese;sto;dluowefker;oymma;;ash;asuredangler;o;cdnro;acdsir;otus;bd;u;p;dpels;f;ctr;pos;lmtimap;GLRVabcdefghijlmoprstuvwgt;;veltftarrrow;ightarrow;;;vightarrow;Ddash;ash;bcnptlaute;g;;Eiop;d;s;rour;al;s\0pmp;eaeouy\0;on;dil;ng;dot;p;;ash;;Aadqsxrr;rhrk;;oot;uieiar;ist;sr;Eest;qs;qslani;rAaprrr;ar;;sv;d;cy;AEadestr;rr;r;;fqstarrroightarro;qslan;si;ri;eiptf;;inn;Edv;ot;;;i;v;;aorr;astllel;;lint;;ceu;c;eAaitrrr;cw;;ghtarrowri;echimpqu;ceru;ort\0\0arm;e;qsubpbcp;Ees;et;eq;qc;e;Ees;et;eq;qgilrldeianglelreft;eight;e;m;esro;p;DHadgilrsash;arr;p;ash;et;;>nfin;Aetrr;;;r<ie;Atrr;rie;im;Aanrr;rhrk;;oear;\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0\0csuteiyr;c;abioslac;v;old;lig;crir;;\0\0\0n;ave;bmar;acitrirr;oss;n;aeicr;ga;cdnron;;pf;aelr;rp;;adiosvr;efmr;ofgof;r;lope;;cloashl;idees;as;mlbar;\0\0\0\0\0\0\0\0\0r;ast;lle\0\0m;;y;rcimptnt;od;il;enk;r;imo;v;mane;;tvchfork;aunckk;h;s;abcdemstcir;ir;ou;;nim;wo;ipuntint;f;nd;Eaceinosu;p;u;c;acenspprourlyeaespprox;qq;im;ime;sEasdfpalslar;ine;urf;;trel;cir;;ncsp;fiopsur;pf;rime;cr;aeoteirnionnt;st;eABHabcdefhilmnoprstuxartrail;arar;cdenqrteu;te;imptyv;g;del;;uor;abcfhlpstwp;;fs;;s;l;im;l;;aiil;o;nalabrrrk;akcek;;es;ldu;;aeuyron;diil;;clqsa;dhar;uo;rh;acgl;ipsnart;ilrsht;;aordu;l;;v;gnshtahlrstrrow;taarpoonduowpeftahrrowarpoonightarrows;quigarrohreetimes;g;ingdotseahmra;oust;achemid;abptnrg;r;raflr;;us;imes;apr;gt;olint;arachqquo;r;buo;rhirremes;i;efltri;luhar;;\0\0\0\0\0\0\0cute;qu;Eaceinpsy;\0;on;u;dil;rc;Eas;p;im;olint;i;ot;be;Aacmstxrr;rhr;oti;war;minnut;r;oacoyrp;hycy;;rt\0\0iaragmma;fv;;deglnprot;;q;E;;E;e;lus;arr;araeitlslsetmhp;parsl;dle;;e;s;flptcy;;b;ar;f;adres;uitcsuaup;s;p;s;ubp;eset;e;eset;e;afrarcemtr;tmiararr;fanighteppsilohsbcmnp;Edemnprs;ot;;dot;ult;Ee;;lus;arr;eiut;enq;qeq;qm;bp;;c;acenspprourlyeaespproqg;123;Edehlmnps;ost;ub;;dot;soul;b;arr;ult;Ee;;lus;eiut;enq;qeq;qm;bp;;Aanrr;rhr;owar;lig\0\0\0\0\0\0\0\0\0\0\0\0get;;raeyron;dil;;lrec;r;eiko\0e4fa;svym;cnkaspproimsasrnes;bd;ar;;eps;bcfot;ir;;ork;rime;aipdadempstngle;dlqrowneft;e;ight;eot;inus;lus;b;ime;ezium;chtry;;cy;rok;ioxheadlreftarroightarrowAHabcdfghlmoprstuwrar;cruter\0y;ve;iyrc;abhrlac;airsht;;raverlrlk;ct\0\0rn;erop;ri;alcr;gpon;f;adhlsuownarpoonlrefighi;hlonparrows;cit\0\0rn;erop;ng;ri;cr;dirot;lde;i;famrlangle;ABDacdeflnoprszrar;v;asnrgrt;eknprstappothinhirop;hiugmbpsetneq;q;setneq;q;hretianglelreftighty;ashelr;bear;q;lip;btar;trsubppf;rotrcur;bpnEenEeigzag;cefoprsirc;dibgar;e;q;erp;r;pf;;eatcr;\0\0\0\0\0\0\0trr;Aarr;Aarrais;dptfl;imAarrcqr;ptracefiosucuyte;iyrc;;nr;cy;pf;cr;cmy;lacdefhioswcute;ayron;;ot;ettra;r;cy;grarr;pf;cr;jn;j;'.split("").map(function(a){return a.charCodeAt(0)}))),uD}var oD={},Sne;function CFe(){return Sne||(Sne=1,Object.defineProperty(oD,"__esModule",{value:!0}),oD.default=new Uint16Array("aglq	\x1B\0\0p;os;t;t;uot;".split("").map(function(a){return a.charCodeAt(0)}))),oD}var lC={},Ene;function Ane(){return Ene||(Ene=1,(function(a){var e;Object.defineProperty(a,"__esModule",{value:!0}),a.replaceCodePoint=a.fromCodePoint=void 0;var u=new Map([[0,65533],[128,8364],[130,8218],[131,402],[132,8222],[133,8230],[134,8224],[135,8225],[136,710],[137,8240],[138,352],[139,8249],[140,338],[142,381],[145,8216],[146,8217],[147,8220],[148,8221],[149,8226],[150,8211],[151,8212],[152,732],[153,8482],[154,353],[155,8250],[156,339],[158,382],[159,376]]);a.fromCodePoint=(e=String.fromCodePoint)!==null&&e!==void 0?e:function(t){var i="";return t>65535&&(t-=65536,i+=String.fromCharCode(t>>>10&1023|55296),t=56320|t&1023),i+=String.fromCharCode(t),i};function n(t){var i;return t>=55296&&t<=57343||t>1114111?65533:(i=u.get(t))!==null&&i!==void 0?i:t}a.replaceCodePoint=n;function r(t){return(0,a.fromCodePoint)(n(t))}a.default=r})(lC)),lC}var One;function STe(){return One||(One=1,(function(a){var e=eo&&eo.__createBinding||(Object.create?(function(A,P,C,B){B===void 0&&(B=C);var H=Object.getOwnPropertyDescriptor(P,C);(!H||("get"in H?!P.__esModule:H.writable||H.configurable))&&(H={enumerable:!0,get:function(){return P[C]}}),Object.defineProperty(A,B,H)}):(function(A,P,C,B){B===void 0&&(B=C),A[B]=P[C]})),u=eo&&eo.__setModuleDefault||(Object.create?(function(A,P){Object.defineProperty(A,"default",{enumerable:!0,value:P})}):function(A,P){A.default=P}),n=eo&&eo.__importStar||function(A){if(A&&A.__esModule)return A;var P={};if(A!=null)for(var C in A)C!=="default"&&Object.prototype.hasOwnProperty.call(A,C)&&e(P,A,C);return u(P,A),P},r=eo&&eo.__importDefault||function(A){return A&&A.__esModule?A:{default:A}};Object.defineProperty(a,"__esModule",{value:!0}),a.decodeXML=a.decodeHTMLStrict=a.decodeHTMLAttribute=a.decodeHTML=a.determineBranch=a.EntityDecoder=a.DecodingMode=a.BinTrieFlags=a.fromCodePoint=a.replaceCodePoint=a.decodeCodePoint=a.xmlDecodeTree=a.htmlDecodeTree=void 0;var t=r(MFe());a.htmlDecodeTree=t.default;var i=r(CFe());a.xmlDecodeTree=i.default;var o=n(Ane());a.decodeCodePoint=o.default;var l=Ane();Object.defineProperty(a,"replaceCodePoint",{enumerable:!0,get:function(){return l.replaceCodePoint}}),Object.defineProperty(a,"fromCodePoint",{enumerable:!0,get:function(){return l.fromCodePoint}});var s;(function(A){A[A.NUM=35]="NUM",A[A.SEMI=59]="SEMI",A[A.EQUALS=61]="EQUALS",A[A.ZERO=48]="ZERO",A[A.NINE=57]="NINE",A[A.LOWER_A=97]="LOWER_A",A[A.LOWER_F=102]="LOWER_F",A[A.LOWER_X=120]="LOWER_X",A[A.LOWER_Z=122]="LOWER_Z",A[A.UPPER_A=65]="UPPER_A",A[A.UPPER_F=70]="UPPER_F",A[A.UPPER_Z=90]="UPPER_Z"})(s||(s={}));var c=32,d;(function(A){A[A.VALUE_LENGTH=49152]="VALUE_LENGTH",A[A.BRANCH_LENGTH=16256]="BRANCH_LENGTH",A[A.JUMP_TABLE=127]="JUMP_TABLE"})(d=a.BinTrieFlags||(a.BinTrieFlags={}));function f(A){return A>=s.ZERO&&A<=s.NINE}function p(A){return A>=s.UPPER_A&&A<=s.UPPER_F||A>=s.LOWER_A&&A<=s.LOWER_F}function h(A){return A>=s.UPPER_A&&A<=s.UPPER_Z||A>=s.LOWER_A&&A<=s.LOWER_Z||f(A)}function g(A){return A===s.EQUALS||h(A)}var v;(function(A){A[A.EntityStart=0]="EntityStart",A[A.NumericStart=1]="NumericStart",A[A.NumericDecimal=2]="NumericDecimal",A[A.NumericHex=3]="NumericHex",A[A.NamedEntity=4]="NamedEntity"})(v||(v={}));var m;(function(A){A[A.Legacy=0]="Legacy",A[A.Strict=1]="Strict",A[A.Attribute=2]="Attribute"})(m=a.DecodingMode||(a.DecodingMode={}));var T=(function(){function A(P,C,B){this.decodeTree=P,this.emitCodePoint=C,this.errors=B,this.state=v.EntityStart,this.consumed=1,this.result=0,this.treeIndex=0,this.excess=1,this.decodeMode=m.Strict}return A.prototype.startEntity=function(P){this.decodeMode=P,this.state=v.EntityStart,this.result=0,this.treeIndex=0,this.excess=1,this.consumed=1},A.prototype.write=function(P,C){switch(this.state){case v.EntityStart:return P.charCodeAt(C)===s.NUM?(this.state=v.NumericStart,this.consumed+=1,this.stateNumericStart(P,C+1)):(this.state=v.NamedEntity,this.stateNamedEntity(P,C));case v.NumericStart:return this.stateNumericStart(P,C);case v.NumericDecimal:return this.stateNumericDecimal(P,C);case v.NumericHex:return this.stateNumericHex(P,C);case v.NamedEntity:return this.stateNamedEntity(P,C)}},A.prototype.stateNumericStart=function(P,C){return C>=P.length?-1:(P.charCodeAt(C)|c)===s.LOWER_X?(this.state=v.NumericHex,this.consumed+=1,this.stateNumericHex(P,C+1)):(this.state=v.NumericDecimal,this.stateNumericDecimal(P,C))},A.prototype.addToNumericResult=function(P,C,B,H){if(C!==B){var V=B-C;this.result=this.result*Math.pow(H,V)+parseInt(P.substr(C,V),H),this.consumed+=V}},A.prototype.stateNumericHex=function(P,C){for(var B=C;C<P.length;){var H=P.charCodeAt(C);if(f(H)||p(H))C+=1;else return this.addToNumericResult(P,B,C,16),this.emitNumericEntity(H,3)}return this.addToNumericResult(P,B,C,16),-1},A.prototype.stateNumericDecimal=function(P,C){for(var B=C;C<P.length;){var H=P.charCodeAt(C);if(f(H))C+=1;else return this.addToNumericResult(P,B,C,10),this.emitNumericEntity(H,2)}return this.addToNumericResult(P,B,C,10),-1},A.prototype.emitNumericEntity=function(P,C){var B;if(this.consumed<=C)return(B=this.errors)===null||B===void 0||B.absenceOfDigitsInNumericCharacterReference(this.consumed),0;if(P===s.SEMI)this.consumed+=1;else if(this.decodeMode===m.Strict)return 0;return this.emitCodePoint((0,o.replaceCodePoint)(this.result),this.consumed),this.errors&&(P!==s.SEMI&&this.errors.missingSemicolonAfterCharacterReference(),this.errors.validateNumericCharacterReference(this.result)),this.consumed},A.prototype.stateNamedEntity=function(P,C){for(var B=this.decodeTree,H=B[this.treeIndex],V=(H&d.VALUE_LENGTH)>>14;C<P.length;C++,this.excess++){var G=P.charCodeAt(C);if(this.treeIndex=E(B,H,this.treeIndex+Math.max(1,V),G),this.treeIndex<0)return this.result===0||this.decodeMode===m.Attribute&&(V===0||g(G))?0:this.emitNotTerminatedNamedEntity();if(H=B[this.treeIndex],V=(H&d.VALUE_LENGTH)>>14,V!==0){if(G===s.SEMI)return this.emitNamedEntityData(this.treeIndex,V,this.consumed+this.excess);this.decodeMode!==m.Strict&&(this.result=this.treeIndex,this.consumed+=this.excess,this.excess=0)}}return-1},A.prototype.emitNotTerminatedNamedEntity=function(){var P,C=this,B=C.result,H=C.decodeTree,V=(H[B]&d.VALUE_LENGTH)>>14;return this.emitNamedEntityData(B,V,this.consumed),(P=this.errors)===null||P===void 0||P.missingSemicolonAfterCharacterReference(),this.consumed},A.prototype.emitNamedEntityData=function(P,C,B){var H=this.decodeTree;return this.emitCodePoint(C===1?H[P]&~d.VALUE_LENGTH:H[P+1],B),C===3&&this.emitCodePoint(H[P+2],B),B},A.prototype.end=function(){var P;switch(this.state){case v.NamedEntity:return this.result!==0&&(this.decodeMode!==m.Attribute||this.result===this.treeIndex)?this.emitNotTerminatedNamedEntity():0;case v.NumericDecimal:return this.emitNumericEntity(0,2);case v.NumericHex:return this.emitNumericEntity(0,3);case v.NumericStart:return(P=this.errors)===null||P===void 0||P.absenceOfDigitsInNumericCharacterReference(this.consumed),0;case v.EntityStart:return 0}},A})();a.EntityDecoder=T;function w(A){var P="",C=new T(A,function(B){return P+=(0,o.fromCodePoint)(B)});return function(H,V){for(var G=0,Z=0;(Z=H.indexOf("&",Z))>=0;){P+=H.slice(G,Z),C.startEntity(V);var ae=C.write(H,Z+1);if(ae<0){G=Z+C.end();break}G=Z+ae,Z=ae===0?G+1:G}var W=P+H.slice(G);return P="",W}}function E(A,P,C,B){var H=(P&d.BRANCH_LENGTH)>>7,V=P&d.JUMP_TABLE;if(H===0)return V!==0&&B===V?C:-1;if(V){var G=B-V;return G<0||G>=H?-1:A[C+G]-1}for(var Z=C,ae=Z+H-1;Z<=ae;){var W=Z+ae>>>1,te=A[W];if(te<B)Z=W+1;else if(te>B)ae=W-1;else return A[W+H]}return-1}a.determineBranch=E;var S=w(t.default),N=w(i.default);function j(A,P){return P===void 0&&(P=m.Legacy),S(A,P)}a.decodeHTML=j;function q(A){return S(A,m.Attribute)}a.decodeHTMLAttribute=q;function O(A){return S(A,m.Strict)}a.decodeHTMLStrict=O;function I(A){return N(A,m.Strict)}a.decodeXML=I})(eo)),eo}var xne;function ETe(){return xne||(xne=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.QuoteType=void 0;var e=STe(),u;(function(f){f[f.Tab=9]="Tab",f[f.NewLine=10]="NewLine",f[f.FormFeed=12]="FormFeed",f[f.CarriageReturn=13]="CarriageReturn",f[f.Space=32]="Space",f[f.ExclamationMark=33]="ExclamationMark",f[f.Number=35]="Number",f[f.Amp=38]="Amp",f[f.SingleQuote=39]="SingleQuote",f[f.DoubleQuote=34]="DoubleQuote",f[f.Dash=45]="Dash",f[f.Slash=47]="Slash",f[f.Zero=48]="Zero",f[f.Nine=57]="Nine",f[f.Semi=59]="Semi",f[f.Lt=60]="Lt",f[f.Eq=61]="Eq",f[f.Gt=62]="Gt",f[f.Questionmark=63]="Questionmark",f[f.UpperA=65]="UpperA",f[f.LowerA=97]="LowerA",f[f.UpperF=70]="UpperF",f[f.LowerF=102]="LowerF",f[f.UpperZ=90]="UpperZ",f[f.LowerZ=122]="LowerZ",f[f.LowerX=120]="LowerX",f[f.OpeningSquareBracket=91]="OpeningSquareBracket"})(u||(u={}));var n;(function(f){f[f.Text=1]="Text",f[f.BeforeTagName=2]="BeforeTagName",f[f.InTagName=3]="InTagName",f[f.InSelfClosingTag=4]="InSelfClosingTag",f[f.BeforeClosingTagName=5]="BeforeClosingTagName",f[f.InClosingTagName=6]="InClosingTagName",f[f.AfterClosingTagName=7]="AfterClosingTagName",f[f.BeforeAttributeName=8]="BeforeAttributeName",f[f.InAttributeName=9]="InAttributeName",f[f.AfterAttributeName=10]="AfterAttributeName",f[f.BeforeAttributeValue=11]="BeforeAttributeValue",f[f.InAttributeValueDq=12]="InAttributeValueDq",f[f.InAttributeValueSq=13]="InAttributeValueSq",f[f.InAttributeValueNq=14]="InAttributeValueNq",f[f.BeforeDeclaration=15]="BeforeDeclaration",f[f.InDeclaration=16]="InDeclaration",f[f.InProcessingInstruction=17]="InProcessingInstruction",f[f.BeforeComment=18]="BeforeComment",f[f.CDATASequence=19]="CDATASequence",f[f.InSpecialComment=20]="InSpecialComment",f[f.InCommentLike=21]="InCommentLike",f[f.BeforeSpecialS=22]="BeforeSpecialS",f[f.SpecialStartSequence=23]="SpecialStartSequence",f[f.InSpecialTag=24]="InSpecialTag",f[f.BeforeEntity=25]="BeforeEntity",f[f.BeforeNumericEntity=26]="BeforeNumericEntity",f[f.InNamedEntity=27]="InNamedEntity",f[f.InNumericEntity=28]="InNumericEntity",f[f.InHexEntity=29]="InHexEntity"})(n||(n={}));function r(f){return f===u.Space||f===u.NewLine||f===u.Tab||f===u.FormFeed||f===u.CarriageReturn}function t(f){return f===u.Slash||f===u.Gt||r(f)}function i(f){return f>=u.Zero&&f<=u.Nine}function o(f){return f>=u.LowerA&&f<=u.LowerZ||f>=u.UpperA&&f<=u.UpperZ}function l(f){return f>=u.UpperA&&f<=u.UpperF||f>=u.LowerA&&f<=u.LowerF}var s;(function(f){f[f.NoValue=0]="NoValue",f[f.Unquoted=1]="Unquoted",f[f.Single=2]="Single",f[f.Double=3]="Double"})(s=a.QuoteType||(a.QuoteType={}));var c={Cdata:new Uint8Array([67,68,65,84,65,91]),CdataEnd:new Uint8Array([93,93,62]),CommentEnd:new Uint8Array([45,45,62]),ScriptEnd:new Uint8Array([60,47,115,99,114,105,112,116]),StyleEnd:new Uint8Array([60,47,115,116,121,108,101]),TitleEnd:new Uint8Array([60,47,116,105,116,108,101])},d=(function(){function f(p,h){var g=p.xmlMode,v=g===void 0?!1:g,m=p.decodeEntities,T=m===void 0?!0:m;this.cbs=h,this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.isSpecial=!1,this.running=!0,this.offset=0,this.currentSequence=void 0,this.sequenceIndex=0,this.trieIndex=0,this.trieCurrent=0,this.entityResult=0,this.entityExcess=0,this.xmlMode=v,this.decodeEntities=T,this.entityTrie=v?e.xmlDecodeTree:e.htmlDecodeTree}return f.prototype.reset=function(){this.state=n.Text,this.buffer="",this.sectionStart=0,this.index=0,this.baseState=n.Text,this.currentSequence=void 0,this.running=!0,this.offset=0},f.prototype.write=function(p){this.offset+=this.buffer.length,this.buffer=p,this.parse()},f.prototype.end=function(){this.running&&this.finish()},f.prototype.pause=function(){this.running=!1},f.prototype.resume=function(){this.running=!0,this.index<this.buffer.length+this.offset&&this.parse()},f.prototype.getIndex=function(){return this.index},f.prototype.getSectionStart=function(){return this.sectionStart},f.prototype.stateText=function(p){p===u.Lt||!this.decodeEntities&&this.fastForwardTo(u.Lt)?(this.index>this.sectionStart&&this.cbs.ontext(this.sectionStart,this.index),this.state=n.BeforeTagName,this.sectionStart=this.index):this.decodeEntities&&p===u.Amp&&(this.state=n.BeforeEntity)},f.prototype.stateSpecialStartSequence=function(p){var h=this.sequenceIndex===this.currentSequence.length,g=h?t(p):(p|32)===this.currentSequence[this.sequenceIndex];if(!g)this.isSpecial=!1;else if(!h){this.sequenceIndex++;return}this.sequenceIndex=0,this.state=n.InTagName,this.stateInTagName(p)},f.prototype.stateInSpecialTag=function(p){if(this.sequenceIndex===this.currentSequence.length){if(p===u.Gt||r(p)){var h=this.index-this.currentSequence.length;if(this.sectionStart<h){var g=this.index;this.index=h,this.cbs.ontext(this.sectionStart,h),this.index=g}this.isSpecial=!1,this.sectionStart=h+2,this.stateInClosingTagName(p);return}this.sequenceIndex=0}(p|32)===this.currentSequence[this.sequenceIndex]?this.sequenceIndex+=1:this.sequenceIndex===0?this.currentSequence===c.TitleEnd?this.decodeEntities&&p===u.Amp&&(this.state=n.BeforeEntity):this.fastForwardTo(u.Lt)&&(this.sequenceIndex=1):this.sequenceIndex=+(p===u.Lt)},f.prototype.stateCDATASequence=function(p){p===c.Cdata[this.sequenceIndex]?++this.sequenceIndex===c.Cdata.length&&(this.state=n.InCommentLike,this.currentSequence=c.CdataEnd,this.sequenceIndex=0,this.sectionStart=this.index+1):(this.sequenceIndex=0,this.state=n.InDeclaration,this.stateInDeclaration(p))},f.prototype.fastForwardTo=function(p){for(;++this.index<this.buffer.length+this.offset;)if(this.buffer.charCodeAt(this.index-this.offset)===p)return!0;return this.index=this.buffer.length+this.offset-1,!1},f.prototype.stateInCommentLike=function(p){p===this.currentSequence[this.sequenceIndex]?++this.sequenceIndex===this.currentSequence.length&&(this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,this.index,2):this.cbs.oncomment(this.sectionStart,this.index,2),this.sequenceIndex=0,this.sectionStart=this.index+1,this.state=n.Text):this.sequenceIndex===0?this.fastForwardTo(this.currentSequence[0])&&(this.sequenceIndex=1):p!==this.currentSequence[this.sequenceIndex-1]&&(this.sequenceIndex=0)},f.prototype.isTagStartChar=function(p){return this.xmlMode?!t(p):o(p)},f.prototype.startSpecial=function(p,h){this.isSpecial=!0,this.currentSequence=p,this.sequenceIndex=h,this.state=n.SpecialStartSequence},f.prototype.stateBeforeTagName=function(p){if(p===u.ExclamationMark)this.state=n.BeforeDeclaration,this.sectionStart=this.index+1;else if(p===u.Questionmark)this.state=n.InProcessingInstruction,this.sectionStart=this.index+1;else if(this.isTagStartChar(p)){var h=p|32;this.sectionStart=this.index,!this.xmlMode&&h===c.TitleEnd[2]?this.startSpecial(c.TitleEnd,3):this.state=!this.xmlMode&&h===c.ScriptEnd[2]?n.BeforeSpecialS:n.InTagName}else p===u.Slash?this.state=n.BeforeClosingTagName:(this.state=n.Text,this.stateText(p))},f.prototype.stateInTagName=function(p){t(p)&&(this.cbs.onopentagname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateBeforeClosingTagName=function(p){r(p)||(p===u.Gt?this.state=n.Text:(this.state=this.isTagStartChar(p)?n.InClosingTagName:n.InSpecialComment,this.sectionStart=this.index))},f.prototype.stateInClosingTagName=function(p){(p===u.Gt||r(p))&&(this.cbs.onclosetag(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterClosingTagName,this.stateAfterClosingTagName(p))},f.prototype.stateAfterClosingTagName=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeAttributeName=function(p){p===u.Gt?(this.cbs.onopentagend(this.index),this.isSpecial?(this.state=n.InSpecialTag,this.sequenceIndex=0):this.state=n.Text,this.baseState=this.state,this.sectionStart=this.index+1):p===u.Slash?this.state=n.InSelfClosingTag:r(p)||(this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateInSelfClosingTag=function(p){p===u.Gt?(this.cbs.onselfclosingtag(this.index),this.state=n.Text,this.baseState=n.Text,this.sectionStart=this.index+1,this.isSpecial=!1):r(p)||(this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p))},f.prototype.stateInAttributeName=function(p){(p===u.Eq||t(p))&&(this.cbs.onattribname(this.sectionStart,this.index),this.sectionStart=-1,this.state=n.AfterAttributeName,this.stateAfterAttributeName(p))},f.prototype.stateAfterAttributeName=function(p){p===u.Eq?this.state=n.BeforeAttributeValue:p===u.Slash||p===u.Gt?(this.cbs.onattribend(s.NoValue,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):r(p)||(this.cbs.onattribend(s.NoValue,this.index),this.state=n.InAttributeName,this.sectionStart=this.index)},f.prototype.stateBeforeAttributeValue=function(p){p===u.DoubleQuote?(this.state=n.InAttributeValueDq,this.sectionStart=this.index+1):p===u.SingleQuote?(this.state=n.InAttributeValueSq,this.sectionStart=this.index+1):r(p)||(this.sectionStart=this.index,this.state=n.InAttributeValueNq,this.stateInAttributeValueNoQuotes(p))},f.prototype.handleInAttributeValue=function(p,h){p===h||!this.decodeEntities&&this.fastForwardTo(h)?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(h===u.DoubleQuote?s.Double:s.Single,this.index),this.state=n.BeforeAttributeName):this.decodeEntities&&p===u.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateInAttributeValueDoubleQuotes=function(p){this.handleInAttributeValue(p,u.DoubleQuote)},f.prototype.stateInAttributeValueSingleQuotes=function(p){this.handleInAttributeValue(p,u.SingleQuote)},f.prototype.stateInAttributeValueNoQuotes=function(p){r(p)||p===u.Gt?(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=-1,this.cbs.onattribend(s.Unquoted,this.index),this.state=n.BeforeAttributeName,this.stateBeforeAttributeName(p)):this.decodeEntities&&p===u.Amp&&(this.baseState=this.state,this.state=n.BeforeEntity)},f.prototype.stateBeforeDeclaration=function(p){p===u.OpeningSquareBracket?(this.state=n.CDATASequence,this.sequenceIndex=0):this.state=p===u.Dash?n.BeforeComment:n.InDeclaration},f.prototype.stateInDeclaration=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.ondeclaration(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateInProcessingInstruction=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.onprocessinginstruction(this.sectionStart,this.index),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeComment=function(p){p===u.Dash?(this.state=n.InCommentLike,this.currentSequence=c.CommentEnd,this.sequenceIndex=2,this.sectionStart=this.index+1):this.state=n.InDeclaration},f.prototype.stateInSpecialComment=function(p){(p===u.Gt||this.fastForwardTo(u.Gt))&&(this.cbs.oncomment(this.sectionStart,this.index,0),this.state=n.Text,this.sectionStart=this.index+1)},f.prototype.stateBeforeSpecialS=function(p){var h=p|32;h===c.ScriptEnd[3]?this.startSpecial(c.ScriptEnd,4):h===c.StyleEnd[3]?this.startSpecial(c.StyleEnd,4):(this.state=n.InTagName,this.stateInTagName(p))},f.prototype.stateBeforeEntity=function(p){this.entityExcess=1,this.entityResult=0,p===u.Number?this.state=n.BeforeNumericEntity:p===u.Amp||(this.trieIndex=0,this.trieCurrent=this.entityTrie[0],this.state=n.InNamedEntity,this.stateInNamedEntity(p))},f.prototype.stateInNamedEntity=function(p){if(this.entityExcess+=1,this.trieIndex=(0,e.determineBranch)(this.entityTrie,this.trieCurrent,this.trieIndex+1,p),this.trieIndex<0){this.emitNamedEntity(),this.index--;return}this.trieCurrent=this.entityTrie[this.trieIndex];var h=this.trieCurrent&e.BinTrieFlags.VALUE_LENGTH;if(h){var g=(h>>14)-1;if(!this.allowLegacyEntity()&&p!==u.Semi)this.trieIndex+=g;else{var v=this.index-this.entityExcess+1;v>this.sectionStart&&this.emitPartial(this.sectionStart,v),this.entityResult=this.trieIndex,this.trieIndex+=g,this.entityExcess=0,this.sectionStart=this.index+1,g===0&&this.emitNamedEntity()}}},f.prototype.emitNamedEntity=function(){if(this.state=this.baseState,this.entityResult!==0){var p=(this.entityTrie[this.entityResult]&e.BinTrieFlags.VALUE_LENGTH)>>14;switch(p){case 1:{this.emitCodePoint(this.entityTrie[this.entityResult]&~e.BinTrieFlags.VALUE_LENGTH);break}case 2:{this.emitCodePoint(this.entityTrie[this.entityResult+1]);break}case 3:this.emitCodePoint(this.entityTrie[this.entityResult+1]),this.emitCodePoint(this.entityTrie[this.entityResult+2])}}},f.prototype.stateBeforeNumericEntity=function(p){(p|32)===u.LowerX?(this.entityExcess++,this.state=n.InHexEntity):(this.state=n.InNumericEntity,this.stateInNumericEntity(p))},f.prototype.emitNumericEntity=function(p){var h=this.index-this.entityExcess-1,g=h+2+ +(this.state===n.InHexEntity);g!==this.index&&(h>this.sectionStart&&this.emitPartial(this.sectionStart,h),this.sectionStart=this.index+Number(p),this.emitCodePoint((0,e.replaceCodePoint)(this.entityResult))),this.state=this.baseState},f.prototype.stateInNumericEntity=function(p){p===u.Semi?this.emitNumericEntity(!0):i(p)?(this.entityResult=this.entityResult*10+(p-u.Zero),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.stateInHexEntity=function(p){p===u.Semi?this.emitNumericEntity(!0):i(p)?(this.entityResult=this.entityResult*16+(p-u.Zero),this.entityExcess++):l(p)?(this.entityResult=this.entityResult*16+((p|32)-u.LowerA+10),this.entityExcess++):(this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state=this.baseState,this.index--)},f.prototype.allowLegacyEntity=function(){return!this.xmlMode&&(this.baseState===n.Text||this.baseState===n.InSpecialTag)},f.prototype.cleanup=function(){this.running&&this.sectionStart!==this.index&&(this.state===n.Text||this.state===n.InSpecialTag&&this.sequenceIndex===0?(this.cbs.ontext(this.sectionStart,this.index),this.sectionStart=this.index):(this.state===n.InAttributeValueDq||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueNq)&&(this.cbs.onattribdata(this.sectionStart,this.index),this.sectionStart=this.index))},f.prototype.shouldContinue=function(){return this.index<this.buffer.length+this.offset&&this.running},f.prototype.parse=function(){for(;this.shouldContinue();){var p=this.buffer.charCodeAt(this.index-this.offset);switch(this.state){case n.Text:{this.stateText(p);break}case n.SpecialStartSequence:{this.stateSpecialStartSequence(p);break}case n.InSpecialTag:{this.stateInSpecialTag(p);break}case n.CDATASequence:{this.stateCDATASequence(p);break}case n.InAttributeValueDq:{this.stateInAttributeValueDoubleQuotes(p);break}case n.InAttributeName:{this.stateInAttributeName(p);break}case n.InCommentLike:{this.stateInCommentLike(p);break}case n.InSpecialComment:{this.stateInSpecialComment(p);break}case n.BeforeAttributeName:{this.stateBeforeAttributeName(p);break}case n.InTagName:{this.stateInTagName(p);break}case n.InClosingTagName:{this.stateInClosingTagName(p);break}case n.BeforeTagName:{this.stateBeforeTagName(p);break}case n.AfterAttributeName:{this.stateAfterAttributeName(p);break}case n.InAttributeValueSq:{this.stateInAttributeValueSingleQuotes(p);break}case n.BeforeAttributeValue:{this.stateBeforeAttributeValue(p);break}case n.BeforeClosingTagName:{this.stateBeforeClosingTagName(p);break}case n.AfterClosingTagName:{this.stateAfterClosingTagName(p);break}case n.BeforeSpecialS:{this.stateBeforeSpecialS(p);break}case n.InAttributeValueNq:{this.stateInAttributeValueNoQuotes(p);break}case n.InSelfClosingTag:{this.stateInSelfClosingTag(p);break}case n.InDeclaration:{this.stateInDeclaration(p);break}case n.BeforeDeclaration:{this.stateBeforeDeclaration(p);break}case n.BeforeComment:{this.stateBeforeComment(p);break}case n.InProcessingInstruction:{this.stateInProcessingInstruction(p);break}case n.InNamedEntity:{this.stateInNamedEntity(p);break}case n.BeforeEntity:{this.stateBeforeEntity(p);break}case n.InHexEntity:{this.stateInHexEntity(p);break}case n.InNumericEntity:{this.stateInNumericEntity(p);break}default:this.stateBeforeNumericEntity(p)}this.index++}this.cleanup()},f.prototype.finish=function(){this.state===n.InNamedEntity&&this.emitNamedEntity(),this.sectionStart<this.index&&this.handleTrailingData(),this.cbs.onend()},f.prototype.handleTrailingData=function(){var p=this.buffer.length+this.offset;this.state===n.InCommentLike?this.currentSequence===c.CdataEnd?this.cbs.oncdata(this.sectionStart,p,0):this.cbs.oncomment(this.sectionStart,p,0):this.state===n.InNumericEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InHexEntity&&this.allowLegacyEntity()?this.emitNumericEntity(!1):this.state===n.InTagName||this.state===n.BeforeAttributeName||this.state===n.BeforeAttributeValue||this.state===n.AfterAttributeName||this.state===n.InAttributeName||this.state===n.InAttributeValueSq||this.state===n.InAttributeValueDq||this.state===n.InAttributeValueNq||this.state===n.InClosingTagName||this.cbs.ontext(this.sectionStart,p)},f.prototype.emitPartial=function(p,h){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribdata(p,h):this.cbs.ontext(p,h)},f.prototype.emitCodePoint=function(p){this.baseState!==n.Text&&this.baseState!==n.InSpecialTag?this.cbs.onattribentity(p):this.cbs.ontextentity(p)},f})();a.default=d})(cC)),cC}var Rne;function Nne(){if(Rne)return Zu;Rne=1;var a=Zu&&Zu.__createBinding||(Object.create?(function(v,m,T,w){w===void 0&&(w=T);var E=Object.getOwnPropertyDescriptor(m,T);(!E||("get"in E?!m.__esModule:E.writable||E.configurable))&&(E={enumerable:!0,get:function(){return m[T]}}),Object.defineProperty(v,w,E)}):(function(v,m,T,w){w===void 0&&(w=T),v[w]=m[T]})),e=Zu&&Zu.__setModuleDefault||(Object.create?(function(v,m){Object.defineProperty(v,"default",{enumerable:!0,value:m})}):function(v,m){v.default=m}),u=Zu&&Zu.__importStar||function(v){if(v&&v.__esModule)return v;var m={};if(v!=null)for(var T in v)T!=="default"&&Object.prototype.hasOwnProperty.call(v,T)&&a(m,v,T);return e(m,v),m};Object.defineProperty(Zu,"__esModule",{value:!0}),Zu.Parser=void 0;var n=u(ETe()),r=STe(),t=new Set(["input","option","optgroup","select","button","datalist","textarea"]),i=new Set(["p"]),o=new Set(["thead","tbody"]),l=new Set(["dd","dt"]),s=new Set(["rt","rp"]),c=new Map([["tr",new Set(["tr","th","td"])],["th",new Set(["th"])],["td",new Set(["thead","th","td"])],["body",new Set(["head","link","script"])],["li",new Set(["li"])],["p",i],["h1",i],["h2",i],["h3",i],["h4",i],["h5",i],["h6",i],["select",t],["input",t],["output",t],["button",t],["datalist",t],["textarea",t],["option",new Set(["option"])],["optgroup",new Set(["optgroup","option"])],["dd",l],["dt",l],["address",i],["article",i],["aside",i],["blockquote",i],["details",i],["div",i],["dl",i],["fieldset",i],["figcaption",i],["figure",i],["footer",i],["form",i],["header",i],["hr",i],["main",i],["nav",i],["ol",i],["pre",i],["section",i],["table",i],["ul",i],["rt",s],["rp",s],["tbody",o],["tfoot",o]]),d=new Set(["area","base","basefont","br","col","command","embed","frame","hr","img","input","isindex","keygen","link","meta","param","source","track","wbr"]),f=new Set(["math","svg"]),p=new Set(["mi","mo","mn","ms","mtext","annotation-xml","foreignobject","desc","title"]),h=/\s|\//,g=(function(){function v(m,T){T===void 0&&(T={});var w,E,S,N,j;this.options=T,this.startIndex=0,this.endIndex=0,this.openTagStart=0,this.tagname="",this.attribname="",this.attribvalue="",this.attribs=null,this.stack=[],this.foreignContext=[],this.buffers=[],this.bufferOffset=0,this.writeIndex=0,this.ended=!1,this.cbs=m??{},this.lowerCaseTagNames=(w=T.lowerCaseTags)!==null&&w!==void 0?w:!T.xmlMode,this.lowerCaseAttributeNames=(E=T.lowerCaseAttributeNames)!==null&&E!==void 0?E:!T.xmlMode,this.tokenizer=new((S=T.Tokenizer)!==null&&S!==void 0?S:n.default)(this.options,this),(j=(N=this.cbs).onparserinit)===null||j===void 0||j.call(N,this)}return v.prototype.ontext=function(m,T){var w,E,S=this.getSlice(m,T);this.endIndex=T-1,(E=(w=this.cbs).ontext)===null||E===void 0||E.call(w,S),this.startIndex=T},v.prototype.ontextentity=function(m){var T,w,E=this.tokenizer.getSectionStart();this.endIndex=E-1,(w=(T=this.cbs).ontext)===null||w===void 0||w.call(T,(0,r.fromCodePoint)(m)),this.startIndex=E},v.prototype.isVoidElement=function(m){return!this.options.xmlMode&&d.has(m)},v.prototype.onopentagname=function(m,T){this.endIndex=T;var w=this.getSlice(m,T);this.lowerCaseTagNames&&(w=w.toLowerCase()),this.emitOpenTag(w)},v.prototype.emitOpenTag=function(m){var T,w,E,S;this.openTagStart=this.startIndex,this.tagname=m;var N=!this.options.xmlMode&&c.get(m);if(N)for(;this.stack.length>0&&N.has(this.stack[this.stack.length-1]);){var j=this.stack.pop();(w=(T=this.cbs).onclosetag)===null||w===void 0||w.call(T,j,!0)}this.isVoidElement(m)||(this.stack.push(m),f.has(m)?this.foreignContext.push(!0):p.has(m)&&this.foreignContext.push(!1)),(S=(E=this.cbs).onopentagname)===null||S===void 0||S.call(E,m),this.cbs.onopentag&&(this.attribs={})},v.prototype.endOpenTag=function(m){var T,w;this.startIndex=this.openTagStart,this.attribs&&((w=(T=this.cbs).onopentag)===null||w===void 0||w.call(T,this.tagname,this.attribs,m),this.attribs=null),this.cbs.onclosetag&&this.isVoidElement(this.tagname)&&this.cbs.onclosetag(this.tagname,!0),this.tagname=""},v.prototype.onopentagend=function(m){this.endIndex=m,this.endOpenTag(!1),this.startIndex=m+1},v.prototype.onclosetag=function(m,T){var w,E,S,N,j,q;this.endIndex=T;var O=this.getSlice(m,T);if(this.lowerCaseTagNames&&(O=O.toLowerCase()),(f.has(O)||p.has(O))&&this.foreignContext.pop(),this.isVoidElement(O))!this.options.xmlMode&&O==="br"&&((E=(w=this.cbs).onopentagname)===null||E===void 0||E.call(w,"br"),(N=(S=this.cbs).onopentag)===null||N===void 0||N.call(S,"br",{},!0),(q=(j=this.cbs).onclosetag)===null||q===void 0||q.call(j,"br",!1));else{var I=this.stack.lastIndexOf(O);if(I!==-1)if(this.cbs.onclosetag)for(var A=this.stack.length-I;A--;)this.cbs.onclosetag(this.stack.pop(),A!==0);else this.stack.length=I;else!this.options.xmlMode&&O==="p"&&(this.emitOpenTag("p"),this.closeCurrentTag(!0))}this.startIndex=T+1},v.prototype.onselfclosingtag=function(m){this.endIndex=m,this.options.xmlMode||this.options.recognizeSelfClosing||this.foreignContext[this.foreignContext.length-1]?(this.closeCurrentTag(!1),this.startIndex=m+1):this.onopentagend(m)},v.prototype.closeCurrentTag=function(m){var T,w,E=this.tagname;this.endOpenTag(m),this.stack[this.stack.length-1]===E&&((w=(T=this.cbs).onclosetag)===null||w===void 0||w.call(T,E,!m),this.stack.pop())},v.prototype.onattribname=function(m,T){this.startIndex=m;var w=this.getSlice(m,T);this.attribname=this.lowerCaseAttributeNames?w.toLowerCase():w},v.prototype.onattribdata=function(m,T){this.attribvalue+=this.getSlice(m,T)},v.prototype.onattribentity=function(m){this.attribvalue+=(0,r.fromCodePoint)(m)},v.prototype.onattribend=function(m,T){var w,E;this.endIndex=T,(E=(w=this.cbs).onattribute)===null||E===void 0||E.call(w,this.attribname,this.attribvalue,m===n.QuoteType.Double?'"':m===n.QuoteType.Single?"'":m===n.QuoteType.NoValue?void 0:null),this.attribs&&!Object.prototype.hasOwnProperty.call(this.attribs,this.attribname)&&(this.attribs[this.attribname]=this.attribvalue),this.attribvalue=""},v.prototype.getInstructionName=function(m){var T=m.search(h),w=T<0?m:m.substr(0,T);return this.lowerCaseTagNames&&(w=w.toLowerCase()),w},v.prototype.ondeclaration=function(m,T){this.endIndex=T;var w=this.getSlice(m,T);if(this.cbs.onprocessinginstruction){var E=this.getInstructionName(w);this.cbs.onprocessinginstruction("!".concat(E),"!".concat(w))}this.startIndex=T+1},v.prototype.onprocessinginstruction=function(m,T){this.endIndex=T;var w=this.getSlice(m,T);if(this.cbs.onprocessinginstruction){var E=this.getInstructionName(w);this.cbs.onprocessinginstruction("?".concat(E),"?".concat(w))}this.startIndex=T+1},v.prototype.oncomment=function(m,T,w){var E,S,N,j;this.endIndex=T,(S=(E=this.cbs).oncomment)===null||S===void 0||S.call(E,this.getSlice(m,T-w)),(j=(N=this.cbs).oncommentend)===null||j===void 0||j.call(N),this.startIndex=T+1},v.prototype.oncdata=function(m,T,w){var E,S,N,j,q,O,I,A,P,C;this.endIndex=T;var B=this.getSlice(m,T-w);this.options.xmlMode||this.options.recognizeCDATA?((S=(E=this.cbs).oncdatastart)===null||S===void 0||S.call(E),(j=(N=this.cbs).ontext)===null||j===void 0||j.call(N,B),(O=(q=this.cbs).oncdataend)===null||O===void 0||O.call(q)):((A=(I=this.cbs).oncomment)===null||A===void 0||A.call(I,"[CDATA[".concat(B,"]]")),(C=(P=this.cbs).oncommentend)===null||C===void 0||C.call(P)),this.startIndex=T+1},v.prototype.onend=function(){var m,T;if(this.cbs.onclosetag){this.endIndex=this.startIndex;for(var w=this.stack.length;w>0;this.cbs.onclosetag(this.stack[--w],!0));}(T=(m=this.cbs).onend)===null||T===void 0||T.call(m)},v.prototype.reset=function(){var m,T,w,E;(T=(m=this.cbs).onreset)===null||T===void 0||T.call(m),this.tokenizer.reset(),this.tagname="",this.attribname="",this.attribs=null,this.stack.length=0,this.startIndex=0,this.endIndex=0,(E=(w=this.cbs).onparserinit)===null||E===void 0||E.call(w,this),this.buffers.length=0,this.bufferOffset=0,this.writeIndex=0,this.ended=!1},v.prototype.parseComplete=function(m){this.reset(),this.end(m)},v.prototype.getSlice=function(m,T){for(;m-this.bufferOffset>=this.buffers[0].length;)this.shiftBuffer();for(var w=this.buffers[0].slice(m-this.bufferOffset,T-this.bufferOffset);T-this.bufferOffset>this.buffers[0].length;)this.shiftBuffer(),w+=this.buffers[0].slice(0,T-this.bufferOffset);return w},v.prototype.shiftBuffer=function(){this.bufferOffset+=this.buffers[0].length,this.writeIndex--,this.buffers.shift()},v.prototype.write=function(m){var T,w;if(this.ended){(w=(T=this.cbs).onerror)===null||w===void 0||w.call(T,new Error(".write() after done!"));return}this.buffers.push(m),this.tokenizer.running&&(this.tokenizer.write(m),this.writeIndex++)},v.prototype.end=function(m){var T,w;if(this.ended){(w=(T=this.cbs).onerror)===null||w===void 0||w.call(T,new Error(".end() after done!"));return}m&&this.write(m),this.ended=!0,this.tokenizer.end()},v.prototype.pause=function(){this.tokenizer.pause()},v.prototype.resume=function(){for(this.tokenizer.resume();this.tokenizer.running&&this.writeIndex<this.buffers.length;)this.tokenizer.write(this.buffers[this.writeIndex++]);this.ended&&this.tokenizer.end()},v.prototype.parseChunk=function(m){this.write(m)},v.prototype.done=function(m){this.end(m)},v})();return Zu.Parser=g,Zu}var Ine;function LFe(){return Ine||(Ine=1,(function(a){var e=Yu&&Yu.__createBinding||(Object.create?(function(m,T,w,E){E===void 0&&(E=w);var S=Object.getOwnPropertyDescriptor(T,w);(!S||("get"in S?!T.__esModule:S.writable||S.configurable))&&(S={enumerable:!0,get:function(){return T[w]}}),Object.defineProperty(m,E,S)}):(function(m,T,w,E){E===void 0&&(E=w),m[E]=T[w]})),u=Yu&&Yu.__setModuleDefault||(Object.create?(function(m,T){Object.defineProperty(m,"default",{enumerable:!0,value:T})}):function(m,T){m.default=T}),n=Yu&&Yu.__importStar||function(m){if(m&&m.__esModule)return m;var T={};if(m!=null)for(var w in m)w!=="default"&&Object.prototype.hasOwnProperty.call(m,w)&&e(T,m,w);return u(T,m),T},r=Yu&&Yu.__importDefault||function(m){return m&&m.__esModule?m:{default:m}};Object.defineProperty(a,"__esModule",{value:!0}),a.DomUtils=a.parseFeed=a.getFeed=a.ElementType=a.Tokenizer=a.createDomStream=a.parseDOM=a.parseDocument=a.DefaultHandler=a.DomHandler=a.Parser=void 0;var t=Nne(),i=Nne();Object.defineProperty(a,"Parser",{enumerable:!0,get:function(){return i.Parser}});var o=Su(),l=Su();Object.defineProperty(a,"DomHandler",{enumerable:!0,get:function(){return l.DomHandler}}),Object.defineProperty(a,"DefaultHandler",{enumerable:!0,get:function(){return l.DomHandler}});function s(m,T){var w=new o.DomHandler(void 0,T);return new t.Parser(w,T).end(m),w.root}a.parseDocument=s;function c(m,T){return s(m,T).children}a.parseDOM=c;function d(m,T,w){var E=new o.DomHandler(m,T,w);return new t.Parser(E,T)}a.createDomStream=d;var f=ETe();Object.defineProperty(a,"Tokenizer",{enumerable:!0,get:function(){return r(f).default}}),a.ElementType=n(Sb());var p=Ws(),h=Ws();Object.defineProperty(a,"getFeed",{enumerable:!0,get:function(){return h.getFeed}});var g={xmlMode:!0};function v(m,T){return T===void 0&&(T=g),(0,p.getFeed)(c(m,T))}a.parseFeed=v,a.DomUtils=n(Ws())})(Yu)),Yu}const qFe={"http://schema.org/":{properties:{additionalType:{subPropertyOf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#type"}}},"http://microformats.org/profile/hcard":{}};var Dne;function BFe(){if(Dne)return r3;Dne=1,Object.defineProperty(r3,"__esModule",{value:!0}),r3.MicrodataRdfParser=void 0;const a=LFe(),e=Nr(),u=gTe(),n=vTe(),r=TTe(),t=wTe(),i=vP(),o=qFe;let l=class d7 extends e.Transform{constructor(c){super({readableObjectMode:!0}),this.itemScopeStack=[],this.textBufferStack=[],this.isEmittingReferences=!1,this.pendingItemRefsDomain={},this.pendingItemRefsRangeFinalized={},this.pendingItemRefsRangeCollecting={},c=c||{},this.options=c,this.util=new i.Util(c.dataFactory,c.baseIRI),this.defaultGraph=c.defaultGraph||this.util.dataFactory.defaultGraph(),this.htmlParseListener=c.htmlParseListener,this.vocabRegistry=c.vocabRegistry||o,this.parser=this.initializeParser(!!c.xmlMode)}import(c){const d=new e.PassThrough({readableObjectMode:!0});c.on("error",p=>f.emit("error",p)),c.on("data",p=>d.push(p)),c.on("end",()=>d.push(null));const f=d.pipe(new d7(this.options));return f}_transform(c,d,f){this.parser.write(c.toString()),f()}_flush(c){this.parser.end(),c()}getItemScope(c){let d=this.itemScopeStack.length-(c?2:1);for(;d>0&&!this.itemScopeStack[d];)d--;return this.itemScopeStack[d]}getDepth(){return this.itemScopeStack.length}onTagOpen(c,d){if(!this.isEmittingReferences){if("id"in d){const p=d.id;this.pendingItemRefsRangeCollecting[p]={events:[],counter:0,ids:[]}}for(const p of Object.values(this.pendingItemRefsRangeCollecting))p.counter++,p.events.push({type:"open",name:c,attributes:d})}this.textBufferStack.push(void 0);let f;if("itemscope"in d){let p;if(this.emittingReferencesItemScopeIdGenerator)p=this.emittingReferencesItemScopeIdGenerator();else{p="itemid"in d&&this.util.createSubject(d.itemid)||this.util.dataFactory.blankNode();for(const g of Object.values(this.pendingItemRefsRangeCollecting))g.ids.push(p)}f={subject:p},this.isEmittingReferences&&(f.blockEmission=!0);const h=this.getItemScope();h&&h.vocab&&(f.vocab=h.vocab),this.itemScopeStack.push(f)}else f=this.getItemScope(),this.itemScopeStack.push(void 0);if(f){if("itemtype"in d)for(const p of this.util.createVocabIris(d.itemtype,f,!1))f.vocab||(f.vocab=this.util.deriveVocab(p.value,this.vocabRegistry)),f.blockEmission||this.emitTriple(f.subject,this.util.dataFactory.namedNode(`${i.Util.RDF}type`),p);if("lang"in d&&(f.language=d.lang),"xml:lang"in d&&(f.language=d["xml:lang"]),"itemscope"in d&&!this.isEmittingReferences&&"itemref"in d)for(const p of d.itemref.split(/\s+/u))p in this.pendingItemRefsDomain||(this.pendingItemRefsDomain[p]=[]),this.pendingItemRefsDomain[p].push(f),this.tryToEmitReferences(p,f)}"itemprop"in d&&this.handleItemProperties(d.itemprop,!1,f,c,d),"itemprop-reverse"in d&&this.handleItemProperties(d["itemprop-reverse"],!0,f,c,d)}onText(c){if(!this.isEmittingReferences)for(const d of Object.values(this.pendingItemRefsRangeCollecting))d.events.push({type:"text",data:c});for(const d of this.textBufferStack)d&&d.push(c)}onTagClose(){if(!this.isEmittingReferences)for(const[d,f]of Object.entries(this.pendingItemRefsRangeCollecting))f.counter--,f.events.push({type:"close"}),f.counter===0&&(this.pendingItemRefsRangeFinalized[d]=f,delete this.pendingItemRefsRangeCollecting[d],this.tryToEmitReferences(d));const c=this.getItemScope(!0);if(c){const d=this.getDepth();if(c.predicates&&d in c.predicates)for(const[f,p]of Object.entries(c.predicates[d])){const h=this.util.createLiteral(this.textBufferStack[d].join(""),c);this.emitPredicateTriples(c,p,h,f==="reverse"),delete c.predicates[d][f]}}this.itemScopeStack.pop(),this.textBufferStack.pop()}onEnd(){}initializeParser(c){return new a.Parser({onclosetag:()=>{try{this.onTagClose(),this.htmlParseListener&&this.htmlParseListener.onTagClose()}catch(d){this.emit("error",d)}},onend:()=>{try{this.onEnd(),this.htmlParseListener&&this.htmlParseListener.onEnd()}catch(d){this.emit("error",d)}},onopentag:(d,f)=>{try{this.onTagOpen(d,f),this.htmlParseListener&&this.htmlParseListener.onTagOpen(d,f)}catch(p){this.emit("error",p)}},ontext:d=>{try{this.onText(d),this.htmlParseListener&&this.htmlParseListener.onText(d)}catch(f){this.emit("error",f)}}},{decodeEntities:!0,recognizeSelfClosing:!0,xmlMode:c})}handleItemProperties(c,d,f,p,h){const g=this.getItemScope(!0);if(g){const v=this.getDepth(),m=this.util.createVocabIris(c,g,!0);g.predicates||(g.predicates={}),g.predicates[v]||(g.predicates[v]={});const T=d?"reverse":"forward";g.predicates[v][T]=m;for(const w of this.util.getVocabularyExpansionType(c,g,this.vocabRegistry))m.push(w);if(f&&"itemscope"in h)this.emitPredicateTriples(g,m,f.subject,d),delete g.predicates[v][T];else for(const w of d7.ITEM_PROPERTY_HANDLERS)if(w.canHandle(p,h)){const E=w.getObject(h,this.util,g);this.emitPredicateTriples(g,m,E,d),delete g.predicates[v][T]}g.predicates[v][T]&&(this.textBufferStack[v]=[])}}emitPredicateTriples(c,d,f,p){if(!c.blockEmission)for(const h of d)p?f.termType!=="Literal"&&this.emitTriple(f,h,c.subject):this.emitTriple(c.subject,h,f)}emitTriple(c,d,f){this.push(this.util.dataFactory.quad(c,d,f,this.defaultGraph))}tryToEmitReferences(c,d){const f=this.pendingItemRefsRangeFinalized[c];if(f){let p;if(d){p=[d];const h=this.pendingItemRefsDomain[c].indexOf(d);this.pendingItemRefsDomain[c].splice(h,1)}else p=this.pendingItemRefsDomain[c],delete this.pendingItemRefsDomain[c];if(p){const h=this.itemScopeStack,g=this.textBufferStack;this.isEmittingReferences=!0;for(const v of p){this.itemScopeStack=[v],this.textBufferStack=[void 0];const m=[...f.ids];this.emittingReferencesItemScopeIdGenerator=()=>m.shift();for(const T of f.events)switch(T.type){case"open":this.onTagOpen(T.name,T.attributes);break;case"text":this.onText(T.data);break;case"close":this.onTagClose();break}}this.emittingReferencesItemScopeIdGenerator=void 0,this.itemScopeStack=h,this.textBufferStack=g,this.isEmittingReferences=!1}}}};return r3.MicrodataRdfParser=l,l.ITEM_PROPERTY_HANDLERS=[new u.ItemPropertyHandlerContent,new t.ItemPropertyHandlerUrl("a","href"),new t.ItemPropertyHandlerUrl("area","href"),new t.ItemPropertyHandlerUrl("audio","src"),new t.ItemPropertyHandlerUrl("embed","src"),new t.ItemPropertyHandlerUrl("iframe","src"),new t.ItemPropertyHandlerUrl("img","src"),new t.ItemPropertyHandlerUrl("link","href"),new t.ItemPropertyHandlerUrl("object","data"),new t.ItemPropertyHandlerUrl("source","src"),new t.ItemPropertyHandlerUrl("track","src"),new t.ItemPropertyHandlerUrl("video","src"),new n.ItemPropertyHandlerNumber("data","value"),new n.ItemPropertyHandlerNumber("meter","value"),new r.ItemPropertyHandlerTime],r3}var Fne;function UFe(){return Fne||(Fne=1,(function(a){var e=mp&&mp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=mp&&mp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(DFe(),a),u(gTe(),a),u(vTe(),a),u(TTe(),a),u(wTe(),a),u(FFe(),a),u(PFe(),a),u(jFe(),a),u(BFe(),a),u(vP(),a)})(mp)),mp}var Pne;function QFe(){if(Pne)return KT;Pne=1,Object.defineProperty(KT,"__esModule",{value:!0}),KT.ActorRdfParseHtmlMicrodata=void 0;const a=WB(),e=lt(),u=De(),n=UFe();let r=class extends a.ActorRdfParseHtml{constructor(i){super(i)}async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(e.KeysInitQuery.dataFactory),s=(i.headers?i.headers.get("content-type"):null)?.includes("xml"),c=new n.MicrodataRdfParser({dataFactory:o,baseIRI:i.baseIRI,xmlMode:s});c.on("error",i.error),c.on("data",i.emit);const d=c.onEnd;return c.onEnd=()=>{d.call(c),i.end()},{htmlParseListener:c}}};return KT.ActorRdfParseHtmlMicrodata=r,KT}var jne;function YB(){return jne||(jne=1,(function(a){var e=hp&&hp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=hp&&hp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(QFe(),a)})(hp)),hp}var bp={},n3={},Mne;function VFe(){if(Mne)return n3;Mne=1,Object.defineProperty(n3,"__esModule",{value:!0}),n3.ActorRdfParseHtmlRdfa=void 0;const a=WB(),e=lt(),u=De(),n=hTe();let r=class extends a.ActorRdfParseHtml{constructor(i){super(i)}async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(e.KeysInitQuery.dataFactory),l=i.headers?i.headers.get("content-type"):null,s=(i.headers&&i.headers.get("content-language"))??void 0,c=l&&l.includes("xml")?"xhtml":"html",d=new n.RdfaParser({dataFactory:o,baseIRI:i.baseIRI,profile:c,language:s});d.on("error",i.error),d.on("data",i.emit);const f=d.onEnd;return d.onEnd=()=>{f.call(d),i.end()},{htmlParseListener:d}}};return n3.ActorRdfParseHtmlRdfa=r,n3}var Cne;function ZB(){return Cne||(Cne=1,(function(a){var e=bp&&bp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=bp&&bp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(VFe(),a)})(bp)),bp}var gp={},a3={},vp={},i3={},Lne;function HFe(){if(Lne)return i3;Lne=1,Object.defineProperty(i3,"__esModule",{value:!0}),i3.ActorRdfResolveHypermediaLinks=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return i3.ActorRdfResolveHypermediaLinks=e,i3}var qne;function ATe(){return qne||(qne=1,(function(a){var e=vp&&vp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=vp&&vp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(HFe(),a)})(vp)),vp}var Bne;function kFe(){if(Bne)return a3;Bne=1,Object.defineProperty(a3,"__esModule",{value:!0}),a3.ActorRdfResolveHypermediaLinksNext=void 0;const a=ATe(),e=De();let u=class extends a.ActorRdfResolveHypermediaLinks{constructor(r){super(r)}async test(r){return!r.metadata.next||r.metadata.next.length===0?(0,e.failTest)(`Actor ${this.name} requires a 'next' metadata entry.`):(0,e.passTestVoid)()}async run(r){return{links:r.metadata.next.map(t=>({url:t}))}}};return a3.ActorRdfResolveHypermediaLinksNext=u,a3}var Une;function eU(){return Une||(Une=1,(function(a){var e=gp&&gp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=gp&&gp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(kFe(),a)})(gp)),gp}var _p={},u3={},Qne;function zFe(){if(Qne)return u3;Qne=1,Object.defineProperty(u3,"__esModule",{value:!0}),u3.ActorRdfResolveHypermediaLinksTraverse=void 0;const a=ATe(),e=lt(),u=De();let n=class extends a.ActorRdfResolveHypermediaLinks{constructor(t){super(t),this.upgradeInsecureRequests=t.upgradeInsecureRequests}async test(t){return t.metadata.traverse?t.context.has(e.KeysQuerySourceIdentify.traverse)&&!t.context.get(e.KeysQuerySourceIdentify.traverse)?(0,u.failTest)("Link traversal has been disabled via the context."):(0,u.passTestVoid)():(0,u.failTest)(`Actor ${this.name} requires a 'traverse' metadata entry.`)}async run(t){return{links:t.metadata.traverse.map(i=>{const o=i.url.indexOf("#");return o>=0&&(i.url=i.url.slice(0,o)),i.url.startsWith("http:")&&(this.upgradeInsecureRequests??(globalThis.window&&globalThis.window.location.protocol==="https:"&&!t.context.get(e.KeysHttpProxy.httpProxyHandler)))&&(i.url=i.url.replace("http:","https:")),i})}}};return u3.ActorRdfResolveHypermediaLinksTraverse=n,u3}var Vne;function tU(){return Vne||(Vne=1,(function(a){var e=_p&&_p.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=_p&&_p.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(zFe(),a)})(_p)),_p}var Tp={},o3={},wp={},s3={},Hne;function GFe(){if(Hne)return s3;Hne=1,Object.defineProperty(s3,"__esModule",{value:!0}),s3.ActorRdfSerialize=void 0;const a=w1();let e=class extends a.ActorAbstractMediaTyped{constructor(n){super(n)}};return s3.ActorRdfSerialize=e,s3}var c3={},kne;function $Fe(){if(kne)return c3;kne=1,Object.defineProperty(c3,"__esModule",{value:!0}),c3.ActorRdfSerializeFixedMediaTypes=void 0;const a=w1(),e=De();let u=class extends a.ActorAbstractMediaTypedFixed{constructor(r){super(r)}async testHandleChecked(){return(0,e.passTestVoid)()}};return c3.ActorRdfSerializeFixedMediaTypes=u,c3}var zne;function rU(){return zne||(zne=1,(function(a){var e=wp&&wp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=wp&&wp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(GFe(),a),u($Fe(),a)})(wp)),wp}var Gne;function XFe(){if(Gne)return o3;Gne=1,Object.defineProperty(o3,"__esModule",{value:!0}),o3.ActorRdfSerializeN3=void 0;const a=rU(),e=Tl;let u=class extends a.ActorRdfSerializeFixedMediaTypes{constructor(r){super(r)}async runHandle(r,t){const i=new e.StreamWriter({format:t});let o;return"pipe"in r.quadStream?(r.quadStream.on("error",l=>i.emit("error",l)),o=r.quadStream.pipe(i)):o=i.import(r.quadStream),{data:o,triples:t==="text/turtle"||t==="application/n-triples"||t==="text/n3"}}};return o3.ActorRdfSerializeN3=u,o3}var $ne;function nU(){return $ne||($ne=1,(function(a){var e=Tp&&Tp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Tp&&Tp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(XFe(),a)})(Tp)),Tp}var Sp={},l3={},Ep={},d3={},Ap={},f3={},dC={},Xne;function _P(){return Xne||(Xne=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ERROR_CODES=a.ErrorCoded=void 0;class e extends Error{constructor(n,r){super(n),this.code=r}}a.ErrorCoded=e,(function(u){u.COLLIDING_KEYWORDS="colliding keywords",u.CONFLICTING_INDEXES="conflicting indexes",u.CYCLIC_IRI_MAPPING="cyclic IRI mapping",u.INVALID_ID_VALUE="invalid @id value",u.INVALID_INDEX_VALUE="invalid @index value",u.INVALID_NEST_VALUE="invalid @nest value",u.INVALID_PREFIX_VALUE="invalid @prefix value",u.INVALID_PROPAGATE_VALUE="invalid @propagate value",u.INVALID_REVERSE_VALUE="invalid @reverse value",u.INVALID_IMPORT_VALUE="invalid @import value",u.INVALID_VERSION_VALUE="invalid @version value",u.INVALID_BASE_IRI="invalid base IRI",u.INVALID_CONTAINER_MAPPING="invalid container mapping",u.INVALID_CONTEXT_ENTRY="invalid context entry",u.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",u.INVALID_DEFAULT_LANGUAGE="invalid default language",u.INVALID_INCLUDED_VALUE="invalid @included value",u.INVALID_IRI_MAPPING="invalid IRI mapping",u.INVALID_JSON_LITERAL="invalid JSON literal",u.INVALID_KEYWORD_ALIAS="invalid keyword alias",u.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",u.INVALID_LANGUAGE_MAPPING="invalid language mapping",u.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",u.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",u.INVALID_LOCAL_CONTEXT="invalid local context",u.INVALID_REMOTE_CONTEXT="invalid remote context",u.INVALID_REVERSE_PROPERTY="invalid reverse property",u.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",u.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",u.INVALID_SCOPED_CONTEXT="invalid scoped context",u.INVALID_SCRIPT_ELEMENT="invalid script element",u.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",u.INVALID_TERM_DEFINITION="invalid term definition",u.INVALID_TYPE_MAPPING="invalid type mapping",u.INVALID_TYPE_VALUE="invalid type value",u.INVALID_TYPED_VALUE="invalid typed value",u.INVALID_VALUE_OBJECT="invalid value object",u.INVALID_VALUE_OBJECT_VALUE="invalid value object value",u.INVALID_VOCAB_MAPPING="invalid vocab mapping",u.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",u.KEYWORD_REDEFINITION="keyword redefinition",u.LOADING_DOCUMENT_FAILED="loading document failed",u.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",u.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",u.PROCESSING_MODE_CONFLICT="processing mode conflict",u.PROTECTED_TERM_REDEFINITION="protected term redefinition",u.CONTEXT_OVERFLOW="context overflow",u.INVALID_BASE_DIRECTION="invalid base direction",u.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",u.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",u.INVALID_EMBEDDED_NODE="invalid embedded node",u.INVALID_ANNOTATION="invalid annotation"})(a.ERROR_CODES||(a.ERROR_CODES={}))})(dC)),dC}var p3={},Kne;function OTe(){if(Kne)return p3;Kne=1,Object.defineProperty(p3,"__esModule",{value:!0}),p3.FetchDocumentLoader=void 0;const a=_P(),e=X4(),u=Xn();class n{constructor(t){this.fetcher=t}async load(t){const i=await(this.fetcher||fetch)(t,{headers:new Headers({accept:"application/ld+json"})});if(i.ok&&i.headers){let o=i.headers.get("Content-Type");if(o){const l=o.indexOf(";");l>0&&(o=o.substr(0,l))}if(o==="application/ld+json")return await i.json();if(i.headers.has("Link")){let l;if(i.headers.forEach((s,c)=>{if(c==="link"){const d=(0,e.parse)(s);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(l)throw new Error("Multiple JSON-LD alternate links were found on "+t);l=(0,u.resolve)(f.uri,t)}}}),l)return this.load(l)}throw new a.ErrorCoded(`Unsupported JSON-LD media type ${o}`,a.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(i.statusText||`Status code: ${i.status}`)}}return p3.FetchDocumentLoader=n,p3}var fC={},h3={},Jne;function aU(){if(Jne)return h3;Jne=1,Object.defineProperty(h3,"__esModule",{value:!0}),h3.Util=void 0;class a{static isCompactIri(u){return u.indexOf(":")>0&&!(u&&u[0]==="#")}static getPrefix(u,n){if(u&&u[0]==="#")return null;const r=u.indexOf(":");if(r>=0){if(u.length>r+1&&u.charAt(r+1)==="/"&&u.charAt(r+2)==="/")return null;const t=u.substr(0,r);if(t==="_")return null;if(n[t])return t}return null}static getContextValueId(u){if(u===null||typeof u=="string")return u;const n=u["@id"];return n||null}static isSimpleTermDefinitionPrefix(u,n){return!a.isPotentialKeyword(u)&&(n.allowPrefixNonGenDelims||typeof u=="string"&&(u[0]==="_"||a.isPrefixIriEndingWithGenDelim(u)))}static isPotentialKeyword(u){return typeof u=="string"&&a.KEYWORD_REGEX.test(u)}static isPrefixIriEndingWithGenDelim(u){return a.ENDS_WITH_GEN_DELIM.test(u)}static isPrefixValue(u){return u&&(typeof u=="string"||u&&typeof u=="object")}static isValidIri(u){return!!(u&&a.IRI_REGEX.test(u))}static isValidIriWeak(u){return!!u&&u[0]!==":"&&a.IRI_REGEX_WEAK.test(u)}static isValidKeyword(u){return a.VALID_KEYWORDS[u]}static isTermProtected(u,n){const r=u[n];return typeof r!="string"&&r&&r["@protected"]}static hasProtectedTerms(u){for(const n of Object.keys(u))if(a.isTermProtected(u,n))return!0;return!1}static isReservedInternalKeyword(u){return u.startsWith("@__")}static deepEqual(u,n){const r=Object.keys(u),t=Object.keys(n);return r.length!==t.length?!1:r.every(i=>{const o=u[i],l=n[i];return o===l||o!==null&&l!==null&&typeof o=="object"&&typeof l=="object"&&this.deepEqual(o,l)})}}return a.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,a.IRI_REGEX_WEAK=/(?::[^:])|\//,a.KEYWORD_REGEX=/^@[a-z]+$/i,a.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,a.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,a.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,a.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},a.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],a.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],a.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],a.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],a.CONTAINERS_1_0=["@list","@set","@index"],h3.Util=a,h3}var Wne;function xTe(){return Wne||(Wne=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.defaultExpandOptions=a.JsonLdContextNormalized=void 0;const e=Xn(),u=_P(),n=aU();class r{constructor(i){this.contextRaw=i}getContextRaw(){return this.contextRaw}expandTerm(i,o,l=a.defaultExpandOptions){const s=this.contextRaw[i];if(s===null||s&&s["@id"]===null)return null;let c=!0;if(s&&o){const v=n.Util.getContextValueId(s);if(v&&v!==i)if(typeof v!="string"||!n.Util.isValidIri(v)&&!n.Util.isValidKeyword(v))n.Util.isPotentialKeyword(v)||(c=!1);else return v}const d=n.Util.getPrefix(i,this.contextRaw),f=this.contextRaw["@vocab"],p=(!!f||f==="")&&f.indexOf(":")<0,h=this.contextRaw["@base"],g=n.Util.isPotentialKeyword(i);if(d){const v=this.contextRaw[d],m=n.Util.getContextValueId(v);if(m){if(typeof v=="string"||!l.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(m,l))return i}else if(m[0]!=="_"&&!g&&!v["@prefix"]&&!(i in this.contextRaw))return i;return m+i.substr(d.length+1)}}else if(o&&(f||f===""||l.allowVocabRelativeToBase&&h&&p)&&!g&&!n.Util.isCompactIri(i))if(p){if(l.allowVocabRelativeToBase)return(f||h?(0,e.resolve)(f,h):"")+i;throw new u.ErrorCoded(`Relative vocab expansion for term '${i}' with vocab '${f}' is not allowed.`,u.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+i;else if(!o&&h&&!g&&!n.Util.isCompactIri(i))return(0,e.resolve)(i,h);if(c)return i;throw new u.ErrorCoded(`Invalid IRI mapping found for context entry '${i}': '${JSON.stringify(s)}'`,u.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(i,o){if(o&&this.contextRaw["@vocab"]&&i.startsWith(this.contextRaw["@vocab"]))return i.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&i.startsWith(this.contextRaw["@base"]))return i.substr(this.contextRaw["@base"].length);const l={prefix:"",suffix:i};for(const s in this.contextRaw){const c=this.contextRaw[s];if(c&&!n.Util.isPotentialKeyword(s)){const d=n.Util.getContextValueId(c);if(i.startsWith(d)){const f=i.substr(d.length);if(f)f.length<l.suffix.length&&(l.prefix=s,l.suffix=f);else if(o)return s}}}return l.prefix?l.prefix+":"+l.suffix:i}}a.JsonLdContextNormalized=r,a.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(fC)),fC}var Yne;function KFe(){if(Yne)return f3;Yne=1,Object.defineProperty(f3,"__esModule",{value:!0}),f3.ContextParser=void 0;const a=Xn(),e=_P(),u=OTe(),n=xTe(),r=aU();class t{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new u.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,l,s){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,s);if(!r.Util.REGEX_LANGUAGE_TAG.test(o)){if(l)throw new e.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,s);return!1}return!0}static validateDirection(o,l){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);if(!r.Util.REGEX_DIRECTION_TAG.test(o)){if(l)throw new e.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const l of Object.keys(o)){let s=o[l];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||r.Util.isValidKeyword(s["@reverse"]))throw new e.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);s=o[l]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],r.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return o}expandPrefixedTerms(o,l,s){const c=o.getContextRaw();for(const d of s||Object.keys(c))if(r.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!r.Util.isReservedInternalKeyword(d)){const f=c[d];if(r.Util.isPotentialKeyword(d)&&r.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof c[d]=="object"&&!(c[d]["@protected"]||c[d]["@container"]==="@set")))throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.KEYWORD_REDEFINITION);if(r.Util.ALIAS_RANGE_BLACKLIST.indexOf(r.Util.getContextValueId(f))>=0)throw new e.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&r.Util.isPotentialKeyword(r.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new e.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);for(;r.Util.isPrefixValue(c[d]);){const p=c[d];let h=!1;if(typeof p=="string")c[d]=o.expandTerm(p,!0),h=h||p!==c[d];else{const g=p["@id"],v=p["@type"],m=!("@prefix"in p)||r.Util.isValidIri(d);if("@id"in p)g!=null&&typeof g=="string"&&(c[d]=Object.assign(Object.assign({},c[d]),{"@id":o.expandTerm(g,!0)}),h=h||g!==c[d]["@id"]);else if(!r.Util.isPotentialKeyword(d)&&m){const T=o.expandTerm(d,!0);T!==d&&(c[d]=Object.assign(Object.assign({},c[d]),{"@id":T}),h=!0)}if(v&&typeof v=="string"&&v!=="@vocab"&&(!p["@container"]||!p["@container"]["@type"])&&m){let T=o.expandTerm(v,!0);l&&v===T&&(T=o.expandTerm(v,!1)),T!==v&&(h=!0,c[d]=Object.assign(Object.assign({},c[d]),{"@type":T}))}}if(!h)break}}}normalize(o,{processingMode:l,normalizeLanguageTags:s}){if(s||l===1)for(const c of Object.keys(o))if(c==="@language"&&typeof o[c]=="string")o[c]=o[c].toLowerCase();else{const d=o[c];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[c]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const l of Object.keys(o)){const s=o[l];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")o[l]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const c={};for(const d of s["@container"])c[d]=!0;o[l]=Object.assign(Object.assign({},s),{"@container":c})}}}}applyScopedProtected(o,{processingMode:l},s){if(l&&l>=1.1&&o["@protected"]){for(const c of Object.keys(o))if(!r.Util.isReservedInternalKeyword(c)&&!r.Util.isPotentialKeyword(c)&&!r.Util.isTermProtected(o,c)){const d=o[c];d&&typeof d=="object"?"@protected"in o[c]||(o[c]=Object.assign(Object.assign({},o[c]),{"@protected":!0})):(o[c]={"@id":d,"@protected":!0},r.Util.isSimpleTermDefinitionPrefix(d,s)&&(o[c]=Object.assign(Object.assign({},o[c]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,l,s,c){for(const d of c??Object.keys(l))if(r.Util.isTermProtected(o,d)&&(typeof l[d]=="string"?l[d]={"@id":l[d],"@protected":!0}:l[d]=Object.assign(Object.assign({},l[d]),{"@protected":!0}),!r.Util.deepEqual(o[d],l[d])))throw new e.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(r.Util.getContextValueId(o[d]))} to ${JSON.stringify(r.Util.getContextValueId(l[d]))}`,e.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:l}){for(const s of Object.keys(o)){if(r.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new e.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(o[s])}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);const c=o[s],d=typeof c;if(r.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(c!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @vocab IRI: ${c}`,e.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(c!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @base IRI: ${o[s]}`,e.ERROR_CODES.INVALID_BASE_IRI);break;case"language":c!==null&&t.validateLanguage(c,!0,e.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(c!==null&&d!=="number")throw new e.ErrorCoded(`Found an invalid @version number: ${c}`,e.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":c!==null&&t.validateDirection(c,!0);break;case"propagate":if(l===1)throw new e.ErrorCoded(`Found an illegal @propagate keyword: ${c}`,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(c!==null&&d!=="boolean")throw new e.ErrorCoded(`Found an invalid @propagate value: ${c}`,e.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(r.Util.isValidKeyword(s)&&r.Util.isValidKeyword(r.Util.getContextValueId(c)))throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${r.Util.getContextValueId(c)}'`,e.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(c!==null)switch(d){case"string":if(r.Util.getPrefix(c,o)===s)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(c==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${c}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(c)&&c!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${c}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!r.Util.isCompactIri(s)&&!("@id"in c)&&(c["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new e.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(c)){const p=c[f];if(p)switch(f){case"@id":if(r.Util.isValidKeyword(p)&&p!=="@type"&&p!=="@id"&&p!=="@graph"&&p!=="@nest")throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(p==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(p)&&p!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof p!="string")throw new e.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.getPrefix(p,o)===s)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(c["@container"]==="@type"&&p!=="@id"&&p!=="@vocab")throw new e.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${p}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof p!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(p!=="@id"&&p!=="@vocab"&&(l===1||p!=="@json")&&(l===1||p!=="@none")&&(p[0]==="_"||!r.Util.isValidIri(p)))throw new e.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${p}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof p=="string"&&c["@id"]&&c["@id"]!==p)throw new e.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${p}' and '${c["@id"]}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in c)throw new e.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(l===1&&(Object.keys(p).length>1||r.Util.CONTAINERS_1_0.indexOf(Object.keys(p)[0])<0))throw new e.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(p)}') in 1.0, must be only one of ${r.Util.CONTAINERS_1_0.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const h of Object.keys(p)){if(h==="@list"&&c["@reverse"])throw new e.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(r.Util.CONTAINERS.indexOf(h)<0)throw new e.ErrorCoded(`Invalid term @container for '${s}' ('${h}'), must be one of ${r.Util.CONTAINERS.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":t.validateLanguage(p,!0,e.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":t.validateDirection(p,!0);break;case"@prefix":if(p!==null&&typeof p!="boolean")throw new e.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in c)&&!r.Util.isValidIri(s))throw new e.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(l===1||!c["@container"]||!c["@container"]["@index"])throw new e.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(r.Util.isPotentialKeyword(p)&&p!=="@nest")throw new e.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new e.ErrorCoded(`Found an invalid term value: '${s}': '${c}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,l,s){return typeof o=="string"||(s&&!("@base"in o)&&l.parentContext&&typeof l.parentContext=="object"&&"@base"in l.parentContext&&(o["@base"]=l.parentContext["@base"],l.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),l.baseIRI&&!l.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!r.Util.isValidIri(o["@base"])&&(o["@base"]=(0,a.resolve)(o["@base"],l.parentContext&&l.parentContext["@base"]||l.baseIRI)):(o["@base"]=l.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,l){if(!r.Util.isValidIri(o))try{o=(0,a.resolve)(o,l)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,l,s){for(const c of s??Object.keys(o)){const d=o[c];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!l.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[c]:Object.assign({},o[c])});delete f[c]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},l),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new e.ErrorCoded(f.message,e.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[c]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},l),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,l={},s={}){const{baseIRI:c,parentContext:d,external:f,processingMode:p=t.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:h,ignoreProtection:g,minimalProcessing:v}=l,m=l.remoteContexts||{};if(Object.keys(m).length>=this.remoteContextsDepthLimit)throw new e.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(m),e.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!g&&d&&r.Util.hasProtectedTerms(d))throw new e.ErrorCoded("Illegal context nullification when terms are protected",e.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},l,!1))}else if(typeof o=="string"){const T=this.normalizeContextIri(o,c),w=this.getOverriddenLoad(T,l);if(w)return new n.JsonLdContextNormalized(w);const E=await this.parse(await this.load(T),Object.assign(Object.assign({},l),{baseIRI:T,external:!0,remoteContexts:Object.assign(Object.assign({},m),{[T]:!0})}));return this.applyBaseEntry(E.getContextRaw(),l,!0),E}else if(Array.isArray(o)){const T=[],w=await Promise.all(o.map((S,N)=>{if(typeof S=="string"){const j=this.normalizeContextIri(S,c);T[N]=j;const q=this.getOverriddenLoad(j,l);return q||this.load(j)}else return S}));if(v)return new n.JsonLdContextNormalized(w);const E=await w.reduce((S,N,j)=>S.then(q=>this.parse(N,Object.assign(Object.assign({},l),{baseIRI:T[j]||l.baseIRI,external:!!T[j]||l.external,parentContext:q.getContextRaw(),remoteContexts:T[j]?Object.assign(Object.assign({},m),{[T[j]]:!0}):m}),{skipValidation:j<w.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(E.getContextRaw(),l,!0),E}else if(typeof o=="object"){if("@context"in o)return await this.parse(o["@context"],l);if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,l,!0),this.containersToHash(o),v)return new n.JsonLdContextNormalized(o);let T={};if("@import"in o)if(p>=1.1){if(typeof o["@import"]!="string")throw new e.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],e.ERROR_CODES.INVALID_IMPORT_VALUE);T=await this.loadImportContext(this.normalizeContextIri(o["@import"],c)),delete o["@import"]}else throw new e.ErrorCoded("Context importing is not supported in JSON-LD 1.0",e.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(T,{processingMode:p},n.defaultExpandOptions);const w=Object.assign(T,o);this.idifyReverseTerms(w),this.normalize(w,{processingMode:p,normalizeLanguageTags:h}),this.applyScopedProtected(w,{processingMode:p},n.defaultExpandOptions);const E=Object.keys(w),S=[];if(typeof d=="object")for(const j in d)j in w?S.push(j):w[j]=d[j];await this.parseInnerContexts(w,l,E);const N=new n.JsonLdContextNormalized(w);return(w&&w["@version"]||t.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?w["@vocab"]=d["@vocab"]+o["@vocab"]:(r.Util.isCompactIri(o["@vocab"])||o["@vocab"]in w)&&(w["@vocab"]=N.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(N,this.expandContentTypeToBase,E),!g&&d&&p>=1.1&&this.validateKeywordRedefinitions(d,w,n.defaultExpandOptions,S),this.validateContext&&!s.skipValidation&&this.validate(w,{processingMode:p}),N}else throw new e.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,e.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const l=this.documentCache[o];if(l)return l;let s;try{s=await this.documentLoader.load(o)}catch(c){throw new e.ErrorCoded(`Failed to load remote context ${o}: ${c.message}`,e.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new e.ErrorCoded(`Missing @context in remote context at ${o}`,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=s["@context"]}getOverriddenLoad(o,l){if(o in(l.remoteContexts||{})){if(l.ignoreRemoteScopedContexts)return o;throw new e.ErrorCoded("Detected a cyclic context inclusion of "+o,e.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let l=await this.load(o);if(typeof l!="object"||Array.isArray(l))throw new e.ErrorCoded("An imported context must be a single object: "+o,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in l)throw new e.ErrorCoded("An imported context can not import another context: "+o,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);return l=Object.assign({},l),this.containersToHash(l),l}}return t.DEFAULT_PROCESSING_MODE=1.1,f3.ContextParser=t,f3}var pC={},Zne;function JFe(){return Zne||(Zne=1,Object.defineProperty(pC,"__esModule",{value:!0})),pC}var hC={},eae;function WFe(){return eae||(eae=1,Object.defineProperty(hC,"__esModule",{value:!0})),hC}var tae;function RTe(){return tae||(tae=1,(function(a){var e=Ap&&Ap.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ap&&Ap.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(KFe(),a),u(_P(),a),u(OTe(),a),u(JFe(),a),u(WFe(),a),u(xTe(),a),u(aU(),a)})(Ap)),Ap}var y3={},rae;function YFe(){if(rae)return y3;rae=1,Object.defineProperty(y3,"__esModule",{value:!0}),y3.SeparatorType=void 0;let a=class{constructor(u){this.label=u}};return y3.SeparatorType=a,a.COMMA=new a(","),a.OBJECT_START=new a("{"),a.OBJECT_END=new a("}"),a.OBJECT_END_COMMA=new a("},"),a.ARRAY_START=new a("["),a.ARRAY_END=new a("]"),a.ARRAY_END_COMMA=new a("],"),a.GRAPH_FIELD_NONCOMPACT=new a('"@graph": ['),a.GRAPH_FIELD_COMPACT=new a('"@graph":['),a.CONTEXT_FIELD=new a('"@context":'),y3}var m3={},nae;function NTe(){if(nae)return m3;nae=1,Object.defineProperty(m3,"__esModule",{value:!0}),m3.Util=void 0;const a=RTe();class e{static termToValue(n,r,t={compactIds:!1,useNativeTypes:!1}){switch(n.termType){case"NamedNode":const i=r.compactIri(n.value,t.vocab);return t.compactIds?i:{"@id":i};case"DefaultGraph":return t.compactIds?n.value:{"@id":n.value};case"BlankNode":const o=`_:${n.value}`;return t.compactIds?o:{"@id":o};case"Literal":if(n.datatype.value===e.RDF_JSON){let c;try{c=JSON.parse(n.value)}catch(d){throw new a.ErrorCoded("Invalid JSON literal: "+d.message,a.ERROR_CODES.INVALID_JSON_LITERAL)}return{"@value":c,"@type":"@json"}}if(t.rdfDirection==="i18n-datatype"&&n.datatype.value.startsWith(e.I18N)){const[c,d]=n.datatype.value.substr(e.I18N.length,n.datatype.value.length).split("_");return Object.assign(Object.assign({"@value":n.value},c?{"@language":c}:{}),d?{"@direction":d}:{})}const l=n.datatype.value===e.XSD_STRING,s={"@value":!l&&t.useNativeTypes?e.stringToNativeType(n.value,n.datatype.value):n.value};return n.language?Object.assign(Object.assign({},s),{"@language":n.language}):!l&&typeof s["@value"]=="string"?Object.assign(Object.assign({},s),{"@type":n.datatype.value}):s}}static stringToNativeType(n,r){if(r.startsWith(e.XSD))switch(r.substr(e.XSD.length)){case"boolean":if(n==="true")return!0;if(n==="false")return!1;throw new Error(`Invalid xsd:boolean value '${n}'`);case"integer":case"number":case"int":case"byte":case"long":const i=parseInt(n,10);if(isNaN(i))throw new Error(`Invalid xsd:integer value '${n}'`);return i;case"float":case"double":const o=parseFloat(n);if(isNaN(o))throw new Error(`Invalid xsd:float value '${n}'`);return o}return n}}return m3.Util=e,e.XSD="http://www.w3.org/2001/XMLSchema#",e.XSD_STRING=e.XSD+"string",e.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",e.RDF_TYPE=e.RDF+"type",e.RDF_JSON=e.RDF+"JSON",e.I18N="https://www.w3.org/ns/i18n#",m3}var aae;function ZFe(){if(aae)return d3;aae=1,Object.defineProperty(d3,"__esModule",{value:!0}),d3.JsonLdSerializer=void 0;const a=RTe(),e=YFe(),u=NTe(),n=Nr();let r=class ITe extends n.Transform{constructor(i={}){super({objectMode:!0}),this.indentation=0,this.options=i,this.options.baseIRI&&!this.options.context&&(this.options.context={"@base":this.options.baseIRI}),this.options.context?(this.originalContext=this.options.context,this.context=new a.ContextParser().parse(this.options.context,{baseIRI:this.options.baseIRI})):this.context=Promise.resolve(new a.JsonLdContextNormalized({}))}import(i){const o=new n.PassThrough({objectMode:!0});i.on("error",s=>l.emit("error",s)),i.on("data",s=>o.push(s)),i.on("end",()=>o.push(null));const l=o.pipe(new ITe(this.options));return l}_transform(i,o,l){this.context.then(s=>{this.transformQuad(i,s),l()}).catch(l)}async list(i){const o=await this.context;return{"@list":i.map(l=>u.Util.termToValue(l,o,this.options))}}_flush(i){return this.opened||this.pushDocumentStart(),this.lastPredicate&&this.endPredicate(),this.lastSubject&&this.endSubject(),this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.endGraph(),this.endDocument(),i(null,null)}transformQuad(i,o){this.opened||this.pushDocumentStart();const l=this.lastGraph&&this.lastGraph.termType!=="DefaultGraph"&&this.lastGraph.equals(i.subject);if(!l&&(!this.lastGraph||!i.graph.equals(this.lastGraph))){let s=i.graph.termType!=="DefaultGraph"&&this.lastSubject&&this.lastSubject.equals(i.graph);this.lastGraph&&(this.lastGraph.termType!=="DefaultGraph"?(this.endPredicate(),this.endSubject(),this.endGraph(!0),s=!1):s?(this.endPredicate(!0),this.lastSubject=null):(this.endPredicate(),this.endSubject(!0))),i.graph.termType!=="DefaultGraph"&&(s||this.pushId(i.graph,!0,o),this.pushSeparator(this.options.space?e.SeparatorType.GRAPH_FIELD_NONCOMPACT:e.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++),this.lastGraph=i.graph}(!this.lastSubject||!i.subject.equals(this.lastSubject))&&(l?(this.endPredicate(),this.endSubject(),this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END_COMMA),this.lastGraph=i.graph):(this.lastSubject&&(this.endPredicate(),this.endSubject(!0)),this.pushId(i.subject,!0,o)),this.lastSubject=i.subject),(!this.lastPredicate||!i.predicate.equals(this.lastPredicate))&&(this.lastPredicate&&this.endPredicate(!0),this.pushPredicate(i.predicate,o)),this.pushObject(i.object,o)}pushDocumentStart(){this.opened=!0,this.originalContext&&!this.options.excludeContext?(this.pushSeparator(e.SeparatorType.OBJECT_START),this.indentation++,this.pushSeparator(e.SeparatorType.CONTEXT_FIELD),this.pushIndented(JSON.stringify(this.originalContext,null,this.options.space)+","),this.pushSeparator(this.options.space?e.SeparatorType.GRAPH_FIELD_NONCOMPACT:e.SeparatorType.GRAPH_FIELD_COMPACT),this.indentation++):(this.pushSeparator(e.SeparatorType.ARRAY_START),this.indentation++)}pushId(i,o,l){if(i.termType==="Quad")this.pushNestedQuad(i,!0,l);else{const s=i.termType==="BlankNode"?"_:"+i.value:l.compactIri(i.value,!1);o?this.pushSeparator(e.SeparatorType.OBJECT_START):(this.push(e.SeparatorType.OBJECT_START.label),this.options.space&&this.push(`
`)),this.indentation++,this.pushIndented(this.options.space?`"@id": "${s}",`:`"@id":"${s}",`)}}pushPredicate(i,o){let l=i.value;!this.options.useRdfType&&l===u.Util.RDF_TYPE&&(l="@type",this.objectOptions=Object.assign(Object.assign({},this.options),{compactIds:!0,vocab:!0}));const s=o.compactIri(l,!0);this.pushIndented(this.options.space?`"${s}": [`:`"${s}":[`),this.indentation++,this.lastPredicate=i}pushObject(i,o){if(this.hadObjectForPredicate?this.pushSeparator(e.SeparatorType.COMMA):this.hadObjectForPredicate=!0,i.termType==="Quad"){const s=this.lastSubject,c=this.lastPredicate;this.hadObjectForPredicate=!1,this.pushNestedQuad(i,!1,o),this.endSubject(!1),this.hadObjectForPredicate=!0,this.lastPredicate=c,this.lastSubject=s;return}let l;try{i["@list"]?l=i:l=u.Util.termToValue(i,o,this.objectOptions||this.options)}catch(s){return this.emit("error",s)}this.pushIndented(JSON.stringify(l,null,this.options.space))}pushNestedQuad(i,o,l){this.pushSeparator(e.SeparatorType.OBJECT_START),this.indentation++,this.pushIndented(this.options.space?'"@id": ':'"@id":',!1),i.graph.termType!=="DefaultGraph"&&this.emit("error",new Error(`Found a nested quad with the non-default graph: ${i.graph.value}`)),this.pushId(i.subject,!1,l),this.pushPredicate(i.predicate,l),this.pushObject(i.object,l),this.endPredicate(!1),this.endSubject(o)}endDocument(){this.opened=!1,this.originalContext&&!this.options.excludeContext?(this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(e.SeparatorType.OBJECT_END)):(this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END))}endPredicate(i){this.indentation--,this.pushSeparator(i?e.SeparatorType.ARRAY_END_COMMA:e.SeparatorType.ARRAY_END),this.hadObjectForPredicate=!1,this.objectOptions=null,this.lastPredicate=null}endSubject(i){this.indentation--,this.pushSeparator(i?e.SeparatorType.OBJECT_END_COMMA:e.SeparatorType.OBJECT_END),this.lastSubject=null}endGraph(i){this.indentation--,this.pushSeparator(e.SeparatorType.ARRAY_END),this.indentation--,this.pushSeparator(i?e.SeparatorType.OBJECT_END_COMMA:e.SeparatorType.OBJECT_END),this.lastGraph=null}pushSeparator(i){this.pushIndented(i.label)}pushIndented(i,o=!0){const l=this.getIndentPrefix(),s=i.split(`
`).map(c=>l+c).join(`
`);this.push(s),this.options.space&&o&&this.push(`
`)}getIndentPrefix(){return this.options.space?this.options.space.repeat(this.indentation):""}};return d3.JsonLdSerializer=r,d3}var iae;function ePe(){return iae||(iae=1,(function(a){var e=Ep&&Ep.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ep&&Ep.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(ZFe(),a),u(NTe(),a)})(Ep)),Ep}var uae;function tPe(){if(uae)return l3;uae=1,Object.defineProperty(l3,"__esModule",{value:!0}),l3.ActorRdfSerializeJsonLd=void 0;const a=rU(),e=ePe();let u=class extends a.ActorRdfSerializeFixedMediaTypes{constructor(r){super(r)}async runHandle(r,t,i){const o=new e.JsonLdSerializer({space:" ".repeat(this.jsonStringifyIndentSpaces)});let l;return"pipe"in r.quadStream?(r.quadStream.on("error",s=>o.emit("error",s)),l=r.quadStream.pipe(o)):l=o.import(r.quadStream),{data:l}}};return l3.ActorRdfSerializeJsonLd=u,l3}var oae;function iU(){return oae||(oae=1,(function(a){var e=Sp&&Sp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Sp&&Sp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(tPe(),a)})(Sp)),Sp}var Op={},b3={},sD={},sae;function rPe(){if(sae)return sD;sae=1,Object.defineProperty(sD,"__esModule",{value:!0});function a(u,n){return new Promise((r,t)=>{u.on("end",()=>r(n)),u.on("error",t)})}function e(u){const n=[];return a(u.on("data",r=>n.push(r)),n)}return sD.default=e,sD}var qs={},zc={},g3={},v3={},cae;function nPe(){if(cae)return v3;cae=1,Object.defineProperty(v3,"__esModule",{value:!0}),v3.fragment=void 0;function a(n){let r=n;(r.endsWith("/")||r.endsWith("#"))&&(r=r.slice(0,r.length-1));const t=[];r.lastIndexOf("/")>0&&t.push(r.lastIndexOf("/")),r.lastIndexOf("#")>0&&t.push(r.lastIndexOf("#"));const i=Math.max(...t);return r.slice(i+1)}function e(n){var r;const t=(r=n.split(/[^a-z0-9]+/ig).filter(i=>i!=="").map(i=>i[0].toUpperCase()+i.slice(1)).join("").match(/[a-z][a-z0-9]+/ig))===null||r===void 0?void 0:r[0];return typeof t>"u"?void 0:t[0].toLowerCase()+t.slice(1)}function u(n){let r=a(n);return r=r?e(r):void 0,r||"v"}return v3.fragment=u,v3}var xp={},Rp={},Bs={},cD={exports:{}},lae;function aPe(){return lae||(lae=1,(function(a,e){var u=typeof globalThis<"u"&&globalThis||typeof self<"u"&&self||typeof nb<"u"&&nb,n=(function(){function t(){this.fetch=!1,this.DOMException=u.DOMException}return t.prototype=u,new t})();(function(t){(function(i){var o=typeof t<"u"&&t||typeof self<"u"&&self||typeof nb<"u"&&nb||{},l={searchParams:"URLSearchParams"in o,iterable:"Symbol"in o&&"iterator"in Symbol,blob:"FileReader"in o&&"Blob"in o&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in o,arrayBuffer:"ArrayBuffer"in o};function s(H){return H&&DataView.prototype.isPrototypeOf(H)}if(l.arrayBuffer)var c=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],d=ArrayBuffer.isView||function(H){return H&&c.indexOf(Object.prototype.toString.call(H))>-1};function f(H){if(typeof H!="string"&&(H=String(H)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(H)||H==="")throw new TypeError('Invalid character in header field name: "'+H+'"');return H.toLowerCase()}function p(H){return typeof H!="string"&&(H=String(H)),H}function h(H){var V={next:function(){var G=H.shift();return{done:G===void 0,value:G}}};return l.iterable&&(V[Symbol.iterator]=function(){return V}),V}function g(H){this.map={},H instanceof g?H.forEach(function(V,G){this.append(G,V)},this):Array.isArray(H)?H.forEach(function(V){if(V.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+V.length);this.append(V[0],V[1])},this):H&&Object.getOwnPropertyNames(H).forEach(function(V){this.append(V,H[V])},this)}g.prototype.append=function(H,V){H=f(H),V=p(V);var G=this.map[H];this.map[H]=G?G+", "+V:V},g.prototype.delete=function(H){delete this.map[f(H)]},g.prototype.get=function(H){return H=f(H),this.has(H)?this.map[H]:null},g.prototype.has=function(H){return this.map.hasOwnProperty(f(H))},g.prototype.set=function(H,V){this.map[f(H)]=p(V)},g.prototype.forEach=function(H,V){for(var G in this.map)this.map.hasOwnProperty(G)&&H.call(V,this.map[G],G,this)},g.prototype.keys=function(){var H=[];return this.forEach(function(V,G){H.push(G)}),h(H)},g.prototype.values=function(){var H=[];return this.forEach(function(V){H.push(V)}),h(H)},g.prototype.entries=function(){var H=[];return this.forEach(function(V,G){H.push([G,V])}),h(H)},l.iterable&&(g.prototype[Symbol.iterator]=g.prototype.entries);function v(H){if(!H._noBody){if(H.bodyUsed)return Promise.reject(new TypeError("Already read"));H.bodyUsed=!0}}function m(H){return new Promise(function(V,G){H.onload=function(){V(H.result)},H.onerror=function(){G(H.error)}})}function T(H){var V=new FileReader,G=m(V);return V.readAsArrayBuffer(H),G}function w(H){var V=new FileReader,G=m(V),Z=/charset=([A-Za-z0-9_-]+)/.exec(H.type),ae=Z?Z[1]:"utf-8";return V.readAsText(H,ae),G}function E(H){for(var V=new Uint8Array(H),G=new Array(V.length),Z=0;Z<V.length;Z++)G[Z]=String.fromCharCode(V[Z]);return G.join("")}function S(H){if(H.slice)return H.slice(0);var V=new Uint8Array(H.byteLength);return V.set(new Uint8Array(H)),V.buffer}function N(){return this.bodyUsed=!1,this._initBody=function(H){this.bodyUsed=this.bodyUsed,this._bodyInit=H,H?typeof H=="string"?this._bodyText=H:l.blob&&Blob.prototype.isPrototypeOf(H)?this._bodyBlob=H:l.formData&&FormData.prototype.isPrototypeOf(H)?this._bodyFormData=H:l.searchParams&&URLSearchParams.prototype.isPrototypeOf(H)?this._bodyText=H.toString():l.arrayBuffer&&l.blob&&s(H)?(this._bodyArrayBuffer=S(H.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):l.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(H)||d(H))?this._bodyArrayBuffer=S(H):this._bodyText=H=Object.prototype.toString.call(H):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof H=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):l.searchParams&&URLSearchParams.prototype.isPrototypeOf(H)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},l.blob&&(this.blob=function(){var H=v(this);if(H)return H;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var H=v(this);return H||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(l.blob)return this.blob().then(T);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var H=v(this);if(H)return H;if(this._bodyBlob)return w(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(E(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},l.formData&&(this.formData=function(){return this.text().then(I)}),this.json=function(){return this.text().then(JSON.parse)},this}var j=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function q(H){var V=H.toUpperCase();return j.indexOf(V)>-1?V:H}function O(H,V){if(!(this instanceof O))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');V=V||{};var G=V.body;if(H instanceof O){if(H.bodyUsed)throw new TypeError("Already read");this.url=H.url,this.credentials=H.credentials,V.headers||(this.headers=new g(H.headers)),this.method=H.method,this.mode=H.mode,this.signal=H.signal,!G&&H._bodyInit!=null&&(G=H._bodyInit,H.bodyUsed=!0)}else this.url=String(H);if(this.credentials=V.credentials||this.credentials||"same-origin",(V.headers||!this.headers)&&(this.headers=new g(V.headers)),this.method=q(V.method||this.method||"GET"),this.mode=V.mode||this.mode||null,this.signal=V.signal||this.signal||(function(){if("AbortController"in o){var W=new AbortController;return W.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&G)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(G),(this.method==="GET"||this.method==="HEAD")&&(V.cache==="no-store"||V.cache==="no-cache")){var Z=/([?&])_=[^&]*/;if(Z.test(this.url))this.url=this.url.replace(Z,"$1_="+new Date().getTime());else{var ae=/\?/;this.url+=(ae.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}O.prototype.clone=function(){return new O(this,{body:this._bodyInit})};function I(H){var V=new FormData;return H.trim().split("&").forEach(function(G){if(G){var Z=G.split("="),ae=Z.shift().replace(/\+/g," "),W=Z.join("=").replace(/\+/g," ");V.append(decodeURIComponent(ae),decodeURIComponent(W))}}),V}function A(H){var V=new g,G=H.replace(/\r?\n[\t ]+/g," ");return G.split("\r").map(function(Z){return Z.indexOf(`
`)===0?Z.substr(1,Z.length):Z}).forEach(function(Z){var ae=Z.split(":"),W=ae.shift().trim();if(W){var te=ae.join(":").trim();try{V.append(W,te)}catch(se){console.warn("Response "+se.message)}}}),V}N.call(O.prototype);function P(H,V){if(!(this instanceof P))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(V||(V={}),this.type="default",this.status=V.status===void 0?200:V.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=V.statusText===void 0?"":""+V.statusText,this.headers=new g(V.headers),this.url=V.url||"",this._initBody(H)}N.call(P.prototype),P.prototype.clone=function(){return new P(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new g(this.headers),url:this.url})},P.error=function(){var H=new P(null,{status:200,statusText:""});return H.ok=!1,H.status=0,H.type="error",H};var C=[301,302,303,307,308];P.redirect=function(H,V){if(C.indexOf(V)===-1)throw new RangeError("Invalid status code");return new P(null,{status:V,headers:{location:H}})},i.DOMException=o.DOMException;try{new i.DOMException}catch{i.DOMException=function(V,G){this.message=V,this.name=G;var Z=Error(V);this.stack=Z.stack},i.DOMException.prototype=Object.create(Error.prototype),i.DOMException.prototype.constructor=i.DOMException}function B(H,V){return new Promise(function(G,Z){var ae=new O(H,V);if(ae.signal&&ae.signal.aborted)return Z(new i.DOMException("Aborted","AbortError"));var W=new XMLHttpRequest;function te(){W.abort()}W.onload=function(){var le={statusText:W.statusText,headers:A(W.getAllResponseHeaders()||"")};ae.url.indexOf("file://")===0&&(W.status<200||W.status>599)?le.status=200:le.status=W.status,le.url="responseURL"in W?W.responseURL:le.headers.get("X-Request-URL");var Ee="response"in W?W.response:W.responseText;setTimeout(function(){G(new P(Ee,le))},0)},W.onerror=function(){setTimeout(function(){Z(new TypeError("Network request failed"))},0)},W.ontimeout=function(){setTimeout(function(){Z(new TypeError("Network request timed out"))},0)},W.onabort=function(){setTimeout(function(){Z(new i.DOMException("Aborted","AbortError"))},0)};function se(le){try{return le===""&&o.location.href?o.location.href:le}catch{return le}}if(W.open(ae.method,se(ae.url),!0),ae.credentials==="include"?W.withCredentials=!0:ae.credentials==="omit"&&(W.withCredentials=!1),"responseType"in W&&(l.blob?W.responseType="blob":l.arrayBuffer&&(W.responseType="arraybuffer")),V&&typeof V.headers=="object"&&!(V.headers instanceof g||o.Headers&&V.headers instanceof o.Headers)){var pe=[];Object.getOwnPropertyNames(V.headers).forEach(function(le){pe.push(f(le)),W.setRequestHeader(le,p(V.headers[le]))}),ae.headers.forEach(function(le,Ee){pe.indexOf(Ee)===-1&&W.setRequestHeader(Ee,le)})}else ae.headers.forEach(function(le,Ee){W.setRequestHeader(Ee,le)});ae.signal&&(ae.signal.addEventListener("abort",te),W.onreadystatechange=function(){W.readyState===4&&ae.signal.removeEventListener("abort",te)}),W.send(typeof ae._bodyInit>"u"?null:ae._bodyInit)})}return B.polyfill=!0,o.fetch||(o.fetch=B,o.Headers=g,o.Request=O,o.Response=P),i.Headers=g,i.Request=O,i.Response=P,i.fetch=B,Object.defineProperty(i,"__esModule",{value:!0}),i})({})})(n),n.fetch.ponyfill=!0,delete n.fetch.polyfill;var r=u.fetch?u:n;e=r.fetch,e.default=r.fetch,e.fetch=r.fetch,e.Headers=r.Headers,e.Request=r.Request,e.Response=r.Response,a.exports=e})(cD,cD.exports)),cD.exports}var dae;function uU(){if(dae)return Bs;dae=1;var a=Bs&&Bs.__awaiter||function(r,t,i,o){function l(s){return s instanceof i?s:new i(function(c){c(s)})}return new(i||(i=Promise))(function(s,c){function d(h){try{p(o.next(h))}catch(g){c(g)}}function f(h){try{p(o.throw(h))}catch(g){c(g)}}function p(h){h.done?s(h.value):l(h.value).then(d,f)}p((o=o.apply(r,t||[])).next())})};Object.defineProperty(Bs,"__esModule",{value:!0}),Bs.fetchContext=Bs.fetchJson=void 0;const e=aPe();function u(r,t){var i;return a(this,void 0,void 0,function*(){return(yield((i=t?.fetch)!==null&&i!==void 0?i:e.fetch)(r)).json()})}Bs.fetchJson=u;function n(r,t){return a(this,void 0,void 0,function*(){return(yield u(r,t))["@context"]})}return Bs.fetchContext=n,Bs}var fae;function iPe(){if(fae)return Rp;fae=1;var a=Rp&&Rp.__awaiter||function(n,r,t,i){function o(l){return l instanceof t?l:new t(function(s){s(l)})}return new(t||(t=Promise))(function(l,s){function c(p){try{f(i.next(p))}catch(h){s(h)}}function d(p){try{f(i.throw(p))}catch(h){s(h)}}function f(p){p.done?l(p.value):o(p.value).then(c,d)}f((i=i.apply(n,r||[])).next())})};Object.defineProperty(Rp,"__esModule",{value:!0}),Rp.lookupUri=void 0;const e=uU();function u(n,r){return a(this,void 0,void 0,function*(){const t=(yield(0,e.fetchContext)(`https://prefix.cc/${n}.file.jsonld`,r))[n];if(typeof t!="string")throw new Error(`Expected uri to be a string, received: ${t} of type ${typeof t}`);return t})}return Rp.lookupUri=u,Rp}var Np={},pae;function uPe(){if(pae)return Np;pae=1;var a=Np&&Np.__awaiter||function(n,r,t,i){function o(l){return l instanceof t?l:new t(function(s){s(l)})}return new(t||(t=Promise))(function(l,s){function c(p){try{f(i.next(p))}catch(h){s(h)}}function d(p){try{f(i.throw(p))}catch(h){s(h)}}function f(p){p.done?l(p.value):o(p.value).then(c,d)}f((i=i.apply(n,r||[])).next())})};Object.defineProperty(Np,"__esModule",{value:!0}),Np.lookupPrefix=void 0;const e=uU();function u(n,r){return a(this,void 0,void 0,function*(){const t=new URL("https://prefix.cc/reverse");t.searchParams.append("uri",n),t.searchParams.append("format","jsonld");const i=Object.keys(yield(0,e.fetchContext)(t,r));if(i.length===0)throw new Error("No prefixes returned");return i[0]})}return Np.lookupPrefix=u,Np}var Ip={},hae;function oPe(){if(hae)return Ip;hae=1;var a=Ip&&Ip.__awaiter||function(n,r,t,i){function o(l){return l instanceof t?l:new t(function(s){s(l)})}return new(t||(t=Promise))(function(l,s){function c(p){try{f(i.next(p))}catch(h){s(h)}}function d(p){try{f(i.throw(p))}catch(h){s(h)}}function f(p){p.done?l(p.value):o(p.value).then(c,d)}f((i=i.apply(n,r||[])).next())})};Object.defineProperty(Ip,"__esModule",{value:!0}),Ip.lookupAllPrefixes=void 0;const e=uU();function u(n){return a(this,void 0,void 0,function*(){return(0,e.fetchContext)("https://prefix.cc/context",n)})}return Ip.lookupAllPrefixes=u,Ip}var yae;function mae(){return yae||(yae=1,(function(a){var e=xp&&xp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=xp&&xp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(iPe(),a),u(uPe(),a),u(oPe(),a)})(xp)),xp}var bae;function sPe(){return bae||(bae=1,(function(a){var e=g3&&g3.__awaiter||function(o,l,s,c){function d(f){return f instanceof s?f:new s(function(p){p(f)})}return new(s||(s=Promise))(function(f,p){function h(m){try{v(c.next(m))}catch(T){p(T)}}function g(m){try{v(c.throw(m))}catch(T){p(T)}}function v(m){m.done?f(m.value):d(m.value).then(h,g)}v((c=c.apply(o,l||[])).next())})};Object.defineProperty(a,"__esModule",{value:!0}),a.lookupAllPrefixes=a.prefixToUri=a.uriToPrefix=void 0;const u=nPe(),n=mae();function r(o,l){return e(this,void 0,void 0,function*(){let s;try{s=yield(0,n.lookupPrefix)(o,l)}catch{l?.mintOnUnknown&&(s=(0,u.fragment)(o).slice(0,4))}if(typeof s<"u"&&typeof l?.existingPrefixes=="object"&&s in l.existingPrefixes){let c=0;for(;`${s}${c}`in l.existingPrefixes;)c+=1;s=`${s}${c}`}return s})}a.uriToPrefix=r;function t(o,l){return e(this,void 0,void 0,function*(){try{return yield(0,n.lookupUri)(o,l)}catch{return}})}a.prefixToUri=t;var i=mae();Object.defineProperty(a,"lookupAllPrefixes",{enumerable:!0,get:function(){return i.lookupAllPrefixes}})})(g3)),g3}var _3={},gae;function cPe(){if(gae)return _3;gae=1,Object.defineProperty(_3,"__esModule",{value:!0}),_3.getShaclName=void 0;function a(e){if(e.termType!=="NamedNode"||!e.value.startsWith("http://www.w3.org/ns/shacl#"))throw new Error(`Term ${e.value} is not part of the SHACL namespace`);return e.value.slice(27)}return _3.getShaclName=a,_3}var lD={},vae;function lPe(){return vae||(vae=1,Object.defineProperty(lD,"__esModule",{value:!0}),lD.default={deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,uniqueLang:!0,equals:!0,disjoint:!0,lessThan:!0,lessThanOrEquals:!0,qualifiedValueShape:!0,qualifiedMinCount:!0,qualifiedMaxCount:!0,qualifiedValueShapesDisjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0,node:!0}),lD}var dD={},_ae;function dPe(){return _ae||(_ae=1,Object.defineProperty(dD,"__esModule",{value:!0}),dD.default={owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"}),dD}var fD={},Tae;function fPe(){return Tae||(Tae=1,Object.defineProperty(fD,"__esModule",{value:!0}),fD.default={targetNode:!0,targetObjectsOf:!0,targetSubjectsOf:!0,deactivated:!0,severity:!0,message:!0,class:!0,datatype:!0,nodeKind:!0,minExclusive:!0,minInclusive:!0,maxExclusive:!0,maxInclusive:!0,minLength:!0,maxLength:!0,pattern:!0,flags:!0,languageIn:!0,equals:!0,disjoint:!0,closed:!0,ignoredProperties:!0,hasValue:!0,in:!0}),fD}var wae;function pPe(){if(wae)return zc;wae=1;var a=zc&&zc.__awaiter||function(p,h,g,v){function m(T){return T instanceof g?T:new g(function(w){w(T)})}return new(g||(g=Promise))(function(T,w){function E(j){try{N(v.next(j))}catch(q){w(q)}}function S(j){try{N(v.throw(j))}catch(q){w(q)}}function N(j){j.done?T(j.value):m(j.value).then(E,S)}N((v=v.apply(p,h||[])).next())})},e=zc&&zc.__importDefault||function(p){return p&&p.__esModule?p:{default:p}};Object.defineProperty(zc,"__esModule",{value:!0});const u=Tl,n=sPe(),r=J4(),t=cPe(),i=e(lPe()),o=e(dPe()),l=e(fPe());function s(p){var h;return(h=/^[^]*[#/]/.exec(p))===null||h===void 0?void 0:h[0]}const c={"http://www.w3.org/1999/02/22-rdf-syntax-ns#":"rdf","http://www.w3.org/2000/01/rdf-schema#":"rdfs","http://www.w3.org/ns/shacl#":"sh","http://www.w3.org/2001/XMLSchema#":"xsd"},d={rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",sh:"http://www.w3.org/ns/shacl#",xsd:"http://www.w3.org/2001/XMLSchema#"};class f{constructor(h,g,v={},m=void 0,T=!0,w=!1,E,S=!1,N=!0){this.store=h,this.base=m,this.errorOnExtraQuads=T,this.mintUnspecifiedPrefixes=w,this.fetch=E,this.extendedSyntax=S,this.requireBase=N,this.prefixes={},this.prefixRev={};for(const j of Object.keys(v)){const q=v[j],O=typeof q=="string"?q:q.value;!(O in c)&&!(j in d)&&(this.prefixRev[O]=j,this.prefixes[j]=O)}this.writer=g,this.requireBase=N}write(){return a(this,void 0,void 0,function*(){const h=this.store.getQuads(null,"http://www.w3.org/1999/02/22-rdf-syntax-ns#type","http://www.w3.org/2002/07/owl#Ontology",null);if(h.length===1&&h[0].subject.termType==="NamedNode"){const v=h[0].subject;this.store.removeQuads(h),v.equals(new u.NamedNode("urn:x-base:default"))||this.writer.add(`BASE ${(0,r.termToString)(v)}`),yield this.writeImports(v)}else if(this.requireBase)throw new Error("Base expected");if(this.mintUnspecifiedPrefixes){const v=new Set;for(const T of[...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)])if(T.termType==="NamedNode"){const w=s(T.value);w&&!(w in this.prefixRev)&&!(w in c)&&v.add(w)}const m=Object.assign(Object.assign({},this.prefixes),d);yield Promise.all([...v].map(T=>(0,n.uriToPrefix)(T,{fetch:this.fetch,mintOnUnknown:!0,existingPrefixes:m}).then(w=>{this.prefixes[w]=T,m[w]=T,this.prefixRev[T]=w})))}const g=new Set([...this.store.getSubjects(null,null,null),...this.store.getPredicates(null,null,null),...this.store.getObjects(null,null,null)].filter(v=>v.termType==="NamedNode").map(v=>s(v.value)).filter(v=>typeof v=="string"));for(const v in this.prefixRev)g.has(v)||(delete this.prefixes[this.prefixRev[v]],delete this.prefixRev[v]);if(yield this.writePrefixes(),this.prefixes=Object.assign(Object.assign({},this.prefixes),d),this.prefixRev=Object.assign(Object.assign({},this.prefixRev),c),this.writer.newLine(),yield this.writeShapes(),this.extendedSyntax){const v=this.store.getSubjects(null,null,null);v.length>0&&this.writer.newLine(1);for(const m of v)this.writer.add(yield this.termToString(m,!0,!0)),this.writer.add(" "),this.writer.indent(),yield this.writeTurtlePredicates(m),this.writer.deindent();v.length>0&&(this.writer.add(" ."),this.writer.newLine())}if(this.errorOnExtraQuads&&this.store.size>0)throw new Error(`Dataset contains quads that cannot be written in SHACLC [
${new u.Writer({prefixes:this.prefixes}).quadsToString(this.store.getQuads(null,null,null,null))}]`);this.writer.end()})}writeImports(h){return a(this,void 0,void 0,function*(){const g=this.store.getObjectsOnce(h,new u.NamedNode("http://www.w3.org/2002/07/owl#imports"),null);if(g.length>0)for(const v of g)this.writer.add(`IMPORTS <${v.value}>`,!0)})}writePrefixes(){return a(this,void 0,void 0,function*(){const h=Object.keys(this.prefixes).filter(g=>!(g in o.default)).sort();if(h.length>0)for(const g of h)this.writer.add(`PREFIX ${g}: <${this.prefixes[g]}>`,!0)})}termToString(h,g=!1,v=!1){return a(this,void 0,void 0,function*(){try{if(g)throw new Error("Shacl name disabled");return(0,t.getShaclName)(h)}catch{}if(h.termType==="NamedNode"){const m=s(h.value);return m&&m in this.prefixRev&&m in this.prefixRev?`${this.prefixRev[m]}:${h.value.slice(m.length)}`:(0,r.termToString)(h)}if(h.termType==="Literal")return h.datatypeString==="http://www.w3.org/2001/XMLSchema#integer"||h.datatypeString==="http://www.w3.org/2001/XMLSchema#boolean"?h.value:(0,r.termToString)(h);throw h.termType==="BlankNode"&&v&&(0,r.termToString)(h),new Error(`Invalid term type for extra statement ${h.value} (${h.termType})`)})}writeShapes(){return a(this,void 0,void 0,function*(){for(const h of this.store.getSubjectsOnce(new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new u.NamedNode("http://www.w3.org/ns/shacl#NodeShape"),null)){this.store.getQuadsOnce(h,new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),new u.NamedNode("http://www.w3.org/2000/01/rdf-schema#Class"),null).length>0?this.writer.add("shapeClass "):this.writer.add("shape "),this.writer.add(yield this.termToString(h)),this.writer.add(" ");const g=this.store.getObjectsOnce(h,new u.NamedNode("http://www.w3.org/ns/shacl#targetClass"),null);if(g.length>0){this.writer.add("-> ");for(const m of g)m.termType==="NamedNode"?this.writer.add(yield this.termToString(m)):(this.writer.add("!"),this.writer.add(yield this.termToString(this.singleObject(m,new u.NamedNode("http://www.w3.org/ns/shacl#not"),!0)))),this.writer.add(" ")}const v=this.store.getPredicates(h,null,null).filter(m=>[new u.NamedNode("http://www.w3.org/ns/shacl#targetClass"),new u.NamedNode("http://www.w3.org/ns/shacl#property"),new u.NamedNode("http://www.w3.org/ns/shacl#or"),...Object.keys(l.default).map(T=>new u.NamedNode("http://www.w3.org/ns/shacl#"+T))].every(T=>!m.equals(T)));v.length>0&&(this.writer.add(";"),this.writer.indent(),this.writer.newLine(1)),this.extendedSyntax&&(yield this.writeGivenTurtlePredicates(h,v)),v.length>0&&(this.writer.add(" "),this.writer.deindent()),yield this.writeShapeBody(h,!1)}})}getSingleProperty(h,g){let v=[h];try{let m=(0,t.getShaclName)(h.predicate),T="pred";if(m==="not"){const w=this.store.getQuadsOnce(h.object,null,null,null);if(v=v.concat(w),w.length!==1)throw new Error("Can only handle having one predicate of 'not'");[h]=w,m=(0,t.getShaclName)(h.predicate),T="not"}if(!(m in g))throw new Error(`${m} is not allowed`);return{name:m,type:T,object:h.object}}catch{this.store.addQuads(v)}}singleLayerPropertiesList(h,g){const v=[];for(const m of this.store.getQuadsOnce(h,null,null,null)){const T=this.getSingleProperty(m,g);T&&v.push(T)}return v}expectOneProperty(h,g){const v=this.store.getQuadsOnce(h,null,null,null);if(v.length===1){const m=this.getSingleProperty(v[0],g);if(m)return m}this.store.addQuads(v)}orProperties(h,g){const v=[];for(const m of this.store.getQuadsOnce(h,new u.NamedNode("http://www.w3.org/ns/shacl#or"),null,null)){const T=[];for(const w of this.getList(m.object)){const E=this.expectOneProperty(w,g);if(!E)throw this.store.addQuad(m),new Error("Each entry of the 'or' statement must declare exactly one property");T.push(E)}v.push(T)}return v}getList(h){let g=h;const v=[];for(;!g.equals(new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));)v.push(this.singleObject(g,new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),!0)),g=this.singleObject(g,new u.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),!0);return v}writeIriLiteralOrArray(h){return a(this,void 0,void 0,function*(){if(h.termType==="BlankNode"){this.writer.add("[");let g=!0;for(const v of this.getList(h))g?g=!1:this.writer.add(" "),this.writer.add(yield this.termToString(v));this.writer.add("]")}else this.writer.add(yield this.termToString(h))})}singleObject(h,g,v){var m;return(m=this.singleQuad(h,g,v))===null||m===void 0?void 0:m.object}singleQuad(h,g,v=!1){const m=this.store.getQuadsOnce(h,g,null,null);if(v&&m.length!==1)throw this.store.addQuads(m),new Error(`The subject and predicate ${h?.value} ${g?.value} must have exactly one object. Instead has ${m.length}`);if(m.length>1)throw this.store.addQuads(m),new Error(`The subject and predicate ${h?.value} ${g?.value} can have at most one object. Instead has ${m.length}`);return m.length===1?m[0]:void 0}writeAssigment({name:h,type:g,object:v}){return a(this,void 0,void 0,function*(){g==="not"&&this.writer.add("!"),this.writer.add(h),this.writer.add("="),yield this.writeIriLiteralOrArray(v)})}writeAtom({name:h,type:g,object:v}){return a(this,void 0,void 0,function*(){switch(g==="not"&&this.writer.add("!"),h){case"node":{if(v.termType==="NamedNode")this.writer.add(`@${yield this.termToString(v)}`);else if(v.termType==="BlankNode")yield this.writeShapeBody(v);else throw new Error("Invalid nested shape, must be blank node or IRI");return}case"nodeKind":{this.writer.add((0,t.getShaclName)(v));return}case"class":{this.writer.add(yield this.termToString(v));return}case"datatype":{this.writer.add(yield this.termToString(v));return}default:this.writer.add(h),this.writer.add("="),yield this.writeIriLiteralOrArray(v)}})}writeAssigments(h,g=" ",v=!0,m){return a(this,void 0,void 0,function*(){for(const T of h)v?v=!1:this.writer.add(g),m?yield this.writeAtom(T):yield this.writeAssigment(T)})}writeParams(h,g=!0,v,m=!1,T=!1){return a(this,void 0,void 0,function*(){const w=this.orProperties(h,v),E=this.singleLayerPropertiesList(h,v);T&&(w.length>0||E.length>0)&&this.writer.newLine(1);for(const S of w)g?g=!1:this.writer.add(" "),yield this.writeAssigments(S,"|",!0,m);yield this.writeAssigments(E," ",g,m),T&&(w.length>0||E.length>0)&&this.writer.add(" .")})}writeShapeBody(h,g=!0){return a(this,void 0,void 0,function*(){this.writer.add("{").indent();const v=this.store.getObjectsOnce(h,new u.NamedNode("http://www.w3.org/ns/shacl#property"),null);yield this.writeParams(h,!0,l.default,!1,!0);for(const m of v)this.writer.newLine(1),yield this.writeProperty(m);this.writer.deindent().newLine(1),g?this.writer.add("} ."):this.writer.add("}").newLine(1)})}writeProperty(h){return a(this,void 0,void 0,function*(){yield this.writePath(this.singleObject(h,new u.NamedNode("http://www.w3.org/ns/shacl#path"),!0));const g=this.singleObject(h,new u.NamedNode("http://www.w3.org/ns/shacl#minCount")),v=this.singleObject(h,new u.NamedNode("http://www.w3.org/ns/shacl#maxCount")),m=this.singleObject(h,new u.NamedNode("http://www.w3.org/ns/shacl#nodeKind")),T=this.singleObject(h,new u.NamedNode("http://www.w3.org/ns/shacl#class")),w=this.singleObject(h,new u.NamedNode("http://www.w3.org/ns/shacl#datatype")),E=this.store.getObjectsOnce(h,new u.NamedNode("http://www.w3.org/ns/shacl#node"),null);if(m&&(this.writer.add(" "),this.writer.add((0,t.getShaclName)(m))),T&&(this.writer.add(" "),this.writer.add(yield this.termToString(T))),w&&(this.writer.add(" "),this.writer.add(yield this.termToString(w))),g!==void 0||v!==void 0){if(this.writer.add(" ["),g){if(g.termType!=="Literal"||g.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid min value, must me an integer literal");this.writer.add(g.value)}else this.writer.add("0");if(this.writer.add(".."),v){if(v.termType!=="Literal"||v.datatypeString!=="http://www.w3.org/2001/XMLSchema#integer")throw new Error("Invalid max value, must me an integer literal");this.store.removeMatches(h,new u.NamedNode("http://www.w3.org/ns/shacl#maxCount"),void 0,void 0),this.writer.add(v.value)}else this.writer.add("*");this.writer.add("]")}yield this.writeParams(h,!1,i.default,!0);const S=[];for(const N of E)if(N.termType==="NamedNode")this.writer.add(" "),this.writer.add(`@${yield this.termToString(N)}`);else if(N.termType==="BlankNode")S.push(N);else throw new Error("Invalid nested shape, must be blank node or IRI");for(const N of S)this.writer.add(" "),yield this.writeShapeBody(N);this.extendedSyntax&&this.store.getQuads(h,null,null,null).length>0&&(this.writer.add(" %"),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(h),this.writer.deindent(),this.writer.newLine(1),this.writer.add("%")),S.length===0&&this.writer.add(" .")})}writeTurtlePredicates(h){return a(this,void 0,void 0,function*(){return this.writeGivenTurtlePredicates(h,this.store.getPredicates(h,null,null))})}writeGivenTurtlePredicates(h,g){return a(this,void 0,void 0,function*(){let v=!1;if(g.some(m=>m.equals(u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type")))){const m=this.store.getObjectsOnce(h,u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"),null);m.length>0&&(v=!0,this.writer.add("a "),yield this.writeTurtleObjects(m))}for(const m of g)m.equals(u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#type"))||(v?(this.writer.add(" ;"),this.writer.newLine(1)):v=!0,this.writer.add(yield this.termToString(m,!0)),this.writer.add(" "),yield this.writeTurtleObjects(this.store.getObjectsOnce(h,m,null)))})}writeTurtleObjects(h){return a(this,void 0,void 0,function*(){const g=[],v=[];for(const T of h)T.termType==="BlankNode"&&[...this.store.match(null,null,T),...this.store.match(null,T,null)].length===0?g.push(T):v.push(T);this.writer.add((yield Promise.all(v.map(T=>this.termToString(T,!0,!0)))).join(", "));let m=v.length>0;if(g.length>0)for(const T of g)m?this.writer.add(", "):m=!0,(yield this.writeList(T))||(this.writer.add("["),this.writer.indent(),this.writer.newLine(1),yield this.writeTurtlePredicates(T),this.writer.deindent(),this.writer.newLine(1),this.writer.add("]"))})}writeList(h){return a(this,void 0,void 0,function*(){let g=h;const v=[],m=[];for(;!g.equals(u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#nil"));){const w=this.store.getQuadsOnce(g,u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#first"),null,null),E=this.store.getQuadsOnce(g,u.DataFactory.namedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#rest"),null,null);if(m.push(...w,...E),w.length!==1||E.length!==1||this.store.getQuads(g,null,null,null).length!==0)return this.store.addQuads(m),!1;v.push(w[0].object),g=E[0].object}let T=!1;this.writer.add("(");for(const w of v)T?this.writer.add(" "):T=!0,yield this.writeTurtleObjects([w]);return this.writer.add(")"),!0})}writePath(h,g=!1){return a(this,void 0,void 0,function*(){if(h.termType==="NamedNode")this.writer.add(yield this.termToString(h));else if(h.termType==="BlankNode"){const v=this.store.getQuadsOnce(h,null,null,null);if(v.length===1){const{predicate:m,object:T}=v[0];switch(m.value){case"http://www.w3.org/ns/shacl#inversePath":this.writer.add("^"),yield this.writePath(T,!0);return;case"http://www.w3.org/ns/shacl#alternativePath":{const w=this.getList(T);if(w.length===0)throw new Error("Invalid Alternative Path - no options");if(w.length===1)yield this.writePath(w[0]);else{g&&this.writer.add("(");let E=!0;for(const S of w)E?E=!1:this.writer.add("|"),yield this.writePath(S,!0);g&&this.writer.add(")")}return}case"http://www.w3.org/ns/shacl#zeroOrMorePath":yield this.writePath(T,!0),this.writer.add("*");return;case"http://www.w3.org/ns/shacl#oneOrMorePath":yield this.writePath(T,!0),this.writer.add("+");return;case"http://www.w3.org/ns/shacl#zeroOrOnePath":yield this.writePath(T,!0),this.writer.add("?");return;default:throw new Error(`Invalid path type ${h.value}`)}}else{this.store.addQuads(v);const m=this.getList(h);if(m.length===0)throw new Error("Invalid Path");{g&&this.writer.add("(");let T=!0;for(const w of m)T?T=!1:this.writer.add("/"),yield this.writePath(w,!0);g&&this.writer.add(")")}}}else throw new Error("Path should be named node or blank node")})}}return zc.default=f,zc}var pD={},Sae;function hPe(){if(Sae)return pD;Sae=1,Object.defineProperty(pD,"__esModule",{value:!0});class a{constructor(u){this.indents=0,this.write=u.write,this.end=u.end}indent(){return this.indents+=1,this}deindent(){if(this.indents<1)throw new Error(`Trying to deindent when indent is only ${this.indents}`);return this.indents-=1,this}add(u,n=!1){return this.write(n?`
${"	".repeat(this.indents)}${u}`:u,"utf-8"),this}newLine(u=2){return this.write(`
`.repeat(u)+"	".repeat(this.indents),"utf-8"),this}}return pD.default=a,pD}var hD={},Eae;function yPe(){if(Eae)return hD;Eae=1,Object.defineProperty(hD,"__esModule",{value:!0});const a=Tl;class e extends a.Store{getQuadsOnce(n,r,t,i){const o=this.getQuads(n,r,t,i);return this.removeQuads(o),o}getSubjectsOnce(n,r,t){return this.getQuadsOnce(null,n,r,t).map(i=>i.subject)}getObjectsOnce(n,r,t){return this.getQuadsOnce(n,r,null,t).map(i=>i.object)}}return hD.default=e,hD}var Aae;function mPe(){if(Aae)return qs;Aae=1;var a=qs&&qs.__awaiter||function(o,l,s,c){function d(f){return f instanceof s?f:new s(function(p){p(f)})}return new(s||(s=Promise))(function(f,p){function h(m){try{v(c.next(m))}catch(T){p(T)}}function g(m){try{v(c.throw(m))}catch(T){p(T)}}function v(m){m.done?f(m.value):d(m.value).then(h,g)}v((c=c.apply(o,l||[])).next())})},e=qs&&qs.__importDefault||function(o){return o&&o.__esModule?o:{default:o}};Object.defineProperty(qs,"__esModule",{value:!0}),qs.write=void 0;const u=Tl,n=e(pPe()),r=e(hPe()),t=e(yPe());function i(o,l){return a(this,void 0,void 0,function*(){return new Promise((s,c)=>a(this,void 0,void 0,function*(){try{let d="";const f=new t.default(o),p=f.getGraphs(null,null,null);if(p.length>1)throw new Error("More than one graph found - can serialize in the default graph");if(p.length===1&&!p[0].equals(u.DataFactory.defaultGraph()))throw new Error(`Expected all triples to be in the default graph, instead triples were in ${p[0].value}`);const h=new r.default({write:v=>{d+=v},end:()=>{let v=f.getQuads(null,null,null,null);v.length===0&&(v=void 0),s({text:d,extraQuads:v})}});yield new n.default(f,h,l?.prefixes,void 0,l?.errorOnUnused!==!1,l?.mintPrefixes,l?.fetch,l?.extendedSyntax,l?.requireBase!==!1).write()}catch(d){c(d)}}))})}return qs.write=i,qs}var Oae;function bPe(){if(Oae)return b3;Oae=1,Object.defineProperty(b3,"__esModule",{value:!0}),b3.ActorRdfSerializeShaclc=void 0;const a=rU(),e=rPe(),u=Nr(),n=mPe();let r=class extends a.ActorRdfSerializeFixedMediaTypes{constructor(i){super(i)}async runHandle(i,o){const l=new u.Readable;l._read=()=>{};try{const s={};i.quadStream.on("prefix",(d,f)=>{s[d]=f});const{text:c}=await(0,n.write)(await(0,e.default)(i.quadStream),{errorOnUnused:!0,extendedSyntax:o==="text/shaclc-ext",prefixes:s});l.push(c),l.push(null)}catch(s){l._read=()=>{l.emit("error",s)}}return{data:l,triples:!0}}};return b3.ActorRdfSerializeShaclc=r,b3}var xae;function oU(){return xae||(xae=1,(function(a){var e=Op&&Op.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Op&&Op.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(bPe(),a)})(Op)),Op}var Dp={},T3={},Fp={},w3={},Rae;function DTe(){if(Rae)return w3;Rae=1,Object.defineProperty(w3,"__esModule",{value:!0}),w3.ActorRdfUpdateQuads=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return w3.ActorRdfUpdateQuads=e,w3}var Us={},Nae;function gPe(){if(Nae)return Us;Nae=1,Object.defineProperty(Us,"__esModule",{value:!0}),Us.ActorRdfUpdateQuadsDestination=Us.deskolemize=Us.deskolemizeStream=void 0;const a=uP(),e=lt(),u=De(),n=DTe();function r(o,l,s){return l?.map(c=>(0,a.deskolemizeQuad)(o,c,s))}Us.deskolemizeStream=r;function t(o){const l=o.context.getSafe(e.KeysInitQuery.dataFactory),s=o.context.get(e.KeysRdfUpdateQuads.destination),c=o.context.get(e.KeysQuerySourceIdentify.sourceIds)?.get(s);return c?{...o,quadStreamInsert:r(l,o.quadStreamInsert,c),quadStreamDelete:r(l,o.quadStreamDelete,c)}:o}Us.deskolemize=t;let i=class extends n.ActorRdfUpdateQuads{async test(l){return(0,u.passTestVoid)()}async run(l){const s=await this.getDestination(l.context);return await this.getOutput(s,t(l))}async getOutput(l,s){return{execute:async()=>{await l.update({insert:s.quadStreamInsert,delete:s.quadStreamDelete}),await(s.deleteGraphs?l.deleteGraphs(s.deleteGraphs.graphs,s.deleteGraphs.requireExistence,s.deleteGraphs.dropGraphs):Promise.resolve()),await(s.createGraphs?l.createGraphs(s.createGraphs.graphs,s.createGraphs.requireNonExistence):Promise.resolve())}}}};return Us.ActorRdfUpdateQuadsDestination=i,Us}var yC={},Iae;function vPe(){return Iae||(Iae=1,Object.defineProperty(yC,"__esModule",{value:!0})),yC}var Xa={},Dae;function _Pe(){if(Dae)return Xa;Dae=1,Object.defineProperty(Xa,"__esModule",{value:!0}),Xa.getContextDestinationUrl=Xa.getContextDestination=Xa.getDataDestinationContext=Xa.getDataDestinationValue=Xa.getDataDestinationType=Xa.isDataDestinationRawType=void 0;const a=lt();function e(o){return typeof o=="string"||"remove"in o}Xa.isDataDestinationRawType=e;function u(o){return typeof o=="string"?"":"remove"in o?"rdfjsStore":o.type}Xa.getDataDestinationType=u;function n(o){return e(o)?o:o.value}Xa.getDataDestinationValue=n;function r(o,l){return typeof o=="string"||"remove"in o||!o.context?l:l.merge(o.context)}Xa.getDataDestinationContext=r;function t(o){return o.get(a.KeysRdfUpdateQuads.destination)}Xa.getContextDestination=t;function i(o){if(o){let l=n(o);if(typeof l=="string"){const s=l.indexOf("#");return s>=0&&(l=l.slice(0,s)),l}}}return Xa.getContextDestinationUrl=i,Xa}var Fae;function sU(){return Fae||(Fae=1,(function(a){var e=Fp&&Fp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Fp&&Fp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(DTe(),a),u(gPe(),a),u(vPe(),a),u(_Pe(),a)})(Fp)),Fp}var S3={},Pae;function TPe(){if(Pae)return S3;Pae=1,Object.defineProperty(S3,"__esModule",{value:!0}),S3.RdfJsQuadDestination=void 0;const a=yTe(),e=$t();let u=class{constructor(r,t){this.dataFactory=r,this.store=t}async update(r){r.delete&&await(0,a.promisifyEventEmitter)(this.store.remove(r.delete)),r.insert&&await(0,a.promisifyEventEmitter)(this.store.import(r.insert))}async deleteGraphs(r,t,i){switch(r){case"ALL":await(0,a.promisifyEventEmitter)(this.store.deleteGraph(this.dataFactory.defaultGraph()));case"NAMED":const o=this.store.match(),l={};o.on("data",s=>{s.graph.termType!=="DefaultGraph"&&(l[(0,e.termToString)(s.graph)]=!0)}),await(0,a.promisifyEventEmitter)(o),await Promise.all(Object.keys(l).map(s=>(0,a.promisifyEventEmitter)(this.store.deleteGraph((0,e.stringToTerm)(s,this.dataFactory)))));break;default:for(const s of Array.isArray(r)?r:[r])await(0,a.promisifyEventEmitter)(this.store.deleteGraph(s))}}async createGraphs(r,t){if(t)for(const i of r){const o=this.store.match(void 0,void 0,void 0,i);await new Promise((l,s)=>{o.once("data",()=>{s(new Error(`Unable to create graph ${i.value} as it already exists`))}),o.on("end",l),o.on("error",s)})}}};return S3.RdfJsQuadDestination=u,S3}var jae;function wPe(){if(jae)return T3;jae=1,Object.defineProperty(T3,"__esModule",{value:!0}),T3.ActorRdfUpdateQuadsRdfJsStore=void 0;const a=sU(),e=lt(),u=De(),n=TPe();let r=class extends a.ActorRdfUpdateQuadsDestination{constructor(i){super(i)}async test(i){const o=(0,a.getContextDestination)(i.context);return!o||typeof o=="string"||!("remove"in o)&&"value"in o&&!o.value?.remove?(0,u.failTest)(`${this.name} received an invalid rdfjsStore.`):(0,u.passTestVoid)()}async getDestination(i){const o=(0,a.getContextDestination)(i);return new n.RdfJsQuadDestination(i.getSafe(e.KeysInitQuery.dataFactory),"remove"in o?o:o.value)}};return T3.ActorRdfUpdateQuadsRdfJsStore=r,T3}var Mae;function cU(){return Mae||(Mae=1,(function(a){var e=Dp&&Dp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Dp&&Dp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(wPe(),a)})(Dp)),Dp}var Pp={},E3={},A3={},Cae;function SPe(){if(Cae)return A3;Cae=1,Object.defineProperty(A3,"__esModule",{value:!0}),A3.ExpressionFunctionBnode=void 0;const a=Je(),e=lt(),u=Hq(),n=$e();let r=class f7 extends a.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:n.SparqlOperator.BNODE,apply:async i=>{const{args:o,mapping:l,exprEval:s}=i,c=o.length===1?await s.evaluatorExpressionEvaluation(o[0],l):void 0;let d;if(c){const p=f7.bnodeTree.search([c],s.context.getSafe(e.KeysExpressionEvaluator.superTypeProvider),s.context.getSafe(e.KeysInitQuery.functionArgumentsCache));if(!p)throw new n.InvalidArgumentTypes(o,n.SparqlOperator.BNODE);d=p(s)([c]).str()}const f=new u.BlankNodeBindingsScoped(d??`BNODE_${f7.bnodeCounter++}`);return new n.BlankNode(f)}})}checkArity(i){return i.length===0||i.length===1}};return A3.ExpressionFunctionBnode=r,r.bnodeTree=(0,n.declare)(n.SparqlOperator.BNODE).onString1(()=>t=>t).collect(),r.bnodeCounter=0,A3}var Lae;function EPe(){if(Lae)return E3;Lae=1,Object.defineProperty(E3,"__esModule",{value:!0}),E3.ActorFunctionFactoryExpressionBnode=void 0;const a=Je(),e=$e(),u=SPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.BNODE],termFunction:!1})}async run(t){return new u.ExpressionFunctionBnode}};return E3.ActorFunctionFactoryExpressionBnode=n,E3}var qae;function lU(){return qae||(qae=1,(function(a){var e=Pp&&Pp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Pp&&Pp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(EPe(),a)})(Pp)),Pp}var jp={},O3={},x3={},Bae;function APe(){if(Bae)return x3;Bae=1,Object.defineProperty(x3,"__esModule",{value:!0}),x3.ExpressionFunctionBound=void 0;const a=Je(),e=lt(),u=ac(),n=$e();let r=class extends a.ExpressionFunctionBase{constructor(){super({arity:1,operator:n.SparqlOperator.BOUND,apply:async({args:i,mapping:o,exprEval:l})=>{const s=i[0];if(s.expressionType!==u.ExpressionType.Variable)throw new n.InvalidArgumentTypes(i,n.SparqlOperator.BOUND);const c=o.has((0,n.expressionToVar)(l.context.getSafe(e.KeysInitQuery.dataFactory),s));return(0,n.bool)(c)}})}};return x3.ExpressionFunctionBound=r,x3}var Uae;function OPe(){if(Uae)return O3;Uae=1,Object.defineProperty(O3,"__esModule",{value:!0}),O3.ActorFunctionFactoryExpressionBound=void 0;const a=Je(),e=$e(),u=APe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.BOUND],termFunction:!1})}async run(t){return new u.ExpressionFunctionBound}};return O3.ActorFunctionFactoryExpressionBound=n,O3}var Qae;function dU(){return Qae||(Qae=1,(function(a){var e=jp&&jp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=jp&&jp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(OPe(),a)})(jp)),jp}var Mp={},R3={},N3={},Vae;function xPe(){if(Vae)return N3;Vae=1,Object.defineProperty(N3,"__esModule",{value:!0}),N3.ExpressionFunctionCoalesce=void 0;const a=Je(),e=$e();let u=class extends a.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:e.SparqlOperator.COALESCE,apply:async({args:r,mapping:t,exprEval:i})=>{const o=[];for(const l of r)try{return await i.evaluatorExpressionEvaluation(l,t)}catch(s){o.push(s)}throw new e.CoalesceError(o)}})}};return N3.ExpressionFunctionCoalesce=u,N3}var Hae;function RPe(){if(Hae)return R3;Hae=1,Object.defineProperty(R3,"__esModule",{value:!0}),R3.ActorFunctionFactoryExpressionCoalesce=void 0;const a=Je(),e=$e(),u=xPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.COALESCE],termFunction:!1})}async run(t){return new u.ExpressionFunctionCoalesce}};return R3.ActorFunctionFactoryExpressionCoalesce=n,R3}var kae;function fU(){return kae||(kae=1,(function(a){var e=Mp&&Mp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Mp&&Mp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(RPe(),a)})(Mp)),Mp}var Cp={},I3={},D3={},zae;function NPe(){if(zae)return D3;zae=1,Object.defineProperty(D3,"__esModule",{value:!0}),D3.ExpressionFunctionConcat=void 0;const a=Je(),e=lt(),u=$e();let n=class p7 extends a.ExpressionFunctionBase{constructor(){super({arity:Number.POSITIVE_INFINITY,operator:u.SparqlOperator.CONCAT,apply:async t=>{const{args:i,mapping:o,exprEval:l}=t,s=i.map(async h=>l.evaluatorExpressionEvaluation(h,o)).map(async h=>{const g=p7.concatTree.search([await h],l.context.getSafe(e.KeysExpressionEvaluator.superTypeProvider),l.context.getSafe(e.KeysInitQuery.functionArgumentsCache));if(!g)throw new u.InvalidArgumentTypes(i,u.SparqlOperator.CONCAT);return g(l)([await h])}),c=await Promise.all(s),f=c.map(h=>h.typedValue).join(""),p=p7.langAllEqual(c)?c[0].language:void 0;return p?(0,u.langString)(f,p):(0,u.string)(f)}})}static langAllEqual(t){return t.length>0&&t.every(i=>i.language===t[0].language)}};return D3.ExpressionFunctionConcat=n,n.concatTree=(0,u.declare)(u.SparqlOperator.CONCAT).onStringly1(()=>r=>r).collect(),D3}var Gae;function IPe(){if(Gae)return I3;Gae=1,Object.defineProperty(I3,"__esModule",{value:!0}),I3.ActorFunctionFactoryExpressionConcat=void 0;const a=Je(),e=$e(),u=NPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.CONCAT],termFunction:!1})}async run(t){return new u.ExpressionFunctionConcat}};return I3.ActorFunctionFactoryExpressionConcat=n,I3}var $ae;function pU(){return $ae||($ae=1,(function(a){var e=Cp&&Cp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Cp&&Cp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(IPe(),a)})(Cp)),Cp}var Lp={},F3={},P3={},Xae;function DPe(){if(Xae)return P3;Xae=1,Object.defineProperty(P3,"__esModule",{value:!0}),P3.NamedExtension=void 0;const a=W_e(),e=lt(),u=$e();let n=class extends a.ExpressionFunctionBase{constructor({operator:t,functionDefinition:i}){super({arity:Number.POSITIVE_INFINITY,operator:t,apply:async({args:o,exprEval:l,mapping:s})=>{const c=await Promise.all(o.map(d=>l.evaluatorExpressionEvaluation(d,s)));try{return new u.TermTransformer(l.context.getSafe(e.KeysExpressionEvaluator.superTypeProvider)).transformRDFTermUnsafe(await i(c.map(d=>d.toRDF(l.context.getSafe(e.KeysInitQuery.dataFactory)))))}catch(d){throw new u.ExtensionFunctionError(this.operator,d)}}})}};return P3.NamedExtension=n,P3}var Kae;function FPe(){if(Kae)return F3;Kae=1,Object.defineProperty(F3,"__esModule",{value:!0}),F3.ActorFunctionFactoryExpressionExtensions=void 0;const a=Je(),e=lt(),u=De(),n=Rr(),r=DPe();let t=class extends a.ActorFunctionFactory{constructor(o){super(o)}async test({context:o,functionName:l}){return await o.getSafe(e.KeysExpressionEvaluator.extensionFunctionCreator)(new n.DataFactory().namedNode(l))?(0,u.passTestVoid)():(0,u.failTest)(`Actor ${this.name} can only provide non-termExpression implementations for functions that are provided through config entries like: ${e.KeysInitQuery.extensionFunctionCreator.name} or ${e.KeysInitQuery.extensionFunctions.name}`)}async run({context:o,functionName:l}){const c=await o.getSafe(e.KeysExpressionEvaluator.extensionFunctionCreator)(new n.DataFactory().namedNode(l));return new r.NamedExtension({operator:l,functionDefinition:c})}};return F3.ActorFunctionFactoryExpressionExtensions=t,F3}var Jae;function hU(){return Jae||(Jae=1,(function(a){var e=Lp&&Lp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Lp&&Lp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(FPe(),a)})(Lp)),Lp}var qp={},j3={},M3={},Wae;function PPe(){if(Wae)return M3;Wae=1,Object.defineProperty(M3,"__esModule",{value:!0}),M3.ExpressionFunctionIf=void 0;const a=Je(),e=$e();let u=class extends a.ExpressionFunctionBase{constructor(){super({arity:3,operator:e.SparqlOperator.IF,apply:async({args:r,mapping:t,exprEval:i})=>(await i.evaluatorExpressionEvaluation(r[0],t)).coerceEBV()?i.evaluatorExpressionEvaluation(r[1],t):i.evaluatorExpressionEvaluation(r[2],t)})}};return M3.ExpressionFunctionIf=u,M3}var Yae;function jPe(){if(Yae)return j3;Yae=1,Object.defineProperty(j3,"__esModule",{value:!0}),j3.ActorFunctionFactoryExpressionIf=void 0;const a=Je(),e=$e(),u=PPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.IF],termFunction:!1})}async run(t){return new u.ExpressionFunctionIf}};return j3.ActorFunctionFactoryExpressionIf=n,j3}var Zae;function yU(){return Zae||(Zae=1,(function(a){var e=qp&&qp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=qp&&qp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(jPe(),a)})(qp)),qp}var Bp={},C3={},L3={},eie;function MPe(){if(eie)return L3;eie=1,Object.defineProperty(L3,"__esModule",{value:!0}),L3.ExpressionFunctionLogicalAnd=void 0;const a=Je(),e=$e();let u=class extends a.ExpressionFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.LOGICAL_AND,apply:async({args:r,mapping:t,exprEval:i})=>{const[o,l]=r;try{if(!(await i.evaluatorExpressionEvaluation(o,t)).coerceEBV())return(0,e.bool)(!1);const f=(await i.evaluatorExpressionEvaluation(l,t)).coerceEBV();return(0,e.bool)(f)}catch(s){if((await i.evaluatorExpressionEvaluation(l,t)).coerceEBV())throw s;return(0,e.bool)(!1)}}})}};return L3.ExpressionFunctionLogicalAnd=u,L3}var tie;function CPe(){if(tie)return C3;tie=1,Object.defineProperty(C3,"__esModule",{value:!0}),C3.ActorFunctionFactoryExpressionLogicalAnd=void 0;const a=Je(),e=$e(),u=MPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.LOGICAL_AND],termFunction:!1})}async run(t){return new u.ExpressionFunctionLogicalAnd}};return C3.ActorFunctionFactoryExpressionLogicalAnd=n,C3}var rie;function mU(){return rie||(rie=1,(function(a){var e=Bp&&Bp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Bp&&Bp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(CPe(),a)})(Bp)),Bp}var Up={},q3={},B3={},nie;function LPe(){if(nie)return B3;nie=1,Object.defineProperty(B3,"__esModule",{value:!0}),B3.ExpressionFunctionLogicalOr=void 0;const a=Je(),e=$e();let u=class extends a.ExpressionFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.LOGICAL_OR,apply:async({args:r,mapping:t,exprEval:i})=>{const[o,l]=r;try{if((await i.evaluatorExpressionEvaluation(o,t)).coerceEBV())return(0,e.bool)(!0);const f=(await i.evaluatorExpressionEvaluation(l,t)).coerceEBV();return(0,e.bool)(f)}catch(s){if(!(await i.evaluatorExpressionEvaluation(l,t)).coerceEBV())throw s;return(0,e.bool)(!0)}}})}};return B3.ExpressionFunctionLogicalOr=u,B3}var aie;function qPe(){if(aie)return q3;aie=1,Object.defineProperty(q3,"__esModule",{value:!0}),q3.ActorFunctionFactoryExpressionLogicalOr=void 0;const a=Je(),e=$e(),u=LPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.LOGICAL_OR],termFunction:!1})}async run(t){return new u.ExpressionFunctionLogicalOr}};return q3.ActorFunctionFactoryExpressionLogicalOr=n,q3}var iie;function bU(){return iie||(iie=1,(function(a){var e=Up&&Up.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Up&&Up.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(qPe(),a)})(Up)),Up}var Qp={},U3={},Q3={},uie;function BPe(){if(uie)return Q3;uie=1,Object.defineProperty(Q3,"__esModule",{value:!0}),Q3.ExpressionFunctionSameTerm=void 0;const a=Je(),e=lt(),u=$e();let n=class extends a.ExpressionFunctionBase{constructor(){super({arity:2,operator:u.SparqlOperator.SAME_TERM,apply:async({args:t,mapping:i,exprEval:o})=>{const l=o.context.getSafe(e.KeysInitQuery.dataFactory),[s,c]=t.map(p=>o.evaluatorExpressionEvaluation(p,i)),[d,f]=await Promise.all([s,c]);return(0,u.bool)(d.toRDF(l).equals(f.toRDF(l)))}})}};return Q3.ExpressionFunctionSameTerm=n,Q3}var oie;function UPe(){if(oie)return U3;oie=1,Object.defineProperty(U3,"__esModule",{value:!0}),U3.ActorFunctionFactoryExpressionSameTerm=void 0;const a=Je(),e=$e(),u=BPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.SAME_TERM],termFunction:!1})}async run(t){return new u.ExpressionFunctionSameTerm}};return U3.ActorFunctionFactoryExpressionSameTerm=n,U3}var sie;function gU(){return sie||(sie=1,(function(a){var e=Qp&&Qp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Qp&&Qp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(UPe(),a)})(Qp)),Qp}var Vp={},V3={},H3={},cie;function QPe(){if(cie)return H3;cie=1,Object.defineProperty(H3,"__esModule",{value:!0}),H3.TermFunctionAbs=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.ABS,overloads:(0,e.declare)(e.SparqlOperator.ABS).numericConverter(()=>r=>Math.abs(r)).collect()})}};return H3.TermFunctionAbs=u,H3}var lie;function VPe(){if(lie)return V3;lie=1,Object.defineProperty(V3,"__esModule",{value:!0}),V3.ActorFunctionFactoryTermAbs=void 0;const a=Je(),e=$e(),u=QPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.ABS],termFunction:!0})}async run(t){return new u.TermFunctionAbs}};return V3.ActorFunctionFactoryTermAbs=n,V3}var die;function vU(){return die||(die=1,(function(a){var e=Vp&&Vp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Vp&&Vp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(VPe(),a)})(Vp)),Vp}var Hp={},k3={},z3={},nF={exports:{}},HPe=nF.exports,fie;function TP(){return fie||(fie=1,(function(a){(function(e){var u,n=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,r=Math.ceil,t=Math.floor,i="[BigNumber Error] ",o=i+"Number primitive has more than 15 significant digits: ",l=1e14,s=14,c=9007199254740991,d=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],f=1e7,p=1e9;function h(N){var j,q,O,I=le.prototype={constructor:le,toString:null,valueOf:null},A=new le(1),P=20,C=4,B=-7,H=21,V=-1e7,G=1e7,Z=!1,ae=1,W=0,te={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:"",suffix:""},se="0123456789abcdefghijklmnopqrstuvwxyz",pe=!0;function le(ee,_){var F,D,L,Q,Y,$,ue,ne,ce=this;if(!(ce instanceof le))return new le(ee,_);if(_==null){if(ee&&ee._isBigNumber===!0){ce.s=ee.s,!ee.c||ee.e>G?ce.c=ce.e=null:ee.e<V?ce.c=[ce.e=0]:(ce.e=ee.e,ce.c=ee.c.slice());return}if(($=typeof ee=="number")&&ee*0==0){if(ce.s=1/ee<0?(ee=-ee,-1):1,ee===~~ee){for(Q=0,Y=ee;Y>=10;Y/=10,Q++);Q>G?ce.c=ce.e=null:(ce.e=Q,ce.c=[ee]);return}ne=String(ee)}else{if(!n.test(ne=String(ee)))return O(ce,ne,$);ce.s=ne.charCodeAt(0)==45?(ne=ne.slice(1),-1):1}(Q=ne.indexOf("."))>-1&&(ne=ne.replace(".","")),(Y=ne.search(/e/i))>0?(Q<0&&(Q=Y),Q+=+ne.slice(Y+1),ne=ne.substring(0,Y)):Q<0&&(Q=ne.length)}else{if(T(_,2,se.length,"Base"),_==10&&pe)return ce=new le(ee),Ae(ce,P+ce.e+1,C);if(ne=String(ee),$=typeof ee=="number"){if(ee*0!=0)return O(ce,ne,$,_);if(ce.s=1/ee<0?(ne=ne.slice(1),-1):1,le.DEBUG&&ne.replace(/^0\.0*|\./,"").length>15)throw Error(o+ee)}else ce.s=ne.charCodeAt(0)===45?(ne=ne.slice(1),-1):1;for(F=se.slice(0,_),Q=Y=0,ue=ne.length;Y<ue;Y++)if(F.indexOf(D=ne.charAt(Y))<0){if(D=="."){if(Y>Q){Q=ue;continue}}else if(!L&&(ne==ne.toUpperCase()&&(ne=ne.toLowerCase())||ne==ne.toLowerCase()&&(ne=ne.toUpperCase()))){L=!0,Y=-1,Q=0;continue}return O(ce,String(ee),$,_)}$=!1,ne=q(ne,_,10,ce.s),(Q=ne.indexOf("."))>-1?ne=ne.replace(".",""):Q=ne.length}for(Y=0;ne.charCodeAt(Y)===48;Y++);for(ue=ne.length;ne.charCodeAt(--ue)===48;);if(ne=ne.slice(Y,++ue)){if(ue-=Y,$&&le.DEBUG&&ue>15&&(ee>c||ee!==t(ee)))throw Error(o+ce.s*ee);if((Q=Q-Y-1)>G)ce.c=ce.e=null;else if(Q<V)ce.c=[ce.e=0];else{if(ce.e=Q,ce.c=[],Y=(Q+1)%s,Q<0&&(Y+=s),Y<ue){for(Y&&ce.c.push(+ne.slice(0,Y)),ue-=s;Y<ue;)ce.c.push(+ne.slice(Y,Y+=s));Y=s-(ne=ne.slice(Y)).length}else Y-=ue;for(;Y--;ne+="0");ce.c.push(+ne)}}else ce.c=[ce.e=0]}le.clone=h,le.ROUND_UP=0,le.ROUND_DOWN=1,le.ROUND_CEIL=2,le.ROUND_FLOOR=3,le.ROUND_HALF_UP=4,le.ROUND_HALF_DOWN=5,le.ROUND_HALF_EVEN=6,le.ROUND_HALF_CEIL=7,le.ROUND_HALF_FLOOR=8,le.EUCLID=9,le.config=le.set=function(ee){var _,F;if(ee!=null)if(typeof ee=="object"){if(ee.hasOwnProperty(_="DECIMAL_PLACES")&&(F=ee[_],T(F,0,p,_),P=F),ee.hasOwnProperty(_="ROUNDING_MODE")&&(F=ee[_],T(F,0,8,_),C=F),ee.hasOwnProperty(_="EXPONENTIAL_AT")&&(F=ee[_],F&&F.pop?(T(F[0],-p,0,_),T(F[1],0,p,_),B=F[0],H=F[1]):(T(F,-p,p,_),B=-(H=F<0?-F:F))),ee.hasOwnProperty(_="RANGE"))if(F=ee[_],F&&F.pop)T(F[0],-p,-1,_),T(F[1],1,p,_),V=F[0],G=F[1];else if(T(F,-p,p,_),F)V=-(G=F<0?-F:F);else throw Error(i+_+" cannot be zero: "+F);if(ee.hasOwnProperty(_="CRYPTO"))if(F=ee[_],F===!!F)if(F)if(typeof crypto<"u"&&crypto&&(crypto.getRandomValues||crypto.randomBytes))Z=F;else throw Z=!F,Error(i+"crypto unavailable");else Z=F;else throw Error(i+_+" not true or false: "+F);if(ee.hasOwnProperty(_="MODULO_MODE")&&(F=ee[_],T(F,0,9,_),ae=F),ee.hasOwnProperty(_="POW_PRECISION")&&(F=ee[_],T(F,0,p,_),W=F),ee.hasOwnProperty(_="FORMAT"))if(F=ee[_],typeof F=="object")te=F;else throw Error(i+_+" not an object: "+F);if(ee.hasOwnProperty(_="ALPHABET"))if(F=ee[_],typeof F=="string"&&!/^.?$|[+\-.\s]|(.).*\1/.test(F))pe=F.slice(0,10)=="0123456789",se=F;else throw Error(i+_+" invalid: "+F)}else throw Error(i+"Object expected: "+ee);return{DECIMAL_PLACES:P,ROUNDING_MODE:C,EXPONENTIAL_AT:[B,H],RANGE:[V,G],CRYPTO:Z,MODULO_MODE:ae,POW_PRECISION:W,FORMAT:te,ALPHABET:se}},le.isBigNumber=function(ee){if(!ee||ee._isBigNumber!==!0)return!1;if(!le.DEBUG)return!0;var _,F,D=ee.c,L=ee.e,Q=ee.s;e:if({}.toString.call(D)=="[object Array]"){if((Q===1||Q===-1)&&L>=-p&&L<=p&&L===t(L)){if(D[0]===0){if(L===0&&D.length===1)return!0;break e}if(_=(L+1)%s,_<1&&(_+=s),String(D[0]).length==_){for(_=0;_<D.length;_++)if(F=D[_],F<0||F>=l||F!==t(F))break e;if(F!==0)return!0}}}else if(D===null&&L===null&&(Q===null||Q===1||Q===-1))return!0;throw Error(i+"Invalid BigNumber: "+ee)},le.maximum=le.max=function(){return Oe(arguments,-1)},le.minimum=le.min=function(){return Oe(arguments,1)},le.random=(function(){var ee=9007199254740992,_=Math.random()*ee&2097151?function(){return t(Math.random()*ee)}:function(){return(Math.random()*1073741824|0)*8388608+(Math.random()*8388608|0)};return function(F){var D,L,Q,Y,$,ue=0,ne=[],ce=new le(A);if(F==null?F=P:T(F,0,p),Y=r(F/s),Z)if(crypto.getRandomValues){for(D=crypto.getRandomValues(new Uint32Array(Y*=2));ue<Y;)$=D[ue]*131072+(D[ue+1]>>>11),$>=9e15?(L=crypto.getRandomValues(new Uint32Array(2)),D[ue]=L[0],D[ue+1]=L[1]):(ne.push($%1e14),ue+=2);ue=Y/2}else if(crypto.randomBytes){for(D=crypto.randomBytes(Y*=7);ue<Y;)$=(D[ue]&31)*281474976710656+D[ue+1]*1099511627776+D[ue+2]*4294967296+D[ue+3]*16777216+(D[ue+4]<<16)+(D[ue+5]<<8)+D[ue+6],$>=9e15?crypto.randomBytes(7).copy(D,ue):(ne.push($%1e14),ue+=7);ue=Y/7}else throw Z=!1,Error(i+"crypto unavailable");if(!Z)for(;ue<Y;)$=_(),$<9e15&&(ne[ue++]=$%1e14);for(Y=ne[--ue],F%=s,Y&&F&&($=d[s-F],ne[ue]=t(Y/$)*$);ne[ue]===0;ne.pop(),ue--);if(ue<0)ne=[Q=0];else{for(Q=-1;ne[0]===0;ne.splice(0,1),Q-=s);for(ue=1,$=ne[0];$>=10;$/=10,ue++);ue<s&&(Q-=s-ue)}return ce.e=Q,ce.c=ne,ce}})(),le.sum=function(){for(var ee=1,_=arguments,F=new le(_[0]);ee<_.length;)F=F.plus(_[ee++]);return F},q=(function(){var ee="0123456789";function _(F,D,L,Q){for(var Y,$=[0],ue,ne=0,ce=F.length;ne<ce;){for(ue=$.length;ue--;$[ue]*=D);for($[0]+=Q.indexOf(F.charAt(ne++)),Y=0;Y<$.length;Y++)$[Y]>L-1&&($[Y+1]==null&&($[Y+1]=0),$[Y+1]+=$[Y]/L|0,$[Y]%=L)}return $.reverse()}return function(F,D,L,Q,Y){var $,ue,ne,ce,Se,xe,Ce,Ve,Ke=F.indexOf("."),Ye=P,oe=C;for(Ke>=0&&(ce=W,W=0,F=F.replace(".",""),Ve=new le(D),xe=Ve.pow(F.length-Ke),W=ce,Ve.c=_(S(v(xe.c),xe.e,"0"),10,L,ee),Ve.e=Ve.c.length),Ce=_(F,D,L,Y?($=se,ee):($=ee,se)),ne=ce=Ce.length;Ce[--ce]==0;Ce.pop());if(!Ce[0])return $.charAt(0);if(Ke<0?--ne:(xe.c=Ce,xe.e=ne,xe.s=Q,xe=j(xe,Ve,Ye,oe,L),Ce=xe.c,Se=xe.r,ne=xe.e),ue=ne+Ye+1,Ke=Ce[ue],ce=L/2,Se=Se||ue<0||Ce[ue+1]!=null,Se=oe<4?(Ke!=null||Se)&&(oe==0||oe==(xe.s<0?3:2)):Ke>ce||Ke==ce&&(oe==4||Se||oe==6&&Ce[ue-1]&1||oe==(xe.s<0?8:7)),ue<1||!Ce[0])F=Se?S($.charAt(1),-Ye,$.charAt(0)):$.charAt(0);else{if(Ce.length=ue,Se)for(--L;++Ce[--ue]>L;)Ce[ue]=0,ue||(++ne,Ce=[1].concat(Ce));for(ce=Ce.length;!Ce[--ce];);for(Ke=0,F="";Ke<=ce;F+=$.charAt(Ce[Ke++]));F=S(F,ne,$.charAt(0))}return F}})(),j=(function(){function ee(D,L,Q){var Y,$,ue,ne,ce=0,Se=D.length,xe=L%f,Ce=L/f|0;for(D=D.slice();Se--;)ue=D[Se]%f,ne=D[Se]/f|0,Y=Ce*ue+ne*xe,$=xe*ue+Y%f*f+ce,ce=($/Q|0)+(Y/f|0)+Ce*ne,D[Se]=$%Q;return ce&&(D=[ce].concat(D)),D}function _(D,L,Q,Y){var $,ue;if(Q!=Y)ue=Q>Y?1:-1;else for($=ue=0;$<Q;$++)if(D[$]!=L[$]){ue=D[$]>L[$]?1:-1;break}return ue}function F(D,L,Q,Y){for(var $=0;Q--;)D[Q]-=$,$=D[Q]<L[Q]?1:0,D[Q]=$*Y+D[Q]-L[Q];for(;!D[0]&&D.length>1;D.splice(0,1));}return function(D,L,Q,Y,$){var ue,ne,ce,Se,xe,Ce,Ve,Ke,Ye,oe,X,J,he,ve,ye,re,Ne,Le=D.s==L.s?1:-1,Pe=D.c,Fe=L.c;if(!Pe||!Pe[0]||!Fe||!Fe[0])return new le(!D.s||!L.s||(Pe?Fe&&Pe[0]==Fe[0]:!Fe)?NaN:Pe&&Pe[0]==0||!Fe?Le*0:Le/0);for(Ke=new le(Le),Ye=Ke.c=[],ne=D.e-L.e,Le=Q+ne+1,$||($=l,ne=g(D.e/s)-g(L.e/s),Le=Le/s|0),ce=0;Fe[ce]==(Pe[ce]||0);ce++);if(Fe[ce]>(Pe[ce]||0)&&ne--,Le<0)Ye.push(1),Se=!0;else{for(ve=Pe.length,re=Fe.length,ce=0,Le+=2,xe=t($/(Fe[0]+1)),xe>1&&(Fe=ee(Fe,xe,$),Pe=ee(Pe,xe,$),re=Fe.length,ve=Pe.length),he=re,oe=Pe.slice(0,re),X=oe.length;X<re;oe[X++]=0);Ne=Fe.slice(),Ne=[0].concat(Ne),ye=Fe[0],Fe[1]>=$/2&&ye++;do{if(xe=0,ue=_(Fe,oe,re,X),ue<0){if(J=oe[0],re!=X&&(J=J*$+(oe[1]||0)),xe=t(J/ye),xe>1)for(xe>=$&&(xe=$-1),Ce=ee(Fe,xe,$),Ve=Ce.length,X=oe.length;_(Ce,oe,Ve,X)==1;)xe--,F(Ce,re<Ve?Ne:Fe,Ve,$),Ve=Ce.length,ue=1;else xe==0&&(ue=xe=1),Ce=Fe.slice(),Ve=Ce.length;if(Ve<X&&(Ce=[0].concat(Ce)),F(oe,Ce,X,$),X=oe.length,ue==-1)for(;_(Fe,oe,re,X)<1;)xe++,F(oe,re<X?Ne:Fe,X,$),X=oe.length}else ue===0&&(xe++,oe=[0]);Ye[ce++]=xe,oe[0]?oe[X++]=Pe[he]||0:(oe=[Pe[he]],X=1)}while((he++<ve||oe[0]!=null)&&Le--);Se=oe[0]!=null,Ye[0]||Ye.splice(0,1)}if($==l){for(ce=1,Le=Ye[0];Le>=10;Le/=10,ce++);Ae(Ke,Q+(Ke.e=ce+ne*s-1)+1,Y,Se)}else Ke.e=ne,Ke.r=+Se;return Ke}})();function Ee(ee,_,F,D){var L,Q,Y,$,ue;if(F==null?F=C:T(F,0,8),!ee.c)return ee.toString();if(L=ee.c[0],Y=ee.e,_==null)ue=v(ee.c),ue=D==1||D==2&&(Y<=B||Y>=H)?E(ue,Y):S(ue,Y,"0");else if(ee=Ae(new le(ee),_,F),Q=ee.e,ue=v(ee.c),$=ue.length,D==1||D==2&&(_<=Q||Q<=B)){for(;$<_;ue+="0",$++);ue=E(ue,Q)}else if(_-=Y+(D===2&&Q>Y),ue=S(ue,Q,"0"),Q+1>$){if(--_>0)for(ue+=".";_--;ue+="0");}else if(_+=Q-$,_>0)for(Q+1==$&&(ue+=".");_--;ue+="0");return ee.s<0&&L?"-"+ue:ue}function Oe(ee,_){for(var F,D,L=1,Q=new le(ee[0]);L<ee.length;L++)D=new le(ee[L]),(!D.s||(F=m(Q,D))===_||F===0&&Q.s===_)&&(Q=D);return Q}function Ie(ee,_,F){for(var D=1,L=_.length;!_[--L];_.pop());for(L=_[0];L>=10;L/=10,D++);return(F=D+F*s-1)>G?ee.c=ee.e=null:F<V?ee.c=[ee.e=0]:(ee.e=F,ee.c=_),ee}O=(function(){var ee=/^(-?)0([xbo])(?=\w[\w.]*$)/i,_=/^([^.]+)\.$/,F=/^\.([^.]+)$/,D=/^-?(Infinity|NaN)$/,L=/^\s*\+(?=[\w.])|^\s+|\s+$/g;return function(Q,Y,$,ue){var ne,ce=$?Y:Y.replace(L,"");if(D.test(ce))Q.s=isNaN(ce)?null:ce<0?-1:1;else{if(!$&&(ce=ce.replace(ee,function(Se,xe,Ce){return ne=(Ce=Ce.toLowerCase())=="x"?16:Ce=="b"?2:8,!ue||ue==ne?xe:Se}),ue&&(ne=ue,ce=ce.replace(_,"$1").replace(F,"0.$1")),Y!=ce))return new le(ce,ne);if(le.DEBUG)throw Error(i+"Not a"+(ue?" base "+ue:"")+" number: "+Y);Q.s=null}Q.c=Q.e=null}})();function Ae(ee,_,F,D){var L,Q,Y,$,ue,ne,ce,Se=ee.c,xe=d;if(Se){e:{for(L=1,$=Se[0];$>=10;$/=10,L++);if(Q=_-L,Q<0)Q+=s,Y=_,ue=Se[ne=0],ce=t(ue/xe[L-Y-1]%10);else if(ne=r((Q+1)/s),ne>=Se.length)if(D){for(;Se.length<=ne;Se.push(0));ue=ce=0,L=1,Q%=s,Y=Q-s+1}else break e;else{for(ue=$=Se[ne],L=1;$>=10;$/=10,L++);Q%=s,Y=Q-s+L,ce=Y<0?0:t(ue/xe[L-Y-1]%10)}if(D=D||_<0||Se[ne+1]!=null||(Y<0?ue:ue%xe[L-Y-1]),D=F<4?(ce||D)&&(F==0||F==(ee.s<0?3:2)):ce>5||ce==5&&(F==4||D||F==6&&(Q>0?Y>0?ue/xe[L-Y]:0:Se[ne-1])%10&1||F==(ee.s<0?8:7)),_<1||!Se[0])return Se.length=0,D?(_-=ee.e+1,Se[0]=xe[(s-_%s)%s],ee.e=-_||0):Se[0]=ee.e=0,ee;if(Q==0?(Se.length=ne,$=1,ne--):(Se.length=ne+1,$=xe[s-Q],Se[ne]=Y>0?t(ue/xe[L-Y]%xe[Y])*$:0),D)for(;;)if(ne==0){for(Q=1,Y=Se[0];Y>=10;Y/=10,Q++);for(Y=Se[0]+=$,$=1;Y>=10;Y/=10,$++);Q!=$&&(ee.e++,Se[0]==l&&(Se[0]=1));break}else{if(Se[ne]+=$,Se[ne]!=l)break;Se[ne--]=0,$=1}for(Q=Se.length;Se[--Q]===0;Se.pop());}ee.e>G?ee.c=ee.e=null:ee.e<V&&(ee.c=[ee.e=0])}return ee}function be(ee){var _,F=ee.e;return F===null?ee.toString():(_=v(ee.c),_=F<=B||F>=H?E(_,F):S(_,F,"0"),ee.s<0?"-"+_:_)}return I.absoluteValue=I.abs=function(){var ee=new le(this);return ee.s<0&&(ee.s=1),ee},I.comparedTo=function(ee,_){return m(this,new le(ee,_))},I.decimalPlaces=I.dp=function(ee,_){var F,D,L,Q=this;if(ee!=null)return T(ee,0,p),_==null?_=C:T(_,0,8),Ae(new le(Q),ee+Q.e+1,_);if(!(F=Q.c))return null;if(D=((L=F.length-1)-g(this.e/s))*s,L=F[L])for(;L%10==0;L/=10,D--);return D<0&&(D=0),D},I.dividedBy=I.div=function(ee,_){return j(this,new le(ee,_),P,C)},I.dividedToIntegerBy=I.idiv=function(ee,_){return j(this,new le(ee,_),0,1)},I.exponentiatedBy=I.pow=function(ee,_){var F,D,L,Q,Y,$,ue,ne,ce,Se=this;if(ee=new le(ee),ee.c&&!ee.isInteger())throw Error(i+"Exponent not an integer: "+be(ee));if(_!=null&&(_=new le(_)),$=ee.e>14,!Se.c||!Se.c[0]||Se.c[0]==1&&!Se.e&&Se.c.length==1||!ee.c||!ee.c[0])return ce=new le(Math.pow(+be(Se),$?ee.s*(2-w(ee)):+be(ee))),_?ce.mod(_):ce;if(ue=ee.s<0,_){if(_.c?!_.c[0]:!_.s)return new le(NaN);D=!ue&&Se.isInteger()&&_.isInteger(),D&&(Se=Se.mod(_))}else{if(ee.e>9&&(Se.e>0||Se.e<-1||(Se.e==0?Se.c[0]>1||$&&Se.c[1]>=24e7:Se.c[0]<8e13||$&&Se.c[0]<=9999975e7)))return Q=Se.s<0&&w(ee)?-0:0,Se.e>-1&&(Q=1/Q),new le(ue?1/Q:Q);W&&(Q=r(W/s+2))}for($?(F=new le(.5),ue&&(ee.s=1),ne=w(ee)):(L=Math.abs(+be(ee)),ne=L%2),ce=new le(A);;){if(ne){if(ce=ce.times(Se),!ce.c)break;Q?ce.c.length>Q&&(ce.c.length=Q):D&&(ce=ce.mod(_))}if(L){if(L=t(L/2),L===0)break;ne=L%2}else if(ee=ee.times(F),Ae(ee,ee.e+1,1),ee.e>14)ne=w(ee);else{if(L=+be(ee),L===0)break;ne=L%2}Se=Se.times(Se),Q?Se.c&&Se.c.length>Q&&(Se.c.length=Q):D&&(Se=Se.mod(_))}return D?ce:(ue&&(ce=A.div(ce)),_?ce.mod(_):Q?Ae(ce,W,C,Y):ce)},I.integerValue=function(ee){var _=new le(this);return ee==null?ee=C:T(ee,0,8),Ae(_,_.e+1,ee)},I.isEqualTo=I.eq=function(ee,_){return m(this,new le(ee,_))===0},I.isFinite=function(){return!!this.c},I.isGreaterThan=I.gt=function(ee,_){return m(this,new le(ee,_))>0},I.isGreaterThanOrEqualTo=I.gte=function(ee,_){return(_=m(this,new le(ee,_)))===1||_===0},I.isInteger=function(){return!!this.c&&g(this.e/s)>this.c.length-2},I.isLessThan=I.lt=function(ee,_){return m(this,new le(ee,_))<0},I.isLessThanOrEqualTo=I.lte=function(ee,_){return(_=m(this,new le(ee,_)))===-1||_===0},I.isNaN=function(){return!this.s},I.isNegative=function(){return this.s<0},I.isPositive=function(){return this.s>0},I.isZero=function(){return!!this.c&&this.c[0]==0},I.minus=function(ee,_){var F,D,L,Q,Y=this,$=Y.s;if(ee=new le(ee,_),_=ee.s,!$||!_)return new le(NaN);if($!=_)return ee.s=-_,Y.plus(ee);var ue=Y.e/s,ne=ee.e/s,ce=Y.c,Se=ee.c;if(!ue||!ne){if(!ce||!Se)return ce?(ee.s=-_,ee):new le(Se?Y:NaN);if(!ce[0]||!Se[0])return Se[0]?(ee.s=-_,ee):new le(ce[0]?Y:C==3?-0:0)}if(ue=g(ue),ne=g(ne),ce=ce.slice(),$=ue-ne){for((Q=$<0)?($=-$,L=ce):(ne=ue,L=Se),L.reverse(),_=$;_--;L.push(0));L.reverse()}else for(D=(Q=($=ce.length)<(_=Se.length))?$:_,$=_=0;_<D;_++)if(ce[_]!=Se[_]){Q=ce[_]<Se[_];break}if(Q&&(L=ce,ce=Se,Se=L,ee.s=-ee.s),_=(D=Se.length)-(F=ce.length),_>0)for(;_--;ce[F++]=0);for(_=l-1;D>$;){if(ce[--D]<Se[D]){for(F=D;F&&!ce[--F];ce[F]=_);--ce[F],ce[D]+=l}ce[D]-=Se[D]}for(;ce[0]==0;ce.splice(0,1),--ne);return ce[0]?Ie(ee,ce,ne):(ee.s=C==3?-1:1,ee.c=[ee.e=0],ee)},I.modulo=I.mod=function(ee,_){var F,D,L=this;return ee=new le(ee,_),!L.c||!ee.s||ee.c&&!ee.c[0]?new le(NaN):!ee.c||L.c&&!L.c[0]?new le(L):(ae==9?(D=ee.s,ee.s=1,F=j(L,ee,0,3),ee.s=D,F.s*=D):F=j(L,ee,0,ae),ee=L.minus(F.times(ee)),!ee.c[0]&&ae==1&&(ee.s=L.s),ee)},I.multipliedBy=I.times=function(ee,_){var F,D,L,Q,Y,$,ue,ne,ce,Se,xe,Ce,Ve,Ke,Ye,oe=this,X=oe.c,J=(ee=new le(ee,_)).c;if(!X||!J||!X[0]||!J[0])return!oe.s||!ee.s||X&&!X[0]&&!J||J&&!J[0]&&!X?ee.c=ee.e=ee.s=null:(ee.s*=oe.s,!X||!J?ee.c=ee.e=null:(ee.c=[0],ee.e=0)),ee;for(D=g(oe.e/s)+g(ee.e/s),ee.s*=oe.s,ue=X.length,Se=J.length,ue<Se&&(Ve=X,X=J,J=Ve,L=ue,ue=Se,Se=L),L=ue+Se,Ve=[];L--;Ve.push(0));for(Ke=l,Ye=f,L=Se;--L>=0;){for(F=0,xe=J[L]%Ye,Ce=J[L]/Ye|0,Y=ue,Q=L+Y;Q>L;)ne=X[--Y]%Ye,ce=X[Y]/Ye|0,$=Ce*ne+ce*xe,ne=xe*ne+$%Ye*Ye+Ve[Q]+F,F=(ne/Ke|0)+($/Ye|0)+Ce*ce,Ve[Q--]=ne%Ke;Ve[Q]=F}return F?++D:Ve.splice(0,1),Ie(ee,Ve,D)},I.negated=function(){var ee=new le(this);return ee.s=-ee.s||null,ee},I.plus=function(ee,_){var F,D=this,L=D.s;if(ee=new le(ee,_),_=ee.s,!L||!_)return new le(NaN);if(L!=_)return ee.s=-_,D.minus(ee);var Q=D.e/s,Y=ee.e/s,$=D.c,ue=ee.c;if(!Q||!Y){if(!$||!ue)return new le(L/0);if(!$[0]||!ue[0])return ue[0]?ee:new le($[0]?D:L*0)}if(Q=g(Q),Y=g(Y),$=$.slice(),L=Q-Y){for(L>0?(Y=Q,F=ue):(L=-L,F=$),F.reverse();L--;F.push(0));F.reverse()}for(L=$.length,_=ue.length,L-_<0&&(F=ue,ue=$,$=F,_=L),L=0;_;)L=($[--_]=$[_]+ue[_]+L)/l|0,$[_]=l===$[_]?0:$[_]%l;return L&&($=[L].concat($),++Y),Ie(ee,$,Y)},I.precision=I.sd=function(ee,_){var F,D,L,Q=this;if(ee!=null&&ee!==!!ee)return T(ee,1,p),_==null?_=C:T(_,0,8),Ae(new le(Q),ee,_);if(!(F=Q.c))return null;if(L=F.length-1,D=L*s+1,L=F[L]){for(;L%10==0;L/=10,D--);for(L=F[0];L>=10;L/=10,D++);}return ee&&Q.e+1>D&&(D=Q.e+1),D},I.shiftedBy=function(ee){return T(ee,-c,c),this.times("1e"+ee)},I.squareRoot=I.sqrt=function(){var ee,_,F,D,L,Q=this,Y=Q.c,$=Q.s,ue=Q.e,ne=P+4,ce=new le("0.5");if($!==1||!Y||!Y[0])return new le(!$||$<0&&(!Y||Y[0])?NaN:Y?Q:1/0);if($=Math.sqrt(+be(Q)),$==0||$==1/0?(_=v(Y),(_.length+ue)%2==0&&(_+="0"),$=Math.sqrt(+_),ue=g((ue+1)/2)-(ue<0||ue%2),$==1/0?_="5e"+ue:(_=$.toExponential(),_=_.slice(0,_.indexOf("e")+1)+ue),F=new le(_)):F=new le($+""),F.c[0]){for(ue=F.e,$=ue+ne,$<3&&($=0);;)if(L=F,F=ce.times(L.plus(j(Q,L,ne,1))),v(L.c).slice(0,$)===(_=v(F.c)).slice(0,$))if(F.e<ue&&--$,_=_.slice($-3,$+1),_=="9999"||!D&&_=="4999"){if(!D&&(Ae(L,L.e+P+2,0),L.times(L).eq(Q))){F=L;break}ne+=4,$+=4,D=1}else{(!+_||!+_.slice(1)&&_.charAt(0)=="5")&&(Ae(F,F.e+P+2,1),ee=!F.times(F).eq(Q));break}}return Ae(F,F.e+P+1,C,ee)},I.toExponential=function(ee,_){return ee!=null&&(T(ee,0,p),ee++),Ee(this,ee,_,1)},I.toFixed=function(ee,_){return ee!=null&&(T(ee,0,p),ee=ee+this.e+1),Ee(this,ee,_)},I.toFormat=function(ee,_,F){var D,L=this;if(F==null)ee!=null&&_&&typeof _=="object"?(F=_,_=null):ee&&typeof ee=="object"?(F=ee,ee=_=null):F=te;else if(typeof F!="object")throw Error(i+"Argument not an object: "+F);if(D=L.toFixed(ee,_),L.c){var Q,Y=D.split("."),$=+F.groupSize,ue=+F.secondaryGroupSize,ne=F.groupSeparator||"",ce=Y[0],Se=Y[1],xe=L.s<0,Ce=xe?ce.slice(1):ce,Ve=Ce.length;if(ue&&(Q=$,$=ue,ue=Q,Ve-=Q),$>0&&Ve>0){for(Q=Ve%$||$,ce=Ce.substr(0,Q);Q<Ve;Q+=$)ce+=ne+Ce.substr(Q,$);ue>0&&(ce+=ne+Ce.slice(Q)),xe&&(ce="-"+ce)}D=Se?ce+(F.decimalSeparator||"")+((ue=+F.fractionGroupSize)?Se.replace(new RegExp("\\d{"+ue+"}\\B","g"),"$&"+(F.fractionGroupSeparator||"")):Se):ce}return(F.prefix||"")+D+(F.suffix||"")},I.toFraction=function(ee){var _,F,D,L,Q,Y,$,ue,ne,ce,Se,xe,Ce=this,Ve=Ce.c;if(ee!=null&&($=new le(ee),!$.isInteger()&&($.c||$.s!==1)||$.lt(A)))throw Error(i+"Argument "+($.isInteger()?"out of range: ":"not an integer: ")+be($));if(!Ve)return new le(Ce);for(_=new le(A),ne=F=new le(A),D=ue=new le(A),xe=v(Ve),Q=_.e=xe.length-Ce.e-1,_.c[0]=d[(Y=Q%s)<0?s+Y:Y],ee=!ee||$.comparedTo(_)>0?Q>0?_:ne:$,Y=G,G=1/0,$=new le(xe),ue.c[0]=0;ce=j($,_,0,1),L=F.plus(ce.times(D)),L.comparedTo(ee)!=1;)F=D,D=L,ne=ue.plus(ce.times(L=ne)),ue=L,_=$.minus(ce.times(L=_)),$=L;return L=j(ee.minus(F),D,0,1),ue=ue.plus(L.times(ne)),F=F.plus(L.times(D)),ue.s=ne.s=Ce.s,Q=Q*2,Se=j(ne,D,Q,C).minus(Ce).abs().comparedTo(j(ue,F,Q,C).minus(Ce).abs())<1?[ne,D]:[ue,F],G=Y,Se},I.toNumber=function(){return+be(this)},I.toPrecision=function(ee,_){return ee!=null&&T(ee,1,p),Ee(this,ee,_,2)},I.toString=function(ee){var _,F=this,D=F.s,L=F.e;return L===null?D?(_="Infinity",D<0&&(_="-"+_)):_="NaN":(ee==null?_=L<=B||L>=H?E(v(F.c),L):S(v(F.c),L,"0"):ee===10&&pe?(F=Ae(new le(F),P+L+1,C),_=S(v(F.c),F.e,"0")):(T(ee,2,se.length,"Base"),_=q(S(v(F.c),L,"0"),10,ee,D,!0)),D<0&&F.c[0]&&(_="-"+_)),_},I.valueOf=I.toJSON=function(){return be(this)},I._isBigNumber=!0,N!=null&&le.set(N),le}function g(N){var j=N|0;return N>0||N===j?j:j-1}function v(N){for(var j,q,O=1,I=N.length,A=N[0]+"";O<I;){for(j=N[O++]+"",q=s-j.length;q--;j="0"+j);A+=j}for(I=A.length;A.charCodeAt(--I)===48;);return A.slice(0,I+1||1)}function m(N,j){var q,O,I=N.c,A=j.c,P=N.s,C=j.s,B=N.e,H=j.e;if(!P||!C)return null;if(q=I&&!I[0],O=A&&!A[0],q||O)return q?O?0:-C:P;if(P!=C)return P;if(q=P<0,O=B==H,!I||!A)return O?0:!I^q?1:-1;if(!O)return B>H^q?1:-1;for(C=(B=I.length)<(H=A.length)?B:H,P=0;P<C;P++)if(I[P]!=A[P])return I[P]>A[P]^q?1:-1;return B==H?0:B>H^q?1:-1}function T(N,j,q,O){if(N<j||N>q||N!==t(N))throw Error(i+(O||"Argument")+(typeof N=="number"?N<j||N>q?" out of range: ":" not an integer: ":" not a primitive number: ")+String(N))}function w(N){var j=N.c.length-1;return g(N.e/s)==j&&N.c[j]%2!=0}function E(N,j){return(N.length>1?N.charAt(0)+"."+N.slice(1):N)+(j<0?"e":"e+")+j}function S(N,j,q){var O,I;if(j<0){for(I=q+".";++j;I+=q);N=I+N}else if(O=N.length,++j>O){for(I=q,j-=O;--j;I+=q);N+=I}else j<O&&(N=N.slice(0,j)+"."+N.slice(j));return N}u=h(),u.default=u.BigNumber=u,a.exports?a.exports=u:(e||(e=typeof self<"u"&&self?self:window),e.BigNumber=u)})(HPe)})(nF)),nF.exports}var pie;function kPe(){if(pie)return z3;pie=1,Object.defineProperty(z3,"__esModule",{value:!0}),z3.TermFunctionAddition=void 0;const a=Je(),e=$e(),u=TP();let n=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.ADDITION,overloads:(0,e.declare)(e.SparqlOperator.ADDITION).arithmetic(()=>(t,i)=>new u.BigNumber(t).plus(i).toNumber()).set([e.TypeURL.XSD_DATE_TIME,e.TypeURL.XSD_DAY_TIME_DURATION],()=>([t,i])=>new e.DateTimeLiteral((0,e.addDurationToDateTime)(t.typedValue,(0,e.defaultedDurationRepresentation)(i.typedValue)))).copy({from:[e.TypeURL.XSD_DATE_TIME,e.TypeURL.XSD_DAY_TIME_DURATION],to:[e.TypeURL.XSD_DATE_TIME,e.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([e.TypeURL.XSD_DATE,e.TypeURL.XSD_DAY_TIME_DURATION],()=>([t,i])=>new e.DateLiteral((0,e.addDurationToDateTime)((0,e.defaultedDateTimeRepresentation)(t.typedValue),(0,e.defaultedDurationRepresentation)(i.typedValue)))).copy({from:[e.TypeURL.XSD_DATE,e.TypeURL.XSD_DAY_TIME_DURATION],to:[e.TypeURL.XSD_DATE,e.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([e.TypeURL.XSD_TIME,e.TypeURL.XSD_DAY_TIME_DURATION],()=>([t,i])=>new e.TimeLiteral((0,e.addDurationToDateTime)((0,e.defaultedDateTimeRepresentation)(t.typedValue),(0,e.defaultedDurationRepresentation)(i.typedValue)))).copy({from:[e.TypeURL.XSD_TIME,e.TypeURL.XSD_DAY_TIME_DURATION],to:[e.TypeURL.XSD_TIME,e.TypeURL.XSD_YEAR_MONTH_DURATION]}).collect()})}};return z3.TermFunctionAddition=n,z3}var hie;function zPe(){if(hie)return k3;hie=1,Object.defineProperty(k3,"__esModule",{value:!0}),k3.ActorFunctionFactoryTermAddition=void 0;const a=Je(),e=$e(),u=kPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.ADDITION],termFunction:!0})}async run(t){return new u.TermFunctionAddition}};return k3.ActorFunctionFactoryTermAddition=n,k3}var yie;function _U(){return yie||(yie=1,(function(a){var e=Hp&&Hp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Hp&&Hp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(zPe(),a)})(Hp)),Hp}var kp={},G3={},$3={},mie;function GPe(){if(mie)return $3;mie=1,Object.defineProperty($3,"__esModule",{value:!0}),$3.TermFunctionCeil=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.CEIL,overloads:(0,e.declare)(e.SparqlOperator.CEIL).numericConverter(()=>r=>Math.ceil(r)).collect()})}};return $3.TermFunctionCeil=u,$3}var bie;function $Pe(){if(bie)return G3;bie=1,Object.defineProperty(G3,"__esModule",{value:!0}),G3.ActorFunctionFactoryTermCeil=void 0;const a=Je(),e=$e(),u=GPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.CEIL],termFunction:!0})}async run(t){return new u.TermFunctionCeil}};return G3.ActorFunctionFactoryTermCeil=n,G3}var gie;function TU(){return gie||(gie=1,(function(a){var e=kp&&kp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=kp&&kp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u($Pe(),a)})(kp)),kp}var zp={},X3={},K3={},vie;function XPe(){if(vie)return K3;vie=1,Object.defineProperty(K3,"__esModule",{value:!0}),K3.TermFunctionContains=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.CONTAINS,overloads:(0,e.declare)(e.SparqlOperator.CONTAINS).onBinaryTyped([e.TypeAlias.SPARQL_STRINGLY,e.TypeURL.XSD_STRING],()=>(r,t)=>(0,e.bool)(r.includes(t))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(r,t)=>{if(r.language!==t.language)throw new e.IncompatibleLanguageOperation(r,t);return(0,e.bool)(r.typedValue.includes(t.typedValue))}).collect()})}};return K3.TermFunctionContains=u,K3}var _ie;function KPe(){if(_ie)return X3;_ie=1,Object.defineProperty(X3,"__esModule",{value:!0}),X3.ActorFunctionFactoryTermContains=void 0;const a=Je(),e=$e(),u=XPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.CONTAINS],termFunction:!0})}async run(t){return new u.TermFunctionContains}};return X3.ActorFunctionFactoryTermContains=n,X3}var Tie;function wU(){return Tie||(Tie=1,(function(a){var e=zp&&zp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=zp&&zp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(KPe(),a)})(zp)),zp}var Gp={},J3={},W3={},wie;function JPe(){if(wie)return W3;wie=1,Object.defineProperty(W3,"__esModule",{value:!0}),W3.TermFunctionDatatype=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.DATATYPE,overloads:(0,e.declare)(e.SparqlOperator.DATATYPE).onLiteral1(()=>r=>new e.NamedNode(r.dataType)).collect()})}};return W3.TermFunctionDatatype=u,W3}var Sie;function WPe(){if(Sie)return J3;Sie=1,Object.defineProperty(J3,"__esModule",{value:!0}),J3.ActorFunctionFactoryTermDatatype=void 0;const a=Je(),e=$e(),u=JPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.DATATYPE],termFunction:!0})}async run(t){return new u.TermFunctionDatatype}};return J3.ActorFunctionFactoryTermDatatype=n,J3}var Eie;function SU(){return Eie||(Eie=1,(function(a){var e=Gp&&Gp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Gp&&Gp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(WPe(),a)})(Gp)),Gp}var $p={},Y3={},Z3={},Aie;function YPe(){if(Aie)return Z3;Aie=1,Object.defineProperty(Z3,"__esModule",{value:!0}),Z3.TermFunctionDay=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.DAY,overloads:(0,e.declare)(e.SparqlOperator.DAY).onDateTime1(()=>r=>(0,e.integer)(r.typedValue.day)).set([e.TypeURL.XSD_DATE],()=>([r])=>(0,e.integer)(r.typedValue.day)).collect()})}};return Z3.TermFunctionDay=u,Z3}var Oie;function ZPe(){if(Oie)return Y3;Oie=1,Object.defineProperty(Y3,"__esModule",{value:!0}),Y3.ActorFunctionFactoryTermDay=void 0;const a=Je(),e=$e(),u=YPe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.DAY],termFunction:!0})}async run(t){return new u.TermFunctionDay}};return Y3.ActorFunctionFactoryTermDay=n,Y3}var xie;function EU(){return xie||(xie=1,(function(a){var e=$p&&$p.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=$p&&$p.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(ZPe(),a)})($p)),$p}var Xp={},ew={},tw={},Rie;function e8e(){if(Rie)return tw;Rie=1,Object.defineProperty(tw,"__esModule",{value:!0}),tw.TermFunctionDivision=void 0;const a=Je(),e=$e(),u=TP();let n=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.DIVISION,overloads:(0,e.declare)(e.SparqlOperator.DIVISION).arithmetic(()=>(t,i)=>new u.BigNumber(t).div(i).toNumber()).onBinaryTyped([e.TypeURL.XSD_INTEGER,e.TypeURL.XSD_INTEGER],()=>(t,i)=>{if(i===0)throw new e.ExpressionError("Integer division by 0");return(0,e.decimal)(new u.BigNumber(t).div(i).toNumber())}).collect()})}};return tw.TermFunctionDivision=n,tw}var Nie;function t8e(){if(Nie)return ew;Nie=1,Object.defineProperty(ew,"__esModule",{value:!0}),ew.ActorFunctionFactoryTermDivision=void 0;const a=Je(),e=$e(),u=e8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.DIVISION],termFunction:!0})}async run(t){return new u.TermFunctionDivision}};return ew.ActorFunctionFactoryTermDivision=n,ew}var Iie;function AU(){return Iie||(Iie=1,(function(a){var e=Xp&&Xp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Xp&&Xp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(t8e(),a)})(Xp)),Xp}var Kp={},rw={},nw={},Die;function r8e(){if(Die)return nw;Die=1,Object.defineProperty(nw,"__esModule",{value:!0}),nw.TermFunctionEncodeForUri=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.ENCODE_FOR_URI,overloads:(0,e.declare)(e.SparqlOperator.ENCODE_FOR_URI).onStringly1Typed(()=>r=>(0,e.string)(encodeURI(r))).collect()})}};return nw.TermFunctionEncodeForUri=u,nw}var Fie;function n8e(){if(Fie)return rw;Fie=1,Object.defineProperty(rw,"__esModule",{value:!0}),rw.ActorFunctionFactoryTermEncodeForUri=void 0;const a=Je(),e=$e(),u=r8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.ENCODE_FOR_URI],termFunction:!0})}async run(t){return new u.TermFunctionEncodeForUri}};return rw.ActorFunctionFactoryTermEncodeForUri=n,rw}var Pie;function OU(){return Pie||(Pie=1,(function(a){var e=Kp&&Kp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Kp&&Kp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(n8e(),a)})(Kp)),Kp}var Jp={},aw={},iw={},jie;function a8e(){if(jie)return iw;jie=1,Object.defineProperty(iw,"__esModule",{value:!0}),iw.TermFunctionEquality=void 0;const a=Je(),e=lt(),u=$e();let n=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:u.SparqlOperator.EQUAL,overloads:(0,u.declare)(u.SparqlOperator.EQUAL).numberTest(()=>(t,i)=>t===i).stringTest(()=>(t,i)=>t.localeCompare(i)===0).set([u.TypeURL.RDF_LANG_STRING,u.TypeURL.RDF_LANG_STRING],()=>([t,i])=>(0,u.bool)(t.str()===i.str()&&t.language===i.language)).set([u.TypeAlias.SPARQL_STRINGLY,u.TypeAlias.SPARQL_STRINGLY],()=>()=>(0,u.bool)(!1)).booleanTest(()=>(t,i)=>t===i).dateTimeTest(t=>(i,o)=>(0,u.toUTCDate)(i,t.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,u.toUTCDate)(o,t.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DATE_TIME],to:[u.TypeURL.XSD_DATE,u.TypeURL.XSD_DATE]}).set(["quad","quad"],t=>([i,o])=>(0,u.bool)(this.applyOnTerms([i.subject,o.subject],t).coerceEBV()&&this.applyOnTerms([i.predicate,o.predicate],t).coerceEBV()&&this.applyOnTerms([i.object,o.object],t).coerceEBV()&&this.applyOnTerms([i.graph,o.graph],t).coerceEBV()),!1).set(["term","term"],t=>([i,o])=>{const l=i.toRDF(t.context.getSafe(e.KeysInitQuery.dataFactory)),s=o.toRDF(t.context.getSafe(e.KeysInitQuery.dataFactory)),c=l.equals(s);if(!c&&l.termType==="Literal"&&s.termType==="Literal")throw new u.RDFEqualTypeError([i,o]);return(0,u.bool)(c)},!1).set([u.TypeURL.XSD_DURATION,u.TypeURL.XSD_DURATION],()=>([t,i])=>(0,u.bool)((0,u.yearMonthDurationsToMonths)((0,u.defaultedYearMonthDurationRepresentation)(t.typedValue))===(0,u.yearMonthDurationsToMonths)((0,u.defaultedYearMonthDurationRepresentation)(i.typedValue))&&(0,u.dayTimeDurationsToSeconds)((0,u.defaultedDayTimeDurationRepresentation)(t.typedValue))===(0,u.dayTimeDurationsToSeconds)((0,u.defaultedDayTimeDurationRepresentation)(i.typedValue)))).set([u.TypeURL.XSD_TIME,u.TypeURL.XSD_TIME],t=>([i,o])=>(0,u.bool)((0,u.toUTCDate)((0,u.defaultedDateTimeRepresentation)(i.typedValue),t.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()===(0,u.toUTCDate)((0,u.defaultedDateTimeRepresentation)(o.typedValue),t.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime())).collect()})}};return iw.TermFunctionEquality=n,iw}var Mie;function i8e(){if(Mie)return aw;Mie=1,Object.defineProperty(aw,"__esModule",{value:!0}),aw.ActorFunctionFactoryTermEquality=void 0;const a=Je(),e=$e(),u=a8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.EQUAL],termFunction:!0})}async run(t){return new u.TermFunctionEquality}};return aw.ActorFunctionFactoryTermEquality=n,aw}var Cie;function xU(){return Cie||(Cie=1,(function(a){var e=Jp&&Jp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Jp&&Jp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(i8e(),a)})(Jp)),Jp}var Wp={},uw={},ow={},Lie;function u8e(){if(Lie)return ow;Lie=1,Object.defineProperty(ow,"__esModule",{value:!0}),ow.TermFunctionFloor=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.FLOOR,overloads:(0,e.declare)(e.SparqlOperator.FLOOR).numericConverter(()=>r=>Math.floor(r)).collect()})}};return ow.TermFunctionFloor=u,ow}var qie;function o8e(){if(qie)return uw;qie=1,Object.defineProperty(uw,"__esModule",{value:!0}),uw.ActorFunctionFactoryTermFloor=void 0;const a=Je(),e=$e(),u=u8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.FLOOR],termFunction:!0})}async run(t){return new u.TermFunctionFloor}};return uw.ActorFunctionFactoryTermFloor=n,uw}var Bie;function RU(){return Bie||(Bie=1,(function(a){var e=Wp&&Wp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Wp&&Wp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(o8e(),a)})(Wp)),Wp}var Yp={},sw={},cw={},Uie;function s8e(){if(Uie)return cw;Uie=1,Object.defineProperty(cw,"__esModule",{value:!0}),cw.TermFunctionHours=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.HOURS,overloads:(0,e.declare)(e.SparqlOperator.HOURS).onDateTime1(()=>r=>(0,e.integer)(r.typedValue.hours)).set([e.TypeURL.XSD_TIME],()=>([r])=>(0,e.integer)(r.typedValue.hours)).collect()})}};return cw.TermFunctionHours=u,cw}var Qie;function c8e(){if(Qie)return sw;Qie=1,Object.defineProperty(sw,"__esModule",{value:!0}),sw.ActorFunctionFactoryTermHours=void 0;const a=Je(),e=$e(),u=s8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.HOURS],termFunction:!0})}async run(t){return new u.TermFunctionHours}};return sw.ActorFunctionFactoryTermHours=n,sw}var Vie;function NU(){return Vie||(Vie=1,(function(a){var e=Yp&&Yp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Yp&&Yp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(c8e(),a)})(Yp)),Yp}var Zp={},lw={},dw={},Hie;function l8e(){if(Hie)return dw;Hie=1,Object.defineProperty(dw,"__esModule",{value:!0}),dw.TermFunctionIri=void 0;const a=Je(),e=lt(),u=$e(),n=Xn();let r=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:u.SparqlOperator.IRI,overloads:(0,u.declare)(u.SparqlOperator.IRI).set(["namedNode"],i=>o=>{const l=o[0],s=(0,n.resolve)(l.str(),i.context.get(e.KeysInitQuery.baseIRI)??"");return new u.NamedNode(s)}).onString1(i=>o=>{const l=(0,n.resolve)(o.str(),i.context.get(e.KeysInitQuery.baseIRI)??"");return new u.NamedNode(l)}).collect()})}};return dw.TermFunctionIri=r,dw}var kie;function d8e(){if(kie)return lw;kie=1,Object.defineProperty(lw,"__esModule",{value:!0}),lw.ActorFunctionFactoryTermIri=void 0;const a=Je(),e=$e(),u=l8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.IRI,e.SparqlOperator.URI],termFunction:!0})}async run(t){return new u.TermFunctionIri}};return lw.ActorFunctionFactoryTermIri=n,lw}var zie;function IU(){return zie||(zie=1,(function(a){var e=Zp&&Zp.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Zp&&Zp.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(d8e(),a)})(Zp)),Zp}var e0={},fw={},pw={},Gie;function f8e(){if(Gie)return pw;Gie=1,Object.defineProperty(pw,"__esModule",{value:!0}),pw.TermFunctionIsBlank=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.IS_BLANK,overloads:(0,e.declare)(e.SparqlOperator.IS_BLANK).onTerm1(()=>r=>(0,e.bool)(r.termType==="blankNode")).collect()})}};return pw.TermFunctionIsBlank=u,pw}var $ie;function p8e(){if($ie)return fw;$ie=1,Object.defineProperty(fw,"__esModule",{value:!0}),fw.ActorFunctionFactoryTermIsBlank=void 0;const a=Je(),e=$e(),u=f8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.IS_BLANK],termFunction:!0})}async run(t){return new u.TermFunctionIsBlank}};return fw.ActorFunctionFactoryTermIsBlank=n,fw}var Xie;function DU(){return Xie||(Xie=1,(function(a){var e=e0&&e0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=e0&&e0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(p8e(),a)})(e0)),e0}var t0={},hw={},yw={},Kie;function h8e(){if(Kie)return yw;Kie=1,Object.defineProperty(yw,"__esModule",{value:!0}),yw.TermFunctionIsIri=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.IS_IRI,overloads:(0,e.declare)(e.SparqlOperator.IS_IRI).onTerm1(()=>r=>(0,e.bool)(r.termType==="namedNode")).collect()})}};return yw.TermFunctionIsIri=u,yw}var Jie;function y8e(){if(Jie)return hw;Jie=1,Object.defineProperty(hw,"__esModule",{value:!0}),hw.ActorFunctionFactoryTermIsIri=void 0;const a=Je(),e=$e(),u=h8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.IS_IRI,e.SparqlOperator.IS_URI],termFunction:!0})}async run(t){return new u.TermFunctionIsIri}};return hw.ActorFunctionFactoryTermIsIri=n,hw}var Wie;function FU(){return Wie||(Wie=1,(function(a){var e=t0&&t0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=t0&&t0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(y8e(),a)})(t0)),t0}var r0={},mw={},bw={},Yie;function m8e(){if(Yie)return bw;Yie=1,Object.defineProperty(bw,"__esModule",{value:!0}),bw.TermFunctionIsLiteral=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.IS_LITERAL,overloads:(0,e.declare)(e.SparqlOperator.IS_LITERAL).onTerm1(()=>r=>(0,e.bool)(r.termType==="literal")).collect()})}};return bw.TermFunctionIsLiteral=u,bw}var Zie;function b8e(){if(Zie)return mw;Zie=1,Object.defineProperty(mw,"__esModule",{value:!0}),mw.ActorFunctionFactoryTermIsLiteral=void 0;const a=Je(),e=$e(),u=m8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.IS_LITERAL],termFunction:!0})}async run(t){return new u.TermFunctionIsLiteral}};return mw.ActorFunctionFactoryTermIsLiteral=n,mw}var eue;function PU(){return eue||(eue=1,(function(a){var e=r0&&r0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=r0&&r0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(b8e(),a)})(r0)),r0}var n0={},gw={},vw={},tue;function g8e(){if(tue)return vw;tue=1,Object.defineProperty(vw,"__esModule",{value:!0}),vw.TermFunctionIsNumeric=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.IS_NUMERIC,overloads:(0,e.declare)(e.SparqlOperator.IS_NUMERIC).onNumeric1(()=>()=>(0,e.bool)(!0)).onTerm1(()=>()=>(0,e.bool)(!1)).collect()})}};return vw.TermFunctionIsNumeric=u,vw}var rue;function v8e(){if(rue)return gw;rue=1,Object.defineProperty(gw,"__esModule",{value:!0}),gw.ActorFunctionFactoryTermIsNumeric=void 0;const a=Je(),e=$e(),u=g8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.IS_NUMERIC],termFunction:!0})}async run(t){return new u.TermFunctionIsNumeric}};return gw.ActorFunctionFactoryTermIsNumeric=n,gw}var nue;function jU(){return nue||(nue=1,(function(a){var e=n0&&n0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=n0&&n0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(v8e(),a)})(n0)),n0}var a0={},_w={},Tw={},aue;function _8e(){if(aue)return Tw;aue=1,Object.defineProperty(Tw,"__esModule",{value:!0}),Tw.TermFunctionIsTriple=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.IS_TRIPLE,overloads:(0,e.declare)(e.SparqlOperator.IS_TRIPLE).onTerm1(()=>r=>(0,e.bool)(r.termType==="quad")).collect()})}};return Tw.TermFunctionIsTriple=u,Tw}var iue;function T8e(){if(iue)return _w;iue=1,Object.defineProperty(_w,"__esModule",{value:!0}),_w.ActorFunctionFactoryTermIsTriple=void 0;const a=Je(),e=$e(),u=_8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.IS_TRIPLE],termFunction:!0})}async run(t){return new u.TermFunctionIsTriple}};return _w.ActorFunctionFactoryTermIsTriple=n,_w}var uue;function MU(){return uue||(uue=1,(function(a){var e=a0&&a0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=a0&&a0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(T8e(),a)})(a0)),a0}var i0={},ww={},Sw={},oue;function w8e(){if(oue)return Sw;oue=1,Object.defineProperty(Sw,"__esModule",{value:!0}),Sw.TermFunctionLang=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.LANG,overloads:(0,e.declare)(e.SparqlOperator.LANG).onLiteral1(()=>r=>(0,e.string)(r.language??"")).collect()})}};return Sw.TermFunctionLang=u,Sw}var sue;function S8e(){if(sue)return ww;sue=1,Object.defineProperty(ww,"__esModule",{value:!0}),ww.ActorFunctionFactoryTermLang=void 0;const a=Je(),e=$e(),u=w8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.LANG],termFunction:!0})}async run(t){return new u.TermFunctionLang}};return ww.ActorFunctionFactoryTermLang=n,ww}var cue;function CU(){return cue||(cue=1,(function(a){var e=i0&&i0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=i0&&i0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(S8e(),a)})(i0)),i0}var u0={},Ew={},Aw={},lue;function E8e(){if(lue)return Aw;lue=1,Object.defineProperty(Aw,"__esModule",{value:!0}),Aw.TermFunctionLangmatches=void 0;const a=Je(),e=$e();let u=class Fg extends a.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.LANG_MATCHES,overloads:(0,e.declare)(e.SparqlOperator.LANG_MATCHES).onBinaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING],()=>(r,t)=>(0,e.bool)(Fg.langMatches(r,t))).collect()})}static langMatches(r,t){const i=r.split("-"),o=t.split("-");if(!Fg.matchLangTag(o[0],i[0])&&!Fg.isWildCard(i[0]))return!1;let l=1,s=1;for(;s<o.length;){if(Fg.isWildCard(o[s])){s++;continue}if(l===i.length)return!1;if(Fg.matchLangTag(o[s],i[l])){l++,s++;continue}if(i[l].length===1)return!1;l++}return!0}static isWildCard(r){return r==="*"}static matchLangTag(r,t){return new RegExp(`/${r}/`,"iu").test(`/${t}/`)}};return Aw.TermFunctionLangmatches=u,Aw}var due;function A8e(){if(due)return Ew;due=1,Object.defineProperty(Ew,"__esModule",{value:!0}),Ew.ActorFunctionFactoryTermLangmatches=void 0;const a=Je(),e=$e(),u=E8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.LANG_MATCHES],termFunction:!0})}async run(t){return new u.TermFunctionLangmatches}};return Ew.ActorFunctionFactoryTermLangmatches=n,Ew}var fue;function LU(){return fue||(fue=1,(function(a){var e=u0&&u0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=u0&&u0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(A8e(),a)})(u0)),u0}var o0={},Ow={},xw={},pue;function O8e(){if(pue)return xw;pue=1,Object.defineProperty(xw,"__esModule",{value:!0}),xw.TermFunctionLcase=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.LCASE,overloads:(0,e.declare)(e.SparqlOperator.LCASE).onString1Typed(()=>r=>(0,e.string)(r.toLowerCase())).onLangString1(()=>r=>(0,e.langString)(r.typedValue.toLowerCase(),r.language)).collect()})}};return xw.TermFunctionLcase=u,xw}var hue;function x8e(){if(hue)return Ow;hue=1,Object.defineProperty(Ow,"__esModule",{value:!0}),Ow.ActorFunctionFactoryTermLcase=void 0;const a=Je(),e=$e(),u=O8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.LCASE],termFunction:!0})}async run(t){return new u.TermFunctionLcase}};return Ow.ActorFunctionFactoryTermLcase=n,Ow}var yue;function qU(){return yue||(yue=1,(function(a){var e=o0&&o0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=o0&&o0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(x8e(),a)})(o0)),o0}var s0={},Rw={},Nw={},mC={exports:{}},mue;function R8e(){return mue||(mue=1,(function(a,e){(function(u){a.exports=u()})(function(u){var n=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f"];function r(m,T){var w=m[0],E=m[1],S=m[2],N=m[3];w+=(E&S|~E&N)+T[0]-680876936|0,w=(w<<7|w>>>25)+E|0,N+=(w&E|~w&S)+T[1]-389564586|0,N=(N<<12|N>>>20)+w|0,S+=(N&w|~N&E)+T[2]+606105819|0,S=(S<<17|S>>>15)+N|0,E+=(S&N|~S&w)+T[3]-1044525330|0,E=(E<<22|E>>>10)+S|0,w+=(E&S|~E&N)+T[4]-176418897|0,w=(w<<7|w>>>25)+E|0,N+=(w&E|~w&S)+T[5]+1200080426|0,N=(N<<12|N>>>20)+w|0,S+=(N&w|~N&E)+T[6]-1473231341|0,S=(S<<17|S>>>15)+N|0,E+=(S&N|~S&w)+T[7]-45705983|0,E=(E<<22|E>>>10)+S|0,w+=(E&S|~E&N)+T[8]+1770035416|0,w=(w<<7|w>>>25)+E|0,N+=(w&E|~w&S)+T[9]-1958414417|0,N=(N<<12|N>>>20)+w|0,S+=(N&w|~N&E)+T[10]-42063|0,S=(S<<17|S>>>15)+N|0,E+=(S&N|~S&w)+T[11]-1990404162|0,E=(E<<22|E>>>10)+S|0,w+=(E&S|~E&N)+T[12]+1804603682|0,w=(w<<7|w>>>25)+E|0,N+=(w&E|~w&S)+T[13]-40341101|0,N=(N<<12|N>>>20)+w|0,S+=(N&w|~N&E)+T[14]-1502002290|0,S=(S<<17|S>>>15)+N|0,E+=(S&N|~S&w)+T[15]+1236535329|0,E=(E<<22|E>>>10)+S|0,w+=(E&N|S&~N)+T[1]-165796510|0,w=(w<<5|w>>>27)+E|0,N+=(w&S|E&~S)+T[6]-1069501632|0,N=(N<<9|N>>>23)+w|0,S+=(N&E|w&~E)+T[11]+643717713|0,S=(S<<14|S>>>18)+N|0,E+=(S&w|N&~w)+T[0]-373897302|0,E=(E<<20|E>>>12)+S|0,w+=(E&N|S&~N)+T[5]-701558691|0,w=(w<<5|w>>>27)+E|0,N+=(w&S|E&~S)+T[10]+38016083|0,N=(N<<9|N>>>23)+w|0,S+=(N&E|w&~E)+T[15]-660478335|0,S=(S<<14|S>>>18)+N|0,E+=(S&w|N&~w)+T[4]-405537848|0,E=(E<<20|E>>>12)+S|0,w+=(E&N|S&~N)+T[9]+568446438|0,w=(w<<5|w>>>27)+E|0,N+=(w&S|E&~S)+T[14]-1019803690|0,N=(N<<9|N>>>23)+w|0,S+=(N&E|w&~E)+T[3]-187363961|0,S=(S<<14|S>>>18)+N|0,E+=(S&w|N&~w)+T[8]+1163531501|0,E=(E<<20|E>>>12)+S|0,w+=(E&N|S&~N)+T[13]-1444681467|0,w=(w<<5|w>>>27)+E|0,N+=(w&S|E&~S)+T[2]-51403784|0,N=(N<<9|N>>>23)+w|0,S+=(N&E|w&~E)+T[7]+1735328473|0,S=(S<<14|S>>>18)+N|0,E+=(S&w|N&~w)+T[12]-1926607734|0,E=(E<<20|E>>>12)+S|0,w+=(E^S^N)+T[5]-378558|0,w=(w<<4|w>>>28)+E|0,N+=(w^E^S)+T[8]-2022574463|0,N=(N<<11|N>>>21)+w|0,S+=(N^w^E)+T[11]+1839030562|0,S=(S<<16|S>>>16)+N|0,E+=(S^N^w)+T[14]-35309556|0,E=(E<<23|E>>>9)+S|0,w+=(E^S^N)+T[1]-1530992060|0,w=(w<<4|w>>>28)+E|0,N+=(w^E^S)+T[4]+1272893353|0,N=(N<<11|N>>>21)+w|0,S+=(N^w^E)+T[7]-155497632|0,S=(S<<16|S>>>16)+N|0,E+=(S^N^w)+T[10]-1094730640|0,E=(E<<23|E>>>9)+S|0,w+=(E^S^N)+T[13]+681279174|0,w=(w<<4|w>>>28)+E|0,N+=(w^E^S)+T[0]-358537222|0,N=(N<<11|N>>>21)+w|0,S+=(N^w^E)+T[3]-722521979|0,S=(S<<16|S>>>16)+N|0,E+=(S^N^w)+T[6]+76029189|0,E=(E<<23|E>>>9)+S|0,w+=(E^S^N)+T[9]-640364487|0,w=(w<<4|w>>>28)+E|0,N+=(w^E^S)+T[12]-421815835|0,N=(N<<11|N>>>21)+w|0,S+=(N^w^E)+T[15]+530742520|0,S=(S<<16|S>>>16)+N|0,E+=(S^N^w)+T[2]-995338651|0,E=(E<<23|E>>>9)+S|0,w+=(S^(E|~N))+T[0]-198630844|0,w=(w<<6|w>>>26)+E|0,N+=(E^(w|~S))+T[7]+1126891415|0,N=(N<<10|N>>>22)+w|0,S+=(w^(N|~E))+T[14]-1416354905|0,S=(S<<15|S>>>17)+N|0,E+=(N^(S|~w))+T[5]-57434055|0,E=(E<<21|E>>>11)+S|0,w+=(S^(E|~N))+T[12]+1700485571|0,w=(w<<6|w>>>26)+E|0,N+=(E^(w|~S))+T[3]-1894986606|0,N=(N<<10|N>>>22)+w|0,S+=(w^(N|~E))+T[10]-1051523|0,S=(S<<15|S>>>17)+N|0,E+=(N^(S|~w))+T[1]-2054922799|0,E=(E<<21|E>>>11)+S|0,w+=(S^(E|~N))+T[8]+1873313359|0,w=(w<<6|w>>>26)+E|0,N+=(E^(w|~S))+T[15]-30611744|0,N=(N<<10|N>>>22)+w|0,S+=(w^(N|~E))+T[6]-1560198380|0,S=(S<<15|S>>>17)+N|0,E+=(N^(S|~w))+T[13]+1309151649|0,E=(E<<21|E>>>11)+S|0,w+=(S^(E|~N))+T[4]-145523070|0,w=(w<<6|w>>>26)+E|0,N+=(E^(w|~S))+T[11]-1120210379|0,N=(N<<10|N>>>22)+w|0,S+=(w^(N|~E))+T[2]+718787259|0,S=(S<<15|S>>>17)+N|0,E+=(N^(S|~w))+T[9]-343485551|0,E=(E<<21|E>>>11)+S|0,m[0]=w+m[0]|0,m[1]=E+m[1]|0,m[2]=S+m[2]|0,m[3]=N+m[3]|0}function t(m){var T=[],w;for(w=0;w<64;w+=4)T[w>>2]=m.charCodeAt(w)+(m.charCodeAt(w+1)<<8)+(m.charCodeAt(w+2)<<16)+(m.charCodeAt(w+3)<<24);return T}function i(m){var T=[],w;for(w=0;w<64;w+=4)T[w>>2]=m[w]+(m[w+1]<<8)+(m[w+2]<<16)+(m[w+3]<<24);return T}function o(m){var T=m.length,w=[1732584193,-271733879,-1732584194,271733878],E,S,N,j,q,O;for(E=64;E<=T;E+=64)r(w,t(m.substring(E-64,E)));for(m=m.substring(E-64),S=m.length,N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=0;E<S;E+=1)N[E>>2]|=m.charCodeAt(E)<<(E%4<<3);if(N[E>>2]|=128<<(E%4<<3),E>55)for(r(w,N),E=0;E<16;E+=1)N[E]=0;return j=T*8,j=j.toString(16).match(/(.*?)(.{0,8})$/),q=parseInt(j[2],16),O=parseInt(j[1],16)||0,N[14]=q,N[15]=O,r(w,N),w}function l(m){var T=m.length,w=[1732584193,-271733879,-1732584194,271733878],E,S,N,j,q,O;for(E=64;E<=T;E+=64)r(w,i(m.subarray(E-64,E)));for(m=E-64<T?m.subarray(E-64):new Uint8Array(0),S=m.length,N=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],E=0;E<S;E+=1)N[E>>2]|=m[E]<<(E%4<<3);if(N[E>>2]|=128<<(E%4<<3),E>55)for(r(w,N),E=0;E<16;E+=1)N[E]=0;return j=T*8,j=j.toString(16).match(/(.*?)(.{0,8})$/),q=parseInt(j[2],16),O=parseInt(j[1],16)||0,N[14]=q,N[15]=O,r(w,N),w}function s(m){var T="",w;for(w=0;w<4;w+=1)T+=n[m>>w*8+4&15]+n[m>>w*8&15];return T}function c(m){var T;for(T=0;T<m.length;T+=1)m[T]=s(m[T]);return m.join("")}c(o("hello")),typeof ArrayBuffer<"u"&&!ArrayBuffer.prototype.slice&&(function(){function m(T,w){return T=T|0||0,T<0?Math.max(T+w,0):Math.min(T,w)}ArrayBuffer.prototype.slice=function(T,w){var E=this.byteLength,S=m(T,E),N=E,j,q,O,I;return w!==u&&(N=m(w,E)),S>N?new ArrayBuffer(0):(j=N-S,q=new ArrayBuffer(j),O=new Uint8Array(q),I=new Uint8Array(this,S,j),O.set(I),q)}})();function d(m){return/[\u0080-\uFFFF]/.test(m)&&(m=unescape(encodeURIComponent(m))),m}function f(m,T){var w=m.length,E=new ArrayBuffer(w),S=new Uint8Array(E),N;for(N=0;N<w;N+=1)S[N]=m.charCodeAt(N);return T?S:E}function p(m){return String.fromCharCode.apply(null,new Uint8Array(m))}function h(m,T,w){var E=new Uint8Array(m.byteLength+T.byteLength);return E.set(new Uint8Array(m)),E.set(new Uint8Array(T),m.byteLength),E}function g(m){var T=[],w=m.length,E;for(E=0;E<w-1;E+=2)T.push(parseInt(m.substr(E,2),16));return String.fromCharCode.apply(String,T)}function v(){this.reset()}return v.prototype.append=function(m){return this.appendBinary(d(m)),this},v.prototype.appendBinary=function(m){this._buff+=m,this._length+=m.length;var T=this._buff.length,w;for(w=64;w<=T;w+=64)r(this._hash,t(this._buff.substring(w-64,w)));return this._buff=this._buff.substring(w-64),this},v.prototype.end=function(m){var T=this._buff,w=T.length,E,S=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],N;for(E=0;E<w;E+=1)S[E>>2]|=T.charCodeAt(E)<<(E%4<<3);return this._finish(S,w),N=c(this._hash),m&&(N=g(N)),this.reset(),N},v.prototype.reset=function(){return this._buff="",this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.prototype.getState=function(){return{buff:this._buff,length:this._length,hash:this._hash.slice()}},v.prototype.setState=function(m){return this._buff=m.buff,this._length=m.length,this._hash=m.hash,this},v.prototype.destroy=function(){delete this._hash,delete this._buff,delete this._length},v.prototype._finish=function(m,T){var w=T,E,S,N;if(m[w>>2]|=128<<(w%4<<3),w>55)for(r(this._hash,m),w=0;w<16;w+=1)m[w]=0;E=this._length*8,E=E.toString(16).match(/(.*?)(.{0,8})$/),S=parseInt(E[2],16),N=parseInt(E[1],16)||0,m[14]=S,m[15]=N,r(this._hash,m)},v.hash=function(m,T){return v.hashBinary(d(m),T)},v.hashBinary=function(m,T){var w=o(m),E=c(w);return T?g(E):E},v.ArrayBuffer=function(){this.reset()},v.ArrayBuffer.prototype.append=function(m){var T=h(this._buff.buffer,m),w=T.length,E;for(this._length+=m.byteLength,E=64;E<=w;E+=64)r(this._hash,i(T.subarray(E-64,E)));return this._buff=E-64<w?new Uint8Array(T.buffer.slice(E-64)):new Uint8Array(0),this},v.ArrayBuffer.prototype.end=function(m){var T=this._buff,w=T.length,E=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],S,N;for(S=0;S<w;S+=1)E[S>>2]|=T[S]<<(S%4<<3);return this._finish(E,w),N=c(this._hash),m&&(N=g(N)),this.reset(),N},v.ArrayBuffer.prototype.reset=function(){return this._buff=new Uint8Array(0),this._length=0,this._hash=[1732584193,-271733879,-1732584194,271733878],this},v.ArrayBuffer.prototype.getState=function(){var m=v.prototype.getState.call(this);return m.buff=p(m.buff),m},v.ArrayBuffer.prototype.setState=function(m){return m.buff=f(m.buff,!0),v.prototype.setState.call(this,m)},v.ArrayBuffer.prototype.destroy=v.prototype.destroy,v.ArrayBuffer.prototype._finish=v.prototype._finish,v.ArrayBuffer.hash=function(m,T){var w=l(new Uint8Array(m)),E=c(w);return T?g(E):E},v})})(mC)),mC.exports}var bue;function N8e(){if(bue)return Nw;bue=1,Object.defineProperty(Nw,"__esModule",{value:!0}),Nw.TermFunctionMd5=void 0;const a=Je(),e=$e(),u=R8e();let n=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.MD5,overloads:(0,e.declare)(e.SparqlOperator.MD5).onString1Typed(()=>t=>(0,e.string)((0,u.hash)(t))).collect()})}};return Nw.TermFunctionMd5=n,Nw}var gue;function I8e(){if(gue)return Rw;gue=1,Object.defineProperty(Rw,"__esModule",{value:!0}),Rw.ActorFunctionFactoryTermMd5=void 0;const a=Je(),e=$e(),u=N8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.MD5],termFunction:!0})}async run(t){return new u.TermFunctionMd5}};return Rw.ActorFunctionFactoryTermMd5=n,Rw}var vue;function BU(){return vue||(vue=1,(function(a){var e=s0&&s0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=s0&&s0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(I8e(),a)})(s0)),s0}var c0={},Iw={},Dw={},_ue;function D8e(){if(_ue)return Dw;_ue=1,Object.defineProperty(Dw,"__esModule",{value:!0}),Dw.TermFunctionMinutes=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.MINUTES,overloads:(0,e.declare)(e.SparqlOperator.MINUTES).onDateTime1(()=>r=>(0,e.integer)(r.typedValue.minutes)).set([e.TypeURL.XSD_TIME],()=>([r])=>(0,e.integer)(r.typedValue.minutes)).collect()})}};return Dw.TermFunctionMinutes=u,Dw}var Tue;function F8e(){if(Tue)return Iw;Tue=1,Object.defineProperty(Iw,"__esModule",{value:!0}),Iw.ActorFunctionFactoryTermMinutes=void 0;const a=Je(),e=$e(),u=D8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.MINUTES],termFunction:!0})}async run(t){return new u.TermFunctionMinutes}};return Iw.ActorFunctionFactoryTermMinutes=n,Iw}var wue;function UU(){return wue||(wue=1,(function(a){var e=c0&&c0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=c0&&c0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(F8e(),a)})(c0)),c0}var l0={},Fw={},Pw={},Sue;function P8e(){if(Sue)return Pw;Sue=1,Object.defineProperty(Pw,"__esModule",{value:!0}),Pw.TermFunctionMonth=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.MONTH,overloads:(0,e.declare)(e.SparqlOperator.MONTH).onDateTime1(()=>r=>(0,e.integer)(r.typedValue.month)).set([e.TypeURL.XSD_DATE],()=>([r])=>(0,e.integer)(r.typedValue.month)).collect()})}};return Pw.TermFunctionMonth=u,Pw}var Eue;function j8e(){if(Eue)return Fw;Eue=1,Object.defineProperty(Fw,"__esModule",{value:!0}),Fw.ActorFunctionFactoryTermMonth=void 0;const a=Je(),e=$e(),u=P8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.MONTH],termFunction:!0})}async run(t){return new u.TermFunctionMonth}};return Fw.ActorFunctionFactoryTermMonth=n,Fw}var Aue;function QU(){return Aue||(Aue=1,(function(a){var e=l0&&l0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=l0&&l0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(j8e(),a)})(l0)),l0}var d0={},jw={},Mw={},Oue;function M8e(){if(Oue)return Mw;Oue=1,Object.defineProperty(Mw,"__esModule",{value:!0}),Mw.TermFunctionMultiplication=void 0;const a=Je(),e=$e(),u=TP();let n=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.MULTIPLICATION,overloads:(0,e.declare)(e.SparqlOperator.MULTIPLICATION).arithmetic(()=>(t,i)=>new u.BigNumber(t).times(i).toNumber()).collect()})}};return Mw.TermFunctionMultiplication=n,Mw}var xue;function C8e(){if(xue)return jw;xue=1,Object.defineProperty(jw,"__esModule",{value:!0}),jw.ActorFunctionFactoryTermMultiplication=void 0;const a=Je(),e=$e(),u=M8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.MULTIPLICATION],termFunction:!0})}async run(t){return new u.TermFunctionMultiplication}};return jw.ActorFunctionFactoryTermMultiplication=n,jw}var Rue;function VU(){return Rue||(Rue=1,(function(a){var e=d0&&d0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=d0&&d0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(C8e(),a)})(d0)),d0}var f0={},Cw={},Lw={},Nue;function L8e(){if(Nue)return Lw;Nue=1,Object.defineProperty(Lw,"__esModule",{value:!0}),Lw.TermFunctionNot=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.NOT,overloads:(0,e.declare)(e.SparqlOperator.NOT).onTerm1(()=>r=>(0,e.bool)(!r.coerceEBV())).collect()})}};return Lw.TermFunctionNot=u,Lw}var Iue;function q8e(){if(Iue)return Cw;Iue=1,Object.defineProperty(Cw,"__esModule",{value:!0}),Cw.ActorFunctionFactoryTermNot=void 0;const a=Je(),e=$e(),u=L8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.NOT],termFunction:!0})}async run(t){return new u.TermFunctionNot}};return Cw.ActorFunctionFactoryTermNot=n,Cw}var Due;function HU(){return Due||(Due=1,(function(a){var e=f0&&f0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=f0&&f0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(q8e(),a)})(f0)),f0}var p0={},qw={},Bw={},Fue;function B8e(){if(Fue)return Bw;Fue=1,Object.defineProperty(Bw,"__esModule",{value:!0}),Bw.TermFunctionNow=void 0;const a=Je(),e=lt(),u=$e();let n=class extends a.TermFunctionBase{constructor(){super({arity:0,operator:u.SparqlOperator.NOW,overloads:(0,u.declare)(u.SparqlOperator.NOW).set([],t=>()=>new u.DateTimeLiteral((0,u.toDateTimeRepresentation)({date:t.context.getSafe(e.KeysInitQuery.queryTimestamp),timeZone:t.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)}))).collect()})}};return Bw.TermFunctionNow=n,Bw}var Pue;function U8e(){if(Pue)return qw;Pue=1,Object.defineProperty(qw,"__esModule",{value:!0}),qw.ActorFunctionFactoryTermNow=void 0;const a=Je(),e=$e(),u=B8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.NOW],termFunction:!0})}async run(t){return new u.TermFunctionNow}};return qw.ActorFunctionFactoryTermNow=n,qw}var jue;function kU(){return jue||(jue=1,(function(a){var e=p0&&p0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=p0&&p0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(U8e(),a)})(p0)),p0}var h0={},Uw={},Qw={},Mue;function Q8e(){if(Mue)return Qw;Mue=1,Object.defineProperty(Qw,"__esModule",{value:!0}),Qw.TermFunctionObject=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.OBJECT,overloads:(0,e.declare)(e.SparqlOperator.OBJECT).onQuad1(()=>r=>r.object).collect()})}};return Qw.TermFunctionObject=u,Qw}var Cue;function V8e(){if(Cue)return Uw;Cue=1,Object.defineProperty(Uw,"__esModule",{value:!0}),Uw.ActorFunctionFactoryTermObject=void 0;const a=Je(),e=$e(),u=Q8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.OBJECT],termFunction:!0})}async run(t){return new u.TermFunctionObject}};return Uw.ActorFunctionFactoryTermObject=n,Uw}var Lue;function zU(){return Lue||(Lue=1,(function(a){var e=h0&&h0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=h0&&h0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(V8e(),a)})(h0)),h0}var y0={},Vw={},Hw={},que;function H8e(){if(que)return Hw;que=1,Object.defineProperty(Hw,"__esModule",{value:!0}),Hw.TermFunctionPredicate=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.PREDICATE,overloads:(0,e.declare)(e.SparqlOperator.PREDICATE).onQuad1(()=>r=>r.predicate).collect()})}};return Hw.TermFunctionPredicate=u,Hw}var Bue;function k8e(){if(Bue)return Vw;Bue=1,Object.defineProperty(Vw,"__esModule",{value:!0}),Vw.ActorFunctionFactoryTermPredicate=void 0;const a=Je(),e=$e(),u=H8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.PREDICATE],termFunction:!0})}async run(t){return new u.TermFunctionPredicate}};return Vw.ActorFunctionFactoryTermPredicate=n,Vw}var Uue;function GU(){return Uue||(Uue=1,(function(a){var e=y0&&y0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=y0&&y0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(k8e(),a)})(y0)),y0}var m0={},kw={},zw={},Que;function z8e(){if(Que)return zw;Que=1,Object.defineProperty(zw,"__esModule",{value:!0}),zw.TermFunctionRand=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:0,operator:e.SparqlOperator.RAND,overloads:(0,e.declare)(e.SparqlOperator.RAND).set([],()=>()=>(0,e.double)(Math.random())).collect()})}};return zw.TermFunctionRand=u,zw}var Vue;function G8e(){if(Vue)return kw;Vue=1,Object.defineProperty(kw,"__esModule",{value:!0}),kw.ActorFunctionFactoryTermRand=void 0;const a=Je(),e=$e(),u=z8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.RAND],termFunction:!0})}async run(t){return new u.TermFunctionRand}};return kw.ActorFunctionFactoryTermRand=n,kw}var Hue;function $U(){return Hue||(Hue=1,(function(a){var e=m0&&m0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=m0&&m0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(G8e(),a)})(m0)),m0}var b0={},Gw={},$w={},kue;function FTe(){if(kue)return $w;kue=1,Object.defineProperty($w,"__esModule",{value:!0}),$w.TermFunctionRegex=void 0;const a=Je(),e=$e();let u=class Kc extends a.TermFunctionBase{constructor(){super({arity:[2,3],operator:e.SparqlOperator.REGEX,overloads:(0,e.declare)(e.SparqlOperator.REGEX).onBinaryTyped([e.TypeAlias.SPARQL_STRINGLY,e.TypeURL.XSD_STRING],Kc.regex2).onTernaryTyped([e.TypeAlias.SPARQL_STRINGLY,e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING],Kc.regex3).collect()})}static regex2(){return(r,t)=>(0,e.bool)(Kc.matches(r,t))}static regex3(){return(r,t,i)=>(0,e.bool)(Kc.matches(r,t,i))}static matches(r,t,i=""){return i=Kc.cleanFlags(i),i.includes("x")&&(t=Kc.flagX(t)),i.includes("q")&&(t=Kc.flagQ(t)),new RegExp(t,i.replaceAll(/[qx]/gu,"")).test(r)}static cleanFlags(r){if(!/^[imsxq]*$/u.test(r))throw new Error("Invalid flags");const t=[...r].find((i,o,l)=>l.indexOf(i)!==o);if(t)throw new Error(`Duplicate flag: ${t}`);return r?.includes("q")&&(r=r.replaceAll(/[msx]/gu,"")),`${r}u`}static flagX(r){if(!r)return r;let t=r[0];for(;["	",`
`,"\r"," "].includes(t);)r=r.slice(1),t=r[0];let i=t==="[";for(let o=1;o<r.length;o++){const l=r[o];["	",`
`,"\r"," "].includes(l)&&!i?(r=r.slice(0,o)+r.slice(o+1),o--):l==="["&&t!=="\\"?i=!0:l==="]"&&t!=="\\"&&(i=!1),t=l}return r}static flagQ(r){return r.replaceAll(/([?+*.{}()[\]\\|])/gu,"\\$1").replaceAll(/^\^/gu,"\\^").replaceAll(/\$$/gu,"\\$")}};return $w.TermFunctionRegex=u,$w}var zue;function $8e(){if(zue)return Gw;zue=1,Object.defineProperty(Gw,"__esModule",{value:!0}),Gw.ActorFunctionFactoryTermRegex=void 0;const a=Je(),e=$e(),u=FTe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.REGEX],termFunction:!0})}async run(t){return new u.TermFunctionRegex}};return Gw.ActorFunctionFactoryTermRegex=n,Gw}var Gue;function wP(){return Gue||(Gue=1,(function(a){var e=b0&&b0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=b0&&b0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u($8e(),a),u(FTe(),a)})(b0)),b0}var g0={},Xw={},Kw={},$ue;function X8e(){if($ue)return Kw;$ue=1,Object.defineProperty(Kw,"__esModule",{value:!0}),Kw.TermFunctionReplace=void 0;const a=wP(),e=Je(),u=$e();let n=class k6 extends e.TermFunctionBase{constructor(){super({arity:[3,4],operator:u.SparqlOperator.REPLACE,overloads:(0,u.declare)(u.SparqlOperator.REPLACE).onTernaryTyped([u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING],()=>(t,i,o)=>(0,u.string)(k6.replace(t,i,o))).set([u.TypeURL.RDF_LANG_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING],()=>([t,i,o])=>{const l=k6.replace(t.typedValue,i.typedValue,o.typedValue);return(0,u.langString)(l,t.language)}).onQuaternaryTyped([u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING],()=>(t,i,o,l)=>(0,u.string)(k6.replace(t,i,o,l))).set([u.TypeURL.RDF_LANG_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING,u.TypeURL.XSD_STRING],()=>([t,i,o,l])=>{const s=k6.replace(t.typedValue,i.typedValue,o.typedValue,l.typedValue);return(0,u.langString)(s,t.language)}).collect()})}static replace(t,i,o,l=""){return l=a.TermFunctionRegex.cleanFlags(l),l.includes("x")&&(i=a.TermFunctionRegex.flagX(i)),l.includes("q")?i=a.TermFunctionRegex.flagQ(i):o=o.replaceAll("$0",()=>"$&"),l=`${l.replaceAll(/[qx]/gu,"")}g`,t.replaceAll(new RegExp(i,l),o)}};return Kw.TermFunctionReplace=n,Kw}var Xue;function K8e(){if(Xue)return Xw;Xue=1,Object.defineProperty(Xw,"__esModule",{value:!0}),Xw.ActorFunctionFactoryTermReplace=void 0;const a=Je(),e=$e(),u=X8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.REPLACE],termFunction:!0})}async run(t){return new u.TermFunctionReplace}};return Xw.ActorFunctionFactoryTermReplace=n,Xw}var Kue;function XU(){return Kue||(Kue=1,(function(a){var e=g0&&g0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=g0&&g0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(K8e(),a)})(g0)),g0}var v0={},Jw={},Ww={},Jue;function J8e(){if(Jue)return Ww;Jue=1,Object.defineProperty(Ww,"__esModule",{value:!0}),Ww.TermFunctionRound=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.ROUND,overloads:(0,e.declare)(e.SparqlOperator.ROUND).numericConverter(()=>r=>Math.round(r)).collect()})}};return Ww.TermFunctionRound=u,Ww}var Wue;function W8e(){if(Wue)return Jw;Wue=1,Object.defineProperty(Jw,"__esModule",{value:!0}),Jw.ActorFunctionFactoryTermRound=void 0;const a=Je(),e=$e(),u=J8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.ROUND],termFunction:!0})}async run(t){return new u.TermFunctionRound}};return Jw.ActorFunctionFactoryTermRound=n,Jw}var Yue;function KU(){return Yue||(Yue=1,(function(a){var e=v0&&v0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=v0&&v0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(W8e(),a)})(v0)),v0}var _0={},Yw={},Zw={},Zue;function Y8e(){if(Zue)return Zw;Zue=1,Object.defineProperty(Zw,"__esModule",{value:!0}),Zw.TermFunctionSeconds=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SECONDS,overloads:(0,e.declare)(e.SparqlOperator.SECONDS).onDateTime1(()=>r=>(0,e.decimal)(r.typedValue.seconds)).set([e.TypeURL.XSD_TIME],()=>([r])=>(0,e.integer)(r.typedValue.seconds)).collect()})}};return Zw.TermFunctionSeconds=u,Zw}var eoe;function Z8e(){if(eoe)return Yw;eoe=1,Object.defineProperty(Yw,"__esModule",{value:!0}),Yw.ActorFunctionFactoryTermSeconds=void 0;const a=Je(),e=$e(),u=Y8e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.SECONDS],termFunction:!0})}async run(t){return new u.TermFunctionSeconds}};return Yw.ActorFunctionFactoryTermSeconds=n,Yw}var toe;function JU(){return toe||(toe=1,(function(a){var e=_0&&_0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=_0&&_0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Z8e(),a)})(_0)),_0}var T0={},eS={},tS={},roe;function e5e(){if(roe)return tS;roe=1,Object.defineProperty(tS,"__esModule",{value:!0}),tS.TermFunctionSha1=void 0;const a=Je(),e=$e(),u=ic();let n=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SHA1,overloads:(0,e.declare)(e.SparqlOperator.SHA1).onString1Typed(()=>t=>(0,e.string)((0,u.sha1)().update(t).digest("hex"))).collect()})}};return tS.TermFunctionSha1=n,tS}var noe;function t5e(){if(noe)return eS;noe=1,Object.defineProperty(eS,"__esModule",{value:!0}),eS.ActorFunctionFactoryTermSha1=void 0;const a=Je(),e=$e(),u=e5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.SHA1],termFunction:!0})}async run(t){return new u.TermFunctionSha1}};return eS.ActorFunctionFactoryTermSha1=n,eS}var aoe;function WU(){return aoe||(aoe=1,(function(a){var e=T0&&T0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=T0&&T0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(t5e(),a)})(T0)),T0}var w0={},rS={},nS={},ioe;function r5e(){if(ioe)return nS;ioe=1,Object.defineProperty(nS,"__esModule",{value:!0}),nS.TermFunctionSha256=void 0;const a=Je(),e=$e(),u=ic();let n=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SHA256,overloads:(0,e.declare)(e.SparqlOperator.SHA256).onString1Typed(()=>t=>(0,e.string)((0,u.sha256)().update(t).digest("hex"))).collect()})}};return nS.TermFunctionSha256=n,nS}var uoe;function n5e(){if(uoe)return rS;uoe=1,Object.defineProperty(rS,"__esModule",{value:!0}),rS.ActorFunctionFactoryTermSha256=void 0;const a=Je(),e=$e(),u=r5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.SHA256],termFunction:!0})}async run(t){return new u.TermFunctionSha256}};return rS.ActorFunctionFactoryTermSha256=n,rS}var ooe;function YU(){return ooe||(ooe=1,(function(a){var e=w0&&w0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=w0&&w0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(n5e(),a)})(w0)),w0}var S0={},aS={},iS={},soe;function a5e(){if(soe)return iS;soe=1,Object.defineProperty(iS,"__esModule",{value:!0}),iS.TermFunctionSha384=void 0;const a=Je(),e=$e(),u=ic();let n=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SHA384,overloads:(0,e.declare)(e.SparqlOperator.SHA384).onString1Typed(()=>t=>(0,e.string)((0,u.sha384)().update(t).digest("hex"))).collect()})}};return iS.TermFunctionSha384=n,iS}var coe;function i5e(){if(coe)return aS;coe=1,Object.defineProperty(aS,"__esModule",{value:!0}),aS.ActorFunctionFactoryTermSha384=void 0;const a=Je(),e=$e(),u=a5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.SHA384],termFunction:!0})}async run(t){return new u.TermFunctionSha384}};return aS.ActorFunctionFactoryTermSha384=n,aS}var loe;function ZU(){return loe||(loe=1,(function(a){var e=S0&&S0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=S0&&S0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(i5e(),a)})(S0)),S0}var E0={},uS={},oS={},doe;function u5e(){if(doe)return oS;doe=1,Object.defineProperty(oS,"__esModule",{value:!0}),oS.TermFunctionSha512=void 0;const a=Je(),e=$e(),u=ic();let n=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SHA512,overloads:(0,e.declare)(e.SparqlOperator.SHA512).onString1Typed(()=>t=>(0,e.string)((0,u.sha512)().update(t).digest("hex"))).collect()})}};return oS.TermFunctionSha512=n,oS}var foe;function o5e(){if(foe)return uS;foe=1,Object.defineProperty(uS,"__esModule",{value:!0}),uS.ActorFunctionFactoryTermSha512=void 0;const a=Je(),e=$e(),u=u5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.SHA512],termFunction:!0})}async run(t){return new u.TermFunctionSha512}};return uS.ActorFunctionFactoryTermSha512=n,uS}var poe;function eQ(){return poe||(poe=1,(function(a){var e=E0&&E0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=E0&&E0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(o5e(),a)})(E0)),E0}var A0={},sS={},cS={},hoe;function s5e(){if(hoe)return cS;hoe=1,Object.defineProperty(cS,"__esModule",{value:!0}),cS.TermFunctionStrAfter=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.STRAFTER,overloads:(0,e.declare)(e.SparqlOperator.STRAFTER).onBinaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING],()=>(r,t)=>(0,e.string)(r.slice(r.indexOf(t)).slice(t.length))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.XSD_STRING],()=>(r,t)=>{const[i,o]=[r.typedValue,t.typedValue],l=i.slice(i.indexOf(o)).slice(o.length);return l||!o?(0,e.langString)(l,r.language):(0,e.string)(l)}).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(r,t)=>{if(r.language!==t.language)throw new e.IncompatibleLanguageOperation(r,t);const[i,o]=[r.typedValue,t.typedValue],l=i.slice(i.indexOf(o)).slice(o.length);return l||!o?(0,e.langString)(l,r.language):(0,e.string)(l)}).collect()})}};return cS.TermFunctionStrAfter=u,cS}var yoe;function c5e(){if(yoe)return sS;yoe=1,Object.defineProperty(sS,"__esModule",{value:!0}),sS.ActorFunctionFactoryTermStrAfter=void 0;const a=Je(),e=$e(),u=s5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.STRAFTER],termFunction:!0})}async run(t){return new u.TermFunctionStrAfter}};return sS.ActorFunctionFactoryTermStrAfter=n,sS}var moe;function tQ(){return moe||(moe=1,(function(a){var e=A0&&A0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=A0&&A0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(c5e(),a)})(A0)),A0}var O0={},lS={},dS={},boe;function l5e(){if(boe)return dS;boe=1,Object.defineProperty(dS,"__esModule",{value:!0}),dS.TermFunctionStrBefore=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.STRBEFORE,overloads:(0,e.declare)(e.SparqlOperator.STRBEFORE).onBinaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING],()=>(r,t)=>(0,e.string)(r.slice(0,Math.max(0,r.indexOf(t))))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.XSD_STRING],()=>(r,t)=>{const[i,o]=[r.typedValue,t.typedValue],l=r.typedValue.slice(0,Math.max(0,i.indexOf(o)));return l||!o?(0,e.langString)(l,r.language):(0,e.string)(l)}).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(r,t)=>{if(r.language!==t.language)throw new e.IncompatibleLanguageOperation(r,t);const[i,o]=[r.typedValue,t.typedValue],l=r.typedValue.slice(0,Math.max(0,i.indexOf(o)));return l||!o?(0,e.langString)(l,r.language):(0,e.string)(l)}).collect()})}};return dS.TermFunctionStrBefore=u,dS}var goe;function d5e(){if(goe)return lS;goe=1,Object.defineProperty(lS,"__esModule",{value:!0}),lS.ActorFunctionFactoryTermStrBefore=void 0;const a=Je(),e=$e(),u=l5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.STRBEFORE],termFunction:!0})}async run(t){return new u.TermFunctionStrBefore}};return lS.ActorFunctionFactoryTermStrBefore=n,lS}var voe;function rQ(){return voe||(voe=1,(function(a){var e=O0&&O0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=O0&&O0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(d5e(),a)})(O0)),O0}var x0={},fS={},pS={},_oe;function f5e(){if(_oe)return pS;_oe=1,Object.defineProperty(pS,"__esModule",{value:!0}),pS.TermFunctionStrDt=void 0;const a=Je(),e=lt(),u=$e();let n=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:u.SparqlOperator.STRDT,overloads:(0,u.declare)(u.SparqlOperator.STRDT).set([u.TypeURL.XSD_STRING,"namedNode"],t=>([i,o])=>{const l=t.context.getSafe(e.KeysInitQuery.dataFactory),s=l.literal(i.typedValue,l.namedNode(o.value));return new u.TermTransformer(t.context.getSafe(e.KeysExpressionEvaluator.superTypeProvider)).transformLiteral(s)}).collect()})}};return pS.TermFunctionStrDt=n,pS}var Toe;function p5e(){if(Toe)return fS;Toe=1,Object.defineProperty(fS,"__esModule",{value:!0}),fS.ActorFunctionFactoryTermStrDt=void 0;const a=Je(),e=$e(),u=f5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.STRDT],termFunction:!0})}async run(t){return new u.TermFunctionStrDt}};return fS.ActorFunctionFactoryTermStrDt=n,fS}var woe;function nQ(){return woe||(woe=1,(function(a){var e=x0&&x0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=x0&&x0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(p5e(),a)})(x0)),x0}var R0={},hS={},yS={},Soe;function h5e(){if(Soe)return yS;Soe=1,Object.defineProperty(yS,"__esModule",{value:!0}),yS.TermFunctionStrEnds=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.STRENDS,overloads:(0,e.declare)(e.SparqlOperator.STRENDS).onBinaryTyped([e.TypeAlias.SPARQL_STRINGLY,e.TypeURL.XSD_STRING],()=>(r,t)=>(0,e.bool)(r.endsWith(t))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(r,t)=>{if(r.language!==t.language)throw new e.IncompatibleLanguageOperation(r,t);return(0,e.bool)(r.typedValue.endsWith(t.typedValue))}).collect()})}};return yS.TermFunctionStrEnds=u,yS}var Eoe;function y5e(){if(Eoe)return hS;Eoe=1,Object.defineProperty(hS,"__esModule",{value:!0}),hS.ActorFunctionFactoryTermStrEnds=void 0;const a=Je(),e=$e(),u=h5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.STRENDS],termFunction:!0})}async run(t){return new u.TermFunctionStrEnds}};return hS.ActorFunctionFactoryTermStrEnds=n,hS}var Aoe;function aQ(){return Aoe||(Aoe=1,(function(a){var e=R0&&R0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=R0&&R0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(y5e(),a)})(R0)),R0}var N0={},mS={},bS={},Ooe;function m5e(){if(Ooe)return bS;Ooe=1,Object.defineProperty(bS,"__esModule",{value:!0}),bS.TermFunctionStrLang=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.STRLANG,overloads:(0,e.declare)(e.SparqlOperator.STRLANG).onBinaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_STRING],()=>(r,t)=>new e.LangStringLiteral(r,t.toLowerCase())).collect()})}};return bS.TermFunctionStrLang=u,bS}var xoe;function b5e(){if(xoe)return mS;xoe=1,Object.defineProperty(mS,"__esModule",{value:!0}),mS.ActorFunctionFactoryTermStrLang=void 0;const a=Je(),e=$e(),u=m5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.STRLANG],termFunction:!0})}async run(t){return new u.TermFunctionStrLang}};return mS.ActorFunctionFactoryTermStrLang=n,mS}var Roe;function iQ(){return Roe||(Roe=1,(function(a){var e=N0&&N0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=N0&&N0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(b5e(),a)})(N0)),N0}var I0={},gS={},vS={},Noe;function g5e(){if(Noe)return vS;Noe=1,Object.defineProperty(vS,"__esModule",{value:!0}),vS.TermFunctionStrLen=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.STRLEN,overloads:(0,e.declare)(e.SparqlOperator.STRLEN).onStringly1(()=>r=>(0,e.integer)([...r.typedValue].length)).collect()})}};return vS.TermFunctionStrLen=u,vS}var Ioe;function v5e(){if(Ioe)return gS;Ioe=1,Object.defineProperty(gS,"__esModule",{value:!0}),gS.ActorFunctionFactoryTermStrLen=void 0;const a=Je(),e=$e(),u=g5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.STRLEN],termFunction:!0})}async run(t){return new u.TermFunctionStrLen}};return gS.ActorFunctionFactoryTermStrLen=n,gS}var Doe;function uQ(){return Doe||(Doe=1,(function(a){var e=I0&&I0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=I0&&I0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(v5e(),a)})(I0)),I0}var D0={},_S={},TS={},Foe;function _5e(){if(Foe)return TS;Foe=1,Object.defineProperty(TS,"__esModule",{value:!0}),TS.TermFunctionStrStarts=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:e.SparqlOperator.STRSTARTS,overloads:(0,e.declare)(e.SparqlOperator.STRSTARTS).onBinaryTyped([e.TypeAlias.SPARQL_STRINGLY,e.TypeURL.XSD_STRING],()=>(r,t)=>(0,e.bool)(r.startsWith(t))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.RDF_LANG_STRING],()=>(r,t)=>{if(r.language!==t.language)throw new e.IncompatibleLanguageOperation(r,t);return(0,e.bool)(r.typedValue.startsWith(t.typedValue))}).collect()})}};return TS.TermFunctionStrStarts=u,TS}var Poe;function T5e(){if(Poe)return _S;Poe=1,Object.defineProperty(_S,"__esModule",{value:!0}),_S.ActorFunctionFactoryTermStrStarts=void 0;const a=Je(),e=$e(),u=_5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.STRSTARTS],termFunction:!0})}async run(t){return new u.TermFunctionStrStarts}};return _S.ActorFunctionFactoryTermStrStarts=n,_S}var joe;function oQ(){return joe||(joe=1,(function(a){var e=D0&&D0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=D0&&D0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(T5e(),a)})(D0)),D0}var F0={},wS={},SS={},bC={},yD={},Moe;function w5e(){return Moe||(Moe=1,Object.defineProperty(yD,"__esModule",{value:!0}),yD.default="ffffffff-ffff-ffff-ffff-ffffffffffff"),yD}var mD={},Coe;function S5e(){return Coe||(Coe=1,Object.defineProperty(mD,"__esModule",{value:!0}),mD.default="00000000-0000-0000-0000-000000000000"),mD}var bD={},gD={},vD={},Loe;function E5e(){return Loe||(Loe=1,Object.defineProperty(vD,"__esModule",{value:!0}),vD.default=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i),vD}var qoe;function SP(){if(qoe)return gD;qoe=1,Object.defineProperty(gD,"__esModule",{value:!0});const a=E5e();function e(u){return typeof u=="string"&&a.default.test(u)}return gD.default=e,gD}var Boe;function EP(){if(Boe)return bD;Boe=1,Object.defineProperty(bD,"__esModule",{value:!0});const a=SP();function e(u){if(!(0,a.default)(u))throw TypeError("Invalid UUID");let n;return Uint8Array.of((n=parseInt(u.slice(0,8),16))>>>24,n>>>16&255,n>>>8&255,n&255,(n=parseInt(u.slice(9,13),16))>>>8,n&255,(n=parseInt(u.slice(14,18),16))>>>8,n&255,(n=parseInt(u.slice(19,23),16))>>>8,n&255,(n=parseInt(u.slice(24,36),16))/1099511627776&255,n/4294967296&255,n>>>24&255,n>>>16&255,n>>>8&255,n&255)}return bD.default=e,bD}var gg={},Uoe;function wl(){if(Uoe)return gg;Uoe=1,Object.defineProperty(gg,"__esModule",{value:!0}),gg.unsafeStringify=void 0;const a=SP(),e=[];for(let r=0;r<256;++r)e.push((r+256).toString(16).slice(1));function u(r,t=0){return(e[r[t+0]]+e[r[t+1]]+e[r[t+2]]+e[r[t+3]]+"-"+e[r[t+4]]+e[r[t+5]]+"-"+e[r[t+6]]+e[r[t+7]]+"-"+e[r[t+8]]+e[r[t+9]]+"-"+e[r[t+10]]+e[r[t+11]]+e[r[t+12]]+e[r[t+13]]+e[r[t+14]]+e[r[t+15]]).toLowerCase()}gg.unsafeStringify=u;function n(r,t=0){const i=u(r,t);if(!(0,a.default)(i))throw TypeError("Stringified UUID is invalid");return i}return gg.default=n,gg}var vg={},_D={},Qoe;function sQ(){if(Qoe)return _D;Qoe=1,Object.defineProperty(_D,"__esModule",{value:!0});let a;const e=new Uint8Array(16);function u(){if(!a){if(typeof crypto>"u"||!crypto.getRandomValues)throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");a=crypto.getRandomValues.bind(crypto)}return a(e)}return _D.default=u,_D}var Voe;function PTe(){if(Voe)return vg;Voe=1,Object.defineProperty(vg,"__esModule",{value:!0}),vg.updateV1State=void 0;const a=sQ(),e=wl(),u={};function n(i,o,l){let s;const c=i?._v6??!1;if(i){const d=Object.keys(i);d.length===1&&d[0]==="_v6"&&(i=void 0)}if(i)s=t(i.random??i.rng?.()??(0,a.default)(),i.msecs,i.nsecs,i.clockseq,i.node,o,l);else{const d=Date.now(),f=(0,a.default)();r(u,d,f),s=t(f,u.msecs,u.nsecs,c?void 0:u.clockseq,c?void 0:u.node,o,l)}return o??(0,e.unsafeStringify)(s)}function r(i,o,l){return i.msecs??=-1/0,i.nsecs??=0,o===i.msecs?(i.nsecs++,i.nsecs>=1e4&&(i.node=void 0,i.nsecs=0)):o>i.msecs?i.nsecs=0:o<i.msecs&&(i.node=void 0),i.node||(i.node=l.slice(10,16),i.node[0]|=1,i.clockseq=(l[8]<<8|l[9])&16383),i.msecs=o,i}vg.updateV1State=r;function t(i,o,l,s,c,d,f=0){if(i.length<16)throw new Error("Random bytes length must be >= 16");if(!d)d=new Uint8Array(16),f=0;else if(f<0||f+16>d.length)throw new RangeError(`UUID byte range ${f}:${f+15} is out of buffer bounds`);o??=Date.now(),l??=0,s??=(i[8]<<8|i[9])&16383,c??=i.slice(10,16),o+=122192928e5;const p=((o&268435455)*1e4+l)%4294967296;d[f++]=p>>>24&255,d[f++]=p>>>16&255,d[f++]=p>>>8&255,d[f++]=p&255;const h=o/4294967296*1e4&268435455;d[f++]=h>>>8&255,d[f++]=h&255,d[f++]=h>>>24&15|16,d[f++]=h>>>16&255,d[f++]=s>>>8|128,d[f++]=s&255;for(let g=0;g<6;++g)d[f++]=c[g];return d}return vg.default=n,vg}var TD={},Hoe;function jTe(){if(Hoe)return TD;Hoe=1,Object.defineProperty(TD,"__esModule",{value:!0});const a=EP(),e=wl();function u(r){const t=typeof r=="string"?(0,a.default)(r):r,i=n(t);return typeof r=="string"?(0,e.unsafeStringify)(i):i}TD.default=u;function n(r){return Uint8Array.of((r[6]&15)<<4|r[7]>>4&15,(r[7]&15)<<4|(r[4]&240)>>4,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,(r[1]&15)<<4|(r[2]&240)>>4,96|r[2]&15,r[3],r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}return TD}var gC={},wD={},koe;function A5e(){if(koe)return wD;koe=1,Object.defineProperty(wD,"__esModule",{value:!0});function a(f){const p=r(f),h=n(p,f.length*8);return e(h)}function e(f){const p=new Uint8Array(f.length*4);for(let h=0;h<f.length*4;h++)p[h]=f[h>>2]>>>h%4*8&255;return p}function u(f){return(f+64>>>9<<4)+14+1}function n(f,p){const h=new Uint32Array(u(p)).fill(0);h.set(f),h[p>>5]|=128<<p%32,h[h.length-1]=p,f=h;let g=1732584193,v=-271733879,m=-1732584194,T=271733878;for(let w=0;w<f.length;w+=16){const E=g,S=v,N=m,j=T;g=l(g,v,m,T,f[w],7,-680876936),T=l(T,g,v,m,f[w+1],12,-389564586),m=l(m,T,g,v,f[w+2],17,606105819),v=l(v,m,T,g,f[w+3],22,-1044525330),g=l(g,v,m,T,f[w+4],7,-176418897),T=l(T,g,v,m,f[w+5],12,1200080426),m=l(m,T,g,v,f[w+6],17,-1473231341),v=l(v,m,T,g,f[w+7],22,-45705983),g=l(g,v,m,T,f[w+8],7,1770035416),T=l(T,g,v,m,f[w+9],12,-1958414417),m=l(m,T,g,v,f[w+10],17,-42063),v=l(v,m,T,g,f[w+11],22,-1990404162),g=l(g,v,m,T,f[w+12],7,1804603682),T=l(T,g,v,m,f[w+13],12,-40341101),m=l(m,T,g,v,f[w+14],17,-1502002290),v=l(v,m,T,g,f[w+15],22,1236535329),g=s(g,v,m,T,f[w+1],5,-165796510),T=s(T,g,v,m,f[w+6],9,-1069501632),m=s(m,T,g,v,f[w+11],14,643717713),v=s(v,m,T,g,f[w],20,-373897302),g=s(g,v,m,T,f[w+5],5,-701558691),T=s(T,g,v,m,f[w+10],9,38016083),m=s(m,T,g,v,f[w+15],14,-660478335),v=s(v,m,T,g,f[w+4],20,-405537848),g=s(g,v,m,T,f[w+9],5,568446438),T=s(T,g,v,m,f[w+14],9,-1019803690),m=s(m,T,g,v,f[w+3],14,-187363961),v=s(v,m,T,g,f[w+8],20,1163531501),g=s(g,v,m,T,f[w+13],5,-1444681467),T=s(T,g,v,m,f[w+2],9,-51403784),m=s(m,T,g,v,f[w+7],14,1735328473),v=s(v,m,T,g,f[w+12],20,-1926607734),g=c(g,v,m,T,f[w+5],4,-378558),T=c(T,g,v,m,f[w+8],11,-2022574463),m=c(m,T,g,v,f[w+11],16,1839030562),v=c(v,m,T,g,f[w+14],23,-35309556),g=c(g,v,m,T,f[w+1],4,-1530992060),T=c(T,g,v,m,f[w+4],11,1272893353),m=c(m,T,g,v,f[w+7],16,-155497632),v=c(v,m,T,g,f[w+10],23,-1094730640),g=c(g,v,m,T,f[w+13],4,681279174),T=c(T,g,v,m,f[w],11,-358537222),m=c(m,T,g,v,f[w+3],16,-722521979),v=c(v,m,T,g,f[w+6],23,76029189),g=c(g,v,m,T,f[w+9],4,-640364487),T=c(T,g,v,m,f[w+12],11,-421815835),m=c(m,T,g,v,f[w+15],16,530742520),v=c(v,m,T,g,f[w+2],23,-995338651),g=d(g,v,m,T,f[w],6,-198630844),T=d(T,g,v,m,f[w+7],10,1126891415),m=d(m,T,g,v,f[w+14],15,-1416354905),v=d(v,m,T,g,f[w+5],21,-57434055),g=d(g,v,m,T,f[w+12],6,1700485571),T=d(T,g,v,m,f[w+3],10,-1894986606),m=d(m,T,g,v,f[w+10],15,-1051523),v=d(v,m,T,g,f[w+1],21,-2054922799),g=d(g,v,m,T,f[w+8],6,1873313359),T=d(T,g,v,m,f[w+15],10,-30611744),m=d(m,T,g,v,f[w+6],15,-1560198380),v=d(v,m,T,g,f[w+13],21,1309151649),g=d(g,v,m,T,f[w+4],6,-145523070),T=d(T,g,v,m,f[w+11],10,-1120210379),m=d(m,T,g,v,f[w+2],15,718787259),v=d(v,m,T,g,f[w+9],21,-343485551),g=t(g,E),v=t(v,S),m=t(m,N),T=t(T,j)}return Uint32Array.of(g,v,m,T)}function r(f){if(f.length===0)return new Uint32Array;const p=new Uint32Array(u(f.length*8)).fill(0);for(let h=0;h<f.length;h++)p[h>>2]|=(f[h]&255)<<h%4*8;return p}function t(f,p){const h=(f&65535)+(p&65535);return(f>>16)+(p>>16)+(h>>16)<<16|h&65535}function i(f,p){return f<<p|f>>>32-p}function o(f,p,h,g,v,m){return t(i(t(t(p,f),t(g,m)),v),h)}function l(f,p,h,g,v,m,T){return o(p&h|~p&g,f,p,v,m,T)}function s(f,p,h,g,v,m,T){return o(p&g|h&~g,f,p,v,m,T)}function c(f,p,h,g,v,m,T){return o(p^h^g,f,p,v,m,T)}function d(f,p,h,g,v,m,T){return o(h^(p|~g),f,p,v,m,T)}return wD.default=a,wD}var Do={},zoe;function xF(){if(zoe)return Do;zoe=1,Object.defineProperty(Do,"__esModule",{value:!0}),Do.URL=Do.DNS=Do.stringToBytes=void 0;const a=EP(),e=wl();function u(r){r=unescape(encodeURIComponent(r));const t=new Uint8Array(r.length);for(let i=0;i<r.length;++i)t[i]=r.charCodeAt(i);return t}Do.stringToBytes=u,Do.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",Do.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8";function n(r,t,i,o,l,s){const c=typeof i=="string"?u(i):i,d=typeof o=="string"?(0,a.default)(o):o;if(typeof o=="string"&&(o=(0,a.default)(o)),o?.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");let f=new Uint8Array(16+c.length);if(f.set(d),f.set(c,d.length),f=t(f),f[6]=f[6]&15|r,f[8]=f[8]&63|128,l){s=s||0;for(let p=0;p<16;++p)l[s+p]=f[p];return l}return(0,e.unsafeStringify)(f)}return Do.default=n,Do}var Goe;function O5e(){return Goe||(Goe=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.URL=a.DNS=void 0;const e=A5e(),u=xF();var n=xF();Object.defineProperty(a,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(a,"URL",{enumerable:!0,get:function(){return n.URL}});function r(t,i,o,l){return(0,u.default)(48,e.default,t,i,o,l)}r.DNS=u.DNS,r.URL=u.URL,a.default=r})(gC)),gC}var SD={},ED={},$oe;function x5e(){if($oe)return ED;$oe=1,Object.defineProperty(ED,"__esModule",{value:!0});const a=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto);return ED.default={randomUUID:a},ED}var Xoe;function R5e(){if(Xoe)return SD;Xoe=1,Object.defineProperty(SD,"__esModule",{value:!0});const a=x5e(),e=sQ(),u=wl();function n(r,t,i){if(a.default.randomUUID&&!t&&!r)return a.default.randomUUID();r=r||{};const o=r.random??r.rng?.()??(0,e.default)();if(o.length<16)throw new Error("Random bytes length must be >= 16");if(o[6]=o[6]&15|64,o[8]=o[8]&63|128,t){if(i=i||0,i<0||i+16>t.length)throw new RangeError(`UUID byte range ${i}:${i+15} is out of buffer bounds`);for(let l=0;l<16;++l)t[i+l]=o[l];return t}return(0,u.unsafeStringify)(o)}return SD.default=n,SD}var vC={},AD={},Koe;function N5e(){if(Koe)return AD;Koe=1,Object.defineProperty(AD,"__esModule",{value:!0});function a(n,r,t,i){switch(n){case 0:return r&t^~r&i;case 1:return r^t^i;case 2:return r&t^r&i^t&i;case 3:return r^t^i}}function e(n,r){return n<<r|n>>>32-r}function u(n){const r=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520],i=new Uint8Array(n.length+1);i.set(n),i[n.length]=128,n=i;const o=n.length/4+2,l=Math.ceil(o/16),s=new Array(l);for(let c=0;c<l;++c){const d=new Uint32Array(16);for(let f=0;f<16;++f)d[f]=n[c*64+f*4]<<24|n[c*64+f*4+1]<<16|n[c*64+f*4+2]<<8|n[c*64+f*4+3];s[c]=d}s[l-1][14]=(n.length-1)*8/Math.pow(2,32),s[l-1][14]=Math.floor(s[l-1][14]),s[l-1][15]=(n.length-1)*8&4294967295;for(let c=0;c<l;++c){const d=new Uint32Array(80);for(let m=0;m<16;++m)d[m]=s[c][m];for(let m=16;m<80;++m)d[m]=e(d[m-3]^d[m-8]^d[m-14]^d[m-16],1);let f=t[0],p=t[1],h=t[2],g=t[3],v=t[4];for(let m=0;m<80;++m){const T=Math.floor(m/20),w=e(f,5)+a(T,p,h,g)+v+r[T]+d[m]>>>0;v=g,g=h,h=e(p,30)>>>0,p=f,f=w}t[0]=t[0]+f>>>0,t[1]=t[1]+p>>>0,t[2]=t[2]+h>>>0,t[3]=t[3]+g>>>0,t[4]=t[4]+v>>>0}return Uint8Array.of(t[0]>>24,t[0]>>16,t[0]>>8,t[0],t[1]>>24,t[1]>>16,t[1]>>8,t[1],t[2]>>24,t[2]>>16,t[2]>>8,t[2],t[3]>>24,t[3]>>16,t[3]>>8,t[3],t[4]>>24,t[4]>>16,t[4]>>8,t[4])}return AD.default=u,AD}var Joe;function I5e(){return Joe||(Joe=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.URL=a.DNS=void 0;const e=N5e(),u=xF();var n=xF();Object.defineProperty(a,"DNS",{enumerable:!0,get:function(){return n.DNS}}),Object.defineProperty(a,"URL",{enumerable:!0,get:function(){return n.URL}});function r(t,i,o,l){return(0,u.default)(80,e.default,t,i,o,l)}r.DNS=u.DNS,r.URL=u.URL,a.default=r})(vC)),vC}var OD={},Woe;function D5e(){if(Woe)return OD;Woe=1,Object.defineProperty(OD,"__esModule",{value:!0});const a=wl(),e=PTe(),u=jTe();function n(r,t,i){r??={},i??=0;let o=(0,e.default)({...r,_v6:!0},new Uint8Array(16));if(o=(0,u.default)(o),t){for(let l=0;l<16;l++)t[i+l]=o[l];return t}return(0,a.unsafeStringify)(o)}return OD.default=n,OD}var xD={},Yoe;function F5e(){if(Yoe)return xD;Yoe=1,Object.defineProperty(xD,"__esModule",{value:!0});const a=EP(),e=wl();function u(r){const t=typeof r=="string"?(0,a.default)(r):r,i=n(t);return typeof r=="string"?(0,e.unsafeStringify)(i):i}xD.default=u;function n(r){return Uint8Array.of((r[3]&15)<<4|r[4]>>4&15,(r[4]&15)<<4|(r[5]&240)>>4,(r[5]&15)<<4|r[6]&15,r[7],(r[1]&15)<<4|(r[2]&240)>>4,(r[2]&15)<<4|(r[3]&240)>>4,16|(r[0]&240)>>4,(r[0]&15)<<4|(r[1]&240)>>4,r[8],r[9],r[10],r[11],r[12],r[13],r[14],r[15])}return xD}var _g={},Zoe;function P5e(){if(Zoe)return _g;Zoe=1,Object.defineProperty(_g,"__esModule",{value:!0}),_g.updateV7State=void 0;const a=sQ(),e=wl(),u={};function n(i,o,l){let s;if(i)s=t(i.random??i.rng?.()??(0,a.default)(),i.msecs,i.seq,o,l);else{const c=Date.now(),d=(0,a.default)();r(u,c,d),s=t(d,u.msecs,u.seq,o,l)}return o??(0,e.unsafeStringify)(s)}function r(i,o,l){return i.msecs??=-1/0,i.seq??=0,o>i.msecs?(i.seq=l[6]<<23|l[7]<<16|l[8]<<8|l[9],i.msecs=o):(i.seq=i.seq+1|0,i.seq===0&&i.msecs++),i}_g.updateV7State=r;function t(i,o,l,s,c=0){if(i.length<16)throw new Error("Random bytes length must be >= 16");if(!s)s=new Uint8Array(16),c=0;else if(c<0||c+16>s.length)throw new RangeError(`UUID byte range ${c}:${c+15} is out of buffer bounds`);return o??=Date.now(),l??=i[6]*127<<24|i[7]<<16|i[8]<<8|i[9],s[c++]=o/1099511627776&255,s[c++]=o/4294967296&255,s[c++]=o/16777216&255,s[c++]=o/65536&255,s[c++]=o/256&255,s[c++]=o&255,s[c++]=112|l>>>28&15,s[c++]=l>>>20&255,s[c++]=128|l>>>14&63,s[c++]=l>>>6&255,s[c++]=l<<2&255|i[10]&3,s[c++]=i[11],s[c++]=i[12],s[c++]=i[13],s[c++]=i[14],s[c++]=i[15],s}return _g.default=n,_g}var RD={},ese;function j5e(){if(ese)return RD;ese=1,Object.defineProperty(RD,"__esModule",{value:!0});const a=SP();function e(u){if(!(0,a.default)(u))throw TypeError("Invalid UUID");return parseInt(u.slice(14,15),16)}return RD.default=e,RD}var tse;function MTe(){return tse||(tse=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.version=a.validate=a.v7=a.v6ToV1=a.v6=a.v5=a.v4=a.v3=a.v1ToV6=a.v1=a.stringify=a.parse=a.NIL=a.MAX=void 0;var e=w5e();Object.defineProperty(a,"MAX",{enumerable:!0,get:function(){return e.default}});var u=S5e();Object.defineProperty(a,"NIL",{enumerable:!0,get:function(){return u.default}});var n=EP();Object.defineProperty(a,"parse",{enumerable:!0,get:function(){return n.default}});var r=wl();Object.defineProperty(a,"stringify",{enumerable:!0,get:function(){return r.default}});var t=PTe();Object.defineProperty(a,"v1",{enumerable:!0,get:function(){return t.default}});var i=jTe();Object.defineProperty(a,"v1ToV6",{enumerable:!0,get:function(){return i.default}});var o=O5e();Object.defineProperty(a,"v3",{enumerable:!0,get:function(){return o.default}});var l=R5e();Object.defineProperty(a,"v4",{enumerable:!0,get:function(){return l.default}});var s=I5e();Object.defineProperty(a,"v5",{enumerable:!0,get:function(){return s.default}});var c=D5e();Object.defineProperty(a,"v6",{enumerable:!0,get:function(){return c.default}});var d=F5e();Object.defineProperty(a,"v6ToV1",{enumerable:!0,get:function(){return d.default}});var f=P5e();Object.defineProperty(a,"v7",{enumerable:!0,get:function(){return f.default}});var p=SP();Object.defineProperty(a,"validate",{enumerable:!0,get:function(){return p.default}});var h=j5e();Object.defineProperty(a,"version",{enumerable:!0,get:function(){return h.default}})})(bC)),bC}var rse;function M5e(){if(rse)return SS;rse=1,Object.defineProperty(SS,"__esModule",{value:!0}),SS.TermFunctionStrUuid=void 0;const a=Je(),e=$e(),u=MTe();let n=class extends a.TermFunctionBase{constructor(){super({arity:0,operator:e.SparqlOperator.STRUUID,overloads:(0,e.declare)(e.SparqlOperator.STRUUID).set([],()=>()=>(0,e.string)(u.v4())).collect()})}};return SS.TermFunctionStrUuid=n,SS}var nse;function C5e(){if(nse)return wS;nse=1,Object.defineProperty(wS,"__esModule",{value:!0}),wS.ActorFunctionFactoryTermStrUuid=void 0;const a=Je(),e=$e(),u=M5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.STRUUID],termFunction:!0})}async run(t){return new u.TermFunctionStrUuid}};return wS.ActorFunctionFactoryTermStrUuid=n,wS}var ase;function cQ(){return ase||(ase=1,(function(a){var e=F0&&F0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=F0&&F0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(C5e(),a)})(F0)),F0}var P0={},ES={},AS={},ise;function L5e(){if(ise)return AS;ise=1,Object.defineProperty(AS,"__esModule",{value:!0}),AS.TermFunctionStr=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.STR,overloads:(0,e.declare)(e.SparqlOperator.STR).onTerm1(()=>r=>(0,e.string)(r.str())).collect()})}};return AS.TermFunctionStr=u,AS}var use;function q5e(){if(use)return ES;use=1,Object.defineProperty(ES,"__esModule",{value:!0}),ES.ActorFunctionFactoryTermStr=void 0;const a=Je(),e=$e(),u=L5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.STR],termFunction:!0})}async run(t){return new u.TermFunctionStr}};return ES.ActorFunctionFactoryTermStr=n,ES}var ose;function lQ(){return ose||(ose=1,(function(a){var e=P0&&P0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=P0&&P0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(q5e(),a)})(P0)),P0}var j0={},OS={},xS={},sse;function B5e(){if(sse)return xS;sse=1,Object.defineProperty(xS,"__esModule",{value:!0}),xS.TermFunctionSubStr=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:[2,3],operator:e.SparqlOperator.SUBSTR,overloads:(0,e.declare)(e.SparqlOperator.SUBSTR).onBinaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_INTEGER],()=>(r,t)=>(0,e.string)([...r].slice(t-1).join(""))).onBinary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.XSD_INTEGER],()=>(r,t)=>{const i=[...r.typedValue].slice(t.typedValue-1).join("");return(0,e.langString)(i,r.language)}).onTernaryTyped([e.TypeURL.XSD_STRING,e.TypeURL.XSD_INTEGER,e.TypeURL.XSD_INTEGER],()=>(r,t,i)=>(0,e.string)([...r].slice(t-1,i+t-1).join(""))).onTernary([e.TypeURL.RDF_LANG_STRING,e.TypeURL.XSD_INTEGER,e.TypeURL.XSD_INTEGER],()=>(r,t,i)=>{const o=[...r.typedValue].slice(t.typedValue-1,i.typedValue+t.typedValue-1).join("");return(0,e.langString)(o,r.language)}).collect()})}};return xS.TermFunctionSubStr=u,xS}var cse;function U5e(){if(cse)return OS;cse=1,Object.defineProperty(OS,"__esModule",{value:!0}),OS.ActorFunctionFactoryTermSubStr=void 0;const a=Je(),e=$e(),u=B5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.SUBSTR],termFunction:!0})}async run(t){return new u.TermFunctionSubStr}};return OS.ActorFunctionFactoryTermSubStr=n,OS}var lse;function dQ(){return lse||(lse=1,(function(a){var e=j0&&j0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=j0&&j0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(U5e(),a)})(j0)),j0}var M0={},RS={},NS={},dse;function Q5e(){if(dse)return NS;dse=1,Object.defineProperty(NS,"__esModule",{value:!0}),NS.TermFunctionSubject=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.SUBJECT,overloads:(0,e.declare)(e.SparqlOperator.SUBJECT).onQuad1(()=>r=>r.subject).collect()})}};return NS.TermFunctionSubject=u,NS}var fse;function V5e(){if(fse)return RS;fse=1,Object.defineProperty(RS,"__esModule",{value:!0}),RS.ActorFunctionFactoryTermSubject=void 0;const a=Je(),e=$e(),u=Q5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.SUBJECT],termFunction:!0})}async run(t){return new u.TermFunctionSubject}};return RS.ActorFunctionFactoryTermSubject=n,RS}var pse;function fQ(){return pse||(pse=1,(function(a){var e=M0&&M0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=M0&&M0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(V5e(),a)})(M0)),M0}var C0={},IS={},DS={},hse;function H5e(){if(hse)return DS;hse=1,Object.defineProperty(DS,"__esModule",{value:!0}),DS.TermFunctionSubtraction=void 0;const a=Je(),e=lt(),u=$e(),n=TP();let r=class extends a.TermFunctionBase{constructor(){super({arity:2,operator:u.SparqlOperator.SUBTRACTION,overloads:(0,u.declare)(u.SparqlOperator.SUBTRACTION).arithmetic(()=>(i,o)=>new n.BigNumber(i).minus(o).toNumber()).set([u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DATE_TIME],i=>([o,l])=>new u.DayTimeDurationLiteral((0,u.elapsedDuration)(o.typedValue,l.typedValue,i.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)))).copy({from:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DATE_TIME],to:[u.TypeURL.XSD_DATE,u.TypeURL.XSD_DATE]}).copy({from:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DATE_TIME],to:[u.TypeURL.XSD_TIME,u.TypeURL.XSD_TIME]}).set([u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DAY_TIME_DURATION],()=>([i,o])=>new u.DateTimeLiteral((0,u.addDurationToDateTime)(i.typedValue,(0,u.defaultedDurationRepresentation)((0,u.negateDuration)(o.typedValue))))).copy({from:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DAY_TIME_DURATION],to:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([u.TypeURL.XSD_DATE,u.TypeURL.XSD_DAY_TIME_DURATION],()=>([i,o])=>new u.DateLiteral((0,u.addDurationToDateTime)((0,u.defaultedDateTimeRepresentation)(i.typedValue),(0,u.defaultedDurationRepresentation)((0,u.negateDuration)(o.typedValue))))).copy({from:[u.TypeURL.XSD_DATE,u.TypeURL.XSD_DAY_TIME_DURATION],to:[u.TypeURL.XSD_DATE,u.TypeURL.XSD_YEAR_MONTH_DURATION]}).set([u.TypeURL.XSD_TIME,u.TypeURL.XSD_DAY_TIME_DURATION],()=>([i,o])=>new u.TimeLiteral((0,u.addDurationToDateTime)((0,u.defaultedDateTimeRepresentation)(i.typedValue),(0,u.defaultedDurationRepresentation)((0,u.negateDuration)(o.typedValue))))).collect()})}};return DS.TermFunctionSubtraction=r,DS}var yse;function k5e(){if(yse)return IS;yse=1,Object.defineProperty(IS,"__esModule",{value:!0}),IS.ActorFunctionFactoryTermSubtraction=void 0;const a=Je(),e=$e(),u=H5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.SUBTRACTION],termFunction:!0})}async run(t){return new u.TermFunctionSubtraction}};return IS.ActorFunctionFactoryTermSubtraction=n,IS}var mse;function pQ(){return mse||(mse=1,(function(a){var e=C0&&C0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=C0&&C0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(k5e(),a)})(C0)),C0}var L0={},FS={},PS={},bse;function z5e(){if(bse)return PS;bse=1,Object.defineProperty(PS,"__esModule",{value:!0}),PS.TermFunctionTimezone=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.TIMEZONE,overloads:(0,e.declare)(e.SparqlOperator.TIMEZONE).onDateTime1(()=>r=>{const t={hours:r.typedValue.zoneHours,minutes:r.typedValue.zoneMinutes};if(t.hours===void 0&&t.minutes===void 0)throw new e.InvalidTimezoneCall(r.str());return new e.DayTimeDurationLiteral(t)}).copy({from:[e.TypeURL.XSD_DATE_TIME],to:[e.TypeURL.XSD_DATE]}).copy({from:[e.TypeURL.XSD_DATE_TIME],to:[e.TypeURL.XSD_TIME]}).collect()})}};return PS.TermFunctionTimezone=u,PS}var gse;function G5e(){if(gse)return FS;gse=1,Object.defineProperty(FS,"__esModule",{value:!0}),FS.ActorFunctionFactoryTermTimezone=void 0;const a=Je(),e=$e(),u=z5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.TIMEZONE],termFunction:!0})}async run(t){return new u.TermFunctionTimezone}};return FS.ActorFunctionFactoryTermTimezone=n,FS}var vse;function hQ(){return vse||(vse=1,(function(a){var e=L0&&L0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=L0&&L0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(G5e(),a)})(L0)),L0}var q0={},jS={},MS={},_se;function $5e(){if(_se)return MS;_se=1,Object.defineProperty(MS,"__esModule",{value:!0}),MS.TermFunctionTriple=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:3,operator:e.SparqlOperator.TRIPLE,overloads:(0,e.declare)(e.SparqlOperator.TRIPLE).onTerm3(r=>(...t)=>new e.Quad(t[0],t[1],t[2],new e.DefaultGraph)).collect()})}};return MS.TermFunctionTriple=u,MS}var Tse;function X5e(){if(Tse)return jS;Tse=1,Object.defineProperty(jS,"__esModule",{value:!0}),jS.ActorFunctionFactoryTermTriple=void 0;const a=Je(),e=$e(),u=$5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.TRIPLE],termFunction:!0})}async run(t){return new u.TermFunctionTriple}};return jS.ActorFunctionFactoryTermTriple=n,jS}var wse;function yQ(){return wse||(wse=1,(function(a){var e=q0&&q0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=q0&&q0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(X5e(),a)})(q0)),q0}var B0={},CS={},LS={},Sse;function K5e(){if(Sse)return LS;Sse=1,Object.defineProperty(LS,"__esModule",{value:!0}),LS.TermFunctionTz=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.TZ,overloads:(0,e.declare)(e.SparqlOperator.TZ).onDateTime1(()=>r=>(0,e.string)((0,e.extractRawTimeZone)(r.str()))).copy({from:[e.TypeURL.XSD_DATE_TIME],to:[e.TypeURL.XSD_DATE]}).copy({from:[e.TypeURL.XSD_DATE_TIME],to:[e.TypeURL.XSD_TIME]}).collect()})}};return LS.TermFunctionTz=u,LS}var Ese;function J5e(){if(Ese)return CS;Ese=1,Object.defineProperty(CS,"__esModule",{value:!0}),CS.ActorFunctionFactoryTermTz=void 0;const a=Je(),e=$e(),u=K5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.TZ],termFunction:!0})}async run(t){return new u.TermFunctionTz}};return CS.ActorFunctionFactoryTermTz=n,CS}var Ase;function mQ(){return Ase||(Ase=1,(function(a){var e=B0&&B0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=B0&&B0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(J5e(),a)})(B0)),B0}var U0={},qS={},BS={},Ose;function W5e(){if(Ose)return BS;Ose=1,Object.defineProperty(BS,"__esModule",{value:!0}),BS.TermFunctionUcase=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.UCASE,overloads:(0,e.declare)(e.SparqlOperator.UCASE).onString1Typed(()=>r=>(0,e.string)(r.toUpperCase())).onLangString1(()=>r=>(0,e.langString)(r.typedValue.toUpperCase(),r.language)).collect()})}};return BS.TermFunctionUcase=u,BS}var xse;function Y5e(){if(xse)return qS;xse=1,Object.defineProperty(qS,"__esModule",{value:!0}),qS.ActorFunctionFactoryTermUcase=void 0;const a=Je(),e=$e(),u=W5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.UCASE],termFunction:!0})}async run(t){return new u.TermFunctionUcase}};return qS.ActorFunctionFactoryTermUcase=n,qS}var Rse;function bQ(){return Rse||(Rse=1,(function(a){var e=U0&&U0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=U0&&U0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Y5e(),a)})(U0)),U0}var Q0={},US={},QS={},Nse;function Z5e(){if(Nse)return QS;Nse=1,Object.defineProperty(QS,"__esModule",{value:!0}),QS.TermFunctionUnaryMinus=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.UMINUS,overloads:(0,e.declare)(e.SparqlOperator.UMINUS).numericConverter(()=>r=>-r).collect()})}};return QS.TermFunctionUnaryMinus=u,QS}var Ise;function eje(){if(Ise)return US;Ise=1,Object.defineProperty(US,"__esModule",{value:!0}),US.ActorFunctionFactoryTermUnaryMinus=void 0;const a=Je(),e=$e(),u=Z5e();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.UMINUS],termFunction:!0})}async run(t){return new u.TermFunctionUnaryMinus}};return US.ActorFunctionFactoryTermUnaryMinus=n,US}var Dse;function gQ(){return Dse||(Dse=1,(function(a){var e=Q0&&Q0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Q0&&Q0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(eje(),a)})(Q0)),Q0}var V0={},VS={},HS={},Fse;function tje(){if(Fse)return HS;Fse=1,Object.defineProperty(HS,"__esModule",{value:!0}),HS.TermFunctionUnaryPlus=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.UPLUS,overloads:(0,e.declare)(e.SparqlOperator.UPLUS).numericConverter(()=>r=>r).collect()})}};return HS.TermFunctionUnaryPlus=u,HS}var Pse;function rje(){if(Pse)return VS;Pse=1,Object.defineProperty(VS,"__esModule",{value:!0}),VS.ActorFunctionFactoryTermUnaryPlus=void 0;const a=Je(),e=$e(),u=tje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.UPLUS],termFunction:!0})}async run(t){return new u.TermFunctionUnaryPlus}};return VS.ActorFunctionFactoryTermUnaryPlus=n,VS}var jse;function vQ(){return jse||(jse=1,(function(a){var e=V0&&V0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=V0&&V0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(rje(),a)})(V0)),V0}var H0={},kS={},zS={},Mse;function nje(){if(Mse)return zS;Mse=1,Object.defineProperty(zS,"__esModule",{value:!0}),zS.TermFunctionUuid=void 0;const a=Je(),e=$e(),u=MTe();let n=class extends a.TermFunctionBase{constructor(){super({arity:0,operator:e.SparqlOperator.UUID,overloads:(0,e.declare)(e.SparqlOperator.UUID).set([],()=>()=>new e.NamedNode(`urn:uuid:${u.v4()}`)).collect()})}};return zS.TermFunctionUuid=n,zS}var Cse;function aje(){if(Cse)return kS;Cse=1,Object.defineProperty(kS,"__esModule",{value:!0}),kS.ActorFunctionFactoryTermUuid=void 0;const a=Je(),e=$e(),u=nje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.UUID],termFunction:!0})}async run(t){return new u.TermFunctionUuid}};return kS.ActorFunctionFactoryTermUuid=n,kS}var Lse;function _Q(){return Lse||(Lse=1,(function(a){var e=H0&&H0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=H0&&H0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(aje(),a)})(H0)),H0}var k0={},GS={},$S={},qse;function ije(){if(qse)return $S;qse=1,Object.defineProperty($S,"__esModule",{value:!0}),$S.TermFunctionXsdToBoolean=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_BOOLEAN,overloads:(0,e.declare)(e.TypeURL.XSD_BOOLEAN).onNumeric1(()=>r=>(0,e.bool)(r.coerceEBV()),!0).onUnary(e.TypeURL.XSD_BOOLEAN,()=>r=>(0,e.bool)(r.coerceEBV()),!0).onUnary(e.TypeURL.XSD_STRING,()=>r=>{switch(r.str()){case"true":return(0,e.bool)(!0);case"false":return(0,e.bool)(!1);case"1":return(0,e.bool)(!0);case"0":return(0,e.bool)(!1);default:throw new e.CastError(r,e.TypeURL.XSD_BOOLEAN)}},!1).collect()})}};return $S.TermFunctionXsdToBoolean=u,$S}var Bse;function uje(){if(Bse)return GS;Bse=1,Object.defineProperty(GS,"__esModule",{value:!0}),GS.ActorFunctionFactoryTermXsdToBoolean=void 0;const a=Je(),e=$e(),u=ije();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_BOOLEAN],termFunction:!0})}async run(t){return new u.TermFunctionXsdToBoolean}};return GS.ActorFunctionFactoryTermXsdToBoolean=n,GS}var Use;function TQ(){return Use||(Use=1,(function(a){var e=k0&&k0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=k0&&k0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(uje(),a)})(k0)),k0}var z0={},XS={},KS={},Qse;function oje(){if(Qse)return KS;Qse=1,Object.defineProperty(KS,"__esModule",{value:!0}),KS.TermFunctionXsdToDate=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DATE,overloads:(0,e.declare)(e.TypeURL.XSD_DATE).onUnary(e.TypeURL.XSD_DATE,()=>r=>new e.DateLiteral(r.typedValue,r.strValue)).onUnary(e.TypeURL.XSD_DATE_TIME,()=>r=>new e.DateLiteral(r.typedValue)).onStringly1(()=>r=>new e.DateLiteral((0,e.parseDate)(r.str()))).collect()})}};return KS.TermFunctionXsdToDate=u,KS}var Vse;function sje(){if(Vse)return XS;Vse=1,Object.defineProperty(XS,"__esModule",{value:!0}),XS.ActorFunctionFactoryTermXsdToDate=void 0;const a=Je(),e=$e(),u=oje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_DATE],termFunction:!0})}async run(t){return new u.TermFunctionXsdToDate}};return XS.ActorFunctionFactoryTermXsdToDate=n,XS}var Hse;function wQ(){return Hse||(Hse=1,(function(a){var e=z0&&z0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=z0&&z0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(sje(),a)})(z0)),z0}var G0={},JS={},WS={},kse;function cje(){if(kse)return WS;kse=1,Object.defineProperty(WS,"__esModule",{value:!0}),WS.TermFunctionXsdToDatetime=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DATE_TIME,overloads:(0,e.declare)(e.TypeURL.XSD_DATE_TIME).onUnary(e.TypeURL.XSD_DATE_TIME,()=>r=>r).onUnary(e.TypeURL.XSD_STRING,()=>r=>(0,e.dateTime)((0,e.parseDateTime)(r.str()),r.str()),!1).onUnary(e.TypeURL.XSD_DATE,()=>r=>new e.DateTimeLiteral({...r.typedValue,hours:0,minutes:0,seconds:0})).collect()})}};return WS.TermFunctionXsdToDatetime=u,WS}var zse;function lje(){if(zse)return JS;zse=1,Object.defineProperty(JS,"__esModule",{value:!0}),JS.ActorFunctionFactoryTermXsdToDatetime=void 0;const a=Je(),e=$e(),u=cje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_DATE_TIME],termFunction:!0})}async run(t){return new u.TermFunctionXsdToDatetime}};return JS.ActorFunctionFactoryTermXsdToDatetime=n,JS}var Gse;function SQ(){return Gse||(Gse=1,(function(a){var e=G0&&G0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=G0&&G0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(lje(),a)})(G0)),G0}var $0={},YS={},ZS={},$se;function dje(){if($se)return ZS;$se=1,Object.defineProperty(ZS,"__esModule",{value:!0}),ZS.TermFunctionXsdToDayTimeDuration=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,e.declare)(e.TypeURL.XSD_DAY_TIME_DURATION).onUnary(e.TypeURL.XSD_DURATION,()=>r=>new e.DayTimeDurationLiteral((0,e.trimToDayTimeDuration)(r.typedValue))).onStringly1(()=>r=>new e.DayTimeDurationLiteral((0,e.parseDayTimeDuration)(r.str()))).collect()})}};return ZS.TermFunctionXsdToDayTimeDuration=u,ZS}var Xse;function fje(){if(Xse)return YS;Xse=1,Object.defineProperty(YS,"__esModule",{value:!0}),YS.ActorFunctionFactoryTermXsdToDayTimeDuration=void 0;const a=Je(),e=$e(),u=dje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_DAY_TIME_DURATION],termFunction:!0})}async run(t){return new u.TermFunctionXsdToDayTimeDuration}};return YS.ActorFunctionFactoryTermXsdToDayTimeDuration=n,YS}var Kse;function EQ(){return Kse||(Kse=1,(function(a){var e=$0&&$0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=$0&&$0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(fje(),a)})($0)),$0}var X0={},eE={},tE={},Jse;function pje(){if(Jse)return tE;Jse=1,Object.defineProperty(tE,"__esModule",{value:!0}),tE.TermFunctionXsdToDecimal=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DECIMAL,overloads:(0,e.declare)(e.TypeURL.XSD_DECIMAL).onNumeric1(()=>r=>{const t=(0,e.parseXSDDecimal)(r.str());if(t===void 0)throw new e.CastError(r,e.TypeURL.XSD_DECIMAL);return(0,e.decimal)(t)}).onString1(()=>r=>{const t=r.str(),i=/^([+-])?(\d+(\.\d+)?)$/u.test(t)?(0,e.parseXSDDecimal)(t):void 0;if(i===void 0)throw new e.CastError(r,e.TypeURL.XSD_DECIMAL);return(0,e.decimal)(i)},!1).onBoolean1Typed(()=>r=>(0,e.decimal)(r?1:0)).collect()})}};return tE.TermFunctionXsdToDecimal=u,tE}var Wse;function hje(){if(Wse)return eE;Wse=1,Object.defineProperty(eE,"__esModule",{value:!0}),eE.ActorFunctionFactoryTermXsdToDecimal=void 0;const a=Je(),e=$e(),u=pje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_DECIMAL],termFunction:!0})}async run(t){return new u.TermFunctionXsdToDecimal}};return eE.ActorFunctionFactoryTermXsdToDecimal=n,eE}var Yse;function AQ(){return Yse||(Yse=1,(function(a){var e=X0&&X0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=X0&&X0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(hje(),a)})(X0)),X0}var K0={},rE={},nE={},Zse;function yje(){if(Zse)return nE;Zse=1,Object.defineProperty(nE,"__esModule",{value:!0}),nE.TermFunctionXsdToDouble=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DOUBLE,overloads:(0,e.declare)(e.TypeURL.XSD_DOUBLE).onNumeric1(()=>r=>(0,e.double)(r.typedValue)).onBoolean1Typed(()=>r=>(0,e.double)(r?1:0)).onUnary(e.TypeURL.XSD_STRING,()=>r=>{const t=(0,e.parseXSDFloat)(r.str());if(t===void 0)throw new e.CastError(r,e.TypeURL.XSD_DOUBLE);return(0,e.double)(t)},!1).collect()})}};return nE.TermFunctionXsdToDouble=u,nE}var ece;function mje(){if(ece)return rE;ece=1,Object.defineProperty(rE,"__esModule",{value:!0}),rE.ActorFunctionFactoryTermXsdToDouble=void 0;const a=Je(),e=$e(),u=yje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_DOUBLE],termFunction:!0})}async run(t){return new u.TermFunctionXsdToDouble}};return rE.ActorFunctionFactoryTermXsdToDouble=n,rE}var tce;function OQ(){return tce||(tce=1,(function(a){var e=K0&&K0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=K0&&K0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(mje(),a)})(K0)),K0}var J0={},aE={},iE={},rce;function bje(){if(rce)return iE;rce=1,Object.defineProperty(iE,"__esModule",{value:!0}),iE.TermFunctionXsdToDuration=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_DAY_TIME_DURATION,overloads:(0,e.declare)(e.TypeURL.XSD_DURATION).onUnary(e.TypeURL.XSD_DURATION,()=>r=>new e.DurationLiteral(r.typedValue,r.strValue)).onStringly1(()=>r=>new e.DurationLiteral((0,e.parseDuration)(r.str()))).collect()})}};return iE.TermFunctionXsdToDuration=u,iE}var nce;function gje(){if(nce)return aE;nce=1,Object.defineProperty(aE,"__esModule",{value:!0}),aE.ActorFunctionFactoryTermXsdToDuration=void 0;const a=Je(),e=$e(),u=bje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_DURATION],termFunction:!0})}async run(t){return new u.TermFunctionXsdToDuration}};return aE.ActorFunctionFactoryTermXsdToDuration=n,aE}var ace;function xQ(){return ace||(ace=1,(function(a){var e=J0&&J0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=J0&&J0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(gje(),a)})(J0)),J0}var W0={},uE={},oE={},ice;function vje(){if(ice)return oE;ice=1,Object.defineProperty(oE,"__esModule",{value:!0}),oE.TermFunctionXsdToFloat=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_FLOAT,overloads:(0,e.declare)(e.TypeURL.XSD_FLOAT).onNumeric1(()=>r=>(0,e.float)(r.typedValue)).onBoolean1Typed(()=>r=>(0,e.float)(r?1:0)).onUnary(e.TypeURL.XSD_STRING,()=>r=>{const t=(0,e.parseXSDFloat)(r.str());if(t===void 0)throw new e.CastError(r,e.TypeURL.XSD_FLOAT);return(0,e.float)(t)},!1).collect()})}};return oE.TermFunctionXsdToFloat=u,oE}var uce;function _je(){if(uce)return uE;uce=1,Object.defineProperty(uE,"__esModule",{value:!0}),uE.ActorFunctionFactoryTermXsdToFloat=void 0;const a=Je(),e=$e(),u=vje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_FLOAT],termFunction:!0})}async run(t){return new u.TermFunctionXsdToFloat}};return uE.ActorFunctionFactoryTermXsdToFloat=n,uE}var oce;function RQ(){return oce||(oce=1,(function(a){var e=W0&&W0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=W0&&W0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(_je(),a)})(W0)),W0}var Y0={},sE={},cE={},sce;function Tje(){if(sce)return cE;sce=1,Object.defineProperty(cE,"__esModule",{value:!0}),cE.TermFunctionXsdToInteger=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_INTEGER,overloads:(0,e.declare)(e.TypeURL.XSD_INTEGER).onBoolean1Typed(()=>r=>(0,e.integer)(r?1:0)).onNumeric1(()=>r=>{if(!Number.isFinite(r.typedValue))throw new e.CastError(r,e.TypeURL.XSD_INTEGER);return(0,e.integer)(Math.trunc(r.typedValue))}).onString1(()=>r=>{const t=r.str(),i=/^\d+$/u.test(t)?Number.parseInt(t,10):void 0;if(i===void 0)throw new e.CastError(r,e.TypeURL.XSD_INTEGER);return(0,e.integer)(i)}).collect()})}};return cE.TermFunctionXsdToInteger=u,cE}var cce;function wje(){if(cce)return sE;cce=1,Object.defineProperty(sE,"__esModule",{value:!0}),sE.ActorFunctionFactoryTermXsdToInteger=void 0;const a=Je(),e=$e(),u=Tje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_INTEGER],termFunction:!0})}async run(t){return new u.TermFunctionXsdToInteger}};return sE.ActorFunctionFactoryTermXsdToInteger=n,sE}var lce;function NQ(){return lce||(lce=1,(function(a){var e=Y0&&Y0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Y0&&Y0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(wje(),a)})(Y0)),Y0}var Z0={},lE={},dE={},dce;function Sje(){if(dce)return dE;dce=1,Object.defineProperty(dE,"__esModule",{value:!0}),dE.TermFunctionXsdToString=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_STRING,overloads:(0,e.declare)(e.TypeURL.XSD_STRING).onNumeric1(()=>r=>(0,e.string)((0,e.float)(r.typedValue).str())).onBoolean1Typed(()=>r=>(0,e.string)((0,e.bool)(r).str())).onTerm1(()=>r=>(0,e.string)(r.str())).collect()})}};return dE.TermFunctionXsdToString=u,dE}var fce;function Eje(){if(fce)return lE;fce=1,Object.defineProperty(lE,"__esModule",{value:!0}),lE.ActorFunctionFactoryTermXsdToString=void 0;const a=Je(),e=$e(),u=Sje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_STRING],termFunction:!0})}async run(t){return new u.TermFunctionXsdToString}};return lE.ActorFunctionFactoryTermXsdToString=n,lE}var pce;function IQ(){return pce||(pce=1,(function(a){var e=Z0&&Z0.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Z0&&Z0.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Eje(),a)})(Z0)),Z0}var eh={},fE={},pE={},hce;function Aje(){if(hce)return pE;hce=1,Object.defineProperty(pE,"__esModule",{value:!0}),pE.TermFunctionXsdToTime=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_TIME,overloads:(0,e.declare)(e.TypeURL.XSD_TIME).onUnary(e.TypeURL.XSD_TIME,()=>r=>new e.TimeLiteral(r.typedValue,r.strValue)).onUnary(e.TypeURL.XSD_DATE_TIME,()=>r=>new e.TimeLiteral(r.typedValue)).onStringly1(()=>r=>new e.TimeLiteral((0,e.parseTime)(r.str()))).collect()})}};return pE.TermFunctionXsdToTime=u,pE}var yce;function Oje(){if(yce)return fE;yce=1,Object.defineProperty(fE,"__esModule",{value:!0}),fE.ActorFunctionFactoryTermXsdToTime=void 0;const a=Je(),e=$e(),u=Aje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_TIME],termFunction:!0})}async run(t){return new u.TermFunctionXsdToTime}};return fE.ActorFunctionFactoryTermXsdToTime=n,fE}var mce;function DQ(){return mce||(mce=1,(function(a){var e=eh&&eh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=eh&&eh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Oje(),a)})(eh)),eh}var th={},hE={},yE={},bce;function xje(){if(bce)return yE;bce=1,Object.defineProperty(yE,"__esModule",{value:!0}),yE.TermFunctionXsdToYearMonthDuration=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.TypeURL.XSD_YEAR_MONTH_DURATION,overloads:(0,e.declare)(e.TypeURL.XSD_YEAR_MONTH_DURATION).onUnary(e.TypeURL.XSD_DURATION,()=>r=>new e.YearMonthDurationLiteral((0,e.trimToYearMonthDuration)(r.typedValue))).onStringly1(()=>r=>new e.YearMonthDurationLiteral((0,e.parseYearMonthDuration)(r.str()))).collect()})}};return yE.TermFunctionXsdToYearMonthDuration=u,yE}var gce;function Rje(){if(gce)return hE;gce=1,Object.defineProperty(hE,"__esModule",{value:!0}),hE.ActorFunctionFactoryTermXsdToYearMonthDuration=void 0;const a=Je(),e=$e(),u=xje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.TypeURL.XSD_YEAR_MONTH_DURATION],termFunction:!0})}async run(t){return new u.TermFunctionXsdToYearMonthDuration}};return hE.ActorFunctionFactoryTermXsdToYearMonthDuration=n,hE}var vce;function FQ(){return vce||(vce=1,(function(a){var e=th&&th.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=th&&th.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Rje(),a)})(th)),th}var rh={},mE={},bE={},_ce;function Nje(){if(_ce)return bE;_ce=1,Object.defineProperty(bE,"__esModule",{value:!0}),bE.TermFunctionYear=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(){super({arity:1,operator:e.SparqlOperator.YEAR,overloads:(0,e.declare)(e.SparqlOperator.YEAR).onDateTime1(()=>r=>(0,e.integer)(r.typedValue.year)).set([e.TypeURL.XSD_DATE],()=>([r])=>(0,e.integer)(r.typedValue.year)).collect()})}};return bE.TermFunctionYear=u,bE}var Tce;function Ije(){if(Tce)return mE;Tce=1,Object.defineProperty(mE,"__esModule",{value:!0}),mE.ActorFunctionFactoryTermYear=void 0;const a=Je(),e=$e(),u=Nje();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.YEAR],termFunction:!0})}async run(t){return new u.TermFunctionYear}};return mE.ActorFunctionFactoryTermYear=n,mE}var wce;function PQ(){return wce||(wce=1,(function(a){var e=rh&&rh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=rh&&rh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Ije(),a)})(rh)),rh}var nh={},gE={},ah={},vE={},_C={},ih={},Sce;function Dje(){if(Sce)return ih;Sce=1,Object.defineProperty(ih,"__esModule",{value:!0}),ih.readableFromWeb=ih.ReadableFromWeb=void 0;const a=Nr();let e=class extends a.Readable{constructor(r,t){super(t),this.reader=r.getReader(),this.readerClosed=!1,this.reader.closed.then(()=>{this.readerClosed=!0}).catch(i=>{this.readerClosed=!0,this.destroy(i)})}_read(){this.reader.read().then(r=>this.push(r.done?null:r.value)).catch(r=>this.destroy(r))}destroy(r){return this.readerClosed||this.reader.cancel(r).then().catch(()=>{}),super.destroy(r)}};ih.ReadableFromWeb=e;function u(n,r){return new e(n,r)}return ih.readableFromWeb=u,ih}var Ece;function CTe(){return Ece||(Ece=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.readableFromWeb=void 0;var e=Dje();Object.defineProperty(a,"readableFromWeb",{enumerable:!0,get:function(){return e.readableFromWeb}})})(_C)),_C}var TC,Ace;function LTe(){if(Ace)return TC;Ace=1;const a=e=>e!==null&&typeof e=="object"&&typeof e.pipe=="function";return a.writable=e=>a(e)&&e.writable!==!1&&typeof e._write=="function"&&typeof e._writableState=="object",a.readable=e=>a(e)&&e.readable!==!1&&typeof e._read=="function"&&typeof e._readableState=="object",a.duplex=e=>a.writable(e)&&a.readable(e),a.transform=e=>a.duplex(e)&&typeof e._transform=="function",TC=a,TC}var wC={exports:{}},Oce;function Fje(){return Oce||(Oce=1,(function(a){a.exports=e,a.exports.WEBSTREAM_SUPPORT=typeof ReadableStream<"u";function e(u){if(!a.exports.WEBSTREAM_SUPPORT)throw new Error("No web ReadableStream support");var n=!1,r={};function t(l){r.data=c,r.end=c,r.end=d,r.close=d,r.error=d;for(var s in r)u.on(s,r[s]);u.pause();function c(f){n||(l.enqueue(f),u.pause())}function d(f){if(!n){n=!0;for(var p in r)u.removeListener(p,r[p]);f?l.error(f):l.close()}}}function i(){n||u.resume()}function o(){n=!0;for(var l in r)u.removeListener(l,r[l]);u.push(null),u.pause(),u.destroy?u.destroy():u.close&&u.close()}return new ReadableStream({start:t,pull:i,cancel:o})}})(wC)),wC.exports}var xce;function BTe(){if(xce)return vE;xce=1,Object.defineProperty(vE,"__esModule",{value:!0}),vE.ActorHttp=void 0;const a=De(),e=CTe(),u=LTe(),n=Fje();let r=class qTe extends a.Actor{constructor(i){super(i)}static toNodeReadable(i){return u(i)||i===null?i:(0,e.readableFromWeb)(i)}static toWebReadableStream(i){return n(i)}static headersToHash(i){const o={};return i.forEach((l,s)=>{o[s]=l}),o}static getInputUrl(i){return new URL(i instanceof Request?i.url:i)}static createUserAgent(i,o){if(!qTe.isBrowser()){const l=[`Comunica/${o.split(".")[0]}.0`,`${i}/${o}`];return typeof globalThis.navigator=="object"&&typeof globalThis.navigator.userAgent=="string"?l.push(globalThis.navigator.userAgent):typeof globalThis.process=="object"&&typeof globalThis.process.versions=="object"&&typeof globalThis.process.versions.node=="string"&&l.push(`Node.js/${globalThis.process.versions.node.split(".")[0]}`),typeof globalThis.process=="object"&&typeof globalThis.process.platform=="string"&&typeof globalThis.process.arch=="string"&&l.splice(1,0,`(${globalThis.process.platform}; ${globalThis.process.arch})`),l.join(" ")}}static isBrowser(){return typeof globalThis.window=="object"&&typeof globalThis.window.document=="object"||typeof globalThis.importScripts=="function"}};return vE.ActorHttp=r,vE}var _E={},Rce;function Pje(){if(Rce)return _E;Rce=1,Object.defineProperty(_E,"__esModule",{value:!0}),_E.validateAndCloseHttpResponse=void 0;const a=O1(),e=BTe();async function u(n,r){if(r.status>=400){let t="empty response";if(r.body){const i=e.ActorHttp.toNodeReadable(r.body);t=await(0,a.stringify)(i)}throw new Error(`Could not update ${n} (HTTP status ${r.status}):
${t}`)}await r.body?.cancel()}return _E.validateAndCloseHttpResponse=u,_E}var Nce;function sc(){return Nce||(Nce=1,(function(a){var e=ah&&ah.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ah&&ah.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(BTe(),a),u(Pje(),a)})(ah)),ah}const jje="4.5.0",Mje={version:jje};var TE={},Ice;function Cje(){if(Ice)return TE;Ice=1,Object.defineProperty(TE,"__esModule",{value:!0}),TE.FetchInitPreprocessor=void 0;class a{async handle(u){if(u.body&&typeof u.body!="string"&&"getReader"in u.body){const n=u.body.getReader(),r=[];for(;;){const{done:t,value:i}=await n.read();if(t)break;r.push(i)}u.body=r.join("")}return{...u,keepalive:!u.body}}}return TE.FetchInitPreprocessor=a,TE}var Dce;function Lje(){if(Dce)return gE;Dce=1,Object.defineProperty(gE,"__esModule",{value:!0}),gE.ActorHttpFetch=void 0;const a=sc(),e=lt(),u=De(),n=Mje,r=Cje();let t=class h7 extends a.ActorHttp{constructor(o){super(o),this.fetchInitPreprocessor=new r.FetchInitPreprocessor(o.agentOptions)}async test(o){return(0,u.passTest)({time:Number.POSITIVE_INFINITY})}async run(o){const l=this.prepareRequestHeaders(o),s={method:"GET",...o.init,headers:l};this.logInfo(o.context,`Requesting ${a.ActorHttp.getInputUrl(o.input).href}`,()=>({headers:a.ActorHttp.headersToHash(l),method:s.method})),o.context.has(e.KeysHttp.fetch)&&(s.headers=a.ActorHttp.headersToHash(l)),o.context.get(e.KeysHttp.includeCredentials)&&(s.credentials="include");const c=o.context.get(e.KeysHttp.httpTimeout),d=o.context.get(e.KeysHttp.httpBodyTimeout),f=o.context.get(e.KeysHttp.fetch)??fetch,p=await this.fetchInitPreprocessor.handle(s);let h,g;if(c){const m=new AbortController;p.signal=m.signal,h=()=>m.abort(new Error(`Fetch timed out for ${a.ActorHttp.getInputUrl(o.input).href} after ${c} ms`)),g=setTimeout(()=>h(),c)}const v=await f(o.input,p);return c&&(!d||!v.body)&&clearTimeout(g),v}prepareRequestHeaders(o){const l=new Headers(o.init?.headers);a.ActorHttp.isBrowser()?l.delete("user-agent"):l.has("user-agent")||l.set("user-agent",h7.userAgent);const s=o.context.get(e.KeysHttp.auth);return s&&l.set("Authorization",`Basic ${h7.stringToBase64(s)}`),l}static stringToBase64(o){const l=new TextEncoder().encode(o),s=Array.from(l,c=>String.fromCodePoint(c)).join("");return btoa(s)}};return gE.ActorHttpFetch=t,t.userAgent=a.ActorHttp.createUserAgent("ActorHttpFetch",n.version),gE}var Fce;function jQ(){return Fce||(Fce=1,(function(a){var e=nh&&nh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=nh&&nh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Lje(),a)})(nh)),nh}var uh={},wE={},Pce;function qje(){if(Pce)return wE;Pce=1,Object.defineProperty(wE,"__esModule",{value:!0}),wE.ActorQueryOperationSource=void 0;const a=qr(),e=lt(),u=De(),n=xa(),r=Zt(),t=Ut();let i=class extends a.ActorQueryOperation{constructor(l){super(l)}async test(l){return(0,r.getOperationSource)(l.operation)?(0,u.passTest)({httpRequests:1}):(0,u.failTest)(`Actor ${this.name} requires an operation with source annotation.`)}async run(l){const s=l.context.get(e.KeysInitQuery.physicalQueryPlanLogger);s&&(s.logOperation(l.operation.type,void 0,l.operation,l.context.get(e.KeysInitQuery.physicalQueryPlanNode),this.name,{}),l.context=l.context.set(e.KeysInitQuery.physicalQueryPlanNode,l.operation));const c=(0,r.getOperationSource)(l.operation),d=c.context?l.context.merge(c.context):l.context;let f=!1;if(t.Util.recurseOperation(l.operation,{construct(){return f=!0,!1}}),f){const g=c.source.queryQuads(l.operation,d),v=(0,n.getMetadataQuads)(g);return{type:"quads",quadStream:g,metadata:v}}switch(l.operation.type){case t.Algebra.types.ASK:return{type:"boolean",execute:()=>c.source.queryBoolean(l.operation,d)};case t.Algebra.types.COMPOSITE_UPDATE:case t.Algebra.types.DELETE_INSERT:case t.Algebra.types.LOAD:case t.Algebra.types.CLEAR:case t.Algebra.types.CREATE:case t.Algebra.types.DROP:case t.Algebra.types.ADD:case t.Algebra.types.MOVE:case t.Algebra.types.COPY:return{type:"void",execute:()=>c.source.queryVoid(l.operation,d)}}const p=c.source.queryBindings(l.operation,d),h=(0,n.getMetadataBindings)(p);return{type:"bindings",bindingsStream:p,metadata:h}}};return wE.ActorQueryOperationSource=i,wE}var jce;function MQ(){return jce||(jce=1,(function(a){var e=uh&&uh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=uh&&uh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(qje(),a)})(uh)),uh}var oh={},SE={},Mce;function Bje(){if(Mce)return SE;Mce=1,Object.defineProperty(SE,"__esModule",{value:!0}),SE.MediatorJoinCoefficientsFixed=void 0;const a=lt(),e=De();let u=class extends e.Mediator{constructor(r){super(r)}async mediateWith(r,t){const i=[],o=t.map(({reply:g})=>g),l=(await Promise.all(o)).map(g=>{if(g.isFailed()){i.push(g.getFailMessage());return}return{value:g.get(),sideData:g.getSideData()}});let s=l.map(g=>{if(g)return g.value.iterations*this.cpuWeight+g.value.persistedItems*this.memoryWeight+g.value.blockingItems*this.timeWeight+g.value.requestTime*this.ioWeight});const c=Math.max(...s.filter(g=>g!==void 0)),d=r.context.get(a.KeysQueryOperation.limitIndicator);d&&(s=s.map((g,v)=>g!==void 0&&(l[v]?.value).blockingItems>0&&(l[v]?.value).iterations>d?g+c:g));let f=-1,p=Number.POSITIVE_INFINITY;for(const[g,v]of s.entries())v!==void 0&&(f===-1||v<p)&&(f=g,p=v);if(f<0)return(0,e.failTest)(this.constructFailureMessage(r,i));const h=t[f].actor;return h.includeInLogs&&e.Actor.getContextLogger(r.context)?.debug(`Determined physical join operator '${h.logicalType}-${h.physicalName}'`,{entries:r.entries.length,variables:await Promise.all(r.entries.map(async g=>(await g.output.metadata()).variables.map(v=>v.variable.value))),costs:Object.fromEntries(s.map((g,v)=>[`${t[v].actor.logicalType}-${t[v].actor.physicalName}`,g]).filter(g=>g[1]!==void 0)),coefficients:Object.fromEntries(l.map((g,v)=>[`${t[v].actor.logicalType}-${t[v].actor.physicalName}`,g?.value]).filter(g=>g[1]!==void 0))}),(0,e.passTestWithSideData)(h,l[f].sideData)}};return SE.MediatorJoinCoefficientsFixed=u,SE}var Cce;function CQ(){return Cce||(Cce=1,(function(a){var e=oh&&oh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=oh&&oh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Bje(),a)})(oh)),oh}var sh={},EE={},Lce;function UTe(){if(Lce)return EE;Lce=1,Object.defineProperty(EE,"__esModule",{value:!0}),EE.ActorHttpInvalidate=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return EE.ActorHttpInvalidate=e,EE}var AE={},qce;function Uje(){if(qce)return AE;qce=1,Object.defineProperty(AE,"__esModule",{value:!0}),AE.ActorHttpInvalidateListenable=void 0;const a=De(),e=UTe();let u=class extends e.ActorHttpInvalidate{constructor(r){super(r),this.invalidateListeners=[],this.invalidateListeners=[]}addInvalidateListener(r){this.invalidateListeners.push(r)}async test(r){return(0,a.passTestVoid)()}async run(r){for(const t of this.invalidateListeners)t(r);return{}}};return AE.ActorHttpInvalidateListenable=u,AE}var Bce;function Sa(){return Bce||(Bce=1,(function(a){var e=sh&&sh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=sh&&sh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(UTe(),a),u(Uje(),a)})(sh)),sh}var ch={},OE={},Uce;function Qje(){if(Uce)return OE;Uce=1,Object.defineProperty(OE,"__esModule",{value:!0}),OE.MediatorAll=void 0;const a=De();let e=class extends a.Mediator{constructor(n){super(n)}async mediate(n){const r=[];let t;try{t=this.publish(n)}catch{t=[]}for(const o of t){const l=await o.reply;l.isPassed()&&r.push({actor:o.actor,sideData:l.getSideData()})}return(await Promise.all(r.map(o=>o.actor.runObservable(n,o.sideData))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}};return OE.MediatorAll=e,OE}var Qce;function LQ(){return Qce||(Qce=1,(function(a){var e=ch&&ch.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ch&&ch.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Qje(),a)})(ch)),ch}var lh={},xE={},Vce;function Vje(){if(Vce)return xE;Vce=1,Object.defineProperty(xE,"__esModule",{value:!0}),xE.ActorRdfMetadataExtractTraverse=void 0;const a=oc(),e=De();let u=class extends a.ActorRdfMetadataExtract{constructor(r){super(r)}async test(r){return(0,e.passTestVoid)()}async run(r){const t=await this.mediatorExtractLinks.mediate(r);return{metadata:{traverse:t.links,traverseConditional:t.linksConditional}}}};return xE.ActorRdfMetadataExtractTraverse=u,xE}var Hce;function qQ(){return Hce||(Hce=1,(function(a){var e=lh&&lh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=lh&&lh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Vje(),a)})(lh)),lh}var dh={},RE={},fh={},NE={},ph={},IE={},kce;function Hje(){if(kce)return IE;kce=1,Object.defineProperty(IE,"__esModule",{value:!0}),IE.ChunkedIterator=void 0;const a=zt();let e=class extends a.TransformIterator{constructor(n,r,t){super(n,t),this.chunk=[],this.blockSize=r}consumeChunkAsIterator(){const n=new a.ArrayIterator(this.chunk,{autoStart:!1});return this.chunk=[],n}_transform(n,r,t){this.chunk.push(n),this.chunk.length>=this.blockSize&&t(this.consumeChunkAsIterator()),r()}_flush(n){this.chunk.length>0&&this._push(this.consumeChunkAsIterator()),super._flush(n)}};return IE.ChunkedIterator=e,IE}var DE={},zce;function kje(){if(zce)return DE;zce=1,Object.defineProperty(DE,"__esModule",{value:!0}),DE.ClosableIterator=void 0;const a=zt();let e=class extends a.AsyncIterator{constructor(i,o){super(),this.onClose=o.onClose,this._source=i,this._source[a.DESTINATION]=this,this._source.on("end",r),this._source.on("error",n),this._source.on("readable",u),this.readable=this._source.readable}read(){const i=this._source.read();return i||(this.readable=!1,this._source.done&&this.close()),i}_end(i){this.onClose(),this._source.removeListener("end",r),this._source.removeListener("error",n),this._source.removeListener("readable",u),delete this._source[a.DESTINATION],this._source.destroy(),super._end(i)}};DE.ClosableIterator=e;function u(){this[a.DESTINATION].readable=!0}function n(t){this[a.DESTINATION].emit("error",t)}function r(){this[a.DESTINATION].close()}return DE}var FE={},Gce;function zje(){if(Gce)return FE;Gce=1,Object.defineProperty(FE,"__esModule",{value:!0}),FE.ClosableTransformIterator=void 0;const a=zt();let e=class extends a.TransformIterator{constructor(n,r){super(n,r),this.onClose=r.onClose}_end(n){this.onClose(),super._end(n)}};return FE.ClosableTransformIterator=e,FE}var PE={},$ce;function Gje(){if($ce)return PE;$ce=1,Object.defineProperty(PE,"__esModule",{value:!0}),PE.instrumentIterator=void 0;function a(u){const n={count:0,timeSelf:0,timeLife:0};return e(u,n,!0),new Promise(r=>{u.on("end",()=>{r(n)})})}PE.instrumentIterator=a;function e(u,n,r){if(!("_profileInstrumented"in u)){if(u._profileInstrumented=!0,"_read"in u){const i=u._read;u._read=(o,l)=>{const s=performance.now();i.call(u,o,()=>{n.timeSelf+=performance.now()-s,l()})}}const t=u.read;if(u.read=()=>{const i=performance.now(),o=t.call(u);return r&&o&&n.count++,n.timeSelf+=performance.now()-i,o},r){const i=performance.now();u.on("end",()=>{n.timeLife=performance.now()-i})}"_source"in u&&e(u._source,n,!1)}}return PE}var Xce;function Eb(){return Xce||(Xce=1,(function(a){var e=ph&&ph.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ph&&ph.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Hje(),a),u(kje(),a),u(zje(),a),u(Gje(),a)})(ph)),ph}var Kce;function $je(){if(Kce)return NE;Kce=1,Object.defineProperty(NE,"__esModule",{value:!0}),NE.ActorRdfJoin=void 0;const a=lt(),e=De(),u=Eb(),n=xa();let r=class Jc extends e.Actor{constructor(i,o){super(i),this.includeInLogs=!0,this.logicalType=o.logicalType,this.physicalName=o.physicalName,this.limitEntries=o.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=o.limitEntriesMin??!1,this.canHandleUndefs=o.canHandleUndefs??!1,this.isLeaf=o.isLeaf??!0,this.requiresVariableOverlap=o.requiresVariableOverlap??!1,this.canHandleOperationRequired=o.canHandleOperationRequired??!1}static overlappingVariables(i){const o={};for(const l of i)for(const s of l.variables){o[s.variable.value]||(o[s.variable.value]={variable:s.variable,canBeUndef:s.canBeUndef,occurrences:0});const c=o[s.variable.value];c.canBeUndef=c.canBeUndef||s.canBeUndef,c.occurrences++}return Object.values(o).filter(l=>l.occurrences===i.length).map(l=>({variable:l.variable,canBeUndef:l.canBeUndef}))}static joinVariables(i,o,l=!1){const s={};let c=!0;for(const d of o){for(const f of d.variables)s[f.variable.value]=s[f.variable.value]||f.canBeUndef||!c&&l&&!(f.variable.value in s);c=!1}return Object.entries(s).map(([d,f])=>({variable:i.variable(d),canBeUndef:f}))}static joinBindings(...i){if(i.length===0)return null;if(i.length===1)return i[0];let o=i[0];for(const l of i.slice(1)){const s=o.merge(l);if(!s)return null;o=s}return o}static getCardinality(i){return i.cardinality}static async getMetadatas(i){return await Promise.all(i.map(o=>o.output.metadata()))}static async getEntriesWithMetadatas(i){const o=await Jc.getMetadatas(i);return i.map((l,s)=>({...l,metadata:o[s]}))}static getRequestInitialTimes(i){return i.map(o=>o.pageSize?0:o.requestTime??0)}static getRequestItemTimes(i){return i.map(o=>o.pageSize?(o.requestTime??0)/o.pageSize:0)}constructState(i){const o=new n.MetadataValidationState,l=()=>o.invalidate();for(const s of i)s.state.addInvalidateListener(l);return o}async constructResultMetadata(i,o,l,s={},c=!1){let d;if(s.cardinality)d=s.cardinality;else{let f=!1;d=o.reduce((p,h)=>{const g=Jc.getCardinality(h);return g.value===0&&(f=!0),{type:g.type==="estimate"?"estimate":p.type,value:p.value*(c?Math.max(1,g.value):g.value)}},{type:"exact",value:1}),(!f||c)&&(d.value*=(await this.mediatorJoinSelectivity.mediate({entries:i,context:l})).selectivity,d.value===0&&(d.value=Number.MIN_VALUE))}return{state:this.constructState(o),...s,cardinality:{type:d.type,value:d.value},variables:Jc.joinVariables(l.getSafe(a.KeysInitQuery.dataFactory),o,c)}}static async sortJoinEntries(i,o,l){if(o.some(f=>f.metadata.variables.some(p=>p.canBeUndef)))return(0,e.passTest)(o);const c={};for(const f of o)for(const p of f.metadata.variables){let h=c[p.variable.value];h||(h=0),c[p.variable.value]=++h}const d=[];for(const[f,p]of Object.entries(c))p>=2&&d.push(f);return d.length===0?(0,e.failTest)("Bind join can only join entries with at least one common variable"):(0,e.passTest)((await i.mediate({entries:o,context:l})).entries)}async test(i){if(i.type!==this.logicalType)return(0,e.failTest)(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${i.type}' was given.`);if(i.entries.length<=1)return(0,e.failTest)(`${this.name} requires at least two join entries.`);const o=i.entries.some(c=>c.operationRequired);if(!this.canHandleOperationRequired&&o)return(0,e.failTest)(`${this.name} does not work with operationRequired.`);if(this.limitEntriesMin?i.entries.length<this.limitEntries:i.entries.length>this.limitEntries)return(0,e.failTest)(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${i.entries.length}.`);for(const c of i.entries)if(c.output.type!=="bindings")return(0,e.failTest)(`Invalid type of a join entry: Expected 'bindings' but got '${c.output.type}'`);const l=await Jc.getMetadatas(i.entries);let s;return!this.canHandleUndefs&&(s=Jc.overlappingVariables(l),s.some(c=>c.canBeUndef))?(0,e.failTest)(`Actor ${this.name} can not join streams containing undefs`):this.requiresVariableOverlap&&(s??Jc.overlappingVariables(l)).length===0&&!o?(0,e.failTest)(`Actor ${this.name} can only join entries with at least one common variable`):await this.getJoinCoefficients(i,{metadatas:l})}async run(i,o){let l;i.context.has(a.KeysInitQuery.physicalQueryPlanLogger)&&(l=i.context.get(a.KeysInitQuery.physicalQueryPlanNode),i.context=i.context.set(a.KeysInitQuery.physicalQueryPlanNode,i));const s=i.context.get(a.KeysInitQuery.physicalQueryPlanLogger);let c;this.includeInLogs&&s&&(c={},s.stashChildren(l,p=>p.logicalOperator.startsWith("join")),s.logOperation(`join-${this.logicalType}`,this.physicalName,i,l,this.name,c));const{result:d,physicalPlanMetadata:f}=await this.getOutput(i,o);if(c){(0,u.instrumentIterator)(d.bindingsStream).then(h=>{s.appendMetadata(i,{cardinalityReal:h.count,timeSelf:h.timeSelf,timeLife:h.timeLife})}),Object.assign(c,f);const p=o.metadatas.map(Jc.getCardinality);if(c.cardinalities=p,c.joinCoefficients=(await this.getJoinCoefficients(i,o)).getOrThrow(),this.isLeaf)for(let h=0;h<i.entries.length;h++){const g=i.entries[h];s.unstashChild(g.operation,i),s.appendMetadata(g.operation,{cardinality:p[h]})}}return d.metadata=(0,n.cachifyMetadata)(d.metadata),d}};return NE.ActorRdfJoin=r,NE}var Jce;function ki(){return Jce||(Jce=1,(function(a){var e=fh&&fh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=fh&&fh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u($je(),a)})(fh)),fh}var Wce;function Xje(){if(Wce)return RE;Wce=1,Object.defineProperty(RE,"__esModule",{value:!0}),RE.ActorRdfJoinSingle=void 0;const a=ki(),e=De();let u=class extends a.ActorRdfJoin{constructor(r){super(r,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(r){return r.entries.length!==1?(0,e.failTest)(`Actor ${this.name} can only join a single entry`):await this.getJoinCoefficients(r,void 0)}async getOutput(r){return{result:r.entries[0].output}}async getJoinCoefficients(r,t){return(0,e.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},t)}};return RE.ActorRdfJoinSingle=u,RE}var Yce;function BQ(){return Yce||(Yce=1,(function(a){var e=dh&&dh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=dh&&dh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Xje(),a)})(dh)),dh}var hh={},jE={},SC,Zce;function Kje(){if(Zce)return SC;Zce=1;let a=zt(),e=a.MultiTransformIterator,u=a.SimpleTransformIterator;class n extends e{constructor(t,i,o,l){super(t,l),this.funRight=i,this.funJoin=o}_createTransformer(t){return new u(this.funRight(t),{transform:(i,o,l)=>{let s=this.funJoin(t,i);s!==null&&l(s),o()}})}}return SC=n,SC}var EC,ele;function Jje(){if(ele)return EC;ele=1;let a=zt().AsyncIterator;class e extends a{constructor(n,r,t,i){super(),this.addedDataListener=!1,this.left=n,this.right=r,this.funHash=t,this.funJoin=i,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",l=>this.destroy(l)),this.right.on("error",l=>this.destroy(l)),this.readable=!1,this.left.on("end",o.bind(this));function o(){this.readable=!0,this.right.on("readable",()=>this.readable=!0),this.right.on("end",()=>{this.hasResults()||this._end()})}this.on("newListener",l=>{l==="data"&&this._addDataListenerIfNeeded()}),this.left.readable&&this._addDataListenerIfNeeded(),this.left.on("readable",()=>this._addDataListenerIfNeeded())}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(this._addDataListenerIfNeeded();;){if(this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let r=this.matches[this.matchIdx++],t=this.funJoin(r,this.match);if(t!==null)return t}if(this.hasResults()||this._end(),this.match=this.right.read(),this.match===null)return this.readable=!1,null;let n=this.funHash(this.match);this.matches=this.leftMap.get(n)||[],this.matchIdx=0}}_addDataListenerIfNeeded(){this.addedDataListener||(this.addedDataListener=!0,this._addDataListener())}_addDataListener(){this.left.on("data",n.bind(this));function n(r){let t=this.funHash(r),i=this.leftMap.get(t);i||(i=[],this.leftMap.set(t,i)),i.push(r)}}}return EC=e,EC}var AC,tle;function Wje(){if(tle)return AC;tle=1;const{MultiTransformIterator:a,SimpleTransformIterator:e,scheduleTask:u}=zt();class n extends a{constructor(t,i,o,l){super(t,l),this.right=i,this.funJoin=o,this.on("end",()=>this.right.close())}_end(){super._end(),u(()=>this.right.destroy())}_createTransformer(t){return new e(this.right.clone(),{transform:(i,o,l)=>{let s=this.funJoin(t,i);s!==null&&l(s),o()}})}}return AC=n,AC}var OC,rle;function Yje(){if(rle)return OC;rle=1;let a=zt().AsyncIterator;class e extends a{constructor(n,r,t,i){super(),this.left=n,this.right=r,this.funHash=t,this.funJoin=i,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",()=>this._cleanup()),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",o=>this.destroy(o)),this.right.on("error",o=>this.destroy(o)),this.left.on("readable",()=>this.readable=!0),this.right.on("readable",()=>this.readable=!0),this.left.on("end",()=>{this.hasResults()||this._end()}),this.right.on("end",()=>{this.hasResults()||this._end()})}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}_end(){super._end(),this.left.destroy(),this.right.destroy()}read(){for(;;){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let t=this.matches[this.matchIdx++],i=this.usedLeft?this.funJoin(this.match,t):this.funJoin(t,this.match);if(i!==null)return i}this.hasResults()||this._end();let n=null;for(let t=0;t<2&&(n=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,n===null);++t);if(this.done||n===null)return this.readable=!1,null;let r=this.funHash(n);if(this.usedLeft&&this.right.done)this.leftMap=null;else if(this.left.done)this.rightMap=null;else{let t=this.usedLeft?this.leftMap:this.rightMap;t.has(r)||t.set(r,[]);let i=t.get(r);i||(i=[],t.set(r,i)),i.push(n)}this.match=n,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(r)||[],this.matchIdx=0}}}return OC=e,OC}var xC,nle;function Zje(){if(nle)return xC;nle=1;let a=zt().AsyncIterator;class e extends a{constructor(n){super(),Array.isArray(n)||(n=Array.prototype.slice.call(arguments)),this.streams=n;for(let r of n)r.on("readable",()=>this.emit("readable")),r.on("end",()=>this._removeStream(r));this.streams.length===0&&this.close(),this.idx=this.streams.length-1}_removeStream(n){let r=this.streams.indexOf(n);r<0||(this.streams.splice(r,1),this.idx>=this.streams.length&&--this.idx,this.streams.length===0&&this._end())}close(){super.close();for(let n of this.streams)n.close()}read(){for(let n=0;n<this.streams.length;++n){this.idx=(this.idx+1)%this.streams.length;let r=this.streams[this.idx].read();if(r!==null)return r}return null}}return xC=e,xC}var RC,ale;function UQ(){if(ale)return RC;ale=1;const a=Kje(),e=Jje(),u=Wje(),n=Yje(),r=Zje();return RC={DynamicNestedLoopJoin:a,HashJoin:e,NestedLoopJoin:u,SymmetricHashJoin:n,MergeStream:r},RC}var ile;function eMe(){if(ile)return jE;ile=1,Object.defineProperty(jE,"__esModule",{value:!0}),jE.ActorRdfJoinSymmetricHash=void 0;const a=ki(),e=De(),u=UQ();let n=class extends a.ActorRdfJoin{constructor(t){super(t,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2,requiresVariableOverlap:!0})}async getOutput(t){const i=await a.ActorRdfJoin.getMetadatas(t.entries),o=a.ActorRdfJoin.overlappingVariables(i),{hashFunction:l}=await this.mediatorHashBindings.mediate({context:t.context}),s=o.map(d=>d.variable);return{result:{type:"bindings",bindingsStream:new u.SymmetricHashJoin(t.entries[0].output.bindingsStream,t.entries[1].output.bindingsStream,d=>l(d,s),a.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(t.entries,i,t.context)}}}async getJoinCoefficients(t,i){const{metadatas:o}=i,l=a.ActorRdfJoin.getRequestInitialTimes(o),s=a.ActorRdfJoin.getRequestItemTimes(o);return(0,e.passTestWithSideData)({iterations:o[0].cardinality.value+o[1].cardinality.value,persistedItems:o[0].cardinality.value+o[1].cardinality.value,blockingItems:0,requestTime:l[0]+o[0].cardinality.value*s[0]+l[1]+o[1].cardinality.value*s[1]},i)}};return jE.ActorRdfJoinSymmetricHash=n,jE}var ule;function QQ(){return ule||(ule=1,(function(a){var e=hh&&hh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=hh&&hh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(eMe(),a)})(hh)),hh}var yh={},ME={},ole;function tMe(){if(ole)return ME;ole=1,Object.defineProperty(ME,"__esModule",{value:!0}),ME.ActorRdfJoinNestedLoop=void 0;const a=ki(),e=De(),u=UQ();let n=class extends a.ActorRdfJoin{constructor(t){super(t,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(t){return{result:{type:"bindings",bindingsStream:new u.NestedLoopJoin(t.entries[0].output.bindingsStream,t.entries[1].output.bindingsStream,a.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(t.entries,await a.ActorRdfJoin.getMetadatas(t.entries),t.context)}}}async getJoinCoefficients(t,i){const{metadatas:o}=i,l=a.ActorRdfJoin.getRequestInitialTimes(o),s=a.ActorRdfJoin.getRequestItemTimes(o);return(0,e.passTestWithSideData)({iterations:o[0].cardinality.value*o[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:l[0]+o[0].cardinality.value*s[0]+l[1]+o[1].cardinality.value*s[1]},i)}};return ME.ActorRdfJoinNestedLoop=n,ME}var sle;function VQ(){return sle||(sle=1,(function(a){var e=yh&&yh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=yh&&yh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(tMe(),a)})(yh)),yh}var mh={},CE={},bh={},LE={},gh={},cle;function QTe(){if(cle)return gh;cle=1,Object.defineProperty(gh,"__esModule",{value:!0}),gh.bindingsToCompactString=gh.bindingsToString=void 0;const a=$t();function e(n){const r={};for(const t of n.keys())r[t.value]=(0,a.termToString)(n.get(t));return JSON.stringify(r,null,"  ")}gh.bindingsToString=e;function u(n,r){return r.map(t=>{const i=n.get(t);return i?(0,a.termToString)(i):""}).join("")}return gh.bindingsToCompactString=u,gh}var lle;function VTe(){if(lle)return LE;lle=1,Object.defineProperty(LE,"__esModule",{value:!0}),LE.Bindings=void 0;const a=De(),e=Tq,u=QTe();let n=class Pa{constructor(t,i,o){this.type="bindings",this.dataFactory=t,this.entries=i,this.contextHolder=o}has(t){return this.entries.has(typeof t=="string"?t:t.value)}get(t){return this.entries.get(typeof t=="string"?t:t.value)}set(t,i){return new Pa(this.dataFactory,this.entries.set(typeof t=="string"?t:t.value,i),this.contextHolder)}delete(t){return new Pa(this.dataFactory,this.entries.delete(typeof t=="string"?t:t.value),this.contextHolder)}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),t=>this.dataFactory.variable(t))}values(){return this.iteratorToIterable(this.entries.values())}forEach(t){for(const[i,o]of this.entries.entries())t(o,this.dataFactory.variable(i))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),([t,i])=>[this.dataFactory.variable(t),i])[Symbol.iterator]()}equals(t){if(!t)return!1;if(this===t)return!0;if(this.size!==t.size)return!1;for(const i of this.keys())if(!this.get(i)?.equals(t.get(i)))return!1;return!0}filter(t){return new Pa(this.dataFactory,(0,e.Map)(this.entries.filter((i,o)=>t(i,this.dataFactory.variable(o)))),this.contextHolder)}map(t){return new Pa(this.dataFactory,(0,e.Map)(this.entries.map((i,o)=>t(i,this.dataFactory.variable(o)))),this.contextHolder)}merge(t){if(this.size<t.size&&t instanceof Pa)return t.merge(this);let i=this.entries;if(t instanceof Pa)for(const[o,l]of t.entries){const s=this.entries.get(o);if(s&&!s.equals(l))return;i=i.set(o,l)}else for(const[o,l]of t){const s=this.entries.get(o.value);if(s&&!s.equals(l))return;i=i.set(o.value,l)}return this.createBindingsWithContexts(i,t)}mergeWith(t,i){if(this.size<i.size&&i instanceof Pa)return i.mergeWith(t,this);let o=this.entries;if(i instanceof Pa)for(const[l,s]of i.entries){const c=this.entries.get(l);let d;c&&!c.equals(s)?d=t(c,s,this.dataFactory.variable(l)):d=s,o=o.set(l,d)}else for(const[l,s]of i){const c=this.entries.get(l.value);let d;c&&!c.equals(s)?d=t(c,s,l):d=s,o=o.set(l.value,d)}return this.createBindingsWithContexts(o,i)}createBindingsWithContexts(t,i){if(this.contextHolder&&this.contextHolder.context){let o=this.contextHolder.context;return"contextHolder"in i&&i.contextHolder&&i.contextHolder.context&&(o=Pa.mergeContext(this.contextHolder.contextMergeHandlers,o,i.contextHolder.context)),new Pa(this.dataFactory,t,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:o})}return new Pa(this.dataFactory,t,i.contextHolder)}static mergeContext(t,i,o){const l=[...i.keys(),...o.keys()],s={},c={},d=new Set(o.keys().map(p=>p.name)),f=i.keys().filter(p=>d.has(p.name));for(const p of l){if(c[p.name]===1)continue;c[p.name]=1;const h=f.some(g=>g.name===p.name);if(t[p.name]&&h){s[p.name]=t[p.name].run(i.get(p),o.get(p));continue}!t[p.name]&&h||(s[p.name]=i.get(p)||o.get(p))}return new a.ActionContext(s)}setContextEntry(t,i){return this.setContextEntryRaw(t,i)}setContextEntryRaw(t,i){return this.contextHolder&&this.contextHolder.context?new Pa(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context.set(t,i)}):new Pa(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder?.contextMergeHandlers??{},context:new a.ActionContext().set(t,i)})}deleteContextEntry(t){return this.deleteContextEntryRaw(t)}deleteContextEntryRaw(t){return this.contextHolder?new Pa(this.dataFactory,this.entries,{contextMergeHandlers:this.contextHolder.contextMergeHandlers,context:this.contextHolder.context?.delete(t)}):new Pa(this.dataFactory,this.entries)}getContext(){return this.contextHolder?.context}getContextEntry(t){return this.getContext()?.get(t)}toString(){return(0,u.bindingsToString)(this)}*mapIterable(t,i){for(const o of t)yield i(o)}iteratorToIterable(t){return{[Symbol.iterator]:()=>t}}};return LE.Bindings=n,LE}var qE={},dle;function rMe(){if(dle)return qE;dle=1,Object.defineProperty(qE,"__esModule",{value:!0}),qE.BindingsFactory=void 0;const a=Tq,e=VTe();let u=class HTe{constructor(r,t){this.dataFactory=r,this.contextMergeHandlers=t}static async create(r,t,i){return new HTe(i,(await r.mediate({context:t})).mergeHandlers)}bindings(r=[]){return new e.Bindings(this.dataFactory,(0,a.Map)(r.map(([t,i])=>[t.value,i])),this.contextMergeHandlers?{contextMergeHandlers:this.contextMergeHandlers}:void 0)}fromBindings(r){return this.bindings([...r])}fromRecord(r){return this.bindings(Object.entries(r).map(([t,i])=>[this.dataFactory.variable(t),i]))}};return qE.BindingsFactory=u,qE}var fle;function pn(){return fle||(fle=1,(function(a){var e=bh&&bh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=bh&&bh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(VTe(),a),u(rMe(),a),u(QTe(),a)})(bh)),bh}var vh={},BE={},ple;function nMe(){if(ple)return BE;ple=1,Object.defineProperty(BE,"__esModule",{value:!0}),BE.BindingsIndexDef=void 0;let a=class{constructor(u,n){this.keys=u.map(r=>r.variable),this.hashFn=n,this.index={}}put(u,n){return this.index[this.hashFn(u,this.keys)]=n}get(u){const n=this.getFirst(u);return n?[n]:[]}getFirst(u){return this.index[this.hashFn(u,this.keys)]}values(){return Object.values(this.index)}};return BE.BindingsIndexDef=a,BE}var UE={},hle;function aMe(){if(hle)return UE;hle=1,Object.defineProperty(UE,"__esModule",{value:!0}),UE.BindingsIndexUndef=void 0;let a=class{constructor(u,n,r){this.data={},this.keys=u.map(t=>t.variable),this.hashFn=n,this.allowDisjointDomains=r&&this.keys.length>0}put(u,n){if(this.allowDisjointDomains||this.isBindingsValid(u)){let r=this.data;for(let t=0;t<this.keys.length;t++){const i=this.keys[t],o=this.hashFn(u.get(i));let l=r[o];l||(l=r[o]=t===this.keys.length-1?n:{}),r=l}}return n}isBindingsValid(u){let n=!1;for(const r of this.keys)if(u.has(r)){n=!0;break}return n}get(u){return this.allowDisjointDomains||this.isBindingsValid(u)?this.getRecursive(u,this.keys,[this.data]):[]}getRecursive(u,n,r){if(n.length===0)return r;let t;[t,...n]=n;const i=[];for(const o of r){const l=this.hashFn(u?.get(t));if(l){const s=[o[l],o[""]].filter(Boolean);if(s.length===0)continue;i.push(this.getRecursive(u,n,s))}else{const s=Object.values(o);if(s.length===0)continue;i.push(this.getRecursive(u,n,s))}}return i.flat()}getFirst(u,n=!0){if(this.allowDisjointDomains||this.isBindingsValid(u))return this.getRecursiveFirst(u,this.keys,[this.data],n)}getRecursiveFirst(u,n,r,t){if(n.length===0)return r[0];let i;[i,...n]=n;for(const o of r){const l=this.hashFn(u.get(i));if(l||!t){const s=[o[l],o[""]].filter(Boolean);if(s.length===0)continue;const c=this.getRecursiveFirst(u,n,s,t);if(c)return c}else{const s=Object.values(o);if(s.length===0)continue;const c=this.getRecursiveFirst(u,n,s,t);if(c)return c}}}values(){return this.keys.length===0?[]:this.getRecursive(void 0,this.keys,[this.data])}};return UE.BindingsIndexUndef=a,UE}var NC={},yle;function iMe(){return yle||(yle=1,Object.defineProperty(NC,"__esModule",{value:!0})),NC}var mle;function kTe(){return mle||(mle=1,(function(a){var e=vh&&vh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=vh&&vh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(nMe(),a),u(aMe(),a),u(iMe(),a)})(vh)),vh}var ble;function uMe(){if(ble)return CE;ble=1,Object.defineProperty(CE,"__esModule",{value:!0}),CE.ActorRdfJoinMinusHash=void 0;const a=ki(),e=De(),u=pn(),n=kTe(),r=Eb(),t=$t();let i=class zTe extends a.ActorRdfJoin{constructor(l){super(l,{logicalType:"minus",physicalName:`hash-${l.canHandleUndefs?"undef":"def"}`,limitEntries:2,canHandleUndefs:l.canHandleUndefs})}static constructIndex(l,s){return l?new n.BindingsIndexUndef(s,c=>c&&c.termType!=="Variable"?(0,t.termToString)(c):"",!1):new n.BindingsIndexDef(s,u.bindingsToCompactString)}async getOutput(l){const s=l.entries[1].output,c=l.entries[0].output,d=await a.ActorRdfJoin.getMetadatas(l.entries);let f=a.ActorRdfJoin.overlappingVariables(d);if(l.graphVariableFromParentScope&&(f=f.filter(h=>!h.variable.equals(l.graphVariableFromParentScope))),f.length===0)return s.bindingsStream.destroy(),{result:c};const p=new r.ClosableTransformIterator(async()=>{const h=zTe.constructIndex(this.canHandleUndefs,f);return await new Promise(g=>{s.bindingsStream.on("data",v=>h.put(v,!0)),s.bindingsStream.on("end",g),s.bindingsStream.on("error",v=>p.emit("error",v))}),c.bindingsStream.filter(g=>!h.getFirst(g,!0))},{autoStart:!1,onClose(){s.bindingsStream.destroy(),c.bindingsStream.destroy()}});return{result:{type:"bindings",bindingsStream:p,metadata:c.metadata}}}async getJoinCoefficients(l,s){const{metadatas:c}=s,d=a.ActorRdfJoin.getRequestInitialTimes(c),f=a.ActorRdfJoin.getRequestItemTimes(c);let p=c[0].cardinality.value+c[1].cardinality.value;return this.canHandleUndefs||(p*=.8),(0,e.passTestWithSideData)({iterations:p,persistedItems:c[0].cardinality.value,blockingItems:c[0].cardinality.value,requestTime:d[0]+c[0].cardinality.value*f[0]+d[1]+c[1].cardinality.value*f[1]},s)}};return CE.ActorRdfJoinMinusHash=i,CE}var gle;function u1(){return gle||(gle=1,(function(a){var e=mh&&mh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=mh&&mh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(uMe(),a)})(mh)),mh}var _h={},QE={},vle;function oMe(){if(vle)return QE;vle=1,Object.defineProperty(QE,"__esModule",{value:!0}),QE.ActorRdfJoinOptionalHash=void 0;const a=ki(),e=De(),u=pn(),n=kTe(),r=Eb(),t=zt(),i=$t();let o=class y7 extends a.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:`hash-${s.canHandleUndefs?"undef":"def"}-${s.blocking?"blocking":"nonblocking"}`,limitEntries:2,canHandleUndefs:s.canHandleUndefs,requiresVariableOverlap:!0})}static constructIndex(s,c){return s?new n.BindingsIndexUndef(c,d=>d&&d.termType!=="Variable"?(0,i.termToString)(d):"",!0):new n.BindingsIndexDef(c,u.bindingsToCompactString)}async getOutput(s){const c=s.entries[1].output,d=s.entries[0].output,f=await a.ActorRdfJoin.getMetadatas(s.entries),p=a.ActorRdfJoin.overlappingVariables(f);let h;return this.blocking?h=new r.ClosableTransformIterator(async()=>{const g=y7.constructIndex(this.canHandleUndefs,p);return await new Promise(v=>{c.bindingsStream.on("data",m=>{(g.getFirst(m,!0)??g.put(m,[])).push(m)}),c.bindingsStream.on("end",v),c.bindingsStream.on("error",m=>{h.emit("error",m)})}),new t.MultiTransformIterator(d.bindingsStream,{multiTransform:v=>new t.ArrayIterator(g.get(v).flat().map(m=>a.ActorRdfJoin.joinBindings(v,m)).filter(m=>m!==null),{autoStart:!1}),optional:!0,autoStart:!1})},{autoStart:!1,onClose(){c.bindingsStream.destroy(),d.bindingsStream.destroy()}}):h=new r.ClosableTransformIterator(async()=>{const g=y7.constructIndex(this.canHandleUndefs,p);let v=!0;return c.bindingsStream.on("data",m=>{(g.getFirst(m,!0)??g.put(m,new t.BufferedIterator({autoStart:!1})))._push(m)}),c.bindingsStream.on("end",()=>{for(const m of g.values())m.close();v=!1}),c.bindingsStream.on("error",m=>{h.emit("error",m)}),new t.MultiTransformIterator(d.bindingsStream,{multiTransform:m=>{let T=g.get(m);return T.length===0&&(v?T=[g.put(m,new t.BufferedIterator({autoStart:!1}))]:T=[]),new t.UnionIterator(T.map(E=>E.clone()),{autoStart:!1}).map(E=>a.ActorRdfJoin.joinBindings(m,E))},optional:!0,autoStart:!1})},{autoStart:!1,onClose(){c.bindingsStream.destroy(),d.bindingsStream.destroy()}}),{result:{type:"bindings",bindingsStream:h,metadata:async()=>await this.constructResultMetadata(s.entries,f,s.context,{},!0)}}}async getJoinCoefficients(s,c){const{metadatas:d}=c,f=a.ActorRdfJoin.getRequestInitialTimes(d),p=a.ActorRdfJoin.getRequestItemTimes(d);let h=d[0].cardinality.value+d[1].cardinality.value;return this.canHandleUndefs||(h*=.8),this.blocking&&(h*=.9),(0,e.passTestWithSideData)({iterations:h,persistedItems:d[0].cardinality.value,blockingItems:this.blocking?d[0].cardinality.value:0,requestTime:f[0]+d[0].cardinality.value*p[0]+f[1]+d[1].cardinality.value*p[1]},c)}};return QE.ActorRdfJoinOptionalHash=o,QE}var _le;function _u(){return _le||(_le=1,(function(a){var e=_h&&_h.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=_h&&_h.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(oMe(),a)})(_h)),_h}var Th={},VE={},Tle;function sMe(){if(Tle)return VE;Tle=1,Object.defineProperty(VE,"__esModule",{value:!0}),VE.ActorRdfJoinOptionalNestedLoop=void 0;const a=ki(),e=De(),u=UQ();let n=class extends a.ActorRdfJoin{constructor(t){super(t,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(t){return{result:{type:"bindings",bindingsStream:new u.NestedLoopJoin(t.entries[0].output.bindingsStream,t.entries[1].output.bindingsStream,a.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(t.entries,await a.ActorRdfJoin.getMetadatas(t.entries),t.context,{},!0)}}}async getJoinCoefficients(t,i){const{metadatas:o}=i,l=a.ActorRdfJoin.getRequestInitialTimes(o),s=a.ActorRdfJoin.getRequestItemTimes(o);return(0,e.passTestWithSideData)({iterations:o[0].cardinality.value*o[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:l[0]+o[0].cardinality.value*s[0]+l[1]+o[1].cardinality.value*s[1]},i)}};return VE.ActorRdfJoinOptionalNestedLoop=n,VE}var wle;function HQ(){return wle||(wle=1,(function(a){var e=Th&&Th.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Th&&Th.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(sMe(),a)})(Th)),Th}var wh={},HE={},Sh={},kE={},Sle;function cMe(){if(Sle)return kE;Sle=1,Object.defineProperty(kE,"__esModule",{value:!0}),kE.ActorDereferenceRdf=void 0;const a=TB();let e=class extends a.ActorDereferenceParse{constructor(n){super(n)}};return kE.ActorDereferenceRdf=e,kE}var Ele;function lMe(){return Ele||(Ele=1,(function(a){var e=Sh&&Sh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Sh&&Sh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(cMe(),a)})(Sh)),Sh}var Ale;function dMe(){if(Ale)return HE;Ale=1,Object.defineProperty(HE,"__esModule",{value:!0}),HE.ActorDereferenceRdfParse=void 0;const a=lMe();let e=class extends a.ActorDereferenceRdf{constructor(n){super(n)}async getMetadata(n){return{baseIRI:n.baseIRI??n.url}}};return HE.ActorDereferenceRdfParse=e,HE}var Ole;function kQ(){return Ole||(Ole=1,(function(a){var e=wh&&wh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=wh&&wh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(dMe(),a)})(wh)),wh}var Eh={},zE={},GE={},xle;function fMe(){if(xle)return GE;xle=1,Object.defineProperty(GE,"__esModule",{value:!0}),GE.HtmlScriptListener=void 0;const a=lt(),e=Nr(),u=Xn();let n=class z6{constructor(t,i,o,l,s,c,d,f){this.textChunksJsonLd=[],this.endBarrier=1,this.passedScripts=0,this.isFinalJsonLdProcessing=!1,this.mediatorRdfParseHandle=t,this.cbQuad=i,this.cbError=o,this.cbEnd=l,this.supportedTypes=s,this.context=c.set(a.KeysRdfParseHtmlScript.processingHtmlScript,!0),this.baseIRI=d,this.headers=f,this.onlyFirstScript=c.get(a.KeysRdfParseHtmlScript.extractAllScripts)===!1;const p=this.baseIRI.indexOf("#");this.targetScriptId=p>0?this.baseIRI.slice(p+1,this.baseIRI.length):null}static newErrorCoded(t,i){const o=new Error(t);return o.code=i,o}onEnd(){--this.endBarrier===0&&(this.textChunksJsonLd.length>0?(this.handleMediaType="application/ld+json",this.textChunks=this.textChunksJsonLd,this.textChunks.push("]"),this.textChunksJsonLd=[],this.isFinalJsonLdProcessing=!0,this.endBarrier++,this.onTagClose()):(this.passedScripts===0&&this.targetScriptId&&this.cbError(z6.newErrorCoded(`Failed to find targeted script id "${this.targetScriptId}"`,"loading document failed")),this.cbEnd()),this.isFinalJsonLdProcessing=!1)}onTagClose(){if(this.handleMediaType)if(this.requiresCustomJsonLdHandling(this.handleMediaType)&&!this.isFinalJsonLdProcessing)this.handleMediaType=void 0,this.textChunks=void 0,this.onEnd();else{const t=new e.Readable({objectMode:!0});t._read=()=>{};const i=this.textChunks,o={context:this.context,handle:{metadata:{baseIRI:this.baseIRI},data:t,headers:this.headers,context:this.context},handleMediaType:this.handleMediaType};this.mediatorRdfParseHandle.mediate(o).then(({handle:l})=>{l.data.on("error",s=>this.cbError(z6.newErrorCoded(s.message,"invalid script element"))).on("data",this.cbQuad).on("end",()=>this.onEnd());for(const s of i)t.push(s);t.push(null)}).catch(l=>{this.targetScriptId?this.cbError(z6.newErrorCoded(l.message,"loading document failed")):this.onEnd()}),this.handleMediaType=void 0,this.textChunks=void 0}}onTagOpen(t,i){t==="base"&&i.href&&(this.baseIRI=(0,u.resolve)(i.href,this.baseIRI)),t==="script"&&(!this.targetScriptId||i.id===this.targetScriptId)?this.supportedTypes[i.type]?this.onlyFirstScript&&this.passedScripts>0?this.handleMediaType=void 0:(this.passedScripts++,this.handleMediaType=i.type,this.endBarrier++,this.requiresCustomJsonLdHandling(this.handleMediaType)?(this.textChunks=this.textChunksJsonLd,this.textChunks.push(this.textChunks.length===0?"[":",")):this.textChunks=[]):this.targetScriptId&&this.cbError(z6.newErrorCoded(`Targeted script "${this.targetScriptId}" does not have a supported type`,"loading document failed")):this.handleMediaType=void 0}onText(t){this.handleMediaType&&this.textChunks.push(t)}requiresCustomJsonLdHandling(t){return!this.onlyFirstScript&&!this.targetScriptId&&t==="application/ld+json"}};return GE.HtmlScriptListener=n,GE}var Rle;function pMe(){if(Rle)return zE;Rle=1,Object.defineProperty(zE,"__esModule",{value:!0}),zE.ActorRdfParseHtmlScript=void 0;const a=WB(),e=De(),u=fMe();let n=class extends a.ActorRdfParseHtml{constructor(t){super(t)}async test(t){return(0,e.passTestVoid)()}async run(t){const i=(await this.mediatorRdfParseMediatypes.mediate({context:t.context,mediaTypes:!0})).mediaTypes;return{htmlParseListener:new u.HtmlScriptListener(this.mediatorRdfParseHandle,t.emit,t.error,t.end,i,t.context,t.baseIRI,t.headers)}}};return zE.ActorRdfParseHtmlScript=n,zE}var Nle;function zQ(){return Nle||(Nle=1,(function(a){var e=Eh&&Eh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Eh&&Eh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(pMe(),a)})(Eh)),Eh}var Ah={},$E={},Ile;function hMe(){if(Ile)return $E;Ile=1,Object.defineProperty($E,"__esModule",{value:!0}),$E.ActorQueryResultSerializeRdf=void 0;const a=$o(),e=De();let u=class extends a.ActorQueryResultSerialize{constructor(r){super(r)}async testHandle(r,t,i){if(r.type!=="quads")return(0,e.failTest)(`Actor ${this.name} can only handle quad streams`);const{mediaTypes:o}=await this.mediatorMediaTypeCombiner.mediate({context:i,mediaTypes:!0});return t in o?(0,e.passTestVoid)():(0,e.failTest)(`Actor ${this.name} can not handle media type ${t}. All available types: ${Object.keys(o)}`)}async runHandle(r,t,i){return(await this.mediatorRdfSerialize.mediate({context:i,handle:{context:i,quadStream:r.quadStream},handleMediaType:t})).handle}async testMediaType(r){return(0,e.passTestVoid)()}async getMediaTypes(r){return(await this.mediatorMediaTypeCombiner.mediate({context:r,mediaTypes:!0})).mediaTypes}async testMediaTypeFormats(r){return(0,e.passTestVoid)()}async getMediaTypeFormats(r){return(await this.mediatorMediaTypeFormatCombiner.mediate({context:r,mediaTypeFormats:!0})).mediaTypeFormats}};return $E.ActorQueryResultSerializeRdf=u,$E}var Dle;function GQ(){return Dle||(Dle=1,(function(a){var e=Ah&&Ah.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ah&&Ah.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(hMe(),a)})(Ah)),Ah}var Oh={},XE={},xh={},KE={},Fle;function yMe(){if(Fle)return KE;Fle=1,Object.defineProperty(KE,"__esModule",{value:!0}),KE.ActorBindingsAggregatorFactory=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n),this.mediatorExpressionEvaluatorFactory=n.mediatorExpressionEvaluatorFactory}};return KE.ActorBindingsAggregatorFactory=e,KE}var JE={},Ple;function mMe(){if(Ple)return JE;Ple=1,Object.defineProperty(JE,"__esModule",{value:!0}),JE.AggregateEvaluator=void 0;const a=lt(),e=$e(),u=$t();let n=class{constructor(t,i,o=!1){this.evaluator=t,this.distinct=i,this.throwError=o,this.errorOccurred=!1,this.errorOccurred=!1,this.superTypeProvider=t.context.getSafe(a.KeysExpressionEvaluator.superTypeProvider),this.termTransformer=new e.TermTransformer(this.superTypeProvider),this.variableValues=new Set}emptyValueTerm(){}emptyValue(){const t=this.emptyValueTerm();if(t===void 0&&this.throwError)throw new e.EmptyAggregateError;return t}async putBindings(t){if(!this.errorOccurred)try{const i=await this.evaluator.evaluate(t);if(!i||this.errorOccurred)return;(!this.distinct||!this.variableValues.has(u.termToString(i)))&&(this.putTerm(i),this.distinct&&this.variableValues.add(u.termToString(i)))}catch(i){this.safeThrow(i)}}async result(){if(!this.errorOccurred)return this.termResult()}safeThrow(t){if(this.throwError)throw t;this.errorOccurred=!0}termToNumericOrError(t){if(t.termType!=="Literal")throw new Error(`Term with value ${t.value} has type ${t.termType} and is not a numeric literal`);if(!e.isSubTypeOf(t.datatype.value,e.TypeAlias.SPARQL_NUMERIC,this.superTypeProvider))throw new Error(`Term datatype ${t.datatype.value} with value ${t.value} has type ${t.termType} and is not a numeric literal`);return this.termTransformer.transformLiteral(t)}};return JE.AggregateEvaluator=n,JE}var jle;function Ua(){return jle||(jle=1,(function(a){var e=xh&&xh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=xh&&xh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(yMe(),a),u(mMe(),a)})(xh)),xh}var WE={},Mle;function GTe(){if(Mle)return WE;Mle=1,Object.defineProperty(WE,"__esModule",{value:!0}),WE.CountAggregator=void 0;const a=Ua(),e=$e();let u=class extends a.AggregateEvaluator{constructor(r,t,i){super(r,t,i),this.state=void 0}emptyValueTerm(){return(0,e.typedLiteral)("0",e.TypeURL.XSD_INTEGER)}putTerm(r){this.state===void 0&&(this.state=0),this.state++}termResult(){return this.state===void 0?this.emptyValue():(0,e.typedLiteral)(String(this.state),e.TypeURL.XSD_INTEGER)}};return WE.CountAggregator=u,WE}var Cle;function bMe(){if(Cle)return XE;Cle=1,Object.defineProperty(XE,"__esModule",{value:!0}),XE.ActorBindingsAggregatorFactoryCount=void 0;const a=Ua(),e=De(),u=Ut(),n=GTe();let r=class extends a.ActorBindingsAggregatorFactory{constructor(i){super(i)}async test(i){return i.expr.aggregator!=="count"||i.expr.expression.expressionType===u.Algebra.expressionTypes.WILDCARD?(0,e.failTest)("This actor only supports the 'count' aggregator without wildcard."):(0,e.passTestVoid)()}async run({context:i,expr:o}){return new n.CountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:i}),o.distinct)}};return XE.ActorBindingsAggregatorFactoryCount=r,XE}var Lle;function $Q(){return Lle||(Lle=1,(function(a){var e=Oh&&Oh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Oh&&Oh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(bMe(),a),u(GTe(),a)})(Oh)),Oh}var Rh={},YE={},ZE={},qle;function $Te(){if(qle)return ZE;qle=1,Object.defineProperty(ZE,"__esModule",{value:!0}),ZE.GroupConcatAggregator=void 0;const a=Ua(),e=$e();let u=class extends a.AggregateEvaluator{constructor(r,t,i,o,l){super(r,t,l),this.dataFactory=i,this.state=void 0,this.lastLanguageValid=!0,this.lastLanguage=void 0,this.separator=o??" "}emptyValueTerm(){return e.typedLiteral("",e.TypeURL.XSD_STRING)}putTerm(r){this.state===void 0?(this.state=r.value,r.termType==="Literal"&&(this.lastLanguage=r.language)):(this.state+=this.separator+r.value,this.lastLanguageValid&&r.termType==="Literal"&&this.lastLanguage!==r.language&&(this.lastLanguageValid=!1,this.lastLanguage=void 0))}termResult(){return this.state===void 0?this.emptyValue():this.lastLanguageValid&&this.lastLanguage?e.langString(this.state,this.lastLanguage).toRDF(this.dataFactory):e.typedLiteral(this.state,e.TypeURL.XSD_STRING)}};return ZE.GroupConcatAggregator=u,ZE}var Ble;function gMe(){if(Ble)return YE;Ble=1,Object.defineProperty(YE,"__esModule",{value:!0}),YE.ActorBindingsAggregatorFactoryGroupConcat=void 0;const a=Ua(),e=lt(),u=De(),n=$Te();let r=class extends a.ActorBindingsAggregatorFactory{constructor(i){super(i)}async test(i){return i.expr.aggregator!=="group_concat"?(0,u.failTest)("This actor only supports the 'group_concat' aggregator."):(0,u.passTestVoid)()}async run({context:i,expr:o}){return new n.GroupConcatAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:i}),o.distinct,i.getSafe(e.KeysInitQuery.dataFactory),o.separator)}};return YE.ActorBindingsAggregatorFactoryGroupConcat=r,YE}var Ule;function XQ(){return Ule||(Ule=1,(function(a){var e=Rh&&Rh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Rh&&Rh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(gMe(),a),u($Te(),a)})(Rh)),Rh}var Nh={},eA={},tA={},Qle;function XTe(){if(Qle)return tA;Qle=1,Object.defineProperty(tA,"__esModule",{value:!0}),tA.SampleAggregator=void 0;const a=Ua();let e=class extends a.AggregateEvaluator{constructor(n,r,t){super(n,r,t),this.state=void 0}putTerm(n){this.state===void 0&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return tA.SampleAggregator=e,tA}var Vle;function vMe(){if(Vle)return eA;Vle=1,Object.defineProperty(eA,"__esModule",{value:!0}),eA.ActorBindingsAggregatorFactorySample=void 0;const a=Ua(),e=De(),u=XTe();let n=class extends a.ActorBindingsAggregatorFactory{constructor(t){super(t)}async test(t){return t.expr.aggregator!=="sample"?(0,e.failTest)("This actor only supports the 'sample' aggregator."):(0,e.passTestVoid)()}async run({context:t,expr:i}){return new u.SampleAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:i.expression,context:t}),i.distinct)}};return eA.ActorBindingsAggregatorFactorySample=n,eA}var Hle;function KQ(){return Hle||(Hle=1,(function(a){var e=Nh&&Nh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Nh&&Nh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(vMe(),a),u(XTe(),a)})(Nh)),Nh}var Ih={},rA={},nA={},kle;function KTe(){if(kle)return nA;kle=1,Object.defineProperty(nA,"__esModule",{value:!0}),nA.WildcardCountAggregator=void 0;const a=Ua(),e=$e(),u=$t();let n=class extends a.AggregateEvaluator{constructor(t,i,o){super(t,i,o),this.bindingValues=new Map,this.state=void 0}putTerm(t){}async putBindings(t){this.handleDistinct(t)||(this.state===void 0&&(this.state=0),this.state+=1)}emptyValueTerm(){return(0,e.typedLiteral)("0",e.TypeURL.XSD_INTEGER)}termResult(){return this.state===void 0?this.emptyValue():(0,e.typedLiteral)(String(this.state),e.TypeURL.XSD_INTEGER)}handleDistinct(t){if(this.distinct){const i=[...t];i.sort((d,f)=>d[0].value.localeCompare(f[0].value));const o=i.map(([d])=>d.value).join(","),l=i.map(([,d])=>u.termToString(d)).join(","),s=this.bindingValues.get(o),c=s!==void 0&&s.has(l);return s||this.bindingValues.set(o,new Set),this.bindingValues.get(o).add(l),c}return!1}};return nA.WildcardCountAggregator=n,nA}var zle;function _Me(){if(zle)return rA;zle=1,Object.defineProperty(rA,"__esModule",{value:!0}),rA.ActorBindingsAggregatorFactoryWildcardCount=void 0;const a=Ua(),e=De(),u=KTe();let n=class extends a.ActorBindingsAggregatorFactory{constructor(t){super(t)}async test(t){return t.expr.aggregator!=="count"||t.expr.expression.expressionType!=="wildcard"?(0,e.failTest)("This actor only supports the 'count' aggregator with wildcard."):(0,e.passTestVoid)()}async run({context:t,expr:i}){return new u.WildcardCountAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:i.expression,context:t}),i.distinct)}};return rA.ActorBindingsAggregatorFactoryWildcardCount=n,rA}var Gle;function JQ(){return Gle||(Gle=1,(function(a){var e=Ih&&Ih.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ih&&Ih.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(_Me(),a),u(KTe(),a)})(Ih)),Ih}var Dh={},aA={},iA={},$le;function JTe(){if($le)return iA;$le=1,Object.defineProperty(iA,"__esModule",{value:!0}),iA.AverageAggregator=void 0;const a=Ua(),e=$e();let u=class extends a.AggregateEvaluator{constructor(r,t,i,o,l,s){super(r,t,s),this.dataFactory=i,this.additionFunction=o,this.divisionFunction=l,this.state=void 0}emptyValueTerm(){return e.typedLiteral("0",e.TypeURL.XSD_INTEGER)}putTerm(r){if(this.state===void 0){const t=this.termToNumericOrError(r);this.state={sum:t,count:1}}else{const t=this.termToNumericOrError(r);this.state.sum=this.additionFunction.applyOnTerms([this.state.sum,t],this.evaluator),this.state.count++}}termResult(){if(this.state===void 0)return this.emptyValue();const r=new e.IntegerLiteral(this.state.count);return this.divisionFunction.applyOnTerms([this.state.sum,r],this.evaluator).toRDF(this.dataFactory)}};return iA.AverageAggregator=u,iA}var Xle;function TMe(){if(Xle)return aA;Xle=1,Object.defineProperty(aA,"__esModule",{value:!0}),aA.ActorBindingsAggregatorFactoryAverage=void 0;const a=Ua(),e=lt(),u=De(),n=$e(),r=JTe();let t=class extends a.ActorBindingsAggregatorFactory{constructor(o){super(o),this.mediatorFunctionFactory=o.mediatorFunctionFactory}async test(o){return o.expr.aggregator!=="avg"?(0,u.failTest)("This actor only supports the 'avg' aggregator."):(0,u.passTestVoid)()}async run({context:o,expr:l}){return new r.AverageAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:l.expression,context:o}),l.distinct,o.getSafe(e.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:o,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.DIVISION,context:o,requireTermExpression:!0}))}};return aA.ActorBindingsAggregatorFactoryAverage=t,aA}var Kle;function WQ(){return Kle||(Kle=1,(function(a){var e=Dh&&Dh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Dh&&Dh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(TMe(),a),u(JTe(),a)})(Dh)),Dh}var Fh={},uA={},oA={},Jle;function WTe(){if(Jle)return oA;Jle=1,Object.defineProperty(oA,"__esModule",{value:!0}),oA.SumAggregator=void 0;const a=Ua(),e=$e();let u=class extends a.AggregateEvaluator{constructor(r,t,i,o,l){super(r,t,l),this.dataFactory=i,this.additionFunction=o,this.state=void 0}emptyValueTerm(){return(0,e.typedLiteral)("0",e.TypeURL.XSD_INTEGER)}putTerm(r){if(this.state===void 0)this.state=this.termToNumericOrError(r);else{const t=this.termToNumericOrError(r);this.state=this.additionFunction.applyOnTerms([this.state,t],this.evaluator)}}termResult(){return this.state===void 0?this.emptyValue():this.state.toRDF(this.dataFactory)}};return oA.SumAggregator=u,oA}var Wle;function wMe(){if(Wle)return uA;Wle=1,Object.defineProperty(uA,"__esModule",{value:!0}),uA.ActorBindingsAggregatorFactorySum=void 0;const a=Ua(),e=lt(),u=De(),n=$e(),r=WTe();let t=class extends a.ActorBindingsAggregatorFactory{constructor(o){super(o),this.mediatorFunctionFactory=o.mediatorFunctionFactory}async test(o){return o.expr.aggregator!=="sum"?(0,u.failTest)("This actor only supports the 'sum' aggregator."):(0,u.passTestVoid)()}async run({expr:o,context:l}){return new r.SumAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:l}),o.distinct,l.getSafe(e.KeysInitQuery.dataFactory),await this.mediatorFunctionFactory.mediate({functionName:n.SparqlOperator.ADDITION,context:l,requireTermExpression:!0}))}};return uA.ActorBindingsAggregatorFactorySum=t,uA}var Yle;function YQ(){return Yle||(Yle=1,(function(a){var e=Fh&&Fh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Fh&&Fh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(wMe(),a),u(WTe(),a)})(Fh)),Fh}var Ph={},sA={},cA={},Zle;function SMe(){if(Zle)return cA;Zle=1,Object.defineProperty(cA,"__esModule",{value:!0}),cA.ExpressionFunctionIn=void 0;const a=Je(),e=$e();let u=class extends a.ExpressionFunctionBase{constructor(r){super({arity:Number.POSITIVE_INFINITY,operator:e.SparqlOperator.IN,apply:async t=>{const{args:i,mapping:o,exprEval:l}=t,[s,...c]=i,d=await l.evaluatorExpressionEvaluation(s,o);return await this.inRecursive(d,{...t,args:c},[])}}),this.equalityFunction=r}checkArity(r){return r.length>0}async inRecursive(r,t,i){const{args:o,mapping:l,exprEval:s}=t;if(o.length===0)return i.every(d=>!d)?(0,e.bool)(!1):Promise.reject(new e.InError(i));try{const c=o.shift(),d=await s.evaluatorExpressionEvaluation(c,l);return this.equalityFunction.applyOnTerms([r,d],s).typedValue?(0,e.bool)(!0):this.inRecursive(r,t,[...i,!1])}catch(c){return this.inRecursive(r,t,[...i,c])}}};return cA.ExpressionFunctionIn=u,cA}var ede;function EMe(){if(ede)return sA;ede=1,Object.defineProperty(sA,"__esModule",{value:!0}),sA.ActorFunctionFactoryExpressionIn=void 0;const a=Je(),e=$e(),u=SMe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.IN],termFunction:!1}),this.mediatorFunctionFactory=t.mediatorFunctionFactory}async run(t){const i=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,requireTermExpression:!0,context:t.context,arguments:t.arguments});return new u.ExpressionFunctionIn(i)}};return sA.ActorFunctionFactoryExpressionIn=n,sA}var tde;function ZQ(){return tde||(tde=1,(function(a){var e=Ph&&Ph.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ph&&Ph.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(EMe(),a)})(Ph)),Ph}var jh={},lA={},dA={},rde;function AMe(){if(rde)return dA;rde=1,Object.defineProperty(dA,"__esModule",{value:!0}),dA.ExpressionFunctionNotIn=void 0;const a=Je(),e=$e();let u=class extends a.ExpressionFunctionBase{constructor(r){super({arity:Number.POSITIVE_INFINITY,operator:e.SparqlOperator.NOT_IN,apply:async t=>{const i=await this.inFunction.apply(t);return(0,e.bool)(!i.typedValue)}}),this.inFunction=r}checkArity(r){return r.length>0}};return dA.ExpressionFunctionNotIn=u,dA}var nde;function OMe(){if(nde)return lA;nde=1,Object.defineProperty(lA,"__esModule",{value:!0}),lA.ActorFunctionFactoryExpressionNotIn=void 0;const a=Je(),e=$e(),u=AMe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.NOT_IN],termFunction:!1}),this.mediatorFunctionFactory=t.mediatorFunctionFactory}async run(t){const i=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.IN,context:t.context,arguments:t.arguments});return new u.ExpressionFunctionNotIn(i)}};return lA.ActorFunctionFactoryExpressionNotIn=n,lA}var ade;function eV(){return ade||(ade=1,(function(a){var e=jh&&jh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=jh&&jh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(OMe(),a)})(jh)),jh}var Mh={},fA={},pA={},ide;function xMe(){if(ide)return pA;ide=1,Object.defineProperty(pA,"__esModule",{value:!0}),pA.TermFunctionGreaterThanEqual=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(r){super({arity:2,operator:e.SparqlOperator.GTE,overloads:(0,e.declare)(e.SparqlOperator.GTE).set(["term","term"],t=>([i,o])=>this.lessThanEqualFunction.applyOnTerms([o,i],t)).collect()}),this.lessThanEqualFunction=r}};return pA.TermFunctionGreaterThanEqual=u,pA}var ude;function RMe(){if(ude)return fA;ude=1,Object.defineProperty(fA,"__esModule",{value:!0}),fA.ActorFunctionFactoryTermGreaterThanEqual=void 0;const a=Je(),e=$e(),u=xMe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.GTE],termFunction:!0}),this.mediatorFunctionFactory=t.mediatorFunctionFactory}async run(t){const i=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LTE,requireTermExpression:!0,context:t.context,arguments:t.arguments});return new u.TermFunctionGreaterThanEqual(i)}};return fA.ActorFunctionFactoryTermGreaterThanEqual=n,fA}var ode;function tV(){return ode||(ode=1,(function(a){var e=Mh&&Mh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Mh&&Mh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(RMe(),a)})(Mh)),Mh}var Ch={},hA={},yA={},sde;function NMe(){if(sde)return yA;sde=1,Object.defineProperty(yA,"__esModule",{value:!0}),yA.TermFunctionGreaterThan=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(r){super({arity:2,operator:e.SparqlOperator.GT,overloads:(0,e.declare)(e.SparqlOperator.GT).set(["term","term"],t=>([i,o])=>this.lessThanFunction.applyOnTerms([o,i],t)).collect()}),this.lessThanFunction=r}};return yA.TermFunctionGreaterThan=u,yA}var cde;function IMe(){if(cde)return hA;cde=1,Object.defineProperty(hA,"__esModule",{value:!0}),hA.ActorFunctionFactoryTermGreaterThan=void 0;const a=Je(),e=$e(),u=NMe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.GT],termFunction:!0}),this.mediatorFunctionFactory=t.mediatorFunctionFactory}async run(t){const i=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LT,requireTermExpression:!0,context:t.context,arguments:t.arguments});return new u.TermFunctionGreaterThan(i)}};return hA.ActorFunctionFactoryTermGreaterThan=n,hA}var lde;function rV(){return lde||(lde=1,(function(a){var e=Ch&&Ch.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ch&&Ch.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(IMe(),a)})(Ch)),Ch}var Lh={},mA={},bA={},dde;function DMe(){if(dde)return bA;dde=1,Object.defineProperty(bA,"__esModule",{value:!0}),bA.TermFunctionInequality=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(r){super({arity:2,operator:e.SparqlOperator.NOT_EQUAL,overloads:(0,e.declare)(e.SparqlOperator.NOT_EQUAL).set(["term","term"],t=>([i,o])=>(0,e.bool)(!this.equalityFunction.applyOnTerms([i,o],t).typedValue)).collect()}),this.equalityFunction=r}};return bA.TermFunctionInequality=u,bA}var fde;function FMe(){if(fde)return mA;fde=1,Object.defineProperty(mA,"__esModule",{value:!0}),mA.ActorFunctionFactoryTermInequality=void 0;const a=Je(),e=$e(),u=DMe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.NOT_EQUAL],termFunction:!0}),this.mediatorFunctionFactory=t.mediatorFunctionFactory}async run(t){const i=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,requireTermExpression:!0,context:t.context,arguments:t.arguments});return new u.TermFunctionInequality(i)}};return mA.ActorFunctionFactoryTermInequality=n,mA}var pde;function nV(){return pde||(pde=1,(function(a){var e=Lh&&Lh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Lh&&Lh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(FMe(),a)})(Lh)),Lh}var qh={},gA={},vA={},hde;function PMe(){if(hde)return vA;hde=1,Object.defineProperty(vA,"__esModule",{value:!0}),vA.TermFunctionLesserThan=void 0;const a=Je(),e=lt(),u=$e();let n=class extends a.TermFunctionBase{constructor(t){super({arity:2,operator:u.SparqlOperator.LT,overloads:(0,u.declare)(u.SparqlOperator.LT).numberTest(()=>(i,o)=>i<o).stringTest(()=>(i,o)=>i.localeCompare(o)===-1).booleanTest(()=>(i,o)=>i<o).dateTimeTest(i=>(o,l)=>(0,u.toUTCDate)(o,i.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,u.toUTCDate)(l,i.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()).copy({from:[u.TypeURL.XSD_DATE_TIME,u.TypeURL.XSD_DATE_TIME],to:[u.TypeURL.XSD_DATE,u.TypeURL.XSD_DATE]}).set([u.TypeURL.XSD_YEAR_MONTH_DURATION,u.TypeURL.XSD_YEAR_MONTH_DURATION],()=>([i,o])=>(0,u.bool)((0,u.yearMonthDurationsToMonths)((0,u.defaultedYearMonthDurationRepresentation)(i.typedValue))<(0,u.yearMonthDurationsToMonths)((0,u.defaultedYearMonthDurationRepresentation)(o.typedValue)))).set([u.TypeURL.XSD_DAY_TIME_DURATION,u.TypeURL.XSD_DAY_TIME_DURATION],()=>([i,o])=>(0,u.bool)((0,u.dayTimeDurationsToSeconds)((0,u.defaultedDayTimeDurationRepresentation)(i.typedValue))<(0,u.dayTimeDurationsToSeconds)((0,u.defaultedDayTimeDurationRepresentation)(o.typedValue)))).set([u.TypeURL.XSD_TIME,u.TypeURL.XSD_TIME],i=>([o,l])=>(0,u.bool)((0,u.toUTCDate)((0,u.defaultedDateTimeRepresentation)(o.typedValue),i.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime()<(0,u.toUTCDate)((0,u.defaultedDateTimeRepresentation)(l.typedValue),i.context.getSafe(e.KeysExpressionEvaluator.defaultTimeZone)).getTime())).set(["quad","quad"],i=>([o,l])=>{const s=this.quadComponentTest(o.subject,l.subject,i);if(s!==void 0)return(0,u.bool)(s);const c=this.quadComponentTest(o.predicate,l.predicate,i);if(c!==void 0)return(0,u.bool)(c);const d=this.quadComponentTest(o.object,l.object,i);return d!==void 0?(0,u.bool)(d):(0,u.bool)(this.quadComponentTest(o.graph,l.graph,i)??!1)},!1).collect()}),this.equalityFunction=t}quadComponentTest(t,i,o){return this.equalityFunction.applyOnTerms([t,i],o).typedValue?void 0:this.applyOnTerms([t,i],o).typedValue}};return vA.TermFunctionLesserThan=n,vA}var yde;function jMe(){if(yde)return gA;yde=1,Object.defineProperty(gA,"__esModule",{value:!0}),gA.ActorFunctionFactoryTermLesserThan=void 0;const a=Je(),e=$e(),u=PMe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.LT],termFunction:!0}),this.mediatorFunctionFactory=t.mediatorFunctionFactory}async run(t){const i=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,requireTermExpression:!0,context:t.context,arguments:t.arguments});return new u.TermFunctionLesserThan(i)}};return gA.ActorFunctionFactoryTermLesserThan=n,gA}var mde;function aV(){return mde||(mde=1,(function(a){var e=qh&&qh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=qh&&qh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(jMe(),a)})(qh)),qh}var Bh={},_A={},TA={},bde;function MMe(){if(bde)return TA;bde=1,Object.defineProperty(TA,"__esModule",{value:!0}),TA.TermFunctionLesserThanEqual=void 0;const a=Je(),e=$e();let u=class extends a.TermFunctionBase{constructor(r,t){super({arity:2,operator:e.SparqlOperator.LTE,overloads:(0,e.declare)(e.SparqlOperator.LTE).set(["term","term"],i=>([o,l])=>(0,e.bool)(this.lessThanFunction.applyOnTerms([o,l],i).typedValue||this.equalityFunction.applyOnTerms([o,l],i).typedValue)).collect()}),this.equalityFunction=r,this.lessThanFunction=t}};return TA.TermFunctionLesserThanEqual=u,TA}var gde;function CMe(){if(gde)return _A;gde=1,Object.defineProperty(_A,"__esModule",{value:!0}),_A.ActorFunctionFactoryTermLesserThanEqual=void 0;const a=Je(),e=$e(),u=MMe();let n=class extends a.ActorFunctionFactoryDedicated{constructor(t){super({...t,functionNames:[e.SparqlOperator.LTE],termFunction:!0}),this.mediatorFunctionFactory=t.mediatorFunctionFactory}async run(t){const i=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.EQUAL,requireTermExpression:!0,context:t.context,arguments:t.arguments}),o=await this.mediatorFunctionFactory.mediate({functionName:e.SparqlOperator.LT,requireTermExpression:!0,context:t.context,arguments:t.arguments});return new u.TermFunctionLesserThanEqual(i,o)}};return _A.ActorFunctionFactoryTermLesserThanEqual=n,_A}var vde;function iV(){return vde||(vde=1,(function(a){var e=Bh&&Bh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Bh&&Bh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(CMe(),a)})(Bh)),Bh}var Uh={},wA={},_de;function LMe(){if(_de)return wA;_de=1,Object.defineProperty(wA,"__esModule",{value:!0}),wA.ActorHttpWayback=void 0;const a=sc(),e=lt(),u=De(),n=O1(),r="http://wayback.archive-it.org/";function t(l){const s=new Request(l.input,l.init);return{input:new Request(new URL(`/${s.url}`,r),s)}}function i(l){const s=l.get(e.KeysHttpProxy.httpProxyHandler);return s?c=>s.getProxy(t(c)):c=>Promise.resolve(t(c))}let o=class extends a.ActorHttp{constructor(s){super(s)}async test(s){return(0,u.passTestVoid)()}async run(s){let c=await this.mediatorHttp.mediate(s);if(c.status===404&&s.context.get(e.KeysHttpWayback.recoverBrokenLinks)){let d=await this.mediatorHttp.mediate({...s,context:s.context.set(e.KeysHttpWayback.recoverBrokenLinks,!1).set(e.KeysHttpProxy.httpProxyHandler,{getProxy:i(s.context)})});d.status===200&&([c,d]=[d,c]);const{body:f}=d;f&&("cancel"in f&&typeof f.cancel=="function"?await f.cancel():"destroy"in f&&typeof f.destroy=="function"?f.destroy():await(0,n.stringify)(a.ActorHttp.toNodeReadable(f)))}return c}};return wA.ActorHttpWayback=o,wA}var Tde;function uV(){return Tde||(Tde=1,(function(a){var e=Uh&&Uh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Uh&&Uh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(LMe(),a)})(Uh)),Uh}var Qh={},SA={},Vh={},EA={},Hh={},AA={},IC={},wde;function eN(){return wde||(wde=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ERROR_CODES=a.ErrorCoded=void 0;class e extends Error{constructor(n,r){super(n),this.code=r}}a.ErrorCoded=e,(function(u){u.COLLIDING_KEYWORDS="colliding keywords",u.CONFLICTING_INDEXES="conflicting indexes",u.CYCLIC_IRI_MAPPING="cyclic IRI mapping",u.INVALID_ID_VALUE="invalid @id value",u.INVALID_INDEX_VALUE="invalid @index value",u.INVALID_NEST_VALUE="invalid @nest value",u.INVALID_PREFIX_VALUE="invalid @prefix value",u.INVALID_PROPAGATE_VALUE="invalid @propagate value",u.INVALID_REVERSE_VALUE="invalid @reverse value",u.INVALID_IMPORT_VALUE="invalid @import value",u.INVALID_VERSION_VALUE="invalid @version value",u.INVALID_BASE_IRI="invalid base IRI",u.INVALID_CONTAINER_MAPPING="invalid container mapping",u.INVALID_CONTEXT_ENTRY="invalid context entry",u.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",u.INVALID_DEFAULT_LANGUAGE="invalid default language",u.INVALID_INCLUDED_VALUE="invalid @included value",u.INVALID_IRI_MAPPING="invalid IRI mapping",u.INVALID_JSON_LITERAL="invalid JSON literal",u.INVALID_KEYWORD_ALIAS="invalid keyword alias",u.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",u.INVALID_LANGUAGE_MAPPING="invalid language mapping",u.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",u.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",u.INVALID_LOCAL_CONTEXT="invalid local context",u.INVALID_REMOTE_CONTEXT="invalid remote context",u.INVALID_REVERSE_PROPERTY="invalid reverse property",u.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",u.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",u.INVALID_SCOPED_CONTEXT="invalid scoped context",u.INVALID_SCRIPT_ELEMENT="invalid script element",u.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",u.INVALID_TERM_DEFINITION="invalid term definition",u.INVALID_TYPE_MAPPING="invalid type mapping",u.INVALID_TYPE_VALUE="invalid type value",u.INVALID_TYPED_VALUE="invalid typed value",u.INVALID_VALUE_OBJECT="invalid value object",u.INVALID_VALUE_OBJECT_VALUE="invalid value object value",u.INVALID_VOCAB_MAPPING="invalid vocab mapping",u.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",u.KEYWORD_REDEFINITION="keyword redefinition",u.LOADING_DOCUMENT_FAILED="loading document failed",u.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",u.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",u.PROCESSING_MODE_CONFLICT="processing mode conflict",u.PROTECTED_TERM_REDEFINITION="protected term redefinition",u.CONTEXT_OVERFLOW="context overflow",u.INVALID_BASE_DIRECTION="invalid base direction",u.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",u.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",u.INVALID_EMBEDDED_NODE="invalid embedded node",u.INVALID_ANNOTATION="invalid annotation"})(a.ERROR_CODES||(a.ERROR_CODES={}))})(IC)),IC}var OA={},Sde;function YTe(){if(Sde)return OA;Sde=1,Object.defineProperty(OA,"__esModule",{value:!0}),OA.FetchDocumentLoader=void 0;const a=eN(),e=X4(),u=Xn();class n{constructor(t){this.fetcher=t}async load(t){const i=await(this.fetcher||fetch)(t,{headers:new Headers({accept:"application/ld+json"})});if(i.ok&&i.headers){let o=i.headers.get("Content-Type");if(o){const l=o.indexOf(";");l>0&&(o=o.substr(0,l))}if(o==="application/ld+json")return await i.json();if(i.headers.has("Link")){let l;if(i.headers.forEach((s,c)=>{if(c==="link"){const d=(0,e.parse)(s);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(l)throw new Error("Multiple JSON-LD alternate links were found on "+t);l=(0,u.resolve)(f.uri,t)}}}),l)return this.load(l)}throw new a.ErrorCoded(`Unsupported JSON-LD media type ${o}`,a.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(i.statusText||`Status code: ${i.status}`)}}return OA.FetchDocumentLoader=n,OA}var DC={},xA={},Ede;function oV(){if(Ede)return xA;Ede=1,Object.defineProperty(xA,"__esModule",{value:!0}),xA.Util=void 0;class a{static isCompactIri(u){return u.indexOf(":")>0&&!(u&&u[0]==="#")}static getPrefix(u,n){if(u&&u[0]==="#")return null;const r=u.indexOf(":");if(r>=0){if(u.length>r+1&&u.charAt(r+1)==="/"&&u.charAt(r+2)==="/")return null;const t=u.substr(0,r);if(t==="_")return null;if(n[t])return t}return null}static getContextValueId(u){if(u===null||typeof u=="string")return u;const n=u["@id"];return n||null}static isSimpleTermDefinitionPrefix(u,n){return!a.isPotentialKeyword(u)&&(n.allowPrefixNonGenDelims||typeof u=="string"&&(u[0]==="_"||a.isPrefixIriEndingWithGenDelim(u)))}static isPotentialKeyword(u){return typeof u=="string"&&a.KEYWORD_REGEX.test(u)}static isPrefixIriEndingWithGenDelim(u){return a.ENDS_WITH_GEN_DELIM.test(u)}static isPrefixValue(u){return u&&(typeof u=="string"||u&&typeof u=="object")}static isValidIri(u){return!!(u&&a.IRI_REGEX.test(u))}static isValidIriWeak(u){return!!u&&u[0]!==":"&&a.IRI_REGEX_WEAK.test(u)}static isValidKeyword(u){return a.VALID_KEYWORDS[u]}static isTermProtected(u,n){const r=u[n];return typeof r!="string"&&r&&r["@protected"]}static hasProtectedTerms(u){for(const n of Object.keys(u))if(a.isTermProtected(u,n))return!0;return!1}static isReservedInternalKeyword(u){return u.startsWith("@__")}static deepEqual(u,n){const r=Object.keys(u),t=Object.keys(n);return r.length!==t.length?!1:r.every(i=>{const o=u[i],l=n[i];return o===l||o!==null&&l!==null&&typeof o=="object"&&typeof l=="object"&&this.deepEqual(o,l)})}}return a.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,a.IRI_REGEX_WEAK=/(?::[^:])|\//,a.KEYWORD_REGEX=/^@[a-z]+$/i,a.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,a.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,a.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,a.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},a.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],a.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],a.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],a.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],a.CONTAINERS_1_0=["@list","@set","@index"],xA.Util=a,xA}var Ade;function ZTe(){return Ade||(Ade=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.defaultExpandOptions=a.JsonLdContextNormalized=void 0;const e=Xn(),u=eN(),n=oV();class r{constructor(i){this.contextRaw=i}getContextRaw(){return this.contextRaw}expandTerm(i,o,l=a.defaultExpandOptions){const s=this.contextRaw[i];if(s===null||s&&s["@id"]===null)return null;let c=!0;if(s&&o){const v=n.Util.getContextValueId(s);if(v&&v!==i)if(typeof v!="string"||!n.Util.isValidIri(v)&&!n.Util.isValidKeyword(v))n.Util.isPotentialKeyword(v)||(c=!1);else return v}const d=n.Util.getPrefix(i,this.contextRaw),f=this.contextRaw["@vocab"],p=(!!f||f==="")&&f.indexOf(":")<0,h=this.contextRaw["@base"],g=n.Util.isPotentialKeyword(i);if(d){const v=this.contextRaw[d],m=n.Util.getContextValueId(v);if(m){if(typeof v=="string"||!l.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(m,l))return i}else if(m[0]!=="_"&&!g&&!v["@prefix"]&&!(i in this.contextRaw))return i;return m+i.substr(d.length+1)}}else if(o&&(f||f===""||l.allowVocabRelativeToBase&&h&&p)&&!g&&!n.Util.isCompactIri(i))if(p){if(l.allowVocabRelativeToBase)return(f||h?(0,e.resolve)(f,h):"")+i;throw new u.ErrorCoded(`Relative vocab expansion for term '${i}' with vocab '${f}' is not allowed.`,u.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+i;else if(!o&&h&&!g&&!n.Util.isCompactIri(i))return(0,e.resolve)(i,h);if(c)return i;throw new u.ErrorCoded(`Invalid IRI mapping found for context entry '${i}': '${JSON.stringify(s)}'`,u.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(i,o){if(o&&this.contextRaw["@vocab"]&&i.startsWith(this.contextRaw["@vocab"]))return i.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&i.startsWith(this.contextRaw["@base"]))return i.substr(this.contextRaw["@base"].length);const l={prefix:"",suffix:i};for(const s in this.contextRaw){const c=this.contextRaw[s];if(c&&!n.Util.isPotentialKeyword(s)){const d=n.Util.getContextValueId(c);if(i.startsWith(d)){const f=i.substr(d.length);if(f)f.length<l.suffix.length&&(l.prefix=s,l.suffix=f);else if(o)return s}}}return l.prefix?l.prefix+":"+l.suffix:i}}a.JsonLdContextNormalized=r,a.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(DC)),DC}var Ode;function qMe(){if(Ode)return AA;Ode=1,Object.defineProperty(AA,"__esModule",{value:!0}),AA.ContextParser=void 0;const a=Xn(),e=eN(),u=YTe(),n=ZTe(),r=oV();class t{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new u.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,l,s){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,s);if(!r.Util.REGEX_LANGUAGE_TAG.test(o)){if(l)throw new e.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,s);return!1}return!0}static validateDirection(o,l){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);if(!r.Util.REGEX_DIRECTION_TAG.test(o)){if(l)throw new e.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const l of Object.keys(o)){let s=o[l];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||r.Util.isValidKeyword(s["@reverse"]))throw new e.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);s=o[l]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],r.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return o}expandPrefixedTerms(o,l,s){const c=o.getContextRaw();for(const d of s||Object.keys(c))if(r.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!r.Util.isReservedInternalKeyword(d)){const f=c[d];if(r.Util.isPotentialKeyword(d)&&r.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof c[d]=="object"&&!(c[d]["@protected"]||c[d]["@container"]==="@set")))throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.KEYWORD_REDEFINITION);if(r.Util.ALIAS_RANGE_BLACKLIST.indexOf(r.Util.getContextValueId(f))>=0)throw new e.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&r.Util.isPotentialKeyword(r.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new e.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);for(;r.Util.isPrefixValue(c[d]);){const p=c[d];let h=!1;if(typeof p=="string")c[d]=o.expandTerm(p,!0),h=h||p!==c[d];else{const g=p["@id"],v=p["@type"],m=!("@prefix"in p)||r.Util.isValidIri(d);if("@id"in p)g!=null&&typeof g=="string"&&(c[d]=Object.assign(Object.assign({},c[d]),{"@id":o.expandTerm(g,!0)}),h=h||g!==c[d]["@id"]);else if(!r.Util.isPotentialKeyword(d)&&m){const T=o.expandTerm(d,!0);T!==d&&(c[d]=Object.assign(Object.assign({},c[d]),{"@id":T}),h=!0)}if(v&&typeof v=="string"&&v!=="@vocab"&&(!p["@container"]||!p["@container"]["@type"])&&m){let T=o.expandTerm(v,!0);l&&v===T&&(T=o.expandTerm(v,!1)),T!==v&&(h=!0,c[d]=Object.assign(Object.assign({},c[d]),{"@type":T}))}}if(!h)break}}}normalize(o,{processingMode:l,normalizeLanguageTags:s}){if(s||l===1)for(const c of Object.keys(o))if(c==="@language"&&typeof o[c]=="string")o[c]=o[c].toLowerCase();else{const d=o[c];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[c]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const l of Object.keys(o)){const s=o[l];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")o[l]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const c={};for(const d of s["@container"])c[d]=!0;o[l]=Object.assign(Object.assign({},s),{"@container":c})}}}}applyScopedProtected(o,{processingMode:l},s){if(l&&l>=1.1&&o["@protected"]){for(const c of Object.keys(o))if(!r.Util.isReservedInternalKeyword(c)&&!r.Util.isPotentialKeyword(c)&&!r.Util.isTermProtected(o,c)){const d=o[c];d&&typeof d=="object"?"@protected"in o[c]||(o[c]=Object.assign(Object.assign({},o[c]),{"@protected":!0})):(o[c]={"@id":d,"@protected":!0},r.Util.isSimpleTermDefinitionPrefix(d,s)&&(o[c]=Object.assign(Object.assign({},o[c]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,l,s,c){for(const d of c??Object.keys(l))if(r.Util.isTermProtected(o,d)&&(typeof l[d]=="string"?l[d]={"@id":l[d],"@protected":!0}:l[d]=Object.assign(Object.assign({},l[d]),{"@protected":!0}),!r.Util.deepEqual(o[d],l[d])))throw new e.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(r.Util.getContextValueId(o[d]))} to ${JSON.stringify(r.Util.getContextValueId(l[d]))}`,e.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:l}){for(const s of Object.keys(o)){if(r.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new e.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(o[s])}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);const c=o[s],d=typeof c;if(r.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(c!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @vocab IRI: ${c}`,e.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(c!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @base IRI: ${o[s]}`,e.ERROR_CODES.INVALID_BASE_IRI);break;case"language":c!==null&&t.validateLanguage(c,!0,e.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(c!==null&&d!=="number")throw new e.ErrorCoded(`Found an invalid @version number: ${c}`,e.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":c!==null&&t.validateDirection(c,!0);break;case"propagate":if(l===1)throw new e.ErrorCoded(`Found an illegal @propagate keyword: ${c}`,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(c!==null&&d!=="boolean")throw new e.ErrorCoded(`Found an invalid @propagate value: ${c}`,e.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(r.Util.isValidKeyword(s)&&r.Util.isValidKeyword(r.Util.getContextValueId(c)))throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${r.Util.getContextValueId(c)}'`,e.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(c!==null)switch(d){case"string":if(r.Util.getPrefix(c,o)===s)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(c==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${c}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(c)&&c!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${c}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!r.Util.isCompactIri(s)&&!("@id"in c)&&(c["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new e.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(c)){const p=c[f];if(p)switch(f){case"@id":if(r.Util.isValidKeyword(p)&&p!=="@type"&&p!=="@id"&&p!=="@graph"&&p!=="@nest")throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(p==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(p)&&p!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof p!="string")throw new e.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.getPrefix(p,o)===s)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(c["@container"]==="@type"&&p!=="@id"&&p!=="@vocab")throw new e.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${p}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof p!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(p!=="@id"&&p!=="@vocab"&&(l===1||p!=="@json")&&(l===1||p!=="@none")&&(p[0]==="_"||!r.Util.isValidIri(p)))throw new e.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${p}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof p=="string"&&c["@id"]&&c["@id"]!==p)throw new e.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${p}' and '${c["@id"]}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in c)throw new e.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(l===1&&(Object.keys(p).length>1||r.Util.CONTAINERS_1_0.indexOf(Object.keys(p)[0])<0))throw new e.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(p)}') in 1.0, must be only one of ${r.Util.CONTAINERS_1_0.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const h of Object.keys(p)){if(h==="@list"&&c["@reverse"])throw new e.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(r.Util.CONTAINERS.indexOf(h)<0)throw new e.ErrorCoded(`Invalid term @container for '${s}' ('${h}'), must be one of ${r.Util.CONTAINERS.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":t.validateLanguage(p,!0,e.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":t.validateDirection(p,!0);break;case"@prefix":if(p!==null&&typeof p!="boolean")throw new e.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in c)&&!r.Util.isValidIri(s))throw new e.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(l===1||!c["@container"]||!c["@container"]["@index"])throw new e.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(r.Util.isPotentialKeyword(p)&&p!=="@nest")throw new e.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new e.ErrorCoded(`Found an invalid term value: '${s}': '${c}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,l,s){return typeof o=="string"||(s&&!("@base"in o)&&l.parentContext&&typeof l.parentContext=="object"&&"@base"in l.parentContext&&(o["@base"]=l.parentContext["@base"],l.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),l.baseIRI&&!l.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!r.Util.isValidIri(o["@base"])&&(o["@base"]=(0,a.resolve)(o["@base"],l.parentContext&&l.parentContext["@base"]||l.baseIRI)):(o["@base"]=l.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,l){if(!r.Util.isValidIri(o))try{o=(0,a.resolve)(o,l)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,l,s){for(const c of s??Object.keys(o)){const d=o[c];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!l.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[c]:Object.assign({},o[c])});delete f[c]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},l),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new e.ErrorCoded(f.message,e.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[c]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},l),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,l={},s={}){const{baseIRI:c,parentContext:d,external:f,processingMode:p=t.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:h,ignoreProtection:g,minimalProcessing:v}=l,m=l.remoteContexts||{};if(Object.keys(m).length>=this.remoteContextsDepthLimit)throw new e.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(m),e.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!g&&d&&r.Util.hasProtectedTerms(d))throw new e.ErrorCoded("Illegal context nullification when terms are protected",e.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},l,!1))}else if(typeof o=="string"){const T=this.normalizeContextIri(o,c),w=this.getOverriddenLoad(T,l);if(w)return new n.JsonLdContextNormalized(w);const E=await this.parse(await this.load(T),Object.assign(Object.assign({},l),{baseIRI:T,external:!0,remoteContexts:Object.assign(Object.assign({},m),{[T]:!0})}));return this.applyBaseEntry(E.getContextRaw(),l,!0),E}else if(Array.isArray(o)){const T=[],w=await Promise.all(o.map((S,N)=>{if(typeof S=="string"){const j=this.normalizeContextIri(S,c);T[N]=j;const q=this.getOverriddenLoad(j,l);return q||this.load(j)}else return S}));if(v)return new n.JsonLdContextNormalized(w);const E=await w.reduce((S,N,j)=>S.then(q=>this.parse(N,Object.assign(Object.assign({},l),{baseIRI:T[j]||l.baseIRI,external:!!T[j]||l.external,parentContext:q.getContextRaw(),remoteContexts:T[j]?Object.assign(Object.assign({},m),{[T[j]]:!0}):m}),{skipValidation:j<w.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(E.getContextRaw(),l,!0),E}else if(typeof o=="object"){if("@context"in o)return await this.parse(o["@context"],l);if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,l,!0),this.containersToHash(o),v)return new n.JsonLdContextNormalized(o);let T={};if("@import"in o)if(p>=1.1){if(typeof o["@import"]!="string")throw new e.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],e.ERROR_CODES.INVALID_IMPORT_VALUE);T=await this.loadImportContext(this.normalizeContextIri(o["@import"],c)),delete o["@import"]}else throw new e.ErrorCoded("Context importing is not supported in JSON-LD 1.0",e.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(T,{processingMode:p},n.defaultExpandOptions);const w=Object.assign(T,o);this.idifyReverseTerms(w),this.normalize(w,{processingMode:p,normalizeLanguageTags:h}),this.applyScopedProtected(w,{processingMode:p},n.defaultExpandOptions);const E=Object.keys(w),S=[];if(typeof d=="object")for(const j in d)j in w?S.push(j):w[j]=d[j];await this.parseInnerContexts(w,l,E);const N=new n.JsonLdContextNormalized(w);return(w&&w["@version"]||t.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?w["@vocab"]=d["@vocab"]+o["@vocab"]:(r.Util.isCompactIri(o["@vocab"])||o["@vocab"]in w)&&(w["@vocab"]=N.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(N,this.expandContentTypeToBase,E),!g&&d&&p>=1.1&&this.validateKeywordRedefinitions(d,w,n.defaultExpandOptions,S),this.validateContext&&!s.skipValidation&&this.validate(w,{processingMode:p}),N}else throw new e.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,e.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const l=this.documentCache[o];if(l)return l;let s;try{s=await this.documentLoader.load(o)}catch(c){throw new e.ErrorCoded(`Failed to load remote context ${o}: ${c.message}`,e.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new e.ErrorCoded(`Missing @context in remote context at ${o}`,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=s["@context"]}getOverriddenLoad(o,l){if(o in(l.remoteContexts||{})){if(l.ignoreRemoteScopedContexts)return o;throw new e.ErrorCoded("Detected a cyclic context inclusion of "+o,e.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let l=await this.load(o);if(typeof l!="object"||Array.isArray(l))throw new e.ErrorCoded("An imported context must be a single object: "+o,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in l)throw new e.ErrorCoded("An imported context can not import another context: "+o,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);return l=Object.assign({},l),this.containersToHash(l),l}}return t.DEFAULT_PROCESSING_MODE=1.1,AA.ContextParser=t,AA}var FC={},xde;function BMe(){return xde||(xde=1,Object.defineProperty(FC,"__esModule",{value:!0})),FC}var PC={},Rde;function UMe(){return Rde||(Rde=1,Object.defineProperty(PC,"__esModule",{value:!0})),PC}var Nde;function vi(){return Nde||(Nde=1,(function(a){var e=Hh&&Hh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Hh&&Hh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(qMe(),a),u(eN(),a),u(YTe(),a),u(BMe(),a),u(UMe(),a),u(ZTe(),a),u(oV(),a)})(Hh)),Hh}var RA={},NA={},IA={},DA={},Ide;function QMe(){if(Ide)return DA;Ide=1,Object.defineProperty(DA,"__esModule",{value:!0}),DA.ContainerHandlerIdentifier=void 0;let a=class{canCombineWithGraph(){return!0}async handle(u,n,r,t,i,o){let l;if(n.emittedStack[o+1]&&n.idStack[o+1])l=n.idStack[o+1][0];else{const d=await r.getContainerKey(t[o],t,o)!==null?await r.resourceToTerm(await n.getContext(t),t[o]):r.dataFactory.blankNode();if(!d){n.emittedStack[o]=!1;return}l=d,n.idStack[o+1]=[l]}let s=n.idStack[o];s||(s=n.idStack[o]=[]),s.some(c=>c.equals(l))||s.push(l),await n.handlePendingContainerFlushBuffers()||(n.emittedStack[o]=!1)}};return DA.ContainerHandlerIdentifier=a,DA}var FA={},PA={},Dde;function AP(){if(Dde)return PA;Dde=1,Object.defineProperty(PA,"__esModule",{value:!0}),PA.EntryHandlerPredicate=void 0;const a=vi(),e=Ab();let u=class e3e{static async handlePredicateObject(r,t,i,o,l,s,c,d,f){const p=await t.getPropertiesDepth(i,o),h=await t.getDepthOffsetGraph(o,i),g=o-h,v=r.idStack[p];if(v&&!f)for(const m of v)if(h>=0){const w=r.idStack[g-1];if(w)for(const E of w)t.emitQuadChecked(o,m,l,s,E,c,d);else c?(t.validateReverseSubject(s),r.getUnidentifiedGraphBufferSafe(g-1).push({subject:s,predicate:l,object:m,isEmbedded:d})):r.getUnidentifiedGraphBufferSafe(g-1).push({subject:m,predicate:l,object:s,isEmbedded:d})}else{const w=await t.getGraphContainerValue(i,p);t.emitQuadChecked(o,m,l,s,w,c,d)}else if(c&&t.validateReverseSubject(s),f){if(r.rdfstar){r.idStack[o]&&r.emitError(new a.ErrorCoded(`Found an illegal @id inside an annotation: ${r.idStack[o][0].value}`,a.ERROR_CODES.INVALID_ANNOTATION));for(let w=0;w<o;w++)await t.unaliasKeyword(i[w],i,w)==="@id"&&r.emitError(new a.ErrorCoded("Found an illegal annotation inside an embedded node",a.ERROR_CODES.INVALID_ANNOTATION));const m=r.getAnnotationsBufferSafe(p),T={predicate:l,object:s,reverse:c,nestedAnnotations:[],depth:p};m.push(T);for(let w=m.length-2;w>=0;w--){const E=m[w];E.depth>p&&(T.nestedAnnotations.push(E),m.splice(w,1))}}}else r.getUnidentifiedValueBufferSafe(p).push({predicate:l,object:s,reverse:c,isEmbedded:d})}isPropertyHandler(){return!0}isStackProcessor(){return!0}async validate(r,t,i,o,l){const s=i[o];if(s){const c=await r.getContext(i);if(!r.jsonLiteralStack[o]&&await t.predicateToTerm(c,i[o]))return e.Util.getContextValueType(c,s)==="@json"&&(r.jsonLiteralStack[o+1]=!0),!0}return!1}async test(r,t,i,o,l){return o[l]}async handle(r,t,i,o,l,s,c){const d=o[s],f=await r.getContext(o),p=await t.predicateToTerm(f,i);if(p){const h=await t.valueToTerm(f,i,l,s,o);if(h.length)for(let g of h){let v=await t.unaliasKeywordParent(o,s);const m=e.Util.isPropertyReverse(f,d,v);let T=0;for(;v==="@reverse"||typeof v=="number";)typeof v=="number"?T++:s--,v=await t.unaliasKeywordParent(o,s-T);const w=e.Util.isPropertyInEmbeddedNode(v);t.validateReverseInEmbeddedNode(i,m,w);const E=e.Util.isPropertyInAnnotationObject(v);if(l){const S="@list"in e.Util.getContextValueContainer(f,i);if(S||l["@list"]){if((S&&!Array.isArray(l)&&!l["@list"]||l["@list"]&&!Array.isArray(l["@list"]))&&g!==t.rdfNil){const N=t.dataFactory.blankNode();r.emitQuad(s,t.dataFactory.quad(N,t.rdfRest,t.rdfNil,t.getDefaultGraph())),r.emitQuad(s,t.dataFactory.quad(N,t.rdfFirst,g,t.getDefaultGraph())),g=N}if(m&&!r.allowSubjectList)throw new a.ErrorCoded(`Found illegal list value in subject position at ${i}`,a.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}}await e3e.handlePredicateObject(r,t,o,s,p,g,m,w,E)}}}};return PA.EntryHandlerPredicate=u,PA}var Fde;function VMe(){if(Fde)return FA;Fde=1,Object.defineProperty(FA,"__esModule",{value:!0}),FA.ContainerHandlerIndex=void 0;const a=vi(),e=AP(),u=Ab();let n=class{canCombineWithGraph(){return!0}async handle(t,i,o,l,s,c){if(!Array.isArray(s)){const d="@graph"in t,f=await i.getContext(l),p=l[c-1],h=u.Util.getContextValueIndex(f,p);if(h){if(a.Util.isPotentialKeyword(h))throw new a.ErrorCoded(`Keywords can not be used as @index value, got: ${h}`,a.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof h!="string")throw new a.ErrorCoded(`@index values must be strings, got: ${h}`,a.ERROR_CODES.INVALID_TERM_DEFINITION);if(typeof s!="object"){if(u.Util.getContextValueType(f,p)!=="@id")throw new a.ErrorCoded(`Property-based index containers require nodes as values or strings with @type: @id, but got: ${s}`,a.ERROR_CODES.INVALID_VALUE_OBJECT);const m=o.resourceToTerm(f,s);m&&(i.idStack[c+1]=[m])}const v=o.createVocabOrBaseTerm(f,h);if(v){const m=await o.valueToTerm(f,h,await o.getContainerKey(l[c],l,c),c,l);if(d){const T=await o.getGraphContainerValue(l,c+1);for(const w of m)i.emitQuad(c,o.dataFactory.quad(T,v,w,o.getDefaultGraph()))}else for(const T of m)await e.EntryHandlerPredicate.handlePredicateObject(i,o,l,c+1,v,T,!1,!1,!1)}}const g=d?2:1;await i.newOnValueJob(l.slice(0,l.length-g),s,c-g,!0),await i.handlePendingContainerFlushBuffers()}i.emittedStack[c]=!1}};return FA.ContainerHandlerIndex=n,FA}var jA={},Pde;function HMe(){if(Pde)return jA;Pde=1,Object.defineProperty(jA,"__esModule",{value:!0}),jA.ContainerHandlerLanguage=void 0;const a=vi();let e=class{canCombineWithGraph(){return!1}async handle(n,r,t,i,o,l){const s=await t.getContainerKey(i[l],i,l);if(Array.isArray(o))o=o.map(c=>({"@value":c,"@language":s}));else{if(typeof o!="string")throw new a.ErrorCoded(`Got invalid language map value, got '${JSON.stringify(o)}', but expected string`,a.ERROR_CODES.INVALID_LANGUAGE_MAP_VALUE);o={"@value":o,"@language":s}}await r.newOnValueJob(i.slice(0,i.length-1),o,l-1,!0),r.emittedStack[l]=!1}};return jA.ContainerHandlerLanguage=e,jA}var MA={},jde;function kMe(){if(jde)return MA;jde=1,Object.defineProperty(MA,"__esModule",{value:!0}),MA.ContainerHandlerType=void 0;const a=AP(),e=Ab();let u=class{canCombineWithGraph(){return!1}async handle(r,t,i,o,l,s){if(!Array.isArray(l)){if(typeof l=="string"){const f=await t.getContext(o),h=e.Util.getContextValueType(f,o[s-1])==="@vocab"?await i.createVocabOrBaseTerm(f,l):await i.resourceToTerm(f,l);if(h){const g={"@id":h.termType==="NamedNode"?h.value:l};await t.newOnValueJob(o.slice(0,o.length-1),g,s-1,!0),t.idStack[s+1]=[h]}}else{const f=!!t.idStack[s+1];f||delete t.idStack[s],await t.newOnValueJob(o.slice(0,o.length-1),l,s-1,!0),f||(t.idStack[s+1]=t.idStack[s])}const c=await i.getContainerKey(o[s],o,s),d=c!==null?i.createVocabOrBaseTerm(await t.getContext(o),c):null;d&&await a.EntryHandlerPredicate.handlePredicateObject(t,i,o,s+1,i.rdfType,d,!1,!1,!1),await t.handlePendingContainerFlushBuffers()}t.emittedStack[s]=!1}};return MA.ContainerHandlerType=u,MA}var Mde;function t3e(){if(Mde)return IA;Mde=1,Object.defineProperty(IA,"__esModule",{value:!0}),IA.EntryHandlerContainer=void 0;const a=QMe(),e=VMe(),u=HMe(),n=kMe(),r=Ab();let t=class Wc{static isSimpleGraphContainer(o){return"@graph"in o&&("@set"in o&&Object.keys(o).length===2||Object.keys(o).length===1)}static isComplexGraphContainer(o){return"@graph"in o&&("@set"in o&&Object.keys(o).length>2||!("@set"in o)&&Object.keys(o).length>1)}static getContainerGraphIndex(o,l,s){let c=Wc.isSimpleGraphContainer(o),d="";for(let f=l;f<s.length;f++)(!c||typeof s[f]=="number")&&(d+=":"+s[f]),!c&&typeof s[f]!="number"&&(c=!0);return d}static async getContainerHandler(o,l,s){const c={containers:{"@set":!0},depth:s,fallback:!0};let d=!1;const f=await o.getContext(l,2);for(let p=s-1;p>=0;p--)if(typeof l[p]!="number"){const h=r.Util.getContextValue(f,"@container",l[p],!1);if(h&&Wc.isSimpleGraphContainer(h))return{containers:h,depth:p+1,fallback:!1};const g=r.Util.getContextValue(f,"@container",l[p-1],!1);if(g){const v="@graph"in g;for(const m in Wc.CONTAINER_HANDLERS)if(g[m])return v?Wc.CONTAINER_HANDLERS[m].canCombineWithGraph()?{containers:g,depth:p,fallback:!1}:c:d?c:{containers:g,depth:p,fallback:!1};return c}else{if(d)return c;d=!0}}return c}static async isBufferableContainerHandler(o,l,s){const c=await Wc.getContainerHandler(o,l,s);return!c.fallback&&!("@graph"in c.containers)}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(o,l,s,c,d){return!!await this.test(o,l,null,s,c)}async test(o,l,s,c,d){const f=r.Util.getContextValueContainer(await o.getContext(c,2),c[d-1]);for(const p in Wc.CONTAINER_HANDLERS)if(f[p])return{containers:f,handler:Wc.CONTAINER_HANDLERS[p]};return null}async handle(o,l,s,c,d,f,p){return p.handler.handle(p.containers,o,l,c,d,f)}};return t.CONTAINER_HANDLERS={"@id":new a.ContainerHandlerIdentifier,"@index":new e.ContainerHandlerIndex,"@language":new u.ContainerHandlerLanguage,"@type":new n.ContainerHandlerType},IA.EntryHandlerContainer=t,IA}var jC,Cde;function zMe(){return Cde||(Cde=1,jC=function a(e){return e===null||typeof e!="object"||e.toJSON!=null?JSON.stringify(e):Array.isArray(e)?"["+e.reduce((u,n,r)=>{const t=r===0?"":",",i=n===void 0||typeof n=="symbol"?null:n;return u+t+a(i)},"")+"]":"{"+Object.keys(e).sort().reduce((u,n,r)=>{if(e[n]===void 0||typeof e[n]=="symbol")return u;const t=u.length===0?"":",";return u+t+a(n)+":"+a(e[n])},"")+"}"}),jC}var Lde;function Ab(){if(Lde)return NA;Lde=1,Object.defineProperty(NA,"__esModule",{value:!0}),NA.Util=void 0;const a=vi(),e=Rr(),u=t3e(),n=zMe();class r{constructor(i){this.parsingContext=i.parsingContext,this.dataFactory=i.dataFactory||new e.DataFactory,this.rdfFirst=this.dataFactory.namedNode(r.RDF+"first"),this.rdfRest=this.dataFactory.namedNode(r.RDF+"rest"),this.rdfNil=this.dataFactory.namedNode(r.RDF+"nil"),this.rdfType=this.dataFactory.namedNode(r.RDF+"type"),this.rdfJson=this.dataFactory.namedNode(r.RDF+"JSON")}static getContextValue(i,o,l,s){const c=i.getContextRaw()[l];if(!c)return s;const d=c[o];return d===void 0?s:d}static getContextValueContainer(i,o){return r.getContextValue(i,"@container",o,{"@set":!0})}static getContextValueType(i,o){const l=r.getContextValue(i,"@type",o,null);return l==="@none"?null:l}static getContextValueLanguage(i,o){return r.getContextValue(i,"@language",o,i.getContextRaw()["@language"]||null)}static getContextValueDirection(i,o){return r.getContextValue(i,"@direction",o,i.getContextRaw()["@direction"]||null)}static isContextValueReverse(i,o){return!!r.getContextValue(i,"@reverse",o,null)}static getContextValueIndex(i,o){return r.getContextValue(i,"@index",o,i.getContextRaw()["@index"]||null)}static isPropertyReverse(i,o,l){return l==="@reverse"!==r.isContextValueReverse(i,o)}static isPropertyInEmbeddedNode(i){return i==="@id"}static isPropertyInAnnotationObject(i){return i==="@annotation"}static isValidIri(i){return i!==null&&a.Util.isValidIri(i)}static isPrefixArray(i,o){if(i.length>o.length)return!1;for(let l=0;l<i.length;l++)if(i[l]!==o[l])return!1;return!0}async validateValueIndexes(i){if(this.parsingContext.validateValueIndexes){const o={};for(const l of i)if(l&&typeof l=="object"){const s=l["@id"],c=l["@index"];if(s&&c){const d=o[s];if(d&&d!==c)throw new a.ErrorCoded(`Conflicting @index value for ${s}`,a.ERROR_CODES.CONFLICTING_INDEXES);o[s]=c}}}}async valueToTerm(i,o,l,s,c){if(r.getContextValueType(i,o)==="@json")return[this.dataFactory.literal(this.valueToJsonString(l),this.rdfJson)];const d=typeof l;switch(d){case"object":if(l==null)return[];if(Array.isArray(l))return"@list"in r.getContextValueContainer(i,o)?l.length===0?[this.rdfNil]:this.parsingContext.idStack[s+1]||[]:(await this.validateValueIndexes(l),[]);if(i=await this.getContextSelfOrPropertyScoped(i,o),"@context"in l&&(i=await this.parsingContext.parseContext(l["@context"],(await this.parsingContext.getContext(c,0)).getContextRaw())),l=await this.unaliasKeywords(l,c,s,i),"@value"in l){let f,p,h,g,v;for(o in l){const m=l[o];switch(o){case"@value":f=m;break;case"@language":p=m;break;case"@direction":h=m;break;case"@type":g=m;break;case"@index":v=m;break;case"@annotation":break;default:throw new a.ErrorCoded(`Unknown value entry '${o}' in @value: ${JSON.stringify(l)}`,a.ERROR_CODES.INVALID_VALUE_OBJECT)}}if(await this.unaliasKeyword(g,c,s,!0,i)==="@json")return[this.dataFactory.literal(this.valueToJsonString(f),this.rdfJson)];if(f===null)return[];if(typeof f=="object")throw new a.ErrorCoded(`The value of an '@value' can not be an object, got '${JSON.stringify(f)}'`,a.ERROR_CODES.INVALID_VALUE_OBJECT_VALUE);if(this.parsingContext.validateValueIndexes&&v&&typeof v!="string")throw new a.ErrorCoded(`The value of an '@index' must be a string, got '${JSON.stringify(v)}'`,a.ERROR_CODES.INVALID_INDEX_VALUE);if(p){if(typeof f!="string")throw new a.ErrorCoded(`When an '@language' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`,a.ERROR_CODES.INVALID_LANGUAGE_TAGGED_VALUE);if(!a.ContextParser.validateLanguage(p,this.parsingContext.strictValues,a.ERROR_CODES.INVALID_LANGUAGE_TAGGED_STRING))return[];(this.parsingContext.normalizeLanguageTags||this.parsingContext.activeProcessingMode===1)&&(p=p.toLowerCase())}if(h){if(typeof f!="string")throw new Error(`When an '@direction' is set, the value of '@value' must be a string, got '${JSON.stringify(f)}'`);if(!a.ContextParser.validateDirection(h,this.parsingContext.strictValues))return[]}if(p&&h&&this.parsingContext.rdfDirection){if(g)throw new a.ErrorCoded(`Can not have '@language', '@direction' and '@type' in a value: '${JSON.stringify(l)}'`,a.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(s,f,p,h))}else if(p){if(g)throw new a.ErrorCoded(`Can not have both '@language' and '@type' in a value: '${JSON.stringify(l)}'`,a.ERROR_CODES.INVALID_VALUE_OBJECT);return[this.dataFactory.literal(f,p)]}else if(h&&this.parsingContext.rdfDirection){if(g)throw new a.ErrorCoded(`Can not have both '@direction' and '@type' in a value: '${JSON.stringify(l)}'`,a.ERROR_CODES.INVALID_VALUE_OBJECT);return this.nullableTermToArray(this.createLanguageDirectionLiteral(s,f,p,h))}else if(g){if(typeof g!="string")throw new a.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(g)}'`,a.ERROR_CODES.INVALID_TYPED_VALUE);const m=this.createVocabOrBaseTerm(i,g);if(!m)throw new a.ErrorCoded(`Invalid '@type' value, got '${JSON.stringify(g)}'`,a.ERROR_CODES.INVALID_TYPED_VALUE);if(m.termType!=="NamedNode")throw new a.ErrorCoded(`Illegal value type (${m.termType}): ${g}`,a.ERROR_CODES.INVALID_TYPED_VALUE);return[this.dataFactory.literal(f,m)]}return await this.valueToTerm(new a.JsonLdContextNormalized({}),o,f,s,c)}else if("@set"in l){if(Object.keys(l).length>1)throw new a.ErrorCoded(`Found illegal neighbouring entries next to @set for key: '${o}'`,a.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);return[]}else if("@list"in l){if(Object.keys(l).length>1)throw new a.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${o}'`,a.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT);const f=l["@list"];return Array.isArray(f)?f.length===0?[this.rdfNil]:this.parsingContext.idStack[s+1]||[]:await this.valueToTerm(await this.parsingContext.getContext(c),o,f,s-1,c.slice(0,-1))}else{if("@reverse"in l&&typeof l["@reverse"]=="boolean")return[];if("@graph"in r.getContextValueContainer(await this.parsingContext.getContext(c),o)){const f=this.parsingContext.graphContainerTermStack[s+1];return f?Object.values(f):[this.dataFactory.blankNode()]}else if("@id"in l){if(Object.keys(l).length>1&&(i=await this.parsingContext.getContext(c,0)),"@context"in l&&(i=await this.parsingContext.parseContext(l["@context"],i.getContextRaw())),l["@type"]==="@vocab")return this.nullableTermToArray(this.createVocabOrBaseTerm(i,l["@id"]));{const f=l["@id"];let p;if(typeof f=="object")if(this.parsingContext.rdfstar)p=this.parsingContext.idStack[s+1][0];else throw new a.ErrorCoded(`Found illegal @id '${l}'`,a.ERROR_CODES.INVALID_ID_VALUE);else p=this.resourceToTerm(i,f);return this.nullableTermToArray(p)}}else return this.parsingContext.emittedStack[s+1]||l&&typeof l=="object"&&Object.keys(l).length===0?this.parsingContext.idStack[s+1]||(this.parsingContext.idStack[s+1]=[this.dataFactory.blankNode()]):[]}case"string":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(i,o),o,l,null));case"boolean":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(i,o),o,(!!l).toString(),this.dataFactory.namedNode(r.XSD_BOOLEAN)));case"number":return this.nullableTermToArray(this.stringValueToTerm(s,await this.getContextSelfOrPropertyScoped(i,o),o,l,this.dataFactory.namedNode(l%1===0&&l<1e21?r.XSD_INTEGER:r.XSD_DOUBLE)));default:return this.parsingContext.emitError(new Error(`Could not determine the RDF type of a ${d}`)),[]}}async getContextSelfOrPropertyScoped(i,o){const l=i.getContextRaw()[o];return l&&typeof l=="object"&&"@context"in l&&(i=await this.parsingContext.parseContext(l,i.getContextRaw(),!0)),i}nullableTermToArray(i){return i?[i]:[]}predicateToTerm(i,o){const l=i.expandTerm(o,!0,this.parsingContext.getExpandOptions());if(!l)return null;if(l[0]==="_"&&l[1]===":")return this.parsingContext.produceGeneralizedRdf?this.dataFactory.blankNode(l.substr(2)):null;if(r.isValidIri(l))return this.dataFactory.namedNode(l);if(l&&this.parsingContext.strictValues)this.parsingContext.emitError(new a.ErrorCoded(`Invalid predicate IRI: ${l}`,a.ERROR_CODES.INVALID_IRI_MAPPING));else return null;return null}resourceToTerm(i,o){if(o.startsWith("_:"))return this.dataFactory.blankNode(o.substr(2));const l=i.expandTerm(o,!1,this.parsingContext.getExpandOptions());if(!r.isValidIri(l))if(l&&this.parsingContext.strictValues)this.parsingContext.emitError(new Error(`Invalid resource IRI: ${l}`));else return null;return this.dataFactory.namedNode(l)}createVocabOrBaseTerm(i,o){if(o.startsWith("_:"))return this.dataFactory.blankNode(o.substr(2));const l=this.parsingContext.getExpandOptions();let s=i.expandTerm(o,!0,l);if(s===o&&(s=i.expandTerm(o,!1,l)),!r.isValidIri(s))if(s&&this.parsingContext.strictValues&&!s.startsWith("@"))this.parsingContext.emitError(new Error(`Invalid term IRI: ${s}`));else return null;return this.dataFactory.namedNode(s)}intToString(i,o){return typeof i=="number"?Number.isFinite(i)?i%1===0&&(!o||o.value!==r.XSD_DOUBLE)?Number(i).toString():i.toExponential(15).replace(/(\d)0*e\+?/,"$1E"):i>0?"INF":"-INF":i}stringValueToTerm(i,o,l,s,c){const d=r.getContextValueType(o,l);if(d)if(d==="@id"){if(!c)return this.resourceToTerm(o,this.intToString(s,c))}else if(d==="@vocab"){if(!c)return this.createVocabOrBaseTerm(o,this.intToString(s,c))}else c=this.dataFactory.namedNode(d);if(!c){const f=r.getContextValueLanguage(o,l),p=r.getContextValueDirection(o,l);return p&&this.parsingContext.rdfDirection?this.createLanguageDirectionLiteral(i,this.intToString(s,c),f,p):this.dataFactory.literal(this.intToString(s,c),f)}return this.dataFactory.literal(this.intToString(s,c),c)}createLanguageDirectionLiteral(i,o,l,s){if(this.parsingContext.rdfDirection==="i18n-datatype")return l||(l=""),this.dataFactory.literal(o,this.dataFactory.namedNode(`https://www.w3.org/ns/i18n#${l}_${s}`));{const c=this.dataFactory.blankNode(),d=this.getDefaultGraph();return this.parsingContext.emitQuad(i,this.dataFactory.quad(c,this.dataFactory.namedNode(r.RDF+"value"),this.dataFactory.literal(o),d)),l&&this.parsingContext.emitQuad(i,this.dataFactory.quad(c,this.dataFactory.namedNode(r.RDF+"language"),this.dataFactory.literal(l),d)),this.parsingContext.emitQuad(i,this.dataFactory.quad(c,this.dataFactory.namedNode(r.RDF+"direction"),this.dataFactory.literal(s),d)),c}}valueToJsonString(i){return n(i)}async unaliasKeyword(i,o,l,s,c){if(Number.isInteger(i))return i;if(!s){const d=this.parsingContext.unaliasedKeywordCacheStack[l];if(d)return d}if(!a.Util.isPotentialKeyword(i)){c=c||await this.parsingContext.getContext(o);let d=c.getContextRaw()[i];d&&typeof d=="object"&&(d=d["@id"]),a.Util.isValidKeyword(d)&&(i=d)}return s?i:this.parsingContext.unaliasedKeywordCacheStack[l]=i}async unaliasKeywordParent(i,o){return await this.unaliasKeyword(o>0&&i[o-1],i,o-1)}async unaliasKeywords(i,o,l,s){const c={};for(const d in i)c[await this.unaliasKeyword(d,o,l+1,!0,s)]=i[d];return c}async isLiteral(i,o){for(let l=o;l>=0;l--){if(await this.unaliasKeyword(i[l],i,l)==="@annotation")return!1;if(this.parsingContext.literalStack[l]||this.parsingContext.jsonLiteralStack[l])return!0}return!1}async getDepthOffsetGraph(i,o){for(let l=i-1;l>0;l--)if(await this.unaliasKeyword(o[l],o,l)==="@graph"){const s=(await u.EntryHandlerContainer.getContainerHandler(this.parsingContext,o,l)).containers;return u.EntryHandlerContainer.isComplexGraphContainer(s)?-1:i-l-1}return-1}validateReverseSubject(i){if(i.termType==="Literal")throw new a.ErrorCoded(`Found illegal literal in subject position: ${i.value}`,a.ERROR_CODES.INVALID_REVERSE_PROPERTY_VALUE)}getDefaultGraph(){return this.parsingContext.defaultGraph||this.dataFactory.defaultGraph()}async getGraphContainerValue(i,o){let l=this.getDefaultGraph();const{containers:s,depth:c}=await u.EntryHandlerContainer.getContainerHandler(this.parsingContext,i,o);if("@graph"in s){const d=u.EntryHandlerContainer.getContainerGraphIndex(s,c,i),f=this.parsingContext.graphContainerTermStack[c];if(l=f?f[d]:null,!l){let p=null;if("@id"in s){const h=await this.getContainerKey(i[c],i,c);h!==null&&(p=await this.resourceToTerm(await this.parsingContext.getContext(i),h))}p||(p=this.dataFactory.blankNode()),this.parsingContext.graphContainerTermStack[c]||(this.parsingContext.graphContainerTermStack[c]={}),l=this.parsingContext.graphContainerTermStack[c][d]=p}}return l}async getPropertiesDepth(i,o){let l=o;for(let s=o-1;s>0;s--)if(typeof i[s]!="number"){const c=await this.unaliasKeyword(i[s],i,s);if(c==="@reverse")return s;if(c==="@nest")l=s;else return l}return l}async getContainerKey(i,o,l){const s=await this.unaliasKeyword(i,o,l);return s==="@none"?null:s}validateReverseInEmbeddedNode(i,o,l){if(l&&o&&!this.parsingContext.rdfstarReverseInEmbedded)throw new a.ErrorCoded(`Illegal reverse property in embedded node in ${i}`,a.ERROR_CODES.INVALID_EMBEDDED_NODE)}emitQuadChecked(i,o,l,s,c,d,f){let p;if(d?(this.validateReverseSubject(s),p=this.dataFactory.quad(s,l,o,c)):p=this.dataFactory.quad(o,l,s,c),f){if(p.graph.termType!=="DefaultGraph"&&(p=this.dataFactory.quad(p.subject,p.predicate,p.object)),this.parsingContext.idStack[i-1])throw new a.ErrorCoded("Illegal multiple properties in an embedded node",a.ERROR_CODES.INVALID_EMBEDDED_NODE);this.parsingContext.idStack[i-1]=[p]}else this.parsingContext.emitQuad(i,p);const h=this.parsingContext.annotationsBuffer[i];if(h){for(const g of h)this.emitAnnotation(i,p,g);delete this.parsingContext.annotationsBuffer[i]}}emitAnnotation(i,o,l){let s;l.reverse?(this.validateReverseSubject(l.object),s=this.dataFactory.quad(l.object,l.predicate,o)):s=this.dataFactory.quad(o,l.predicate,l.object),this.parsingContext.emitQuad(i,s);for(const c of l.nestedAnnotations)this.emitAnnotation(i,s,c)}}return r.XSD="http://www.w3.org/2001/XMLSchema#",r.XSD_BOOLEAN=r.XSD+"boolean",r.XSD_INTEGER=r.XSD+"integer",r.XSD_DOUBLE=r.XSD+"double",r.RDF="http://www.w3.org/1999/02/22-rdf-syntax-ns#",NA.Util=r,NA}var qde;function GMe(){if(qde)return RA;qde=1,Object.defineProperty(RA,"__esModule",{value:!0}),RA.EntryHandlerArrayValue=void 0;const a=Ab(),e=vi();let u=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(r,t,i,o,l){return this.test(r,t,null,i,o)}async test(r,t,i,o,l){return typeof o[l]=="number"}async handle(r,t,i,o,l,s){let c=await t.unaliasKeywordParent(o,s);if(c==="@list"){let d=null,f=0;for(let p=s-2;p>0;p--){const h=o[p];if(typeof h=="string"||typeof h=="number"){f=p,d=h;break}}if(d!==null){const p=await t.valueToTerm(await r.getContext(o),d,l,s,o);for(const h of p)await this.handleListElement(r,t,h,l,s,o.slice(0,f),f);p.length===0&&await this.handleListElement(r,t,null,l,s,o.slice(0,f),f)}}else if(c==="@set")await r.newOnValueJob(o.slice(0,-2),l,s-2,!1);else if(c!==void 0&&c!=="@type"){for(let f=s-1;f>0;f--)if(typeof o[f]!="number"){c=await t.unaliasKeyword(o[f],o,f);break}const d=await r.getContext(o.slice(0,-1));if("@list"in a.Util.getContextValueContainer(d,c)){r.emittedStack[s+1]=!0;const f=await t.valueToTerm(await r.getContext(o),c,l,s,o);for(const p of f)await this.handleListElement(r,t,p,l,s,o.slice(0,-1),s-1);f.length===0&&await this.handleListElement(r,t,null,l,s,o.slice(0,-1),s-1)}else r.shiftStack(s,1),await r.newOnValueJob(o.slice(0,-1),l,s-1,!1),r.contextTree.removeContext(o.slice(0,-1))}}async handleListElement(r,t,i,o,l,s,c){let d=r.listPointerStack[l];if(o!==null&&(await t.unaliasKeywords(o,s,l))["@value"]!==null){if(!d||!d.value){const f=t.dataFactory.blankNode();d={value:f,listRootDepth:c,listId:f}}else{const f=t.dataFactory.blankNode();r.emitQuad(l,t.dataFactory.quad(d.value,t.rdfRest,f,t.getDefaultGraph())),d.value=f}i&&r.emitQuad(l,t.dataFactory.quad(d.value,t.rdfFirst,i,t.getDefaultGraph()))}else d||(d={listRootDepth:c,listId:t.rdfNil});r.listPointerStack[l]=d,r.rdfstar&&r.annotationsBuffer[l]&&r.emitError(new e.ErrorCoded("Found an illegal annotation inside a list",e.ERROR_CODES.INVALID_ANNOTATION))}};return RA.EntryHandlerArrayValue=u,RA}var CA={},Bde;function $Me(){if(Bde)return CA;Bde=1,Object.defineProperty(CA,"__esModule",{value:!0}),CA.EntryHandlerInvalidFallback=void 0;let a=class{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(u,n,r,t,i){return!1}async test(u,n,r,t,i){return!0}async handle(u,n,r,t,i,o){u.emittedStack[o]=!1}};return CA.EntryHandlerInvalidFallback=a,CA}var LA={},qA={},Ude;function Sl(){if(Ude)return qA;Ude=1,Object.defineProperty(qA,"__esModule",{value:!0}),qA.EntryHandlerKeyword=void 0;let a=class{constructor(u){this.keyword=u}isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(u,n,r,t,i){return!1}async test(u,n,r,t,i){return r===this.keyword}};return qA.EntryHandlerKeyword=a,qA}var Qde;function XMe(){if(Qde)return LA;Qde=1,Object.defineProperty(LA,"__esModule",{value:!0}),LA.EntryHandlerKeywordContext=void 0;const a=vi(),e=Sl();let u=class extends e.EntryHandlerKeyword{constructor(){super("@context")}isStackProcessor(){return!1}async handle(r,t,i,o,l,s){r.streamingProfile&&(r.processingStack[s]||r.processingType[s]||r.idStack[s]!==void 0)&&r.emitError(new a.ErrorCoded("Found an out-of-order context, while streaming is enabled.(disable `streamingProfile`)",a.ERROR_CODES.INVALID_STREAMING_KEY_ORDER));const c=r.getContext(o),d=r.parseContext(l,(await c).getContextRaw());r.contextTree.setContext(o.slice(0,-1),d),r.emitContext(l),await r.validateContext(await d)}};return LA.EntryHandlerKeywordContext=u,LA}var BA={},Vde;function KMe(){if(Vde)return BA;Vde=1,Object.defineProperty(BA,"__esModule",{value:!0}),BA.EntryHandlerKeywordGraph=void 0;const a=Sl();let e=class extends a.EntryHandlerKeyword{constructor(){super("@graph")}async handle(n,r,t,i,o,l){n.graphStack[l+1]=!0}};return BA.EntryHandlerKeywordGraph=e,BA}var UA={},Hde;function JMe(){if(Hde)return UA;Hde=1,Object.defineProperty(UA,"__esModule",{value:!0}),UA.EntryHandlerKeywordId=void 0;const a=vi(),e=Sl();let u=class extends e.EntryHandlerKeyword{constructor(){super("@id")}isStackProcessor(){return!1}async handle(r,t,i,o,l,s){if(typeof l!="string"){if(r.rdfstar&&typeof l=="object"){const d=Object.keys(l);d.length===1&&d[0]==="@id"&&r.emitError(new a.ErrorCoded(`Invalid embedded node without property with @id ${l["@id"]}`,a.ERROR_CODES.INVALID_EMBEDDED_NODE))}else r.emitError(new a.ErrorCoded(`Found illegal @id '${l}'`,a.ERROR_CODES.INVALID_ID_VALUE));return}const c=await t.getPropertiesDepth(o,s);if(r.idStack[c]!==void 0&&(r.idStack[c][0].listHead?r.emitError(new a.ErrorCoded(`Found illegal neighbouring entries next to @list for key: '${o[s-1]}'`,a.ERROR_CODES.INVALID_SET_OR_LIST_OBJECT)):r.emitError(new a.ErrorCoded(`Found duplicate @ids '${r.idStack[c][0].value}' and '${l}'`,a.ERROR_CODES.COLLIDING_KEYWORDS))),r.rdfstar&&r.annotationsBuffer[s])for(const d of r.annotationsBuffer[s])d.depth===s&&r.emitError(new a.ErrorCoded(`Found an illegal @id inside an annotation: ${l}`,a.ERROR_CODES.INVALID_ANNOTATION));r.idStack[c]=t.nullableTermToArray(await t.resourceToTerm(await r.getContext(o),l))}};return UA.EntryHandlerKeywordId=u,UA}var QA={},kde;function WMe(){if(kde)return QA;kde=1,Object.defineProperty(QA,"__esModule",{value:!0}),QA.EntryHandlerKeywordIncluded=void 0;const a=vi(),e=Sl();let u=class extends e.EntryHandlerKeyword{constructor(){super("@included")}async handle(r,t,i,o,l,s){typeof l!="object"&&r.emitError(new a.ErrorCoded(`Found illegal @included '${l}'`,a.ERROR_CODES.INVALID_INCLUDED_VALUE));const c=await t.unaliasKeywords(l,o,s,await r.getContext(o));"@value"in c&&r.emitError(new a.ErrorCoded(`Found an illegal @included @value node '${JSON.stringify(l)}'`,a.ERROR_CODES.INVALID_INCLUDED_VALUE)),"@list"in c&&r.emitError(new a.ErrorCoded(`Found an illegal @included @list node '${JSON.stringify(l)}'`,a.ERROR_CODES.INVALID_INCLUDED_VALUE)),r.emittedStack[s]=!1}};return QA.EntryHandlerKeywordIncluded=u,QA}var VA={},zde;function YMe(){if(zde)return VA;zde=1,Object.defineProperty(VA,"__esModule",{value:!0}),VA.EntryHandlerKeywordNest=void 0;const a=vi(),e=Sl();let u=class extends e.EntryHandlerKeyword{constructor(){super("@nest")}async handle(r,t,i,o,l,s){typeof l!="object"&&r.emitError(new a.ErrorCoded(`Found invalid @nest entry for '${i}': '${l}'`,a.ERROR_CODES.INVALID_NEST_VALUE)),"@value"in await t.unaliasKeywords(l,o,s,await r.getContext(o))&&r.emitError(new a.ErrorCoded(`Found an invalid @value node for '${i}'`,a.ERROR_CODES.INVALID_NEST_VALUE)),r.emittedStack[s]=!1}};return VA.EntryHandlerKeywordNest=u,VA}var HA={},Gde;function ZMe(){if(Gde)return HA;Gde=1,Object.defineProperty(HA,"__esModule",{value:!0}),HA.EntryHandlerKeywordType=void 0;const a=vi(),e=Ab(),u=AP(),n=Sl();let r=class extends n.EntryHandlerKeyword{constructor(){super("@type")}isStackProcessor(){return!1}async handle(i,o,l,s,c,d){const f=s[d],p=await i.getContext(s),h=o.rdfType,g=await o.unaliasKeywordParent(s,d),v=e.Util.isPropertyReverse(p,f,g),m=e.Util.isPropertyInEmbeddedNode(g);o.validateReverseInEmbeddedNode(l,v,m);const T=e.Util.isPropertyInAnnotationObject(g),w=Array.isArray(c)?c:[c];for(const N of w){typeof N!="string"&&i.emitError(new a.ErrorCoded(`Found illegal @type '${N}'`,a.ERROR_CODES.INVALID_TYPE_VALUE));const j=o.createVocabOrBaseTerm(p,N);j&&await u.EntryHandlerPredicate.handlePredicateObject(i,o,s,d,h,j,v,m,T)}let E=Promise.resolve(p),S=!1;for(const N of w.sort()){const j=e.Util.getContextValue(p,"@context",N,null);j&&(S=!0,E=E.then(q=>i.parseContext(j,q.getContextRaw())))}i.streamingProfile&&(S||!i.streamingProfileAllowOutOfOrderPlainType)&&(i.processingStack[d]||i.idStack[d])&&i.emitError(new a.ErrorCoded("Found an out-of-order type-scoped context, while streaming is enabled.(disable `streamingProfile`)",a.ERROR_CODES.INVALID_STREAMING_KEY_ORDER)),S&&(E=E.then(N=>N.getContextRaw()["@propagate"]!==!0?new a.JsonLdContextNormalized(Object.assign(Object.assign({},N.getContextRaw()),{"@propagate":!1,"@__propagateFallback":p.getContextRaw()})):N),i.contextTree.setContext(s.slice(0,s.length-1),E)),i.processingType[d]=!0}};return HA.EntryHandlerKeywordType=r,HA}var kA={},$de;function eCe(){if($de)return kA;$de=1,Object.defineProperty(kA,"__esModule",{value:!0}),kA.EntryHandlerKeywordUnknownFallback=void 0;const a=vi();let e=class r3e{isPropertyHandler(){return!1}isStackProcessor(){return!0}async validate(n,r,t,i,o){const l=await r.unaliasKeyword(t[i],t,i);return a.Util.isPotentialKeyword(l)?!(!o&&l==="@list"):!1}async test(n,r,t,i,o){return a.Util.isPotentialKeyword(t)}async handle(n,r,t,i,o,l){const s=r3e.VALID_KEYWORDS_TYPES[t];s!==void 0?s&&typeof o!==s.type&&n.emitError(new a.ErrorCoded(`Invalid value type for '${t}' with value '${o}'`,s.errorCode)):n.strictValues&&n.emitError(new Error(`Unknown keyword '${t}' with value '${o}'`)),n.emittedStack[l]=!1}};return e.VALID_KEYWORDS_TYPES={"@index":{type:"string",errorCode:a.ERROR_CODES.INVALID_INDEX_VALUE},"@list":null,"@reverse":{type:"object",errorCode:a.ERROR_CODES.INVALID_REVERSE_VALUE},"@set":null,"@value":null},kA.EntryHandlerKeywordUnknownFallback=e,kA}var zA={},Xde;function tCe(){if(Xde)return zA;Xde=1,Object.defineProperty(zA,"__esModule",{value:!0}),zA.EntryHandlerKeywordValue=void 0;const a=Sl();let e=class extends a.EntryHandlerKeyword{constructor(){super("@value")}async validate(n,r,t,i,o){const l=t[i];return l&&!n.literalStack[i]&&await this.test(n,r,l,t,i)&&(n.literalStack[i]=!0),super.validate(n,r,t,i,o)}async test(n,r,t,i,o){return await r.unaliasKeyword(i[o],i.slice(0,i.length-1),o-1,!0)==="@value"}async handle(n,r,t,i,o,l){n.literalStack[l]=!0,delete n.unidentifiedValuesBuffer[l],delete n.unidentifiedGraphsBuffer[l],n.emittedStack[l]=!1}};return zA.EntryHandlerKeywordValue=e,zA}var GA={},$A={},Kde;function rCe(){if(Kde)return $A;Kde=1,Object.defineProperty($A,"__esModule",{value:!0}),$A.ContextTree=void 0;let a=class n3e{constructor(){this.subTrees={}}getContext(u){if(u.length>0){const[n,...r]=u,t=this.subTrees[n];if(t){const i=t.getContext(r);if(i)return i.then(({context:o,depth:l})=>({context:o,depth:l+1}))}}return this.context?this.context.then(n=>({context:n,depth:0})):null}setContext(u,n){if(u.length===0)this.context=n;else{const[r,...t]=u;let i=this.subTrees[r];i||(i=this.subTrees[r]=new n3e),i.setContext(t,n)}}removeContext(u){this.setContext(u,null)}};return $A.ContextTree=a,$A}var Jde;function nCe(){if(Jde)return GA;Jde=1,Object.defineProperty(GA,"__esModule",{value:!0}),GA.ParsingContext=void 0;const a=vi(),e=eN(),u=rCe(),n=i3e();let r=class a3e{constructor(i){this.contextParser=new a.ContextParser({documentLoader:i.documentLoader,skipValidation:i.skipContextValidation}),this.streamingProfile=!!i.streamingProfile,this.baseIRI=i.baseIRI,this.produceGeneralizedRdf=!!i.produceGeneralizedRdf,this.allowSubjectList=!!i.allowSubjectList,this.processingMode=i.processingMode||n.JsonLdParser.DEFAULT_PROCESSING_MODE,this.strictValues=!!i.strictValues,this.validateValueIndexes=!!i.validateValueIndexes,this.defaultGraph=i.defaultGraph,this.rdfDirection=i.rdfDirection,this.normalizeLanguageTags=i.normalizeLanguageTags,this.streamingProfileAllowOutOfOrderPlainType=i.streamingProfileAllowOutOfOrderPlainType,this.rdfstar=i.rdfstar!==!1,this.rdfstarReverseInEmbedded=i.rdfstarReverseInEmbedded,this.topLevelProperties=!1,this.activeProcessingMode=parseFloat(this.processingMode),this.processingStack=[],this.processingType=[],this.emittedStack=[],this.idStack=[],this.graphStack=[],this.graphContainerTermStack=[],this.listPointerStack=[],this.contextTree=new u.ContextTree,this.literalStack=[],this.validationStack=[],this.unaliasedKeywordCacheStack=[],this.jsonLiteralStack=[],this.unidentifiedValuesBuffer=[],this.unidentifiedGraphsBuffer=[],this.annotationsBuffer=[],this.pendingContainerFlushBuffers=[],this.parser=i.parser,i.context?(this.rootContext=this.parseContext(i.context),this.rootContext.then(o=>this.validateContext(o))):this.rootContext=Promise.resolve(new a.JsonLdContextNormalized(this.baseIRI?{"@base":this.baseIRI,"@__baseDocument":!0}:{}))}async parseContext(i,o,l){return this.contextParser.parse(i,{baseIRI:this.baseIRI,ignoreProtection:l,normalizeLanguageTags:this.normalizeLanguageTags,parentContext:o,processingMode:this.activeProcessingMode})}validateContext(i){const o=i.getContextRaw()["@version"];if(o){if(this.activeProcessingMode&&o>this.activeProcessingMode)throw new e.ErrorCoded(`Unsupported JSON-LD version '${o}' under active processing mode ${this.activeProcessingMode}.`,e.ERROR_CODES.PROCESSING_MODE_CONFLICT);if(this.activeProcessingMode&&o<this.activeProcessingMode)throw new e.ErrorCoded(`Invalid JSON-LD version ${o} under active processing mode ${this.activeProcessingMode}.`,e.ERROR_CODES.INVALID_VERSION_VALUE);this.activeProcessingMode=o}}async getContext(i,o=1){const l=i;for(;typeof i[i.length-1]=="number";)i=i.slice(0,i.length-1);o&&(i=i.slice(0,-o));const s=await this.getContextPropagationAware(i);let d=s.context.getContextRaw();for(let f=s.depth;f<l.length-o;f++){const p=l[f],h=d[p];if(h&&typeof h=="object"&&"@context"in h){const g=(await this.parseContext(h,d,!0)).getContextRaw(),v=!(p in g)||g[p]["@context"]["@propagate"];(v!==!1||f===l.length-1-o)&&(d=Object.assign({},g),delete d["@propagate"],d[p]=Object.assign({},d[p]),"@id"in h&&(d[p]["@id"]=h["@id"]),delete d[p]["@context"],v!==!1&&this.contextTree.setContext(l.slice(0,f+o),Promise.resolve(new a.JsonLdContextNormalized(d))))}}return new a.JsonLdContextNormalized(d)}async getContextPropagationAware(i){const o=i.length;let l=null,s;do{s=!1,l&&"@__propagateFallback"in l.context.getContextRaw()?l.context=new a.JsonLdContextNormalized(l.context.getContextRaw()["@__propagateFallback"]):(l&&(i=i.slice(0,l.depth-1)),l=await this.contextTree.getContext(i)||{context:await this.rootContext,depth:0});const c=i[i.length-1];if(c in l.context.getContextRaw()){const d=l.context.getContextRaw()[c];d&&typeof d=="object"&&"@context"in d&&(s=!0)}}while(l.depth>0&&l.context.getContextRaw()["@propagate"]===!1&&l.depth!==o&&!s);return l.depth===0&&l.context.getContextRaw()["@propagate"]===!1&&l.depth!==o&&(l.context=new a.JsonLdContextNormalized({})),l}async newOnValueJob(i,o,l,s){await this.parser.newOnValueJob(i,o,l,s)}async handlePendingContainerFlushBuffers(){if(this.pendingContainerFlushBuffers.length>0){for(const i of this.pendingContainerFlushBuffers)await this.parser.flushBuffer(i.depth,i.keys),this.parser.flushStacks(i.depth);return this.pendingContainerFlushBuffers.splice(0,this.pendingContainerFlushBuffers.length),!0}else return!1}emitQuad(i,o){i===1&&(this.topLevelProperties=!0),this.parser.push(o)}emitError(i){this.parser.emit("error",i)}emitContext(i){this.parser.emit("context",i)}getUnidentifiedValueBufferSafe(i){let o=this.unidentifiedValuesBuffer[i];return o||(o=[],this.unidentifiedValuesBuffer[i]=o),o}getUnidentifiedGraphBufferSafe(i){let o=this.unidentifiedGraphsBuffer[i];return o||(o=[],this.unidentifiedGraphsBuffer[i]=o),o}getAnnotationsBufferSafe(i){let o=this.annotationsBuffer[i];return o||(o=[],this.annotationsBuffer[i]=o),o}getExpandOptions(){return a3e.EXPAND_OPTIONS[this.activeProcessingMode]}shiftStack(i,o){const l=this.idStack[i+o];if(l&&(this.idStack[i]=l,this.emittedStack[i]=!0,delete this.idStack[i+o]),this.pendingContainerFlushBuffers.length)for(const s of this.pendingContainerFlushBuffers)s.depth>=i+o&&(s.depth-=o,s.keys.splice(i,o));this.unidentifiedValuesBuffer[i+o]&&(this.unidentifiedValuesBuffer[i]=this.unidentifiedValuesBuffer[i+o],delete this.unidentifiedValuesBuffer[i+o]),this.annotationsBuffer[i+o-1]&&(this.annotationsBuffer[i-1]||(this.annotationsBuffer[i-1]=[]),this.annotationsBuffer[i-1]=[...this.annotationsBuffer[i-1],...this.annotationsBuffer[i+o-1]],delete this.annotationsBuffer[i+o-1])}};return r.EXPAND_OPTIONS={1:{allowPrefixForcing:!1,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!1},1.1:{allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}},GA.ParsingContext=r,GA}var XA={},Wde;function aCe(){if(Wde)return XA;Wde=1,Object.defineProperty(XA,"__esModule",{value:!0}),XA.EntryHandlerKeywordAnnotation=void 0;const a=Sl(),e=vi();let u=class extends a.EntryHandlerKeyword{constructor(){super("@annotation")}async handle(r,t,i,o,l,s){(typeof l=="string"||typeof l=="object"&&l["@value"])&&r.emitError(new e.ErrorCoded(`Found illegal annotation value: ${JSON.stringify(l)}`,e.ERROR_CODES.INVALID_ANNOTATION))}};return XA.EntryHandlerKeywordAnnotation=u,XA}var Yde;function i3e(){if(Yde)return EA;Yde=1,Object.defineProperty(EA,"__esModule",{value:!0}),EA.JsonLdParser=void 0;const a=gB(),e=vi(),u=Nr(),n=GMe(),r=t3e(),t=$Me(),i=AP(),o=XMe(),l=KMe(),s=JMe(),c=WMe(),d=YMe(),f=ZMe(),p=eCe(),h=tCe(),g=nCe(),v=Ab(),m=X4(),T=aCe();let w=class Pg extends u.Transform{constructor(S){super({readableObjectMode:!0}),S=S||{},this.options=S,this.parsingContext=new g.ParsingContext(Object.assign({parser:this},S)),this.util=new v.Util({dataFactory:S.dataFactory,parsingContext:this.parsingContext}),this.jsonParser=new a,this.contextJobs=[],this.typeJobs=[],this.contextAwaitingJobs=[],this.lastDepth=0,this.lastKeys=[],this.lastOnValueJob=Promise.resolve(),this.attachJsonParserListeners(),this.on("end",()=>{typeof this.jsonParser.mode<"u"&&this.emit("error",new Error("Unclosed document"))})}static fromHttpResponse(S,N,j,q){let O,I=["application/activity+json"];if(q&&q.wellKnownMediaTypes&&(I=q.wellKnownMediaTypes),N!=="application/ld+json"&&!I.includes(N)){if(N!=="application/json"&&!N.endsWith("+json"))throw new e.ErrorCoded(`Unsupported JSON-LD media type ${N}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED);if(j&&j.has("Link")&&j.forEach((P,C)=>{if(C==="link"){const B=(0,m.parse)(P);for(const H of B.get("rel","http://www.w3.org/ns/json-ld#context")){if(O)throw new e.ErrorCoded("Multiple JSON-LD context link headers were found on "+S,e.ERROR_CODES.MULTIPLE_CONTEXT_LINK_HEADERS);O=H.uri}}}),!O&&!q?.ignoreMissingContextLinkHeader)throw new e.ErrorCoded(`Missing context link header for media type ${N} on ${S}`,e.ERROR_CODES.LOADING_DOCUMENT_FAILED)}let A;if(j&&j.has("Content-Type")){const P=j.get("Content-Type"),C=/; *profile=([^"]*)/.exec(P);C&&C[1]==="http://www.w3.org/ns/json-ld#streaming"&&(A=!0)}return new Pg(Object.assign({baseIRI:S,context:O,streamingProfile:A},q||{}))}import(S){if("pipe"in S){S.on("error",j=>N.emit("error",j));const N=S.pipe(new Pg(this.options));return N}else{const N=new u.PassThrough({readableObjectMode:!0});S.on("error",q=>j.emit("error",q)),S.on("data",q=>N.push(q)),S.on("end",()=>N.push(null));const j=N.pipe(new Pg(this.options));return j}}_transform(S,N,j){this.jsonParser.write(S),this.lastOnValueJob.then(()=>j(),q=>j(q))}async newOnValueJob(S,N,j,q){let O=!0;if(q&&j<this.lastDepth){const B=this.parsingContext.listPointerStack[this.lastDepth];B&&(B.value&&this.push(this.util.dataFactory.quad(B.value,this.util.rdfRest,this.util.rdfNil,this.util.getDefaultGraph())),B.listId.listHead=!0,this.parsingContext.idStack[B.listRootDepth+1]=[B.listId],this.parsingContext.listPointerStack.splice(this.lastDepth,1)),await r.EntryHandlerContainer.isBufferableContainerHandler(this.parsingContext,this.lastKeys,this.lastDepth)?(this.parsingContext.pendingContainerFlushBuffers.push({depth:this.lastDepth,keys:this.lastKeys.slice(0,this.lastKeys.length)}),O=!1):await this.flushBuffer(this.lastDepth,this.lastKeys)}const I=await this.util.unaliasKeyword(S[j],S,j),A=await this.util.unaliasKeywordParent(S,j);this.parsingContext.emittedStack[j]=!0;let P=!0;e.Util.isValidKeyword(I)&&A==="@reverse"&&I!=="@context"&&this.emit("error",new e.ErrorCoded(`Found the @id '${N}' inside an @reverse property`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY_MAP));let C=!1;this.parsingContext.validationStack.length>1&&(C=this.parsingContext.validationStack[this.parsingContext.validationStack.length-1].property);for(let B=Math.max(1,this.parsingContext.validationStack.length-1);B<S.length-1;B++){const H=this.parsingContext.validationStack[B]||(this.parsingContext.validationStack[B]=await this.validateKey(S.slice(0,B+1),B,C));if(H.valid)!C&&H.property&&(C=!0);else{this.parsingContext.emittedStack[j]=!1,P=!1;break}}if(await this.util.isLiteral(S,j)&&(P=!1),P)for(const B of Pg.ENTRY_HANDLERS){const H=await B.test(this.parsingContext,this.util,I,S,j);if(H){await B.handle(this.parsingContext,this.util,I,S,N,j,H),B.isStackProcessor()&&(this.parsingContext.processingStack[j]=!0);break}}j===0&&Array.isArray(N)&&await this.util.validateValueIndexes(N),O&&j<this.lastDepth&&this.flushStacks(this.lastDepth),this.lastDepth=j,this.lastKeys=S,this.parsingContext.unaliasedKeywordCacheStack.splice(j-1)}flushStacks(S){this.parsingContext.processingStack.splice(S,1),this.parsingContext.processingType.splice(S,1),this.parsingContext.emittedStack.splice(S,1),this.parsingContext.idStack.splice(S,1),this.parsingContext.graphStack.splice(S+1,1),this.parsingContext.graphContainerTermStack.splice(S,1),this.parsingContext.jsonLiteralStack.splice(S,1),this.parsingContext.validationStack.splice(S-1,2),this.parsingContext.literalStack.splice(S,this.parsingContext.literalStack.length-S),this.parsingContext.annotationsBuffer.splice(S,1)}async flushBuffer(S,N){let j=this.parsingContext.idStack[S];j||(j=this.parsingContext.idStack[S]=[this.util.dataFactory.blankNode()]);const O=this.parsingContext.unidentifiedValuesBuffer[S];if(O){for(const P of j){const C=await this.util.getDepthOffsetGraph(S,N),B=this.parsingContext.graphStack[S]||C>=0?this.parsingContext.idStack[S-C-1]:[await this.util.getGraphContainerValue(N,S)];if(B)for(const H of B){this.parsingContext.emittedStack[S]=!0;for(const V of O)this.util.emitQuadChecked(S,P,V.predicate,V.object,H,V.reverse,V.isEmbedded)}else{const H=this.parsingContext.getUnidentifiedGraphBufferSafe(S-await this.util.getDepthOffsetGraph(S,N)-1);for(const V of O)V.reverse?H.push({object:P,predicate:V.predicate,subject:V.object,isEmbedded:V.isEmbedded}):H.push({object:V.object,predicate:V.predicate,subject:P,isEmbedded:V.isEmbedded})}}this.parsingContext.unidentifiedValuesBuffer.splice(S,1),this.parsingContext.literalStack.splice(S,1),this.parsingContext.jsonLiteralStack.splice(S,1)}const I=this.parsingContext.unidentifiedGraphsBuffer[S];if(I){for(const P of j){const C=S===1&&P.termType==="BlankNode"&&!this.parsingContext.topLevelProperties?this.util.getDefaultGraph():P;this.parsingContext.emittedStack[S]=!0;for(const B of I)this.parsingContext.emitQuad(S,this.util.dataFactory.quad(B.subject,B.predicate,B.object,C))}this.parsingContext.unidentifiedGraphsBuffer.splice(S,1)}const A=this.parsingContext.annotationsBuffer[S];if(A){A.length>0&&S===1&&this.parsingContext.emitError(new e.ErrorCoded("Annotations can not be made on top-level nodes",e.ERROR_CODES.INVALID_ANNOTATION));const P=this.parsingContext.getAnnotationsBufferSafe(S-1);for(const C of A)P.push(C);delete this.parsingContext.annotationsBuffer[S]}}async validateKey(S,N,j){for(const q of Pg.ENTRY_HANDLERS)if(await q.validate(this.parsingContext,this.util,S,N,j))return{valid:!0,property:j||q.isPropertyHandler()};return{valid:!1,property:!1}}attachJsonParserListeners(){this.jsonParser.onValue=S=>{const N=this.jsonParser.stack.length,j=new Array(N+1).fill(0).map((q,O)=>O===N?this.jsonParser.key:this.jsonParser.stack[O].key);if(!this.isParsingContextInner(N)){const q=()=>this.newOnValueJob(j,S,N,!0);if(!this.parsingContext.streamingProfile&&!this.parsingContext.contextTree.getContext(j.slice(0,-1)))if(j[N]==="@context"){let O=this.contextJobs[N];O||(O=this.contextJobs[N]=[]),O.push(q)}else this.contextAwaitingJobs.push({job:q,keys:j,depth:N});else this.lastOnValueJob=this.lastOnValueJob.then(q);!this.parsingContext.streamingProfile&&N===0&&(this.lastOnValueJob=this.lastOnValueJob.then(()=>this.executeBufferedJobs()))}},this.jsonParser.onError=S=>{this.emit("error",S)}}isParsingContextInner(S){for(let N=S;N>0;N--)if(this.jsonParser.stack[N-1].key==="@context")return!0;return!1}async executeBufferedJobs(){for(const N of this.contextJobs)if(N)for(const j of N)await j();this.parsingContext.unaliasedKeywordCacheStack.splice(0);const S=[];for(const N of this.contextAwaitingJobs)await this.util.unaliasKeyword(N.keys[N.depth],N.keys,N.depth,!0)==="@type"||typeof N.keys[N.depth]=="number"&&await this.util.unaliasKeyword(N.keys[N.depth-1],N.keys,N.depth-1,!0)==="@type"?this.typeJobs.push({job:N.job,keys:N.keys.slice(0,N.keys.length-1)}):S.push(N);for(const N of S){if(this.typeJobs.length>0){const j=[],q=[];for(let A=0;A<this.typeJobs.length;A++){const P=this.typeJobs[A];v.Util.isPrefixArray(P.keys,N.keys)&&(j.push(P),q.push(A))}const O=j.sort((A,P)=>A.keys.length-P.keys.length);for(const A of O)await A.job();const I=q.sort().reverse();for(const A of I)this.typeJobs.splice(A,1)}await N.job()}}};return w.DEFAULT_PROCESSING_MODE="1.1",w.ENTRY_HANDLERS=[new n.EntryHandlerArrayValue,new o.EntryHandlerKeywordContext,new s.EntryHandlerKeywordId,new c.EntryHandlerKeywordIncluded,new l.EntryHandlerKeywordGraph,new d.EntryHandlerKeywordNest,new f.EntryHandlerKeywordType,new h.EntryHandlerKeywordValue,new T.EntryHandlerKeywordAnnotation,new r.EntryHandlerContainer,new p.EntryHandlerKeywordUnknownFallback,new i.EntryHandlerPredicate,new t.EntryHandlerInvalidFallback],EA.JsonLdParser=w,EA}var Zde;function iCe(){return Zde||(Zde=1,(function(a){var e=Vh&&Vh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Vh&&Vh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(i3e(),a)})(Vh)),Vh}var KA={},kh={},JA={},MC={},efe;function u3e(){return efe||(efe=1,(function(){(function(a){(function(e){var u=typeof globalThis<"u"&&globalThis||typeof a<"u"&&a||typeof nb<"u"&&nb||{},n={searchParams:"URLSearchParams"in u,iterable:"Symbol"in u&&"iterator"in Symbol,blob:"FileReader"in u&&"Blob"in u&&(function(){try{return new Blob,!0}catch{return!1}})(),formData:"FormData"in u,arrayBuffer:"ArrayBuffer"in u};function r(I){return I&&DataView.prototype.isPrototypeOf(I)}if(n.arrayBuffer)var t=["[object Int8Array]","[object Uint8Array]","[object Uint8ClampedArray]","[object Int16Array]","[object Uint16Array]","[object Int32Array]","[object Uint32Array]","[object Float32Array]","[object Float64Array]"],i=ArrayBuffer.isView||function(I){return I&&t.indexOf(Object.prototype.toString.call(I))>-1};function o(I){if(typeof I!="string"&&(I=String(I)),/[^a-z0-9\-#$%&'*+.^_`|~!]/i.test(I)||I==="")throw new TypeError('Invalid character in header field name: "'+I+'"');return I.toLowerCase()}function l(I){return typeof I!="string"&&(I=String(I)),I}function s(I){var A={next:function(){var P=I.shift();return{done:P===void 0,value:P}}};return n.iterable&&(A[Symbol.iterator]=function(){return A}),A}function c(I){this.map={},I instanceof c?I.forEach(function(A,P){this.append(P,A)},this):Array.isArray(I)?I.forEach(function(A){if(A.length!=2)throw new TypeError("Headers constructor: expected name/value pair to be length 2, found"+A.length);this.append(A[0],A[1])},this):I&&Object.getOwnPropertyNames(I).forEach(function(A){this.append(A,I[A])},this)}c.prototype.append=function(I,A){I=o(I),A=l(A);var P=this.map[I];this.map[I]=P?P+", "+A:A},c.prototype.delete=function(I){delete this.map[o(I)]},c.prototype.get=function(I){return I=o(I),this.has(I)?this.map[I]:null},c.prototype.has=function(I){return this.map.hasOwnProperty(o(I))},c.prototype.set=function(I,A){this.map[o(I)]=l(A)},c.prototype.forEach=function(I,A){for(var P in this.map)this.map.hasOwnProperty(P)&&I.call(A,this.map[P],P,this)},c.prototype.keys=function(){var I=[];return this.forEach(function(A,P){I.push(P)}),s(I)},c.prototype.values=function(){var I=[];return this.forEach(function(A){I.push(A)}),s(I)},c.prototype.entries=function(){var I=[];return this.forEach(function(A,P){I.push([P,A])}),s(I)},n.iterable&&(c.prototype[Symbol.iterator]=c.prototype.entries);function d(I){if(!I._noBody){if(I.bodyUsed)return Promise.reject(new TypeError("Already read"));I.bodyUsed=!0}}function f(I){return new Promise(function(A,P){I.onload=function(){A(I.result)},I.onerror=function(){P(I.error)}})}function p(I){var A=new FileReader,P=f(A);return A.readAsArrayBuffer(I),P}function h(I){var A=new FileReader,P=f(A),C=/charset=([A-Za-z0-9_-]+)/.exec(I.type),B=C?C[1]:"utf-8";return A.readAsText(I,B),P}function g(I){for(var A=new Uint8Array(I),P=new Array(A.length),C=0;C<A.length;C++)P[C]=String.fromCharCode(A[C]);return P.join("")}function v(I){if(I.slice)return I.slice(0);var A=new Uint8Array(I.byteLength);return A.set(new Uint8Array(I)),A.buffer}function m(){return this.bodyUsed=!1,this._initBody=function(I){this.bodyUsed=this.bodyUsed,this._bodyInit=I,I?typeof I=="string"?this._bodyText=I:n.blob&&Blob.prototype.isPrototypeOf(I)?this._bodyBlob=I:n.formData&&FormData.prototype.isPrototypeOf(I)?this._bodyFormData=I:n.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)?this._bodyText=I.toString():n.arrayBuffer&&n.blob&&r(I)?(this._bodyArrayBuffer=v(I.buffer),this._bodyInit=new Blob([this._bodyArrayBuffer])):n.arrayBuffer&&(ArrayBuffer.prototype.isPrototypeOf(I)||i(I))?this._bodyArrayBuffer=v(I):this._bodyText=I=Object.prototype.toString.call(I):(this._noBody=!0,this._bodyText=""),this.headers.get("content-type")||(typeof I=="string"?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):n.searchParams&&URLSearchParams.prototype.isPrototypeOf(I)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},n.blob&&(this.blob=function(){var I=d(this);if(I)return I;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(new Blob([this._bodyArrayBuffer]));if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))}),this.arrayBuffer=function(){if(this._bodyArrayBuffer){var I=d(this);return I||(ArrayBuffer.isView(this._bodyArrayBuffer)?Promise.resolve(this._bodyArrayBuffer.buffer.slice(this._bodyArrayBuffer.byteOffset,this._bodyArrayBuffer.byteOffset+this._bodyArrayBuffer.byteLength)):Promise.resolve(this._bodyArrayBuffer))}else{if(n.blob)return this.blob().then(p);throw new Error("could not read as ArrayBuffer")}},this.text=function(){var I=d(this);if(I)return I;if(this._bodyBlob)return h(this._bodyBlob);if(this._bodyArrayBuffer)return Promise.resolve(g(this._bodyArrayBuffer));if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)},n.formData&&(this.formData=function(){return this.text().then(S)}),this.json=function(){return this.text().then(JSON.parse)},this}var T=["CONNECT","DELETE","GET","HEAD","OPTIONS","PATCH","POST","PUT","TRACE"];function w(I){var A=I.toUpperCase();return T.indexOf(A)>-1?A:I}function E(I,A){if(!(this instanceof E))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');A=A||{};var P=A.body;if(I instanceof E){if(I.bodyUsed)throw new TypeError("Already read");this.url=I.url,this.credentials=I.credentials,A.headers||(this.headers=new c(I.headers)),this.method=I.method,this.mode=I.mode,this.signal=I.signal,!P&&I._bodyInit!=null&&(P=I._bodyInit,I.bodyUsed=!0)}else this.url=String(I);if(this.credentials=A.credentials||this.credentials||"same-origin",(A.headers||!this.headers)&&(this.headers=new c(A.headers)),this.method=w(A.method||this.method||"GET"),this.mode=A.mode||this.mode||null,this.signal=A.signal||this.signal||(function(){if("AbortController"in u){var H=new AbortController;return H.signal}})(),this.referrer=null,(this.method==="GET"||this.method==="HEAD")&&P)throw new TypeError("Body not allowed for GET or HEAD requests");if(this._initBody(P),(this.method==="GET"||this.method==="HEAD")&&(A.cache==="no-store"||A.cache==="no-cache")){var C=/([?&])_=[^&]*/;if(C.test(this.url))this.url=this.url.replace(C,"$1_="+new Date().getTime());else{var B=/\?/;this.url+=(B.test(this.url)?"&":"?")+"_="+new Date().getTime()}}}E.prototype.clone=function(){return new E(this,{body:this._bodyInit})};function S(I){var A=new FormData;return I.trim().split("&").forEach(function(P){if(P){var C=P.split("="),B=C.shift().replace(/\+/g," "),H=C.join("=").replace(/\+/g," ");A.append(decodeURIComponent(B),decodeURIComponent(H))}}),A}function N(I){var A=new c,P=I.replace(/\r?\n[\t ]+/g," ");return P.split("\r").map(function(C){return C.indexOf(`
`)===0?C.substr(1,C.length):C}).forEach(function(C){var B=C.split(":"),H=B.shift().trim();if(H){var V=B.join(":").trim();try{A.append(H,V)}catch(G){console.warn("Response "+G.message)}}}),A}m.call(E.prototype);function j(I,A){if(!(this instanceof j))throw new TypeError('Please use the "new" operator, this DOM object constructor cannot be called as a function.');if(A||(A={}),this.type="default",this.status=A.status===void 0?200:A.status,this.status<200||this.status>599)throw new RangeError("Failed to construct 'Response': The status provided (0) is outside the range [200, 599].");this.ok=this.status>=200&&this.status<300,this.statusText=A.statusText===void 0?"":""+A.statusText,this.headers=new c(A.headers),this.url=A.url||"",this._initBody(I)}m.call(j.prototype),j.prototype.clone=function(){return new j(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new c(this.headers),url:this.url})},j.error=function(){var I=new j(null,{status:200,statusText:""});return I.ok=!1,I.status=0,I.type="error",I};var q=[301,302,303,307,308];j.redirect=function(I,A){if(q.indexOf(A)===-1)throw new RangeError("Invalid status code");return new j(null,{status:A,headers:{location:I}})},e.DOMException=u.DOMException;try{new e.DOMException}catch{e.DOMException=function(A,P){this.message=A,this.name=P;var C=Error(A);this.stack=C.stack},e.DOMException.prototype=Object.create(Error.prototype),e.DOMException.prototype.constructor=e.DOMException}function O(I,A){return new Promise(function(P,C){var B=new E(I,A);if(B.signal&&B.signal.aborted)return C(new e.DOMException("Aborted","AbortError"));var H=new XMLHttpRequest;function V(){H.abort()}H.onload=function(){var ae={statusText:H.statusText,headers:N(H.getAllResponseHeaders()||"")};B.url.indexOf("file://")===0&&(H.status<200||H.status>599)?ae.status=200:ae.status=H.status,ae.url="responseURL"in H?H.responseURL:ae.headers.get("X-Request-URL");var W="response"in H?H.response:H.responseText;setTimeout(function(){P(new j(W,ae))},0)},H.onerror=function(){setTimeout(function(){C(new TypeError("Network request failed"))},0)},H.ontimeout=function(){setTimeout(function(){C(new TypeError("Network request timed out"))},0)},H.onabort=function(){setTimeout(function(){C(new e.DOMException("Aborted","AbortError"))},0)};function G(ae){try{return ae===""&&u.location.href?u.location.href:ae}catch{return ae}}if(H.open(B.method,G(B.url),!0),B.credentials==="include"?H.withCredentials=!0:B.credentials==="omit"&&(H.withCredentials=!1),"responseType"in H&&(n.blob?H.responseType="blob":n.arrayBuffer&&(H.responseType="arraybuffer")),A&&typeof A.headers=="object"&&!(A.headers instanceof c||u.Headers&&A.headers instanceof u.Headers)){var Z=[];Object.getOwnPropertyNames(A.headers).forEach(function(ae){Z.push(o(ae)),H.setRequestHeader(ae,l(A.headers[ae]))}),B.headers.forEach(function(ae,W){Z.indexOf(W)===-1&&H.setRequestHeader(W,ae)})}else B.headers.forEach(function(ae,W){H.setRequestHeader(W,ae)});B.signal&&(B.signal.addEventListener("abort",V),H.onreadystatechange=function(){H.readyState===4&&B.signal.removeEventListener("abort",V)}),H.send(typeof B._bodyInit>"u"?null:B._bodyInit)})}return O.polyfill=!0,u.fetch||(u.fetch=O,u.Headers=c,u.Request=E,u.Response=j),e.Headers=c,e.Request=E,e.Response=j,e.fetch=O,Object.defineProperty(e,"__esModule",{value:!0}),e})({})})(typeof self<"u"?self:MC)})()),MC}var CC={},tfe;function OP(){return tfe||(tfe=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.ERROR_CODES=a.ErrorCoded=void 0;class e extends Error{constructor(n,r){super(n),this.code=r}}a.ErrorCoded=e,(function(u){u.COLLIDING_KEYWORDS="colliding keywords",u.CONFLICTING_INDEXES="conflicting indexes",u.CYCLIC_IRI_MAPPING="cyclic IRI mapping",u.INVALID_ID_VALUE="invalid @id value",u.INVALID_INDEX_VALUE="invalid @index value",u.INVALID_NEST_VALUE="invalid @nest value",u.INVALID_PREFIX_VALUE="invalid @prefix value",u.INVALID_PROPAGATE_VALUE="invalid @propagate value",u.INVALID_REVERSE_VALUE="invalid @reverse value",u.INVALID_IMPORT_VALUE="invalid @import value",u.INVALID_VERSION_VALUE="invalid @version value",u.INVALID_BASE_IRI="invalid base IRI",u.INVALID_CONTAINER_MAPPING="invalid container mapping",u.INVALID_CONTEXT_ENTRY="invalid context entry",u.INVALID_CONTEXT_NULLIFICATION="invalid context nullification",u.INVALID_DEFAULT_LANGUAGE="invalid default language",u.INVALID_INCLUDED_VALUE="invalid @included value",u.INVALID_IRI_MAPPING="invalid IRI mapping",u.INVALID_JSON_LITERAL="invalid JSON literal",u.INVALID_KEYWORD_ALIAS="invalid keyword alias",u.INVALID_LANGUAGE_MAP_VALUE="invalid language map value",u.INVALID_LANGUAGE_MAPPING="invalid language mapping",u.INVALID_LANGUAGE_TAGGED_STRING="invalid language-tagged string",u.INVALID_LANGUAGE_TAGGED_VALUE="invalid language-tagged value",u.INVALID_LOCAL_CONTEXT="invalid local context",u.INVALID_REMOTE_CONTEXT="invalid remote context",u.INVALID_REVERSE_PROPERTY="invalid reverse property",u.INVALID_REVERSE_PROPERTY_MAP="invalid reverse property map",u.INVALID_REVERSE_PROPERTY_VALUE="invalid reverse property value",u.INVALID_SCOPED_CONTEXT="invalid scoped context",u.INVALID_SCRIPT_ELEMENT="invalid script element",u.INVALID_SET_OR_LIST_OBJECT="invalid set or list object",u.INVALID_TERM_DEFINITION="invalid term definition",u.INVALID_TYPE_MAPPING="invalid type mapping",u.INVALID_TYPE_VALUE="invalid type value",u.INVALID_TYPED_VALUE="invalid typed value",u.INVALID_VALUE_OBJECT="invalid value object",u.INVALID_VALUE_OBJECT_VALUE="invalid value object value",u.INVALID_VOCAB_MAPPING="invalid vocab mapping",u.IRI_CONFUSED_WITH_PREFIX="IRI confused with prefix",u.KEYWORD_REDEFINITION="keyword redefinition",u.LOADING_DOCUMENT_FAILED="loading document failed",u.LOADING_REMOTE_CONTEXT_FAILED="loading remote context failed",u.MULTIPLE_CONTEXT_LINK_HEADERS="multiple context link headers",u.PROCESSING_MODE_CONFLICT="processing mode conflict",u.PROTECTED_TERM_REDEFINITION="protected term redefinition",u.CONTEXT_OVERFLOW="context overflow",u.INVALID_BASE_DIRECTION="invalid base direction",u.RECURSIVE_CONTEXT_INCLUSION="recursive context inclusion",u.INVALID_STREAMING_KEY_ORDER="invalid streaming key order",u.INVALID_EMBEDDED_NODE="invalid embedded node",u.INVALID_ANNOTATION="invalid annotation"})(a.ERROR_CODES||(a.ERROR_CODES={}))})(CC)),CC}var WA={},rfe;function o3e(){if(rfe)return WA;rfe=1,Object.defineProperty(WA,"__esModule",{value:!0}),WA.FetchDocumentLoader=void 0,u3e();const a=OP(),e=X4(),u=Xn();let n=class{constructor(t){this.fetcher=t}async load(t){const i=await(this.fetcher||fetch)(t,{headers:new Headers({accept:"application/ld+json"})});if(i.ok&&i.headers){let o=i.headers.get("Content-Type");if(o){const l=o.indexOf(";");l>0&&(o=o.substr(0,l))}if(o==="application/ld+json")return await i.json();if(i.headers.has("Link")){let l;if(i.headers.forEach((s,c)=>{if(c==="link"){const d=(0,e.parse)(s);for(const f of d.get("type","application/ld+json"))if(f.rel==="alternate"){if(l)throw new Error("Multiple JSON-LD alternate links were found on "+t);l=(0,u.resolve)(f.uri,t)}}}),l)return this.load(l)}throw new a.ErrorCoded(`Unsupported JSON-LD media type ${o}`,a.ERROR_CODES.LOADING_DOCUMENT_FAILED)}else throw new Error(i.statusText||`Status code: ${i.status}`)}};return WA.FetchDocumentLoader=n,WA}var LC={},YA={},nfe;function sV(){if(nfe)return YA;nfe=1,Object.defineProperty(YA,"__esModule",{value:!0}),YA.Util=void 0;let a=class ks{static isCompactIri(u){return u.indexOf(":")>0&&!(u&&u[0]==="#")}static getPrefix(u,n){if(u&&u[0]==="#")return null;const r=u.indexOf(":");if(r>=0){if(u.length>r+1&&u.charAt(r+1)==="/"&&u.charAt(r+2)==="/")return null;const t=u.substr(0,r);if(t==="_")return null;if(n[t])return t}return null}static getContextValueId(u){if(u===null||typeof u=="string")return u;const n=u["@id"];return n||null}static isSimpleTermDefinitionPrefix(u,n){return!ks.isPotentialKeyword(u)&&(n.allowPrefixNonGenDelims||typeof u=="string"&&(u[0]==="_"||ks.isPrefixIriEndingWithGenDelim(u)))}static isPotentialKeyword(u){return typeof u=="string"&&ks.KEYWORD_REGEX.test(u)}static isPrefixIriEndingWithGenDelim(u){return ks.ENDS_WITH_GEN_DELIM.test(u)}static isPrefixValue(u){return u&&(typeof u=="string"||u&&typeof u=="object")}static isValidIri(u){return!!(u&&ks.IRI_REGEX.test(u))}static isValidIriWeak(u){return!!u&&u[0]!==":"&&ks.IRI_REGEX_WEAK.test(u)}static isValidKeyword(u){return ks.VALID_KEYWORDS[u]}static isTermProtected(u,n){const r=u[n];return typeof r!="string"&&r&&r["@protected"]}static hasProtectedTerms(u){for(const n of Object.keys(u))if(ks.isTermProtected(u,n))return!0;return!1}static isReservedInternalKeyword(u){return u.startsWith("@__")}static deepEqual(u,n){const r=Object.keys(u),t=Object.keys(n);return r.length!==t.length?!1:r.every(i=>{const o=u[i],l=n[i];return o===l||o!==null&&l!==null&&typeof o=="object"&&typeof l=="object"&&this.deepEqual(o,l)})}};return a.IRI_REGEX=/^([A-Za-z][A-Za-z0-9+-.]*|_):[^ "<>{}|\\\[\]`#]*(#[^#]*)?$/,a.IRI_REGEX_WEAK=/(?::[^:])|\//,a.KEYWORD_REGEX=/^@[a-z]+$/i,a.ENDS_WITH_GEN_DELIM=/[:/?#\[\]@]$/,a.REGEX_LANGUAGE_TAG=/^[a-zA-Z]+(-[a-zA-Z0-9]+)*$/,a.REGEX_DIRECTION_TAG=/^(ltr)|(rtl)$/,a.VALID_KEYWORDS={"@annotation":!0,"@base":!0,"@container":!0,"@context":!0,"@direction":!0,"@graph":!0,"@id":!0,"@import":!0,"@included":!0,"@index":!0,"@json":!0,"@language":!0,"@list":!0,"@nest":!0,"@none":!0,"@prefix":!0,"@propagate":!0,"@protected":!0,"@reverse":!0,"@set":!0,"@type":!0,"@value":!0,"@version":!0,"@vocab":!0},a.EXPAND_KEYS_BLACKLIST=["@base","@vocab","@language","@version","@direction"],a.ALIAS_DOMAIN_BLACKLIST=["@container","@graph","@id","@index","@list","@nest","@none","@prefix","@reverse","@set","@type","@value","@version"],a.ALIAS_RANGE_BLACKLIST=["@context","@preserve"],a.CONTAINERS=["@list","@set","@index","@language","@graph","@id","@type"],a.CONTAINERS_1_0=["@list","@set","@index"],YA.Util=a,YA}var afe;function s3e(){return afe||(afe=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.defaultExpandOptions=a.JsonLdContextNormalized=void 0;const e=Xn(),u=OP(),n=sV();class r{constructor(i){this.contextRaw=i}getContextRaw(){return this.contextRaw}expandTerm(i,o,l=a.defaultExpandOptions){const s=this.contextRaw[i];if(s===null||s&&s["@id"]===null)return null;let c=!0;if(s&&o){const v=n.Util.getContextValueId(s);if(v&&v!==i)if(typeof v!="string"||!n.Util.isValidIri(v)&&!n.Util.isValidKeyword(v))n.Util.isPotentialKeyword(v)||(c=!1);else return v}const d=n.Util.getPrefix(i,this.contextRaw),f=this.contextRaw["@vocab"],p=(!!f||f==="")&&f.indexOf(":")<0,h=this.contextRaw["@base"],g=n.Util.isPotentialKeyword(i);if(d){const v=this.contextRaw[d],m=n.Util.getContextValueId(v);if(m){if(typeof v=="string"||!l.allowPrefixForcing){if(!n.Util.isSimpleTermDefinitionPrefix(m,l))return i}else if(m[0]!=="_"&&!g&&!v["@prefix"]&&!(i in this.contextRaw))return i;return m+i.substr(d.length+1)}}else if(o&&(f||f===""||l.allowVocabRelativeToBase&&h&&p)&&!g&&!n.Util.isCompactIri(i))if(p){if(l.allowVocabRelativeToBase)return(f||h?(0,e.resolve)(f,h):"")+i;throw new u.ErrorCoded(`Relative vocab expansion for term '${i}' with vocab '${f}' is not allowed.`,u.ERROR_CODES.INVALID_VOCAB_MAPPING)}else return f+i;else if(!o&&h&&!g&&!n.Util.isCompactIri(i))return(0,e.resolve)(i,h);if(c)return i;throw new u.ErrorCoded(`Invalid IRI mapping found for context entry '${i}': '${JSON.stringify(s)}'`,u.ERROR_CODES.INVALID_IRI_MAPPING)}compactIri(i,o){if(o&&this.contextRaw["@vocab"]&&i.startsWith(this.contextRaw["@vocab"]))return i.substr(this.contextRaw["@vocab"].length);if(!o&&this.contextRaw["@base"]&&i.startsWith(this.contextRaw["@base"]))return i.substr(this.contextRaw["@base"].length);const l={prefix:"",suffix:i};for(const s in this.contextRaw){const c=this.contextRaw[s];if(c&&!n.Util.isPotentialKeyword(s)){const d=n.Util.getContextValueId(c);if(i.startsWith(d)){const f=i.substr(d.length);if(f)f.length<l.suffix.length&&(l.prefix=s,l.suffix=f);else if(o)return s}}}return l.prefix?l.prefix+":"+l.suffix:i}}a.JsonLdContextNormalized=r,a.defaultExpandOptions={allowPrefixForcing:!0,allowPrefixNonGenDelims:!1,allowVocabRelativeToBase:!0}})(LC)),LC}var ife;function uCe(){if(ife)return JA;ife=1,Object.defineProperty(JA,"__esModule",{value:!0}),JA.ContextParser=void 0,u3e();const a=Xn(),e=OP(),u=o3e(),n=s3e(),r=sV();let t=class $m{constructor(o){o=o||{},this.documentLoader=o.documentLoader||new u.FetchDocumentLoader,this.documentCache={},this.validateContext=!o.skipValidation,this.expandContentTypeToBase=!!o.expandContentTypeToBase,this.remoteContextsDepthLimit=o.remoteContextsDepthLimit||32,this.redirectSchemaOrgHttps="redirectSchemaOrgHttps"in o?!!o.redirectSchemaOrgHttps:!0}static validateLanguage(o,l,s){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@language' must be a string, got '${JSON.stringify(o)}'`,s);if(!r.Util.REGEX_LANGUAGE_TAG.test(o)){if(l)throw new e.ErrorCoded(`The value of an '@language' must be a valid language tag, got '${JSON.stringify(o)}'`,s);return!1}return!0}static validateDirection(o,l){if(typeof o!="string")throw new e.ErrorCoded(`The value of an '@direction' must be a string, got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);if(!r.Util.REGEX_DIRECTION_TAG.test(o)){if(l)throw new e.ErrorCoded(`The value of an '@direction' must be 'ltr' or 'rtl', got '${JSON.stringify(o)}'`,e.ERROR_CODES.INVALID_BASE_DIRECTION);return!1}return!0}idifyReverseTerms(o){for(const l of Object.keys(o)){let s=o[l];if(s&&typeof s=="object"&&s["@reverse"]&&!s["@id"]){if(typeof s["@reverse"]!="string"||r.Util.isValidKeyword(s["@reverse"]))throw new e.ErrorCoded(`Invalid @reverse value, must be absolute IRI or blank node: '${s["@reverse"]}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);s=o[l]=Object.assign(Object.assign({},s),{"@id":s["@reverse"]}),s["@id"]=s["@reverse"],r.Util.isPotentialKeyword(s["@reverse"])?delete s["@reverse"]:s["@reverse"]=!0}}return o}expandPrefixedTerms(o,l,s){const c=o.getContextRaw();for(const d of s||Object.keys(c))if(r.Util.EXPAND_KEYS_BLACKLIST.indexOf(d)<0&&!r.Util.isReservedInternalKeyword(d)){const f=c[d];if(r.Util.isPotentialKeyword(d)&&r.Util.ALIAS_DOMAIN_BLACKLIST.indexOf(d)>=0&&(d!=="@type"||typeof c[d]=="object"&&!(c[d]["@protected"]||c[d]["@container"]==="@set")))throw new e.ErrorCoded(`Keywords can not be aliased to something else.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.KEYWORD_REDEFINITION);if(r.Util.ALIAS_RANGE_BLACKLIST.indexOf(r.Util.getContextValueId(f))>=0)throw new e.ErrorCoded(`Aliasing to certain keywords is not allowed.
Tried mapping ${d} to ${JSON.stringify(f)}`,e.ERROR_CODES.INVALID_KEYWORD_ALIAS);if(f&&r.Util.isPotentialKeyword(r.Util.getContextValueId(f))&&f["@prefix"]===!0)throw new e.ErrorCoded(`Tried to use keyword aliases as prefix: '${d}': '${JSON.stringify(f)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);for(;r.Util.isPrefixValue(c[d]);){const p=c[d];let h=!1;if(typeof p=="string")c[d]=o.expandTerm(p,!0),h=h||p!==c[d];else{const g=p["@id"],v=p["@type"],m=!("@prefix"in p)||r.Util.isValidIri(d);if("@id"in p)g!=null&&typeof g=="string"&&(c[d]=Object.assign(Object.assign({},c[d]),{"@id":o.expandTerm(g,!0)}),h=h||g!==c[d]["@id"]);else if(!r.Util.isPotentialKeyword(d)&&m){const T=o.expandTerm(d,!0);T!==d&&(c[d]=Object.assign(Object.assign({},c[d]),{"@id":T}),h=!0)}if(v&&typeof v=="string"&&v!=="@vocab"&&(!p["@container"]||!p["@container"]["@type"])&&m){let T=o.expandTerm(v,!0);l&&v===T&&(T=o.expandTerm(v,!1)),T!==v&&(h=!0,c[d]=Object.assign(Object.assign({},c[d]),{"@type":T}))}}if(!h)break}}}normalize(o,{processingMode:l,normalizeLanguageTags:s}){if(s||l===1)for(const c of Object.keys(o))if(c==="@language"&&typeof o[c]=="string")o[c]=o[c].toLowerCase();else{const d=o[c];if(d&&typeof d=="object"&&typeof d["@language"]=="string"){const f=d["@language"].toLowerCase();f!==d["@language"]&&(o[c]=Object.assign(Object.assign({},d),{"@language":f}))}}}containersToHash(o){for(const l of Object.keys(o)){const s=o[l];if(s&&typeof s=="object"){if(typeof s["@container"]=="string")o[l]=Object.assign(Object.assign({},s),{"@container":{[s["@container"]]:!0}});else if(Array.isArray(s["@container"])){const c={};for(const d of s["@container"])c[d]=!0;o[l]=Object.assign(Object.assign({},s),{"@container":c})}}}}applyScopedProtected(o,{processingMode:l},s){if(l&&l>=1.1&&o["@protected"]){for(const c of Object.keys(o))if(!r.Util.isReservedInternalKeyword(c)&&!r.Util.isPotentialKeyword(c)&&!r.Util.isTermProtected(o,c)){const d=o[c];d&&typeof d=="object"?"@protected"in o[c]||(o[c]=Object.assign(Object.assign({},o[c]),{"@protected":!0})):(o[c]={"@id":d,"@protected":!0},r.Util.isSimpleTermDefinitionPrefix(d,s)&&(o[c]=Object.assign(Object.assign({},o[c]),{"@prefix":!0})))}delete o["@protected"]}}validateKeywordRedefinitions(o,l,s,c){for(const d of c??Object.keys(l))if(r.Util.isTermProtected(o,d)&&(typeof l[d]=="string"?l[d]={"@id":l[d],"@protected":!0}:l[d]=Object.assign(Object.assign({},l[d]),{"@protected":!0}),!r.Util.deepEqual(o[d],l[d])))throw new e.ErrorCoded(`Attempted to override the protected keyword ${d} from ${JSON.stringify(r.Util.getContextValueId(o[d]))} to ${JSON.stringify(r.Util.getContextValueId(l[d]))}`,e.ERROR_CODES.PROTECTED_TERM_REDEFINITION)}validate(o,{processingMode:l}){for(const s of Object.keys(o)){if(r.Util.isReservedInternalKeyword(s))continue;if(s==="")throw new e.ErrorCoded(`The empty term is not allowed, got: '${s}': '${JSON.stringify(o[s])}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);const c=o[s],d=typeof c;if(r.Util.isPotentialKeyword(s)){switch(s.substr(1)){case"vocab":if(c!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @vocab IRI: ${c}`,e.ERROR_CODES.INVALID_VOCAB_MAPPING);break;case"base":if(c!==null&&d!=="string")throw new e.ErrorCoded(`Found an invalid @base IRI: ${o[s]}`,e.ERROR_CODES.INVALID_BASE_IRI);break;case"language":c!==null&&$m.validateLanguage(c,!0,e.ERROR_CODES.INVALID_DEFAULT_LANGUAGE);break;case"version":if(c!==null&&d!=="number")throw new e.ErrorCoded(`Found an invalid @version number: ${c}`,e.ERROR_CODES.INVALID_VERSION_VALUE);break;case"direction":c!==null&&$m.validateDirection(c,!0);break;case"propagate":if(l===1)throw new e.ErrorCoded(`Found an illegal @propagate keyword: ${c}`,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);if(c!==null&&d!=="boolean")throw new e.ErrorCoded(`Found an invalid @propagate value: ${c}`,e.ERROR_CODES.INVALID_PROPAGATE_VALUE);break}if(r.Util.isValidKeyword(s)&&r.Util.isValidKeyword(r.Util.getContextValueId(c)))throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${r.Util.getContextValueId(c)}'`,e.ERROR_CODES.KEYWORD_REDEFINITION);continue}if(c!==null)switch(d){case"string":if(r.Util.getPrefix(c,o)===s)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(c==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${c}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(c)&&c!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${c}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}break;case"object":if(!r.Util.isCompactIri(s)&&!("@id"in c)&&(c["@type"]==="@id"?!o["@base"]:!o["@vocab"]))throw new e.ErrorCoded(`Missing @id in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);for(const f of Object.keys(c)){const p=c[f];if(p)switch(f){case"@id":if(r.Util.isValidKeyword(p)&&p!=="@type"&&p!=="@id"&&p!=="@graph"&&p!=="@nest")throw new e.ErrorCoded(`Illegal keyword alias in term value, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIriWeak(s)){if(p==="@type")throw new e.ErrorCoded(`IRIs can not be mapped to @type, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.isValidIri(p)&&p!==new n.JsonLdContextNormalized(o).expandTerm(s))throw new e.ErrorCoded(`IRIs can not be mapped to other IRIs, found: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING)}if(typeof p!="string")throw new e.ErrorCoded(`Detected non-string @id in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_IRI_MAPPING);if(r.Util.getPrefix(p,o)===s)throw new e.ErrorCoded(`Detected cyclical IRI mapping in context entry: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.CYCLIC_IRI_MAPPING);break;case"@type":if(c["@container"]==="@type"&&p!=="@id"&&p!=="@vocab")throw new e.ErrorCoded(`@container: @type only allows @type: @id or @vocab, but got: '${s}': '${p}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(typeof p!="string")throw new e.ErrorCoded(`The value of an '@type' must be a string, got '${JSON.stringify(d)}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);if(p!=="@id"&&p!=="@vocab"&&(l===1||p!=="@json")&&(l===1||p!=="@none")&&(p[0]==="_"||!r.Util.isValidIri(p)))throw new e.ErrorCoded(`A context @type must be an absolute IRI, found: '${s}': '${p}'`,e.ERROR_CODES.INVALID_TYPE_MAPPING);break;case"@reverse":if(typeof p=="string"&&c["@id"]&&c["@id"]!==p)throw new e.ErrorCoded(`Found non-matching @id and @reverse term values in '${s}':'${p}' and '${c["@id"]}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if("@nest"in c)throw new e.ErrorCoded(`@nest is not allowed in the reverse property '${s}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);break;case"@container":if(l===1&&(Object.keys(p).length>1||r.Util.CONTAINERS_1_0.indexOf(Object.keys(p)[0])<0))throw new e.ErrorCoded(`Invalid term @container for '${s}' ('${Object.keys(p)}') in 1.0, must be only one of ${r.Util.CONTAINERS_1_0.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING);for(const h of Object.keys(p)){if(h==="@list"&&c["@reverse"])throw new e.ErrorCoded(`Term value can not be @container: @list and @reverse at the same time on '${s}'`,e.ERROR_CODES.INVALID_REVERSE_PROPERTY);if(r.Util.CONTAINERS.indexOf(h)<0)throw new e.ErrorCoded(`Invalid term @container for '${s}' ('${h}'), must be one of ${r.Util.CONTAINERS.join(", ")}`,e.ERROR_CODES.INVALID_CONTAINER_MAPPING)}break;case"@language":$m.validateLanguage(p,!0,e.ERROR_CODES.INVALID_LANGUAGE_MAPPING);break;case"@direction":$m.validateDirection(p,!0);break;case"@prefix":if(p!==null&&typeof p!="boolean")throw new e.ErrorCoded(`Found an invalid term @prefix boolean in: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_PREFIX_VALUE);if(!("@id"in c)&&!r.Util.isValidIri(s))throw new e.ErrorCoded(`Invalid @prefix definition for '${s}' ('${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@index":if(l===1||!c["@container"]||!c["@container"]["@index"])throw new e.ErrorCoded(`Attempt to add illegal key to value object: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION);break;case"@nest":if(r.Util.isPotentialKeyword(p)&&p!=="@nest")throw new e.ErrorCoded(`Found an invalid term @nest value in: '${s}': '${JSON.stringify(c)}'`,e.ERROR_CODES.INVALID_NEST_VALUE)}}break;default:throw new e.ErrorCoded(`Found an invalid term value: '${s}': '${c}'`,e.ERROR_CODES.INVALID_TERM_DEFINITION)}}}applyBaseEntry(o,l,s){return typeof o=="string"||(s&&!("@base"in o)&&l.parentContext&&typeof l.parentContext=="object"&&"@base"in l.parentContext&&(o["@base"]=l.parentContext["@base"],l.parentContext["@__baseDocument"]&&(o["@__baseDocument"]=!0)),l.baseIRI&&!l.external&&("@base"in o?o["@base"]!==null&&typeof o["@base"]=="string"&&!r.Util.isValidIri(o["@base"])&&(o["@base"]=(0,a.resolve)(o["@base"],l.parentContext&&l.parentContext["@base"]||l.baseIRI)):(o["@base"]=l.baseIRI,o["@__baseDocument"]=!0))),o}normalizeContextIri(o,l){if(!r.Util.isValidIri(o))try{o=(0,a.resolve)(o,l)}catch{throw new Error(`Invalid context IRI: ${o}`)}return this.redirectSchemaOrgHttps&&o.startsWith("http://schema.org")&&(o="https://schema.org/"),o}async parseInnerContexts(o,l,s){for(const c of s??Object.keys(o)){const d=o[c];if(d&&typeof d=="object"&&"@context"in d&&d["@context"]!==null&&!l.ignoreScopedContexts){if(this.validateContext)try{const f=Object.assign(Object.assign({},o),{[c]:Object.assign({},o[c])});delete f[c]["@context"],await this.parse(d["@context"],Object.assign(Object.assign({},l),{external:!1,parentContext:f,ignoreProtection:!0,ignoreRemoteScopedContexts:!0,ignoreScopedContexts:!0}))}catch(f){throw new e.ErrorCoded(f.message,e.ERROR_CODES.INVALID_SCOPED_CONTEXT)}o[c]=Object.assign(Object.assign({},d),{"@context":(await this.parse(d["@context"],Object.assign(Object.assign({},l),{external:!1,minimalProcessing:!0,ignoreRemoteScopedContexts:!0,parentContext:o}))).getContextRaw()})}}return o}async parse(o,l={},s={}){const{baseIRI:c,parentContext:d,external:f,processingMode:p=$m.DEFAULT_PROCESSING_MODE,normalizeLanguageTags:h,ignoreProtection:g,minimalProcessing:v}=l,m=l.remoteContexts||{};if(Object.keys(m).length>=this.remoteContextsDepthLimit)throw new e.ErrorCoded("Detected an overflow in remote context inclusions: "+Object.keys(m),e.ERROR_CODES.CONTEXT_OVERFLOW);if(o==null){if(!g&&d&&r.Util.hasProtectedTerms(d))throw new e.ErrorCoded("Illegal context nullification when terms are protected",e.ERROR_CODES.INVALID_CONTEXT_NULLIFICATION);return new n.JsonLdContextNormalized(this.applyBaseEntry({},l,!1))}else if(typeof o=="string"){const T=this.normalizeContextIri(o,c),w=this.getOverriddenLoad(T,l);if(w)return new n.JsonLdContextNormalized(w);const E=await this.parse(await this.load(T),Object.assign(Object.assign({},l),{baseIRI:T,external:!0,remoteContexts:Object.assign(Object.assign({},m),{[T]:!0})}));return this.applyBaseEntry(E.getContextRaw(),l,!0),E}else if(Array.isArray(o)){const T=[],w=await Promise.all(o.map((S,N)=>{if(typeof S=="string"){const j=this.normalizeContextIri(S,c);T[N]=j;const q=this.getOverriddenLoad(j,l);return q||this.load(j)}else return S}));if(v)return new n.JsonLdContextNormalized(w);const E=await w.reduce((S,N,j)=>S.then(q=>this.parse(N,Object.assign(Object.assign({},l),{baseIRI:T[j]||l.baseIRI,external:!!T[j]||l.external,parentContext:q.getContextRaw(),remoteContexts:T[j]?Object.assign(Object.assign({},m),{[T[j]]:!0}):m}),{skipValidation:j<w.length-1})),Promise.resolve(new n.JsonLdContextNormalized(d||{})));return this.applyBaseEntry(E.getContextRaw(),l,!0),E}else if(typeof o=="object"){if("@context"in o)return await this.parse(o["@context"],l);if(o=Object.assign({},o),f&&delete o["@base"],this.applyBaseEntry(o,l,!0),this.containersToHash(o),v)return new n.JsonLdContextNormalized(o);let T={};if("@import"in o)if(p>=1.1){if(typeof o["@import"]!="string")throw new e.ErrorCoded("An @import value must be a string, but got "+typeof o["@import"],e.ERROR_CODES.INVALID_IMPORT_VALUE);T=await this.loadImportContext(this.normalizeContextIri(o["@import"],c)),delete o["@import"]}else throw new e.ErrorCoded("Context importing is not supported in JSON-LD 1.0",e.ERROR_CODES.INVALID_CONTEXT_ENTRY);this.applyScopedProtected(T,{processingMode:p},n.defaultExpandOptions);const w=Object.assign(T,o);this.idifyReverseTerms(w),this.normalize(w,{processingMode:p,normalizeLanguageTags:h}),this.applyScopedProtected(w,{processingMode:p},n.defaultExpandOptions);const E=Object.keys(w),S=[];if(typeof d=="object")for(const j in d)j in w?S.push(j):w[j]=d[j];await this.parseInnerContexts(w,l,E);const N=new n.JsonLdContextNormalized(w);return(w&&w["@version"]||$m.DEFAULT_PROCESSING_MODE)>=1.1&&(o["@vocab"]&&typeof o["@vocab"]=="string"||o["@vocab"]==="")&&(d&&"@vocab"in d&&o["@vocab"].indexOf(":")<0?w["@vocab"]=d["@vocab"]+o["@vocab"]:(r.Util.isCompactIri(o["@vocab"])||o["@vocab"]in w)&&(w["@vocab"]=N.expandTerm(o["@vocab"],!0))),this.expandPrefixedTerms(N,this.expandContentTypeToBase,E),!g&&d&&p>=1.1&&this.validateKeywordRedefinitions(d,w,n.defaultExpandOptions,S),this.validateContext&&!s.skipValidation&&this.validate(w,{processingMode:p}),N}else throw new e.ErrorCoded(`Tried parsing a context that is not a string, array or object, but got ${o}`,e.ERROR_CODES.INVALID_LOCAL_CONTEXT)}async load(o){const l=this.documentCache[o];if(l)return l;let s;try{s=await this.documentLoader.load(o)}catch(c){throw new e.ErrorCoded(`Failed to load remote context ${o}: ${c.message}`,e.ERROR_CODES.LOADING_REMOTE_CONTEXT_FAILED)}if(!("@context"in s))throw new e.ErrorCoded(`Missing @context in remote context at ${o}`,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);return this.documentCache[o]=s["@context"]}getOverriddenLoad(o,l){if(o in(l.remoteContexts||{})){if(l.ignoreRemoteScopedContexts)return o;throw new e.ErrorCoded("Detected a cyclic context inclusion of "+o,e.ERROR_CODES.RECURSIVE_CONTEXT_INCLUSION)}return null}async loadImportContext(o){let l=await this.load(o);if(typeof l!="object"||Array.isArray(l))throw new e.ErrorCoded("An imported context must be a single object: "+o,e.ERROR_CODES.INVALID_REMOTE_CONTEXT);if("@import"in l)throw new e.ErrorCoded("An imported context can not import another context: "+o,e.ERROR_CODES.INVALID_CONTEXT_ENTRY);return l=Object.assign({},l),this.containersToHash(l),l}};return t.DEFAULT_PROCESSING_MODE=1.1,JA.ContextParser=t,JA}var qC={},ufe;function oCe(){return ufe||(ufe=1,Object.defineProperty(qC,"__esModule",{value:!0})),qC}var BC={},ofe;function sCe(){return ofe||(ofe=1,Object.defineProperty(BC,"__esModule",{value:!0})),BC}var sfe;function cCe(){return sfe||(sfe=1,(function(a){var e=kh&&kh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=kh&&kh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(uCe(),a),u(OP(),a),u(o3e(),a),u(oCe(),a),u(sCe(),a),u(s3e(),a),u(sV(),a)})(kh)),kh}var cfe;function l3e(){if(cfe)return KA;cfe=1,Object.defineProperty(KA,"__esModule",{value:!0}),KA.DocumentLoaderMediated=void 0;const a=sc(),e=O1(),u=cCe();let n=class c3e extends u.FetchDocumentLoader{constructor(t,i){super(c3e.createFetcher(t,i)),this.mediatorHttp=t,this.context=i}static createFetcher(t,i){return async(o,l)=>{const s=await t.mediate({input:o,init:l,context:i});return s.json=async()=>JSON.parse(await(0,e.stringify)(a.ActorHttp.toNodeReadable(s.body))),s}}};return KA.DocumentLoaderMediated=n,KA}var lfe;function lCe(){if(lfe)return SA;lfe=1,Object.defineProperty(SA,"__esModule",{value:!0}),SA.ActorRdfParseJsonLd=void 0;const a=E1(),e=lt(),u=De(),n=iCe(),r=l3e();let t=class extends a.ActorRdfParseFixedMediaTypes{constructor(o){super(o)}async testHandle(o,l,s){return s.has(e.KeysRdfParseHtmlScript.processingHtmlScript)&&l!=="application/ld+json"?(0,u.failTest)("JSON-LD in script tags can only have media type 'application/ld+json'"):!l||!(l in this.mediaTypePriorities||l.endsWith("+json"))?(0,u.failTest)(`Unrecognized media type: ${l}`):await this.testHandleChecked(o)}async runHandle(o,l,s){const c=o.context.getSafe(e.KeysInitQuery.dataFactory);return{data:n.JsonLdParser.fromHttpResponse(o.metadata?.baseIRI??"",l,o.headers,{dataFactory:c,documentLoader:s.get(e.KeysRdfParseJsonLd.documentLoader)??new r.DocumentLoaderMediated(this.mediatorHttp,s),strictValues:s.get(e.KeysRdfParseJsonLd.strictValues),...s.get(e.KeysRdfParseJsonLd.parserOptions)}).import(o.data)}}};return SA.ActorRdfParseJsonLd=t,SA}var dfe;function cV(){return dfe||(dfe=1,(function(a){var e=Qh&&Qh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Qh&&Qh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(lCe(),a),u(l3e(),a)})(Qh)),Qh}var zh={},ZA={},Gh={},eO={},ffe;function dCe(){if(ffe)return eO;ffe=1,Object.defineProperty(eO,"__esModule",{value:!0}),eO.ActorRdfUpdateHypermedia=void 0;const a=De();let e=class extends a.Actor{constructor(n,r){super(n),this.destinationType=r}async test(n){return n.forceDestinationType&&this.destinationType!==n.forceDestinationType?(0,a.failTest)(`Actor ${this.name} is not able to handle destination type ${n.forceDestinationType}.`):this.testMetadata(n)}};return eO.ActorRdfUpdateHypermedia=e,eO}var pfe;function lV(){return pfe||(pfe=1,(function(a){var e=Gh&&Gh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Gh&&Gh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(dCe(),a)})(Gh)),Gh}var tO={},hfe;function d3e(){if(hfe)return tO;hfe=1,Object.defineProperty(tO,"__esModule",{value:!0}),tO.QuadDestinationPatchSparqlUpdate=void 0;const a=sc(),e=zt(),u=J4(),n=Nr();let r=class{constructor(i,o,l){this.url=i,this.context=o,this.mediatorHttp=l}async update(i){const o=this.createCombinedQuadsQuery(i.insert,i.delete);await this.wrapSparqlUpdateRequest(o)}createCombinedQuadsQuery(i,o){return new e.ArrayIterator([],{autoStart:!1}).append(this.createQuadsQuery("DELETE",o)).append(o&&i?[` ;
`]:[]).append(this.createQuadsQuery("INSERT",i))}createQuadsQuery(i,o){return o?o.map(l=>{let s=`${(0,u.termToString)(l.subject)} ${(0,u.termToString)(l.predicate)} ${(0,u.termToString)(l.object)} .`;return l.graph.termType==="DefaultGraph"?s=`  ${s}
`:s=`  GRAPH ${(0,u.termToString)(l.graph)} { ${s} }
`,s}).prepend([`${i} DATA {
`]).append(["}"]):new e.ArrayIterator([],{autoStart:!1})}async wrapSparqlUpdateRequest(i){const o=new n.Readable;o.wrap(i);const l=new Headers({"content-type":"application/sparql-update"}),s=await this.mediatorHttp.mediate({context:this.context,init:{headers:l,method:"PATCH",body:a.ActorHttp.toWebReadableStream(o)},input:this.url});await(0,a.validateAndCloseHttpResponse)(this.url,s)}async deleteGraphs(i,o,l){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}async createGraphs(i,o){throw new Error("Patch-based SPARQL Update destinations don't support named graphs")}};return tO.QuadDestinationPatchSparqlUpdate=r,tO}var yfe;function fCe(){if(yfe)return ZA;yfe=1,Object.defineProperty(ZA,"__esModule",{value:!0}),ZA.ActorRdfUpdateHypermediaPatchSparqlUpdate=void 0;const a=lV(),e=De(),u=d3e();let n=class extends a.ActorRdfUpdateHypermedia{constructor(t){super(t,"patchSparqlUpdate")}async testMetadata(t){return!t.forceDestinationType&&!t.metadata.patchSparqlUpdate?(0,e.failTest)(`Actor ${this.name} could not detect a destination with 'application/sparql-update' as 'Accept-Patch' header.`):!t.forceDestinationType&&!t.exists?(0,e.failTest)(`Actor ${this.name} can only patch a destination that already exists.`):(0,e.passTestVoid)()}async run(t){return this.logInfo(t.context,`Identified as patchSparqlUpdate destination: ${t.url}`),{destination:new u.QuadDestinationPatchSparqlUpdate(t.url,t.context,this.mediatorHttp)}}};return ZA.ActorRdfUpdateHypermediaPatchSparqlUpdate=n,ZA}var mfe;function dV(){return mfe||(mfe=1,(function(a){var e=zh&&zh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=zh&&zh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(fCe(),a),u(d3e(),a)})(zh)),zh}var $h={},rO={},nO={},bfe;function f3e(){if(bfe)return nO;bfe=1,Object.defineProperty(nO,"__esModule",{value:!0}),nO.QuadDestinationPutLdp=void 0;const a=sc();let e=class{constructor(n,r,t,i,o,l){this.url=n,this.context=r,this.mediaTypes=t,this.mediatorHttp=i,this.mediatorRdfSerializeMediatypes=o,this.mediatorRdfSerialize=l}async update(n){if(n.delete)throw new Error("Put-based LDP destinations don't support deletions");n.insert&&await this.wrapRdfUpdateRequest("INSERT",n.insert)}async wrapRdfUpdateRequest(n,r){const{mediaTypes:t}=await this.mediatorRdfSerializeMediatypes.mediate({context:this.context,mediaTypes:!0}),i=this.mediaTypes.filter(d=>d in t),o=i.length>0?i[0]:Object.keys(t).sort((d,f)=>t[f]-t[d])[0],{handle:{data:l}}=await this.mediatorRdfSerialize.mediate({context:this.context,handle:{quadStream:r,context:this.context},handleMediaType:o}),s=new Headers({"content-type":o}),c=await this.mediatorHttp.mediate({context:this.context,init:{headers:s,method:"PUT",body:a.ActorHttp.toWebReadableStream(l)},input:this.url});await(0,a.validateAndCloseHttpResponse)(this.url,c)}async deleteGraphs(n,r,t){throw new Error("Put-based LDP destinations don't support named graphs")}async createGraphs(n,r){throw new Error("Put-based LDP destinations don't support named graphs")}};return nO.QuadDestinationPutLdp=e,nO}var gfe;function pCe(){if(gfe)return rO;gfe=1,Object.defineProperty(rO,"__esModule",{value:!0}),rO.ActorRdfUpdateHypermediaPutLdp=void 0;const a=lV(),e=De(),u=f3e();let n=class extends a.ActorRdfUpdateHypermedia{constructor(t){super(t,"putLdp")}async testMetadata(t){if(!t.forceDestinationType){if(!t.metadata.allowHttpMethods||!t.metadata.allowHttpMethods.includes("PUT"))return(0,e.failTest)(`Actor ${this.name} could not detect a destination with 'Allow: PUT' header.`);if(t.exists)return(0,e.failTest)(`Actor ${this.name} can only put on a destination that does not already exists.`)}return(0,e.passTestVoid)()}async run(t){return this.logInfo(t.context,`Identified as putLdp destination: ${t.url}`),{destination:new u.QuadDestinationPutLdp(t.url,t.context,t.metadata.putAccepted||[],this.mediatorHttp,this.mediatorRdfSerializeMediatypes,this.mediatorRdfSerialize)}}};return rO.ActorRdfUpdateHypermediaPutLdp=n,rO}var vfe;function fV(){return vfe||(vfe=1,(function(a){var e=$h&&$h.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=$h&&$h.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(pCe(),a),u(f3e(),a)})($h)),$h}var Xh={},aO={},iO={},Kh={},Jh={},Wh={},uO={},Yh={},oO={},_fe;function p3e(){if(_fe)return oO;_fe=1,Object.defineProperty(oO,"__esModule",{value:!0}),oO.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return oO.BlankNode=a,oO}var sO={},cO={},Tfe;function h3e(){if(Tfe)return cO;Tfe=1,Object.defineProperty(cO,"__esModule",{value:!0}),cO.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return cO.DefaultGraph=a,a.INSTANCE=new a,cO}var lO={},dO={},wfe;function pV(){if(wfe)return dO;wfe=1,Object.defineProperty(dO,"__esModule",{value:!0}),dO.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return dO.NamedNode=a,dO}var Sfe;function y3e(){if(Sfe)return lO;Sfe=1,Object.defineProperty(lO,"__esModule",{value:!0}),lO.Literal=void 0;const a=pV();class e{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=e.RDF_LANGUAGE_STRING,this.direction=""):r?"termType"in r?(this.language="",this.datatype=r,this.direction=""):(this.language=r.language,this.datatype=r.direction?e.RDF_DIRECTIONAL_LANGUAGE_STRING:e.RDF_LANGUAGE_STRING,this.direction=r.direction||""):(this.language="",this.datatype=e.XSD_STRING,this.direction="")}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&(n.direction===this.direction||!n.direction&&this.direction==="")&&this.datatype.equals(n.datatype)}}return lO.Literal=e,e.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.RDF_DIRECTIONAL_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),e.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),lO}var fO={},Efe;function m3e(){if(Efe)return fO;Efe=1,Object.defineProperty(fO,"__esModule",{value:!0}),fO.Quad=void 0;class a{constructor(u,n,r,t){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=t}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return fO.Quad=a,fO}var pO={},Afe;function b3e(){if(Afe)return pO;Afe=1,Object.defineProperty(pO,"__esModule",{value:!0}),pO.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return pO.Variable=a,pO}var Ofe;function hCe(){if(Ofe)return sO;Ofe=1,Object.defineProperty(sO,"__esModule",{value:!0}),sO.DataFactory=void 0;const a=p3e(),e=h3e(),u=y3e(),n=pV(),r=m3e(),t=b3e();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,c){return new u.Literal(s,c)}variable(s){return new t.Variable(s)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(s,c,d,f){return new r.Quad(s,c,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return sO.DataFactory=o,sO}var xfe;function yCe(){return xfe||(xfe=1,(function(a){var e=Yh&&Yh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Yh&&Yh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(p3e(),a),u(hCe(),a),u(h3e(),a),u(y3e(),a),u(pV(),a),u(m3e(),a),u(b3e(),a)})(Yh)),Yh}var Rfe;function mCe(){if(Rfe)return uO;Rfe=1,Object.defineProperty(uO,"__esModule",{value:!0}),uO.SparqlJsonParser=void 0;const a=yCe(),e=Nr(),u=gB();let n=class g3e{constructor(t){var i;t=t||{},this.dataFactory=t.dataFactory||new a.DataFactory,this.prefixVariableQuestionMark=!!t.prefixVariableQuestionMark,this.suppressMissingStreamResultsError=(i=t.suppressMissingStreamResultsError)!==null&&i!==void 0?i:!0,this.parseUnsupportedVersions=!!t.parseUnsupportedVersions}isValidVersion(t){return this.parseUnsupportedVersions||g3e.SUPPORTED_VERSIONS.includes(t)}parseJsonResults(t,i){if(i&&!this.isValidVersion(i))throw new Error(`Detected unsupported version as media type parameter: ${i}`);return t.results.bindings.map(o=>this.parseJsonBindings(o))}parseJsonResultsStream(t,i){const o=f=>d.emit("error",f);t.on("error",o);const l=new u;l.onError=o;let s=!1,c=!1;l.onValue=f=>{if(l.key==="vars"&&l.stack.length===2&&l.stack[1].key==="head")d.emit("variables",f.map(p=>this.dataFactory.variable(p))),s=!0;else if(l.key==="link"&&l.stack.length===2&&l.stack[1].key==="head")d.emit("link",f);else if(l.key==="version"&&l.stack.length===2&&l.stack[1].key==="head")this.isValidVersion(f)||d.emit("error",new Error(`Detected unsupported version: ${f}`)),d.emit("version",f);else if(l.key==="results"&&l.stack.length===1)c=!0;else if(typeof l.key=="number"&&l.stack.length===3&&l.stack[1].key==="results"&&l.stack[2].key==="bindings")try{d.push(this.parseJsonBindings(f))}catch(p){d.emit("error",p)}else l.key==="metadata"&&l.stack.length===1&&d.emit("metadata",f)};const d=t.on("end",f=>{!c&&!this.suppressMissingStreamResultsError?d.emit("error",new Error("No valid SPARQL query results were found.")):s||d.emit("variables",[])}).pipe(new e.Transform({objectMode:!0,transform(f,p,h){l.write(f),h()}}));return i&&!this.isValidVersion(i)&&d.destroy(new Error(`Detected unsupported version as media type parameter: ${i}`)),d}parseJsonBindings(t){const i={};for(const o in t){const l=t[o];i[this.prefixVariableQuestionMark?"?"+o:o]=this.parseJsonValue(l)}return i}parseJsonValue(t){let i;switch(t.type){case"bnode":i=this.dataFactory.blankNode(t.value);break;case"literal":if(t["xml:lang"]){const l=t["xml:lang"],s=t["its:dir"];i=this.dataFactory.literal(t.value,{language:l,direction:s})}else t.datatype?i=this.dataFactory.literal(t.value,this.dataFactory.namedNode(t.datatype)):i=this.dataFactory.literal(t.value);break;case"typed-literal":i=this.dataFactory.literal(t.value,this.dataFactory.namedNode(t.datatype));break;case"triple":const o=t.value;if(!o||!o.subject||!o.predicate||!o.object)throw new Error("Invalid quoted triple: "+JSON.stringify(t));i=this.dataFactory.quad(this.parseJsonValue(o.subject),this.parseJsonValue(o.predicate),this.parseJsonValue(o.object));break;default:i=this.dataFactory.namedNode(t.value);break}return i}parseJsonBoolean(t,i){if(i&&!this.isValidVersion(i))throw new Error(`Detected unsupported version as media type parameter: ${i}`);if("boolean"in t)return t.boolean;throw new Error("No valid ASK response was found.")}parseJsonBooleanStream(t,i){return i&&!this.isValidVersion(i)?Promise.reject(new Error(`Detected unsupported version as media type parameter: ${i}`)):new Promise((o,l)=>{const s=new u;s.onError=l,s.onValue=c=>{s.key==="boolean"&&typeof c=="boolean"&&s.stack.length===1&&o(c)},t.on("error",l).on("data",c=>s.write(c)).on("end",()=>l(new Error("No valid ASK response was found.")))})}};return uO.SparqlJsonParser=n,n.SUPPORTED_VERSIONS=["1.2","1.2-basic","1.1"],uO}var Nfe;function bCe(){return Nfe||(Nfe=1,(function(a){var e=Wh&&Wh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Wh&&Wh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(mCe(),a)})(Wh)),Wh}var Zh={},hO={},ey={},yO={},Ife;function v3e(){if(Ife)return yO;Ife=1,Object.defineProperty(yO,"__esModule",{value:!0}),yO.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return yO.BlankNode=a,yO}var mO={},bO={},Dfe;function _3e(){if(Dfe)return bO;Dfe=1,Object.defineProperty(bO,"__esModule",{value:!0}),bO.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return bO.DefaultGraph=a,a.INSTANCE=new a,bO}var gO={},vO={},Ffe;function hV(){if(Ffe)return vO;Ffe=1,Object.defineProperty(vO,"__esModule",{value:!0}),vO.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return vO.NamedNode=a,vO}var Pfe;function T3e(){if(Pfe)return gO;Pfe=1,Object.defineProperty(gO,"__esModule",{value:!0}),gO.Literal=void 0;const a=hV();class e{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=e.RDF_LANGUAGE_STRING,this.direction=""):r?"termType"in r?(this.language="",this.datatype=r,this.direction=""):(this.language=r.language,this.datatype=r.direction?e.RDF_DIRECTIONAL_LANGUAGE_STRING:e.RDF_LANGUAGE_STRING,this.direction=r.direction||""):(this.language="",this.datatype=e.XSD_STRING,this.direction="")}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&(n.direction===this.direction||!n.direction&&this.direction==="")&&this.datatype.equals(n.datatype)}}return gO.Literal=e,e.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.RDF_DIRECTIONAL_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),e.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),gO}var _O={},jfe;function w3e(){if(jfe)return _O;jfe=1,Object.defineProperty(_O,"__esModule",{value:!0}),_O.Quad=void 0;class a{constructor(u,n,r,t){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=t}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return _O.Quad=a,_O}var TO={},Mfe;function S3e(){if(Mfe)return TO;Mfe=1,Object.defineProperty(TO,"__esModule",{value:!0}),TO.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return TO.Variable=a,TO}var Cfe;function gCe(){if(Cfe)return mO;Cfe=1,Object.defineProperty(mO,"__esModule",{value:!0}),mO.DataFactory=void 0;const a=v3e(),e=_3e(),u=T3e(),n=hV(),r=w3e(),t=S3e();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,c){return new u.Literal(s,c)}variable(s){return new t.Variable(s)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(s,c,d,f){return new r.Quad(s,c,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return mO.DataFactory=o,mO}var Lfe;function vCe(){return Lfe||(Lfe=1,(function(a){var e=ey&&ey.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ey&&ey.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(v3e(),a),u(gCe(),a),u(_3e(),a),u(T3e(),a),u(hV(),a),u(w3e(),a),u(S3e(),a)})(ey)),ey}var qfe;function _Ce(){if(qfe)return hO;qfe=1,Object.defineProperty(hO,"__esModule",{value:!0}),hO.SparqlXmlParser=void 0;const a=vCe(),e=uTe(),u=Nr();let n=class E3e{constructor(t){t=t||{},this.dataFactory=t.dataFactory||new a.DataFactory,this.prefixVariableQuestionMark=!!t.prefixVariableQuestionMark,this.parseUnsupportedVersions=!!t.parseUnsupportedVersions}isValidVersion(t){return this.parseUnsupportedVersions||E3e.SUPPORTED_VERSIONS.includes(t)}parseXmlResultsStream(t,i){const o=E=>w.emit("error",E);t.on("error",o);const l=new e.SaxesParser,s=[];let c=!1,d=!1;const f=[];let p={},h="",g="",v,m="",T=[];l.on("error",o),l.on("opentag",E=>{E.name==="variable"&&this.stackEquals(s,["sparql","head"])?f.push(this.dataFactory.variable(E.attributes.name)):E.name==="results"&&this.stackEquals(s,["sparql"])?d=!0:E.name==="result"&&this.stackEquals(s,["sparql","results"])?p={}:E.name==="binding"&&this.stackEquals(s,["sparql","results","result"])?(h=E.attributes.name||"",g="",v=void 0,m="",T=[]):E.name==="triple"&&this.stackBeginsWith(s,["sparql","results","result"])?T.push({components:{}}):s[s.length-1]==="triple"&&this.stackBeginsWith(s,["sparql","results","result","binding"])?(g="",v=void 0,m="",["subject","predicate","object"].includes(E.name)?T[T.length-1].currentComponent=E.name:o(new Error(`Illegal quoted triple component '${E.name}' found on line ${l.line+1}`))):this.stackBeginsWith(s,["sparql","results","result","binding"])?(g=E.name,"xml:lang"in E.attributes?v={language:E.attributes["xml:lang"],direction:E.attributes["its:dir"]}:"datatype"in E.attributes?v=this.dataFactory.namedNode(E.attributes.datatype):v=void 0):E.name==="sparql"&&E.attributes.version&&(this.isValidVersion(E.attributes.version)||w.emit("error",new Error(`Detected unsupported version: ${E.attributes.version}`)),w.emit("version",E.attributes.version)),s.push(E.name)}),l.on("closetag",E=>{if(this.stackEquals(s,["sparql","head"])&&(w.emit("variables",f),c=!0),this.stackEquals(s,["sparql","results","result"])&&w.push(p),this.stackBeginsWith(s,["sparql","results","result","binding"])){let S;if(!h&&g)o(new Error(`Terms should have a name on line ${l.line+1}`));else if(g==="uri")S=this.dataFactory.namedNode(m);else if(g==="bnode")S=this.dataFactory.blankNode(m);else if(g==="literal")S=this.dataFactory.literal(m,v);else if(s[s.length-1]==="triple"){const N=T.pop();N&&N.components.subject&&N.components.predicate&&N.components.object?S=this.dataFactory.quad(N.components.subject,N.components.predicate,N.components.object):o(new Error(`Incomplete quoted triple on line ${l.line+1}`))}else g&&o(new Error(`Invalid term type '${g}' on line ${l.line+1}`));if(S)if(T.length>0){const N=T[T.length-1];N.components[N.currentComponent]&&o(new Error(`The ${N.currentComponent} in a quoted triple on line ${l.line+1} was already defined before`)),N.components[N.currentComponent]=S}else{const N=this.prefixVariableQuestionMark?"?"+h:h;p[N]=S}g=void 0}s.pop()}),l.on("text",E=>{this.stackBeginsWith(s,["sparql","results","result","binding"])&&s[s.length-1]===g&&(m=E)});const w=t.on("end",E=>{d?c||w.emit("variables",[]):w.emit("error",new Error("No valid SPARQL query results were found."))}).pipe(new u.Transform({objectMode:!0,transform(E,S,N){l.write(E),N()}}));return i&&!this.isValidVersion(i)&&w.destroy(new Error(`Detected unsupported version as media type parameter: ${i}`)),w}parseXmlBooleanStream(t,i){return i&&!this.isValidVersion(i)?Promise.reject(new Error(`Detected unsupported version as media type parameter: ${i}`)):new Promise((o,l)=>{const s=new e.SaxesParser,c=[];s.on("error",l),s.on("opentag",d=>{c.push(d.name)}),s.on("closetag",d=>{c.pop()}),s.on("text",d=>{this.stackEquals(c,["sparql","boolean"])&&o(d==="true")}),t.on("error",l).on("data",d=>s.write(d)).on("end",()=>l(new Error("No valid ASK response was found.")))})}stackEquals(t,i){return t.length===i.length&&t.every((o,l)=>i[l]===o)}stackBeginsWith(t,i){return t.length>=i.length&&i.every((o,l)=>t[l]===o)}};return hO.SparqlXmlParser=n,n.SUPPORTED_VERSIONS=["1.2","1.2-basic","1.1"],hO}var Bfe;function TCe(){return Bfe||(Bfe=1,(function(a){var e=Zh&&Zh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Zh&&Zh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(_Ce(),a)})(Zh)),Zh}var UC={exports:{}},Ufe;function wCe(){return Ufe||(Ufe=1,(function(a){(function(){var e;typeof window=="object"&&window?e=window:e=nb,a.exports?a.exports=e.Promise?e.Promise:t:e.Promise||(e.Promise=t);var u=e.setImmediate||function(f){setTimeout(f,1)};function n(f,p){return function(){f.apply(p,arguments)}}var r=Array.isArray||function(f){return Object.prototype.toString.call(f)==="[object Array]"};function t(f){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");if(typeof f!="function")throw new TypeError("not a function");this._state=null,this._value=null,this._deferreds=[],d(f,n(o,this),n(l,this))}function i(f){var p=this;if(this._state===null){this._deferreds.push(f);return}u(function(){var h=p._state?f.onFulfilled:f.onRejected;if(h===null){(p._state?f.resolve:f.reject)(p._value);return}var g;try{g=h(p._value)}catch(v){f.reject(v);return}f.resolve(g)})}function o(f){try{if(f===this)throw new TypeError("A promise cannot be resolved with itself.");if(f&&(typeof f=="object"||typeof f=="function")){var p=f.then;if(typeof p=="function"){d(n(p,f),n(o,this),n(l,this));return}}this._state=!0,this._value=f,s.call(this)}catch(h){l.call(this,h)}}function l(f){this._state=!1,this._value=f,s.call(this)}function s(){for(var f=0,p=this._deferreds.length;f<p;f++)i.call(this,this._deferreds[f]);this._deferreds=null}function c(f,p,h,g){this.onFulfilled=typeof f=="function"?f:null,this.onRejected=typeof p=="function"?p:null,this.resolve=h,this.reject=g}function d(f,p,h){var g=!1;try{f(function(v){g||(g=!0,p(v))},function(v){g||(g=!0,h(v))})}catch(v){if(g)return;g=!0,h(v)}}t.prototype.catch=function(f){return this.then(null,f)},t.prototype.then=function(f,p){var h=this;return new t(function(g,v){i.call(h,new c(f,p,g,v))})},t.all=function(){var f=Array.prototype.slice.call(arguments.length===1&&r(arguments[0])?arguments[0]:arguments);return new t(function(p,h){if(f.length===0)return p([]);var g=f.length;function v(T,w){try{if(w&&(typeof w=="object"||typeof w=="function")){var E=w.then;if(typeof E=="function"){E.call(w,function(S){v(T,S)},h);return}}f[T]=w,--g===0&&p(f)}catch(S){h(S)}}for(var m=0;m<f.length;m++)v(m,f[m])})},t.resolve=function(f){return f&&typeof f=="object"&&f.constructor===t?f:new t(function(p){p(f)})},t.reject=function(f){return new t(function(p,h){h(f)})},t.race=function(f){return new t(function(p,h){for(var g=0,v=f.length;g<v;g++)f[g].then(p,h)})}})()})(UC)),UC.exports}var QC,Qfe;function SCe(){if(Qfe)return QC;Qfe=1;var a=wCe();return QC=function(e,u,n){typeof u=="function"&&(n=u,u=null);var r="",t=new a(function(i,o){e.on("data",function(l){r+=typeof u=="string"?l.toString(u):l.toString()}),e.on("end",function(){i(r)}),e.on("error",o)});return n&&t.then(function(i){n(null,i)},n),t},QC}var Vfe;function ECe(){if(Vfe)return Jh;Vfe=1;var a=Jh&&Jh.__awaiter||function(s,c,d,f){function p(h){return h instanceof d?h:new d(function(g){g(h)})}return new(d||(d=Promise))(function(h,g){function v(w){try{T(f.next(w))}catch(E){g(E)}}function m(w){try{T(f.throw(w))}catch(E){g(E)}}function T(w){w.done?h(w.value):p(w.value).then(v,m)}T((f=f.apply(s,c||[])).next())})};Object.defineProperty(Jh,"__esModule",{value:!0}),Jh.SparqlEndpointFetcher=void 0;const e=LTe(),u=Tl,n=CTe(),r=$n(),t=bCe(),i=TCe(),o=SCe();let l=class jg{constructor(c){var d,f,p,h,g;this.method=(d=c?.method)!==null&&d!==void 0?d:"POST",this.timeout=c?.timeout,this.forceGetIfUrlLengthBelow=(f=c?.forceGetIfUrlLengthBelow)!==null&&f!==void 0?f:0,this.directPost=(p=c?.directPost)!==null&&p!==void 0?p:!1,this.additionalUrlParams=(h=c?.additionalUrlParams)!==null&&h!==void 0?h:new URLSearchParams,this.defaultHeaders=(g=c?.defaultHeaders)!==null&&g!==void 0?g:new Headers,this.fetchCb=c?.fetch,this.sparqlJsonParser=new t.SparqlJsonParser(c),this.sparqlXmlParser=new i.SparqlXmlParser(c),this.sparqlParsers={[jg.CONTENTTYPE_SPARQL_JSON]:{parseBooleanStream:v=>this.sparqlJsonParser.parseJsonBooleanStream(v),parseResultsStream:v=>this.sparqlJsonParser.parseJsonResultsStream(v)},[jg.CONTENTTYPE_SPARQL_XML]:{parseBooleanStream:v=>this.sparqlXmlParser.parseXmlBooleanStream(v),parseResultsStream:v=>this.sparqlXmlParser.parseXmlResultsStream(v)}}}getQueryType(c){const d=new r.Parser({sparqlStar:!0}).parse(c);return d.type==="query"?d.queryType==="DESCRIBE"?"CONSTRUCT":d.queryType:"UNKNOWN"}getUpdateTypes(c){const d=new r.Parser({sparqlStar:!0}).parse(c);if(d.type==="update"){const f={};for(const p of d.updates)"type"in p?f[p.type]=!0:f[p.updateType]=!0;return f}return"UNKNOWN"}fetchBindings(c,d){return a(this,void 0,void 0,function*(){const[f,p]=yield this.fetchRawStream(c,d,jg.CONTENTTYPE_SPARQL),h=this.sparqlParsers[f];if(!h)throw new Error(`Unknown SPARQL results content type: ${f}`);return h.parseResultsStream(p)})}fetchAsk(c,d){return a(this,void 0,void 0,function*(){const[f,p]=yield this.fetchRawStream(c,d,jg.CONTENTTYPE_SPARQL),h=this.sparqlParsers[f];if(!h)throw new Error(`Unknown SPARQL results content type: ${f}`);return h.parseBooleanStream(p)})}fetchTriples(c,d){return a(this,void 0,void 0,function*(){const[f,p]=yield this.fetchRawStream(c,d,jg.CONTENTTYPE_TURTLE);return p.pipe(new u.StreamParser({format:f}))})}fetchUpdate(c,d){return a(this,void 0,void 0,function*(){const f=new AbortController,p={};this.defaultHeaders.forEach((g,v)=>{p[v]=g});const h={method:"POST",headers:Object.assign(Object.assign({},p),{"content-type":"application/sparql-update"}),body:d,signal:f.signal};yield this.handleFetchCall(c,h,{ignoreBody:!0}),f.abort()})}fetchRawStream(c,d,f){return a(this,void 0,void 0,function*(){let p,h;if(this.method==="POST"&&this.forceGetIfUrlLengthBelow<=c.length)p=this.method,h=c;else{const m=`${c}?query=${encodeURIComponent(d)}`;p=this.method==="GET"||m.length<this.forceGetIfUrlLengthBelow?"GET":"POST",h=p==="POST"?c:m}let g;const v=new Headers(this.defaultHeaders);if(v.append("Accept",f),p==="POST"){if(this.directPost)v.append("Content-Type","application/sparql-query"),g=d,this.additionalUrlParams.toString().length>0&&(h+=`?${this.additionalUrlParams.toString()}`);else{v.append("Content-Type","application/x-www-form-urlencoded"),g=new URLSearchParams,g.set("query",d);for(const[m,T]of this.additionalUrlParams.entries())g.set(m,T)}v.append("Content-Length",g.toString().length.toString())}else this.additionalUrlParams.toString().length>0&&(h+=`&${this.additionalUrlParams.toString()}`);return this.handleFetchCall(h,{headers:v,method:p,body:g})})}handleFetchCall(c,d,f){return a(this,void 0,void 0,function*(){var p,h,g;let v,m;if(this.timeout){const E=new AbortController;d.signal=E.signal,v=setTimeout(()=>E.abort(),this.timeout)}const T=yield((p=this.fetchCb)!==null&&p!==void 0?p:fetch)(c,d);if(clearTimeout(v),!f?.ignoreBody&&T.body&&(m=e(T.body)?T.body:(0,n.readableFromWeb)(T.body)),!T.ok||!m&&!f?.ignoreBody){const E=c.split("?").at(0),S=m?yield o(m):"empty response";throw new Error(`Invalid SPARQL endpoint response from ${E} (HTTP status ${T.status}):
${S}`)}return[(g=(h=T.headers.get("Content-Type"))===null||h===void 0?void 0:h.split(";").at(0))!==null&&g!==void 0?g:"",m]})}};return Jh.SparqlEndpointFetcher=l,l.CONTENTTYPE_SPARQL_JSON="application/sparql-results+json",l.CONTENTTYPE_SPARQL_XML="application/sparql-results+xml",l.CONTENTTYPE_TURTLE="text/turtle",l.CONTENTTYPE_SPARQL=`${l.CONTENTTYPE_SPARQL_JSON};q=1.0,${l.CONTENTTYPE_SPARQL_XML};q=0.7`,Jh}var Hfe;function A3e(){return Hfe||(Hfe=1,(function(a){var e=Kh&&Kh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Kh&&Kh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(ECe(),a)})(Kh)),Kh}var kfe;function O3e(){if(kfe)return iO;kfe=1,Object.defineProperty(iO,"__esModule",{value:!0}),iO.QuadDestinationSparql=void 0;const a=O1(),e=zt(),u=A3e(),n=J4();let r=class{constructor(i,o,l,s){this.url=i,this.context=o,this.mediatorHttp=l,this.endpointFetcher=new u.SparqlEndpointFetcher({fetch:(c,d)=>this.mediatorHttp.mediate({input:c,init:d,context:this.context}),prefixVariableQuestionMark:!0,dataFactory:s})}async update(i){const o=this.createCombinedQuadsQuery(i.insert,i.delete);await this.wrapSparqlUpdateRequest(o)}createCombinedQuadsQuery(i,o){return new e.ArrayIterator([],{autoStart:!1}).append(this.createQuadsQuery("DELETE",o)).append(o&&i?[` ;
`]:[]).append(this.createQuadsQuery("INSERT",i))}createQuadsQuery(i,o){return o?o.map(l=>{let s=`${(0,n.termToString)(l.subject)} ${(0,n.termToString)(l.predicate)} ${(0,n.termToString)(l.object)} .`;return l.graph.termType==="DefaultGraph"?s=`  ${s}
`:s=`  GRAPH ${(0,n.termToString)(l.graph)} { ${s} }
`,s}).prepend([`${i} DATA {
`]).append(["}"]):new e.ArrayIterator([],{autoStart:!1})}async wrapSparqlUpdateRequest(i){const o=await(0,a.stringify)(i);await this.endpointFetcher.fetchUpdate(this.url,o)}async deleteGraphs(i,o,l){const s=Array.isArray(i)?i:[i],c=[];for(const d of s){let f;typeof d=="string"?f=d:d.termType==="DefaultGraph"?f="DEFAULT":f=`GRAPH <${d.value}>`,c.push(`${l?"DROP":"CLEAR"} ${o?"":"SILENT "}${f}`)}await this.endpointFetcher.fetchUpdate(this.url,c.join("; "))}async createGraphs(i,o){const l=[];for(const s of i)l.push(`CREATE${o?"":" SILENT"} GRAPH <${s.value}>`);await this.endpointFetcher.fetchUpdate(this.url,l.join("; "))}};return iO.QuadDestinationSparql=r,iO}var zfe;function ACe(){if(zfe)return aO;zfe=1,Object.defineProperty(aO,"__esModule",{value:!0}),aO.ActorRdfUpdateHypermediaSparql=void 0;const a=lV(),e=lt(),u=De(),n=O3e();let r=class extends a.ActorRdfUpdateHypermedia{constructor(i){super(i,"sparql")}async testMetadata(i){return!i.forceDestinationType&&!i.metadata.sparqlService&&!(this.checkUrlSuffixSparql&&(i.url.endsWith("/sparql")||i.url.endsWith("/sparql/")))&&!(this.checkUrlSuffixUpdate&&(i.url.endsWith("/update")||i.url.endsWith("/update/")))?(0,u.failTest)(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql or /update.`):(0,u.passTestVoid)()}async run(i){this.logInfo(i.context,`Identified as sparql destination: ${i.url}`);const o=i.context.getSafe(e.KeysInitQuery.dataFactory);return{destination:new n.QuadDestinationSparql(i.metadata.sparqlService||i.url,i.context,this.mediatorHttp,o)}}};return aO.ActorRdfUpdateHypermediaSparql=r,aO}var Gfe;function yV(){return Gfe||(Gfe=1,(function(a){var e=Xh&&Xh.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Xh&&Xh.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(ACe(),a),u(O3e(),a)})(Xh)),Xh}var ty={},wO={},$fe;function OCe(){if($fe)return wO;$fe=1,Object.defineProperty(wO,"__esModule",{value:!0}),wO.ActorQueryOperationAsk=void 0;const a=qr(),e=De(),u=Zt();let n=class extends a.ActorQueryOperationTypedMediated{constructor(t){super(t,"ask")}async testOperation(t,i){return(0,e.passTestVoid)()}async runOperation(t,i){const o=await this.mediatorQueryOperation.mediate({operation:t.input,context:i}),{bindingsStream:l}=(0,u.getSafeBindings)(o);return{type:"boolean",execute:async()=>(await l.take(1).toArray()).length===1}}};return wO.ActorQueryOperationAsk=n,wO}var Xfe;function mV(){return Xfe||(Xfe=1,(function(a){var e=ty&&ty.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ty&&ty.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(OCe(),a)})(ty)),ty}var ry={},SO={},Kfe;function xCe(){if(Kfe)return SO;Kfe=1,Object.defineProperty(SO,"__esModule",{value:!0}),SO.ActorQueryOperationBgpJoin=void 0;const a=qr(),e=lt(),u=De(),n=Ut();let r=class extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"bgp")}async testOperation(i,o){return(0,u.passTestVoid)()}async runOperation(i,o){const l=o.getSafe(e.KeysInitQuery.dataFactory),s=new n.Factory(l);return this.mediatorQueryOperation.mediate({operation:s.createJoin(i.patterns),context:o})}};return SO.ActorQueryOperationBgpJoin=r,SO}var Jfe;function bV(){return Jfe||(Jfe=1,(function(a){var e=ry&&ry.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ry&&ry.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(xCe(),a)})(ry)),ry}var ny={},EO={},AO={},Wfe;function x3e(){if(Wfe)return AO;Wfe=1,Object.defineProperty(AO,"__esModule",{value:!0}),AO.BindingsToQuadsIterator=void 0;const a=zt(),e=Yr();let u=class G6 extends a.MultiTransformIterator{constructor(r,t,i){super(i,{autoStart:!1}),this.dataFactory=r,this.template=t,this.blankNodeCounter=0}static bindTerm(r,t){return t.termType==="Variable"?r.get(t):t}static bindQuad(r,t){try{return(0,e.mapTermsNested)(t,i=>{const o=G6.bindTerm(r,i);if(!o)throw new Error("Unbound term");return o})}catch{}}static localizeBlankNode(r,t,i){return i.termType==="BlankNode"?r.blankNode(`${i.value}${t}`):i}static localizeQuad(r,t,i){return(0,e.mapTermsNested)(i,o=>G6.localizeBlankNode(r,t,o))}bindTemplate(r,t,i){return t.map(G6.localizeQuad.bind(null,this.dataFactory,i)).map(l=>G6.bindQuad.bind(null,r)(l)).filter(Boolean)}_createTransformer(r){return new a.ArrayIterator(this.bindTemplate(r,this.template,this.blankNodeCounter++),{autoStart:!1})}};return AO.BindingsToQuadsIterator=u,AO}var Yfe;function RCe(){if(Yfe)return EO;Yfe=1,Object.defineProperty(EO,"__esModule",{value:!0}),EO.ActorQueryOperationConstruct=void 0;const a=qr(),e=lt(),u=De(),n=Zt(),r=Yr(),t=Ut(),i=x3e();let o=class R3e extends a.ActorQueryOperationTypedMediated{constructor(s){super(s,"construct")}static getVariables(s){return(0,r.uniqTerms)([].concat.apply([],s.map(c=>(0,r.getVariables)((0,r.getTermsNested)(c)))))}async testOperation(s,c){return(0,u.passTestVoid)()}async runOperation(s,c){const d=c.getSafe(e.KeysInitQuery.dataFactory),f=R3e.getVariables(s.template),p={type:t.Algebra.types.PROJECT,input:s.input,variables:f},h=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:p,context:c})),g=new i.BindingsToQuadsIterator(d,s.template,h.bindingsStream);return{metadata:()=>h.metadata().then(m=>({...m,order:void 0,cardinality:{type:m.cardinality.type,value:m.cardinality.value*s.template.length},availableOrders:void 0})),quadStream:g,type:"quads"}}};return EO.ActorQueryOperationConstruct=o,EO}var Zfe;function xP(){return Zfe||(Zfe=1,(function(a){var e=ny&&ny.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ny&&ny.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(RCe(),a),u(x3e(),a)})(ny)),ny}var ay={},OO={},epe;function NCe(){if(epe)return OO;epe=1,Object.defineProperty(OO,"__esModule",{value:!0}),OO.ActorQueryOperationDistinctHash=void 0;const a=qr(),e=De(),u=Zt();let n=class extends a.ActorQueryOperationTypedMediated{constructor(t){super(t,"distinct")}async testOperation(t,i){return(0,e.passTestVoid)()}async runOperation(t,i){const o=await this.mediatorQueryOperation.mediate({operation:t.input,context:i});if(o.type==="quads"){const d=(0,u.getSafeQuads)(o);return{type:"quads",quadStream:d.quadStream.filter(await this.newHashFilterQuads(i)),metadata:d.metadata}}const l=(0,u.getSafeBindings)(o),s=(await l.metadata()).variables.map(d=>d.variable);return{type:"bindings",bindingsStream:l.bindingsStream.filter(await this.newHashFilter(i,s)),metadata:l.metadata}}async newHashFilter(t,i){const{hashFunction:o}=await this.mediatorHashBindings.mediate({context:t}),l={};return s=>{const c=o(s,i);return!(c in l)&&(l[c]=!0)}}async newHashFilterQuads(t){const{hashFunction:i}=await this.mediatorHashQuads.mediate({context:t}),o={};return l=>{const s=i(l);return!(s in o)&&(o[s]=!0)}}};return OO.ActorQueryOperationDistinctHash=n,OO}var tpe;function gV(){return tpe||(tpe=1,(function(a){var e=ay&&ay.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ay&&ay.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(NCe(),a)})(ay)),ay}var iy={},xO={},rpe;function ICe(){if(rpe)return xO;rpe=1,Object.defineProperty(xO,"__esModule",{value:!0}),xO.ActorQueryOperationExtend=void 0;const a=qr(),e=De(),u=pn(),n=$e(),r=Zt();let t=class extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"extend"),this.mediatorExpressionEvaluatorFactory=o.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,e.passTestVoid)()}async runOperation(o,l){const{expression:s,input:c,variable:d}=o,f=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c,context:l}));if((await f.metadata()).variables.some(v=>v.variable.equals(d)))throw new Error(`Illegal binding to variable '${d.value}' that has already been bound`);const p=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:s,context:l}),h=async(v,m,T)=>{try{const w=await p.evaluate(v),E=v.set(d,w);T(E)}catch(w){(0,n.isExpressionError)(w)?(T(v),this.logWarn(l,`Expression error for extend operation (${w.message})with bindings '${(0,u.bindingsToString)(v)}'`)):g.emit("error",w)}m()},g=f.bindingsStream.transform({autoStart:!1,transform:h});return{type:"bindings",bindingsStream:g,async metadata(){const v=await f.metadata();return{...v,variables:[...v.variables,{variable:d,canBeUndef:!1}]}}}}};return xO.ActorQueryOperationExtend=t,xO}var npe;function vV(){return npe||(npe=1,(function(a){var e=iy&&iy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=iy&&iy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(ICe(),a)})(iy)),iy}var uy={},RO={},ape;function DCe(){if(ape)return RO;ape=1,Object.defineProperty(RO,"__esModule",{value:!0}),RO.ActorQueryOperationFilter=void 0;const a=qr(),e=De(),u=pn(),n=$e(),r=Zt();let t=class extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"filter"),this.mediatorExpressionEvaluatorFactory=o.mediatorExpressionEvaluatorFactory}async testOperation(){return(0,e.passTestVoid)()}async runOperation(o,l){const s=await this.mediatorQueryOperation.mediate({operation:o.input,context:l}),c=(0,r.getSafeBindings)(s);(0,r.validateQueryOutput)(c,"bindings");const d=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:o.expression,context:l}),f=async(h,g,v)=>{try{await d.evaluateAsEBV(h)&&v(h)}catch(m){(0,n.isExpressionError)(m)?this.logWarn(l,"Error occurred while filtering.",()=>({error:m,bindings:(0,u.bindingsToString)(h)})):p.emit("error",m)}g()},p=c.bindingsStream.transform({transform:f,autoStart:!1});return{type:"bindings",bindingsStream:p,metadata:c.metadata}}};return RO.ActorQueryOperationFilter=t,RO}var ipe;function _V(){return ipe||(ipe=1,(function(a){var e=uy&&uy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=uy&&uy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(DCe(),a)})(uy)),uy}var oy={},NO={},upe;function FCe(){if(upe)return NO;upe=1,Object.defineProperty(NO,"__esModule",{value:!0}),NO.ActorQueryOperationFromQuad=void 0;const a=qr(),e=lt(),u=De(),n=Ut();let r=class mu extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"from")}static copyOperation(i,o){const l={};for(const s of Object.keys(i))Array.isArray(i[s])&&s!=="template"?s==="variables"?l[s]=i[s]:l[s]=i[s].map(o):mu.ALGEBRA_TYPES.includes(i[s].type)?l[s]=o(i[s]):l[s]=i[s];return l}static applyOperationDefaultGraph(i,o,l){if(o.type==="bgp"&&o.patterns.length>0||o.type==="path"||o.type==="pattern"){if(o.type==="bgp")return mu.joinOperations(i,o.patterns.map(c=>{if(c.graph.termType!=="DefaultGraph")return i.createBgp([c]);const d=l.map(f=>i.createBgp([Object.assign(i.createPattern(c.subject,c.predicate,c.object,f),{metadata:c.metadata})]));return mu.unionOperations(i,d)}));if(o.graph.termType!=="DefaultGraph")return o;const s=l.map(c=>o.type==="path"?i.createPath(o.subject,o.predicate,o.object,c):Object.assign(i.createPattern(o.subject,o.predicate,o.object,c),{metadata:o.metadata}));return mu.unionOperations(i,s)}return mu.copyOperation(o,s=>this.applyOperationDefaultGraph(i,s,l))}static applyOperationNamedGraph(i,o,l,s){if(o.type==="bgp"&&o.patterns.length>0||o.type==="path"||o.type==="pattern"){const c=o.type==="bgp"?o.patterns[0].graph:o.graph;if(c.termType==="DefaultGraph")return{type:n.Algebra.types.BGP,patterns:[]};if(c.termType==="Variable"){if(l.length===1){const f=l[0],p={};p[`?${c.value}`]=f;const h=i.createValues([c],[p]);let g;return o.type==="bgp"?g=i.createBgp(o.patterns.map(v=>i.createPattern(v.subject,v.predicate,v.object,f))):o.type==="path"?g=i.createPath(o.subject,o.predicate,o.object,f):g=i.createPattern(o.subject,o.predicate,o.object,f),i.createJoin([h,g])}return mu.unionOperations(i,l.map(f=>mu.applyOperationNamedGraph(i,o,[f],s)))}return[...l,...s].some(f=>f.equals(c))?o:{type:n.Algebra.types.BGP,patterns:[]}}return mu.copyOperation(o,c=>this.applyOperationNamedGraph(i,c,l,s))}static joinOperations(i,o){if(o.length===1)return o[0];if(o.length>1)return i.createJoin(o);throw new Error("A join can only be applied on at least one operation")}static unionOperations(i,o){if(o.length===1)return o[0];if(o.length>1)return i.createUnion(o);throw new Error("A union can only be applied on at least one operation")}static createOperation(i,o){let l=o.input;return o.default.length>0&&(l=mu.applyOperationDefaultGraph(i,l,o.default)),(o.named.length>0||o.default.length>0)&&(l=mu.applyOperationNamedGraph(i,l,o.named,o.default)),l}async testOperation(i,o){return(0,u.passTestVoid)()}async runOperation(i,o){const l=o.getSafe(e.KeysInitQuery.dataFactory),s=new n.Factory(l),c=mu.createOperation(s,i);return this.mediatorQueryOperation.mediate({operation:c,context:o})}};return NO.ActorQueryOperationFromQuad=r,r.ALGEBRA_TYPES=Object.keys(n.Algebra.types).map(t=>n.Algebra.types[t]),NO}var ope;function TV(){return ope||(ope=1,(function(a){var e=oy&&oy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=oy&&oy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(FCe(),a)})(oy)),oy}var sy={},IO={},spe;function PCe(){if(spe)return IO;spe=1,Object.defineProperty(IO,"__esModule",{value:!0}),IO.ActorQueryOperationProject=void 0;const a=qr(),e=lt(),u=De(),n=Hq(),r=Zt();let t=class extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"project")}async testOperation(o,l){return(0,u.passTestVoid)()}async runOperation(o,l){const s=l.getSafe(e.KeysInitQuery.dataFactory),c=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:o.input,context:l})),d=await c.metadata(),f=Object.fromEntries(d.variables.map(w=>[w.variable.value,w])),p=o.variables.map(w=>({variable:w,canBeUndef:!1})),h=Object.fromEntries(p.map(w=>[w.variable.value,w])),g=d.variables.filter(w=>!(w.variable.value in h)),v=p.map(w=>({variable:w.variable,canBeUndef:!(w.variable.value in f)||f[w.variable.value].canBeUndef}));let m=g.length===0?c.bindingsStream:c.bindingsStream.map(w=>{for(const E of g)w=w.delete(E.variable);return w}),T=0;return m=m.map(w=>{T++;const E=new Map;return w.map(S=>{if(S instanceof n.BlankNodeBindingsScoped){let N=E.get(S.value);return N||(N=s.blankNode(`${S.value}${T}`),E.set(S.value,N)),N}return S})}),{type:"bindings",bindingsStream:m,metadata:async()=>({...d,variables:v})}}};return IO.ActorQueryOperationProject=t,IO}var cpe;function wV(){return cpe||(cpe=1,(function(a){var e=sy&&sy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=sy&&sy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(PCe(),a)})(sy)),sy}var cy={},DO={},lpe;function jCe(){if(lpe)return DO;lpe=1,Object.defineProperty(DO,"__esModule",{value:!0}),DO.ActorQueryOperationReducedHash=void 0;const a=qr(),e=De(),u=Zt(),n=wb();let r=class extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"reduced")}async testOperation(i,o){return(0,e.passTestVoid)()}async runOperation(i,o){const l=(0,u.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:i.input,context:o})),s=(await l.metadata()).variables.map(d=>d.variable);return{type:"bindings",bindingsStream:l.bindingsStream.filter(await this.newHashFilter(o,s)),metadata:l.metadata}}async newHashFilter(i,o){const{hashFunction:l}=await this.mediatorHashBindings.mediate({context:i}),s=new n.LRUCache({max:this.cacheSize});return c=>{const d=l(c,o);return s.has(d)?!1:(s.set(d,!0),!0)}}};return DO.ActorQueryOperationReducedHash=r,DO}var dpe;function SV(){return dpe||(dpe=1,(function(a){var e=cy&&cy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=cy&&cy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(jCe(),a)})(cy)),cy}var ly={},FO={},fpe;function MCe(){if(fpe)return FO;fpe=1,Object.defineProperty(FO,"__esModule",{value:!0}),FO.ActorQueryOperationSlice=void 0;const a=qr(),e=lt(),u=De();let n=class extends a.ActorQueryOperationTypedMediated{constructor(t){super(t,"slice")}async testOperation(t,i){return(0,u.passTestVoid)()}async runOperation(t,i){t.length&&(i=i.set(e.KeysQueryOperation.limitIndicator,t.length));const o=await this.mediatorQueryOperation.mediate({operation:t.input,context:i});return o.type==="bindings"?{type:"bindings",bindingsStream:this.sliceStream(o.bindingsStream,t),metadata:this.sliceMetadata(o,t)}:o.type==="quads"?{type:"quads",quadStream:this.sliceStream(o.quadStream,t),metadata:this.sliceMetadata(o,t)}:o}sliceStream(t,i){const o=!!i.length||i.length===0,{start:l}=i,s=o?i.start+i.length-1:Number.POSITIVE_INFINITY;return t.transform({offset:l,limit:Math.max(s-l+1,0),autoStart:!1})}sliceMetadata(t,i){const o=!!i.length||i.length===0;return()=>t.metadata().then(l=>{const s={...l.cardinality};return Number.isFinite(s.value)&&(s.value=Math.max(0,s.value-i.start),o&&(s.value=Math.min(s.value,i.length))),{...l,cardinality:s}})}};return FO.ActorQueryOperationSlice=n,FO}var ppe;function EV(){return ppe||(ppe=1,(function(a){var e=ly&&ly.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ly&&ly.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(MCe(),a)})(ly)),ly}var dy={},PO={},hpe;function CCe(){if(hpe)return PO;hpe=1,Object.defineProperty(PO,"__esModule",{value:!0}),PO.ActorQueryOperationUnion=void 0;const a=qr(),e=De(),u=xa(),n=Zt(),r=zt();let t=class aF extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"union")}static unionVariables(o){const l={};for(const s of o)for(const c of s){l[c.variable.value]||(l[c.variable.value]={variable:c.variable,canBeUndef:c.canBeUndef,occurrences:0});const d=l[c.variable.value];d.canBeUndef=d.canBeUndef||c.canBeUndef,d.occurrences++}return Object.values(l).map(s=>s.occurrences===o.length?{variable:s.variable,canBeUndef:s.canBeUndef}:{variable:s.variable,canBeUndef:!0})}static async unionMetadata(o,l,s,c){let d=(await c.mediate({mode:"initialize",context:s})).metadata;for(const p of o)d={...p,...(await c.mediate({mode:"append",accumulatedMetadata:d,appendingMetadata:p,context:s})).metadata};d.state=new u.MetadataValidationState;const f=()=>d.state.invalidate();for(const p of o)p.state.addInvalidateListener(f);if(l){const p=o.map(h=>h.variables);d.variables=aF.unionVariables(p)}return d}async testOperation(o,l){return(0,e.passTestVoid)()}async runOperation(o,l){const s=await Promise.all(o.input.map(d=>this.mediatorQueryOperation.mediate({operation:d,context:l})));let c;for(const d of s)if(c===void 0)c=d.type;else if(c!==d.type)throw new Error(`Unable to union ${c} and ${d.type}`);if(c==="bindings"||o.input.length===0){const d=s.map(n.getSafeBindings);return{type:"bindings",bindingsStream:new r.UnionIterator(d.map(h=>h.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(d.map(h=>h.metadata())).then(h=>aF.unionMetadata(h,!0,l,this.mediatorRdfMetadataAccumulate))}}if(c==="quads"){const d=s.map(n.getSafeQuads);return{type:"quads",quadStream:new r.UnionIterator(d.map(h=>h.quadStream),{autoStart:!1}),metadata:()=>Promise.all(d.map(h=>h.metadata())).then(h=>aF.unionMetadata(h,!1,l,this.mediatorRdfMetadataAccumulate))}}throw new Error(`Unable to union ${c}`)}};return PO.ActorQueryOperationUnion=t,PO}var ype;function RP(){return ype||(ype=1,(function(a){var e=dy&&dy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=dy&&dy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(CCe(),a)})(dy)),dy}var fy={},jO={},py={},MO={},CO={},mpe;function N3e(){if(mpe)return CO;mpe=1,Object.defineProperty(CO,"__esModule",{value:!0}),CO.PathVariableObjectIterator=void 0;const a=Zt(),e=zt(),u=$t();let n=class extends e.BufferedIterator{constructor(t,i,o,l,s,c,d,f=16){super({autoStart:!1}),this.algebraFactory=t,this.subject=i,this.predicate=o,this.graph=l,this.context=s,this.mediatorQueryOperation=c,this.maxRunningOperations=f,this.termHashes=new Map,this.runningOperations=[],this.pendingOperations=[],this.started=!1,this._push(this.subject,d)}getProperty(t,i){return!this.started&&t==="metadata"&&this.startNextOperation(!1).catch(o=>this.emit("error",o)),super.getProperty(t,i)}_end(t){for(const i of this.runningOperations)i.destroy();super._end(t)}_push(t,i=!0){let o;if(i&&(o=(0,u.termToString)(t),this.termHashes.has(o)))return!1;const l=this.algebraFactory.dataFactory.variable("b");return this.pendingOperations.push({variable:l,operation:this.algebraFactory.createPath(t,this.predicate,l,this.graph)}),o&&(this.termHashes.set(o,t),super._push(t)),!0}async startNextOperation(t){this.started=!0;const i=this.pendingOperations.pop(),o=(0,a.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:i.operation,context:this.context})),l=o.bindingsStream.map(s=>s.get(i.variable));this.runningOperations.push(l),l.on("error",s=>this.destroy(s)),l.on("readable",()=>{t&&this._fillBufferAsync(),this.readable=!0}),l.on("end",()=>{this.runningOperations.splice(this.runningOperations.indexOf(l),1),t&&this._fillBufferAsync(),this.readable=!0}),this.getProperty("metadata")||this.setProperty("metadata",o.metadata)}_read(t,i){const o=this;(async function(){for(;o.runningOperations.length<o.maxRunningOperations&&o.pendingOperations.length!==0;)await o.startNextOperation(!0);let l=0,s,c=!0;for(;!c||l!==(l=t);){c=!0;for(let d=0;d<o.runningOperations.length&&t>0;d++)(s=o.runningOperations[d].read())!==null&&(o._push(s)?t--:c=!1)}o.closeIfNeeded()})().then(()=>{i()},l=>this.destroy(l))}closeIfNeeded(){this.runningOperations.length===0&&this.pendingOperations.length===0&&this.close()}};return CO.PathVariableObjectIterator=n,CO}var bpe;function LCe(){if(bpe)return MO;bpe=1,Object.defineProperty(MO,"__esModule",{value:!0}),MO.ActorAbstractPath=void 0;const a=qr(),e=lt(),u=De(),n=Zt(),r=zt(),t=$t(),i=Ut(),o=N3e();let l=class extends a.ActorQueryOperationTypedMediated{constructor(c,d){super(c,"path"),this.predicateType=d}async testOperation(c,d){return c.predicate.type!==this.predicateType?(0,u.failTest)(`This Actor only supports ${this.predicateType} Path operations.`):(0,u.passTestVoid)()}generateVariable(c,d,f){return f?d&&(d.subject.value===f||d.object.value===f)?this.generateVariable(c,d,`${f}b`):c.variable(f):this.generateVariable(c,d,"b")}async isPathArbitraryLengthDistinct(c,d,f){return d.get(e.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?(d=d.set(e.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),{context:d,operation:void 0}):(d=d.set(e.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),{context:d,operation:(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:c.createDistinct(f),context:d}))})}async predicateStarGraphVariable(c,d,f,p,h,g,v){const m=this.getPathSources(f),T=this.generateVariable(g.dataFactory,g.createPath(c,f,d,p)),w=g.createUnion([this.assignPatternSources(g,g.createPattern(c,T,d,p),m),this.assignPatternSources(g,g.createPattern(d,T,c,p),m)]),E=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:h,operation:w})),S=new Set;return{bindingsStream:new r.MultiTransformIterator(E.bindingsStream,{multiTransform:j=>{const q=j.get(p);return S.has(q.value)?new r.EmptyIterator:(S.add(q.value),new r.TransformIterator(async()=>{const O=new r.BufferedIterator;return await this.getObjectsPredicateStar(g,c,f,q,h,{},O,{count:0}),O.map(I=>v.bindings([[d,I],[p,q]]))},{maxBufferSize:128}))},autoStart:!1}),metadata:E.metadata}}async getObjectsPredicateStarEval(c,d,f,p,h,g,v,m){if(p.termType==="Variable")return this.predicateStarGraphVariable(c,f,d,p,h,v,m);const T=new o.PathVariableObjectIterator(v,c,d,p,h,this.mediatorQueryOperation,g);return{bindingsStream:T.map(E=>m.bindings([[f,E]])),async metadata(){const E=await new Promise(S=>{T.getProperty("metadata",N=>S(N()))});return E.cardinality.value++,E}}}async getObjectsPredicateStar(c,d,f,p,h,g,v,m){const T=(0,t.termToString)(d);if(g[T])return;v._push(d),g[T]=d,m.count++;const w=this.generateVariable(c.dataFactory),E=c.createPath(d,f,w,p),S=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:E,context:h}));return S.bindingsStream.on("data",async N=>{const j=N.get(w);await this.getObjectsPredicateStar(c,j,f,p,h,g,v,m)}),S.bindingsStream.on("end",()=>{--m.count===0&&v.close()}),S.metadata}async getSubjectAndObjectBindingsPredicateStar(c,d,f,p,h,g,v,m,T,w,E,S,N){const j=(0,t.termToString)(p)+(0,t.termToString)(g);if(T[j])return;if(E.count++,T[j]=!0,w._push(N.bindings([[c,f],[d,p]])),j in m){const O=await m[j];for(const I of O)await this.getSubjectAndObjectBindingsPredicateStar(c,d,f,I,h,g,v,m,T,w,E,S,N);--E.count===0&&w.close();return}const q=new Promise(async(O,I)=>{const A=[],P=this.generateVariable(S.dataFactory),C=S.createPath(p,h,P,g),B=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:C,context:v}));B.bindingsStream.on("data",async H=>{const V=H.get(P);A.push(V),await this.getSubjectAndObjectBindingsPredicateStar(c,d,f,V,h,g,v,m,T,w,E,S,N)}),B.bindingsStream.on("error",I),B.bindingsStream.on("end",()=>{--E.count===0&&w.close(),O(A)})});m[j]=q}getPathSources(c){switch(c.type){case i.Algebra.types.ALT:case i.Algebra.types.SEQ:return c.input.flatMap(d=>this.getPathSources(d));case i.Algebra.types.INV:case i.Algebra.types.ONE_OR_MORE_PATH:case i.Algebra.types.ZERO_OR_MORE_PATH:case i.Algebra.types.ZERO_OR_ONE_PATH:return this.getPathSources(c.path);case i.Algebra.types.LINK:case i.Algebra.types.NPS:{const d=(0,n.getOperationSource)(c);if(!d)throw new Error("Could not find a required source on a link path operation");return[d]}}}assignPatternSources(c,d,f){if(f.length===0)throw new Error("Attempted to assign zero sources to a pattern during property path handling");return f.length===1?(0,n.assignOperationSource)(d,f[0]):c.createUnion(f.map(p=>(0,n.assignOperationSource)(d,p)),!0)}};return MO.ActorAbstractPath=l,MO}var gpe;function El(){return gpe||(gpe=1,(function(a){var e=py&&py.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=py&&py.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(LCe(),a),u(N3e(),a)})(py)),py}var vpe;function qCe(){if(vpe)return jO;vpe=1,Object.defineProperty(jO,"__esModule",{value:!0}),jO.ActorQueryOperationPathAlt=void 0;const a=El(),e=RP(),u=lt(),n=Zt(),r=zt(),t=Ut();let i=class extends a.ActorAbstractPath{constructor(l){super(l,t.Algebra.types.ALT)}async runOperation(l,s){const c=s.getSafe(u.KeysInitQuery.dataFactory),d=new t.Factory(c),f=l.predicate,p=(await Promise.all(f.input.map(v=>this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(l.subject,v,l.object,l.graph)})))).map(n.getSafeBindings);return{type:"bindings",bindingsStream:new r.UnionIterator(p.map(v=>v.bindingsStream),{autoStart:!1}),metadata:()=>Promise.all(p.map(v=>v.metadata())).then(v=>e.ActorQueryOperationUnion.unionMetadata(v,!0,s,this.mediatorRdfMetadataAccumulate))}}};return jO.ActorQueryOperationPathAlt=i,jO}var _pe;function AV(){return _pe||(_pe=1,(function(a){var e=fy&&fy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=fy&&fy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(qCe(),a)})(fy)),fy}var hy={},LO={},Tpe;function BCe(){if(Tpe)return LO;Tpe=1,Object.defineProperty(LO,"__esModule",{value:!0}),LO.ActorQueryOperationPathInv=void 0;const a=El(),e=lt(),u=Ut();let n=class extends a.ActorAbstractPath{constructor(t){super(t,u.Algebra.types.INV)}async runOperation(t,i){const o=i.getSafe(e.KeysInitQuery.dataFactory),l=new u.Factory(o),s=t.predicate,c=l.createPath(t.object,s.path,t.subject,t.graph);return this.mediatorQueryOperation.mediate({operation:c,context:i})}};return LO.ActorQueryOperationPathInv=n,LO}var wpe;function OV(){return wpe||(wpe=1,(function(a){var e=hy&&hy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=hy&&hy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(BCe(),a)})(hy)),hy}var yy={},qO={},Spe;function UCe(){if(Spe)return qO;Spe=1,Object.defineProperty(qO,"__esModule",{value:!0}),qO.ActorQueryOperationPathLink=void 0;const a=El(),e=lt(),u=Ut();let n=class extends a.ActorAbstractPath{constructor(t){super(t,u.Algebra.types.LINK)}async runOperation(t,i){const o=i.getSafe(e.KeysInitQuery.dataFactory),l=new u.Factory(o),s=t.predicate,c=Object.assign(l.createPattern(t.subject,s.iri,t.object,t.graph),{metadata:s.metadata});return this.mediatorQueryOperation.mediate({operation:c,context:i})}};return qO.ActorQueryOperationPathLink=n,qO}var Epe;function xV(){return Epe||(Epe=1,(function(a){var e=yy&&yy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=yy&&yy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(UCe(),a)})(yy)),yy}var my={},BO={},Ape;function QCe(){if(Ape)return BO;Ape=1,Object.defineProperty(BO,"__esModule",{value:!0}),BO.ActorQueryOperationPathNps=void 0;const a=El(),e=lt(),u=Zt(),n=Ut();let r=class extends a.ActorAbstractPath{constructor(i){super(i,n.Algebra.types.NPS)}async runOperation(i,o){const l=o.getSafe(e.KeysInitQuery.dataFactory),s=new n.Factory(l),c=i.predicate,d=this.generateVariable(l,i),f=Object.assign(s.createPattern(i.subject,d,i.object,i.graph),{metadata:c.metadata}),p=(0,u.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:f,context:o}));return{type:"bindings",bindingsStream:p.bindingsStream.map(g=>c.iris.some(v=>v.equals(g.get(d)))?null:g.delete(d)),metadata:p.metadata}}};return BO.ActorQueryOperationPathNps=r,BO}var Ope;function RV(){return Ope||(Ope=1,(function(a){var e=my&&my.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=my&&my.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(QCe(),a)})(my)),my}var by={},UO={},xpe;function VCe(){if(xpe)return UO;xpe=1,Object.defineProperty(UO,"__esModule",{value:!0}),UO.ActorQueryOperationClear=void 0;const a=qr(),e=lt(),u=Zt();let n=class extends a.ActorQueryOperationTypedMediated{constructor(t){super(t,"clear")}async testOperation(t,i){return(0,u.testReadOnly)(i)}async runOperation(t,i){const o=i.getSafe(e.KeysInitQuery.dataFactory);let l;t.source==="DEFAULT"?l=o.defaultGraph():typeof t.source=="string"?l=t.source:l=[t.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:l,requireExistence:!t.silent,dropGraphs:!1},context:i});return{type:"void",execute:s}}};return UO.ActorQueryOperationClear=n,UO}var Rpe;function NV(){return Rpe||(Rpe=1,(function(a){var e=by&&by.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=by&&by.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(VCe(),a)})(by)),by}var gy={},QO={},Npe;function HCe(){if(Npe)return QO;Npe=1,Object.defineProperty(QO,"__esModule",{value:!0}),QO.ActorQueryOperationUpdateCompositeUpdate=void 0;const a=qr(),e=Zt();let u=class extends a.ActorQueryOperationTypedMediated{constructor(r){super(r,"compositeupdate")}async testOperation(r,t){return(0,e.testReadOnly)(t)}async runOperation(r,t){return{type:"void",execute:()=>(async()=>{for(const o of r.updates)await(0,e.getSafeVoid)(await this.mediatorQueryOperation.mediate({operation:o,context:t})).execute()})()}}};return QO.ActorQueryOperationUpdateCompositeUpdate=u,QO}var Ipe;function IV(){return Ipe||(Ipe=1,(function(a){var e=gy&&gy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=gy&&gy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(HCe(),a)})(gy)),gy}var vy={},VO={},Dpe;function kCe(){if(Dpe)return VO;Dpe=1,Object.defineProperty(VO,"__esModule",{value:!0}),VO.ActorQueryOperationCreate=void 0;const a=qr(),e=Zt();let u=class extends a.ActorQueryOperationTypedMediated{constructor(r){super(r,"create")}async testOperation(r,t){return(0,e.testReadOnly)(t)}async runOperation(r,t){const{execute:i}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[r.source],requireNonExistence:!r.silent},context:t});return{type:"void",execute:i}}};return VO.ActorQueryOperationCreate=u,VO}var Fpe;function DV(){return Fpe||(Fpe=1,(function(a){var e=vy&&vy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=vy&&vy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(kCe(),a)})(vy)),vy}var _y={},HO={},Ppe;function zCe(){if(Ppe)return HO;Ppe=1,Object.defineProperty(HO,"__esModule",{value:!0}),HO.ActorQueryOperationDrop=void 0;const a=qr(),e=lt(),u=Zt();let n=class extends a.ActorQueryOperationTypedMediated{constructor(t){super(t,"drop")}async testOperation(t,i){return(0,u.testReadOnly)(i)}async runOperation(t,i){const o=i.getSafe(e.KeysInitQuery.dataFactory);let l;t.source==="DEFAULT"?l=o.defaultGraph():typeof t.source=="string"?l=t.source:l=[t.source];const{execute:s}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:l,requireExistence:!t.silent,dropGraphs:!0},context:i});return{type:"void",execute:s}}};return HO.ActorQueryOperationDrop=n,HO}var jpe;function FV(){return jpe||(jpe=1,(function(a){var e=_y&&_y.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=_y&&_y.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(zCe(),a)})(_y)),_y}var Ty={},kO={},Mpe;function GCe(){if(Mpe)return kO;Mpe=1,Object.defineProperty(kO,"__esModule",{value:!0}),kO.ActorQueryOperationLoad=void 0;const a=qr(),e=lt(),u=Zt(),n=Ut();let r=class extends a.ActorQueryOperationTypedMediated{constructor(i){super(i,"load")}async testOperation(i,o){return(0,u.testReadOnly)(o)}async runOperation(i,o){const l=o.getSafe(e.KeysInitQuery.dataFactory),s=new n.Factory(l);let c=o;i.silent&&(c=c.set(e.KeysInitQuery.lenient,!0));const{querySource:d}=await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:i.source.value},context:c});let p=(0,u.getSafeQuads)(await this.mediatorQueryOperation.mediate({operation:s.createConstruct((0,u.assignOperationSource)(s.createPattern(l.variable("s"),l.variable("p"),l.variable("o")),d),[s.createPattern(l.variable("s"),l.variable("p"),l.variable("o"))]),context:c})).quadStream;i.destination&&(p=p.map(g=>l.quad(g.subject,g.predicate,g.object,i.destination)));const{execute:h}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:p,context:o});return{type:"void",execute:h}}};return kO.ActorQueryOperationLoad=r,kO}var Cpe;function PV(){return Cpe||(Cpe=1,(function(a){var e=Ty&&Ty.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ty&&Ty.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(GCe(),a)})(Ty)),Ty}var wy={},zO={},Sy={},GO={},Lpe;function $Ce(){if(Lpe)return GO;Lpe=1,Object.defineProperty(GO,"__esModule",{value:!0}),GO.ActorQuerySourceIdentify=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return GO.ActorQuerySourceIdentify=e,GO}var Yn={},qpe;function XCe(){if(qpe)return Yn;qpe=1,Object.defineProperty(Yn,"__esModule",{value:!0}),Yn.filterMatchingQuotedQuads=Yn.quadsOrderToBindingsOrder=Yn.quadsMetadataToBindingsMetadata=Yn.setMetadata=Yn.getDuplicateElementLinks=Yn.getVariables=Yn.isTermVariable=Yn.quadsToBindings=void 0;const a=Eb(),e=xa(),u=$t(),n=Yr(),r=t2e();function t(p,h,g,v,m){const T=o(h),w=h.graph.termType==="Variable"&&!m,E=l(h),S=(0,n.reduceTermsNested)(h,(q,O,I)=>(O.termType==="Variable"&&(q[I.join("_")]=O.value),q),{});let N=p;w&&(N=N.filter(q=>q.graph.termType!=="DefaultGraph")),E&&(N=N.filter(q=>{for(const O in E){const I=O.split("_"),A=(0,n.getValueNestedPath)(q,I);for(const P of E[O])if(!A.equals((0,n.getValueNestedPath)(q,P)))return!1}return!0}));const j=new a.ClosableIterator(N.map(q=>v.bindings(Object.keys(S).map(O=>{const I=O.split("_"),A=S[O],P=(0,n.getValueNestedPath)(q,I);return[g.variable(A),P]}))),{onClose:()=>p.destroy()});return s(g,j,p,S,T,w||!!E),j}Yn.quadsToBindings=t;function i(p){return p.termType==="Variable"}Yn.isTermVariable=i;function o(p){return(0,n.uniqTerms)((0,n.getTermsNested)(p).filter(i))}Yn.getVariables=o;function l(p){const h={};let g=!1;if((0,n.forEachTermsNested)(p,(m,T)=>{if(m.termType==="Variable"){const w=(0,u.termToString)(m),E=(h[w]||(h[w]=[])).push(T);g=g||E>1}}),!g)return;const v={};for(const m in h){const T=h[m],w=T.slice(1);w.length>0&&(v[T[0].join("_")]=w)}return v}Yn.getDuplicateElementLinks=l;function s(p,h,g,v,m,T){const w=S=>{T&&(S.cardinality.type="estimate"),h.setProperty("metadata",c(p,(0,e.validateMetadataQuads)(S),v,m)),S.state&&S.state.addInvalidateListener(()=>{s(p,h,g,v,m,T)})},E=g.getProperty("metadata");E?w(E):g.getProperty("metadata",w)}Yn.setMetadata=s;function c(p,h,g,v){return{...h,order:h.order?d(p,h.order,g):void 0,availableOrders:h.availableOrders?h.availableOrders.map(m=>({cost:m.cost,terms:d(p,m.terms,g)})):void 0,variables:v.map(m=>({variable:m,canBeUndef:!1}))}}Yn.quadsMetadataToBindingsMetadata=c;function d(p,h,g){const v={};return h.map(m=>{const T=g[m.term];if(T&&!v[T])return v[T]=!0,{term:p.variable(T),direction:m.direction}}).filter(Boolean)}Yn.quadsOrderToBindingsOrder=d;function f(p,h){return(0,n.someTerms)(p,g=>g.termType==="Quad")&&(h=h.filter(g=>(0,r.matchPatternMappings)(g,p))),h}return Yn.filterMatchingQuotedQuads=f,Yn}var Bpe;function tN(){return Bpe||(Bpe=1,(function(a){var e=Sy&&Sy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Sy&&Sy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u($Ce(),a),u(XCe(),a)})(Sy)),Sy}var ND={},Ey={},$O={},XO={},Ay={},KO={},Upe;function I3e(){if(Upe)return KO;Upe=1,Object.defineProperty(KO,"__esModule",{value:!0}),KO.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return KO.BlankNode=a,KO}var JO={},WO={},Qpe;function D3e(){if(Qpe)return WO;Qpe=1,Object.defineProperty(WO,"__esModule",{value:!0}),WO.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return WO.DefaultGraph=a,a.INSTANCE=new a,WO}var YO={},ZO={},Vpe;function jV(){if(Vpe)return ZO;Vpe=1,Object.defineProperty(ZO,"__esModule",{value:!0}),ZO.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return ZO.NamedNode=a,ZO}var Hpe;function F3e(){if(Hpe)return YO;Hpe=1,Object.defineProperty(YO,"__esModule",{value:!0}),YO.Literal=void 0;const a=jV();class e{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=e.RDF_LANGUAGE_STRING,this.direction=""):r?"termType"in r?(this.language="",this.datatype=r,this.direction=""):(this.language=r.language,this.datatype=r.direction?e.RDF_DIRECTIONAL_LANGUAGE_STRING:e.RDF_LANGUAGE_STRING,this.direction=r.direction||""):(this.language="",this.datatype=e.XSD_STRING,this.direction="")}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&(n.direction===this.direction||!n.direction&&this.direction==="")&&this.datatype.equals(n.datatype)}}return YO.Literal=e,e.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.RDF_DIRECTIONAL_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),e.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),YO}var ex={},kpe;function P3e(){if(kpe)return ex;kpe=1,Object.defineProperty(ex,"__esModule",{value:!0}),ex.Quad=void 0;class a{constructor(u,n,r,t){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=t}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return ex.Quad=a,ex}var tx={},zpe;function j3e(){if(zpe)return tx;zpe=1,Object.defineProperty(tx,"__esModule",{value:!0}),tx.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return tx.Variable=a,tx}var Gpe;function KCe(){if(Gpe)return JO;Gpe=1,Object.defineProperty(JO,"__esModule",{value:!0}),JO.DataFactory=void 0;const a=I3e(),e=D3e(),u=F3e(),n=jV(),r=P3e(),t=j3e();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,c){return new u.Literal(s,c)}variable(s){return new t.Variable(s)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(s,c,d,f){return new r.Quad(s,c,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return JO.DataFactory=o,JO}var $pe;function Ko(){return $pe||($pe=1,(function(a){var e=Ay&&Ay.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ay&&Ay.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(I3e(),a),u(KCe(),a),u(D3e(),a),u(F3e(),a),u(jV(),a),u(P3e(),a),u(j3e(),a)})(Ay)),Ay}var Oy={},Pr={},Xpe;function JCe(){if(Xpe)return Pr;Xpe=1,Object.defineProperty(Pr,"__esModule",{value:!0}),Pr.TRIPLE_TERM_NAMES=Pr.QUAD_TERM_NAMES=void 0,Pr.getTerms=u,Pr.getTermsNested=n,Pr.getNamedTerms=r,Pr.collectNamedTerms=t,Pr.forEachTerms=i,Pr.forEachTermsNested=o,Pr.filterTerms=l,Pr.filterTermsNested=s,Pr.filterQuadTermNames=c,Pr.filterQuadTermNamesNested=d,Pr.mapTerms=f,Pr.mapTermsNested=p,Pr.reduceTerms=h,Pr.reduceTermsNested=g,Pr.everyTerms=v,Pr.everyTermsNested=m,Pr.someTerms=T,Pr.someTermsNested=w,Pr.getValueNestedPath=E,Pr.matchTerm=S,Pr.matchPattern=N,Pr.matchPatternComplete=j,Pr.matchPatternMappings=q;const a=Ko(),e=new a.DataFactory;Pr.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Pr.TRIPLE_TERM_NAMES=["subject","predicate","object"];function u(O,I){return I&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function n(O,I){const A=[];for(const P of u(O,I))P.termType==="Quad"?n(P,I).forEach(C=>A.push(C)):A.push(P);return A}function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function t(O,I,A){const P={};return O.forEach(C=>P[C.key]=C.value),I&&(P.subject=P.subject||I("subject"),P.predicate=P.predicate||I("predicate"),P.object=P.object||I("object"),P.graph=P.graph||I("graph")),(A||e).quad(P.subject,P.predicate,P.object,P.graph)}function i(O,I){I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph")}function o(O,I,A=[]){O.subject.termType==="Quad"?o(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]),O.predicate.termType==="Quad"?o(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]),O.object.termType==="Quad"?o(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]),O.graph.termType==="Quad"?o(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"])}function l(O,I){const A=[];return I(O.subject,"subject")&&A.push(O.subject),I(O.predicate,"predicate")&&A.push(O.predicate),I(O.object,"object")&&A.push(O.object),I(O.graph,"graph")&&A.push(O.graph),A}function s(O,I,A=[]){let P=[];return O.subject.termType==="Quad"?P=[...P,...s(O.subject,I,[...A,"subject"])]:I(O.subject,[...A,"subject"])&&P.push(O.subject),O.predicate.termType==="Quad"?P=[...P,...s(O.predicate,I,[...A,"predicate"])]:I(O.predicate,[...A,"predicate"])&&P.push(O.predicate),O.object.termType==="Quad"?P=[...P,...s(O.object,I,[...A,"object"])]:I(O.object,[...A,"object"])&&P.push(O.object),O.graph.termType==="Quad"?P=[...P,...s(O.graph,I,[...A,"graph"])]:I(O.graph,[...A,"graph"])&&P.push(O.graph),P}function c(O,I){const A=[];return I(O.subject,"subject")&&A.push("subject"),I(O.predicate,"predicate")&&A.push("predicate"),I(O.object,"object")&&A.push("object"),I(O.graph,"graph")&&A.push("graph"),A}function d(O,I,A=[]){let P=[];const C=[...A,"subject"];O.subject.termType==="Quad"?P=[...P,...d(O.subject,I,C)]:I(O.subject,C)&&P.push(C);const B=[...A,"predicate"];O.predicate.termType==="Quad"?P=[...P,...d(O.predicate,I,B)]:I(O.predicate,B)&&P.push(B);const H=[...A,"object"];O.object.termType==="Quad"?P=[...P,...d(O.object,I,H)]:I(O.object,H)&&P.push(H);const V=[...A,"graph"];return O.graph.termType==="Quad"?P=[...P,...d(O.graph,I,V)]:I(O.graph,V)&&P.push(V),P}function f(O,I,A){return(A||e).quad(I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph"))}function p(O,I,A,P=[]){return(A||e).quad(O.subject.termType==="Quad"?p(O.subject,I,A,[...P,"subject"]):I(O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?p(O.predicate,I,A,[...P,"predicate"]):I(O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?p(O.object,I,A,[...P,"object"]):I(O.object,[...P,"object"]),O.graph.termType==="Quad"?p(O.graph,I,A,[...P,"graph"]):I(O.graph,[...P,"graph"]))}function h(O,I,A){let P=A;return P=I(P,O.subject,"subject"),P=I(P,O.predicate,"predicate"),P=I(P,O.object,"object"),I(P,O.graph,"graph")}function g(O,I,A,P=[]){let C=A;return O.subject.termType==="Quad"?C=g(O.subject,I,C,[...P,"subject"]):C=I(C,O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?C=g(O.predicate,I,C,[...P,"predicate"]):C=I(C,O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?C=g(O.object,I,C,[...P,"object"]):C=I(C,O.object,[...P,"object"]),O.graph.termType==="Quad"?C=g(O.graph,I,C,[...P,"graph"]):C=I(C,O.graph,[...P,"graph"]),C}function v(O,I){return I(O.subject,"subject")&&I(O.predicate,"predicate")&&I(O.object,"object")&&I(O.graph,"graph")}function m(O,I,A=[]){return(O.subject.termType==="Quad"?m(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))&&(O.predicate.termType==="Quad"?m(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))&&(O.object.termType==="Quad"?m(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))&&(O.graph.termType==="Quad"?m(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}function T(O,I){return I(O.subject,"subject")||I(O.predicate,"predicate")||I(O.object,"object")||I(O.graph,"graph")}function w(O,I,A=[]){return(O.subject.termType==="Quad"?w(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))||(O.predicate.termType==="Quad"?w(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))||(O.object.termType==="Quad"?w(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))||(O.graph.termType==="Quad"?w(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}function E(O,I){if(I.length===0)return O;if(O.termType==="Quad")return E(O[I[0]],I.slice(1));throw new Error(`Tried to get ${I[0]} from term of type ${O.termType}`)}function S(O,I){return!I||I.termType==="Variable"||I.termType==="Quad"&&O.termType==="Quad"&&j(O,I)||I.equals(O)}function N(O,I,A,P,C){return S(O.subject,I)&&S(O.predicate,A)&&S(O.object,P)&&S(O.graph,C)}function j(O,I){return N(O,I.subject,I.predicate,I.object,I.graph)}function q(O,I,A={}){const P={};function C(B,H){return v(B,(V,G)=>{var Z,ae;const W=H[G];switch(V.termType){case"Variable":return A.skipVarMapping&&W.termType==="Variable"||((ae=(Z=P[V.value])===null||Z===void 0?void 0:Z.equals(W))!==null&&ae!==void 0?ae:(P[V.value]=W,!0));case"Quad":return W.termType==="Quad"&&C(V,W);default:return V.equals(W)}})}return C(I,O)&&(A.returnMappings?P:!0)}return Pr}var Pi={},VC={},to={},Kpe;function WCe(){if(Kpe)return to;Kpe=1,Object.defineProperty(to,"__esModule",{value:!0}),to.termToString=u,to.getLiteralValue=n,to.getLiteralType=r,to.getLiteralLanguage=t,to.getLiteralDirection=i,to.stringToTerm=o,to.quadToStringQuad=l,to.stringQuadToQuad=s;const a=Ko(),e=new a.DataFactory;function u(c){if(c)switch(c.termType){case"NamedNode":return c.value;case"BlankNode":return"_:"+c.value;case"Literal":const d=c;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${u(c.subject)} ${u(c.predicate)} ${u(c.object)}${c.graph.termType==="DefaultGraph"?"":" "+u(c.graph)}>>`;case"Variable":return"?"+c.value;case"DefaultGraph":return c.value}}function n(c){const d=/^"([^]*)"/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]}function r(c){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function t(c){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const p=f.indexOf("--");return p>=0&&(f=f.slice(0,p)),f}return""}function i(c){const d=c.indexOf("--",c.lastIndexOf('"'));if(d>=0){const f=c.slice(d+2,c.length);if(f==="ltr"||f==="rtl")return f;throw new Error(c+" is not a literal with a valid direction")}return""}function o(c,d){if(d=d||e,!c||!c.length)return d.defaultGraph();switch(c[0]){case"_":return d.blankNode(c.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(c.substr(1));case'"':const f=t(c),p=i(c),h=d.namedNode(r(c));return d.literal(n(c),f?{language:f,direction:p}:h);default:if(c[0]==="<"&&c.length>4&&c[1]==="<"&&c[c.length-1]===">"&&c[c.length-2]===">"){const g=c.slice(2,-2).trim();let v=[],m=0,T=0,w=!1;for(let E=0;E<g.length;E++){const S=g[E];if(S==="<"&&m++,S===">"){if(m===0)throw new Error("Found closing tag without opening tag in "+c);m--}if(S==='"'){let N=!1,j=E;for(;j-- >0&&g[j]==="\\";)N=!N;N||(w=!w)}if(S===" "&&!w&&m===0){for(v.push(g.slice(T,E));g[E+1]===" ";)E+=1;T=E+1}}if(m!==0)throw new Error("Found opening tag without closing tag in "+c);if(v.push(g.slice(T,g.length)),v.length!==3&&v.length!==4)throw new Error("Nested quad syntax error "+c);return v=v.map(E=>E.startsWith("<")&&!E.includes(" ")?E.slice(1,-1):E),d.quad(o(v[0]),o(v[1]),o(v[2]),v[3]?o(v[3]):void 0)}return d.namedNode(c)}}function l(c){return{subject:u(c.subject),predicate:u(c.predicate),object:u(c.object),graph:u(c.graph)}}function s(c,d){return d=d||e,d.quad(o(c.subject,d),o(c.predicate,d),o(c.object,d),o(c.graph,d))}return to}var Jpe;function rN(){return Jpe||(Jpe=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralDirection=a.getLiteralLanguage=void 0;const e=WCe();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralDirection",{enumerable:!0,get:function(){return e.getLiteralDirection}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(VC)),VC}var Wpe;function YCe(){if(Wpe)return Pi;Wpe=1,Object.defineProperty(Pi,"__esModule",{value:!0}),Pi.TERM_TYPES=void 0,Pi.uniqTerms=e,Pi.getTermsOfType=u,Pi.getNamedNodes=n,Pi.getBlankNodes=r,Pi.getLiterals=t,Pi.getVariables=i,Pi.getDefaultGraphs=o,Pi.getQuads=l;const a=rN();Pi.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function e(s){const c={};return s.filter(d=>{const f=(0,a.termToString)(d);return!(f in c)&&(c[f]=!0)})}function u(s,c){return s.filter(d=>d.termType===c)}function n(s){return u(s,"NamedNode")}function r(s){return u(s,"BlankNode")}function t(s){return u(s,"Literal")}function i(s){return u(s,"Variable")}function o(s){return u(s,"DefaultGraph")}function l(s){return u(s,"Quad")}return Pi}var Ype;function NP(){return Ype||(Ype=1,(function(a){var e=Oy&&Oy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Oy&&Oy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(JCe(),a),u(YCe(),a)})(Oy)),Oy}var rx={},Zpe;function M3e(){if(Zpe)return rx;Zpe=1,Object.defineProperty(rx,"__esModule",{value:!0}),rx.TermDictionaryNumberRecordFullTerms=void 0;const a=Ko(),e=rN();class u{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const t=(0,e.termToString)(r);let i=this.dictionary[t];return i===void 0&&(i=this.lastId++,this.dictionary[t]=i,this.reverseDictionary[i]=r),i}encodeOptional(r){const t=(0,e.termToString)(r);return this.dictionary[t]}decode(r){const t=this.reverseDictionary[r];if(t===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return t}*encodings(){for(const r of Object.keys(this.reverseDictionary))yield Number.parseInt(r,10)}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}}return rx.TermDictionaryNumberRecordFullTerms=u,rx}var nx={},ax={},HC={},e0e;function Jo(){return e0e||(e0e=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.QUAD_TERM_NAMES_INVERSE=void 0,a.getBestIndex=u,a.getComponentOrderScore=n,a.orderQuadComponents=r,a.encodeOptionalTerms=t,a.quadToPattern=i,a.quadHasVariables=o,a.arePatternsQuoted=l;const e=NP();a.QUAD_TERM_NAMES_INVERSE=Object.fromEntries(e.QUAD_TERM_NAMES.map((s,c)=>[s,c]));function u(s,c){if(s.length===1||c.every(p=>p!==void 0))return 0;const d=[];for(let p=0;p<e.QUAD_TERM_NAMES.length;p++)c[p]&&d.push(e.QUAD_TERM_NAMES[p]);return s.map((p,h)=>({score:n(p,d),index:h})).sort((p,h)=>h.score-p.score)[0].index}function n(s,c){return s.map((d,f)=>c.includes(d)?s.length-f:0).reduce((d,f)=>d+f,0)}function r(s,c){return s.map(d=>{const f=a.QUAD_TERM_NAMES_INVERSE[d];return c[f]})}function t(s,c){const d=s.map(f=>{if(f){if(f.termType==="Quad"&&o(f))return;const p=c.encodeOptional(f);return p===void 0?"none":p}return f});if(!d.includes("none"))return d}function i(s,c,d,f,p){let h=!1;return[[s||void 0,c||void 0,d||void 0,f||void 0].map(v=>{if(v){if(v.termType==="Variable")return;if(v.termType==="Quad"){if(p)return v;h=!0;return}}return v}),h]}function o(s){for(const c of e.QUAD_TERM_NAMES){const d=s[c];if(d.termType==="Variable"||d.termType==="Quad"&&o(d))return!0}return!1}function l(s){return s.map(c=>c?.termType==="Quad"&&o(c))}})(HC)),HC}var t0e;function MV(){if(t0e)return ax;t0e=1,Object.defineProperty(ax,"__esModule",{value:!0}),ax.RdfStoreIndexNestedMap=void 0;const a=Jo();class e{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedMap=new Map}set(n,r){const t=this.nestedMap;let i=t.get(n[0]);i||(i=new Map,t.set(n[0],i));let o=i.get(n[1]);o||(o=new Map,i.set(n[1],o));let l=o.get(n[2]);l||(l=new Map,o.set(n[2],l));const s=l.has(n[3]);return s||l.set(n[3],r),!s}remove(n){const r=this.nestedMap,t=r.get(n[0]);if(!t)return!1;const i=t.get(n[1]);if(!i)return!1;const o=i.get(n[2]);if(!o)return!1;const l=o.delete(n[3]);return l&&o.size===0&&(i.delete(n[2]),i.size===0&&(t.delete(n[1]),t.size===0&&r.delete(n[0]))),l}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){const r=this.nestedMap.get(n[0]);if(!r)return;const t=r.get(n[1]);if(!t)return;const i=t.get(n[2]);if(i)return i.get(n[3])}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!r)return;const[t,i,o,l]=r,[s,c,d,f]=n;let p,h,g,v,m,T,w;const E=this.nestedMap,S=t!==void 0?E.has(t)?[t]:[]:E.keys();for(const N of S){m=E.get(N),p=s||this.dictionary.decode(N);const j=i!==void 0?m.has(i)?[i]:[]:m.keys();for(const q of j){T=m.get(q),h=c||this.dictionary.decode(q);const O=o!==void 0?T.has(o)?[o]:[]:T.keys();for(const I of O){w=T.get(I),g=d||this.dictionary.decode(I);const A=l!==void 0?w.has(l)?[l]:[]:w.keys();for(const P of A)v=f||this.dictionary.decode(P),yield[p,h,g,v]}}}}*findEncoded(n,r){const[t,i,o,l]=n;let s,c,d;const f=this.nestedMap,p=t!==void 0?f.has(t)?[t]:[]:f.keys();for(const h of p){s=f.get(h);const g=i!==void 0?s.has(i)?[i]:[]:s.keys();for(const v of g){c=s.get(v);const m=o!==void 0?c.has(o)?[o]:[]:c.keys();for(const T of m){d=c.get(T);const w=l!==void 0?d.has(l)?[l]:[]:d.keys();for(const E of w)yield[h,v,T,E]}}}}count(n){let r=0;const t=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!t)return 0;const i=t[0],o=t[1],l=t[2],s=t[3];let c,d,f;const p=this.nestedMap,h=i!==void 0?p.has(i)?[i]:[]:p.keys();for(const g of h){c=p.get(g);const v=o!==void 0?c.has(o)?[o]:[]:c.keys();for(const m of v){d=c.get(m);const T=l!==void 0?d.has(l)?[l]:[]:d.keys();for(const w of T)f=d.get(w),s!==void 0?f.has(s)&&r++:r+=f.size}}return r}}return ax.RdfStoreIndexNestedMap=e,ax}var r0e;function C3e(){if(r0e)return nx;r0e=1,Object.defineProperty(nx,"__esModule",{value:!0}),nx.TermDictionaryQuotedIndexed=void 0;const a=Ko(),e=MV(),u=Jo();class n{constructor(t,i=new a.DataFactory){this.quotedTriplesDictionary=[],this.features={quotedTriples:!0},this.plainTermDictionary=t;const o={indexCombinations:[],indexConstructor:void 0,dictionary:this,dataFactory:i};this.quotedTriplesReverseDictionaries=[new e.RdfStoreIndexNestedMap(o),new e.RdfStoreIndexNestedMap(o),new e.RdfStoreIndexNestedMap(o)],this.dataFactory=i}encode(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!1):this.plainTermDictionary.encode(t)}encodeQuotedTriple(t,i){if(t.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const o=(0,u.encodeOptionalTerms)([t.subject,t.predicate,t.object,t.graph],this),l=o&&o.every(f=>f!==void 0)?this.quotedTriplesReverseDictionaries[0].getEncoded(o):void 0;if(l!==void 0||i)return l===void 0?void 0:n.BITMASK|l;const s=[this.encode(t.subject),this.encode(t.predicate),this.encode(t.object)],c=this.quotedTriplesDictionary.length+1;this.quotedTriplesDictionary.push(s);const d=this.encode(this.dataFactory.defaultGraph());return this.quotedTriplesReverseDictionaries[0].set([s[0],s[1],s[2],d],c),this.quotedTriplesReverseDictionaries[1].set([s[1],s[2],s[0],d],c),this.quotedTriplesReverseDictionaries[2].set([s[2],s[0],s[1],d],c),n.BITMASK|c}encodeOptional(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!0):this.plainTermDictionary.encodeOptional(t)}decode(t){if(n.BITMASK&t){const i=(~n.BITMASK&t)-1;if(i>=this.quotedTriplesDictionary.length)throw new Error(`The value ${t} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[i];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(t)}*encodings(){for(const t of this.plainTermDictionary.encodings())yield t;for(const t of this.quotedTriplesDictionary.keys())yield n.BITMASK|1+t}*findQuotedTriples(t){for(const i of this.findQuotedTriplesEncoded(t))yield this.decode(i)}*findQuotedTriplesEncoded(t){const[i,o]=(0,u.quadToPattern)(t.subject,t.predicate,t.object,t.graph,!0);for(const l of this.patternToIterable(i[0]))for(const s of this.patternToIterable(i[1]))for(const c of this.patternToIterable(i[2]))for(const d of this.patternToIterable(i[3]))if(l&&s||!s&&!c){const f=[l,s,c,d];for(const p of this.quotedTriplesReverseDictionaries[0].findEncoded(f,i))yield n.BITMASK|this.quotedTriplesReverseDictionaries[0].getEncoded(p)}else if(!l&&s){const f=[s,c,l,d];for(const p of this.quotedTriplesReverseDictionaries[1].findEncoded(f,i))yield n.BITMASK|this.quotedTriplesReverseDictionaries[1].getEncoded(p)}else{const f=[c,l,s,d];for(const p of this.quotedTriplesReverseDictionaries[2].findEncoded(f,i))yield n.BITMASK|this.quotedTriplesReverseDictionaries[2].getEncoded(p)}}*patternToIterable(t){if(t?.termType==="Quad"){yield*this.findQuotedTriplesEncoded(t);return}if(t===void 0){yield void 0;return}const i=this.encodeOptional(t);i!==void 0&&(yield i)}}return nx.TermDictionaryQuotedIndexed=n,n.BITMASK=1<<31,nx}var ix={},n0e;function L3e(){if(n0e)return ix;n0e=1,Object.defineProperty(ix,"__esModule",{value:!0}),ix.RdfStoreIndexNestedMapQuoted=void 0;const a=Jo(),e=MV();class u extends e.RdfStoreIndexNestedMap{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(r,t){for(const i of this.dictionary.findQuotedTriplesEncoded(t))r.has(i)&&(yield i)}*find(r){const t=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!t)return;const[i,o,l,s]=t,[c,d,f,p]=r,[h,g,v,m]=(0,a.arePatternsQuoted)(r);let T,w,E,S,N,j,q;const O=this.nestedMap,I=c!==void 0?h?this.getQuotedPatternKeys(O,c):O.has(i)?[i]:[]:O.keys();for(const A of I){N=O.get(A),T=!h&&c?c:this.dictionary.decode(A);const P=d!==void 0?g?this.getQuotedPatternKeys(N,d):N.has(o)?[o]:[]:N.keys();for(const C of P){j=N.get(C),w=!g&&d?d:this.dictionary.decode(C);const B=f!==void 0?v?this.getQuotedPatternKeys(j,f):j.has(l)?[l]:[]:j.keys();for(const H of B){q=j.get(H),E=!v&&f?f:this.dictionary.decode(H);const V=p!==void 0?m?this.getQuotedPatternKeys(q,p):q.has(s)?[s]:[]:q.keys();for(const G of V)S=!m&&p?p:this.dictionary.decode(G),yield[T,w,E,S]}}}}*findEncoded(r,t){const[i,o,l,s]=r,[c,d,f,p]=t,[h,g,v,m]=(0,a.arePatternsQuoted)(t);let T,w,E;const S=this.nestedMap,N=c!==void 0?h?this.getQuotedPatternKeys(S,c):S.has(i)?[i]:[]:S.keys();for(const j of N){T=S.get(j);const q=d!==void 0?g?this.getQuotedPatternKeys(T,d):T.has(o)?[o]:[]:T.keys();for(const O of q){w=T.get(O);const I=f!==void 0?v?this.getQuotedPatternKeys(w,f):w.has(l)?[l]:[]:w.keys();for(const A of I){E=w.get(A);const P=p!==void 0?m?this.getQuotedPatternKeys(E,p):E.has(s)?[s]:[]:E.keys();for(const C of P)yield[Number.parseInt(j,10),Number.parseInt(O,10),Number.parseInt(A,10),Number.parseInt(C,10)]}}}}count(r){let t=0;const i=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!i)return 0;const[o,l,s,c]=i,[d,f,p,h]=r,[g,v,m,T]=(0,a.arePatternsQuoted)(r);let w,E,S;const N=this.nestedMap,j=d!==void 0?g?this.getQuotedPatternKeys(N,d):N.has(o)?[o]:[]:N.keys();for(const q of j){w=N.get(q);const O=f!==void 0?v?this.getQuotedPatternKeys(w,f):w.has(l)?[l]:[]:w.keys();for(const I of O){E=w.get(I);const A=p!==void 0?m?this.getQuotedPatternKeys(E,p):E.has(s)?[s]:[]:E.keys();for(const P of A)S=E.get(P),h!==void 0?T?t+=[...this.getQuotedPatternKeys(S,h)].length:S.has(c)&&t++:t+=S.size}}return t}}return ix.RdfStoreIndexNestedMapQuoted=u,ix}var a0e;function q3e(){if(a0e)return XO;a0e=1,Object.defineProperty(XO,"__esModule",{value:!0}),XO.RdfStore=void 0;const a=zt(),e=Ko(),u=NP(),n=B3e(),r=M3e(),t=C3e(),i=L3e(),o=Jo();class l{constructor(c){this.features={quotedTripleFiltering:!0},this._size=0,this.options=c,this.dataFactory=c.dataFactory,this.dictionary=c.dictionary,this.indexesWrapped=l.constructIndexesWrapped(c),this.indexesWrappedComponentOrders=this.indexesWrapped.map(d=>d.componentOrder)}static createDefault(){return new l({indexCombinations:l.DEFAULT_INDEX_COMBINATIONS,indexConstructor:c=>new i.RdfStoreIndexNestedMapQuoted(c),dictionary:new t.TermDictionaryQuotedIndexed(new r.TermDictionaryNumberRecordFullTerms),dataFactory:new e.DataFactory})}static constructIndexesWrapped(c){const d=[];if(c.indexCombinations.length===0)throw new Error("At least one index combination is required");for(const f of c.indexCombinations){if(!l.isCombinationValid(f))throw new Error(`Invalid index combination: ${f}`);d.push({index:c.indexConstructor(c),componentOrder:f,componentOrderInverse:Object.fromEntries(f.map((p,h)=>[p,h]))})}return d}static isCombinationValid(c){for(const d of u.QUAD_TERM_NAMES)if(!c.includes(d))return!1;return c.length===4}get size(){return this._size}addQuad(c){const d=[this.dictionary.encode(c.subject),this.dictionary.encode(c.predicate),this.dictionary.encode(c.object),this.dictionary.encode(c.graph)];let f=!1;for(const p of this.indexesWrapped)f=p.index.set((0,o.orderQuadComponents)(p.componentOrder,d),!0);return f?(this._size++,!0):!1}removeQuad(c){const d=[this.dictionary.encodeOptional(c.subject),this.dictionary.encodeOptional(c.predicate),this.dictionary.encodeOptional(c.object),this.dictionary.encodeOptional(c.graph)];if(d.includes(void 0))return!1;let f=!1;for(const p of this.indexesWrapped)if(f=p.index.remove((0,o.orderQuadComponents)(p.componentOrder,d)),!f)break;return f?(this._size--,!0):!1}remove(c){return c.on("data",d=>this.removeQuad(d)),c}removeMatches(c,d,f,p){return this.remove(this.match(c,d,f,p))}deleteGraph(c){return typeof c=="string"&&(c=this.dataFactory.namedNode(c)),this.removeMatches(void 0,void 0,void 0,c)}import(c){return c.on("data",d=>this.addQuad(d)),c}*readQuads(c,d,f,p){const h=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(w=>w.index.features.quotedTripleFiltering),[g,v]=(0,o.quadToPattern)(c,d,f,p,h),m=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,g)],T=(0,o.orderQuadComponents)(m.componentOrder,g);for(const w of m.index.find(T)){const E=this.dataFactory.quad(w[m.componentOrderInverse.subject],w[m.componentOrderInverse.predicate],w[m.componentOrderInverse.object],w[m.componentOrderInverse.graph]);v?(0,u.matchPattern)(E,c,d,f,p)&&(yield E):yield E}}getQuads(c,d,f,p){return[...this.readQuads(c,d,f,p)]}match(c,d,f,p){return(0,a.wrap)(this.readQuads(c,d,f,p))}*readBindings(c,d,f,p,h){const g=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(O=>O.index.features.quotedTripleFiltering),[v,m]=(0,o.quadToPattern)(d,f,p,h,g),T=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,v)],w=(0,o.orderQuadComponents)(T.componentOrder,v),E=(0,o.encodeOptionalTerms)(w,this.dictionary);if(!E)return;const S=(0,o.orderQuadComponents)(T.componentOrder,[d,f,p,h]),N=[];for(let O=0;O<S.length;O++)(S[O].termType==="Variable"||S[O].termType==="Quad")&&N.push(O);let j=!1;const q=S.map((O,I)=>{const A=[];for(let P=I+1;P<S.length;P++)O.equals(S[P])&&(A.push(P),j=!0);return A});for(const O of T.index.findEncoded(E,w)){let I=!1,A=!1;const P=[];for(const C of N){if(j){const H=q[C];if(H){for(const V of H)if(O[C]!==O[V]){I=!0;break}}if(I)break}const B=this.dictionary.decode(O[C]);if(S[C].termType==="Quad"){if(B.termType==="Quad"){const H=(0,u.matchPatternMappings)(B,S[C],{returnMappings:!0});if(H){A=!0;for(const[V,G]of Object.entries(H)){const Z=this.dataFactory.variable(V);if(P.some(ae=>ae[0].equals(Z)&&!ae[1].equals(G))){I=!0;break}P.push([Z,G])}continue}}I=!0;break}if(A&&P.some(H=>H[0].equals(S[C])&&!H[1].equals(B))){I=!0;break}P.push([S[C],B])}I||(yield c.bindings(P))}}getBindings(c,d,f,p,h){return[...this.readBindings(c,d,f,p,h)]}matchBindings(c,d,f,p,h){return(0,a.wrap)(this.readBindings(c,d,f,p,h))}countQuads(c,d,f,p){const h=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(T=>T.index.features.quotedTripleFiltering),[g]=(0,o.quadToPattern)(c,d,f,p,h);if(g.every(T=>T===void 0))return this.size;const v=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,g)],m=(0,o.orderQuadComponents)(v.componentOrder,g);return v.index.count(m)}asDataset(){return new n.DatasetCoreWrapper(this)}}return XO.RdfStore=l,l.DEFAULT_INDEX_COMBINATIONS=[["graph","subject","predicate","object"],["graph","predicate","object","subject"],["graph","object","subject","predicate"]],XO}var i0e;function B3e(){if(i0e)return $O;i0e=1,Object.defineProperty($O,"__esModule",{value:!0}),$O.DatasetCoreWrapper=void 0;const a=q3e();class e{constructor(n){this.store=n}get size(){return this.store.size}add(n){return this.store.addQuad(n),this}delete(n){return this.store.removeQuad(n),this}has(n){for(const r of this.store.readQuads(n.subject,n.predicate,n.object,n.graph))return!0;return!1}match(n,r,t,i){const o=new a.RdfStore(this.store.options);for(const l of this.store.readQuads(n,r,t,i))o.addQuad(l);return new e(o)}[Symbol.iterator](){return this.store.readQuads()}}return $O.DatasetCoreWrapper=e,$O}var kC={},u0e;function ZCe(){return u0e||(u0e=1,Object.defineProperty(kC,"__esModule",{value:!0})),kC}var ux={},o0e;function e9e(){if(o0e)return ux;o0e=1,Object.defineProperty(ux,"__esModule",{value:!0}),ux.TermDictionaryNumberMap=void 0;const a=Ko(),e=rN();class u{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary=new Map,this.reverseDictionary=new Map,this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const t=(0,e.termToString)(r);let i=this.dictionary.get(t);return i===void 0&&(i=this.lastId++,this.dictionary.set(t,i),this.reverseDictionary.set(i,t)),i}encodeOptional(r){const t=(0,e.termToString)(r);return this.dictionary.get(t)}decode(r){const t=this.reverseDictionary.get(r);if(t===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return(0,e.stringToTerm)(t,this.dataFactory)}encodings(){return this.reverseDictionary.keys()}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}}return ux.TermDictionaryNumberMap=u,ux}var ox={},s0e;function t9e(){if(s0e)return ox;s0e=1,Object.defineProperty(ox,"__esModule",{value:!0}),ox.TermDictionaryNumberRecord=void 0;const a=Ko(),e=rN();class u{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const t=(0,e.termToString)(r);let i=this.dictionary[t];return i===void 0&&(i=this.lastId++,this.dictionary[t]=i,this.reverseDictionary[i]=t),i}encodeOptional(r){const t=(0,e.termToString)(r);return this.dictionary[t]}decode(r){const t=this.reverseDictionary[r];if(t===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return(0,e.stringToTerm)(t,this.dataFactory)}*encodings(){for(const r of Object.keys(this.reverseDictionary))yield Number.parseInt(r,10)}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}}return ox.TermDictionaryNumberRecord=u,ox}var sx={},c0e;function r9e(){if(c0e)return sx;c0e=1,Object.defineProperty(sx,"__esModule",{value:!0}),sx.TermDictionaryQuoted=void 0;const a=Ko(),e=NP();class u{constructor(r,t,i=new a.DataFactory){this.features={quotedTriples:!0},this.plainTermDictionary=r,this.quotedTriplesDictionary=t,this.dataFactory=i}encode(r){return r.termType==="Quad"?u.BITMASK|1+this.quotedTriplesDictionary.encode(r):this.plainTermDictionary.encode(r)}encodeOptional(r){if(r.termType==="Quad"){const t=this.quotedTriplesDictionary.encodeOptional(r);return t===void 0?t:u.BITMASK|1+t}return this.plainTermDictionary.encodeOptional(r)}decode(r){if(u.BITMASK&r){const t=(~u.BITMASK&r)-1;return this.quotedTriplesDictionary.decode(t)}return this.plainTermDictionary.decode(r)}*encodings(){for(const r of this.plainTermDictionary.encodings())yield r;for(const r of this.quotedTriplesDictionary.encodings())yield u.BITMASK|1+r}*findQuotedTriples(r){for(const t of this.findQuotedTriplesEncoded(r))yield this.decode(t)}*findQuotedTriplesEncoded(r){for(let t of this.quotedTriplesDictionary.encodings()){t=u.BITMASK|1+t;const i=this.decode(t);(0,e.matchPattern)(i,r.subject,r.predicate,r.object,r.graph)&&(yield t)}}}return sx.TermDictionaryQuoted=u,u.BITMASK=1<<31,sx}var cx={},l0e;function n9e(){if(l0e)return cx;l0e=1,Object.defineProperty(cx,"__esModule",{value:!0}),cx.TermDictionaryQuotedReferential=void 0;const a=Ko(),e=NP(),u=Jo();class n{constructor(t,i=new a.DataFactory){this.quotedTriplesDictionary=[],this.quotedTriplesReverseDictionary={},this.features={quotedTriples:!0},this.plainTermDictionary=t,this.dataFactory=i}encode(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!1):this.plainTermDictionary.encode(t)}encodeQuotedTriple(t,i){if(t.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const o=(0,u.encodeOptionalTerms)([t.subject,t.predicate,t.object,void 0],this)?.slice(0,3),l=o&&o.every(d=>d!==void 0)?this.quotedTriplesReverseDictionary[o.join(n.SEPARATOR)]:void 0;if(l!==void 0||i)return l===void 0?void 0:n.BITMASK|l;const s=[this.encode(t.subject),this.encode(t.predicate),this.encode(t.object)],c=this.quotedTriplesDictionary.length+1;return this.quotedTriplesDictionary.push(s),this.quotedTriplesReverseDictionary[s.join(n.SEPARATOR)]=c,n.BITMASK|c}encodeOptional(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!0):this.plainTermDictionary.encodeOptional(t)}decode(t){if(n.BITMASK&t){const i=(~n.BITMASK&t)-1;if(i>=this.quotedTriplesDictionary.length)throw new Error(`The value ${t} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[i];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(t)}*encodings(){for(const t of this.plainTermDictionary.encodings())yield t;for(const t of this.quotedTriplesDictionary.keys())yield n.BITMASK|1+t}*findQuotedTriples(t){for(const i of this.findQuotedTriplesEncoded(t))yield this.decode(i)}*findQuotedTriplesEncoded(t){for(let i of this.quotedTriplesDictionary.keys()){i=n.BITMASK|1+i;const o=this.decode(i);(0,e.matchPattern)(o,t.subject,t.predicate,t.object,t.graph)&&(yield i)}}}return cx.TermDictionaryQuotedReferential=n,n.BITMASK=1<<31,n.SEPARATOR="_",cx}var lx={},d0e;function a9e(){if(d0e)return lx;d0e=1,Object.defineProperty(lx,"__esModule",{value:!0}),lx.TermDictionarySymbol=void 0;const a=Ko(),e=rN();class u{constructor(r=new a.DataFactory){this.features={quotedTriples:!1},this.dataFactory=r}encode(r){return Symbol.for(`rdf::${(0,e.termToString)(r)}`)}encodeOptional(r){return this.encode(r)}decode(r){const t=Symbol.keyFor(r);if(t===void 0)throw new Error(`The value ${String(r)} is not present in this dictionary`);return(0,e.stringToTerm)(t.slice(5),this.dataFactory)}encodings(){throw new Error("encodings is not supported")}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}}return lx.TermDictionarySymbol=u,lx}var zC={},f0e;function i9e(){return f0e||(f0e=1,Object.defineProperty(zC,"__esModule",{value:!0})),zC}var dx={},p0e;function U3e(){if(p0e)return dx;p0e=1,Object.defineProperty(dx,"__esModule",{value:!0}),dx.RdfStoreIndexNestedMapRecursive=void 0;const a=Jo();class e{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedMap=new Map}set(n,r){let t=this.nestedMap,i=!1;for(const[o,l]of n.entries()){const s=t;let c=s.get(l);c?o===n.length-1&&(i=!0):(c=o===n.length-1?r:new Map,s.set(l,c)),t=c}return!i}remove(n){const r=this.nestedMap,t=r.get(n[0]);if(!t)return!1;const i=t.get(n[1]);if(!i)return!1;const o=i.get(n[2]);if(!o)return!1;const l=o.delete(n[3]);return l&&o.size===0&&(i.delete(n[2]),i.size===0&&(t.delete(n[1]),t.size===0&&r.delete(n[0]))),l}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){const r=this.nestedMap.get(n[0]);if(!r)return;const t=r.get(n[1]);if(!t)return;const i=t.get(n[2]);if(i)return i.get(n[3])}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(r)for(const t of this.findEncoded(r,n))yield[r[0]!==void 0?n[0]:this.dictionary.decode(t[0]),r[1]!==void 0?n[1]:this.dictionary.decode(t[1]),r[2]!==void 0?n[2]:this.dictionary.decode(t[2]),r[3]!==void 0?n[3]:this.dictionary.decode(t[3])]}*findEncoded(n,r){return yield*this.findEncodedInner(0,n,r,this.nestedMap,[])}*findEncodedInner(n,r,t,i,o){if(n===r.length)yield[...o];else{const l=r[n];if(t[n]){const c=l;if(c!==void 0){const d=i.get(c);d&&(o[n]=l,yield*this.findEncodedInner(n+1,r,t,d,o))}}else for(const[c,d]of i.entries())o[n]=c,yield*this.findEncodedInner(n+1,r,t,d,o)}}count(n){return this.countInner(0,n,this.nestedMap)}countInner(n,r,t){const i=r[n];let o=0;if(i){const l=this.dictionary.encodeOptional(i);if(l!==void 0){if(n===r.length-1)return t.has(l)?1:0;const s=t.get(l);s&&(o+=this.countInner(n+1,r,s))}}else{if(n===r.length-1)return t.size;for(const l of t.values())o+=this.countInner(n+1,r,l)}return o}}return dx.RdfStoreIndexNestedMapRecursive=e,dx}var fx={},h0e;function u9e(){if(h0e)return fx;h0e=1,Object.defineProperty(fx,"__esModule",{value:!0}),fx.RdfStoreIndexNestedMapRecursiveQuoted=void 0;const a=Jo(),e=U3e();class u extends e.RdfStoreIndexNestedMapRecursive{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*findEncoded(r,t){return yield*this.findEncodedInnerQuoted(0,r,t,(0,a.arePatternsQuoted)(t),this.nestedMap,[])}*findEncodedInnerQuoted(r,t,i,o,l,s){if(r===t.length)yield[...s];else{const c=t[r],d=i[r];if(d)if(o[r]){const f=this.dictionary.findQuotedTriplesEncoded(d);for(const p of f){const h=l.get(p);h&&(s[r]=p,yield*this.findEncodedInnerQuoted(r+1,t,i,o,h,s))}}else{const f=c;if(f!==void 0){const p=l.get(f);p&&(s[r]=c,yield*this.findEncodedInnerQuoted(r+1,t,i,o,p,s))}}else for(const[f,p]of l.entries())s[r]=f,yield*this.findEncodedInnerQuoted(r+1,t,i,o,p,s)}}countInner(r,t,i){const o=t[r];let l=0;if(o)if(o.termType==="Quad"&&(0,a.quadHasVariables)(o)){const s=this.dictionary.findQuotedTriplesEncoded(o);for(const c of s)if(r===t.length-1)i.has(c)&&l++;else{const d=i.get(c);d&&(l+=this.countInner(r+1,t,d))}}else{const s=this.dictionary.encodeOptional(o);if(s!==void 0){if(r===t.length-1)return i.has(s)?1:0;const c=i.get(s);c&&(l+=this.countInner(r+1,t,c))}}else{if(r===t.length-1)return i.size;for(const s of i.values())l+=this.countInner(r+1,t,s)}return l}}return fx.RdfStoreIndexNestedMapRecursiveQuoted=u,fx}var px={},y0e;function Q3e(){if(y0e)return px;y0e=1,Object.defineProperty(px,"__esModule",{value:!0}),px.RdfStoreIndexNestedRecord=void 0;const a=Jo();class e{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedRecords={}}set(n,r){const t=this.nestedRecords,i=t[n[0]]||(t[n[0]]={}),o=i[n[1]]||(i[n[1]]={}),l=o[n[2]]||(o[n[2]]={});return l[n[3]]?!1:(l[n[3]]=r,!0)}remove(n){const r=this.nestedRecords,t=r[n[0]];if(!t)return!1;const i=t[n[1]];if(!i)return!1;const o=i[n[2]];return!o||!o[n[3]]?!1:(delete o[n[3]],Object.keys(o).length===0&&(delete i[n[2]],Object.keys(i).length===0&&(delete t[n[1]],Object.keys(t).length===0&&delete r[n[0]])),!0)}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){return this.nestedRecords[n[0]]?.[n[1]]?.[n[2]]?.[n[3]]}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!r)return;const[t,i,o,l]=r,[s,c,d,f]=n;let p,h,g,v,m,T,w;const E=this.nestedRecords,S=t!==void 0?t in E?[t]:[]:Object.keys(E);for(const N of S){m=E[N],p=s||this.dictionary.decode(Number.parseInt(N,10));const j=i!==void 0?i in m?[i]:[]:Object.keys(m);for(const q of j){T=m[q],h=c||this.dictionary.decode(Number.parseInt(q,10));const O=o!==void 0?o in T?[o]:[]:Object.keys(T);for(const I of O){w=T[I],g=d||this.dictionary.decode(Number.parseInt(I,10));const A=l!==void 0?l in w?[l]:[]:Object.keys(w);for(const P of A)v=f||this.dictionary.decode(Number.parseInt(P,10)),yield[p,h,g,v]}}}}*findEncoded(n,r){const[t,i,o,l]=n;let s,c,d;const f=this.nestedRecords,p=t!==void 0?t in f?[t]:[]:Object.keys(f);for(const h of p){s=f[h];const g=i!==void 0?i in s?[i]:[]:Object.keys(s);for(const v of g){c=s[v];const m=o!==void 0?o in c?[o]:[]:Object.keys(c);for(const T of m){d=c[T];const w=l!==void 0?l in d?[l]:[]:Object.keys(d);for(const E of w)yield[Number.parseInt(h,10),Number.parseInt(v,10),Number.parseInt(T,10),Number.parseInt(E,10)]}}}}count(n){let r=0;const t=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!t)return 0;const i=t[0],o=t[1],l=t[2],s=t[3];let c,d,f;const p=this.nestedRecords,h=i!==void 0?i in p?[i]:[]:Object.keys(p);for(const g of h){c=p[g];const v=o!==void 0?o in c?[o]:[]:Object.keys(c);for(const m of v){d=c[m];const T=l!==void 0?l in d?[l]:[]:Object.keys(d);for(const w of T)f=d[w],s!==void 0?s in f&&r++:r+=Object.keys(f).length}}return r}}return px.RdfStoreIndexNestedRecord=e,px}var hx={},m0e;function o9e(){if(m0e)return hx;m0e=1,Object.defineProperty(hx,"__esModule",{value:!0}),hx.RdfStoreIndexNestedRecordQuoted=void 0;const a=Jo(),e=Q3e();class u extends e.RdfStoreIndexNestedRecord{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(r,t){for(const i of this.dictionary.findQuotedTriplesEncoded(t))i in r&&(yield i)}*find(r){const t=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!t)return;const[i,o,l,s]=t,[c,d,f,p]=r,[h,g,v,m]=(0,a.arePatternsQuoted)(r);let T,w,E,S,N,j,q;const O=this.nestedRecords,I=c!==void 0?h?this.getQuotedPatternKeys(O,c):i in O?[i]:[]:Object.keys(O);for(const A of I){N=O[A],T=!h&&c?c:this.dictionary.decode(Number.parseInt(A,10));const P=d!==void 0?g?this.getQuotedPatternKeys(N,d):o in N?[o]:[]:Object.keys(N);for(const C of P){j=N[C],w=!g&&d?d:this.dictionary.decode(Number.parseInt(C,10));const B=f!==void 0?v?this.getQuotedPatternKeys(j,f):l in j?[l]:[]:Object.keys(j);for(const H of B){q=j[H],E=!v&&f?f:this.dictionary.decode(Number.parseInt(H,10));const V=p!==void 0?m?this.getQuotedPatternKeys(q,p):s in q?[s]:[]:Object.keys(q);for(const G of V)S=!m&&p?p:this.dictionary.decode(Number.parseInt(G,10)),yield[T,w,E,S]}}}}*findEncoded(r,t){const[i,o,l,s]=r,[c,d,f,p]=t,[h,g,v,m]=(0,a.arePatternsQuoted)(t);let T,w,E;const S=this.nestedRecords,N=c!==void 0?h?this.getQuotedPatternKeys(S,c):i in S?[i]:[]:Object.keys(S);for(const j of N){T=S[j];const q=d!==void 0?g?this.getQuotedPatternKeys(T,d):o in T?[o]:[]:Object.keys(T);for(const O of q){w=T[O];const I=f!==void 0?v?this.getQuotedPatternKeys(w,f):l in w?[l]:[]:Object.keys(w);for(const A of I){E=w[A];const P=p!==void 0?m?this.getQuotedPatternKeys(E,p):s in E?[s]:[]:Object.keys(E);for(const C of P)yield[Number.parseInt(j,10),Number.parseInt(O,10),Number.parseInt(A,10),Number.parseInt(C,10)]}}}}count(r){let t=0;const i=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!i)return 0;const[o,l,s,c]=i,[d,f,p,h]=r,[g,v,m,T]=(0,a.arePatternsQuoted)(r);let w,E,S;const N=this.nestedRecords,j=d!==void 0?g?this.getQuotedPatternKeys(N,d):o in N?[o]:[]:Object.keys(N);for(const q of j){w=N[q];const O=f!==void 0?v?this.getQuotedPatternKeys(w,f):l in w?[l]:[]:Object.keys(w);for(const I of O){E=w[I];const A=p!==void 0?m?this.getQuotedPatternKeys(E,p):s in E?[s]:[]:Object.keys(E);for(const P of A)S=E[P],h!==void 0?T?t+=[...this.getQuotedPatternKeys(S,h)].length:c in S&&t++:t+=Object.keys(S).length}}return t}}return hx.RdfStoreIndexNestedRecordQuoted=u,hx}var GC={},b0e;function s9e(){return b0e||(b0e=1,Object.defineProperty(GC,"__esModule",{value:!0})),GC}var $C={},g0e;function c9e(){return g0e||(g0e=1,Object.defineProperty($C,"__esModule",{value:!0})),$C}var v0e;function l9e(){return v0e||(v0e=1,(function(a){var e=Ey&&Ey.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ey&&Ey.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(B3e(),a),u(ZCe(),a),u(e9e(),a),u(t9e(),a),u(M3e(),a),u(r9e(),a),u(C3e(),a),u(n9e(),a),u(a9e(),a),u(i9e(),a),u(MV(),a),u(L3e(),a),u(U3e(),a),u(u9e(),a),u(Q3e(),a),u(o9e(),a),u(s9e(),a),u(Jo(),a),u(c9e(),a),u(q3e(),a)})(Ey)),Ey}var _0e;function d9e(){if(_0e)return ND;_0e=1,Object.defineProperty(ND,"__esModule",{value:!0}),ND.storeStream=e;const a=l9e();function e(u){const n=a.RdfStore.createDefault();return new Promise((r,t)=>n.import(u).on("error",t).once("end",()=>r(n)))}return ND}var T0e;function f9e(){if(T0e)return zO;T0e=1,Object.defineProperty(zO,"__esModule",{value:!0}),zO.ActorQuerySourceIdentifySerialized=void 0;const a=tN(),e=De(),u=d9e(),n=Nr();let r=class extends a.ActorQuerySourceIdentify{constructor(i){super(i)}async test(i){return this.isStringSource(i.querySourceUnidentified)?(0,e.passTestVoid)():(0,e.failTest)(`${this.name} requires a single query source with serialized type to be present in the context.`)}async run(i){return await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{type:"rdfjs",value:await this.getRdfSource(i.context,i.querySourceUnidentified),context:i.querySourceUnidentified.context},context:i.context})}async getRdfSource(i,o){const l=new n.Readable({objectMode:!0});l._read=()=>{},l.push(o.value),l.push(null);const s={context:i,handle:{metadata:{baseIRI:o.baseIRI},data:l,context:i},handleMediaType:o.mediaType},c=await this.mediatorRdfParse.mediate(s);return await(0,u.storeStream)(c.handle.data)}isStringSource(i){return"type"in i?i.type==="serialized":typeof i.value!="string"?!1:"mediaType"in i}};return zO.ActorQuerySourceIdentifySerialized=r,zO}var w0e;function CV(){return w0e||(w0e=1,(function(a){var e=wy&&wy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=wy&&wy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(f9e(),a)})(wy)),wy}var xy={},yx={},S0e;function p9e(){if(S0e)return yx;S0e=1,Object.defineProperty(yx,"__esModule",{value:!0}),yx.ActorQueryOperationJoin=void 0;const a=qr(),e=ki(),u=De(),n=xa(),r=Zt(),t=zt(),i=Rr();let o=class extends a.ActorQueryOperationTypedMediated{constructor(s){super(s,"join")}async testOperation(s,c){return(0,u.passTestVoid)()}async runOperation(s,c){const d=(await Promise.all(s.input.map(async f=>({output:await this.mediatorQueryOperation.mediate({operation:f,context:c}),operation:f})))).map(({output:f,operation:p})=>({output:(0,r.getSafeBindings)(f),operation:p}));if((await Promise.all(d.map(f=>f.output.metadata()))).some(f=>f.cardinality.value===0&&f.cardinality.type==="exact")){for(const f of d)f.output.bindingsStream.close();return{bindingsStream:new t.ArrayIterator([],{autoStart:!1}),metadata:async()=>({state:new n.MetadataValidationState,cardinality:{type:"exact",value:0},variables:e.ActorRdfJoin.joinVariables(new i.DataFactory,await e.ActorRdfJoin.getMetadatas(d))}),type:"bindings"}}return this.mediatorJoin.mediate({type:"inner",entries:d,context:c})}};return yx.ActorQueryOperationJoin=o,yx}var E0e;function LV(){return E0e||(E0e=1,(function(a){var e=xy&&xy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=xy&&xy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(p9e(),a)})(xy)),xy}var Ry={},mx={},A0e;function h9e(){if(A0e)return mx;A0e=1,Object.defineProperty(mx,"__esModule",{value:!0}),mx.ActorQueryOperationLeftJoin=void 0;const a=qr(),e=lt(),u=De(),n=Zt(),r=Ut();let t=class extends a.ActorQueryOperationTypedMediated{constructor(o){super(o,"leftjoin")}async testOperation(o,l){return(0,u.passTestVoid)()}async runOperation(o,l){const s=l.getSafe(e.KeysInitQuery.dataFactory),c=new r.Factory(s),d=await Promise.all(o.input.map(async(f,p)=>{const h=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:f,context:l}));return o.expression&&p===1?{output:h,operation:c.createFilter(f,o.expression),operationRequired:!0}:{output:h,operation:f}}));return await this.mediatorJoin.mediate({type:"optional",entries:d,context:l})}};return mx.ActorQueryOperationLeftJoin=t,mx}var O0e;function qV(){return O0e||(O0e=1,(function(a){var e=Ry&&Ry.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ry&&Ry.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(h9e(),a)})(Ry)),Ry}var Ny={},bx={},x0e;function y9e(){if(x0e)return bx;x0e=1,Object.defineProperty(bx,"__esModule",{value:!0}),bx.ActorQueryOperationMinus=void 0;const a=qr(),e=De(),u=Zt();let n=class extends a.ActorQueryOperationTypedMediated{constructor(t){super(t,"minus")}async testOperation(t,i){return(0,e.passTestVoid)()}async runOperation(t,i){const o=t.metadata?.graphVariableFromParentScope,l=(await Promise.all(t.input.map(async s=>({output:await this.mediatorQueryOperation.mediate({operation:s,context:i}),operation:s})))).map(({output:s,operation:c})=>({output:(0,u.getSafeBindings)(s),operation:c}));return this.mediatorJoin.mediate({type:"minus",entries:l,context:i,graphVariableFromParentScope:o})}};return bx.ActorQueryOperationMinus=n,bx}var R0e;function BV(){return R0e||(R0e=1,(function(a){var e=Ny&&Ny.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ny&&Ny.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(y9e(),a)})(Ny)),Ny}var Iy={},gx={},N0e;function m9e(){if(N0e)return gx;N0e=1,Object.defineProperty(gx,"__esModule",{value:!0}),gx.ActorQueryOperationPathSeq=void 0;const a=El(),e=lt(),u=Zt(),n=Ut();let r=class extends a.ActorAbstractPath{constructor(i){super(i,n.Algebra.types.SEQ)}async runOperation(i,o){const l=o.getSafe(e.KeysInitQuery.dataFactory),s=new n.Factory(l),c=i.predicate;let d=i.subject;const f=[],p=await Promise.all(c.input.map((v,m)=>{const T=m===c.input.length-1?i.object:this.generateVariable(l,i,`b${m}`),w=s.createPath(d,v,T,i.graph),E=this.mediatorQueryOperation.mediate({context:o,operation:w});return d=T,m<c.input.length-1&&f.push(T),{output:E,operation:w}}).map(async({output:v,operation:m})=>({output:(0,u.getSafeBindings)(await v),operation:m}))),h=(0,u.getSafeBindings)(await this.mediatorJoin.mediate({type:"inner",entries:p,context:o}));return{type:"bindings",bindingsStream:h.bindingsStream.transform({transform(v,m,T){for(const w of f)v=v.delete(w);T(v),m()}}),async metadata(){const v=await h.metadata(),m=v.variables.filter(T=>!f.some(w=>w.value===T.variable.value));return{...v,variables:m}}}}};return gx.ActorQueryOperationPathSeq=r,gx}var I0e;function UV(){return I0e||(I0e=1,(function(a){var e=Iy&&Iy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Iy&&Iy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(m9e(),a)})(Iy)),Iy}var Dy={},vx={},D0e;function b9e(){if(D0e)return vx;D0e=1,Object.defineProperty(vx,"__esModule",{value:!0}),vx.ActorRdfJoinMultiSmallest=void 0;const a=ki(),e=lt(),u=De(),n=Zt(),r=Ut();let t=class extends a.ActorRdfJoin{constructor(o){super(o,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0,canHandleUndefs:!0,isLeaf:!1})}getJoinIndexes(o){for(let l=0;l<o.length;l++)for(let s=l+1;s<o.length;s++)if(this.hasCommonVariables(o[l],o[s]))return[l,s];return[0,1]}hasCommonVariables(o,l){const s=o.metadata.variables.map(d=>d.variable.value),c=new Set(l.metadata.variables.map(d=>d.variable.value));return s.some(d=>c.has(d))}async sortJoinEntries(o,l){return(await this.mediatorJoinEntriesSort.mediate({entries:o,context:l})).entries}async getOutput(o,l){const s=o.context.getSafe(e.KeysInitQuery.dataFactory),c=new r.Factory(s),d=l.sortedEntries,f=await a.ActorRdfJoin.getEntriesWithMetadatas(d),p=this.getJoinIndexes(f),h=d[p[0]],g=d[p[1]];d.splice(p[1],1),d.splice(p[0],1);const v={output:(0,n.getSafeBindings)(await this.mediatorJoin.mediate({type:o.type,entries:[h,g],context:o.context})),operation:c.createJoin([h.operation,g.operation],!1)};return d.push(v),{result:await this.mediatorJoin.mediate({type:o.type,entries:d,context:o.context})}}async getJoinCoefficients(o,l){let{metadatas:s}=l;s=[...s];const c=await this.sortJoinEntries(o.entries.map((p,h)=>({...p,metadata:s[h]})),o.context);s=c.map(p=>p.metadata);const d=a.ActorRdfJoin.getRequestInitialTimes(s),f=a.ActorRdfJoin.getRequestItemTimes(s);return(0,u.passTestWithSideData)({iterations:s.reduce((p,h)=>p*h.cardinality.value,1),persistedItems:0,blockingItems:0,requestTime:s.reduce((p,h,g)=>p+d[g]+h.cardinality.value*f[g],0)},{...l,sortedEntries:c})}};return vx.ActorRdfJoinMultiSmallest=t,vx}var F0e;function QV(){return F0e||(F0e=1,(function(a){var e=Dy&&Dy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Dy&&Dy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(b9e(),a)})(Dy)),Dy}var Fy={},_x={},Tx={},P0e;function V3e(){if(P0e)return Tx;P0e=1,Object.defineProperty(Tx,"__esModule",{value:!0}),Tx.MaxAggregator=void 0;const a=Ua();let e=class extends a.AggregateEvaluator{constructor(n,r,t,i){super(n,r,i),this.orderByEvaluator=t,this.state=void 0}putTerm(n){if(n.termType!=="Literal")throw new Error(`Term with value ${n.value} has type ${n.termType} and is not a literal`);this.state===void 0?this.state=n:this.orderByEvaluator.orderTypes(this.state,n)===-1&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return Tx.MaxAggregator=e,Tx}var j0e;function g9e(){if(j0e)return _x;j0e=1,Object.defineProperty(_x,"__esModule",{value:!0}),_x.ActorBindingsAggregatorFactoryMax=void 0;const a=Ua(),e=De(),u=V3e();let n=class extends a.ActorBindingsAggregatorFactory{constructor(t){super(t),this.mediatorTermComparatorFactory=t.mediatorTermComparatorFactory}async test(t){return t.expr.aggregator!=="max"?(0,e.failTest)("This actor only supports the 'max' aggregator."):(0,e.passTestVoid)()}async run({expr:t,context:i}){return new u.MaxAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:t.expression,context:i}),t.distinct,await this.mediatorTermComparatorFactory.mediate({context:i}))}};return _x.ActorBindingsAggregatorFactoryMax=n,_x}var M0e;function VV(){return M0e||(M0e=1,(function(a){var e=Fy&&Fy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Fy&&Fy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(g9e(),a),u(V3e(),a)})(Fy)),Fy}var Py={},wx={},Sx={},C0e;function H3e(){if(C0e)return Sx;C0e=1,Object.defineProperty(Sx,"__esModule",{value:!0}),Sx.MinAggregator=void 0;const a=Ua();let e=class extends a.AggregateEvaluator{constructor(n,r,t,i){super(n,r,i),this.orderByEvaluator=t,this.state=void 0}putTerm(n){if(n.termType!=="Literal")throw new Error(`Term with value ${n.value} has type ${n.termType} and is not a literal`);this.state===void 0?this.state=n:this.orderByEvaluator.orderTypes(this.state,n)===1&&(this.state=n)}termResult(){return this.state===void 0?this.emptyValue():this.state}};return Sx.MinAggregator=e,Sx}var L0e;function v9e(){if(L0e)return wx;L0e=1,Object.defineProperty(wx,"__esModule",{value:!0}),wx.ActorBindingsAggregatorFactoryMin=void 0;const a=Ua(),e=De(),u=H3e();let n=class extends a.ActorBindingsAggregatorFactory{constructor(t){super(t),this.mediatorTermComparatorFactory=t.mediatorTermComparatorFactory}async test(t){return t.expr.aggregator!=="min"?(0,e.failTest)("This actor only supports the 'min' aggregator."):(0,e.passTestVoid)()}async run({context:t,expr:i}){return new u.MinAggregator(await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:i.expression,context:t}),i.distinct,await this.mediatorTermComparatorFactory.mediate({context:t}))}};return wx.ActorBindingsAggregatorFactoryMin=n,wx}var q0e;function HV(){return q0e||(q0e=1,(function(a){var e=Py&&Py.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Py&&Py.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(v9e(),a),u(H3e(),a)})(Py)),Py}var jy={},Ex={},Ax={},B0e;function _9e(){if(B0e)return Ax;B0e=1,Object.defineProperty(Ax,"__esModule",{value:!0}),Ax.SortIterator=void 0;const a=zt();let e=class extends a.TransformIterator{constructor(n,r,t){super(n,t);const i=t&&t.window;this.windowLength=Number.isFinite(i)&&i>0?i:Number.POSITIVE_INFINITY,this.sort=r,this.sorted=[]}_read(n,r){let t,{length:i}=this.sorted;for(;i!==this.windowLength&&(t=this.source.read(),t!==null);){let o=0,l=i-1,s,c;for(;o<=l;)s=Math.trunc((o+l)/2),c=this.sort(t,this.sorted[s]),c<0?o=s+1:c>0?l=s-1:(o=s,l=-1);this.sorted.splice(o,0,t),i++}i===this.windowLength&&this._push(this.sorted.pop()),r()}_flush(n){let{length:r}=this.sorted;for(;r--;)this._push(this.sorted.pop());n()}};return Ax.SortIterator=e,Ax}var U0e;function T9e(){if(U0e)return Ex;U0e=1,Object.defineProperty(Ex,"__esModule",{value:!0}),Ex.ActorQueryOperationOrderBy=void 0;const a=qr(),e=De(),u=$e(),n=Zt(),r=Ut(),t=_9e();let i=class extends a.ActorQueryOperationTypedMediated{constructor(l){super(l,"orderby"),this.window=l.window??Number.POSITIVE_INFINITY,this.mediatorExpressionEvaluatorFactory=l.mediatorExpressionEvaluatorFactory,this.mediatorTermComparatorFactory=l.mediatorTermComparatorFactory}async testOperation(){return(0,e.passTestVoid)()}async runOperation(l,s){const c=await this.mediatorQueryOperation.mediate({operation:l.input,context:s}),d=(0,n.getSafeBindings)(c),f={window:this.window};let{bindingsStream:p}=d;const h=await this.mediatorTermComparatorFactory.mediate({context:s});for(let g=l.expressions.length-1;g>=0;g--){let v=l.expressions[g];const m=this.isAscending(v);v=this.extractSortExpression(v);const T=await this.mediatorExpressionEvaluatorFactory.mediate({algExpr:v,context:s}),w=async(N,j,q)=>{try{const O=await T.evaluate(N);q({bindings:N,result:O})}catch(O){(0,u.isExpressionError)(O)||p.emit("error",O),q({bindings:N,result:void 0})}j()},E=p.transform({transform:w});p=new t.SortIterator(E,(N,j)=>{let q=h.orderTypes(N.result,j.result);return m||(q*=-1),q},f).map(({bindings:N})=>N)}return{type:"bindings",bindingsStream:p,metadata:d.metadata}}extractSortExpression(l){const{expressionType:s,operator:c}=l;return s!==r.Algebra.expressionTypes.OPERATOR?l:c==="desc"?l.args[0]:l}isAscending(l){const{expressionType:s,operator:c}=l;return s!==r.Algebra.expressionTypes.OPERATOR?!0:c!=="desc"}};return Ex.ActorQueryOperationOrderBy=i,Ex}var Q0e;function kV(){return Q0e||(Q0e=1,(function(a){var e=jy&&jy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=jy&&jy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(T9e(),a)})(jy)),jy}var My={},XC={},KC={},V0e;function k3e(){return V0e||(V0e=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.KEY_METADATA_DEPTH=a.LinkQueueLimitDepth=void 0;const e=Iq();class u extends e.LinkQueueWrapper{constructor(r,t){super(r),this.limit=t}push(r,t){t.metadata||(t.metadata={}),t.metadata[a.KEY_METADATA_DEPTH]||(t.metadata[a.KEY_METADATA_DEPTH]=0);const i=t.metadata[a.KEY_METADATA_DEPTH]+1;return i>this.limit?!1:(r.metadata||(r.metadata={}),r.metadata[a.KEY_METADATA_DEPTH]=i,super.push(r,t))}}a.LinkQueueLimitDepth=u,a.KEY_METADATA_DEPTH="actor-rdf-resolve-hypermedia-links-queue-wrapper-limit-depth:depth"})(KC)),KC}var H0e;function w9e(){return H0e||(H0e=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.KEY_CONTEXT_WRAPPED=a.ActorRdfResolveHypermediaLinksQueueWrapperLimitDepth=void 0;const e=Iq(),u=De(),n=k3e();class r extends e.ActorRdfResolveHypermediaLinksQueue{constructor(i){super(i)}async test(i){return i.context.get(a.KEY_CONTEXT_WRAPPED)?(0,u.failTest)("Unable to wrap link queues multiple times"):(0,u.passTestVoid)()}async run(i){const o=i.context.set(a.KEY_CONTEXT_WRAPPED,!0),{linkQueue:l}=await this.mediatorRdfResolveHypermediaLinksQueue.mediate({...i,context:o});return{linkQueue:new n.LinkQueueLimitDepth(l,this.limit)}}}a.ActorRdfResolveHypermediaLinksQueueWrapperLimitDepth=r,a.KEY_CONTEXT_WRAPPED=new u.ActionContextKey("@comunica/actor-rdf-resolve-hypermedia-links-queue-wrapper-limit-depth:wrapped")})(XC)),XC}var k0e;function z3e(){return k0e||(k0e=1,(function(a){var e=My&&My.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=My&&My.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(w9e(),a),u(k3e(),a)})(My)),My}var Cy={},Ox={},z0e;function S9e(){if(z0e)return Ox;z0e=1,Object.defineProperty(Ox,"__esModule",{value:!0}),Ox.ActorOptimizeQueryOperationFilterPushdown=void 0;const a=Vi(),e=lt(),u=De(),n=Zt(),r=Yr(),t=Ut();let i=class extends a.ActorOptimizeQueryOperation{constructor(l){super(l)}async test(l){return(0,u.passTestVoid)()}async run(l){const s=l.context.getSafe(e.KeysInitQuery.dataFactory),c=new t.Factory(s);let d=l.operation;const f=this;this.splitConjunctive&&(d=t.Util.mapOperation(d,{filter(m,T){return m.expression.expressionType===t.Algebra.expressionTypes.OPERATOR&&m.expression.operator==="&&"?(f.logDebug(l.context,`Split conjunctive filter into ${m.expression.args.length} nested filters`),{recurse:!0,result:m.expression.args.reduce((w,E)=>T.createFilter(w,E),m.input)}):{recurse:!0,result:m}}},c));const p=this.getSources(d),h=new Map(await Promise.all(p.map(async m=>[m,await m.source.getSelectorShape(l.context)])));let g=!0,v=0;for(;g&&v<this.maxIterations;)g=!1,d=t.Util.mapOperation(d,{filter(m,T){const w=l.context.get(e.KeysInitQuery.extensionFunctions),E=l.context.get(e.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!f.shouldAttemptPushDown(m,p,h,w,E))return{recurse:!0,result:m};const S=(0,n.getExpressionVariables)(m.expression),[N,j]=f.filterPushdown(m.expression,S,m.input,T,l.context);return N&&(g=!0),{recurse:!0,result:j}}}),v++;return v>1&&f.logDebug(l.context,`Pushed down filters in ${v} iterations`),this.mergeConjunctive&&(d=t.Util.mapOperation(d,{filter(m,T){if(m.input.type===t.Algebra.types.FILTER){const{nestedExpressions:w,input:E}=f.getNestedFilterExpressions(m);return f.logDebug(l.context,`Merge ${w.length} nested filters into conjunctive filter`),{recurse:!0,result:T.createFilter(E,w.slice(1).reduce((S,N)=>T.createOperatorExpression("&&",[S,N]),w[0]))}}return{recurse:!0,result:m}}})),{operation:d,context:l.context}}shouldAttemptPushDown(l,s,c,d,f){if(this.aggressivePushdown)return!0;const p=l.expression;return p.expressionType===t.Algebra.expressionTypes.OPERATOR&&p.operator==="="&&(p.args[0].expressionType==="term"&&p.args[0].term.termType!=="Variable"&&p.args[1].expressionType==="term"&&p.args[1].term.termType==="Variable"||p.args[0].expressionType==="term"&&p.args[0].term.termType==="Variable"&&p.args[1].expressionType==="term"&&p.args[1].term.termType!=="Variable")?!0:d&&p.expressionType===t.Algebra.expressionTypes.NAMED&&p.name.value in d&&!s.some(h=>(0,n.doesShapeAcceptOperation)(c.get(h),p))?!1:!!s.some(h=>(0,n.doesShapeAcceptOperation)(c.get(h),l,{wildcardAcceptAllExtensionFunctions:f}))}getSources(l){const s=new Set,c=d=>{const f=(0,n.getOperationSource)(d);return f&&s.add(f),!1};return t.Util.recurseOperation(l,{[t.Algebra.types.PATTERN]:c,[t.Algebra.types.LINK]:c,[t.Algebra.types.NPS]:c,[t.Algebra.types.SERVICE]:c}),[...s]}getOverlappingOperations(l,s){const c=[],d=[],f=[];for(const p of l.input){const h=t.Util.inScopeVariables(p);this.variablesSubSetOf(s,h)?c.push(p):this.variablesIntersect(s,h)?d.push(p):f.push(p)}return{fullyOverlapping:c,partiallyOverlapping:d,notOverlapping:f}}filterPushdown(l,s,c,d,f){if(this.isExpressionFalse(l))return[!0,d.createUnion([])];if(l.expressionType===t.Algebra.expressionTypes.EXISTENCE)return[!1,d.createFilter(c,l)];switch(c.type){case t.Algebra.types.EXTEND:return this.variablesIntersect([c.variable],s)?[!1,d.createFilter(c,l)]:[!0,d.createExtend(this.filterPushdown(l,s,c.input,d,f)[1],c.variable,c.expression)];case t.Algebra.types.FILTER:{const[p,h]=this.filterPushdown(l,s,c.input,d,f);return[p,d.createFilter(h,c.expression)]}case t.Algebra.types.JOIN:{if(c.input.length===0)return[!1,d.createFilter(c,l)];const{fullyOverlapping:p,partiallyOverlapping:h,notOverlapping:g}=this.getOverlappingOperations(c,s),v=[];let m=!1;return p.length>0&&(m=!0,v.push(d.createJoin(p.map(T=>this.filterPushdown(l,s,T,d,f)[1])))),h.length>0&&v.push(d.createFilter(d.createJoin(h,!1),l)),g.length>0&&v.push(...g),v.length>1&&(m=!0),m&&this.logDebug(f,`Push down filter across join entries with ${p.length} fully overlapping, ${h.length} partially overlapping, and ${g.length} not overlapping`),[m,v.length===1?v[0]:d.createJoin(v)]}case t.Algebra.types.NOP:return[!0,c];case t.Algebra.types.PROJECT:return this.variablesIntersect(c.variables,s)?[!0,d.createProject(this.filterPushdown(l,s,c.input,d,f)[1],c.variables)]:[!0,c];case t.Algebra.types.UNION:{const{fullyOverlapping:p,partiallyOverlapping:h,notOverlapping:g}=this.getOverlappingOperations(c,s),v=[];let m=!1;return p.length>0&&(m=!0,v.push(d.createUnion(p.map(T=>this.filterPushdown(l,s,T,d,f)[1])))),h.length>0&&v.push(d.createFilter(d.createUnion(h,!1),l)),g.length>0&&v.push(...g),v.length>1&&(m=!0),m&&this.logDebug(f,`Push down filter across union entries with ${p.length} fully overlapping, ${h.length} partially overlapping, and ${g.length} not overlapping`),[m,v.length===1?v[0]:d.createUnion(v)]}case t.Algebra.types.VALUES:return this.variablesIntersect(c.variables,s)?[!1,d.createFilter(c,l)]:[!0,c];case t.Algebra.types.LEFT_JOIN:{if(this.pushIntoLeftJoins){const p=t.Util.inScopeVariables(c.input[1]);if(!this.variablesIntersect(s,p))return this.logDebug(f,"Push down filter into left join"),[!0,d.createLeftJoin(this.filterPushdown(l,s,c.input[0],d,f)[1],c.input[1],c.expression)]}return[!1,d.createFilter(c,l)]}case t.Algebra.types.PATTERN:{if(this.pushEqualityIntoPatterns){const p=this.getEqualityExpressionPushableIntoPattern(l);if(p){let h=!1;const g=c.metadata;if(c=(0,r.mapTermsNested)(c,v=>v.equals(p.variable)?(h=!0,p.term):v),c.type=t.Algebra.types.PATTERN,c.metadata=g,h)return this.logDebug(f,`Push down filter into pattern for ?${p.variable.value}`),[!0,d.createJoin([c,d.createValues([p.variable],[{[`?${p.variable.value}`]:p.term}])])]}}return[!1,d.createFilter(c,l)]}case t.Algebra.types.PATH:{if(this.pushEqualityIntoPatterns){const p=this.getEqualityExpressionPushableIntoPattern(l);if(p&&(c.subject.equals(p.variable)||c.object.equals(p.variable))){this.logDebug(f,`Push down filter into path for ?${p.variable.value}`);const h=c.metadata;return c=d.createPath(c.subject.equals(p.variable)?p.term:c.subject,c.predicate,c.object.equals(p.variable)?p.term:c.object),c.metadata=h,[!0,d.createJoin([c,d.createValues([p.variable],[{[`?${p.variable.value}`]:p.term}])])]}}return[!1,d.createFilter(c,l)]}case t.Algebra.types.MINUS:case t.Algebra.types.ALT:case t.Algebra.types.ASK:case t.Algebra.types.BGP:case t.Algebra.types.CONSTRUCT:case t.Algebra.types.DESCRIBE:case t.Algebra.types.DISTINCT:case t.Algebra.types.EXPRESSION:case t.Algebra.types.FROM:case t.Algebra.types.GRAPH:case t.Algebra.types.GROUP:case t.Algebra.types.INV:case t.Algebra.types.LINK:case t.Algebra.types.NPS:case t.Algebra.types.ONE_OR_MORE_PATH:case t.Algebra.types.ORDER_BY:case t.Algebra.types.REDUCED:case t.Algebra.types.SEQ:case t.Algebra.types.SERVICE:case t.Algebra.types.SLICE:case t.Algebra.types.ZERO_OR_MORE_PATH:case t.Algebra.types.ZERO_OR_ONE_PATH:case t.Algebra.types.COMPOSITE_UPDATE:case t.Algebra.types.DELETE_INSERT:case t.Algebra.types.LOAD:case t.Algebra.types.CLEAR:case t.Algebra.types.CREATE:case t.Algebra.types.DROP:case t.Algebra.types.ADD:case t.Algebra.types.MOVE:case t.Algebra.types.COPY:return[!1,d.createFilter(c,l)]}}getEqualityExpressionPushableIntoPattern(l){if(l.expressionType===t.Algebra.expressionTypes.OPERATOR&&l.operator==="="){if(l.args[0].expressionType==="term"&&l.args[0].term.termType!=="Variable"&&(l.args[0].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(l.args[0].term))&&l.args[1].expressionType==="term"&&l.args[1].term.termType==="Variable")return{variable:l.args[1].term,term:l.args[0].term};if(l.args[0].expressionType==="term"&&l.args[0].term.termType==="Variable"&&l.args[1].expressionType==="term"&&l.args[1].term.termType!=="Variable"&&(l.args[1].term.termType!=="Literal"||this.isLiteralWithCanonicalLexicalForm(l.args[1].term)))return{variable:l.args[0].term,term:l.args[1].term}}}isLiteralWithCanonicalLexicalForm(l){switch(l.datatype.value){case"http://www.w3.org/2001/XMLSchema#string":case"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":case"http://www.w3.org/2001/XMLSchema#normalizedString":case"http://www.w3.org/2001/XMLSchema#anyURI":case"http://www.w3.org/2001/XMLSchema#base64Binary":case"http://www.w3.org/2001/XMLSchema#language":case"http://www.w3.org/2001/XMLSchema#Name":case"http://www.w3.org/2001/XMLSchema#NCName":case"http://www.w3.org/2001/XMLSchema#NMTOKEN":case"http://www.w3.org/2001/XMLSchema#token":case"http://www.w3.org/2001/XMLSchema#hexBinary":return!0}return!1}variablesIntersect(l,s){return l.some(c=>s.some(d=>c.equals(d)))}variablesSubSetOf(l,s){return l.length<=s.length&&l.every(c=>s.some(d=>c.equals(d)))}isExpressionFalse(l){return l.term&&l.term.termType==="Literal"&&l.term.value==="false"}getNestedFilterExpressions(l){if(l.input.type===t.Algebra.types.FILTER){const s=this.getNestedFilterExpressions(l.input);return{nestedExpressions:[l.expression,...s.nestedExpressions],input:s.input}}return{nestedExpressions:[l.expression],input:l.input}}};return Ox.ActorOptimizeQueryOperationFilterPushdown=i,Ox}var G0e;function zV(){return G0e||(G0e=1,(function(a){var e=Cy&&Cy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Cy&&Cy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(S9e(),a)})(Cy)),Cy}var Ly={},xx={},qy={},$0e;function G3e(){if($0e)return qy;$0e=1,Object.defineProperty(qy,"__esModule",{value:!0}),qy.ActorDereferenceHttpBase=qy.mediaTypesToAcceptString=void 0;const a=TB(),e=sc(),u=De(),n=O1(),r=Xn(),t=/^[^ ;]*/u;function i(l,s){const c="*/*;q=0.1",d=[],f=Object.entries(l).map(([h,g])=>({mediaType:h,priority:g})).sort((h,g)=>g.priority===h.priority?h.mediaType.localeCompare(g.mediaType):g.priority-h.priority);let p=f.length-1;for(const{mediaType:h,priority:g}of f){const v=h+(g===1?"":`;q=${g.toFixed(3).replace(/0*$/u,"")}`);if(p+v.length>s){for(;p+c.length>s;){const m=d.pop()??"";p-=m.length+1}d.push(c);break}d.push(v),p+=v.length}return d.length===0?"*/*":d.join(",")}qy.mediaTypesToAcceptString=i;let o=class extends a.ActorDereference{constructor(s){super(s)}async test({url:s}){return/^https?:/u.test(s)?(0,u.passTestVoid)():(0,u.failTest)(`Cannot retrieve ${s} because it is not an HTTP(S) URL.`)}async run(s){let c=!0;const d=new Headers(s.headers);d.append("Accept",i(await s.mediaTypes?.()??{},this.getMaxAcceptHeaderLength()));let f;const p=Date.now();try{f=await this.mediatorHttp.mediate({context:s.context,init:{headers:d,method:s.method},input:s.url})}catch(m){return this.handleDereferenceErrors(s,m)}const h=(0,r.resolve)(f.url,s.url),g=Date.now()-p;if(f.status!==200){c=!1;const m=f.body?await(0,n.stringify)(e.ActorHttp.toNodeReadable(f.body)):"empty response";if(!s.acceptErrors){const T=new Error(`Could not retrieve ${s.url} (HTTP status ${f.status}):
${m}`);return this.handleDereferenceErrors(s,T,f.headers,g)}}const v=t.exec(f.headers.get("content-type")??"")?.[0];return{url:h,data:c?e.ActorHttp.toNodeReadable(f.body):(0,a.emptyReadable)(),exists:c,requestTime:g,headers:f.headers,mediaType:v==="text/plain"?void 0:v}}};return qy.ActorDereferenceHttpBase=o,qy}var X0e;function E9e(){if(X0e)return xx;X0e=1,Object.defineProperty(xx,"__esModule",{value:!0}),xx.ActorDereferenceHttp=void 0;const a=G3e();class e extends a.ActorDereferenceHttpBase{getMaxAcceptHeaderLength(){return this.maxAcceptHeaderLengthBrowser}}return xx.ActorDereferenceHttp=e,xx}var K0e;function GV(){return K0e||(K0e=1,(function(a){var e=Ly&&Ly.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ly&&Ly.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(E9e(),a),u(G3e(),a)})(Ly)),Ly}var By={},Rx={},J0e;function A9e(){if(J0e)return Rx;J0e=1,Object.defineProperty(Rx,"__esModule",{value:!0}),Rx.ActorHttpInruptSolidClientAuthn=void 0;const a=sc(),e=lt(),u=De();let n=class Mg extends a.ActorHttp{constructor(t){super(t)}async test(t){return!t.context||!t.context.has(Mg.CONTEXT_KEY_SESSION)?(0,u.failTest)(`Unable to find Solid authn session in context with key '${Mg.CONTEXT_KEY_SESSION.name}'`):t.context.has(e.KeysHttp.fetch)?(0,u.failTest)("Unable to run when a custom fetch function has been configured"):t.context.get(Mg.CONTEXT_KEY_SESSION).info.isLoggedIn?(0,u.passTestVoid)():(0,u.failTest)("The provided Solid authn session is not in a logged in state, make sure to call session.login() first")}async run(t){const i=t.context.get(Mg.CONTEXT_KEY_SESSION);return this.logInfo(t.context,`Handling request to ${typeof t.input=="string"?t.input:t.input.url} as authenticated request for ${i.info.webId}`),this.mediatorHttp.mediate({...t,context:t.context.delete(Mg.CONTEXT_KEY_SESSION).set(e.KeysHttp.fetch,i.fetch)})}};return Rx.ActorHttpInruptSolidClientAuthn=n,n.CONTEXT_KEY_SESSION=new u.ActionContextKey("@comunica/actor-http-inrupt-solid-client-authn:session"),Rx}var W0e;function $V(){return W0e||(W0e=1,(function(a){var e=By&&By.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=By&&By.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(A9e(),a)})(By)),By}var Uy={},Nx={},Y0e;function O9e(){if(Y0e)return Nx;Y0e=1,Object.defineProperty(Nx,"__esModule",{value:!0}),Nx.ActorContextPreprocessQuerySourceIdentify=void 0;const a=_1(),e=lt(),u=De(),n=wb();let r=class extends a.ActorContextPreprocess{constructor(i){super(i),this.cache=this.cacheSize?new n.LRUCache({max:this.cacheSize}):void 0;const o=this.cache;o&&this.httpInvalidator.addInvalidateListener(({url:l})=>l?o.delete(l):o.clear())}async test(i){return(0,u.passTestVoid)()}async run(i){let o=i.context;if(o.has(e.KeysInitQuery.querySourcesUnidentified)){const l=i.context.get(e.KeysInitQuery.querySourcesUnidentified),s=await Promise.all(l.map(f=>this.expandSource(f))),c=await Promise.all(s.map(async f=>this.identifySource(f,i.context))),d=i.context.get(e.KeysStatistics.dereferencedLinks);if(d)for(const f of c)d.updateStatistic({url:f.source.referenceValue,metadata:{seed:!0}},f.source);o=i.context.delete(e.KeysInitQuery.querySourcesUnidentified).set(e.KeysQueryOperation.querySources,c)}return{context:o}}async expandSource(i){return typeof i=="string"||"match"in i?{value:i}:{...i,context:(await this.mediatorContextPreprocess.mediate({context:u.ActionContext.ensureActionContext(i.context??{})})).context}}identifySource(i,o){let l;return typeof i.value=="string"&&this.cache&&(l=this.cache.get(i.value)),l||(l=this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:i,context:o}).then(({querySource:s})=>s),typeof i.value=="string"&&this.cache&&this.cache.set(i.value,l)),l}};return Nx.ActorContextPreprocessQuerySourceIdentify=r,Nx}var Z0e;function XV(){return Z0e||(Z0e=1,(function(a){var e=Uy&&Uy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Uy&&Uy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(O9e(),a)})(Uy)),Uy}var Qy={},Ix={},ehe;function x9e(){if(ehe)return Ix;ehe=1,Object.defineProperty(Ix,"__esModule",{value:!0}),Ix.ActorRdfUpdateQuadsHypermedia=void 0;const a=sU(),e=De(),u=wb();let n=class extends a.ActorRdfUpdateQuadsDestination{constructor(t){super(t),this.cache=this.cacheSize?new u.LRUCache({max:this.cacheSize}):void 0;const i=this.cache;i&&this.httpInvalidator.addInvalidateListener(({url:o})=>o?i.delete(o):i.clear())}async test(t){return(0,a.getContextDestinationUrl)((0,a.getContextDestination)(t.context))?(0,e.passTestVoid)():(0,e.failTest)(`Actor ${this.name} can only update quads against a single destination URL.`)}getDestination(t){const i=(0,a.getContextDestination)(t);let o=(0,a.getContextDestinationUrl)(i);if(this.cache&&this.cache.has(o))return this.cache.get(o);const l=(async()=>{let s,c;try{const f=await this.mediatorDereferenceRdf.mediate({context:t,url:o,acceptErrors:!0});c=f.exists,o=f.url;const p=await this.mediatorMetadata.mediate({context:t,url:o,quads:f.data,triples:f.metadata?.triples});s=(await this.mediatorMetadataExtract.mediate({context:t,url:o,metadata:p.metadata,headers:f.headers,requestTime:f.requestTime})).metadata}catch{s={},c=!1}const{destination:d}=await this.mediatorRdfUpdateHypermedia.mediate({context:t,url:o,metadata:s,exists:c,forceDestinationType:(0,a.getDataDestinationType)(i)});return d})();return this.cache&&this.cache.set(o,l),l}};return Ix.ActorRdfUpdateQuadsHypermedia=n,Ix}var the;function KV(){return the||(the=1,(function(a){var e=Qy&&Qy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Qy&&Qy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(x9e(),a)})(Qy)),Qy}var Vy={},Dx={},rhe;function R9e(){if(rhe)return Dx;rhe=1,Object.defineProperty(Dx,"__esModule",{value:!0}),Dx.ActionObserverHttp=void 0;const a=De();class e extends a.ActionObserver{constructor(n){super(n),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(n,r,t){this.observedActors.includes(n.name)&&this.requests++}}return Dx.ActionObserverHttp=e,Dx}var Fx={},nhe;function N9e(){if(nhe)return Fx;nhe=1,Object.defineProperty(Fx,"__esModule",{value:!0}),Fx.ActorQueryResultSerializeSparqlJson=void 0;const a=$o(),e=De(),u=zt(),n=Nr();let r=class $6 extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(i){super(i)}static bindingToJsonBindings(i){if(i.termType==="Literal"){const o=i,l={value:o.value,type:"literal"},{language:s,datatype:c}=o;return s?l["xml:lang"]=s:c&&c.value!=="http://www.w3.org/2001/XMLSchema#string"&&(l.datatype=c.value),l}return i.termType==="BlankNode"?{value:i.value,type:"bnode"}:i.termType==="Quad"?{value:{subject:$6.bindingToJsonBindings(i.subject),predicate:$6.bindingToJsonBindings(i.predicate),object:$6.bindingToJsonBindings(i.object)},type:"triple"}:{value:i.value,type:"uri"}}async testHandleChecked(i,o){return["bindings","boolean"].includes(i.type)?(0,e.passTestVoid)():(0,e.failTest)("This actor can only handle bindings streams or booleans.")}async runHandle(i,o,l){const s=new n.Readable,c={};if(i.type==="bindings"){const d=await i.metadata();d.variables.length>0&&(c.vars=d.variables.map(f=>f.variable.value))}if(s.push(`{"head": ${JSON.stringify(c)},
`),i.type==="bindings"){const d=i.bindingsStream;s.push(`"results": { "bindings": [
`);let f=!0;function*p(h){yield h()}s.wrap((0,u.wrap)(d).map(h=>{const g=`${f?"":`,
`}${JSON.stringify(Object.fromEntries([...h].map(([v,m])=>[v.value,$6.bindingToJsonBindings(m)])))}`;return f=!1,g}).append((0,u.wrap)(p(()=>`
]}${this.emitMetadata?`,
"metadata": { "httpRequests": ${this.httpObserver.requests} }`:""}}
`))))}else s.wrap((0,u.wrap)(i.execute().then(d=>[`"boolean":${d}
}
`])));return{data:s}}};return Fx.ActorQueryResultSerializeSparqlJson=r,Fx}var ahe;function o1(){return ahe||(ahe=1,(function(a){var e=Vy&&Vy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Vy&&Vy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(R9e(),a),u(N9e(),a)})(Vy)),Vy}var Hy={},Px={},ihe;function I9e(){if(ihe)return Px;ihe=1,Object.defineProperty(Px,"__esModule",{value:!0}),Px.ActionObserverHttp=void 0;const a=De();let e=class extends a.ActionObserver{constructor(n){super(n),this.requests=0,this.bus.subscribeObserver(this),this.httpInvalidator.addInvalidateListener(()=>{this.requests=0})}onRun(n,r,t){this.observedActors.includes(n.name)&&this.requests++}};return Px.ActionObserverHttp=e,Px}var jx={},uhe;function D9e(){if(uhe)return jx;uhe=1,Object.defineProperty(jx,"__esModule",{value:!0}),jx.ActorQueryResultSerializeStats=void 0;const a=$o(),e=lt(),u=De(),n=zt(),r=Nr();let t=class extends a.ActorQueryResultSerializeFixedMediaTypes{constructor(o){super(o)}async testHandleChecked(o,l){return["bindings","quads"].includes(o.type)?(0,u.passTestVoid)():(0,u.failTest)("This actor can only handle bindings streams or quad streams.")}pushHeader(o){const l=["Result","Delay (ms)","HTTP requests"].join(",");o.push(`${l}
`)}createStat(o,l){return`${[l,this.delay(o),this.httpObserver.requests].join(",")}
`}createSpecialLine(o,l){return`${[o,this.delay(l),this.httpObserver.requests].join(",")}
`}async runHandle(o,l,s){const c=new r.Readable,d=o.type==="bindings"?o.bindingsStream:o.quadStream,f=o.context.getSafe(e.KeysInitQuery.queryTimestampHighResolution);let p=1;function*h(v){yield v()}const g=(0,n.wrap)(d).map(()=>this.createStat(f,p++)).prepend([this.createSpecialLine("PLANNING",f)]).append((0,n.wrap)(h(()=>this.createSpecialLine("TOTAL",f))));return this.pushHeader(c),c.wrap(g),{data:c}}now(){return performance.now()}delay(o){return this.now()-o}};return jx.ActorQueryResultSerializeStats=t,jx}var ohe;function s1(){return ohe||(ohe=1,(function(a){var e=Hy&&Hy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Hy&&Hy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(I9e(),a),u(D9e(),a)})(Hy)),Hy}var ky={},Mx={},zy={},Cx={},she;function F9e(){if(she)return Cx;she=1,Object.defineProperty(Cx,"__esModule",{value:!0}),Cx.ActorQuerySourceIdentifyHypermedia=void 0;const a=De();class e extends a.Actor{constructor(n,r){super(n),this.sourceType=r}async test(n){return n.forceSourceType&&this.sourceType!==n.forceSourceType?(0,a.failTest)(`Actor ${this.name} is not able to handle source type ${n.forceSourceType}.`):this.testMetadata(n)}}return Cx.ActorQuerySourceIdentifyHypermedia=e,Cx}var che;function JV(){return che||(che=1,(function(a){var e=zy&&zy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=zy&&zy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(F9e(),a)})(zy)),zy}var Lx={},lhe;function $3e(){if(lhe)return Lx;lhe=1,Object.defineProperty(Lx,"__esModule",{value:!0}),Lx.QuerySourceQpf=void 0;const a=tN(),e=lt(),u=xa(),n=zt(),r=$t(),t=J4(),i=Yr();let o=class{constructor(c,d,f,p,h,g,v,m,T,w,E,S,N,j){if(this.referenceValue=E,this.mediatorMetadata=c,this.mediatorMetadataExtract=d,this.mediatorDereferenceRdf=f,this.dataFactory=p,this.algebraFactory=h,this.bindingsFactory=g,this.subjectUri=v,this.predicateUri=m,this.objectUri=T,this.graphUri=w,this.url=E,this.bindingsRestricted=N,this.cachedQuads={},this.searchForm=this.getSearchForm(S),this.defaultGraph=S.defaultGraph?this.dataFactory.namedNode(S.defaultGraph):void 0,j){let q=(0,n.wrap)(j);this.defaultGraph&&(q=this.reverseMapQuadsToDefaultGraph(q)),S={...S,state:new u.MetadataValidationState},q.setProperty("metadata",S),this.cacheQuads(q,this.dataFactory.variable(""),this.dataFactory.variable(""),this.dataFactory.variable(""),this.dataFactory.variable(""))}this.selectorShape=this.bindingsRestricted?{type:"operation",operation:{operationType:"pattern",pattern:this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")],filterBindings:!0}:{type:"operation",operation:{operationType:"pattern",pattern:this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")]}}async getSelectorShape(){return this.selectorShape}queryBindings(c,d,f){if(c.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${c.type}' to QuerySourceQpf`);const p=!!d.get(e.KeysQueryOperation.unionDefaultGraph);let h=this.match(c.subject,c.predicate,c.object,c.graph,p,d,f);return h=(0,a.filterMatchingQuotedQuads)(c,h),(0,a.quadsToBindings)(h,c,this.dataFactory,this.bindingsFactory,p)}getSearchForm(c){if(!c.searchForms||!c.searchForms.values)return;const{searchForms:d}=c;for(const f of d.values)if(this.graphUri&&this.subjectUri in f.mappings&&this.predicateUri in f.mappings&&this.objectUri in f.mappings&&this.graphUri in f.mappings&&Object.keys(f.mappings).length===4||this.subjectUri in f.mappings&&this.predicateUri in f.mappings&&this.objectUri in f.mappings&&Object.keys(f.mappings).length===3)return f}createFragmentUri(c,d,f,p,h){const g={},v=[{uri:this.subjectUri,term:d},{uri:this.predicateUri,term:f},{uri:this.objectUri,term:p},{uri:this.graphUri,term:h}];for(const m of v)m.uri&&(this.bindingsRestricted||m.term.termType!=="Variable"&&(m.term.termType!=="Quad"||(0,i.everyTermsNested)(m.term,T=>T.termType!=="Variable")))&&(g[m.uri]=(0,r.termToString)(m.term));return c.getUri(g)}match(c,d,f,p,h,g,v){let m=!1;if(p.termType==="DefaultGraph")if(this.defaultGraph)m=!0,p=this.defaultGraph;else if(Object.keys(this.searchForm.mappings).length===4&&!this.defaultGraph)if(h)p=this.dataFactory.variable("g");else{const S=new n.ArrayIterator([],{autoStart:!1});return S.setProperty("metadata",{state:new u.MetadataValidationState,requestTime:0,cardinality:{type:"exact",value:0},first:null,next:null,last:null}),S}else p=this.dataFactory.variable("g");if(!v?.filterBindings){const S=this.getCachedQuads(c,d,f,p);if(S)return S}const T=this;let w;const E=(async function(){let S=T.createFragmentUri(T.searchForm,c,d,f,p);v?.filterBindings&&(S=await T.getBindingsRestrictedLink(c,d,f,p,S,v.filterBindings));const N=await T.mediatorDereferenceRdf.mediate({context:g,url:S});S=N.url;const j=await T.mediatorMetadata.mediate({context:g,url:S,quads:N.data,triples:N.metadata?.triples}),{metadata:q}=await T.mediatorMetadataExtract.mediate({context:g,url:S,metadata:j.metadata,requestTime:N.requestTime});return w.setProperty("metadata",{...q,state:new u.MetadataValidationState,subsetOf:T.url}),j.data})();return w=new n.TransformIterator(async()=>{const S=await E,N=this.dataFactory.defaultGraph();let j=(0,n.wrap)(S).transform({filter(q){return(0,i.matchPattern)(q,c,d,f,p)?!0:m&&(0,i.matchPattern)(q,c,d,f,N)}});return(m||p.termType==="Variable")&&(j=this.reverseMapQuadsToDefaultGraph(j)),j},{autoStart:!1}),v?.filterBindings?w:(this.cacheQuads(w,c,d,f,p),this.getCachedQuads(c,d,f,p))}async getBindingsRestrictedLink(c,d,f,p,h,g){const v=[];for(const T of await g.bindings.toArray()){const w=["("];for(const E of g.metadata.variables){const S=T.get(E.variable);w.push(S?(0,t.termToString)(S):"UNDEF"),w.push(" ")}w.push(")"),v.push(w.join(""))}v.length===0&&v.push("(<ex:comunica:unknown>)");const m=encodeURIComponent(`(${g.metadata.variables.map(T=>`?${T.variable.value}`).join(" ")}) { ${v.join(" ")} }`);return`${h}&values=${m}`}reverseMapQuadsToDefaultGraph(c){const d=this.dataFactory.defaultGraph();return c.map(f=>(0,i.mapTerms)(f,(p,h)=>h==="graph"&&p.equals(this.defaultGraph)?d:p))}getPatternId(c,d,f,p){return JSON.stringify({s:c.termType==="Variable"?"":l(c),p:d.termType==="Variable"?"":l(d),o:f.termType==="Variable"?"":l(f),g:p.termType==="Variable"?"":l(p)})}cacheQuads(c,d,f,p,h){const g=this.getPatternId(d,f,p,h);this.cachedQuads[g]=c.clone()}getCachedQuads(c,d,f,p){const h=this.getPatternId(c,d,f,p),g=this.cachedQuads[h];if(g)return g.clone()}queryQuads(c,d){throw new Error("queryQuads is not implemented in QuerySourceQpf")}queryBoolean(c,d){throw new Error("queryBoolean is not implemented in QuerySourceQpf")}queryVoid(c,d){throw new Error("queryVoid is not implemented in QuerySourceQpf")}};Lx.QuerySourceQpf=o;function l(s){return s.termType==="DefaultGraph"?"|":(0,r.termToString)(s)}return Lx}var dhe;function P9e(){if(dhe)return Mx;dhe=1,Object.defineProperty(Mx,"__esModule",{value:!0}),Mx.ActorQuerySourceIdentifyHypermediaQpf=void 0;const a=JV(),e=lt(),u=De(),n=pn(),r=Ut(),t=$3e();let i=class extends a.ActorQuerySourceIdentifyHypermedia{constructor(l){super(l,"qpf")}async test(l){return l.forceSourceType&&l.forceSourceType!=="qpf"&&l.forceSourceType!=="brtpf"?(0,u.failTest)(`Actor ${this.name} is not able to handle source type ${l.forceSourceType}.`):this.testMetadata(l)}async testMetadata(l){const{searchForm:s}=await this.createSource(l.url,l.metadata,l.context,l.forceSourceType==="brtpf");return s?l.handledDatasets&&l.handledDatasets[s.dataset]?(0,u.failTest)(`Actor ${this.name} can only be applied for the first page of a QPF dataset.`):(0,u.passTest)({filterFactor:1}):(0,u.failTest)("Illegal state: found no TPF/QPF search form anymore in metadata.")}async run(l){this.logInfo(l.context,`Identified as qpf source: ${l.url}`);const s=await this.createSource(l.url,l.metadata,l.context,l.forceSourceType==="brtpf",l.quads);return{source:s,dataset:s.searchForm.dataset}}async createSource(l,s,c,d,f){const p=c.getSafe(e.KeysInitQuery.dataFactory),h=new r.Factory(p);return new t.QuerySourceQpf(this.mediatorMetadata,this.mediatorMetadataExtract,this.mediatorDereferenceRdf,p,h,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,c,p),this.subjectUri,this.predicateUri,this.objectUri,this.graphUri,l,s,d,f)}};return Mx.ActorQuerySourceIdentifyHypermediaQpf=i,Mx}var fhe;function WV(){return fhe||(fhe=1,(function(a){var e=ky&&ky.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ky&&ky.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(P9e(),a),u($3e(),a)})(ky)),ky}var Gy={},qx={},Bx={},phe;function X3e(){if(phe)return Bx;phe=1,Object.defineProperty(Bx,"__esModule",{value:!0}),Bx.QuerySourceSparql=void 0;const a=lt(),e=De(),u=xa(),n=Zt(),r=zt(),t=A3e(),i=wb(),o=Yr(),l=Ut();let s=class oo{constructor(d,f,p,h,g,v,m,T,w,E,S,N,j,q){this.referenceValue=d,this.url=d,this.context=f,this.mediatorHttp=p,this.bindMethod=h,this.dataFactory=g,this.algebraFactory=v,this.bindingsFactory=m,this.endpointFetcher=new t.SparqlEndpointFetcher({method:T?"GET":"POST",fetch:(O,I)=>this.mediatorHttp.mediate({input:O,init:I,context:this.lastSourceContext}),prefixVariableQuestionMark:!0,dataFactory:g,forceGetIfUrlLengthBelow:j,directPost:q.postAccepted&&!q.postAccepted.includes("application/x-www-form-urlencoded")}),this.cache=w>0?new i.LRUCache({max:w}):void 0,this.countTimeout=E,this.cardinalityCountQueries=S,this.cardinalityEstimateConstruction=N,this.defaultGraph=q.defaultGraph,this.unionDefaultGraph=q.unionDefaultGraph??!1,this.datasets=q.datasets,this.extensionFunctions=q.extensionFunctions,this.propertyFeatures=q.propertyFeatures?new Set(q.propertyFeatures):void 0}async getSelectorShape(){const d={type:"disjunction",children:[{type:"operation",operation:{operationType:"wildcard"},joinBindings:!0}]};return this.extensionFunctions&&d.children.push({type:"operation",operation:{operationType:"type",type:l.Algebra.types.EXPRESSION,extensionFunctions:this.extensionFunctions},joinBindings:!0}),{type:"conjunction",children:[d,{type:"negation",child:{type:"operation",operation:{operationType:"type",type:l.Algebra.types.DISTINCT},children:[{type:"operation",operation:{operationType:"type",type:l.Algebra.types.CONSTRUCT},children:[{type:"operation",operation:{operationType:"wildcard"},joinBindings:!0}]}]}}]}}queryBindings(d,f,p){let h;p?.joinBindings?h=oo.addBindingsToOperation(this.algebraFactory,this.bindMethod,d,p.joinBindings):h=Promise.resolve(d);const g=new r.TransformIterator(async()=>{const v=await h,m=l.Util.inScopeVariables(v),T=f.get(a.KeysInitQuery.queryString),w=f.getSafe(a.KeysInitQuery.queryFormat),E=!p?.joinBindings&&T&&w.language==="sparql"?T:oo.operationToSelectQuery(this.algebraFactory,v,m),S=oo.getOperationUndefs(v);return this.queryBindingsRemote(this.url,E,m,f,S)},{autoStart:!1});return this.attachMetadata(g,f,h),g}queryQuads(d,f){this.lastSourceContext=this.context.merge(f);const p=f.get(a.KeysInitQuery.queryString)??oo.operationToQuery(d),h=this.endpointFetcher.fetchTriples(this.url,p);this.lastSourceContext=void 0;const g=(0,r.wrap)(h,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY});return this.attachMetadata(g,f,Promise.resolve(d.input)),g}queryBoolean(d,f){if(this.operationUsesPropertyFeatures(d))return Promise.resolve(!0);this.lastSourceContext=this.context.merge(f);const p=f.get(a.KeysInitQuery.queryString)??oo.operationToQuery(d),h=this.endpointFetcher.fetchAsk(this.url,p);return this.lastSourceContext=void 0,h}queryVoid(d,f){this.lastSourceContext=this.context.merge(f);const p=f.get(a.KeysInitQuery.queryString)??oo.operationToQuery(d),h=this.endpointFetcher.fetchUpdate(this.url,p);return this.lastSourceContext=void 0,h}attachMetadata(d,f,p){let h=[];new Promise(async(g,v)=>{try{const m=await p,T=l.Util.inScopeVariables(m),w=this.operationToNormalizedCountQuery(m),E=oo.getOperationUndefs(m);h=T.map(O=>({variable:O,canBeUndef:E.some(I=>I.equals(O))}));const S=this.cache?.get(w);if(S)return g(S);if(this.cardinalityEstimateConstruction){const O=await this.estimateOperationCardinality(m);if(Number.isFinite(O.value))return this.cache?.set(w,O),g(O)}if(!this.cardinalityCountQueries)return g({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url});const N=setTimeout(()=>g({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url}),this.countTimeout),j=this.dataFactory.variable("count");(await this.queryBindingsRemote(this.url,w,[j],f,[])).on("data",O=>{clearTimeout(N);const I=O.get(j),A={type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url};if(I){const P=Number.parseInt(I.value,10);Number.isNaN(P)||(A.type="exact",A.value=P,this.cache?.set(w,A))}return g(A)}).on("error",()=>{clearTimeout(N),g({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url})}).on("end",()=>{clearTimeout(N),g({type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url})})}catch(m){v(m)}}).then(g=>d.setProperty("metadata",{state:new u.MetadataValidationState,cardinality:g,variables:h})).catch(()=>d.setProperty("metadata",{state:new u.MetadataValidationState,cardinality:{type:"estimate",value:Number.POSITIVE_INFINITY,dataset:this.url},variables:h}))}operationToNormalizedCountQuery(d){const f=d.type===l.Algebra.types.PATTERN?this.algebraFactory.createPattern(d.subject.termType==="Variable"?this.dataFactory.variable("s"):d.subject,d.predicate.termType==="Variable"?this.dataFactory.variable("p"):d.predicate,d.object.termType==="Variable"?this.dataFactory.variable("o"):d.object):d;return oo.operationToCountQuery(this.dataFactory,this.algebraFactory,f)}async estimateOperationCardinality(d){if(this.operationUsesPropertyFeatures(d))return{type:"estimate",value:1,dataset:this.url};const f={getCardinality:p=>{const h=this.operationToNormalizedCountQuery(p),g=this.cache?.get(h);if(g)return g;if(this.datasets){const v=this.datasets.filter(T=>this.unionDefaultGraph||this.defaultGraph&&T.uri.endsWith(this.defaultGraph)).map(T=>(0,n.estimateCardinality)(p,T));return{type:v.some(T=>T.type==="estimate")?"estimate":"exact",value:v.length>0?v.reduce((T,w)=>T+w.value,0):0,dataset:this.url}}},source:this.url,uri:this.url};return(0,n.estimateCardinality)(d,f)}operationUsesPropertyFeatures(d){let f=!1;return this.propertyFeatures&&l.Util.recurseOperation(d,{[l.Algebra.types.PATTERN]:p=>(p.predicate.termType==="NamedNode"&&this.propertyFeatures.has(p.predicate.value)&&(f=!0),!1),[l.Algebra.types.LINK]:p=>(this.propertyFeatures.has(p.iri.value)&&(f=!0),!1),[l.Algebra.types.NPS]:p=>(p.iris.some(h=>this.propertyFeatures.has(h.value))&&(f=!0),!1)}),f}static async addBindingsToOperation(d,f,p,h){const g=await h.bindings.toArray();switch(f){case"values":return d.createJoin([d.createValues(h.metadata.variables.map(v=>v.variable),g.map(v=>Object.fromEntries([...v].map(([m,T])=>[`?${m.value}`,T])))),p],!1);case"union":throw new Error('Not implemented yet: "union" case');case"filter":throw new Error('Not implemented yet: "filter" case')}}static operationToSelectQuery(d,f,p){return oo.operationToQuery(d.createProject(f,p))}static operationToCountQuery(d,f,p){return oo.operationToQuery(f.createProject(f.createExtend(f.createGroup(p,[],[f.createBoundAggregate(d.variable("var0"),"count",f.createWildcardExpression(),!1)]),d.variable("count"),f.createTermExpression(d.variable("var0"))),[d.variable("count")]))}static operationToQuery(d){return(0,l.toSparql)(d,{sparqlStar:!0})}static getOperationUndefs(d){const f=[];return l.Util.recurseOperation(d,{leftjoin(p){const h=l.Util.inScopeVariables(p.input[0]),g=l.Util.inScopeVariables(p.input[1]);for(const v of g)h.some(m=>m.equals(v))||f.push(v);return!1},values(p){for(const h of p.variables)p.bindings.some(g=>!(`?${h.value}`in g))&&f.push(h);return!1},union(p){const h=p.input.map(l.Util.inScopeVariables);for(const g of(0,o.uniqTerms)(h.flat()))h.every(v=>v.some(m=>m.equals(g)))||f.push(g);return!0}}),(0,o.uniqTerms)(f)}async queryBindingsRemote(d,f,p,h,g){const v=new Set(g.map(T=>T.value));this.lastSourceContext=this.context.merge(h);const m=await this.endpointFetcher.fetchBindings(d,f);return this.lastSourceContext=void 0,(0,r.wrap)(m,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY}).map(T=>this.bindingsFactory.bindings(p.map(w=>{const E=T[`?${w.value}`];return!v.has(w.value)&&!E&&e.Actor.getContextLogger(this.context)?.warn(`The endpoint ${d} failed to provide a binding for ${w.value}.`),[w,E]}).filter(([w,E])=>!!E)))}toString(){return`QuerySourceSparql(${this.url})`}};return Bx.QuerySourceSparql=s,Bx}var hhe;function j9e(){if(hhe)return qx;hhe=1,Object.defineProperty(qx,"__esModule",{value:!0}),qx.ActorQuerySourceIdentifyHypermediaSparql=void 0;const a=JV(),e=lt(),u=De(),n=pn(),r=Ut(),t=X3e();let i=class extends a.ActorQuerySourceIdentifyHypermedia{constructor(l){super(l,"sparql")}async testMetadata(l){return!l.forceSourceType&&!this.forceSourceType&&!l.metadata.sparqlService&&!(this.checkUrlSuffix&&(l.url.endsWith("/sparql")||l.url.endsWith("/sparql/")))?(0,u.failTest)(`Actor ${this.name} could not detect a SPARQL service description or URL ending on /sparql.`):(0,u.passTest)({filterFactor:1})}async run(l){this.logInfo(l.context,`Identified ${l.url} as sparql source with service URL: ${l.metadata.sparqlService||l.url}`);const s=l.context.getSafe(e.KeysInitQuery.dataFactory),c=new r.Factory(s),d=l.context.get(e.KeysQueryOperation.querySources)?.length===1;return{source:new t.QuerySourceSparql(l.forceSourceType??this.forceSourceType?l.url:l.metadata.sparqlService||l.url,l.context,this.mediatorHttp,this.bindMethod,s,c,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,l.context,s),this.forceHttpGet,this.cacheSize,this.countTimeout,this.cardinalityCountQueries&&!d,this.cardinalityEstimateConstruction,this.forceGetIfUrlLengthBelow,l.metadata)}}};return qx.ActorQuerySourceIdentifyHypermediaSparql=i,qx}var yhe;function YV(){return yhe||(yhe=1,(function(a){var e=Gy&&Gy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Gy&&Gy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(j9e(),a),u(X3e(),a)})(Gy)),Gy}var $y={},Ux={},Xy={},Qx={},Vx={},mhe;function K3e(){if(mhe)return Vx;mhe=1,Object.defineProperty(Vx,"__esModule",{value:!0}),Vx.QuerySourceRdfJs=void 0;const a=tN(),e=lt(),u=xa(),n=zt(),r=Yr(),t=Ut();let i=class di{constructor(l,s,c){this.source=l,this.referenceValue=l,this.dataFactory=s,this.bindingsFactory=c;const d=new t.Factory(this.dataFactory);this.selectorShape={type:"operation",operation:{operationType:"pattern",pattern:d.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"))},variablesOptional:[this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o")]},this.dummyDefaultGraph=this.dataFactory.variable("__comunica:defaultGraph")}static nullifyVariables(l,s){return!l||l.termType==="Variable"||!s&&l.termType==="Quad"&&(0,r.someTermsNested)(l,c=>c.termType==="Variable")?void 0:l}static hasDuplicateVariables(l){const s=(0,r.filterTermsNested)(l,c=>c.termType==="Variable");return s.length>1&&(0,r.uniqTerms)(s).length<s.length}async getSelectorShape(){return this.selectorShape}queryBindings(l,s){if(l.type!=="pattern")throw new Error(`Attempted to pass non-pattern operation '${l.type}' to QuerySourceRdfJs`);const c=!!s.get(e.KeysQueryOperation.unionDefaultGraph);if(l.graph.termType==="DefaultGraph"&&c&&(l.graph=this.dummyDefaultGraph),"matchBindings"in this.source&&this.source.matchBindings){const h=this.source.matchBindings(this.bindingsFactory,l.subject,l.predicate,l.object,l.graph);let g=h instanceof n.AsyncIterator?h:(0,n.wrap)(h,{autoStart:!1}),v=!1;if(l.graph.termType==="Variable"&&!c){v=!0;const T=l.graph;g=g.filter(w=>w.get(T).termType!=="DefaultGraph")}l.graph.equals(this.dummyDefaultGraph)&&(g=g.map(T=>T.delete(this.dummyDefaultGraph)),l.graph=this.dataFactory.defaultGraph());const m=(0,a.getVariables)(l).map(T=>({variable:T,canBeUndef:!1}));return this.setMetadata(g,l,s,v,{variables:m}).catch(T=>g.destroy(T)),g}const d=!!("features"in this.source&&this.source.features?.quotedTripleFiltering),f=this.source.match(di.nullifyVariables(l.subject,d),di.nullifyVariables(l.predicate,d),di.nullifyVariables(l.object,d),di.nullifyVariables(l.graph,d));let p=f instanceof n.AsyncIterator?f:(0,n.wrap)(f,{autoStart:!1});return d||(p=(0,a.filterMatchingQuotedQuads)(l,p)),p.getProperty("metadata")||this.setMetadata(p,l,s).catch(h=>p.destroy(h)),l.graph.equals(this.dummyDefaultGraph)&&(l.graph=this.dataFactory.defaultGraph()),(0,a.quadsToBindings)(p,l,this.dataFactory,this.bindingsFactory,!!s.get(e.KeysQueryOperation.unionDefaultGraph))}async setMetadata(l,s,c,d=!1,f={}){const p=!!("features"in this.source&&this.source.features?.quotedTripleFiltering),h=!!c.get(e.KeysQueryOperation.unionDefaultGraph);s.graph.termType==="DefaultGraph"&&h&&(s.graph=this.dummyDefaultGraph);let g;if("countQuads"in this.source&&this.source.countQuads)g=await this.source.countQuads(di.nullifyVariables(s.subject,p),di.nullifyVariables(s.predicate,p),di.nullifyVariables(s.object,p),di.nullifyVariables(s.graph,p));else{let m=0;g=await new Promise((T,w)=>{let E=this.source.match(di.nullifyVariables(s.subject,p),di.nullifyVariables(s.predicate,p),di.nullifyVariables(s.object,p),di.nullifyVariables(s.graph,p));typeof E.on!="function"&&(E=new n.ArrayIterator(E)),E.on("error",w),E.on("end",()=>T(m)),E.on("data",()=>m++)})}const v=!p&&(0,r.someTerms)(s,m=>m.termType==="Quad")||di.hasDuplicateVariables(s);l.setProperty("metadata",{state:new u.MetadataValidationState,cardinality:{type:v||d?"estimate":"exact",value:g},requestTime:0,...f})}queryQuads(l,s){throw new Error("queryQuads is not implemented in QuerySourceRdfJs")}queryBoolean(l,s){throw new Error("queryBoolean is not implemented in QuerySourceRdfJs")}queryVoid(l,s){throw new Error("queryVoid is not implemented in QuerySourceRdfJs")}toString(){return`QuerySourceRdfJs(${this.source.constructor.name})`}};return Vx.QuerySourceRdfJs=i,Vx}var bhe;function M9e(){if(bhe)return Qx;bhe=1,Object.defineProperty(Qx,"__esModule",{value:!0}),Qx.ActorQuerySourceIdentifyRdfJs=void 0;const a=tN(),e=lt(),u=De(),n=pn(),r=K3e();let t=class extends a.ActorQuerySourceIdentify{constructor(o){super(o)}async test(o){const l=o.querySourceUnidentified;return l.type!==void 0&&l.type!=="rdfjs"?(0,u.failTest)(`${this.name} requires a single query source with rdfjs type to be present in the context.`):typeof l.value=="string"||!("match"in l.value)?(0,u.failTest)(`${this.name} received an invalid rdfjs query source.`):(0,u.passTestVoid)()}async run(o){const l=o.context.getSafe(e.KeysInitQuery.dataFactory);return{querySource:{source:new r.QuerySourceRdfJs(o.querySourceUnidentified.value,l,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,o.context,l)),context:o.querySourceUnidentified.context??new u.ActionContext}}}};return Qx.ActorQuerySourceIdentifyRdfJs=t,Qx}var JC={},ghe;function C9e(){return ghe||(ghe=1,Object.defineProperty(JC,"__esModule",{value:!0})),JC}var vhe;function nN(){return vhe||(vhe=1,(function(a){var e=Xy&&Xy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Xy&&Xy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(M9e(),a),u(C9e(),a),u(K3e(),a)})(Xy)),Xy}var ID={},Ky={},Hx={},kx={},Jy={},zx={},_he;function J3e(){if(_he)return zx;_he=1,Object.defineProperty(zx,"__esModule",{value:!0}),zx.BlankNode=void 0;class a{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}}return zx.BlankNode=a,zx}var Gx={},$x={},The;function W3e(){if(The)return $x;The=1,Object.defineProperty($x,"__esModule",{value:!0}),$x.DefaultGraph=void 0;class a{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}}return $x.DefaultGraph=a,a.INSTANCE=new a,$x}var Xx={},Kx={},whe;function ZV(){if(whe)return Kx;whe=1,Object.defineProperty(Kx,"__esModule",{value:!0}),Kx.NamedNode=void 0;class a{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}}return Kx.NamedNode=a,Kx}var She;function Y3e(){if(She)return Xx;She=1,Object.defineProperty(Xx,"__esModule",{value:!0}),Xx.Literal=void 0;const a=ZV();class e{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=e.RDF_LANGUAGE_STRING,this.direction=""):r?"termType"in r?(this.language="",this.datatype=r,this.direction=""):(this.language=r.language,this.datatype=r.direction?e.RDF_DIRECTIONAL_LANGUAGE_STRING:e.RDF_LANGUAGE_STRING,this.direction=r.direction||""):(this.language="",this.datatype=e.XSD_STRING,this.direction="")}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&(n.direction===this.direction||!n.direction&&this.direction==="")&&this.datatype.equals(n.datatype)}}return Xx.Literal=e,e.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.RDF_DIRECTIONAL_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),e.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),Xx}var Jx={},Ehe;function Z3e(){if(Ehe)return Jx;Ehe=1,Object.defineProperty(Jx,"__esModule",{value:!0}),Jx.Quad=void 0;class a{constructor(u,n,r,t){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=t}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}}return Jx.Quad=a,Jx}var Wx={},Ahe;function ewe(){if(Ahe)return Wx;Ahe=1,Object.defineProperty(Wx,"__esModule",{value:!0}),Wx.Variable=void 0;class a{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}}return Wx.Variable=a,Wx}var Ohe;function L9e(){if(Ohe)return Gx;Ohe=1,Object.defineProperty(Gx,"__esModule",{value:!0}),Gx.DataFactory=void 0;const a=J3e(),e=W3e(),u=Y3e(),n=ZV(),r=Z3e(),t=ewe();let i=0;class o{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,c){return new u.Literal(s,c)}variable(s){return new t.Variable(s)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(s,c,d,f){return new r.Quad(s,c,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}}return Gx.DataFactory=o,Gx}var xhe;function Wo(){return xhe||(xhe=1,(function(a){var e=Jy&&Jy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Jy&&Jy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(J3e(),a),u(L9e(),a),u(W3e(),a),u(Y3e(),a),u(ZV(),a),u(Z3e(),a),u(ewe(),a)})(Jy)),Jy}var Wy={},jr={},Rhe;function q9e(){if(Rhe)return jr;Rhe=1,Object.defineProperty(jr,"__esModule",{value:!0}),jr.TRIPLE_TERM_NAMES=jr.QUAD_TERM_NAMES=void 0,jr.getTerms=u,jr.getTermsNested=n,jr.getNamedTerms=r,jr.collectNamedTerms=t,jr.forEachTerms=i,jr.forEachTermsNested=o,jr.filterTerms=l,jr.filterTermsNested=s,jr.filterQuadTermNames=c,jr.filterQuadTermNamesNested=d,jr.mapTerms=f,jr.mapTermsNested=p,jr.reduceTerms=h,jr.reduceTermsNested=g,jr.everyTerms=v,jr.everyTermsNested=m,jr.someTerms=T,jr.someTermsNested=w,jr.getValueNestedPath=E,jr.matchTerm=S,jr.matchPattern=N,jr.matchPatternComplete=j,jr.matchPatternMappings=q;const a=Wo(),e=new a.DataFactory;jr.QUAD_TERM_NAMES=["subject","predicate","object","graph"],jr.TRIPLE_TERM_NAMES=["subject","predicate","object"];function u(O,I){return I&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function n(O,I){const A=[];for(const P of u(O,I))P.termType==="Quad"?n(P,I).forEach(C=>A.push(C)):A.push(P);return A}function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function t(O,I,A){const P={};return O.forEach(C=>P[C.key]=C.value),I&&(P.subject=P.subject||I("subject"),P.predicate=P.predicate||I("predicate"),P.object=P.object||I("object"),P.graph=P.graph||I("graph")),(A||e).quad(P.subject,P.predicate,P.object,P.graph)}function i(O,I){I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph")}function o(O,I,A=[]){O.subject.termType==="Quad"?o(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]),O.predicate.termType==="Quad"?o(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]),O.object.termType==="Quad"?o(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]),O.graph.termType==="Quad"?o(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"])}function l(O,I){const A=[];return I(O.subject,"subject")&&A.push(O.subject),I(O.predicate,"predicate")&&A.push(O.predicate),I(O.object,"object")&&A.push(O.object),I(O.graph,"graph")&&A.push(O.graph),A}function s(O,I,A=[]){let P=[];return O.subject.termType==="Quad"?P=[...P,...s(O.subject,I,[...A,"subject"])]:I(O.subject,[...A,"subject"])&&P.push(O.subject),O.predicate.termType==="Quad"?P=[...P,...s(O.predicate,I,[...A,"predicate"])]:I(O.predicate,[...A,"predicate"])&&P.push(O.predicate),O.object.termType==="Quad"?P=[...P,...s(O.object,I,[...A,"object"])]:I(O.object,[...A,"object"])&&P.push(O.object),O.graph.termType==="Quad"?P=[...P,...s(O.graph,I,[...A,"graph"])]:I(O.graph,[...A,"graph"])&&P.push(O.graph),P}function c(O,I){const A=[];return I(O.subject,"subject")&&A.push("subject"),I(O.predicate,"predicate")&&A.push("predicate"),I(O.object,"object")&&A.push("object"),I(O.graph,"graph")&&A.push("graph"),A}function d(O,I,A=[]){let P=[];const C=[...A,"subject"];O.subject.termType==="Quad"?P=[...P,...d(O.subject,I,C)]:I(O.subject,C)&&P.push(C);const B=[...A,"predicate"];O.predicate.termType==="Quad"?P=[...P,...d(O.predicate,I,B)]:I(O.predicate,B)&&P.push(B);const H=[...A,"object"];O.object.termType==="Quad"?P=[...P,...d(O.object,I,H)]:I(O.object,H)&&P.push(H);const V=[...A,"graph"];return O.graph.termType==="Quad"?P=[...P,...d(O.graph,I,V)]:I(O.graph,V)&&P.push(V),P}function f(O,I,A){return(A||e).quad(I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph"))}function p(O,I,A,P=[]){return(A||e).quad(O.subject.termType==="Quad"?p(O.subject,I,A,[...P,"subject"]):I(O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?p(O.predicate,I,A,[...P,"predicate"]):I(O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?p(O.object,I,A,[...P,"object"]):I(O.object,[...P,"object"]),O.graph.termType==="Quad"?p(O.graph,I,A,[...P,"graph"]):I(O.graph,[...P,"graph"]))}function h(O,I,A){let P=A;return P=I(P,O.subject,"subject"),P=I(P,O.predicate,"predicate"),P=I(P,O.object,"object"),I(P,O.graph,"graph")}function g(O,I,A,P=[]){let C=A;return O.subject.termType==="Quad"?C=g(O.subject,I,C,[...P,"subject"]):C=I(C,O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?C=g(O.predicate,I,C,[...P,"predicate"]):C=I(C,O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?C=g(O.object,I,C,[...P,"object"]):C=I(C,O.object,[...P,"object"]),O.graph.termType==="Quad"?C=g(O.graph,I,C,[...P,"graph"]):C=I(C,O.graph,[...P,"graph"]),C}function v(O,I){return I(O.subject,"subject")&&I(O.predicate,"predicate")&&I(O.object,"object")&&I(O.graph,"graph")}function m(O,I,A=[]){return(O.subject.termType==="Quad"?m(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))&&(O.predicate.termType==="Quad"?m(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))&&(O.object.termType==="Quad"?m(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))&&(O.graph.termType==="Quad"?m(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}function T(O,I){return I(O.subject,"subject")||I(O.predicate,"predicate")||I(O.object,"object")||I(O.graph,"graph")}function w(O,I,A=[]){return(O.subject.termType==="Quad"?w(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))||(O.predicate.termType==="Quad"?w(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))||(O.object.termType==="Quad"?w(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))||(O.graph.termType==="Quad"?w(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}function E(O,I){if(I.length===0)return O;if(O.termType==="Quad")return E(O[I[0]],I.slice(1));throw new Error(`Tried to get ${I[0]} from term of type ${O.termType}`)}function S(O,I){return!I||I.termType==="Variable"||I.termType==="Quad"&&O.termType==="Quad"&&j(O,I)||I.equals(O)}function N(O,I,A,P,C){return S(O.subject,I)&&S(O.predicate,A)&&S(O.object,P)&&S(O.graph,C)}function j(O,I){return N(O,I.subject,I.predicate,I.object,I.graph)}function q(O,I,A={}){const P={};function C(B,H){return v(B,(V,G)=>{var Z,ae;const W=H[G];switch(V.termType){case"Variable":return A.skipVarMapping&&W.termType==="Variable"||((ae=(Z=P[V.value])===null||Z===void 0?void 0:Z.equals(W))!==null&&ae!==void 0?ae:(P[V.value]=W,!0));case"Quad":return W.termType==="Quad"&&C(V,W);default:return V.equals(W)}})}return C(I,O)&&(A.returnMappings?P:!0)}return jr}var ji={},WC={},ro={},Nhe;function B9e(){if(Nhe)return ro;Nhe=1,Object.defineProperty(ro,"__esModule",{value:!0}),ro.termToString=u,ro.getLiteralValue=n,ro.getLiteralType=r,ro.getLiteralLanguage=t,ro.getLiteralDirection=i,ro.stringToTerm=o,ro.quadToStringQuad=l,ro.stringQuadToQuad=s;const a=Wo(),e=new a.DataFactory;function u(c){if(c)switch(c.termType){case"NamedNode":return c.value;case"BlankNode":return"_:"+c.value;case"Literal":const d=c;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${u(c.subject)} ${u(c.predicate)} ${u(c.object)}${c.graph.termType==="DefaultGraph"?"":" "+u(c.graph)}>>`;case"Variable":return"?"+c.value;case"DefaultGraph":return c.value}}function n(c){const d=/^"([^]*)"/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]}function r(c){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function t(c){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const p=f.indexOf("--");return p>=0&&(f=f.slice(0,p)),f}return""}function i(c){const d=c.indexOf("--",c.lastIndexOf('"'));if(d>=0){const f=c.slice(d+2,c.length);if(f==="ltr"||f==="rtl")return f;throw new Error(c+" is not a literal with a valid direction")}return""}function o(c,d){if(d=d||e,!c||!c.length)return d.defaultGraph();switch(c[0]){case"_":return d.blankNode(c.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(c.substr(1));case'"':const f=t(c),p=i(c),h=d.namedNode(r(c));return d.literal(n(c),f?{language:f,direction:p}:h);default:if(c[0]==="<"&&c.length>4&&c[1]==="<"&&c[c.length-1]===">"&&c[c.length-2]===">"){const g=c.slice(2,-2).trim();let v=[],m=0,T=0,w=!1;for(let E=0;E<g.length;E++){const S=g[E];if(S==="<"&&m++,S===">"){if(m===0)throw new Error("Found closing tag without opening tag in "+c);m--}if(S==='"'){let N=!1,j=E;for(;j-- >0&&g[j]==="\\";)N=!N;N||(w=!w)}if(S===" "&&!w&&m===0){for(v.push(g.slice(T,E));g[E+1]===" ";)E+=1;T=E+1}}if(m!==0)throw new Error("Found opening tag without closing tag in "+c);if(v.push(g.slice(T,g.length)),v.length!==3&&v.length!==4)throw new Error("Nested quad syntax error "+c);return v=v.map(E=>E.startsWith("<")&&!E.includes(" ")?E.slice(1,-1):E),d.quad(o(v[0]),o(v[1]),o(v[2]),v[3]?o(v[3]):void 0)}return d.namedNode(c)}}function l(c){return{subject:u(c.subject),predicate:u(c.predicate),object:u(c.object),graph:u(c.graph)}}function s(c,d){return d=d||e,d.quad(o(c.subject,d),o(c.predicate,d),o(c.object,d),o(c.graph,d))}return ro}var Ihe;function aN(){return Ihe||(Ihe=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralDirection=a.getLiteralLanguage=void 0;const e=B9e();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralDirection",{enumerable:!0,get:function(){return e.getLiteralDirection}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(WC)),WC}var Dhe;function U9e(){if(Dhe)return ji;Dhe=1,Object.defineProperty(ji,"__esModule",{value:!0}),ji.TERM_TYPES=void 0,ji.uniqTerms=e,ji.getTermsOfType=u,ji.getNamedNodes=n,ji.getBlankNodes=r,ji.getLiterals=t,ji.getVariables=i,ji.getDefaultGraphs=o,ji.getQuads=l;const a=aN();ji.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function e(s){const c={};return s.filter(d=>{const f=(0,a.termToString)(d);return!(f in c)&&(c[f]=!0)})}function u(s,c){return s.filter(d=>d.termType===c)}function n(s){return u(s,"NamedNode")}function r(s){return u(s,"BlankNode")}function t(s){return u(s,"Literal")}function i(s){return u(s,"Variable")}function o(s){return u(s,"DefaultGraph")}function l(s){return u(s,"Quad")}return ji}var Fhe;function IP(){return Fhe||(Fhe=1,(function(a){var e=Wy&&Wy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Wy&&Wy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(q9e(),a),u(U9e(),a)})(Wy)),Wy}var Yx={},Phe;function twe(){if(Phe)return Yx;Phe=1,Object.defineProperty(Yx,"__esModule",{value:!0}),Yx.TermDictionaryNumberRecordFullTerms=void 0;const a=Wo(),e=aN();class u{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const t=(0,e.termToString)(r);let i=this.dictionary[t];return i===void 0&&(i=this.lastId++,this.dictionary[t]=i,this.reverseDictionary[i]=r),i}encodeOptional(r){const t=(0,e.termToString)(r);return this.dictionary[t]}decode(r){const t=this.reverseDictionary[r];if(t===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return t}*encodings(){for(const r of Object.keys(this.reverseDictionary))yield Number.parseInt(r,10)}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}}return Yx.TermDictionaryNumberRecordFullTerms=u,Yx}var Zx={},eR={},YC={},jhe;function Yo(){return jhe||(jhe=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.QUAD_TERM_NAMES_INVERSE=void 0,a.getBestIndex=u,a.getComponentOrderScore=n,a.orderQuadComponents=r,a.encodeOptionalTerms=t,a.quadToPattern=i,a.quadHasVariables=o,a.arePatternsQuoted=l;const e=IP();a.QUAD_TERM_NAMES_INVERSE=Object.fromEntries(e.QUAD_TERM_NAMES.map((s,c)=>[s,c]));function u(s,c){if(s.length===1||c.every(p=>p!==void 0))return 0;const d=[];for(let p=0;p<e.QUAD_TERM_NAMES.length;p++)c[p]&&d.push(e.QUAD_TERM_NAMES[p]);return s.map((p,h)=>({score:n(p,d),index:h})).sort((p,h)=>h.score-p.score)[0].index}function n(s,c){return s.map((d,f)=>c.includes(d)?s.length-f:0).reduce((d,f)=>d+f,0)}function r(s,c){return s.map(d=>{const f=a.QUAD_TERM_NAMES_INVERSE[d];return c[f]})}function t(s,c){const d=s.map(f=>{if(f){if(f.termType==="Quad"&&o(f))return;const p=c.encodeOptional(f);return p===void 0?"none":p}return f});if(!d.includes("none"))return d}function i(s,c,d,f,p){let h=!1;return[[s||void 0,c||void 0,d||void 0,f||void 0].map(v=>{if(v){if(v.termType==="Variable")return;if(v.termType==="Quad"){if(p)return v;h=!0;return}}return v}),h]}function o(s){for(const c of e.QUAD_TERM_NAMES){const d=s[c];if(d.termType==="Variable"||d.termType==="Quad"&&o(d))return!0}return!1}function l(s){return s.map(c=>c?.termType==="Quad"&&o(c))}})(YC)),YC}var Mhe;function eH(){if(Mhe)return eR;Mhe=1,Object.defineProperty(eR,"__esModule",{value:!0}),eR.RdfStoreIndexNestedMap=void 0;const a=Yo();class e{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedMap=new Map}set(n,r){const t=this.nestedMap;let i=t.get(n[0]);i||(i=new Map,t.set(n[0],i));let o=i.get(n[1]);o||(o=new Map,i.set(n[1],o));let l=o.get(n[2]);l||(l=new Map,o.set(n[2],l));const s=l.has(n[3]);return s||l.set(n[3],r),!s}remove(n){const r=this.nestedMap,t=r.get(n[0]);if(!t)return!1;const i=t.get(n[1]);if(!i)return!1;const o=i.get(n[2]);if(!o)return!1;const l=o.delete(n[3]);return l&&o.size===0&&(i.delete(n[2]),i.size===0&&(t.delete(n[1]),t.size===0&&r.delete(n[0]))),l}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){const r=this.nestedMap.get(n[0]);if(!r)return;const t=r.get(n[1]);if(!t)return;const i=t.get(n[2]);if(i)return i.get(n[3])}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!r)return;const[t,i,o,l]=r,[s,c,d,f]=n;let p,h,g,v,m,T,w;const E=this.nestedMap,S=t!==void 0?E.has(t)?[t]:[]:E.keys();for(const N of S){m=E.get(N),p=s||this.dictionary.decode(N);const j=i!==void 0?m.has(i)?[i]:[]:m.keys();for(const q of j){T=m.get(q),h=c||this.dictionary.decode(q);const O=o!==void 0?T.has(o)?[o]:[]:T.keys();for(const I of O){w=T.get(I),g=d||this.dictionary.decode(I);const A=l!==void 0?w.has(l)?[l]:[]:w.keys();for(const P of A)v=f||this.dictionary.decode(P),yield[p,h,g,v]}}}}*findEncoded(n,r){const[t,i,o,l]=n;let s,c,d;const f=this.nestedMap,p=t!==void 0?f.has(t)?[t]:[]:f.keys();for(const h of p){s=f.get(h);const g=i!==void 0?s.has(i)?[i]:[]:s.keys();for(const v of g){c=s.get(v);const m=o!==void 0?c.has(o)?[o]:[]:c.keys();for(const T of m){d=c.get(T);const w=l!==void 0?d.has(l)?[l]:[]:d.keys();for(const E of w)yield[h,v,T,E]}}}}count(n){let r=0;const t=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!t)return 0;const i=t[0],o=t[1],l=t[2],s=t[3];let c,d,f;const p=this.nestedMap,h=i!==void 0?p.has(i)?[i]:[]:p.keys();for(const g of h){c=p.get(g);const v=o!==void 0?c.has(o)?[o]:[]:c.keys();for(const m of v){d=c.get(m);const T=l!==void 0?d.has(l)?[l]:[]:d.keys();for(const w of T)f=d.get(w),s!==void 0?f.has(s)&&r++:r+=f.size}}return r}}return eR.RdfStoreIndexNestedMap=e,eR}var Che;function rwe(){if(Che)return Zx;Che=1,Object.defineProperty(Zx,"__esModule",{value:!0}),Zx.TermDictionaryQuotedIndexed=void 0;const a=Wo(),e=eH(),u=Yo();class n{constructor(t,i=new a.DataFactory){this.quotedTriplesDictionary=[],this.features={quotedTriples:!0},this.plainTermDictionary=t;const o={indexCombinations:[],indexConstructor:void 0,dictionary:this,dataFactory:i};this.quotedTriplesReverseDictionaries=[new e.RdfStoreIndexNestedMap(o),new e.RdfStoreIndexNestedMap(o),new e.RdfStoreIndexNestedMap(o)],this.dataFactory=i}encode(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!1):this.plainTermDictionary.encode(t)}encodeQuotedTriple(t,i){if(t.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const o=(0,u.encodeOptionalTerms)([t.subject,t.predicate,t.object,t.graph],this),l=o&&o.every(f=>f!==void 0)?this.quotedTriplesReverseDictionaries[0].getEncoded(o):void 0;if(l!==void 0||i)return l===void 0?void 0:n.BITMASK|l;const s=[this.encode(t.subject),this.encode(t.predicate),this.encode(t.object)],c=this.quotedTriplesDictionary.length+1;this.quotedTriplesDictionary.push(s);const d=this.encode(this.dataFactory.defaultGraph());return this.quotedTriplesReverseDictionaries[0].set([s[0],s[1],s[2],d],c),this.quotedTriplesReverseDictionaries[1].set([s[1],s[2],s[0],d],c),this.quotedTriplesReverseDictionaries[2].set([s[2],s[0],s[1],d],c),n.BITMASK|c}encodeOptional(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!0):this.plainTermDictionary.encodeOptional(t)}decode(t){if(n.BITMASK&t){const i=(~n.BITMASK&t)-1;if(i>=this.quotedTriplesDictionary.length)throw new Error(`The value ${t} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[i];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(t)}*encodings(){for(const t of this.plainTermDictionary.encodings())yield t;for(const t of this.quotedTriplesDictionary.keys())yield n.BITMASK|1+t}*findQuotedTriples(t){for(const i of this.findQuotedTriplesEncoded(t))yield this.decode(i)}*findQuotedTriplesEncoded(t){const[i,o]=(0,u.quadToPattern)(t.subject,t.predicate,t.object,t.graph,!0);for(const l of this.patternToIterable(i[0]))for(const s of this.patternToIterable(i[1]))for(const c of this.patternToIterable(i[2]))for(const d of this.patternToIterable(i[3]))if(l&&s||!s&&!c){const f=[l,s,c,d];for(const p of this.quotedTriplesReverseDictionaries[0].findEncoded(f,i))yield n.BITMASK|this.quotedTriplesReverseDictionaries[0].getEncoded(p)}else if(!l&&s){const f=[s,c,l,d];for(const p of this.quotedTriplesReverseDictionaries[1].findEncoded(f,i))yield n.BITMASK|this.quotedTriplesReverseDictionaries[1].getEncoded(p)}else{const f=[c,l,s,d];for(const p of this.quotedTriplesReverseDictionaries[2].findEncoded(f,i))yield n.BITMASK|this.quotedTriplesReverseDictionaries[2].getEncoded(p)}}*patternToIterable(t){if(t?.termType==="Quad"){yield*this.findQuotedTriplesEncoded(t);return}if(t===void 0){yield void 0;return}const i=this.encodeOptional(t);i!==void 0&&(yield i)}}return Zx.TermDictionaryQuotedIndexed=n,n.BITMASK=1<<31,Zx}var tR={},Lhe;function nwe(){if(Lhe)return tR;Lhe=1,Object.defineProperty(tR,"__esModule",{value:!0}),tR.RdfStoreIndexNestedMapQuoted=void 0;const a=Yo(),e=eH();class u extends e.RdfStoreIndexNestedMap{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(r,t){for(const i of this.dictionary.findQuotedTriplesEncoded(t))r.has(i)&&(yield i)}*find(r){const t=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!t)return;const[i,o,l,s]=t,[c,d,f,p]=r,[h,g,v,m]=(0,a.arePatternsQuoted)(r);let T,w,E,S,N,j,q;const O=this.nestedMap,I=c!==void 0?h?this.getQuotedPatternKeys(O,c):O.has(i)?[i]:[]:O.keys();for(const A of I){N=O.get(A),T=!h&&c?c:this.dictionary.decode(A);const P=d!==void 0?g?this.getQuotedPatternKeys(N,d):N.has(o)?[o]:[]:N.keys();for(const C of P){j=N.get(C),w=!g&&d?d:this.dictionary.decode(C);const B=f!==void 0?v?this.getQuotedPatternKeys(j,f):j.has(l)?[l]:[]:j.keys();for(const H of B){q=j.get(H),E=!v&&f?f:this.dictionary.decode(H);const V=p!==void 0?m?this.getQuotedPatternKeys(q,p):q.has(s)?[s]:[]:q.keys();for(const G of V)S=!m&&p?p:this.dictionary.decode(G),yield[T,w,E,S]}}}}*findEncoded(r,t){const[i,o,l,s]=r,[c,d,f,p]=t,[h,g,v,m]=(0,a.arePatternsQuoted)(t);let T,w,E;const S=this.nestedMap,N=c!==void 0?h?this.getQuotedPatternKeys(S,c):S.has(i)?[i]:[]:S.keys();for(const j of N){T=S.get(j);const q=d!==void 0?g?this.getQuotedPatternKeys(T,d):T.has(o)?[o]:[]:T.keys();for(const O of q){w=T.get(O);const I=f!==void 0?v?this.getQuotedPatternKeys(w,f):w.has(l)?[l]:[]:w.keys();for(const A of I){E=w.get(A);const P=p!==void 0?m?this.getQuotedPatternKeys(E,p):E.has(s)?[s]:[]:E.keys();for(const C of P)yield[Number.parseInt(j,10),Number.parseInt(O,10),Number.parseInt(A,10),Number.parseInt(C,10)]}}}}count(r){let t=0;const i=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!i)return 0;const[o,l,s,c]=i,[d,f,p,h]=r,[g,v,m,T]=(0,a.arePatternsQuoted)(r);let w,E,S;const N=this.nestedMap,j=d!==void 0?g?this.getQuotedPatternKeys(N,d):N.has(o)?[o]:[]:N.keys();for(const q of j){w=N.get(q);const O=f!==void 0?v?this.getQuotedPatternKeys(w,f):w.has(l)?[l]:[]:w.keys();for(const I of O){E=w.get(I);const A=p!==void 0?m?this.getQuotedPatternKeys(E,p):E.has(s)?[s]:[]:E.keys();for(const P of A)S=E.get(P),h!==void 0?T?t+=[...this.getQuotedPatternKeys(S,h)].length:S.has(c)&&t++:t+=S.size}}return t}}return tR.RdfStoreIndexNestedMapQuoted=u,tR}var qhe;function awe(){if(qhe)return kx;qhe=1,Object.defineProperty(kx,"__esModule",{value:!0}),kx.RdfStore=void 0;const a=zt(),e=Wo(),u=IP(),n=iwe(),r=twe(),t=rwe(),i=nwe(),o=Yo();class l{constructor(c){this.features={quotedTripleFiltering:!0},this._size=0,this.options=c,this.dataFactory=c.dataFactory,this.dictionary=c.dictionary,this.indexesWrapped=l.constructIndexesWrapped(c),this.indexesWrappedComponentOrders=this.indexesWrapped.map(d=>d.componentOrder)}static createDefault(){return new l({indexCombinations:l.DEFAULT_INDEX_COMBINATIONS,indexConstructor:c=>new i.RdfStoreIndexNestedMapQuoted(c),dictionary:new t.TermDictionaryQuotedIndexed(new r.TermDictionaryNumberRecordFullTerms),dataFactory:new e.DataFactory})}static constructIndexesWrapped(c){const d=[];if(c.indexCombinations.length===0)throw new Error("At least one index combination is required");for(const f of c.indexCombinations){if(!l.isCombinationValid(f))throw new Error(`Invalid index combination: ${f}`);d.push({index:c.indexConstructor(c),componentOrder:f,componentOrderInverse:Object.fromEntries(f.map((p,h)=>[p,h]))})}return d}static isCombinationValid(c){for(const d of u.QUAD_TERM_NAMES)if(!c.includes(d))return!1;return c.length===4}get size(){return this._size}addQuad(c){const d=[this.dictionary.encode(c.subject),this.dictionary.encode(c.predicate),this.dictionary.encode(c.object),this.dictionary.encode(c.graph)];let f=!1;for(const p of this.indexesWrapped)f=p.index.set((0,o.orderQuadComponents)(p.componentOrder,d),!0);return f?(this._size++,!0):!1}removeQuad(c){const d=[this.dictionary.encodeOptional(c.subject),this.dictionary.encodeOptional(c.predicate),this.dictionary.encodeOptional(c.object),this.dictionary.encodeOptional(c.graph)];if(d.includes(void 0))return!1;let f=!1;for(const p of this.indexesWrapped)if(f=p.index.remove((0,o.orderQuadComponents)(p.componentOrder,d)),!f)break;return f?(this._size--,!0):!1}remove(c){return c.on("data",d=>this.removeQuad(d)),c}removeMatches(c,d,f,p){return this.remove(this.match(c,d,f,p))}deleteGraph(c){return typeof c=="string"&&(c=this.dataFactory.namedNode(c)),this.removeMatches(void 0,void 0,void 0,c)}import(c){return c.on("data",d=>this.addQuad(d)),c}*readQuads(c,d,f,p){const h=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(w=>w.index.features.quotedTripleFiltering),[g,v]=(0,o.quadToPattern)(c,d,f,p,h),m=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,g)],T=(0,o.orderQuadComponents)(m.componentOrder,g);for(const w of m.index.find(T)){const E=this.dataFactory.quad(w[m.componentOrderInverse.subject],w[m.componentOrderInverse.predicate],w[m.componentOrderInverse.object],w[m.componentOrderInverse.graph]);v?(0,u.matchPattern)(E,c,d,f,p)&&(yield E):yield E}}getQuads(c,d,f,p){return[...this.readQuads(c,d,f,p)]}match(c,d,f,p){return(0,a.wrap)(this.readQuads(c,d,f,p))}*readBindings(c,d,f,p,h){const g=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(O=>O.index.features.quotedTripleFiltering),[v,m]=(0,o.quadToPattern)(d,f,p,h,g),T=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,v)],w=(0,o.orderQuadComponents)(T.componentOrder,v),E=(0,o.encodeOptionalTerms)(w,this.dictionary);if(!E)return;const S=(0,o.orderQuadComponents)(T.componentOrder,[d,f,p,h]),N=[];for(let O=0;O<S.length;O++)(S[O].termType==="Variable"||S[O].termType==="Quad")&&N.push(O);let j=!1;const q=S.map((O,I)=>{const A=[];for(let P=I+1;P<S.length;P++)O.equals(S[P])&&(A.push(P),j=!0);return A});for(const O of T.index.findEncoded(E,w)){let I=!1,A=!1;const P=[];for(const C of N){if(j){const H=q[C];if(H){for(const V of H)if(O[C]!==O[V]){I=!0;break}}if(I)break}const B=this.dictionary.decode(O[C]);if(S[C].termType==="Quad"){if(B.termType==="Quad"){const H=(0,u.matchPatternMappings)(B,S[C],{returnMappings:!0});if(H){A=!0;for(const[V,G]of Object.entries(H)){const Z=this.dataFactory.variable(V);if(P.some(ae=>ae[0].equals(Z)&&!ae[1].equals(G))){I=!0;break}P.push([Z,G])}continue}}I=!0;break}if(A&&P.some(H=>H[0].equals(S[C])&&!H[1].equals(B))){I=!0;break}P.push([S[C],B])}I||(yield c.bindings(P))}}getBindings(c,d,f,p,h){return[...this.readBindings(c,d,f,p,h)]}matchBindings(c,d,f,p,h){return(0,a.wrap)(this.readBindings(c,d,f,p,h))}countQuads(c,d,f,p){const h=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(T=>T.index.features.quotedTripleFiltering),[g]=(0,o.quadToPattern)(c,d,f,p,h);if(g.every(T=>T===void 0))return this.size;const v=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,g)],m=(0,o.orderQuadComponents)(v.componentOrder,g);return v.index.count(m)}asDataset(){return new n.DatasetCoreWrapper(this)}}return kx.RdfStore=l,l.DEFAULT_INDEX_COMBINATIONS=[["graph","subject","predicate","object"],["graph","predicate","object","subject"],["graph","object","subject","predicate"]],kx}var Bhe;function iwe(){if(Bhe)return Hx;Bhe=1,Object.defineProperty(Hx,"__esModule",{value:!0}),Hx.DatasetCoreWrapper=void 0;const a=awe();class e{constructor(n){this.store=n}get size(){return this.store.size}add(n){return this.store.addQuad(n),this}delete(n){return this.store.removeQuad(n),this}has(n){for(const r of this.store.readQuads(n.subject,n.predicate,n.object,n.graph))return!0;return!1}match(n,r,t,i){const o=new a.RdfStore(this.store.options);for(const l of this.store.readQuads(n,r,t,i))o.addQuad(l);return new e(o)}[Symbol.iterator](){return this.store.readQuads()}}return Hx.DatasetCoreWrapper=e,Hx}var ZC={},Uhe;function Q9e(){return Uhe||(Uhe=1,Object.defineProperty(ZC,"__esModule",{value:!0})),ZC}var rR={},Qhe;function V9e(){if(Qhe)return rR;Qhe=1,Object.defineProperty(rR,"__esModule",{value:!0}),rR.TermDictionaryNumberMap=void 0;const a=Wo(),e=aN();class u{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary=new Map,this.reverseDictionary=new Map,this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const t=(0,e.termToString)(r);let i=this.dictionary.get(t);return i===void 0&&(i=this.lastId++,this.dictionary.set(t,i),this.reverseDictionary.set(i,t)),i}encodeOptional(r){const t=(0,e.termToString)(r);return this.dictionary.get(t)}decode(r){const t=this.reverseDictionary.get(r);if(t===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return(0,e.stringToTerm)(t,this.dataFactory)}encodings(){return this.reverseDictionary.keys()}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}}return rR.TermDictionaryNumberMap=u,rR}var nR={},Vhe;function H9e(){if(Vhe)return nR;Vhe=1,Object.defineProperty(nR,"__esModule",{value:!0}),nR.TermDictionaryNumberRecord=void 0;const a=Wo(),e=aN();class u{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const t=(0,e.termToString)(r);let i=this.dictionary[t];return i===void 0&&(i=this.lastId++,this.dictionary[t]=i,this.reverseDictionary[i]=t),i}encodeOptional(r){const t=(0,e.termToString)(r);return this.dictionary[t]}decode(r){const t=this.reverseDictionary[r];if(t===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return(0,e.stringToTerm)(t,this.dataFactory)}*encodings(){for(const r of Object.keys(this.reverseDictionary))yield Number.parseInt(r,10)}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}}return nR.TermDictionaryNumberRecord=u,nR}var aR={},Hhe;function k9e(){if(Hhe)return aR;Hhe=1,Object.defineProperty(aR,"__esModule",{value:!0}),aR.TermDictionaryQuoted=void 0;const a=Wo(),e=IP();class u{constructor(r,t,i=new a.DataFactory){this.features={quotedTriples:!0},this.plainTermDictionary=r,this.quotedTriplesDictionary=t,this.dataFactory=i}encode(r){return r.termType==="Quad"?u.BITMASK|1+this.quotedTriplesDictionary.encode(r):this.plainTermDictionary.encode(r)}encodeOptional(r){if(r.termType==="Quad"){const t=this.quotedTriplesDictionary.encodeOptional(r);return t===void 0?t:u.BITMASK|1+t}return this.plainTermDictionary.encodeOptional(r)}decode(r){if(u.BITMASK&r){const t=(~u.BITMASK&r)-1;return this.quotedTriplesDictionary.decode(t)}return this.plainTermDictionary.decode(r)}*encodings(){for(const r of this.plainTermDictionary.encodings())yield r;for(const r of this.quotedTriplesDictionary.encodings())yield u.BITMASK|1+r}*findQuotedTriples(r){for(const t of this.findQuotedTriplesEncoded(r))yield this.decode(t)}*findQuotedTriplesEncoded(r){for(let t of this.quotedTriplesDictionary.encodings()){t=u.BITMASK|1+t;const i=this.decode(t);(0,e.matchPattern)(i,r.subject,r.predicate,r.object,r.graph)&&(yield t)}}}return aR.TermDictionaryQuoted=u,u.BITMASK=1<<31,aR}var iR={},khe;function z9e(){if(khe)return iR;khe=1,Object.defineProperty(iR,"__esModule",{value:!0}),iR.TermDictionaryQuotedReferential=void 0;const a=Wo(),e=IP(),u=Yo();class n{constructor(t,i=new a.DataFactory){this.quotedTriplesDictionary=[],this.quotedTriplesReverseDictionary={},this.features={quotedTriples:!0},this.plainTermDictionary=t,this.dataFactory=i}encode(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!1):this.plainTermDictionary.encode(t)}encodeQuotedTriple(t,i){if(t.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const o=(0,u.encodeOptionalTerms)([t.subject,t.predicate,t.object,void 0],this)?.slice(0,3),l=o&&o.every(d=>d!==void 0)?this.quotedTriplesReverseDictionary[o.join(n.SEPARATOR)]:void 0;if(l!==void 0||i)return l===void 0?void 0:n.BITMASK|l;const s=[this.encode(t.subject),this.encode(t.predicate),this.encode(t.object)],c=this.quotedTriplesDictionary.length+1;return this.quotedTriplesDictionary.push(s),this.quotedTriplesReverseDictionary[s.join(n.SEPARATOR)]=c,n.BITMASK|c}encodeOptional(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!0):this.plainTermDictionary.encodeOptional(t)}decode(t){if(n.BITMASK&t){const i=(~n.BITMASK&t)-1;if(i>=this.quotedTriplesDictionary.length)throw new Error(`The value ${t} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[i];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(t)}*encodings(){for(const t of this.plainTermDictionary.encodings())yield t;for(const t of this.quotedTriplesDictionary.keys())yield n.BITMASK|1+t}*findQuotedTriples(t){for(const i of this.findQuotedTriplesEncoded(t))yield this.decode(i)}*findQuotedTriplesEncoded(t){for(let i of this.quotedTriplesDictionary.keys()){i=n.BITMASK|1+i;const o=this.decode(i);(0,e.matchPattern)(o,t.subject,t.predicate,t.object,t.graph)&&(yield i)}}}return iR.TermDictionaryQuotedReferential=n,n.BITMASK=1<<31,n.SEPARATOR="_",iR}var uR={},zhe;function G9e(){if(zhe)return uR;zhe=1,Object.defineProperty(uR,"__esModule",{value:!0}),uR.TermDictionarySymbol=void 0;const a=Wo(),e=aN();class u{constructor(r=new a.DataFactory){this.features={quotedTriples:!1},this.dataFactory=r}encode(r){return Symbol.for(`rdf::${(0,e.termToString)(r)}`)}encodeOptional(r){return this.encode(r)}decode(r){const t=Symbol.keyFor(r);if(t===void 0)throw new Error(`The value ${String(r)} is not present in this dictionary`);return(0,e.stringToTerm)(t.slice(5),this.dataFactory)}encodings(){throw new Error("encodings is not supported")}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}}return uR.TermDictionarySymbol=u,uR}var e9={},Ghe;function $9e(){return Ghe||(Ghe=1,Object.defineProperty(e9,"__esModule",{value:!0})),e9}var oR={},$he;function uwe(){if($he)return oR;$he=1,Object.defineProperty(oR,"__esModule",{value:!0}),oR.RdfStoreIndexNestedMapRecursive=void 0;const a=Yo();class e{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedMap=new Map}set(n,r){let t=this.nestedMap,i=!1;for(const[o,l]of n.entries()){const s=t;let c=s.get(l);c?o===n.length-1&&(i=!0):(c=o===n.length-1?r:new Map,s.set(l,c)),t=c}return!i}remove(n){const r=this.nestedMap,t=r.get(n[0]);if(!t)return!1;const i=t.get(n[1]);if(!i)return!1;const o=i.get(n[2]);if(!o)return!1;const l=o.delete(n[3]);return l&&o.size===0&&(i.delete(n[2]),i.size===0&&(t.delete(n[1]),t.size===0&&r.delete(n[0]))),l}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){const r=this.nestedMap.get(n[0]);if(!r)return;const t=r.get(n[1]);if(!t)return;const i=t.get(n[2]);if(i)return i.get(n[3])}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(r)for(const t of this.findEncoded(r,n))yield[r[0]!==void 0?n[0]:this.dictionary.decode(t[0]),r[1]!==void 0?n[1]:this.dictionary.decode(t[1]),r[2]!==void 0?n[2]:this.dictionary.decode(t[2]),r[3]!==void 0?n[3]:this.dictionary.decode(t[3])]}*findEncoded(n,r){return yield*this.findEncodedInner(0,n,r,this.nestedMap,[])}*findEncodedInner(n,r,t,i,o){if(n===r.length)yield[...o];else{const l=r[n];if(t[n]){const c=l;if(c!==void 0){const d=i.get(c);d&&(o[n]=l,yield*this.findEncodedInner(n+1,r,t,d,o))}}else for(const[c,d]of i.entries())o[n]=c,yield*this.findEncodedInner(n+1,r,t,d,o)}}count(n){return this.countInner(0,n,this.nestedMap)}countInner(n,r,t){const i=r[n];let o=0;if(i){const l=this.dictionary.encodeOptional(i);if(l!==void 0){if(n===r.length-1)return t.has(l)?1:0;const s=t.get(l);s&&(o+=this.countInner(n+1,r,s))}}else{if(n===r.length-1)return t.size;for(const l of t.values())o+=this.countInner(n+1,r,l)}return o}}return oR.RdfStoreIndexNestedMapRecursive=e,oR}var sR={},Xhe;function X9e(){if(Xhe)return sR;Xhe=1,Object.defineProperty(sR,"__esModule",{value:!0}),sR.RdfStoreIndexNestedMapRecursiveQuoted=void 0;const a=Yo(),e=uwe();class u extends e.RdfStoreIndexNestedMapRecursive{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*findEncoded(r,t){return yield*this.findEncodedInnerQuoted(0,r,t,(0,a.arePatternsQuoted)(t),this.nestedMap,[])}*findEncodedInnerQuoted(r,t,i,o,l,s){if(r===t.length)yield[...s];else{const c=t[r],d=i[r];if(d)if(o[r]){const f=this.dictionary.findQuotedTriplesEncoded(d);for(const p of f){const h=l.get(p);h&&(s[r]=p,yield*this.findEncodedInnerQuoted(r+1,t,i,o,h,s))}}else{const f=c;if(f!==void 0){const p=l.get(f);p&&(s[r]=c,yield*this.findEncodedInnerQuoted(r+1,t,i,o,p,s))}}else for(const[f,p]of l.entries())s[r]=f,yield*this.findEncodedInnerQuoted(r+1,t,i,o,p,s)}}countInner(r,t,i){const o=t[r];let l=0;if(o)if(o.termType==="Quad"&&(0,a.quadHasVariables)(o)){const s=this.dictionary.findQuotedTriplesEncoded(o);for(const c of s)if(r===t.length-1)i.has(c)&&l++;else{const d=i.get(c);d&&(l+=this.countInner(r+1,t,d))}}else{const s=this.dictionary.encodeOptional(o);if(s!==void 0){if(r===t.length-1)return i.has(s)?1:0;const c=i.get(s);c&&(l+=this.countInner(r+1,t,c))}}else{if(r===t.length-1)return i.size;for(const s of i.values())l+=this.countInner(r+1,t,s)}return l}}return sR.RdfStoreIndexNestedMapRecursiveQuoted=u,sR}var cR={},Khe;function owe(){if(Khe)return cR;Khe=1,Object.defineProperty(cR,"__esModule",{value:!0}),cR.RdfStoreIndexNestedRecord=void 0;const a=Yo();class e{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedRecords={}}set(n,r){const t=this.nestedRecords,i=t[n[0]]||(t[n[0]]={}),o=i[n[1]]||(i[n[1]]={}),l=o[n[2]]||(o[n[2]]={});return l[n[3]]?!1:(l[n[3]]=r,!0)}remove(n){const r=this.nestedRecords,t=r[n[0]];if(!t)return!1;const i=t[n[1]];if(!i)return!1;const o=i[n[2]];return!o||!o[n[3]]?!1:(delete o[n[3]],Object.keys(o).length===0&&(delete i[n[2]],Object.keys(i).length===0&&(delete t[n[1]],Object.keys(t).length===0&&delete r[n[0]])),!0)}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){return this.nestedRecords[n[0]]?.[n[1]]?.[n[2]]?.[n[3]]}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!r)return;const[t,i,o,l]=r,[s,c,d,f]=n;let p,h,g,v,m,T,w;const E=this.nestedRecords,S=t!==void 0?t in E?[t]:[]:Object.keys(E);for(const N of S){m=E[N],p=s||this.dictionary.decode(Number.parseInt(N,10));const j=i!==void 0?i in m?[i]:[]:Object.keys(m);for(const q of j){T=m[q],h=c||this.dictionary.decode(Number.parseInt(q,10));const O=o!==void 0?o in T?[o]:[]:Object.keys(T);for(const I of O){w=T[I],g=d||this.dictionary.decode(Number.parseInt(I,10));const A=l!==void 0?l in w?[l]:[]:Object.keys(w);for(const P of A)v=f||this.dictionary.decode(Number.parseInt(P,10)),yield[p,h,g,v]}}}}*findEncoded(n,r){const[t,i,o,l]=n;let s,c,d;const f=this.nestedRecords,p=t!==void 0?t in f?[t]:[]:Object.keys(f);for(const h of p){s=f[h];const g=i!==void 0?i in s?[i]:[]:Object.keys(s);for(const v of g){c=s[v];const m=o!==void 0?o in c?[o]:[]:Object.keys(c);for(const T of m){d=c[T];const w=l!==void 0?l in d?[l]:[]:Object.keys(d);for(const E of w)yield[Number.parseInt(h,10),Number.parseInt(v,10),Number.parseInt(T,10),Number.parseInt(E,10)]}}}}count(n){let r=0;const t=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!t)return 0;const i=t[0],o=t[1],l=t[2],s=t[3];let c,d,f;const p=this.nestedRecords,h=i!==void 0?i in p?[i]:[]:Object.keys(p);for(const g of h){c=p[g];const v=o!==void 0?o in c?[o]:[]:Object.keys(c);for(const m of v){d=c[m];const T=l!==void 0?l in d?[l]:[]:Object.keys(d);for(const w of T)f=d[w],s!==void 0?s in f&&r++:r+=Object.keys(f).length}}return r}}return cR.RdfStoreIndexNestedRecord=e,cR}var lR={},Jhe;function K9e(){if(Jhe)return lR;Jhe=1,Object.defineProperty(lR,"__esModule",{value:!0}),lR.RdfStoreIndexNestedRecordQuoted=void 0;const a=Yo(),e=owe();class u extends e.RdfStoreIndexNestedRecord{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(r,t){for(const i of this.dictionary.findQuotedTriplesEncoded(t))i in r&&(yield i)}*find(r){const t=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!t)return;const[i,o,l,s]=t,[c,d,f,p]=r,[h,g,v,m]=(0,a.arePatternsQuoted)(r);let T,w,E,S,N,j,q;const O=this.nestedRecords,I=c!==void 0?h?this.getQuotedPatternKeys(O,c):i in O?[i]:[]:Object.keys(O);for(const A of I){N=O[A],T=!h&&c?c:this.dictionary.decode(Number.parseInt(A,10));const P=d!==void 0?g?this.getQuotedPatternKeys(N,d):o in N?[o]:[]:Object.keys(N);for(const C of P){j=N[C],w=!g&&d?d:this.dictionary.decode(Number.parseInt(C,10));const B=f!==void 0?v?this.getQuotedPatternKeys(j,f):l in j?[l]:[]:Object.keys(j);for(const H of B){q=j[H],E=!v&&f?f:this.dictionary.decode(Number.parseInt(H,10));const V=p!==void 0?m?this.getQuotedPatternKeys(q,p):s in q?[s]:[]:Object.keys(q);for(const G of V)S=!m&&p?p:this.dictionary.decode(Number.parseInt(G,10)),yield[T,w,E,S]}}}}*findEncoded(r,t){const[i,o,l,s]=r,[c,d,f,p]=t,[h,g,v,m]=(0,a.arePatternsQuoted)(t);let T,w,E;const S=this.nestedRecords,N=c!==void 0?h?this.getQuotedPatternKeys(S,c):i in S?[i]:[]:Object.keys(S);for(const j of N){T=S[j];const q=d!==void 0?g?this.getQuotedPatternKeys(T,d):o in T?[o]:[]:Object.keys(T);for(const O of q){w=T[O];const I=f!==void 0?v?this.getQuotedPatternKeys(w,f):l in w?[l]:[]:Object.keys(w);for(const A of I){E=w[A];const P=p!==void 0?m?this.getQuotedPatternKeys(E,p):s in E?[s]:[]:Object.keys(E);for(const C of P)yield[Number.parseInt(j,10),Number.parseInt(O,10),Number.parseInt(A,10),Number.parseInt(C,10)]}}}}count(r){let t=0;const i=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!i)return 0;const[o,l,s,c]=i,[d,f,p,h]=r,[g,v,m,T]=(0,a.arePatternsQuoted)(r);let w,E,S;const N=this.nestedRecords,j=d!==void 0?g?this.getQuotedPatternKeys(N,d):o in N?[o]:[]:Object.keys(N);for(const q of j){w=N[q];const O=f!==void 0?v?this.getQuotedPatternKeys(w,f):l in w?[l]:[]:Object.keys(w);for(const I of O){E=w[I];const A=p!==void 0?m?this.getQuotedPatternKeys(E,p):s in E?[s]:[]:Object.keys(E);for(const P of A)S=E[P],h!==void 0?T?t+=[...this.getQuotedPatternKeys(S,h)].length:c in S&&t++:t+=Object.keys(S).length}}return t}}return lR.RdfStoreIndexNestedRecordQuoted=u,lR}var t9={},Whe;function J9e(){return Whe||(Whe=1,Object.defineProperty(t9,"__esModule",{value:!0})),t9}var r9={},Yhe;function W9e(){return Yhe||(Yhe=1,Object.defineProperty(r9,"__esModule",{value:!0})),r9}var Zhe;function Y9e(){return Zhe||(Zhe=1,(function(a){var e=Ky&&Ky.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Ky&&Ky.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(iwe(),a),u(Q9e(),a),u(V9e(),a),u(H9e(),a),u(twe(),a),u(k9e(),a),u(rwe(),a),u(z9e(),a),u(G9e(),a),u($9e(),a),u(eH(),a),u(nwe(),a),u(uwe(),a),u(X9e(),a),u(owe(),a),u(K9e(),a),u(J9e(),a),u(Yo(),a),u(W9e(),a),u(awe(),a)})(Ky)),Ky}var eye;function Z9e(){if(eye)return ID;eye=1,Object.defineProperty(ID,"__esModule",{value:!0}),ID.storeStream=e;const a=Y9e();function e(u){const n=a.RdfStore.createDefault();return new Promise((r,t)=>n.import(u).on("error",t).once("end",()=>r(n)))}return ID}var tye;function eLe(){if(tye)return Ux;tye=1,Object.defineProperty(Ux,"__esModule",{value:!0}),Ux.ActorQuerySourceIdentifyHypermediaNone=void 0;const a=nN(),e=JV(),u=lt(),n=De(),r=pn(),t=Z9e();let i=class extends e.ActorQuerySourceIdentifyHypermedia{constructor(l){super(l,"file")}async testMetadata(l){return(0,n.passTest)({filterFactor:0})}async run(l){this.logInfo(l.context,`Identified as file source: ${l.url}`);const s=l.context.getSafe(u.KeysInitQuery.dataFactory),c=new a.QuerySourceRdfJs(await(0,t.storeStream)(l.quads),s,await r.BindingsFactory.create(this.mediatorMergeBindingsContext,l.context,s));return c.toString=()=>`QuerySourceRdfJs(${l.url})`,c.referenceValue=l.url,{source:c}}};return Ux.ActorQuerySourceIdentifyHypermediaNone=i,Ux}var rye;function tH(){return rye||(rye=1,(function(a){var e=$y&&$y.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=$y&&$y.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(eLe(),a)})($y)),$y}var Yy={},dR={},Zy={},fR={},nye;function tLe(){if(nye)return fR;nye=1,Object.defineProperty(fR,"__esModule",{value:!0}),fR.ActorExpressionEvaluatorFactory=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n),this.mediatorQueryOperation=n.mediatorQueryOperation,this.mediatorFunctionFactory=n.mediatorFunctionFactory,this.mediatorMergeBindingsContext=n.mediatorMergeBindingsContext}};return fR.ActorExpressionEvaluatorFactory=e,fR}var aye;function rLe(){return aye||(aye=1,(function(a){var e=Zy&&Zy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Zy&&Zy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(tLe(),a)})(Zy)),Zy}var pR={},iye;function swe(){if(iye)return pR;iye=1,Object.defineProperty(pR,"__esModule",{value:!0}),pR.AlgebraTransformer=void 0;const a=lt(),e=$e(),u=Ut();let n=class iF extends e.TermTransformer{constructor(t,i){super(t.getSafe(a.KeysExpressionEvaluator.superTypeProvider)),this.context=t,this.mediatorFunctionFactory=i}async transformAlgebra(t){const i=u.Algebra.expressionTypes;switch(t.expressionType){case i.TERM:return this.transformTerm(t);case i.OPERATOR:return await this.transformOperator(t);case i.NAMED:return await this.transformNamed(t);case i.EXISTENCE:return iF.transformExistence(t);case i.AGGREGATE:return iF.transformAggregate(t);case i.WILDCARD:return iF.transformWildcard(t)}}static transformWildcard(t){return new e.NamedNode(t.wildcard.value)}async getOperator(t,i){const o=await this.mediatorFunctionFactory.mediate({functionName:t,arguments:i.args,context:this.context}),l=await Promise.all(i.args.map(s=>this.transformAlgebra(s)));if(!o.checkArity(l))throw new e.InvalidArity(l,t);return new e.Operator(t,l,o.apply)}async transformOperator(t){return this.getOperator(t.operator.toLowerCase(),t)}async transformNamed(t){return this.getOperator(t.name.value,t)}static transformAggregate(t){const i=t.aggregator;return new e.Aggregate(i,t)}static transformExistence(t){return new e.Existence(t)}};return pR.AlgebraTransformer=n,pR}var hR={},yR={},uye;function cwe(){if(uye)return yR;uye=1,Object.defineProperty(yR,"__esModule",{value:!0}),yR.InternalEvaluator=void 0;const a=lt(),e=ac(),u=$e(),n=Zt(),r=Ut(),t=swe();let i=class{constructor(l,s,c,d){this.context=l,this.mediatorQueryOperation=c,this.bindingsFactory=d,this.subEvaluators={[e.ExpressionType.Term]:(f,p)=>this.term(f),[e.ExpressionType.Variable]:(f,p)=>this.variable(f,p),[e.ExpressionType.Operator]:(f,p)=>this.evalFunction(f,p),[e.ExpressionType.Existence]:(f,p)=>this.evalExistence(f,p),[e.ExpressionType.Aggregate]:(f,p)=>this.evalAggregate()},this.transformer=new t.AlgebraTransformer(l,s)}async evaluatorExpressionEvaluation(l,s){return this.subEvaluators[l.expressionType].bind(this)(l,s)}term(l){return l}variable(l,s){const c=s.get(u.expressionToVar(this.context.getSafe(a.KeysInitQuery.dataFactory),l));if(!c)throw new u.UnboundVariableError(l.name,s);return this.transformer.transformRDFTermUnsafe(c)}async evalFunction(l,s){return l.apply({args:l.args,mapping:s,exprEval:this})}async evalExistence(l,s){const c=this.context.getSafe(a.KeysInitQuery.dataFactory),d=new r.Factory(c),f=(0,n.materializeOperation)(l.expression.input,s,d,this.bindingsFactory),p=await this.mediatorQueryOperation.mediate({operation:f,context:this.context}),h=(0,n.getSafeBindings)(p);return await new Promise((g,v)=>{h.bindingsStream.on("end",()=>{g(!1)}),h.bindingsStream.on("error",v),h.bindingsStream.on("data",()=>{h.bindingsStream.close(),g(!0)})}).then(g=>l.expression.not?!g:g).then(g=>new u.BooleanLiteral(g))}evalAggregate(){throw new u.NoAggregator}};return yR.InternalEvaluator=i,yR}var oye;function nLe(){if(oye)return hR;oye=1,Object.defineProperty(hR,"__esModule",{value:!0}),hR.ExpressionEvaluator=void 0;const a=lt(),e=cwe();let u=class{constructor(r,t,i,o,l){this.context=r,this.expr=t,this.mediatorFunctionFactory=i,this.mediatorQueryOperation=o,this.bindingsFactory=l,this.internalEvaluator=new e.InternalEvaluator(r,i,o,l)}async evaluate(r){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,r)).toRDF(this.context.getSafe(a.KeysInitQuery.dataFactory))}async evaluateAsEBV(r){return(await this.internalEvaluator.evaluatorExpressionEvaluation(this.expr,r)).coerceEBV()}evaluateAsEvaluatorExpression(r){return this.evaluatorExpressionEvaluation(this.expr,r)}evaluatorExpressionEvaluation(r,t){return this.internalEvaluator.evaluatorExpressionEvaluation(r,t)}};return hR.ExpressionEvaluator=u,hR}var sye;function aLe(){if(sye)return dR;sye=1,Object.defineProperty(dR,"__esModule",{value:!0}),dR.ActorExpressionEvaluatorFactoryDefault=void 0;const a=rLe(),e=lt(),u=De(),n=pn(),r=$e(),t=swe(),i=nLe();let o=class extends a.ActorExpressionEvaluatorFactory{constructor(s){super(s)}async test(s){return(0,u.passTestVoid)()}async run(s){const c=(0,r.prepareEvaluatorActionContext)(s.context);return new i.ExpressionEvaluator(c,await new t.AlgebraTransformer(c,this.mediatorFunctionFactory).transformAlgebra(s.algExpr),this.mediatorFunctionFactory,this.mediatorQueryOperation,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,s.context.getSafe(e.KeysInitQuery.dataFactory)))}};return dR.ActorExpressionEvaluatorFactoryDefault=o,dR}var cye;function rH(){return cye||(cye=1,(function(a){var e=Yy&&Yy.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Yy&&Yy.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(aLe(),a)})(Yy)),Yy}var em={},mR={},bR={},lye;function iLe(){if(lye)return bR;lye=1,Object.defineProperty(bR,"__esModule",{value:!0}),bR.GroupsState=void 0;const a=lt(),e=pn();let u=class{constructor(r,t,i,o,l){this.pattern=r,this.mediatorBindingsAggregatorFactory=t,this.context=i,this.bindingsFactory=o,this.variables=l,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map(s=>s.value)),this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(r){const t=this.resultCheck();if(t)return t;this.waitCounter++;const i=r.filter((c,d)=>this.groupVariables.has(d.value)),o=this.hashBindings(i);let l=this.groupsInitializer.get(o),s;if(l){const c=l;s=(async()=>{const d=await c;await Promise.all(this.pattern.aggregates.map(async f=>{const p=f.variable.value;await d.aggregators[p].putBindings(r)}))})().then(async()=>{await this.subtractWaitCounterAndCollect()})}else l=(async()=>{const c={};await Promise.all(this.pattern.aggregates.map(async f=>{const p=f.variable.value;c[p]=await this.mediatorBindingsAggregatorFactory.mediate({expr:f,context:this.context}),await c[p].putBindings(r)}));const d={aggregators:c,bindings:i};return this.groups.set(o,d),await this.subtractWaitCounterAndCollect(),d})(),this.groupsInitializer.set(o,l),s=l;return s}async subtractWaitCounterAndCollect(){--this.waitCounter===0&&await this.handleResultCollection()}async handleResultCollection(){const r=this.context.getSafe(a.KeysInitQuery.dataFactory);let t=await Promise.all([...this.groups].map(async([i,o])=>{const{bindings:l,aggregators:s}=o;let c=l;for(const d in s){const f=await s[d].result();f&&(c=c.set(r.variable(d),f))}return c}));if(t.length===0&&this.groupVariables.size===0){const i=[];await Promise.all(this.pattern.aggregates.map(async o=>{const l=o.variable,c=await(await this.mediatorBindingsAggregatorFactory.mediate({expr:o,context:this.context})).result();c!==void 0&&i.push([l,c])})),t=[this.bindingsFactory.bindings(i)]}this.waitResolver(t)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}async collectResults(){const r=this.resultCheck();if(r)return r;this.resultHasBeenCalled=!0;const t=new Promise(i=>{this.waitResolver=i});return await this.subtractWaitCounterAndCollect(),t}hashBindings(r){return(0,e.bindingsToCompactString)(r,this.variables)}};return bR.GroupsState=u,bR}var dye;function uLe(){if(dye)return mR;dye=1,Object.defineProperty(mR,"__esModule",{value:!0}),mR.ActorQueryOperationGroup=void 0;const a=qr(),e=lt(),u=De(),n=pn(),r=Zt(),t=zt(),i=iLe();let o=class extends a.ActorQueryOperationTypedMediated{constructor(s){super(s,"group"),this.mediatorBindingsAggregatorFactory=s.mediatorBindingsAggregatorFactory}async testOperation(){return(0,u.passTestVoid)()}async runOperation(s,c){const d=c.getSafe(e.KeysInitQuery.dataFactory),f=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,c,d),{input:p,aggregates:h}=s,g=await this.mediatorQueryOperation.mediate({operation:p,context:c}),v=(0,r.getSafeBindings)(g),m=[...s.variables,...h.map(E=>E.variable)].map(E=>({variable:E,canBeUndef:!1})),T=(await v.metadata()).variables.map(E=>E.variable);return{type:"bindings",bindingsStream:new t.TransformIterator(()=>new Promise((E,S)=>{const N=new i.GroupsState(s,this.mediatorBindingsAggregatorFactory,c,f,T);v.bindingsStream.on("end",async()=>{try{const j=new t.ArrayIterator(await N.collectResults(),{autoStart:!1});E(j)}catch(j){S(j)}}),v.bindingsStream.on("error",S),v.bindingsStream.on("data",j=>{N.consumeBindings(j).catch(S)})}),{autoStart:!1}),metadata:async()=>({...await v.metadata(),variables:m})}}};return mR.ActorQueryOperationGroup=o,mR}var fye;function nH(){return fye||(fye=1,(function(a){var e=em&&em.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=em&&em.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(uLe(),a)})(em)),em}var tm={},gR={},pye;function oLe(){if(pye)return gR;pye=1,Object.defineProperty(gR,"__esModule",{value:!0}),gR.ActorQueryOperationNop=void 0;const a=qr(),e=lt(),u=De(),n=pn(),r=xa(),t=zt();let i=class extends a.ActorQueryOperationTypedMediated{constructor(l){super(l,"nop")}async testOperation(l,s){return(0,u.passTestVoid)()}async runOperation(l,s){const c=s.getSafe(e.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,c);return{bindingsStream:new t.SingletonIterator(d.bindings()),metadata:()=>Promise.resolve({state:new r.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}};return gR.ActorQueryOperationNop=i,gR}var hye;function aH(){return hye||(hye=1,(function(a){var e=tm&&tm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=tm&&tm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(oLe(),a)})(tm)),tm}var rm={},vR={},yye;function sLe(){if(yye)return vR;yye=1,Object.defineProperty(vR,"__esModule",{value:!0}),vR.ActorQueryOperationService=void 0;const a=qr(),e=lt(),u=De(),n=pn(),r=xa(),t=Zt(),i=zt(),o=wb();let l=class extends a.ActorQueryOperationTypedMediated{constructor(c){super(c,"service"),c.cacheSize&&c.httpInvalidator&&c.cacheSize>0&&(this.cache=new o.LRUCache({max:c.cacheSize}),c.httpInvalidator.addInvalidateListener(d=>this.handleHttpInvalidateEvent(d)))}async testOperation(c,d){return c.name.termType!=="NamedNode"?(0,u.failTest)(`${this.name} can only query services by IRI, while a ${c.name.termType} was given.`):(0,u.passTestVoid)()}async runOperation(c,d){let f=this.cache?.get(c.name.value);f||(f=(await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:c.name.value,type:this.forceSparqlEndpoint?"sparql":void 0},context:d})).querySource,this.cache?.set(c.name.value,f));let p;try{p=(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:(0,t.assignOperationSource)(c.input,f),context:d}))}catch(h){if(c.silent){const g=d.getSafe(e.KeysInitQuery.dataFactory),v=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,d,g);p={bindingsStream:new i.SingletonIterator(v.bindings()),type:"bindings",metadata:async()=>({state:new r.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})},this.logWarn(d,`An error occurred when executing a SERVICE clause: ${h.message}`)}else throw h}return p}handleHttpInvalidateEvent(c){c.url?this.cache?.delete(c.url):this.cache?.clear()}};return vR.ActorQueryOperationService=l,vR}var mye;function iH(){return mye||(mye=1,(function(a){var e=rm&&rm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=rm&&rm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(sLe(),a)})(rm)),rm}var nm={},_R={},bye;function cLe(){if(bye)return _R;bye=1,Object.defineProperty(_R,"__esModule",{value:!0}),_R.ActorQueryOperationValues=void 0;const a=qr(),e=lt(),u=De(),n=pn(),r=xa(),t=zt();let i=class extends a.ActorQueryOperationTyped{constructor(l){super(l,"values")}async testOperation(l,s){return(0,u.passTestVoid)()}async runOperation(l,s){const c=s.getSafe(e.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,c);return{type:"bindings",bindingsStream:new t.ArrayIterator(l.bindings.map(h=>d.bindings(Object.entries(h).map(([g,v])=>[c.variable(g.slice(1)),v])))),metadata:()=>Promise.resolve({state:new r.MetadataValidationState,cardinality:{type:"exact",value:l.bindings.length},variables:l.variables.map(h=>({variable:h,canBeUndef:l.bindings.some(g=>!(`?${h.value}`in g))}))})}}};return _R.ActorQueryOperationValues=i,_R}var gye;function uH(){return gye||(gye=1,(function(a){var e=nm&&nm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=nm&&nm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(cLe(),a)})(nm)),nm}var am={},TR={},vye;function lLe(){if(vye)return TR;vye=1,Object.defineProperty(TR,"__esModule",{value:!0}),TR.ActorQueryOperationPathOneOrMore=void 0;const a=El(),e=lt(),u=pn(),n=Zt(),r=zt(),t=Ut();let i=class extends a.ActorAbstractPath{constructor(l){super(l,t.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(l,s){const c=s.getSafe(e.KeysInitQuery.dataFactory),d=new t.Factory(c),f=await u.BindingsFactory.create(this.mediatorMergeBindingsContext,s,c),p=await this.isPathArbitraryLengthDistinct(d,s,l);if(p.operation)return p.operation;s=p.context;const h=l.predicate;if(l.subject.termType!=="Variable"&&l.object.termType==="Variable"){const T=l.object,w=await this.getObjectsPredicateStarEval(l.subject,h.path,T,l.graph,s,!1,d,f),E=(l.graph.termType==="Variable"?[T,l.graph]:[T]).map(S=>({variable:S,canBeUndef:!1}));return{type:"bindings",bindingsStream:w.bindingsStream,metadata:async()=>({...await w.metadata(),variables:E})}}if(l.subject.termType==="Variable"&&l.object.termType==="Variable"){const T=d.createDistinct(d.createPath(l.subject,l.predicate.path,l.object,l.graph)),w=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:T})),E=l.subject,S=l.object,N={},j=new r.MultiTransformIterator(w.bindingsStream,{multiTransform:O=>{const I=O.get(E),A=O.get(S),P=l.graph.termType==="Variable"?O.get(l.graph):l.graph;return new r.TransformIterator(async()=>{const C=new r.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(E,S,I,A,h.path,P,s,N,{},C,{count:0},d,f),C.map(B=>(l.graph.termType==="Variable"&&(B=B.set(l.graph,P)),B))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),q=(l.graph.termType==="Variable"?[E,S,l.graph]:[E,S]).map(O=>({variable:O,canBeUndef:!1}));return{type:"bindings",bindingsStream:j,metadata:async()=>({...await w.metadata(),variables:q})}}if(l.subject.termType==="Variable"&&l.object.termType!=="Variable")return this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(l.object,d.createOneOrMorePath(d.createInv(h.path)),l.subject,l.graph)});const g=this.generateVariable(c),v=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:s,operation:d.createPath(l.subject,h,g,l.graph)}));return{type:"bindings",bindingsStream:v.bindingsStream.map(T=>l.object.equals(T.get(g))?l.graph.termType==="Variable"?f.bindings([[l.graph,T.get(l.graph)]]):f.bindings():null),metadata:async()=>({...await v.metadata(),variables:(l.graph.termType==="Variable"?[l.graph]:[]).map(T=>({variable:T,canBeUndef:!1}))})}}};return TR.ActorQueryOperationPathOneOrMore=i,TR}var _ye;function oH(){return _ye||(_ye=1,(function(a){var e=am&&am.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=am&&am.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(lLe(),a)})(am)),am}var im={},wR={},Tye;function dLe(){if(Tye)return wR;Tye=1,Object.defineProperty(wR,"__esModule",{value:!0}),wR.ActorQueryOperationPathZeroOrMore=void 0;const a=El(),e=lt(),u=pn(),n=Zt(),r=zt(),t=$t(),i=Ut();let o=class extends a.ActorAbstractPath{constructor(s){super(s,i.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(s,c){const d=c.getSafe(e.KeysInitQuery.dataFactory),f=new i.Factory(d),p=await u.BindingsFactory.create(this.mediatorMergeBindingsContext,c,d),h=await this.isPathArbitraryLengthDistinct(f,c,s);if(h.operation)return h.operation;c=h.context;const g=s.predicate,v=this.getPathSources(g),m=s.subject.termType==="Variable",T=s.object.termType==="Variable";if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const q=this.generateVariable(d,s),O=this.assignPatternSources(f,f.createPattern(s.subject,q,s.object,s.graph),v),I=(0,n.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:c,operation:O})),A=s.subject,P=s.object,C=new Set,B={},H=new r.MultiTransformIterator(I.bindingsStream,{multiTransform:G=>{const Z=G.get(A),ae=G.get(P),W=s.graph.termType==="Variable"?G.get(s.graph):s.graph,te=(0,t.termToString)(Z)+(0,t.termToString)(W),se=(0,t.termToString)(ae)+(0,t.termToString)(W);return new r.TransformIterator(async()=>{if(C.has(te)&&C.has(se))return new r.EmptyIterator;const pe=new r.BufferedIterator,le={count:0};return C.has(te)||(C.add(te),await this.getSubjectAndObjectBindingsPredicateStar(A,P,Z,Z,g.path,W,c,B,{},pe,le,f,p)),C.has(se)||(C.add(se),await this.getSubjectAndObjectBindingsPredicateStar(A,P,ae,ae,g.path,W,c,B,{},pe,le,f,p)),pe.map(Ee=>(s.graph.termType==="Variable"&&(Ee=Ee.set(s.graph,W)),Ee))},{autoStart:!1,maxBufferSize:128})},autoStart:!1}),V=(s.graph.termType==="Variable"?[A,s.object,s.graph]:[A,s.object]).map(G=>({variable:G,canBeUndef:!1}));return{type:"bindings",bindingsStream:H,metadata:async()=>({...await I.metadata(),variables:V})}}if(!m&&!T){const q=this.generateVariable(d),O=await this.getObjectsPredicateStarEval(s.subject,g.path,q,s.graph,c,!0,f,p);return{type:"bindings",bindingsStream:O.bindingsStream.map(A=>s.object.equals(A.get(q))?s.graph.termType==="Variable"?p.bindings([[s.graph,A.get(s.graph)]]):p.bindings():null),metadata:async()=>({...await O.metadata(),variables:(s.graph.termType==="Variable"?[s.graph]:[]).map(A=>({variable:A,canBeUndef:!1}))})}}const w=m?s.object:s.subject,E=m?s.subject:s.object,S=m?f.createInv(g.path):g.path,N=await this.getObjectsPredicateStarEval(w,S,E,s.graph,c,!0,f,p),j=(s.graph.termType==="Variable"?[E,s.graph]:[E]).map(q=>({variable:q,canBeUndef:!1}));return{type:"bindings",bindingsStream:N.bindingsStream,metadata:async()=>({...await N.metadata(),variables:j})}}};return wR.ActorQueryOperationPathZeroOrMore=o,wR}var wye;function sH(){return wye||(wye=1,(function(a){var e=im&&im.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=im&&im.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(dLe(),a)})(im)),im}var um={},SR={},Sye;function fLe(){if(Sye)return SR;Sye=1,Object.defineProperty(SR,"__esModule",{value:!0}),SR.ActorQueryOperationPathZeroOrOne=void 0;const a=El(),e=lt(),u=pn(),n=xa(),r=Zt(),t=zt(),i=Ut();let o=class extends a.ActorAbstractPath{constructor(s){super(s,i.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(s,c){const d=c.getSafe(e.KeysInitQuery.dataFactory),f=new i.Factory(d),p=await u.BindingsFactory.create(this.mediatorMergeBindingsContext,c,d),h=s.predicate,g=this.getPathSources(h),v=[];if(s.subject.termType!=="Variable"&&s.object.termType!=="Variable"&&s.subject.equals(s.object))return{type:"bindings",bindingsStream:new t.SingletonIterator(p.bindings()),metadata:()=>Promise.resolve({state:new n.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]})};const m=await this.isPathArbitraryLengthDistinct(f,c,s);if(m.operation)return m.operation;c=m.context;const T=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:c,operation:f.createPath(s.subject,h.path,s.object,s.graph)}));let w;if(s.subject.termType==="Variable"&&s.object.termType==="Variable"){const S=this.generateVariable(d,s),N=(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({context:c,operation:f.createFilter(this.assignPatternSources(f,f.createPattern(s.subject,S,s.object,s.graph),g),f.createOperatorExpression("=",[f.createTermExpression(s.subject),f.createTermExpression(s.object)]))})).bindingsStream.map(j=>j.delete(S));w=new t.UnionIterator([N,T.bindingsStream],{autoStart:!1})}else s.subject.termType==="Variable"&&v.push(p.bindings([[s.subject,s.object]])),s.object.termType==="Variable"&&v.push(p.bindings([[s.object,s.subject]])),w=T.bindingsStream.prepend(v);return{type:"bindings",bindingsStream:w,metadata:async()=>{const S=await T.metadata();return{...S,cardinality:{...S.cardinality,value:S.cardinality.value+1}}}}}};return SR.ActorQueryOperationPathZeroOrOne=o,SR}var Eye;function cH(){return Eye||(Eye=1,(function(a){var e=um&&um.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=um&&um.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(fLe(),a)})(um)),um}var om={},ER={},Aye;function pLe(){if(Aye)return ER;Aye=1,Object.defineProperty(ER,"__esModule",{value:!0}),ER.ActorQueryOperationUpdateDeleteInsert=void 0;const a=xP(),e=qr(),u=lt(),n=pn(),r=Zt(),t=zt();let i=class extends e.ActorQueryOperationTypedMediated{constructor(l){super(l,"deleteinsert"),this.blankNodeCounter=0}async testOperation(l,s){return(0,r.testReadOnly)(s)}async runOperation(l,s){const c=s.getSafe(u.KeysInitQuery.dataFactory),d=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,c),f=l.where?(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:l.where,context:s})).bindingsStream:new t.ArrayIterator([d.bindings()],{autoStart:!1});let p,h;l.insert&&(p=new a.BindingsToQuadsIterator(c,l.insert.map(a.BindingsToQuadsIterator.localizeQuad.bind(null,c,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++),l.delete&&(h=new a.BindingsToQuadsIterator(c,l.delete.map(a.BindingsToQuadsIterator.localizeQuad.bind(null,c,this.blankNodeCounter)),f.clone()),this.blankNodeCounter++);const{execute:g}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:p,quadStreamDelete:h,context:s});return{type:"void",execute:g}}};return ER.ActorQueryOperationUpdateDeleteInsert=i,ER}var Oye;function lH(){return Oye||(Oye=1,(function(a){var e=om&&om.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=om&&om.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(pLe(),a)})(om)),om}var sm={},AR={},cm={},OR={},xye;function hLe(){if(xye)return OR;xye=1,Object.defineProperty(OR,"__esModule",{value:!0}),OR.ActorQueryProcess=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n)}};return OR.ActorQueryProcess=e,OR}var Rye;function DP(){return Rye||(Rye=1,(function(a){var e=cm&&cm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=cm&&cm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(hLe(),a)})(cm)),cm}var Nye;function yLe(){if(Nye)return AR;Nye=1,Object.defineProperty(AR,"__esModule",{value:!0}),AR.ActorQueryProcessSequential=void 0;const a=DP(),e=lt(),u=De(),n=pn(),r=Zt(),t=Ut();let i=class extends a.ActorQueryProcess{constructor(l){super(l)}async test(l){return l.context.get(e.KeysInitQuery.explain)??l.context.get(new u.ActionContextKey("explain"))?(0,u.failTest)(`${this.name} is not able to explain queries.`):(0,u.passTestVoid)()}async run(l){let{operation:s,context:c}=await this.parse(l.query,l.context);return{operation:s,context:c}=await this.optimize(s,c),{result:await this.evaluate(s,c)}}async parse(l,s){s=(await this.mediatorContextPreprocess.mediate({context:s,initialize:!0})).context;let c;if(typeof l=="string"){s=s.set(e.KeysInitQuery.queryString,l);const d=s.get(e.KeysInitQuery.baseIRI),f=s.get(e.KeysInitQuery.queryFormat),p=await this.mediatorQueryParse.mediate({context:s,query:l,queryFormat:f,baseIRI:d});c=p.operation,p.baseIRI&&(s=s.set(e.KeysInitQuery.baseIRI,p.baseIRI))}else c=l;if(s.has(e.KeysInitQuery.initialBindings)){const d=s.getSafe(e.KeysInitQuery.dataFactory),f=new t.Factory(d),p=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s,d);c=(0,r.materializeOperation)(c,s.get(e.KeysInitQuery.initialBindings),f,p,{strictTargetVariables:!0}),s=s.delete(e.KeysInitQuery.queryString)}return{operation:c,context:s}}async optimize(l,s){return s=s.set(e.KeysInitQuery.query,l),{operation:l,context:s}=await this.mediatorOptimizeQueryOperation.mediate({context:s,operation:l}),s=s.set(e.KeysInitQuery.query,l),{operation:l,context:s}}async evaluate(l,s){const c=await this.mediatorQueryOperation.mediate({context:s,operation:l});return c.context=s,c}};return AR.ActorQueryProcessSequential=i,AR}var Iye;function dH(){return Iye||(Iye=1,(function(a){var e=sm&&sm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=sm&&sm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(yLe(),a)})(sm)),sm}var lm={},xR={},RR={},NR={},IR={},Dye;function mLe(){if(Dye)return IR;Dye=1,Object.defineProperty(IR,"__esModule",{value:!0}),IR.LinkedRdfSourcesAsyncRdfIterator=void 0;const a=lt(),e=xa(),u=zt();let n=class extends u.BufferedIterator{constructor(t,i,o,l,s,c,d,f){if(super({autoStart:!1,...f}),this.started=!1,this.currentIterators=[],this.iteratorsPendingCreation=0,this.iteratorsPendingTermination=0,this.accumulatedMetadata=Promise.resolve(void 0),this._reading=!1,this.cacheSize=t,this.operation=i,this.queryBindingsOptions=o,this.context=l,this.firstUrl=s,this.maxIterators=c,this.sourceStateGetter=d,this.maxIterators<=0)throw new Error(`LinkedRdfSourcesAsyncRdfIterator.maxIterators must be larger than zero, but got ${this.maxIterators}`)}kickstart(){this.started||this._fillBufferAsync()}getProperty(t,i){return t==="metadata"&&!this.started&&(this.preflightMetadata||(this.preflightMetadata=new Promise((o,l)=>{this.sourceStateGetter({url:this.firstUrl},{}).then(s=>{const c=s.source.queryBindings(this.operation,this.context);c.getProperty("metadata",d=>{d.state=new e.MetadataValidationState,c.destroy(),this.accumulateMetadata(s.metadata,d).then(f=>{const p={...s.metadata,...d,...f};o(p)}).catch(()=>{o({...s.metadata,state:new e.MetadataValidationState})})})}).catch(l)})),this.preflightMetadata.then(o=>this.setProperty("metadata",o)).catch(o=>this.emit("error",o))),super.getProperty(t,i)}_end(t){for(const i of this.currentIterators)i.destroy();super._end(t)}_read(t,i){if(this.started){for(const o of this.currentIterators){for(;t>0;){const l=o.read();if(l===null)break;t--,this._push(l)}if(t<=0)break}t>=0&&this.canStartNewIterator()?this.sourceStateGetter({url:this.firstUrl},{}).then(o=>{this.startIteratorsForNextUrls(o.handledDatasets,!1),i()}):i()}else this.started=!0,this.sourceStateGetter({url:this.firstUrl},{}).then(o=>{this.startIterator(o),i()}).catch(o=>setTimeout(()=>this.destroy(o)))}canStartNewIterator(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination<this.maxIterators&&(!this.canStartNewIteratorConsiderReadable()||!this.readable)}canStartNewIteratorConsiderReadable(){return!0}areIteratorsRunning(){return this.currentIterators.length+this.iteratorsPendingCreation+this.iteratorsPendingTermination>0}startIterator(t){try{const i=t.source.queryBindings(this.operation,this.context,this.queryBindingsOptions);this.currentIterators.push(i);let o=!1,l=!1;i._destination=this,i.on("error",s=>this.destroy(s)),i.on("readable",()=>this._fillBuffer()),i.on("end",()=>{this.currentIterators.splice(this.currentIterators.indexOf(i),1),o=!0,l||this.iteratorsPendingTermination++,l&&this.startIteratorsForNextUrls(t.handledDatasets,!0)}),i.getProperty("metadata",s=>{this.accumulatedMetadata=this.accumulatedMetadata.then(c=>(async()=>(c||(c=t.metadata),this.accumulateMetadata(c,s)))().then(d=>{const f={...t.metadata,...s,...d};return f.state=new e.MetadataValidationState,this.updateMetadata(f),this.preflightMetadata&&this.preflightMetadata.then(p=>p.state.invalidate()).catch(()=>{}),this.getSourceLinks(f,t).then(p=>Promise.all(p)).then(async p=>{const h=await this.getLinkQueue();for(const g of p)h.push(g,t.link);l=!0,o&&this.iteratorsPendingTermination--,this.startIteratorsForNextUrls(t.handledDatasets,!0)}).catch(p=>this.destroy(p)),f})).catch(c=>(this.destroy(c),{}))})}catch(i){this.destroy(i)}}updateMetadata(t){const i=this.getProperty("metadata");this.setProperty("metadata",t),i?.state.invalidate()}isRunning(){return!this.done}startIteratorsForNextUrls(t,i){this.getLinkQueue().then(o=>{for(;this.canStartNewIterator()&&this.isRunning();){const l=o.pop();if(l)this.iteratorsPendingCreation++,this.sourceStateGetter(l,t).then(s=>{const c=this.context.get(a.KeysStatistics.dereferencedLinks);c&&c.updateStatistic({url:s.link.url,metadata:{...s.metadata,...s.link.metadata}},s.source),this.iteratorsPendingCreation--,this.startIterator(s)}).catch(s=>this.emit("error",s));else break}i&&this.isCloseable(o,!0)&&this.close()}).catch(o=>this.destroy(o))}isCloseable(t,i){return t.isEmpty()&&!this.areIteratorsRunning()}};return IR.LinkedRdfSourcesAsyncRdfIterator=n,IR}var Fye;function bLe(){if(Fye)return NR;Fye=1,Object.defineProperty(NR,"__esModule",{value:!0}),NR.MediatedLinkedRdfSourcesAsyncRdfIterator=void 0;const a=lt(),e=mLe();let u=class extends e.LinkedRdfSourcesAsyncRdfIterator{constructor(r,t,i,o,l,s,c,d,f,p,h,g,v,m){super(r,t,i,o,s,c,d,f?{maxBufferSize:Number.POSITIVE_INFINITY}:void 0),this.wasForcefullyClosed=!1,this.forceSourceType=l,this.mediatorMetadataAccumulate=p,this.mediatorRdfResolveHypermediaLinks=h,this.mediatorRdfResolveHypermediaLinksQueue=g,this.handledUrls={[s]:!0},this.aggregatedStore=f,this.dataFactory=v,this.algebraFactory=m}close(){if(!this.aggregatedStore){super.close();return}this.getLinkQueue().then(r=>{this.isCloseable(r,!1)?(setTimeout(()=>this.aggregatedStore.end()),super.close()):this.wasForcefullyClosed=!0}).catch(r=>super.destroy(r))}destroy(r){if(!this.aggregatedStore){super.destroy(r);return}this.getLinkQueue().then(t=>{r??this.isCloseable(t,!1)?(setTimeout(()=>this.aggregatedStore.end()),super.destroy(r)):this.wasForcefullyClosed=!0}).catch(t=>super.destroy(t))}isCloseable(r,t){return(t?r.isEmpty():this.wasForcefullyClosed||r.isEmpty())&&!this.areIteratorsRunning()}canStartNewIterator(){return(!this.wasForcefullyClosed||this.aggregatedStore!==void 0&&this.aggregatedStore.hasRunningIterators())&&super.canStartNewIterator()}canStartNewIteratorConsiderReadable(){return!this.aggregatedStore}isRunning(){return this.aggregatedStore&&this.aggregatedStore.hasRunningIterators()||!this.done}getLinkQueue(){return this.linkQueue||(this.linkQueue=this.mediatorRdfResolveHypermediaLinksQueue.mediate({firstUrl:this.firstUrl,context:this.context}).then(r=>r.linkQueue)),this.linkQueue}async getSourceLinks(r,t){try{const{links:i}=await this.mediatorRdfResolveHypermediaLinks.mediate({context:this.context,metadata:r}),o=this.context.get(a.KeysStatistics.discoveredLinks);if(o)for(const l of i)o.updateStatistic({url:l.url,metadata:{...l.metadata}},t.link);return i.filter(l=>this.handledUrls[l.url]?!1:(this.handledUrls[l.url]=!0,!0))}catch{return[]}}startIterator(r){if(this.aggregatedStore&&!this.aggregatedStore.containedSources.has(r.link.url)){this.aggregatedStore?.containedSources.add(r.link.url);const t=r.source.queryBindings(this.algebraFactory.createPattern(this.dataFactory.variable("s"),this.dataFactory.variable("p"),this.dataFactory.variable("o"),this.dataFactory.variable("g")),this.context.set(a.KeysQueryOperation.unionDefaultGraph,!0)).map(i=>this.dataFactory.quad(i.get("s"),i.get("p"),i.get("o"),i.get("g")));this.aggregatedStore.import(t).on("end",()=>{super.startIterator(r)})}else super.startIterator(r)}async accumulateMetadata(r,t){return(await this.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:r,appendingMetadata:t,context:this.context})).metadata}updateMetadata(r){super.updateMetadata(r),this.aggregatedStore?.setBaseMetadata(r,!0)}};return NR.MediatedLinkedRdfSourcesAsyncRdfIterator=u,NR}var DR={},dm={},FR={},n9={},no={},fm={},PR={},Pye;function lwe(){if(Pye)return PR;Pye=1,Object.defineProperty(PR,"__esModule",{value:!0}),PR.BlankNode=void 0;let a=class{constructor(u){this.termType="BlankNode",this.value=u}equals(u){return!!u&&u.termType==="BlankNode"&&u.value===this.value}};return PR.BlankNode=a,PR}var jR={},MR={},jye;function dwe(){if(jye)return MR;jye=1,Object.defineProperty(MR,"__esModule",{value:!0}),MR.DefaultGraph=void 0;let a=class{constructor(){this.termType="DefaultGraph",this.value=""}equals(u){return!!u&&u.termType==="DefaultGraph"}};return MR.DefaultGraph=a,a.INSTANCE=new a,MR}var CR={},LR={},Mye;function fH(){if(Mye)return LR;Mye=1,Object.defineProperty(LR,"__esModule",{value:!0}),LR.NamedNode=void 0;let a=class{constructor(u){this.termType="NamedNode",this.value=u}equals(u){return!!u&&u.termType==="NamedNode"&&u.value===this.value}};return LR.NamedNode=a,LR}var Cye;function fwe(){if(Cye)return CR;Cye=1,Object.defineProperty(CR,"__esModule",{value:!0}),CR.Literal=void 0;const a=fH();let e=class X6{constructor(n,r){this.termType="Literal",this.value=n,typeof r=="string"?(this.language=r,this.datatype=X6.RDF_LANGUAGE_STRING,this.direction=""):r?"termType"in r?(this.language="",this.datatype=r,this.direction=""):(this.language=r.language,this.datatype=r.direction?X6.RDF_DIRECTIONAL_LANGUAGE_STRING:X6.RDF_LANGUAGE_STRING,this.direction=r.direction||""):(this.language="",this.datatype=X6.XSD_STRING,this.direction="")}equals(n){return!!n&&n.termType==="Literal"&&n.value===this.value&&n.language===this.language&&(n.direction===this.direction||!n.direction&&this.direction==="")&&this.datatype.equals(n.datatype)}};return CR.Literal=e,e.RDF_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"),e.RDF_DIRECTIONAL_LANGUAGE_STRING=new a.NamedNode("http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"),e.XSD_STRING=new a.NamedNode("http://www.w3.org/2001/XMLSchema#string"),CR}var qR={},Lye;function pwe(){if(Lye)return qR;Lye=1,Object.defineProperty(qR,"__esModule",{value:!0}),qR.Quad=void 0;let a=class{constructor(u,n,r,t){this.termType="Quad",this.value="",this.subject=u,this.predicate=n,this.object=r,this.graph=t}equals(u){return!!u&&(u.termType==="Quad"||!u.termType)&&this.subject.equals(u.subject)&&this.predicate.equals(u.predicate)&&this.object.equals(u.object)&&this.graph.equals(u.graph)}};return qR.Quad=a,qR}var BR={},qye;function hwe(){if(qye)return BR;qye=1,Object.defineProperty(BR,"__esModule",{value:!0}),BR.Variable=void 0;let a=class{constructor(u){this.termType="Variable",this.value=u}equals(u){return!!u&&u.termType==="Variable"&&u.value===this.value}};return BR.Variable=a,BR}var Bye;function gLe(){if(Bye)return jR;Bye=1,Object.defineProperty(jR,"__esModule",{value:!0}),jR.DataFactory=void 0;const a=lwe(),e=dwe(),u=fwe(),n=fH(),r=pwe(),t=hwe();let i=0,o=class{constructor(s){this.blankNodeCounter=0,s=s||{},this.blankNodePrefix=s.blankNodePrefix||`df_${i++}_`}namedNode(s){return new n.NamedNode(s)}blankNode(s){return new a.BlankNode(s||`${this.blankNodePrefix}${this.blankNodeCounter++}`)}literal(s,c){return new u.Literal(s,c)}variable(s){return new t.Variable(s)}defaultGraph(){return e.DefaultGraph.INSTANCE}quad(s,c,d,f){return new r.Quad(s,c,d,f||this.defaultGraph())}fromTerm(s){switch(s.termType){case"NamedNode":return this.namedNode(s.value);case"BlankNode":return this.blankNode(s.value);case"Literal":return s.language?this.literal(s.value,s.language):s.datatype.equals(u.Literal.XSD_STRING)?this.literal(s.value):this.literal(s.value,this.fromTerm(s.datatype));case"Variable":return this.variable(s.value);case"DefaultGraph":return this.defaultGraph();case"Quad":return this.quad(this.fromTerm(s.subject),this.fromTerm(s.predicate),this.fromTerm(s.object),this.fromTerm(s.graph))}}fromQuad(s){return this.fromTerm(s)}resetBlankNodeCounter(){this.blankNodeCounter=0}};return jR.DataFactory=o,jR}var Uye;function ywe(){return Uye||(Uye=1,(function(a){var e=fm&&fm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=fm&&fm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(lwe(),a),u(gLe(),a),u(dwe(),a),u(fwe(),a),u(fH(),a),u(pwe(),a),u(hwe(),a)})(fm)),fm}var Qye;function vLe(){if(Qye)return no;Qye=1,Object.defineProperty(no,"__esModule",{value:!0}),no.termToString=u,no.getLiteralValue=n,no.getLiteralType=r,no.getLiteralLanguage=t,no.getLiteralDirection=i,no.stringToTerm=o,no.quadToStringQuad=l,no.stringQuadToQuad=s;const a=ywe(),e=new a.DataFactory;function u(c){if(c)switch(c.termType){case"NamedNode":return c.value;case"BlankNode":return"_:"+c.value;case"Literal":const d=c;return'"'+d.value+'"'+(d.datatype&&d.datatype.value!=="http://www.w3.org/2001/XMLSchema#string"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#langString"&&d.datatype.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#dirLangString"?"^^"+d.datatype.value:"")+(d.language?"@"+d.language:"")+(d.direction?"--"+d.direction:"");case"Quad":return`<<${u(c.subject)} ${u(c.predicate)} ${u(c.object)}${c.graph.termType==="DefaultGraph"?"":" "+u(c.graph)}>>`;case"Variable":return"?"+c.value;case"DefaultGraph":return c.value}}function n(c){const d=/^"([^]*)"/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]}function r(c){const d=/^"[^]*"(?:\^\^([^"]+)|(@)[^@"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");return d[1]||(d[2]?"http://www.w3.org/1999/02/22-rdf-syntax-ns#langString":"http://www.w3.org/2001/XMLSchema#string")}function t(c){const d=/^"[^]*"(?:@([^@"]+)|\^\^[^"]+)?$/.exec(c);if(!d)throw new Error(c+" is not a literal");if(d[1]){let f=d[1].toLowerCase();const p=f.indexOf("--");return p>=0&&(f=f.slice(0,p)),f}return""}function i(c){const d=c.indexOf("--",c.lastIndexOf('"'));if(d>=0){const f=c.slice(d+2,c.length);if(f==="ltr"||f==="rtl")return f;throw new Error(c+" is not a literal with a valid direction")}return""}function o(c,d){if(d=d||e,!c||!c.length)return d.defaultGraph();switch(c[0]){case"_":return d.blankNode(c.substr(2));case"?":if(!d.variable)throw new Error("Missing 'variable()' method on the given DataFactory");return d.variable(c.substr(1));case'"':const f=t(c),p=i(c),h=d.namedNode(r(c));return d.literal(n(c),f?{language:f,direction:p}:h);default:if(c[0]==="<"&&c.length>4&&c[1]==="<"&&c[c.length-1]===">"&&c[c.length-2]===">"){const g=c.slice(2,-2).trim();let v=[],m=0,T=0,w=!1;for(let E=0;E<g.length;E++){const S=g[E];if(S==="<"&&m++,S===">"){if(m===0)throw new Error("Found closing tag without opening tag in "+c);m--}if(S==='"'){let N=!1,j=E;for(;j-- >0&&g[j]==="\\";)N=!N;N||(w=!w)}if(S===" "&&!w&&m===0){for(v.push(g.slice(T,E));g[E+1]===" ";)E+=1;T=E+1}}if(m!==0)throw new Error("Found opening tag without closing tag in "+c);if(v.push(g.slice(T,g.length)),v.length!==3&&v.length!==4)throw new Error("Nested quad syntax error "+c);return v=v.map(E=>E.startsWith("<")&&!E.includes(" ")?E.slice(1,-1):E),d.quad(o(v[0]),o(v[1]),o(v[2]),v[3]?o(v[3]):void 0)}return d.namedNode(c)}}function l(c){return{subject:u(c.subject),predicate:u(c.predicate),object:u(c.object),graph:u(c.graph)}}function s(c,d){return d=d||e,d.quad(o(c.subject,d),o(c.predicate,d),o(c.object,d),o(c.graph,d))}return no}var Vye;function mwe(){return Vye||(Vye=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.termToString=a.stringToTerm=a.stringQuadToQuad=a.quadToStringQuad=a.getLiteralValue=a.getLiteralType=a.getLiteralDirection=a.getLiteralLanguage=void 0;const e=vLe();Object.defineProperty(a,"getLiteralLanguage",{enumerable:!0,get:function(){return e.getLiteralLanguage}}),Object.defineProperty(a,"getLiteralDirection",{enumerable:!0,get:function(){return e.getLiteralDirection}}),Object.defineProperty(a,"getLiteralType",{enumerable:!0,get:function(){return e.getLiteralType}}),Object.defineProperty(a,"getLiteralValue",{enumerable:!0,get:function(){return e.getLiteralValue}}),Object.defineProperty(a,"quadToStringQuad",{enumerable:!0,get:function(){return e.quadToStringQuad}}),Object.defineProperty(a,"stringQuadToQuad",{enumerable:!0,get:function(){return e.stringQuadToQuad}}),Object.defineProperty(a,"stringToTerm",{enumerable:!0,get:function(){return e.stringToTerm}}),Object.defineProperty(a,"termToString",{enumerable:!0,get:function(){return e.termToString}})})(n9)),n9}var pm={},Mr={},Hye;function _Le(){if(Hye)return Mr;Hye=1,Object.defineProperty(Mr,"__esModule",{value:!0}),Mr.TRIPLE_TERM_NAMES=Mr.QUAD_TERM_NAMES=void 0,Mr.getTerms=u,Mr.getTermsNested=n,Mr.getNamedTerms=r,Mr.collectNamedTerms=t,Mr.forEachTerms=i,Mr.forEachTermsNested=o,Mr.filterTerms=l,Mr.filterTermsNested=s,Mr.filterQuadTermNames=c,Mr.filterQuadTermNamesNested=d,Mr.mapTerms=f,Mr.mapTermsNested=p,Mr.reduceTerms=h,Mr.reduceTermsNested=g,Mr.everyTerms=v,Mr.everyTermsNested=m,Mr.someTerms=T,Mr.someTermsNested=w,Mr.getValueNestedPath=E,Mr.matchTerm=S,Mr.matchPattern=N,Mr.matchPatternComplete=j,Mr.matchPatternMappings=q;const a=ywe(),e=new a.DataFactory;Mr.QUAD_TERM_NAMES=["subject","predicate","object","graph"],Mr.TRIPLE_TERM_NAMES=["subject","predicate","object"];function u(O,I){return I&&O.graph.termType==="DefaultGraph"?[O.subject,O.predicate,O.object]:[O.subject,O.predicate,O.object,O.graph]}function n(O,I){const A=[];for(const P of u(O,I))P.termType==="Quad"?n(P,I).forEach(C=>A.push(C)):A.push(P);return A}function r(O){return[{key:"subject",value:O.subject},{key:"predicate",value:O.predicate},{key:"object",value:O.object},{key:"graph",value:O.graph}]}function t(O,I,A){const P={};return O.forEach(C=>P[C.key]=C.value),I&&(P.subject=P.subject||I("subject"),P.predicate=P.predicate||I("predicate"),P.object=P.object||I("object"),P.graph=P.graph||I("graph")),(A||e).quad(P.subject,P.predicate,P.object,P.graph)}function i(O,I){I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph")}function o(O,I,A=[]){O.subject.termType==="Quad"?o(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]),O.predicate.termType==="Quad"?o(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]),O.object.termType==="Quad"?o(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]),O.graph.termType==="Quad"?o(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"])}function l(O,I){const A=[];return I(O.subject,"subject")&&A.push(O.subject),I(O.predicate,"predicate")&&A.push(O.predicate),I(O.object,"object")&&A.push(O.object),I(O.graph,"graph")&&A.push(O.graph),A}function s(O,I,A=[]){let P=[];return O.subject.termType==="Quad"?P=[...P,...s(O.subject,I,[...A,"subject"])]:I(O.subject,[...A,"subject"])&&P.push(O.subject),O.predicate.termType==="Quad"?P=[...P,...s(O.predicate,I,[...A,"predicate"])]:I(O.predicate,[...A,"predicate"])&&P.push(O.predicate),O.object.termType==="Quad"?P=[...P,...s(O.object,I,[...A,"object"])]:I(O.object,[...A,"object"])&&P.push(O.object),O.graph.termType==="Quad"?P=[...P,...s(O.graph,I,[...A,"graph"])]:I(O.graph,[...A,"graph"])&&P.push(O.graph),P}function c(O,I){const A=[];return I(O.subject,"subject")&&A.push("subject"),I(O.predicate,"predicate")&&A.push("predicate"),I(O.object,"object")&&A.push("object"),I(O.graph,"graph")&&A.push("graph"),A}function d(O,I,A=[]){let P=[];const C=[...A,"subject"];O.subject.termType==="Quad"?P=[...P,...d(O.subject,I,C)]:I(O.subject,C)&&P.push(C);const B=[...A,"predicate"];O.predicate.termType==="Quad"?P=[...P,...d(O.predicate,I,B)]:I(O.predicate,B)&&P.push(B);const H=[...A,"object"];O.object.termType==="Quad"?P=[...P,...d(O.object,I,H)]:I(O.object,H)&&P.push(H);const V=[...A,"graph"];return O.graph.termType==="Quad"?P=[...P,...d(O.graph,I,V)]:I(O.graph,V)&&P.push(V),P}function f(O,I,A){return(A||e).quad(I(O.subject,"subject"),I(O.predicate,"predicate"),I(O.object,"object"),I(O.graph,"graph"))}function p(O,I,A,P=[]){return(A||e).quad(O.subject.termType==="Quad"?p(O.subject,I,A,[...P,"subject"]):I(O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?p(O.predicate,I,A,[...P,"predicate"]):I(O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?p(O.object,I,A,[...P,"object"]):I(O.object,[...P,"object"]),O.graph.termType==="Quad"?p(O.graph,I,A,[...P,"graph"]):I(O.graph,[...P,"graph"]))}function h(O,I,A){let P=A;return P=I(P,O.subject,"subject"),P=I(P,O.predicate,"predicate"),P=I(P,O.object,"object"),I(P,O.graph,"graph")}function g(O,I,A,P=[]){let C=A;return O.subject.termType==="Quad"?C=g(O.subject,I,C,[...P,"subject"]):C=I(C,O.subject,[...P,"subject"]),O.predicate.termType==="Quad"?C=g(O.predicate,I,C,[...P,"predicate"]):C=I(C,O.predicate,[...P,"predicate"]),O.object.termType==="Quad"?C=g(O.object,I,C,[...P,"object"]):C=I(C,O.object,[...P,"object"]),O.graph.termType==="Quad"?C=g(O.graph,I,C,[...P,"graph"]):C=I(C,O.graph,[...P,"graph"]),C}function v(O,I){return I(O.subject,"subject")&&I(O.predicate,"predicate")&&I(O.object,"object")&&I(O.graph,"graph")}function m(O,I,A=[]){return(O.subject.termType==="Quad"?m(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))&&(O.predicate.termType==="Quad"?m(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))&&(O.object.termType==="Quad"?m(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))&&(O.graph.termType==="Quad"?m(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}function T(O,I){return I(O.subject,"subject")||I(O.predicate,"predicate")||I(O.object,"object")||I(O.graph,"graph")}function w(O,I,A=[]){return(O.subject.termType==="Quad"?w(O.subject,I,[...A,"subject"]):I(O.subject,[...A,"subject"]))||(O.predicate.termType==="Quad"?w(O.predicate,I,[...A,"predicate"]):I(O.predicate,[...A,"predicate"]))||(O.object.termType==="Quad"?w(O.object,I,[...A,"object"]):I(O.object,[...A,"object"]))||(O.graph.termType==="Quad"?w(O.graph,I,[...A,"graph"]):I(O.graph,[...A,"graph"]))}function E(O,I){if(I.length===0)return O;if(O.termType==="Quad")return E(O[I[0]],I.slice(1));throw new Error(`Tried to get ${I[0]} from term of type ${O.termType}`)}function S(O,I){return!I||I.termType==="Variable"||I.termType==="Quad"&&O.termType==="Quad"&&j(O,I)||I.equals(O)}function N(O,I,A,P,C){return S(O.subject,I)&&S(O.predicate,A)&&S(O.object,P)&&S(O.graph,C)}function j(O,I){return N(O,I.subject,I.predicate,I.object,I.graph)}function q(O,I,A={}){const P={};function C(B,H){return v(B,(V,G)=>{var Z,ae;const W=H[G];switch(V.termType){case"Variable":return A.skipVarMapping&&W.termType==="Variable"||((ae=(Z=P[V.value])===null||Z===void 0?void 0:Z.equals(W))!==null&&ae!==void 0?ae:(P[V.value]=W,!0));case"Quad":return W.termType==="Quad"&&C(V,W);default:return V.equals(W)}})}return C(I,O)&&(A.returnMappings?P:!0)}return Mr}var Mi={},kye;function TLe(){if(kye)return Mi;kye=1,Object.defineProperty(Mi,"__esModule",{value:!0}),Mi.TERM_TYPES=void 0,Mi.uniqTerms=e,Mi.getTermsOfType=u,Mi.getNamedNodes=n,Mi.getBlankNodes=r,Mi.getLiterals=t,Mi.getVariables=i,Mi.getDefaultGraphs=o,Mi.getQuads=l;const a=mwe();Mi.TERM_TYPES=["NamedNode","BlankNode","Literal","Variable","DefaultGraph","Quad"];function e(s){const c={};return s.filter(d=>{const f=(0,a.termToString)(d);return!(f in c)&&(c[f]=!0)})}function u(s,c){return s.filter(d=>d.termType===c)}function n(s){return u(s,"NamedNode")}function r(s){return u(s,"BlankNode")}function t(s){return u(s,"Literal")}function i(s){return u(s,"Variable")}function o(s){return u(s,"DefaultGraph")}function l(s){return u(s,"Quad")}return Mi}var zye;function wLe(){return zye||(zye=1,(function(a){var e=pm&&pm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=pm&&pm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(_Le(),a),u(TLe(),a)})(pm)),pm}var Gye;function bwe(){if(Gye)return FR;Gye=1,Object.defineProperty(FR,"__esModule",{value:!0}),FR.PendingStreamsIndex=void 0;const a=mwe(),e=wLe();let u=class Xm{constructor(){this.indexedStreams=new Map,this.allStreams=[]}termToString(r){return r&&r.termType!=="Variable"?(0,a.termToString)(r):Xm.ID_VARIABLE}addPatternListener(r,t,i,o,l){this.allStreams.push(r);const s=`${this.termToString(t)}${Xm.ID_SEPARATOR}${this.termToString(i)}${Xm.ID_SEPARATOR}${this.termToString(o)}${Xm.ID_SEPARATOR}${this.termToString(l)}`;let c=this.indexedStreams.get(s);c||(c=[],this.indexedStreams.set(s,c)),c.push(r)}getPendingStreamsForQuad(r){let t=[(0,e.getTerms)(r).map(o=>(0,a.termToString)(o))];for(let o=0;o<e.QUAD_TERM_NAMES.length;o++){const l=t;t=[];for(const s of l){t.push(s);const c=[...s];c[o]=Xm.ID_VARIABLE,t.push(c)}}const i=[];for(const o of t){const l=this.indexedStreams.get(o.join(Xm.ID_SEPARATOR));l&&i.push(...l)}return i}};return u.ID_VARIABLE="?",u.ID_SEPARATOR=":",FR.PendingStreamsIndex=u,FR}var ao={},$ye;function SLe(){if($ye)return ao;$ye=1;var a=ao&&ao.__asyncValues||function(o){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var l=o[Symbol.asyncIterator],s;return l?l.call(o):(o=typeof __values=="function"?__values(o):o[Symbol.iterator](),s={},c("next"),c("throw"),c("return"),s[Symbol.asyncIterator]=function(){return this},s);function c(f){s[f]=o[f]&&function(p){return new Promise(function(h,g){p=o[f](p),d(h,g,p.done,p.value)})}}function d(f,p,h,g){Promise.resolve(g).then(function(v){f({value:v,done:h})},p)}},e=ao&&ao.__await||function(o){return this instanceof e?(this.v=o,this):new e(o)},u=ao&&ao.__asyncGenerator||function(o,l,s){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var c=s.apply(o,l||[]),d,f=[];return d={},p("next"),p("throw"),p("return"),d[Symbol.asyncIterator]=function(){return this},d;function p(w){c[w]&&(d[w]=function(E){return new Promise(function(S,N){f.push([w,E,S,N])>1||h(w,E)})})}function h(w,E){try{g(c[w](E))}catch(S){T(f[0][3],S)}}function g(w){w.value instanceof e?Promise.resolve(w.value.v).then(v,m):T(f[0][2],w)}function v(w){h("next",w)}function m(w){h("throw",w)}function T(w,E){w(E),f.shift(),f.length&&h(f[0][0],f[0][1])}};Object.defineProperty(ao,"__esModule",{value:!0}),ao.StreamingStore=void 0;const n=Tl,r=Nr(),t=bwe();let i=class gwe{constructor(l=new n.Store){this.pendingStreams=new t.PendingStreamsIndex,this.ended=!1,this.listeners=[],this.store=l}addEndListener(l){this.listeners.push(l)}emitEndEvent(){for(const l of this.listeners)l()}hasEnded(){return this.ended}end(){this.ended=!0;for(const l of this.pendingStreams.allStreams)l.push(null);this.emitEndEvent()}importToListeners(l){l.on("data",s=>{if(!this.ended&&!this.store.countQuads(s.subject,s.predicate,s.object,s.graph))for(const c of this.pendingStreams.getPendingStreamsForQuad(s))c.emit("quad",s),c.isInitialized&&c.push(s)})}static concatStreams(l){return u(this,arguments,function*(){var c,d,f,p;for(const m of l)try{for(var h=!0,g=(d=void 0,a(m)),v;v=yield e(g.next()),c=v.done,!c;){p=v.value,h=!1;try{yield yield e(p)}finally{h=!0}}}catch(T){d={error:T}}finally{try{!h&&!c&&(f=g.return)&&(yield e(f.call(g)))}finally{if(d)throw d.error}}})}import(l){if(this.ended)throw new Error("Attempted to import into an ended StreamingStore");return this.importToListeners(l),this.store.import(l)}match(l,s,c,d){const f=this.store.match(l,s,c,d);let p=f;if(!this.ended){const h=new r.PassThrough({objectMode:!0});this.pendingStreams.addPatternListener(h,l,s,c,d),p=r.Readable.from(gwe.concatStreams([f,h])),h.on("quad",v=>{p.emit("quad",v)}),p._pipeSource=f;const g=f._read;f._read=v=>{h.isInitialized=!0,g.call(f,v)}}return p}getStore(){return this.store}};return ao.StreamingStore=i,ao}var Xye;function ELe(){return Xye||(Xye=1,(function(a){var e=dm&&dm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=dm&&dm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(bwe(),a),u(SLe(),a)})(dm)),dm}var Kye;function ALe(){if(Kye)return DR;Kye=1,Object.defineProperty(DR,"__esModule",{value:!0}),DR.StreamingStoreMetadata=void 0;const a=Eb(),e=xa(),u=ELe();let n=class extends u.StreamingStore{constructor(t,i,o){super(t),this.started=!1,this.containedSources=new Set,this.runningIterators=new Set,this.iteratorCreatedListeners=new Set,this.baseMetadata={state:new e.MetadataValidationState,cardinality:{type:"exact",value:0},variables:[]},this.metadataAccumulator=i,this.emitPartialCardinalities=o}import(t){return this.ended||super.import(t),t}hasRunningIterators(){return this.runningIterators.size>0}match(t,i,o,l){const s=super.match(t,i,o,l),c=new a.ClosableTransformIterator(s,{autoStart:!1,onClose:()=>{this.runningIterators.delete(c)}});let d=this.getStore().countQuads(t,i,o,l);const f={state:new e.MetadataValidationState,cardinality:{type:"estimate",value:d}};c.setProperty("metadata",f),c.setProperty("lastCount",d),this.emitPartialCardinalities&&s.on("quad",()=>{c.setProperty("lastCount",++d),this.updateMetadataState(c,d)}),this.runningIterators.add(c);for(const p of this.iteratorCreatedListeners)p();return c}setBaseMetadata(t,i){if(this.baseMetadata={...t},this.baseMetadata.cardinality={type:"exact",value:0},i)for(const o of this.runningIterators){const l=o.getProperty("lastCount");this.updateMetadataState(o,l)}}updateMetadataState(t,i){const o={state:new e.MetadataValidationState,cardinality:{type:"estimate",value:i},variables:[]};this.metadataAccumulator(this.baseMetadata,o).then(l=>{l.state=new e.MetadataValidationState;const s=t.getProperty("metadata");t.setProperty("metadata",l),s?.state.invalidate()}).catch(()=>{})}addIteratorCreatedListener(t){this.iteratorCreatedListeners.add(t)}removeIteratorCreatedListener(t){this.iteratorCreatedListeners.delete(t)}};return DR.StreamingStoreMetadata=n,DR}var Jye;function vwe(){if(Jye)return RR;Jye=1,Object.defineProperty(RR,"__esModule",{value:!0}),RR.QuerySourceHypermedia=void 0;const a=nN(),e=lt(),u=zt(),n=wb(),r=Nr(),t=Ut(),i=bLe(),o=ALe();let l=class{constructor(c,d,f,p,h,g,v,m,T,w){this.referenceValue=d,this.cacheSize=c,this.firstUrl=d,this.forceSourceType=f,this.maxIterators=p,this.mediators=v,this.aggregateStore=h,this.emitPartialCardinalities=g,this.logWarning=m,this.dataFactory=T,this.bindingsFactory=w,this.sourcesState=new n.LRUCache({max:this.cacheSize})}async getSelectorShape(c){return(await this.getSourceCached({url:this.firstUrl},{},c,this.getAggregateStore(c))).source.getSelectorShape(c)}queryBindings(c,d,f){const p=this.getAggregateStore(d);if(p&&c.type==="pattern"&&p.started)return new a.QuerySourceRdfJs(p,d.getSafe(e.KeysInitQuery.dataFactory),this.bindingsFactory).queryBindings(c,d);this.sourcesState.size===0&&this.getSourceCached({url:this.firstUrl},{},d,p).catch(m=>v.destroy(m));const h=d.getSafe(e.KeysInitQuery.dataFactory),g=new t.Factory(h),v=new i.MediatedLinkedRdfSourcesAsyncRdfIterator(this.cacheSize,c,f,d,this.forceSourceType,this.firstUrl,this.maxIterators,(m,T)=>this.getSourceCached(m,T,d,p),p,this.mediators.mediatorMetadataAccumulate,this.mediators.mediatorRdfResolveHypermediaLinks,this.mediators.mediatorRdfResolveHypermediaLinksQueue,h,g);if(p){p.started=!0;const m=()=>v.kickstart();p.addIteratorCreatedListener(m),v.on("end",()=>p.removeIteratorCreatedListener(m))}return v}queryQuads(c,d){return new u.TransformIterator(async()=>(await this.getSourceCached({url:this.firstUrl},{},d,this.getAggregateStore(d))).source.queryQuads(c,d))}async queryBoolean(c,d){return await(await this.getSourceCached({url:this.firstUrl},{},d,this.getAggregateStore(d))).source.queryBoolean(c,d)}async queryVoid(c,d){return await(await this.getSourceCached({url:this.firstUrl},{},d,this.getAggregateStore(d))).source.queryVoid(c,d)}async getSource(c,d,f,p){c.context&&(f=f.merge(c.context));let h=c.url,g,v;if(this.forceSourceType==="sparql"&&f.get(e.KeysQueryOperation.querySources)?.length===1)g=new r.Readable,g.read=()=>null,{metadata:v}=await this.mediators.mediatorMetadataAccumulate.mediate({context:f,mode:"initialize"});else try{const w=await this.mediators.mediatorDereferenceRdf.mediate({context:f,url:h});h=w.url;const E=await this.mediators.mediatorMetadata.mediate({context:f,url:h,quads:w.data,triples:w.metadata?.triples});E.data.on("error",()=>{}),v=(await this.mediators.mediatorMetadataExtract.mediate({context:f,url:h,metadata:E.metadata,headers:w.headers,requestTime:w.requestTime})).metadata,g=E.data,c.transform&&(g=await c.transform(g))}catch(w){g=new r.Readable,g.read=()=>(setTimeout(()=>g.emit("error",w)),null),{metadata:v}=await this.mediators.mediatorMetadataAccumulate.mediate({context:f,mode:"initialize"}),this.logWarning(`Metadata extraction for ${h} failed: ${w.message}`)}p?.setBaseMetadata(v,!1),p?.containedSources.add(c.url),p?.import(g);const{source:m,dataset:T}=await this.mediators.mediatorQuerySourceIdentifyHypermedia.mediate({context:f,forceSourceType:c.url===this.firstUrl?this.forceSourceType:void 0,handledDatasets:d,metadata:v,quads:g,url:h});return T&&(d[T]=!0),{link:c,source:m,metadata:v,handledDatasets:d}}getSourceCached(c,d,f,p){let h=this.sourcesState.get(c.url);return h||(h=this.getSource(c,d,f,p),(c.url===this.firstUrl||p===void 0)&&this.sourcesState.set(c.url,h),h)}getAggregateStore(c){let d;if(this.aggregateStore){const f=c.get(e.KeysQuerySourceIdentify.hypermediaSourcesAggregatedStores);if(f)return d=f.get(this.firstUrl),d||(d=new o.StreamingStoreMetadata(void 0,async(p,h)=>(await this.mediators.mediatorMetadataAccumulate.mediate({mode:"append",accumulatedMetadata:p,appendingMetadata:h,context:c})).metadata,this.emitPartialCardinalities),f.set(this.firstUrl,d)),d}}toString(){return`QuerySourceHypermedia(${this.firstUrl})`}};return RR.QuerySourceHypermedia=l,RR}var Wye;function OLe(){if(Wye)return xR;Wye=1,Object.defineProperty(xR,"__esModule",{value:!0}),xR.ActorQuerySourceIdentifyHypermedia=void 0;const a=tN(),e=lt(),u=De(),n=pn(),r=vwe();let t=class extends a.ActorQuerySourceIdentify{constructor(o){super(o)}async test(o){return typeof o.querySourceUnidentified.value!="string"?(0,u.failTest)(`${this.name} requires a single query source with a URL value to be present in the context.`):(0,u.passTestVoid)()}async run(o){const l=o.context.getSafe(e.KeysInitQuery.dataFactory);return{querySource:{source:new r.QuerySourceHypermedia(this.cacheSize,o.querySourceUnidentified.value,o.querySourceUnidentified.type,this.maxIterators,this.aggregateTraversalStore&&!!o.querySourceUnidentified.context?.get(e.KeysQuerySourceIdentify.traverse),this.emitPartialCardinalities,{mediatorMetadata:this.mediatorMetadata,mediatorMetadataExtract:this.mediatorMetadataExtract,mediatorMetadataAccumulate:this.mediatorMetadataAccumulate,mediatorDereferenceRdf:this.mediatorDereferenceRdf,mediatorQuerySourceIdentifyHypermedia:this.mediatorQuerySourceIdentifyHypermedia,mediatorRdfResolveHypermediaLinks:this.mediatorRdfResolveHypermediaLinks,mediatorRdfResolveHypermediaLinksQueue:this.mediatorRdfResolveHypermediaLinksQueue},s=>this.logWarn(o.context,s),l,await n.BindingsFactory.create(this.mediatorMergeBindingsContext,o.context,l)),context:o.querySourceUnidentified.context??new u.ActionContext}}}};return xR.ActorQuerySourceIdentifyHypermedia=t,xR}var Yye;function pH(){return Yye||(Yye=1,(function(a){var e=lm&&lm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=lm&&lm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(OLe(),a),u(vwe(),a)})(lm)),lm}var hm={},UR={},Zye;function xLe(){if(Zye)return UR;Zye=1,Object.defineProperty(UR,"__esModule",{value:!0}),UR.ActorRdfJoinNone=void 0;const a=ki(),e=lt(),u=De(),n=pn(),r=xa(),t=zt();let i=class extends a.ActorRdfJoin{constructor(l){super(l,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(l){return l.entries.length>0?(0,u.failTest)(`Actor ${this.name} can only join zero entries`):await this.getJoinCoefficients(l,void 0)}async getOutput(l){const s=l.context.getSafe(e.KeysInitQuery.dataFactory),c=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,l.context,s);return{result:{bindingsStream:new t.ArrayIterator([c.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({state:new r.MetadataValidationState,cardinality:{type:"exact",value:1},variables:[]}),type:"bindings"}}}async getJoinCoefficients(l,s){return(0,u.passTestWithSideData)({iterations:0,persistedItems:0,blockingItems:0,requestTime:0},s)}};return UR.ActorRdfJoinNone=i,UR}var eme;function hH(){return eme||(eme=1,(function(a){var e=hm&&hm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=hm&&hm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(xLe(),a)})(hm)),hm}var ym={},QR={},mm={},VR={},tme;function RLe(){if(tme)return VR;tme=1,Object.defineProperty(VR,"__esModule",{value:!0}),VR.ActorRdfJoinMultiBind=void 0;const a=ki(),e=lt(),u=De(),n=pn(),r=Zt(),t=zt(),i=Ut();let o=class _we extends a.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0,isLeaf:!1})}static createBindStream(s,c,d,f,p,h,g){const v=s==="depth-first",m=T=>{const w=d.map(S=>(0,r.materializeOperation)(S,T,h,g,{bindFilter:!0})),E=S=>S.merge(T);return new t.TransformIterator(async()=>(await f(w,T)).transform({map:E}),{maxBufferSize:128,autoStart:v})};switch(s){case"depth-first":return new t.MultiTransformIterator(c,{autoStart:!1,multiTransform:m,optional:p});case"breadth-first":return new t.UnionIterator(c.transform({map:m,optional:p}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${s}`)}}async getOutput(s,c){const d=s.context.getSafe(e.KeysInitQuery.dataFactory),f=new i.Factory(d),p=await n.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,d),h=c.entriesSorted;this.logDebug(s.context,"First entry for Bind Join: ",()=>({entry:h[0].operation,cardinality:h[0].metadata.cardinality,order:h[0].metadata.order,availableOrders:h[0].metadata.availableOrders}));for(const[w,E]of h.entries())w!==0&&E.output.bindingsStream.close();const g=h[0].output,v=[...h];v.splice(0,1);const m=s.context.set(e.KeysQueryOperation.joinLeftMetadata,h[0].metadata).set(e.KeysQueryOperation.joinRightMetadatas,v.map(w=>w.metadata));return{result:{type:"bindings",bindingsStream:_we.createBindStream(this.bindOrder,g.bindingsStream,v.map(w=>w.operation),async(w,E)=>{const S=w.length===1?w[0]:f.createJoin(w,w.every(j=>!j.metadata));return(0,r.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:S,context:m?.set(e.KeysQueryOperation.joinBindings,E)})).bindingsStream},!1,f,p),metadata:()=>this.constructResultMetadata(h,h.map(w=>w.metadata),s.context)},physicalPlanMetadata:{bindIndex:c.entriesUnsorted.indexOf(h[0]),bindOperation:h[0].operation,bindOperationCardinality:h[0].metadata.cardinality,bindOrder:this.bindOrder}}}canBindWithOperation(s){let c=!0;return i.Util.recurseOperation(s,{[i.Algebra.types.EXTEND](){return c=!1,!1},[i.Algebra.types.GROUP](){return c=!1,!1}}),c}async getJoinCoefficients(s,c){let{metadatas:d}=c;const f=s.entries.map((O,I)=>({...O,metadata:d[I]})),p=await a.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,f,s.context);if(p.isFailed())return p;const h=p.get();d=h.map(O=>O.metadata);const g=a.ActorRdfJoin.getRequestInitialTimes(d),v=a.ActorRdfJoin.getRequestItemTimes(d),m=[...h],T=[...g],w=[...v];if(m.splice(0,1),T.splice(0,1),w.splice(0,1),m.some(O=>!this.canBindWithOperation(O.operation)))return(0,u.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);if(m.some(O=>O.operationModified))return(0,u.failTest)(`Actor ${this.name} can not be used over remaining entries with modified operations`);const E=v.some(O=>O>0);if(d[0].cardinality.value*this.minMaxCardinalityRatio/(E?1:3)>Math.max(...d.map(O=>O.cardinality.value)))return(0,u.failTest)(`Actor ${this.name} can only run if the smallest stream is much smaller than largest stream`);const S=await Promise.all(m.map(async O=>(await this.mediatorJoinSelectivity.mediate({entries:[h[0],O],context:s.context})).selectivity*this.selectivityModifier)),N=m.map((O,I)=>O.metadata.cardinality.value*S[I]).reduce((O,I)=>O+I,0),j=T.reduce((O,I)=>O+I,0),q=w.reduce((O,I)=>O+I,0);return(0,u.passTestWithSideData)({iterations:d[0].cardinality.value*N,persistedItems:0,blockingItems:0,requestTime:g[0]+d[0].cardinality.value*(v[0]+j+N*q)},{...c,entriesUnsorted:f,entriesSorted:h})}};return VR.ActorRdfJoinMultiBind=o,VR}var rme;function FP(){return rme||(rme=1,(function(a){var e=mm&&mm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=mm&&mm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(RLe(),a)})(mm)),mm}var nme;function NLe(){if(nme)return QR;nme=1,Object.defineProperty(QR,"__esModule",{value:!0}),QR.ActorRdfJoinOptionalBind=void 0;const a=FP(),e=ki(),u=lt(),n=De(),r=pn(),t=Zt(),i=Ut();let o=class extends e.ActorRdfJoin{constructor(s){super(s,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0,isLeaf:!1,requiresVariableOverlap:!0,canHandleOperationRequired:!0})}async getOutput(s){const c=s.context.getSafe(u.KeysInitQuery.dataFactory),d=new i.Factory(c),f=await r.BindingsFactory.create(this.mediatorMergeBindingsContext,s.context,c);s.entries[1].output.bindingsStream.close();const p=s.context.set(u.KeysQueryOperation.joinLeftMetadata,await s.entries[0].output.metadata()).set(u.KeysQueryOperation.joinRightMetadatas,[await s.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:a.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,s.entries[0].output.bindingsStream,[s.entries[1].operation],async(g,v)=>{const m=g[0];return(0,t.getSafeBindings)(await this.mediatorQueryOperation.mediate({operation:m,context:p?.set(u.KeysQueryOperation.joinBindings,v)})).bindingsStream},!0,d,f),metadata:async()=>await this.constructResultMetadata(s.entries,await e.ActorRdfJoin.getMetadatas(s.entries),s.context,{},!0)}}}async getJoinCoefficients(s,c){const{metadatas:d}=c,f=e.ActorRdfJoin.getRequestInitialTimes(d),p=e.ActorRdfJoin.getRequestItemTimes(d);if(s.entries[1].operation.type===i.Algebra.types.EXTEND||s.entries[1].operation.type===i.Algebra.types.GROUP)return(0,n.failTest)(`Actor ${this.name} can not bind on Extend and Group operations`);const h=(await this.mediatorJoinSelectivity.mediate({entries:s.entries,context:s.context})).selectivity*this.selectivityModifier;return(0,n.passTestWithSideData)({iterations:d[0].cardinality.value*d[1].cardinality.value*h,persistedItems:0,blockingItems:0,requestTime:f[0]+d[0].cardinality.value*(p[0]+f[1]+h*d[1].cardinality.value*p[1])},c)}};return QR.ActorRdfJoinOptionalBind=o,QR}var ame;function yH(){return ame||(ame=1,(function(a){var e=ym&&ym.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=ym&&ym.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(NLe(),a)})(ym)),ym}var bm={},HR={},gm={},kR={},ime;function ILe(){if(ime)return kR;ime=1,Object.defineProperty(kR,"__esModule",{value:!0}),kR.ActorTermComparatorFactory=void 0;const a=De();let e=class extends a.Actor{constructor(n){super(n),this.mediatorQueryOperation=n.mediatorQueryOperation,this.mediatorFunctionFactory=n.mediatorFunctionFactory,this.mediatorMergeBindingsContext=n.mediatorMergeBindingsContext}};return kR.ActorTermComparatorFactory=e,kR}var ume;function DLe(){return ume||(ume=1,(function(a){var e=gm&&gm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=gm&&gm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(ILe(),a)})(gm)),gm}var zR={},ome;function FLe(){if(ome)return zR;ome=1,Object.defineProperty(zR,"__esModule",{value:!0}),zR.TermComparatorExpressionEvaluator=void 0;let a=class{constructor(u,n,r){this.internalEvaluator=u,this.equalityFunction=n,this.lessThanFunction=r,this._TERM_ORDERING_PRIORITY={Variable:0,BlankNode:1,NamedNode:2,Literal:3,Quad:4,DefaultGraph:5}}orderTypes(u,n){if(u===n)return 0;if(u===void 0)return-1;if(n===void 0)return 1;if(u.termType!==n.termType)return this._TERM_ORDERING_PRIORITY[u.termType]<this._TERM_ORDERING_PRIORITY[n.termType]?-1:1;if(u.equals(n))return 0;if(u.termType==="Quad"&&n.termType==="Quad"){const r=this.orderTypes(u.subject,n.subject);if(r!==0)return r;const t=this.orderTypes(u.predicate,n.predicate);if(t!==0)return t;const i=this.orderTypes(u.object,n.object);return i!==0?i:this.orderTypes(u.graph,n.graph)}return u.termType==="Literal"?this.orderLiteralTypes(u,n):this.comparePrimitives(u.value,n.value)}orderLiteralTypes(u,n){const r=this.internalEvaluator.transformer.transformLiteral(u),t=this.internalEvaluator.transformer.transformLiteral(n);try{return this.equalityFunction.applyOnTerms([r,t],this.internalEvaluator).typedValue?0:this.lessThanFunction.applyOnTerms([r,t],this.internalEvaluator).typedValue?-1:1}catch{const i=this.comparePrimitives(r.dataType,t.dataType);return i!==0?i:this.comparePrimitives(r.str(),t.str())}}comparePrimitives(u,n){return u===n?0:u<n?-1:1}};return zR.TermComparatorExpressionEvaluator=a,zR}var sme;function PLe(){if(sme)return HR;sme=1,Object.defineProperty(HR,"__esModule",{value:!0}),HR.ActorTermComparatorFactoryExpressionEvaluator=void 0;const a=cwe(),e=DLe(),u=lt(),n=De(),r=pn(),t=$e(),i=FLe();let o=class extends e.ActorTermComparatorFactory{async test(s){return(0,n.passTestVoid)()}async run({context:s}){return s=t.prepareEvaluatorActionContext(s),new i.TermComparatorExpressionEvaluator(new a.InternalEvaluator(s,this.mediatorFunctionFactory,this.mediatorQueryOperation,await r.BindingsFactory.create(this.mediatorMergeBindingsContext,s,s.getSafe(u.KeysInitQuery.dataFactory))),await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.EQUAL,context:s,requireTermExpression:!0}),await this.mediatorFunctionFactory.mediate({functionName:t.SparqlOperator.LT,context:s,requireTermExpression:!0}))}};return HR.ActorTermComparatorFactoryExpressionEvaluator=o,HR}var cme;function mH(){return cme||(cme=1,(function(a){var e=bm&&bm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=bm&&bm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(PLe(),a)})(bm)),bm}var vm={},GR={},lme;function jLe(){if(lme)return GR;lme=1,Object.defineProperty(GR,"__esModule",{value:!0}),GR.ActorRdfJoinMultiSmallestFilterBindings=void 0;const a=ki(),e=lt(),u=De(),n=pn(),r=Eb(),t=Zt(),i=zt(),o=Ut();let l=class extends a.ActorRdfJoin{constructor(c){super(c,{logicalType:"inner",physicalName:"multi-smallest-filter-bindings",limitEntries:2,limitEntriesMin:!0,isLeaf:!1})}async sortJoinEntries(c,d){let{entries:f}=await this.mediatorJoinEntriesSort.mediate({entries:c,context:d});f=f.sort((T,w)=>T.operationModified&&!w.operationModified?-1:0);const p=f.splice(0,1)[0];let h,g=-1,v=0;for(const[T,w]of f.entries()){const E=p.metadata.variables.filter(S=>w.metadata.variables.some(N=>S.variable.equals(N.variable))).length;(!h||E>v||E===v&&(w.metadata.variables.length<h.metadata.variables.length||w.metadata.variables.length===h.metadata.variables.length&&w.metadata.cardinality.value<h.metadata.cardinality.value))&&(h=w,g=T,v=E)}if(v===0)return(0,u.failTest)(`Actor ${this.name} can only join with common variables`);const m=f;return m.splice(g,1),(0,u.passTest)({first:p,second:h,remaining:m})}async getOutput(c){const d=c.context.getSafe(e.KeysInitQuery.dataFactory),f=new o.Factory(d),p=await a.ActorRdfJoin.getEntriesWithMetadatas([...c.entries]),{first:h,second:g,remaining:v}=(await this.sortJoinEntries(p,c.context)).getOrThrow(),m=h.output.bindingsStream;h.output.bindingsStream=m.clone();const T=h.metadata.variables.filter(A=>g.metadata.variables.some(P=>A.variable.equals(P.variable))),w={},E=m.clone().map(A=>A.filter((P,C)=>T.some(B=>B.variable.equals(C)))).filter(A=>{const P=(0,n.bindingsToString)(A);return!(P in w)&&(w[P]=!0)}),S=new r.ChunkedIterator(E,this.blockSize,{autoStart:!1}),N=(0,t.getOperationSource)(g.operation),q={output:{type:"bindings",bindingsStream:new i.UnionIterator(S.map(A=>N.source.queryBindings(g.operation,N.context?c.context.merge(N.context):c.context,{filterBindings:{bindings:A,metadata:h.metadata}}))),metadata:g.output.metadata},operation:g.operation,operationModified:!0};g.output.bindingsStream.destroy();const O={output:(0,t.getSafeBindings)(await this.mediatorJoin.mediate({type:c.type,entries:[h,q],context:c.context.set(e.KeysRdfJoin.lastPhysicalJoin,this.physicalName)})),operation:f.createJoin([h.operation,q.operation],!1),operationModified:!0},I=v;return I.unshift(O),{result:await this.mediatorJoin.mediate({type:c.type,entries:I,context:c.context}),physicalPlanMetadata:{firstIndex:p.indexOf(h),secondIndex:p.indexOf(g)}}}async getJoinCoefficients(c,d){let{metadatas:f}=d;if(c.context.get(e.KeysRdfJoin.lastPhysicalJoin)===this.physicalName)return(0,u.failTest)(`Actor ${this.name} can not be called recursively`);f=[...f];const p=await this.sortJoinEntries(c.entries.map((O,I)=>({...O,metadata:f[I]})),c.context);if(p.isFailed())return p;const{first:h,second:g,remaining:v}=p.get(),m=(0,t.getOperationSource)(g.operation);if(!m)return(0,u.failTest)(`Actor ${this.name} can only process if entries[1] has a source`);const T=g.operation,w=await m.source.getSelectorShape(c.context),E=c.context.get(e.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,t.doesShapeAcceptOperation)(w,T,{filterBindings:!0,wildcardAcceptAllExtensionFunctions:E}))return(0,u.failTest)(`Actor ${this.name} can only process if entries[1] accept filterBindings`);f=[h.metadata,g.metadata,...v.map(O=>O.metadata)];const S=a.ActorRdfJoin.getRequestInitialTimes(f),N=a.ActorRdfJoin.getRequestItemTimes(f),{selectivity:j}=await this.mediatorJoinSelectivity.mediate({entries:[h,g],context:c.context}),q=v.reduce((O,I)=>O*I.metadata.cardinality.value*this.selectivityModifier,1);return(0,u.passTestWithSideData)({iterations:j*this.selectivityModifier*g.metadata.cardinality.value*q,persistedItems:h.metadata.cardinality.value,blockingItems:h.metadata.cardinality.value,requestTime:S[0]+f[0].cardinality.value*N[0]+S[1]+q*N[1]},d)}};return GR.ActorRdfJoinMultiSmallestFilterBindings=l,GR}var dme;function bH(){return dme||(dme=1,(function(a){var e=vm&&vm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=vm&&vm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(jLe(),a)})(vm)),vm}var _m={},$R={},Tm={},Qs={},fme;function MLe(){if(fme)return Qs;fme=1,Object.defineProperty(Qs,"__esModule",{value:!0}),Qs.KeysRdfJoin=Qs.KeysExtractLinksTree=Qs.KeysRdfResolveHypermediaLinks=void 0;const a=De();return Qs.KeysRdfResolveHypermediaLinks={annotateSources:new a.ActionContextKey("@comunica/bus-rdf-resolve-hypermedia-links:annotateSources"),linkFilters:new a.ActionContextKey("@comunica/bus-rdf-resolve-hypermedia-links:linkFilters")},Qs.KeysExtractLinksTree={strictTraversal:new a.ActionContextKey("@comunica/actor-extract-links-tree:strictTraversal")},Qs.KeysRdfJoin={skipAdaptiveJoin:new a.ActionContextKey("@comunica/bus-rdf-join:skipAdaptiveJoin")},Qs}var pme;function CLe(){return pme||(pme=1,(function(a){var e=Tm&&Tm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Tm&&Tm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(MLe(),a)})(Tm)),Tm}var XR={},wm={},KR={},JR={},WR={},hme;function Twe(){if(hme)return WR;hme=1,Object.defineProperty(WR,"__esModule",{value:!0}),WR.TermDictionaryNumberRecordFullTerms=void 0;const a=Rr(),e=$t();let u=class{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const t=(0,e.termToString)(r);let i=this.dictionary[t];return i===void 0&&(i=this.lastId++,this.dictionary[t]=i,this.reverseDictionary[i]=r),i}encodeOptional(r){const t=(0,e.termToString)(r);return this.dictionary[t]}decode(r){const t=this.reverseDictionary[r];if(t===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return t}*encodings(){for(const r of Object.keys(this.reverseDictionary))yield Number.parseInt(r,10)}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}};return WR.TermDictionaryNumberRecordFullTerms=u,WR}var YR={},ZR={},a9={},yme;function Zo(){return yme||(yme=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.arePatternsQuoted=a.quadHasVariables=a.quadToPattern=a.encodeOptionalTerms=a.orderQuadComponents=a.getComponentOrderScore=a.getBestIndex=a.QUAD_TERM_NAMES_INVERSE=void 0;const e=Yr();a.QUAD_TERM_NAMES_INVERSE=Object.fromEntries(e.QUAD_TERM_NAMES.map((s,c)=>[s,c]));function u(s,c){if(s.length===1||c.every(p=>p!==void 0))return 0;const d=[];for(let p=0;p<e.QUAD_TERM_NAMES.length;p++)c[p]&&d.push(e.QUAD_TERM_NAMES[p]);return s.map((p,h)=>({score:n(p,d),index:h})).sort((p,h)=>h.score-p.score)[0].index}a.getBestIndex=u;function n(s,c){return s.map((d,f)=>c.includes(d)?s.length-f:0).reduce((d,f)=>d+f,0)}a.getComponentOrderScore=n;function r(s,c){return s.map(d=>{const f=a.QUAD_TERM_NAMES_INVERSE[d];return c[f]})}a.orderQuadComponents=r;function t(s,c){const d=s.map(f=>{if(f){if(f.termType==="Quad"&&o(f))return;const p=c.encodeOptional(f);return p===void 0?"none":p}return f});if(!d.includes("none"))return d}a.encodeOptionalTerms=t;function i(s,c,d,f,p){let h=!1;return[[s||void 0,c||void 0,d||void 0,f||void 0].map(v=>{if(v){if(v.termType==="Variable")return;if(v.termType==="Quad"){if(p)return v;h=!0;return}}return v}),h]}a.quadToPattern=i;function o(s){for(const c of e.QUAD_TERM_NAMES){const d=s[c];if(d.termType==="Variable"||d.termType==="Quad"&&o(d))return!0}return!1}a.quadHasVariables=o;function l(s){return s.map(c=>c?.termType==="Quad"&&o(c))}a.arePatternsQuoted=l})(a9)),a9}var mme;function gH(){if(mme)return ZR;mme=1,Object.defineProperty(ZR,"__esModule",{value:!0}),ZR.RdfStoreIndexNestedMap=void 0;const a=Zo();let e=class{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedMap=new Map}set(n,r){const t=this.nestedMap;let i=t.get(n[0]);i||(i=new Map,t.set(n[0],i));let o=i.get(n[1]);o||(o=new Map,i.set(n[1],o));let l=o.get(n[2]);l||(l=new Map,o.set(n[2],l));const s=l.has(n[3]);return s||l.set(n[3],r),!s}remove(n){const r=this.nestedMap,t=r.get(n[0]);if(!t)return!1;const i=t.get(n[1]);if(!i)return!1;const o=i.get(n[2]);if(!o)return!1;const l=o.delete(n[3]);return l&&o.size===0&&(i.delete(n[2]),i.size===0&&(t.delete(n[1]),t.size===0&&r.delete(n[0]))),l}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){const r=this.nestedMap.get(n[0]);if(!r)return;const t=r.get(n[1]);if(!t)return;const i=t.get(n[2]);if(i)return i.get(n[3])}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!r)return;const[t,i,o,l]=r,[s,c,d,f]=n;let p,h,g,v,m,T,w;const E=this.nestedMap,S=t!==void 0?E.has(t)?[t]:[]:E.keys();for(const N of S){m=E.get(N),p=s||this.dictionary.decode(N);const j=i!==void 0?m.has(i)?[i]:[]:m.keys();for(const q of j){T=m.get(q),h=c||this.dictionary.decode(q);const O=o!==void 0?T.has(o)?[o]:[]:T.keys();for(const I of O){w=T.get(I),g=d||this.dictionary.decode(I);const A=l!==void 0?w.has(l)?[l]:[]:w.keys();for(const P of A)v=f||this.dictionary.decode(P),yield[p,h,g,v]}}}}*findEncoded(n,r){const[t,i,o,l]=n;let s,c,d;const f=this.nestedMap,p=t!==void 0?f.has(t)?[t]:[]:f.keys();for(const h of p){s=f.get(h);const g=i!==void 0?s.has(i)?[i]:[]:s.keys();for(const v of g){c=s.get(v);const m=o!==void 0?c.has(o)?[o]:[]:c.keys();for(const T of m){d=c.get(T);const w=l!==void 0?d.has(l)?[l]:[]:d.keys();for(const E of w)yield[h,v,T,E]}}}}count(n){let r=0;const t=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!t)return 0;const i=t[0],o=t[1],l=t[2],s=t[3];let c,d,f;const p=this.nestedMap,h=i!==void 0?p.has(i)?[i]:[]:p.keys();for(const g of h){c=p.get(g);const v=o!==void 0?c.has(o)?[o]:[]:c.keys();for(const m of v){d=c.get(m);const T=l!==void 0?d.has(l)?[l]:[]:d.keys();for(const w of T)f=d.get(w),s!==void 0?f.has(s)&&r++:r+=f.size}}return r}};return ZR.RdfStoreIndexNestedMap=e,ZR}var bme;function wwe(){if(bme)return YR;bme=1,Object.defineProperty(YR,"__esModule",{value:!0}),YR.TermDictionaryQuotedIndexed=void 0;const a=Rr(),e=gH(),u=Zo();let n=class zs{constructor(t,i=new a.DataFactory){this.quotedTriplesDictionary=[],this.features={quotedTriples:!0},this.plainTermDictionary=t;const o={indexCombinations:[],indexConstructor:void 0,dictionary:this,dataFactory:i};this.quotedTriplesReverseDictionaries=[new e.RdfStoreIndexNestedMap(o),new e.RdfStoreIndexNestedMap(o),new e.RdfStoreIndexNestedMap(o)],this.dataFactory=i}encode(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!1):this.plainTermDictionary.encode(t)}encodeQuotedTriple(t,i){if(t.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const o=(0,u.encodeOptionalTerms)([t.subject,t.predicate,t.object,t.graph],this),l=o&&o.every(f=>f!==void 0)?this.quotedTriplesReverseDictionaries[0].getEncoded(o):void 0;if(l!==void 0||i)return l===void 0?void 0:zs.BITMASK|l;const s=[this.encode(t.subject),this.encode(t.predicate),this.encode(t.object)],c=this.quotedTriplesDictionary.length+1;this.quotedTriplesDictionary.push(s);const d=this.encode(this.dataFactory.defaultGraph());return this.quotedTriplesReverseDictionaries[0].set([s[0],s[1],s[2],d],c),this.quotedTriplesReverseDictionaries[1].set([s[1],s[2],s[0],d],c),this.quotedTriplesReverseDictionaries[2].set([s[2],s[0],s[1],d],c),zs.BITMASK|c}encodeOptional(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!0):this.plainTermDictionary.encodeOptional(t)}decode(t){if(zs.BITMASK&t){const i=(~zs.BITMASK&t)-1;if(i>=this.quotedTriplesDictionary.length)throw new Error(`The value ${t} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[i];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(t)}*encodings(){for(const t of this.plainTermDictionary.encodings())yield t;for(const t of this.quotedTriplesDictionary.keys())yield zs.BITMASK|1+t}*findQuotedTriples(t){for(const i of this.findQuotedTriplesEncoded(t))yield this.decode(i)}*findQuotedTriplesEncoded(t){const[i,o]=(0,u.quadToPattern)(t.subject,t.predicate,t.object,t.graph,!0);for(const l of this.patternToIterable(i[0]))for(const s of this.patternToIterable(i[1]))for(const c of this.patternToIterable(i[2]))for(const d of this.patternToIterable(i[3]))if(l&&s||!s&&!c){const f=[l,s,c,d];for(const p of this.quotedTriplesReverseDictionaries[0].findEncoded(f,i))yield zs.BITMASK|this.quotedTriplesReverseDictionaries[0].getEncoded(p)}else if(!l&&s){const f=[s,c,l,d];for(const p of this.quotedTriplesReverseDictionaries[1].findEncoded(f,i))yield zs.BITMASK|this.quotedTriplesReverseDictionaries[1].getEncoded(p)}else{const f=[c,l,s,d];for(const p of this.quotedTriplesReverseDictionaries[2].findEncoded(f,i))yield zs.BITMASK|this.quotedTriplesReverseDictionaries[2].getEncoded(p)}}*patternToIterable(t){if(t?.termType==="Quad"){yield*this.findQuotedTriplesEncoded(t);return}if(t===void 0){yield void 0;return}const i=this.encodeOptional(t);i!==void 0&&(yield i)}};return n.BITMASK=1<<31,YR.TermDictionaryQuotedIndexed=n,YR}var e6={},gme;function Swe(){if(gme)return e6;gme=1,Object.defineProperty(e6,"__esModule",{value:!0}),e6.RdfStoreIndexNestedMapQuoted=void 0;const a=Zo(),e=gH();let u=class extends e.RdfStoreIndexNestedMap{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(r,t){for(const i of this.dictionary.findQuotedTriplesEncoded(t))r.has(i)&&(yield i)}*find(r){const t=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!t)return;const[i,o,l,s]=t,[c,d,f,p]=r,[h,g,v,m]=(0,a.arePatternsQuoted)(r);let T,w,E,S,N,j,q;const O=this.nestedMap,I=c!==void 0?h?this.getQuotedPatternKeys(O,c):O.has(i)?[i]:[]:O.keys();for(const A of I){N=O.get(A),T=!h&&c?c:this.dictionary.decode(A);const P=d!==void 0?g?this.getQuotedPatternKeys(N,d):N.has(o)?[o]:[]:N.keys();for(const C of P){j=N.get(C),w=!g&&d?d:this.dictionary.decode(C);const B=f!==void 0?v?this.getQuotedPatternKeys(j,f):j.has(l)?[l]:[]:j.keys();for(const H of B){q=j.get(H),E=!v&&f?f:this.dictionary.decode(H);const V=p!==void 0?m?this.getQuotedPatternKeys(q,p):q.has(s)?[s]:[]:q.keys();for(const G of V)S=!m&&p?p:this.dictionary.decode(G),yield[T,w,E,S]}}}}*findEncoded(r,t){const[i,o,l,s]=r,[c,d,f,p]=t,[h,g,v,m]=(0,a.arePatternsQuoted)(t);let T,w,E;const S=this.nestedMap,N=c!==void 0?h?this.getQuotedPatternKeys(S,c):S.has(i)?[i]:[]:S.keys();for(const j of N){T=S.get(j);const q=d!==void 0?g?this.getQuotedPatternKeys(T,d):T.has(o)?[o]:[]:T.keys();for(const O of q){w=T.get(O);const I=f!==void 0?v?this.getQuotedPatternKeys(w,f):w.has(l)?[l]:[]:w.keys();for(const A of I){E=w.get(A);const P=p!==void 0?m?this.getQuotedPatternKeys(E,p):E.has(s)?[s]:[]:E.keys();for(const C of P)yield[Number.parseInt(j,10),Number.parseInt(O,10),Number.parseInt(A,10),Number.parseInt(C,10)]}}}}count(r){let t=0;const i=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!i)return 0;const[o,l,s,c]=i,[d,f,p,h]=r,[g,v,m,T]=(0,a.arePatternsQuoted)(r);let w,E,S;const N=this.nestedMap,j=d!==void 0?g?this.getQuotedPatternKeys(N,d):N.has(o)?[o]:[]:N.keys();for(const q of j){w=N.get(q);const O=f!==void 0?v?this.getQuotedPatternKeys(w,f):w.has(l)?[l]:[]:w.keys();for(const I of O){E=w.get(I);const A=p!==void 0?m?this.getQuotedPatternKeys(E,p):E.has(s)?[s]:[]:E.keys();for(const P of A)S=E.get(P),h!==void 0?T?t+=[...this.getQuotedPatternKeys(S,h)].length:S.has(c)&&t++:t+=S.size}}return t}};return e6.RdfStoreIndexNestedMapQuoted=u,e6}var vme;function Ewe(){if(vme)return JR;vme=1,Object.defineProperty(JR,"__esModule",{value:!0}),JR.RdfStore=void 0;const a=zt(),e=Rr(),u=Yr(),n=Owe(),r=Twe(),t=wwe(),i=Swe(),o=Zo();let l=class K6{constructor(c){this.features={quotedTripleFiltering:!0},this._size=0,this.options=c,this.dataFactory=c.dataFactory,this.dictionary=c.dictionary,this.indexesWrapped=K6.constructIndexesWrapped(c),this.indexesWrappedComponentOrders=this.indexesWrapped.map(d=>d.componentOrder)}static createDefault(){return new K6({indexCombinations:K6.DEFAULT_INDEX_COMBINATIONS,indexConstructor:c=>new i.RdfStoreIndexNestedMapQuoted(c),dictionary:new t.TermDictionaryQuotedIndexed(new r.TermDictionaryNumberRecordFullTerms),dataFactory:new e.DataFactory})}static constructIndexesWrapped(c){const d=[];if(c.indexCombinations.length===0)throw new Error("At least one index combination is required");for(const f of c.indexCombinations){if(!K6.isCombinationValid(f))throw new Error(`Invalid index combination: ${f}`);d.push({index:c.indexConstructor(c),componentOrder:f,componentOrderInverse:Object.fromEntries(f.map((p,h)=>[p,h]))})}return d}static isCombinationValid(c){for(const d of u.QUAD_TERM_NAMES)if(!c.includes(d))return!1;return c.length===4}get size(){return this._size}addQuad(c){const d=[this.dictionary.encode(c.subject),this.dictionary.encode(c.predicate),this.dictionary.encode(c.object),this.dictionary.encode(c.graph)];let f=!1;for(const p of this.indexesWrapped)f=p.index.set((0,o.orderQuadComponents)(p.componentOrder,d),!0);return f?(this._size++,!0):!1}removeQuad(c){const d=[this.dictionary.encodeOptional(c.subject),this.dictionary.encodeOptional(c.predicate),this.dictionary.encodeOptional(c.object),this.dictionary.encodeOptional(c.graph)];if(d.includes(void 0))return!1;let f=!1;for(const p of this.indexesWrapped)if(f=p.index.remove((0,o.orderQuadComponents)(p.componentOrder,d)),!f)break;return f?(this._size--,!0):!1}remove(c){return c.on("data",d=>this.removeQuad(d)),c}removeMatches(c,d,f,p){return this.remove(this.match(c,d,f,p))}deleteGraph(c){return typeof c=="string"&&(c=this.dataFactory.namedNode(c)),this.removeMatches(void 0,void 0,void 0,c)}import(c){return c.on("data",d=>this.addQuad(d)),c}*readQuads(c,d,f,p){const h=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(w=>w.index.features.quotedTripleFiltering),[g,v]=(0,o.quadToPattern)(c,d,f,p,h),m=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,g)],T=(0,o.orderQuadComponents)(m.componentOrder,g);for(const w of m.index.find(T)){const E=this.dataFactory.quad(w[m.componentOrderInverse.subject],w[m.componentOrderInverse.predicate],w[m.componentOrderInverse.object],w[m.componentOrderInverse.graph]);v?(0,u.matchPattern)(E,c,d,f,p)&&(yield E):yield E}}getQuads(c,d,f,p){return[...this.readQuads(c,d,f,p)]}match(c,d,f,p){return(0,a.wrap)(this.readQuads(c,d,f,p))}countQuads(c,d,f,p){const h=!!this.dictionary.features.quotedTriples&&Object.values(this.indexesWrapped).every(T=>T.index.features.quotedTripleFiltering),[g]=(0,o.quadToPattern)(c,d,f,p,h);if(g.every(T=>T===void 0))return this.size;const v=this.indexesWrapped[(0,o.getBestIndex)(this.indexesWrappedComponentOrders,g)],m=(0,o.orderQuadComponents)(v.componentOrder,g);return v.index.count(m)}asDataset(){return new n.DatasetCoreWrapper(this)}};return l.DEFAULT_INDEX_COMBINATIONS=[["graph","subject","predicate","object"],["graph","predicate","object","subject"],["graph","object","subject","predicate"]],JR.RdfStore=l,JR}var _me;function Owe(){if(_me)return KR;_me=1,Object.defineProperty(KR,"__esModule",{value:!0}),KR.DatasetCoreWrapper=void 0;const a=Ewe();let e=class Awe{constructor(n){this.store=n}get size(){return this.store.size}add(n){return this.store.addQuad(n),this}delete(n){return this.store.removeQuad(n),this}has(n){for(const r of this.store.readQuads(n.subject,n.predicate,n.object,n.graph))return!0;return!1}match(n,r,t,i){const o=new a.RdfStore(this.store.options);for(const l of this.store.readQuads(n,r,t,i))o.addQuad(l);return new Awe(o)}[Symbol.iterator](){return this.store.readQuads()}};return KR.DatasetCoreWrapper=e,KR}var i9={},Tme;function LLe(){return Tme||(Tme=1,Object.defineProperty(i9,"__esModule",{value:!0})),i9}var t6={},wme;function qLe(){if(wme)return t6;wme=1,Object.defineProperty(t6,"__esModule",{value:!0}),t6.TermDictionaryNumberMap=void 0;const a=Rr(),e=$t();let u=class{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary=new Map,this.reverseDictionary=new Map,this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const t=(0,e.termToString)(r);let i=this.dictionary.get(t);return i===void 0&&(i=this.lastId++,this.dictionary.set(t,i),this.reverseDictionary.set(i,t)),i}encodeOptional(r){const t=(0,e.termToString)(r);return this.dictionary.get(t)}decode(r){const t=this.reverseDictionary.get(r);if(t===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return(0,e.stringToTerm)(t,this.dataFactory)}encodings(){return this.reverseDictionary.keys()}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}};return t6.TermDictionaryNumberMap=u,t6}var r6={},Sme;function BLe(){if(Sme)return r6;Sme=1,Object.defineProperty(r6,"__esModule",{value:!0}),r6.TermDictionaryNumberRecord=void 0;const a=Rr(),e=$t();let u=class{constructor(r=new a.DataFactory){this.lastId=0,this.dictionary={},this.reverseDictionary={},this.features={quotedTriples:!1},this.dataFactory=r}encode(r){const t=(0,e.termToString)(r);let i=this.dictionary[t];return i===void 0&&(i=this.lastId++,this.dictionary[t]=i,this.reverseDictionary[i]=t),i}encodeOptional(r){const t=(0,e.termToString)(r);return this.dictionary[t]}decode(r){const t=this.reverseDictionary[r];if(t===void 0)throw new Error(`The value ${r} is not present in this dictionary`);return(0,e.stringToTerm)(t,this.dataFactory)}*encodings(){for(const r of Object.keys(this.reverseDictionary))yield Number.parseInt(r,10)}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}};return r6.TermDictionaryNumberRecord=u,r6}var n6={},Eme;function ULe(){if(Eme)return n6;Eme=1,Object.defineProperty(n6,"__esModule",{value:!0}),n6.TermDictionaryQuoted=void 0;const a=Rr(),e=Yr();let u=class Km{constructor(r,t,i=new a.DataFactory){this.features={quotedTriples:!0},this.plainTermDictionary=r,this.quotedTriplesDictionary=t,this.dataFactory=i}encode(r){return r.termType==="Quad"?Km.BITMASK|1+this.quotedTriplesDictionary.encode(r):this.plainTermDictionary.encode(r)}encodeOptional(r){if(r.termType==="Quad"){const t=this.quotedTriplesDictionary.encodeOptional(r);return t===void 0?t:Km.BITMASK|1+t}return this.plainTermDictionary.encodeOptional(r)}decode(r){if(Km.BITMASK&r){const t=(~Km.BITMASK&r)-1;return this.quotedTriplesDictionary.decode(t)}return this.plainTermDictionary.decode(r)}*encodings(){for(const r of this.plainTermDictionary.encodings())yield r;for(const r of this.quotedTriplesDictionary.encodings())yield Km.BITMASK|1+r}*findQuotedTriples(r){for(const t of this.findQuotedTriplesEncoded(r))yield this.decode(t)}*findQuotedTriplesEncoded(r){for(let t of this.quotedTriplesDictionary.encodings()){t=Km.BITMASK|1+t;const i=this.decode(t);(0,e.matchPattern)(i,r.subject,r.predicate,r.object,r.graph)&&(yield t)}}};return u.BITMASK=1<<31,n6.TermDictionaryQuoted=u,n6}var a6={},Ame;function QLe(){if(Ame)return a6;Ame=1,Object.defineProperty(a6,"__esModule",{value:!0}),a6.TermDictionaryQuotedReferential=void 0;const a=Rr(),e=Yr(),u=Zo();let n=class Gs{constructor(t,i=new a.DataFactory){this.quotedTriplesDictionary=[],this.quotedTriplesReverseDictionary={},this.features={quotedTriples:!0},this.plainTermDictionary=t,this.dataFactory=i}encode(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!1):this.plainTermDictionary.encode(t)}encodeQuotedTriple(t,i){var o;if(t.graph.termType!=="DefaultGraph")throw new Error("Encoding of quoted quads outside of the default graph is not allowed");const l=(o=(0,u.encodeOptionalTerms)([t.subject,t.predicate,t.object,void 0],this))===null||o===void 0?void 0:o.slice(0,3),s=l&&l.every(f=>f!==void 0)?this.quotedTriplesReverseDictionary[l.join(Gs.SEPARATOR)]:void 0;if(s!==void 0||i)return s===void 0?void 0:Gs.BITMASK|s;const c=[this.encode(t.subject),this.encode(t.predicate),this.encode(t.object)],d=this.quotedTriplesDictionary.length+1;return this.quotedTriplesDictionary.push(c),this.quotedTriplesReverseDictionary[c.join(Gs.SEPARATOR)]=d,Gs.BITMASK|d}encodeOptional(t){return t.termType==="Quad"?this.encodeQuotedTriple(t,!0):this.plainTermDictionary.encodeOptional(t)}decode(t){if(Gs.BITMASK&t){const i=(~Gs.BITMASK&t)-1;if(i>=this.quotedTriplesDictionary.length)throw new Error(`The value ${t} is not present in the quoted triples range of the dictionary`);const o=this.quotedTriplesDictionary[i];return this.dataFactory.quad(this.decode(o[0]),this.decode(o[1]),this.decode(o[2]))}return this.plainTermDictionary.decode(t)}*encodings(){for(const t of this.plainTermDictionary.encodings())yield t;for(const t of this.quotedTriplesDictionary.keys())yield Gs.BITMASK|1+t}*findQuotedTriples(t){for(const i of this.findQuotedTriplesEncoded(t))yield this.decode(i)}*findQuotedTriplesEncoded(t){for(let i of this.quotedTriplesDictionary.keys()){i=Gs.BITMASK|1+i;const o=this.decode(i);(0,e.matchPattern)(o,t.subject,t.predicate,t.object,t.graph)&&(yield i)}}};return n.BITMASK=1<<31,n.SEPARATOR="_",a6.TermDictionaryQuotedReferential=n,a6}var i6={},Ome;function VLe(){if(Ome)return i6;Ome=1,Object.defineProperty(i6,"__esModule",{value:!0}),i6.TermDictionarySymbol=void 0;const a=Rr(),e=$t();let u=class{constructor(r=new a.DataFactory){this.features={quotedTriples:!1},this.dataFactory=r}encode(r){return Symbol.for(`rdf::${(0,e.termToString)(r)}`)}encodeOptional(r){return this.encode(r)}decode(r){const t=Symbol.keyFor(r);if(t===void 0)throw new Error(`The value ${String(r)} is not present in this dictionary`);return(0,e.stringToTerm)(t.slice(5),this.dataFactory)}encodings(){throw new Error("encodings is not supported")}findQuotedTriples(r){throw new Error("findQuotedTriples is not supported")}findQuotedTriplesEncoded(r){throw new Error("findQuotedTriplesEncoded is not supported")}};return i6.TermDictionarySymbol=u,i6}var u9={},xme;function HLe(){return xme||(xme=1,Object.defineProperty(u9,"__esModule",{value:!0})),u9}var u6={},Rme;function xwe(){if(Rme)return u6;Rme=1,Object.defineProperty(u6,"__esModule",{value:!0}),u6.RdfStoreIndexNestedMapRecursive=void 0;const a=Zo();let e=class{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedMap=new Map}set(n,r){let t=this.nestedMap,i=!1;for(const[o,l]of n.entries()){const s=t;let c=s.get(l);c?o===n.length-1&&(i=!0):(c=o===n.length-1?r:new Map,s.set(l,c)),t=c}return!i}remove(n){const r=this.nestedMap,t=r.get(n[0]);if(!t)return!1;const i=t.get(n[1]);if(!i)return!1;const o=i.get(n[2]);if(!o)return!1;const l=o.delete(n[3]);return l&&o.size===0&&(i.delete(n[2]),i.size===0&&(t.delete(n[1]),t.size===0&&r.delete(n[0]))),l}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){const r=this.nestedMap.get(n[0]);if(!r)return;const t=r.get(n[1]);if(!t)return;const i=t.get(n[2]);if(i)return i.get(n[3])}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(r)for(const t of this.findEncoded(r,n))yield[r[0]!==void 0?n[0]:this.dictionary.decode(t[0]),r[1]!==void 0?n[1]:this.dictionary.decode(t[1]),r[2]!==void 0?n[2]:this.dictionary.decode(t[2]),r[3]!==void 0?n[3]:this.dictionary.decode(t[3])]}*findEncoded(n,r){return yield*this.findEncodedInner(0,n,r,this.nestedMap,[])}*findEncodedInner(n,r,t,i,o){if(n===r.length)yield[...o];else{const l=r[n];if(t[n]){const c=l;if(c!==void 0){const d=i.get(c);d&&(o[n]=l,yield*this.findEncodedInner(n+1,r,t,d,o))}}else for(const[c,d]of i.entries())o[n]=c,yield*this.findEncodedInner(n+1,r,t,d,o)}}count(n){return this.countInner(0,n,this.nestedMap)}countInner(n,r,t){const i=r[n];let o=0;if(i){const l=this.dictionary.encodeOptional(i);if(l!==void 0){if(n===r.length-1)return t.has(l)?1:0;const s=t.get(l);s&&(o+=this.countInner(n+1,r,s))}}else{if(n===r.length-1)return t.size;for(const l of t.values())o+=this.countInner(n+1,r,l)}return o}};return u6.RdfStoreIndexNestedMapRecursive=e,u6}var o6={},Nme;function kLe(){if(Nme)return o6;Nme=1,Object.defineProperty(o6,"__esModule",{value:!0}),o6.RdfStoreIndexNestedMapRecursiveQuoted=void 0;const a=Zo(),e=xwe();let u=class extends e.RdfStoreIndexNestedMapRecursive{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*findEncoded(r,t){return yield*this.findEncodedInnerQuoted(0,r,t,(0,a.arePatternsQuoted)(t),this.nestedMap,[])}*findEncodedInnerQuoted(r,t,i,o,l,s){if(r===t.length)yield[...s];else{const c=t[r],d=i[r];if(d)if(o[r]){const f=this.dictionary.findQuotedTriplesEncoded(d);for(const p of f){const h=l.get(p);h&&(s[r]=p,yield*this.findEncodedInnerQuoted(r+1,t,i,o,h,s))}}else{const f=c;if(f!==void 0){const p=l.get(f);p&&(s[r]=c,yield*this.findEncodedInnerQuoted(r+1,t,i,o,p,s))}}else for(const[f,p]of l.entries())s[r]=f,yield*this.findEncodedInnerQuoted(r+1,t,i,o,p,s)}}countInner(r,t,i){const o=t[r];let l=0;if(o)if(o.termType==="Quad"&&(0,a.quadHasVariables)(o)){const s=this.dictionary.findQuotedTriplesEncoded(o);for(const c of s)if(r===t.length-1)i.has(c)&&l++;else{const d=i.get(c);d&&(l+=this.countInner(r+1,t,d))}}else{const s=this.dictionary.encodeOptional(o);if(s!==void 0){if(r===t.length-1)return i.has(s)?1:0;const c=i.get(s);c&&(l+=this.countInner(r+1,t,c))}}else{if(r===t.length-1)return i.size;for(const s of i.values())l+=this.countInner(r+1,t,s)}return l}};return o6.RdfStoreIndexNestedMapRecursiveQuoted=u,o6}var s6={},Ime;function Rwe(){if(Ime)return s6;Ime=1,Object.defineProperty(s6,"__esModule",{value:!0}),s6.RdfStoreIndexNestedRecord=void 0;const a=Zo();let e=class{constructor(n){this.features={quotedTripleFiltering:!1},this.dictionary=n.dictionary,this.nestedRecords={}}set(n,r){const t=this.nestedRecords,i=t[n[0]]||(t[n[0]]={}),o=i[n[1]]||(i[n[1]]={}),l=o[n[2]]||(o[n[2]]={});return l[n[3]]?!1:(l[n[3]]=r,!0)}remove(n){const r=this.nestedRecords,t=r[n[0]];if(!t)return!1;const i=t[n[1]];if(!i)return!1;const o=i[n[2]];return!o||!o[n[3]]?!1:(delete o[n[3]],Object.keys(o).length===0&&(delete i[n[2]],Object.keys(i).length===0&&(delete t[n[1]],Object.keys(t).length===0&&delete r[n[0]])),!0)}get(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!(!r||r.includes(void 0)))return this.getEncoded(r)}getEncoded(n){var r,t,i;return(i=(t=(r=this.nestedRecords[n[0]])===null||r===void 0?void 0:r[n[1]])===null||t===void 0?void 0:t[n[2]])===null||i===void 0?void 0:i[n[3]]}*find(n){const r=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!r)return;const[t,i,o,l]=r,[s,c,d,f]=n;let p,h,g,v,m,T,w;const E=this.nestedRecords,S=t!==void 0?t in E?[t]:[]:Object.keys(E);for(const N of S){m=E[N],p=s||this.dictionary.decode(Number.parseInt(N,10));const j=i!==void 0?i in m?[i]:[]:Object.keys(m);for(const q of j){T=m[q],h=c||this.dictionary.decode(Number.parseInt(q,10));const O=o!==void 0?o in T?[o]:[]:Object.keys(T);for(const I of O){w=T[I],g=d||this.dictionary.decode(Number.parseInt(I,10));const A=l!==void 0?l in w?[l]:[]:Object.keys(w);for(const P of A)v=f||this.dictionary.decode(Number.parseInt(P,10)),yield[p,h,g,v]}}}}*findEncoded(n,r){const[t,i,o,l]=n;let s,c,d;const f=this.nestedRecords,p=t!==void 0?t in f?[t]:[]:Object.keys(f);for(const h of p){s=f[h];const g=i!==void 0?i in s?[i]:[]:Object.keys(s);for(const v of g){c=s[v];const m=o!==void 0?o in c?[o]:[]:Object.keys(c);for(const T of m){d=c[T];const w=l!==void 0?l in d?[l]:[]:Object.keys(d);for(const E of w)yield[Number.parseInt(h,10),Number.parseInt(v,10),Number.parseInt(T,10),Number.parseInt(E,10)]}}}}count(n){let r=0;const t=(0,a.encodeOptionalTerms)(n,this.dictionary);if(!t)return 0;const i=t[0],o=t[1],l=t[2],s=t[3];let c,d,f;const p=this.nestedRecords,h=i!==void 0?i in p?[i]:[]:Object.keys(p);for(const g of h){c=p[g];const v=o!==void 0?o in c?[o]:[]:Object.keys(c);for(const m of v){d=c[m];const T=l!==void 0?l in d?[l]:[]:Object.keys(d);for(const w of T)f=d[w],s!==void 0?s in f&&r++:r+=Object.keys(f).length}}return r}};return s6.RdfStoreIndexNestedRecord=e,s6}var c6={},Dme;function zLe(){if(Dme)return c6;Dme=1,Object.defineProperty(c6,"__esModule",{value:!0}),c6.RdfStoreIndexNestedRecordQuoted=void 0;const a=Zo(),e=Rwe();let u=class extends e.RdfStoreIndexNestedRecord{constructor(r){super(r),this.features={quotedTripleFiltering:!0}}*getQuotedPatternKeys(r,t){for(const i of this.dictionary.findQuotedTriplesEncoded(t))i in r&&(yield i)}*find(r){const t=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!t)return;const[i,o,l,s]=t,[c,d,f,p]=r,[h,g,v,m]=(0,a.arePatternsQuoted)(r);let T,w,E,S,N,j,q;const O=this.nestedRecords,I=c!==void 0?h?this.getQuotedPatternKeys(O,c):i in O?[i]:[]:Object.keys(O);for(const A of I){N=O[A],T=!h&&c?c:this.dictionary.decode(Number.parseInt(A,10));const P=d!==void 0?g?this.getQuotedPatternKeys(N,d):o in N?[o]:[]:Object.keys(N);for(const C of P){j=N[C],w=!g&&d?d:this.dictionary.decode(Number.parseInt(C,10));const B=f!==void 0?v?this.getQuotedPatternKeys(j,f):l in j?[l]:[]:Object.keys(j);for(const H of B){q=j[H],E=!v&&f?f:this.dictionary.decode(Number.parseInt(H,10));const V=p!==void 0?m?this.getQuotedPatternKeys(q,p):s in q?[s]:[]:Object.keys(q);for(const G of V)S=!m&&p?p:this.dictionary.decode(Number.parseInt(G,10)),yield[T,w,E,S]}}}}*findEncoded(r,t){const[i,o,l,s]=r,[c,d,f,p]=t,[h,g,v,m]=(0,a.arePatternsQuoted)(t);let T,w,E;const S=this.nestedRecords,N=c!==void 0?h?this.getQuotedPatternKeys(S,c):i in S?[i]:[]:Object.keys(S);for(const j of N){T=S[j];const q=d!==void 0?g?this.getQuotedPatternKeys(T,d):o in T?[o]:[]:Object.keys(T);for(const O of q){w=T[O];const I=f!==void 0?v?this.getQuotedPatternKeys(w,f):l in w?[l]:[]:Object.keys(w);for(const A of I){E=w[A];const P=p!==void 0?m?this.getQuotedPatternKeys(E,p):s in E?[s]:[]:Object.keys(E);for(const C of P)yield[Number.parseInt(j,10),Number.parseInt(O,10),Number.parseInt(A,10),Number.parseInt(C,10)]}}}}count(r){let t=0;const i=(0,a.encodeOptionalTerms)(r,this.dictionary);if(!i)return 0;const[o,l,s,c]=i,[d,f,p,h]=r,[g,v,m,T]=(0,a.arePatternsQuoted)(r);let w,E,S;const N=this.nestedRecords,j=d!==void 0?g?this.getQuotedPatternKeys(N,d):o in N?[o]:[]:Object.keys(N);for(const q of j){w=N[q];const O=f!==void 0?v?this.getQuotedPatternKeys(w,f):l in w?[l]:[]:Object.keys(w);for(const I of O){E=w[I];const A=p!==void 0?m?this.getQuotedPatternKeys(E,p):s in E?[s]:[]:Object.keys(E);for(const P of A)S=E[P],h!==void 0?T?t+=[...this.getQuotedPatternKeys(S,h)].length:c in S&&t++:t+=Object.keys(S).length}}return t}};return c6.RdfStoreIndexNestedRecordQuoted=u,c6}var o9={},Fme;function GLe(){return Fme||(Fme=1,Object.defineProperty(o9,"__esModule",{value:!0})),o9}var s9={},Pme;function $Le(){return Pme||(Pme=1,Object.defineProperty(s9,"__esModule",{value:!0})),s9}var jme;function XLe(){return jme||(jme=1,(function(a){var e=wm&&wm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=wm&&wm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Owe(),a),u(LLe(),a),u(qLe(),a),u(BLe(),a),u(Twe(),a),u(ULe(),a),u(wwe(),a),u(QLe(),a),u(VLe(),a),u(HLe(),a),u(gH(),a),u(Swe(),a),u(xwe(),a),u(kLe(),a),u(Rwe(),a),u(zLe(),a),u(GLe(),a),u(Zo(),a),u($Le(),a),u(Ewe(),a)})(wm)),wm}var Mme;function KLe(){if(Mme)return XR;Mme=1,Object.defineProperty(XR,"__esModule",{value:!0}),XR.storeStream=void 0;const a=XLe();function e(u){const n=a.RdfStore.createDefault();return new Promise((r,t)=>n.import(u).on("error",t).once("end",()=>r(n)))}return XR.storeStream=e,XR}var io={},pu={},c9={},Cme;function iN(){return Cme||(Cme=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.expressionTypes=a.types=void 0,(function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"})(a.types||(a.types={})),(function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"})(a.expressionTypes||(a.expressionTypes={}))})(c9)),c9}var Fo={},Lme;function PP(){if(Lme)return Fo;Lme=1;var a=Fo&&Fo.__createBinding||(Object.create?(function(l,s,c,d){d===void 0&&(d=c);var f=Object.getOwnPropertyDescriptor(s,c);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[c]}}),Object.defineProperty(l,d,f)}):(function(l,s,c,d){d===void 0&&(d=c),l[d]=s[c]})),e=Fo&&Fo.__setModuleDefault||(Object.create?(function(l,s){Object.defineProperty(l,"default",{enumerable:!0,value:s})}):function(l,s){l.default=s}),u=Fo&&Fo.__importStar||function(l){if(l&&l.__esModule)return l;var s={};if(l!=null)for(var c in l)c!=="default"&&Object.prototype.hasOwnProperty.call(l,c)&&a(s,l,c);return e(s,l),s};Object.defineProperty(Fo,"__esModule",{value:!0});const n=u(iN()),r=Rr(),t=$t(),i=$n();class o{constructor(s){this.dataFactory=s||new r.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,c=!0){return this.flattenMulti({type:n.types.ALT,input:s},c)}createAsk(s){return{type:n.types.ASK,input:s}}createBoundAggregate(s,c,d,f,p){const h=this.createAggregateExpression(c,d,f,p);return h.variable=s,h}createBgp(s){return{type:n.types.BGP,patterns:s}}createConstruct(s,c){return{type:n.types.CONSTRUCT,input:s,template:c}}createDescribe(s,c){return{type:n.types.DESCRIBE,input:s,terms:c}}createDistinct(s){return{type:n.types.DISTINCT,input:s}}createExtend(s,c,d){return{type:n.types.EXTEND,input:s,variable:c,expression:d}}createFrom(s,c,d){return{type:n.types.FROM,input:s,default:c,named:d}}createFilter(s,c){return{type:n.types.FILTER,input:s,expression:c}}createGraph(s,c){return{type:n.types.GRAPH,input:s,name:c}}createGroup(s,c,d){return{type:n.types.GROUP,input:s,variables:c,aggregates:d}}createInv(s){return{type:n.types.INV,path:s}}createJoin(s,c=!0){return this.flattenMulti({type:n.types.JOIN,input:s},c)}createLeftJoin(s,c,d){return d?{type:n.types.LEFT_JOIN,input:[s,c],expression:d}:{type:n.types.LEFT_JOIN,input:[s,c]}}createLink(s){return{type:n.types.LINK,iri:s}}createMinus(s,c){return{type:n.types.MINUS,input:[s,c]}}createNop(){return{type:n.types.NOP}}createNps(s){return{type:n.types.NPS,iris:s}}createOneOrMorePath(s){return{type:n.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,c){return{type:n.types.ORDER_BY,input:s,expressions:c}}createPath(s,c,d,f){return f?{type:n.types.PATH,subject:s,predicate:c,object:d,graph:f}:{type:n.types.PATH,subject:s,predicate:c,object:d,graph:this.dataFactory.defaultGraph()}}createPattern(s,c,d,f){const p=this.dataFactory.quad(s,c,d,f);return p.type=n.types.PATTERN,p}createProject(s,c){return{type:n.types.PROJECT,input:s,variables:c}}createReduced(s){return{type:n.types.REDUCED,input:s}}createSeq(s,c=!0){return this.flattenMulti({type:n.types.SEQ,input:s},c)}createService(s,c,d){return{type:n.types.SERVICE,input:s,name:c,silent:!!d}}createSlice(s,c,d){return c=c||0,d!==void 0?{type:n.types.SLICE,input:s,start:c,length:d}:{type:n.types.SLICE,input:s,start:c}}createUnion(s,c=!0){return this.flattenMulti({type:n.types.UNION,input:s},c)}createValues(s,c){return{type:n.types.VALUES,variables:s,bindings:c}}createZeroOrMorePath(s){return{type:n.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:n.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,c,d,f){return f?{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,separator:f,distinct:d}:{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,distinct:d}}createExistenceExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.EXISTENCE,not:s,input:c}}createNamedExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.NAMED,name:s,args:c}}createOperatorExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.OPERATOR,operator:s,args:c}}createTermExpression(s){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.WILDCARD,wildcard:new i.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,t.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:n.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,c,d){const f={type:n.types.DELETE_INSERT};return s&&(f.delete=s),c&&(f.insert=c),d&&(f.where=d),f}createLoad(s,c,d){const f={type:n.types.LOAD,source:s};return c&&(f.destination=c),this.addSilent(f,!!d)}createClear(s,c){return this.addSilent({type:n.types.CLEAR,source:s},!!c)}createCreate(s,c){return this.addSilent({type:n.types.CREATE,source:s},!!c)}createDrop(s,c){return this.addSilent({type:n.types.DROP,source:s},!!c)}createAdd(s,c,d){return this.addSilent({type:n.types.ADD,source:s,destination:c},!!d)}createMove(s,c,d){return this.addSilent({type:n.types.MOVE,source:s,destination:c},!!d)}createCopy(s,c,d){return this.addSilent({type:n.types.COPY,source:s,destination:c},!!d)}addSilent(s,c){return c&&(s.silent=c),s}flattenMulti(s,c){if(!c)return s;const d=s.type,f=s.input;let p=[];for(const h of f)h.type===d?p.push(...h.input):p.push(h);return s.input=p,s}}return Fo.default=o,Fo}var Tg={},qme;function vH(){if(qme)return Tg;qme=1;var a=Tg&&Tg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Tg,"__esModule",{value:!0});const e=iN(),u=a(PP()),n=Yr();class r{static flatten(i){return Array.prototype.concat(...i).filter(o=>o)}static objectify(i){if(i.termType){if(i.termType==="Quad")return{type:"pattern",termType:"Quad",subject:r.objectify(i.subject),predicate:r.objectify(i.predicate),object:r.objectify(i.object),graph:r.objectify(i.graph)};{let o={termType:i.termType,value:i.value};return i.language&&(o.language=i.language),i.datatype&&(o.datatype=r.objectify(i.datatype)),o}}if(Array.isArray(i))return i.map(o=>r.objectify(o));if(i===Object(i)){let o={};for(let l of Object.keys(i))o[l]=r.objectify(i[l]);return o}return i}static inScopeVariables(i){const o=[];function l(c){o.find(d=>c.value===d.value)||o.push(c)}function s(c){c.subject.termType==="Variable"&&l(c.subject),c.predicate.termType==="Variable"&&l(c.predicate),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.predicate.termType==="Quad"&&s(c.predicate),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph)}return r.recurseOperation(i,{[e.types.EXPRESSION]:c=>(c.expressionType===e.expressionTypes.AGGREGATE&&c.variable&&l(c.variable),!0),[e.types.EXTEND]:c=>(l(c.variable),!0),[e.types.GRAPH]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.GROUP]:c=>(c.variables.forEach(l),!0),[e.types.PATH]:c=>(c.subject.termType==="Variable"&&l(c.subject),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph),!0),[e.types.PATTERN]:c=>(s(c),!0),[e.types.PROJECT]:c=>(c.variables.forEach(l),!1),[e.types.SERVICE]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.VALUES]:c=>(c.variables.forEach(l),!0)}),o}static recurseOperation(i,o){let l=i,s=!0;const c=o[i.type];if(c&&(s=c(i)),!s)return;let d=f=>r.recurseOperation(f,o);switch(l.type){case e.types.ALT:l.input.map(d);break;case e.types.ASK:d(l.input);break;case e.types.BGP:l.patterns.forEach(d);break;case e.types.CONSTRUCT:d(l.input),l.template.map(d);break;case e.types.DESCRIBE:d(l.input);break;case e.types.DISTINCT:d(l.input);break;case e.types.EXPRESSION:l.expressionType===e.expressionTypes.EXISTENCE&&d(l.input);break;case e.types.EXTEND:d(l.input),d(l.expression);break;case e.types.FILTER:d(l.input),d(l.expression);break;case e.types.FROM:d(l.input);break;case e.types.GRAPH:d(l.input);break;case e.types.GROUP:d(l.input),l.aggregates.forEach(d);break;case e.types.INV:d(l.path);break;case e.types.JOIN:l.input.map(d);break;case e.types.LEFT_JOIN:l.input.map(d),l.expression&&d(l.expression);break;case e.types.LINK:break;case e.types.MINUS:l.input.map(d);break;case e.types.NOP:break;case e.types.NPS:break;case e.types.ONE_OR_MORE_PATH:d(l.path);break;case e.types.ORDER_BY:d(l.input),l.expressions.forEach(d);break;case e.types.PATH:d(l.predicate);break;case e.types.PATTERN:break;case e.types.PROJECT:d(l.input);break;case e.types.REDUCED:d(l.input);break;case e.types.SEQ:l.input.map(d);break;case e.types.SERVICE:d(l.input);break;case e.types.SLICE:d(l.input);break;case e.types.UNION:l.input.map(d);break;case e.types.VALUES:break;case e.types.ZERO_OR_MORE_PATH:d(l.path);break;case e.types.ZERO_OR_ONE_PATH:d(l.path);break;case e.types.COMPOSITE_UPDATE:l.updates.forEach(f=>d(f));break;case e.types.DELETE_INSERT:l.delete&&l.delete.forEach(f=>d(f)),l.insert&&l.insert.forEach(f=>d(f)),l.where&&d(l.where);break;case e.types.LOAD:break;case e.types.CLEAR:break;case e.types.CREATE:break;case e.types.DROP:break;case e.types.ADD:break;case e.types.MOVE:break;case e.types.COPY:break;default:throw new Error(`Unknown Operation type ${l.type}`)}}static mapOperation(i,o,l){let s=i,c=!0,d=!0;l=l||new u.default;const f=o[i.type];if(f){const g=f(i,l);s=g.result,c=g.recurse,d=g.copyMetadata!==!1}let p;if(d&&(s.metadata||i.metadata)&&(p={...s.metadata,...i.metadata}),!c)return p&&(s.metadata=p),s;let h=g=>r.mapOperation(g,o,l);switch(s.type){case e.types.ALT:s=l.createAlt(s.input.map(h));break;case e.types.ASK:s=l.createAsk(h(s.input));break;case e.types.BGP:s=l.createBgp(s.patterns.map(h));break;case e.types.CONSTRUCT:s=l.createConstruct(h(s.input),s.template.map(h));break;case e.types.DESCRIBE:s=l.createDescribe(h(s.input),s.terms);break;case e.types.DISTINCT:s=l.createDistinct(h(s.input));break;case e.types.EXPRESSION:s=r.mapExpression(s,o,l);break;case e.types.EXTEND:s=l.createExtend(h(s.input),s.variable,h(s.expression));break;case e.types.FILTER:s=l.createFilter(h(s.input),h(s.expression));break;case e.types.FROM:s=l.createFrom(h(s.input),[...s.default],[...s.named]);break;case e.types.GRAPH:s=l.createGraph(h(s.input),s.name);break;case e.types.GROUP:s=l.createGroup(h(s.input),[].concat(s.variables),s.aggregates.map(h));break;case e.types.INV:s=l.createInv(h(s.path));break;case e.types.JOIN:s=l.createJoin(s.input.map(h));break;case e.types.LEFT_JOIN:s=l.createLeftJoin(h(s.input[0]),h(s.input[1]),s.expression?h(s.expression):void 0);break;case e.types.LINK:s=l.createLink(s.iri);break;case e.types.MINUS:s=l.createMinus(h(s.input[0]),h(s.input[1]));break;case e.types.NOP:s=l.createNop();break;case e.types.NPS:s=l.createNps([].concat(s.iris));break;case e.types.ONE_OR_MORE_PATH:s=l.createOneOrMorePath(h(s.path));break;case e.types.ORDER_BY:s=l.createOrderBy(h(s.input),s.expressions.map(h));break;case e.types.PATH:s=l.createPath(s.subject,h(s.predicate),s.object,s.graph);break;case e.types.PATTERN:s=l.createPattern(s.subject,s.predicate,s.object,s.graph);break;case e.types.PROJECT:s=l.createProject(h(s.input),[...s.variables]);break;case e.types.REDUCED:s=l.createReduced(h(s.input));break;case e.types.SEQ:s=l.createSeq(s.input.map(h));break;case e.types.SERVICE:s=l.createService(h(s.input),s.name,s.silent);break;case e.types.SLICE:s=l.createSlice(h(s.input),s.start,s.length);break;case e.types.UNION:s=l.createUnion(s.input.map(h));break;case e.types.VALUES:s=l.createValues([].concat(s.variables),s.bindings.map(g=>Object.assign({},g)));break;case e.types.ZERO_OR_MORE_PATH:s=l.createZeroOrMorePath(h(s.path));break;case e.types.ZERO_OR_ONE_PATH:s=l.createZeroOrOnePath(h(s.path));break;case e.types.COMPOSITE_UPDATE:s=l.createCompositeUpdate(s.updates.map(h));break;case e.types.DELETE_INSERT:s=l.createDeleteInsert(s.delete?s.delete.map(h):void 0,s.insert?s.insert.map(h):void 0,s.where?h(s.where):void 0);break;case e.types.LOAD:s=l.createLoad(s.source,s.destination,s.silent);break;case e.types.CLEAR:s=l.createClear(s.source,s.silent);break;case e.types.CREATE:s=l.createCreate(s.source,s.silent);break;case e.types.DROP:s=l.createDrop(s.source,s.silent);break;case e.types.ADD:s=l.createAdd(s.source,s.destination);break;case e.types.MOVE:s=l.createMove(s.source,s.destination);break;case e.types.COPY:s=l.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return p&&(s.metadata=p),s}static mapExpression(i,o,l){let s=i,c=!0;l=l||new u.default;const d=o[i.expressionType];if(d&&({result:s,recurse:c}=d(i,l)),!c)return s;let f=p=>r.mapOperation(p,o,l);switch(i.expressionType){case e.expressionTypes.AGGREGATE:return i.variable?l.createBoundAggregate(i.variable,i.aggregator,f(i.expression),i.distinct,i.separator):l.createAggregateExpression(i.aggregator,f(i.expression),i.distinct,i.separator);case e.expressionTypes.EXISTENCE:return l.createExistenceExpression(i.not,f(i.input));case e.expressionTypes.NAMED:return l.createNamedExpression(i.name,i.args.map(f));case e.expressionTypes.OPERATOR:return l.createOperatorExpression(i.operator,i.args.map(f));case e.expressionTypes.TERM:return l.createTermExpression(i.term);case e.expressionTypes.WILDCARD:return l.createWildcardExpression();default:throw new Error(`Unknown Expression type ${i.expressionType}`)}}static cloneOperation(i){return r.mapOperation(i,{})}static cloneExpression(i){return r.mapExpression(i,{})}static createUniqueVariable(i,o,l){let s=0,c=i;for(;o[c];)c=`${i}${s++}`;return l.variable(c)}static isSimpleTerm(i){return i.termType!==void 0&&i.termType!=="Quad"&&i.termType!=="Wildcard"}static isQuad(i){return i.termType==="Quad"}static hasQuadVariables(i){return(0,n.someTermsNested)(i,o=>o.termType==="Variable")}static isWildcard(i){return i.termType==="Wildcard"}}return Tg.default=r,Tg}var Bme;function JLe(){if(Bme)return pu;Bme=1;var a=pu&&pu.__createBinding||(Object.create?(function(_,F,D,L){L===void 0&&(L=D);var Q=Object.getOwnPropertyDescriptor(F,D);(!Q||("get"in Q?!F.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return F[D]}}),Object.defineProperty(_,L,Q)}):(function(_,F,D,L){L===void 0&&(L=D),_[L]=F[D]})),e=pu&&pu.__setModuleDefault||(Object.create?(function(_,F){Object.defineProperty(_,"default",{enumerable:!0,value:F})}):function(_,F){_.default=F}),u=pu&&pu.__importStar||function(_){if(_&&_.__esModule)return _;var F={};if(_!=null)for(var D in _)D!=="default"&&Object.prototype.hasOwnProperty.call(_,D)&&a(F,_,D);return e(F,_),F},n=pu&&pu.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(pu,"__esModule",{value:!0});const r=v1(),t=$t(),i=u(iN()),o=n(PP()),l=n(vH()),s=$n().Parser,c=i.types;let d=new Set,f=0,p=!1,h;function g(_,F){F=F||{},h=new o.default(F.dataFactory);let D;if(m(_)){let L=new s(F);L._resetBlanks(),D=L.parse(_)}else D=_;return v(D,F.quads,F.blankToVariable)}pu.default=g;function v(_,F,D){if(d=new Set,f=0,p=!!F,!_.type)return h.createNop();if(_.type!=="query"&&_.type!=="update")throw new Error("Translate only works on complete query or update objects.");let L;if(S(_),_.type==="query"){const Q={type:"group",patterns:_.where||[]};L=j(Q),L=W(_,L)}else _.type==="update"&&(L=pe(_));return D&&(L=ee(L)),L}function m(_){return typeof _=="string"}function T(_){return!!_?.termType}function w(_){return _.subject&&_.predicate&&_.object}function E(_){return _?.termType==="Variable"}function S(_){if(T(_))E(_)&&d.add(`?${_.value}`);else if(Array.isArray(_))for(const F of _)S(F);else if(_&&typeof _=="object")for(let F of Object.keys(_))F.startsWith("?")?d.add(F):F.startsWith("$")&&d.add(`?${F.slice(1)}`),S(_[F])}function N(_){let F={};if(w(_)){const D=[N(_.subject),N(_.predicate),N(_.object),_.graph?N(_.graph):{}];Object.assign(F,...D)}else if(T(_))E(_)&&(F[_.value]=_);else if(_.type==="bgp"){const D=_.triples;Object.assign(F,...D.map(N))}else if(_.type==="path")Object.assign(F,..._.items.map(N));else if(_.type==="group"||_.type==="union"||_.type==="optional")Object.assign(F,..._.patterns.map(N));else if(_.type==="service"||_.type==="graph")Object.assign(F,N(_.name)),Object.assign(F,..._.patterns.map(N));else if(_.type==="bind")Object.assign(F,N(_.variable));else if(_.type==="values"){if(_.values.length>0){const D=Object.keys(_.values[0]).map(L=>h.createTerm(L));Object.assign(F,...D.map(N))}}else if(_.type==="query"&&(_.queryType==="SELECT"||_.queryType==="DESCRIBE")){_.where&&_.variables.some(l.default.isWildcard)&&Object.assign(F,..._.where.map(N));for(const D of _.variables)E(D)?Object.assign(F,N(D)):D.variable&&Object.assign(F,N(D.variable));if(_.queryType==="SELECT"){if(_.group)for(const D of _.group)D.variable&&Object.assign(F,N(D.variable));if(_.values){const D={type:"values",values:_.values};Object.assign(F,N(D))}}}return F}function j(_){if(_.type==="bgp")return O(_);if(_.type==="union")return h.createUnion(_.patterns.map(F=>(F.type!=="group"&&(F={type:"group",patterns:[F]}),j(F))));if(_.type==="graph"){const F={type:"group",patterns:_.patterns};let D=j(F);return p?D=V(D,_.name):D=h.createGraph(D,_.name),D}if(_.type==="values")return ae(_);if(_.type==="query")return v(_,p,!1);if(_.type==="group"){let F=[],D=[];for(let Y of _.patterns)(Y.type==="filter"?F:D).push(Y);let L=D.reduce(G,h.createBgp([])),Q=F.map(Y=>q(Y.expression));return Q.length>0&&(L=h.createFilter(L,Q.reduce((Y,$)=>h.createOperatorExpression("&&",[Y,$])))),L}throw new Error(`Unexpected type: ${_.type}`)}function q(_){if(l.default.isSimpleTerm(_))return h.createTermExpression(_);if(l.default.isQuad(_))return l.default.hasQuadVariables(_)?h.createOperatorExpression("triple",[q(_.subject),q(_.predicate),q(_.object)]):h.createTermExpression(_);if(l.default.isWildcard(_))return h.createWildcardExpression();if("aggregation"in _)return h.createAggregateExpression(_.aggregation,q(_.expression),!!_.distinct,_.separator);if("function"in _)return h.createNamedExpression(_.function,_.args.map(q));if("operator"in _)return _.operator==="exists"||_.operator==="notexists"?h.createExistenceExpression(_.operator==="notexists",j(_.args[0])):((_.operator==="in"||_.operator==="notin")&&(_.args=[_.args[0]].concat(_.args[1])),h.createOperatorExpression(_.operator,_.args.map(q)));throw new Error(`Unknown expression: ${JSON.stringify(_)}`)}function O(_){let F=[],D=[];for(let L of _.triples)if("pathType"in L.predicate){let Q=I(L);for(let Y of Q)Y.type===c.PATH?(F.length>0&&D.push(h.createBgp(F)),F=[],D.push(Y)):F.push(Y)}else F.push(B(L));return F.length>0&&D.push(h.createBgp(F)),D.length===1?D[0]:h.createJoin(D)}function I(_){let F=_.subject,D=A(_.predicate),L=_.object;return P(F,D,L)}function A(_){if(l.default.isSimpleTerm(_)){if(_.termType==="NamedNode")return h.createLink(_);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(_)}`)}if(_.pathType==="^")return h.createInv(A(_.items[0]));if(_.pathType==="!"){let F=[],D=[],L;"pathType"in _.items[0]&&_.items[0].pathType==="|"?L=_.items[0].items:L=_.items;for(let $ of L)if(l.default.isSimpleTerm($))F.push($);else if($.pathType==="^")D.push($.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify($)}`);let Q=h.createNps(F),Y=h.createInv(h.createNps(D));return D.length===0?Q:F.length===0?Y:h.createAlt([Q,Y])}if(_.pathType==="/")return h.createSeq(_.items.map(A));if(_.pathType==="|")return h.createAlt(_.items.map(A));if(_.pathType==="*")return h.createZeroOrMorePath(A(_.items[0]));if(_.pathType==="+")return h.createOneOrMorePath(A(_.items[0]));if(_.pathType==="?")return h.createZeroOrOnePath(A(_.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(_)}`)}function P(_,F,D){if(F.type===c.LINK)return[h.createPattern(_,F.iri,D)];if(F.type===c.INV)return P(D,F.path,_);if(F.type===c.SEQ){let L=_;return l.default.flatten(F.input.map((Q,Y)=>{const $=Y===F.input.length-1?D:C(),ue=P(L,Q,$);return $.termType==="Variable"&&(L=$),ue}))}return[h.createPath(_,F,D)]}function C(){let _=`?var${f++}`;return d.has(_)?C():(d.add(_),h.createTerm(_))}function B(_){if("pathType"in _.predicate)throw new Error("Trying to translate property path to quad.");return h.createPattern(_.subject,_.predicate,_.object,_.graph)}let H=Object.values(c);function V(_,F,D){if(_.type===c.GRAPH){if(D)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");_=V(_.input,_.name)}else if(_.type!==c.SERVICE)if(_.type===c.BGP)_.patterns=_.patterns.map(L=>(D&&(L.subject.equals(F)&&(L.subject=D),L.predicate.equals(F)&&(L.predicate=D),L.object.equals(F)&&(L.object=D)),L.graph.termType==="DefaultGraph"&&(L.graph=F),L));else if(_.type===c.PATH)D&&(_.subject.equals(F)&&(_.subject=D),_.object.equals(F)&&(_.object=D)),_.graph.termType==="DefaultGraph"&&(_.graph=F);else if(_.type===c.PROJECT&&!D)_.variables.some(L=>L.equals(F))||(D=C()),_.input=V(_.input,F,D);else if(_.type===c.EXTEND&&!D)_.variable.equals(F)&&(D=C()),_.input=V(_.input,F,D);else for(let L of Object.keys(_))Array.isArray(_[L])?_[L]=_[L].map(Q=>V(Q,F,D)):H.indexOf(_[L].type)>=0?_[L]=V(_[L],F,D):D&&E(_[L])&&_[L].equals(F)&&(_[L]=D);return _}function G(_,F){if(F.type==="optional"){const D=j({type:"group",patterns:F.patterns});D.type===c.FILTER?_=h.createLeftJoin(_,D.input,D.expression):_=h.createLeftJoin(_,D)}else if(F.type==="minus"){const D=j({type:"group",patterns:F.patterns});_=h.createMinus(_,D)}else if(F.type==="bind")_=h.createExtend(_,F.variable,q(F.expression));else if(F.type==="service"){const D={type:"group",patterns:F.patterns},L=h.createService(j(D),F.name,F.silent);_=Z(_,L)}else{const D=j(F);_=Z(_,D)}return _}function Z(_,F){return _.type===c.BGP&&F.type===c.BGP?_=h.createBgp([..._.patterns,...F.patterns]):_.type===c.BGP&&_.patterns.length===0?_=F:F.type===c.BGP&&F.patterns.length===0||(_=h.createJoin([_,F])),_}function ae(_){let F=(_.values.length===0?[]:Object.keys(_.values[0])).map(h.createTerm.bind(h)),D=_.values.map(L=>{let Q=Object.keys(L);Q=Q.filter($=>L[$]!==void 0);let Y={};for(let $ of Q)Y[$]=L[$];return Y});return h.createValues(F,D)}function W(_,F){const D=_,L=[],Q={};if(D.variables=D.variables&&D.variables.map($=>te($,Q)),D.having=D.having&&D.having.map($=>te($,Q)),D.order=D.order&&D.order.map($=>te($,Q)),D.group||Object.keys(Q).length>0){const $=Object.keys(Q).map(ne=>se(Q[ne],h.createTerm(ne))),ue=[];if(D.group)for(const ne of D.group)if(l.default.isSimpleTerm(ne.expression))ue.push(ne.expression);else{const ce="variable"in ne?ne.variable:C();F=h.createExtend(F,ce,q(ne.expression)),ue.push(ce)}F=h.createGroup(F,ue,$)}if(D.having)for(let $ of D.having)F=h.createFilter(F,q($));_.values&&(F=h.createJoin([F,ae(_)]));let Y=[];if(_.queryType==="SELECT"||_.queryType==="DESCRIBE")if(_.variables.some($=>$&&l.default.isWildcard($)))Y=Object.values(N(_)).sort(($,ue)=>$.value.localeCompare(ue.value));else for(let $ of _.variables)E($)||!("variable"in $)?Y.push($):$.variable&&(Y.push($.variable),L.push($));for(let $ of L)F=h.createExtend(F,$.variable,q($.expression));return D.order&&(F=h.createOrderBy(F,D.order.map($=>{let ue=q($.expression);return $.descending&&(ue=h.createOperatorExpression("desc",[ue])),ue}))),_.queryType==="SELECT"&&(F=h.createProject(F,Y)),D.distinct&&(F=h.createDistinct(F)),D.reduced&&(F=h.createReduced(F)),_.queryType==="CONSTRUCT"?F=h.createConstruct(F,(_.template||[]).map(B)):_.queryType==="ASK"?F=h.createAsk(F):_.queryType==="DESCRIBE"&&(F=h.createDescribe(F,Y)),(D.offset||D.limit)&&(F=h.createSlice(F,D.offset||0,D.limit)),D.from&&(F=h.createFrom(F,D.from.default,D.from.named)),F}function te(_,F){if("type"in _&&_.type==="aggregate"){let D=!1,L;for(let Q of Object.keys(F))if(r(F[Q],_)){L=h.createTerm(Q),D=!0;break}return D||(L=C(),F[(0,t.termToString)(L)]=_),L}return"expression"in _&&_.expression?{..._,expression:te(_.expression,F)}:"args"in _&&_.args?{..._,args:_.args.map(D=>te(D,F))}:_}function se(_,F){if(_.type!=="aggregate"||!_.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(_)}`);const D=q(_);return D.variable=F,D}function pe(_){return _.updates.length===1?le(_.updates[0]):h.createCompositeUpdate(_.updates.map(le))}function le(_){if("type"in _){if(_.type==="load")return Ae(_);if(_.type==="clear"||_.type==="create"||_.type==="drop")return Ie(_);if(_.type==="add"||_.type==="copy"||_.type==="move")return be(_)}else if(_.updateType==="insertdelete"||_.updateType==="deletewhere"||_.updateType==="delete"||_.updateType==="insert")return Ee(_);throw new Error(`Unknown update type ${JSON.stringify(_)}`)}function Ee(_){if(!p)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let F=[],D=[],L;if(_.delete&&(F=l.default.flatten(_.delete.map(Q=>Oe(Q,_.graph)))),_.insert&&(D=l.default.flatten(_.insert.map(Q=>Oe(Q,_.graph)))),_.where&&_.where.length>0){L=j({type:"group",patterns:_.where});const Q=_.using;Q?L=h.createFrom(L,Q.default,Q.named):_.graph&&(L=V(L,_.graph))}else _.updateType==="deletewhere"&&F.length>0&&(L=h.createBgp(F));return h.createDeleteInsert(F.length>0?F:void 0,D.length>0?D:void 0,L)}function Oe(_,F){let D=F;_.type==="graph"&&(D=_.name);let L=_.triples;return D&&(L=L.map(Q=>Object.assign(Q,{graph:D}))),L.map(B)}function Ie(_){let F;switch(l.default.isSimpleTerm(_.graph)?F=_.graph:_.graph.all?F="ALL":_.graph.default?F="DEFAULT":_.graph.named?F="NAMED":F=_.graph.name,_.type){case"clear":return h.createClear(F,_.silent);case"create":return h.createCreate(F,_.silent);case"drop":return h.createDrop(F,_.silent)}}function Ae(_){return h.createLoad(_.source,_.destination,_.silent)}function be(_){const F=_.source.default?"DEFAULT":_.source.name,D=_.destination.default?"DEFAULT":_.destination.name;switch(_.type){case"copy":return h.createCopy(F,D,_.silent);case"move":return h.createMove(F,D,_.silent);case"add":return h.createAdd(F,D,_.silent)}}function ee(_){const F={},D=Array.from(d).reduce((Q,Y)=>(Q[Y]=!0,Q),{});return l.default.mapOperation(_,{[i.types.DELETE_INSERT]:Q=>({result:h.createDeleteInsert(Q.delete,Q.insert,Q.where&&ee(Q.where)),recurse:!1}),[i.types.PATH]:(Q,Y)=>({result:Y.createPath(L(Q.subject),Q.predicate,L(Q.object),L(Q.graph)),recurse:!1}),[i.types.PATTERN]:(Q,Y)=>({result:Y.createPattern(L(Q.subject),L(Q.predicate),L(Q.object),L(Q.graph)),recurse:!1}),[i.types.CONSTRUCT]:Q=>({result:h.createConstruct(ee(Q.input),Q.template),recurse:!1})});function L(Q){if(Q.termType==="BlankNode"){let Y=F[Q.value];return Y||(Y=l.default.createUniqueVariable(Q.value,D,h.dataFactory),D[Y.value]=!0,F[Q.value]=Y),Y}return Q}}return pu}var Ka={},Sm={},ur={},Ume;function WLe(){if(Ume)return ur;Ume=1,Object.defineProperty(ur,"__esModule",{value:!0}),ur.isTermGrounded=ur.termToSignature=ur.quadToSignature=ur.sha1hex=ur.hashTerm=ur.hashTerms=ur.getGraphBlankNodes=ur.uniqGraph=ur.deindexGraph=ur.indexGraph=ur.getQuadsWithoutBlankNodes=ur.getQuadsWithBlankNodes=ur.hasValue=ur.hashValues=ur.getBijectionInner=ur.getBijection=ur.isomorphic=void 0;const a=ic(),e=$t(),u=Yr();function n(S,N){return!!r(S,N)}ur.isomorphic=n;function r(S,N){const j=d(c(S)),q=d(c(N));if(Object.keys(j).length!==Object.keys(q).length)return null;for(const C in j)if(j[C]!==q[C])return null;const O=p(s(S)),I=p(s(N)),A=h(S),P=h(N);return t(O,I,A,P)}ur.getBijection=r;function t(S,N,j,q,O,I){O||(O={}),I||(I={});const[A,P]=g(S,j,O),[C,B]=g(N,q,I);if(Object.keys(A).length!==Object.keys(C).length)return null;for(const V in A)if(!l(C,A[V]))return null;let H={};for(const V of j){const G=e.termToString(V),Z=P[G];for(const ae in B)if(B[ae]===Z){H[G]=ae,delete B[ae];break}}if(!i(Object.keys(H).sort(),j.map(e.termToString).sort())||!i(o(H).sort(),q.map(e.termToString).sort())){H=null;for(const V of j){const G=e.termToString(V);if(!A[G])for(const Z of q){const ae=e.termToString(Z);if(!C[ae]&&P[G]===B[ae]){const W=m(G);H=t(S,N,j,q,Object.assign(Object.assign({},A),{[G]:W}),Object.assign(Object.assign({},C),{[ae]:W}))}}}}return H}ur.getBijectionInner=t;function i(S,N){if(S.length!==N.length)return!1;for(let j=S.length;j--;)if(S[j]!==N[j])return!1;return!0}function o(S){const N=[];for(const j in S)N.push(S[j]);return N}ur.hashValues=o;function l(S,N){for(const j in S)if(S[j]===N)return!0;return!1}ur.hasValue=l;function s(S){return S.filter(N=>u.someTerms(N,j=>j.termType==="BlankNode"||j.termType==="Quad"&&u.getTermsNested(j).some(q=>q.termType==="BlankNode")))}ur.getQuadsWithBlankNodes=s;function c(S){return S.filter(N=>u.everyTerms(N,j=>j.termType!=="BlankNode"&&!(j.termType==="Quad"&&u.getTermsNested(j).some(q=>q.termType==="BlankNode"))))}ur.getQuadsWithoutBlankNodes=c;function d(S){const N={};for(const j of S)N[JSON.stringify(e.quadToStringQuad(j))]=!0;return N}ur.indexGraph=d;function f(S){return Object.keys(S).map(N=>e.stringQuadToQuad(JSON.parse(N)))}ur.deindexGraph=f;function p(S){return f(d(S))}ur.uniqGraph=p;function h(S){return u.uniqTerms(S.map(N=>u.getBlankNodes(u.getTermsNested(N))).reduce((N,j)=>N.concat(j),[]))}ur.getGraphBlankNodes=h;function g(S,N,j){const q=Object.assign({},j),O={};let I=!0;for(;I;){const A=Object.keys(q).length;for(const C of N){const B=e.termToString(C);if(!q[B]){const[H,V]=v(C,S,q);H&&(q[B]=V),O[B]=V}}const P={};for(const C in O){const B=O[C];P[B]===void 0?P[B]=C:P[B]=!1}for(const C in P){const B=P[C];B&&(q[B]=C)}I=A!==Object.keys(q).length}return[q,O]}ur.hashTerms=g;function v(S,N,j){const q=[];let O=!0;for(const A of N){const P=u.getTermsNested(A);if(P.some(C=>C.equals(S))){q.push(T(A,j,S));for(const C of P)!E(C,j)&&!C.equals(S)&&(O=!1)}}const I=m(q.sort().join(""));return[O,I]}ur.hashTerm=v;function m(S){return a.sha1().update(S).digest("hex")}ur.sha1hex=m;function T(S,N,j){return u.getTerms(S).map(q=>w(q,N,j)).join("|")}ur.quadToSignature=T;function w(S,N,j){return S.equals(j)?"@self":S.termType==="BlankNode"?N[e.termToString(S)]||"@blank":S.termType==="Quad"?`<${T(S,N,j)}>`:e.termToString(S)}ur.termToSignature=w;function E(S,N){return S.termType!=="BlankNode"&&!(S.termType==="Quad"&&u.getTermsNested(S).some(j=>!E(j,N)))||!!N[e.termToString(S)]}return ur.isTermGrounded=E,ur}var Qme;function YLe(){return Qme||(Qme=1,(function(a){var e=Sm&&Sm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t),Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[t]}})}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Sm&&Sm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(WLe(),a)})(Sm)),Sm}var Vme;function ZLe(){if(Vme)return Ka;Vme=1;var a=Ka&&Ka.__createBinding||(Object.create?(function(R,k,K,de){de===void 0&&(de=K);var ge=Object.getOwnPropertyDescriptor(k,K);(!ge||("get"in ge?!k.__esModule:ge.writable||ge.configurable))&&(ge={enumerable:!0,get:function(){return k[K]}}),Object.defineProperty(R,de,ge)}):(function(R,k,K,de){de===void 0&&(de=K),R[de]=k[K]})),e=Ka&&Ka.__setModuleDefault||(Object.create?(function(R,k){Object.defineProperty(R,"default",{enumerable:!0,value:k})}):function(R,k){R.default=k}),u=Ka&&Ka.__importStar||function(R){if(R&&R.__esModule)return R;var k={};if(R!=null)for(var K in R)K!=="default"&&Object.prototype.hasOwnProperty.call(R,K)&&a(k,R,K);return e(k,R),k},n=Ka&&Ka.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(Ka,"__esModule",{value:!0}),Ka.toSparqlJs=Ka.toSparql=void 0;const r=YLe(),t=$t(),i=$n(),o=u(iN()),l=n(PP()),s=n(vH()),c=o.types,d=o.expressionTypes;let f;const p=new l.default;function h(R,k={}){return new i.Generator(k).stringify(g(R))}Ka.toSparql=h;function g(R){v(),R=Le(R);let k=m(R);return k.type==="group"?k.patterns[0]:k}Ka.toSparqlJs=g;function v(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function m(R){switch(R.type!==c.EXTEND&&R.type!==c.ORDER_BY&&R.type!==c.GRAPH&&(f.project=!1),R.type){case c.EXPRESSION:return T(R);case c.ASK:return Ae(R,c.ASK);case c.BGP:return C(R);case c.CONSTRUCT:return B(R);case c.DESCRIBE:return Ae(R,c.DESCRIBE);case c.DISTINCT:return H(R);case c.EXTEND:return V(R);case c.FROM:return G(R);case c.FILTER:return Z(R);case c.GRAPH:return ae(R);case c.GROUP:return W(R);case c.JOIN:return te(R);case c.LEFT_JOIN:return se(R);case c.MINUS:return pe(R);case c.NOP:return{};case c.ORDER_BY:return le(R);case c.PATH:return Ee(R);case c.PATTERN:return Oe(R);case c.PROJECT:return Ae(R,c.PROJECT);case c.REDUCED:return ee(R);case c.SERVICE:return _(R);case c.SLICE:return F(R);case c.UNION:return D(R);case c.VALUES:return L(R);case c.COMPOSITE_UPDATE:return Ce(R);case c.DELETE_INSERT:return Ve(R);case c.LOAD:return Ke(R);case c.CLEAR:return Ye(R);case c.CREATE:return oe(R);case c.DROP:return X(R);case c.ADD:return he(R);case c.MOVE:return ve(R);case c.COPY:return ye(R)}throw new Error(`Unknown Operation type ${R.type}`)}function T(R){switch(R.expressionType){case d.AGGREGATE:return S(R);case d.EXISTENCE:return N(R);case d.NAMED:return j(R);case d.OPERATOR:return q(R);case d.TERM:return O(R);case d.WILDCARD:return I(R)}throw new Error(`Unknown Expression Operation type ${R.expressionType}`)}function w(R){switch(R.type){case c.ALT:return Q(R);case c.INV:return Y(R);case c.LINK:return $(R);case c.NPS:return ue(R);case c.ONE_OR_MORE_PATH:return ne(R);case c.SEQ:return ce(R);case c.ZERO_OR_MORE_PATH:return Se(R);case c.ZERO_OR_ONE_PATH:return xe(R)}throw new Error(`Unknown Path type ${R.type}`)}function E(R){return(0,t.termToString)(R)}function S(R){const k={expression:T(R.expression),type:"aggregate",aggregation:R.aggregator,distinct:R.distinct};return R.separator&&(k.separator=R.separator),k}function N(R){return{type:"operation",operator:R.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([m(R.input)])}]}}function j(R){return{type:"functionCall",function:R.name,args:R.args.map(T)}}function q(R){if(R.operator==="desc"){const K={expression:T(R.args[0])};return K.descending=!0,K}const k={type:"operation",operator:R.operator,args:R.args.map(T)};return(k.operator==="in"||k.operator==="notin")&&(k.args=[k.args[0]].concat([k.args.slice(1)])),k}function O(R){return R.term}function I(R){return R.wildcard}function A(R){return Array.isArray(R)?R.length===1?R[0]:{type:"group",patterns:R}:R}function P(R){return R}function C(R){let k=R.patterns.map(Oe);return k.length===0?null:{type:"bgp",triples:k}}function B(R){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:R.template.map(Oe),where:s.default.flatten([m(R.input)])}}function H(R){let k=m(R.input);return k.patterns[0].distinct=!0,k}function V(R){return f.project?(f.extend.push(R),m(R.input)):s.default.flatten([m(R.input),{type:"bind",variable:R.variable,expression:T(R.expression)}])}function G(R){const k=m(R.input);let K=k;return k.type==="group"&&(K=k.patterns[0]),K.from={default:R.default,named:R.named},k}function Z(R){return{type:"group",patterns:s.default.flatten([m(R.input),{type:"filter",expression:T(R.expression)}])}}function ae(R){return{type:"graph",patterns:s.default.flatten([m(R.input)]),name:R.name}}function W(R){const k=m(R.input),K=R.aggregates.map(P);return f.aggregates.push(...K),f.group.push(...R.variables),k}function te(R){return s.default.flatten(R.input.map(m)).reduce((K,de)=>(de.type!=="bgp"||K.length==0||K[K.length-1].type!=="bgp"?K.push(de):K[K.length-1].triples.push(...de.triples),K),[])}function se(R){const k={type:"optional",patterns:[m(R.input[1])]};return R.expression&&k.patterns.push({type:"filter",expression:T(R.expression)}),k.patterns=s.default.flatten(k.patterns),s.default.flatten([m(R.input[0]),k])}function pe(R){let k=m(R.input[1]);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),s.default.flatten([m(R.input[0]),{type:"minus",patterns:k}])}function le(R){return f.order.push(...R.expressions),m(R.input)}function Ee(R){return{type:"bgp",triples:[{subject:R.subject,predicate:w(R.predicate),object:R.object}]}}function Oe(R){return{subject:R.subject,predicate:R.predicate,object:R.object}}function Ie(R,k){let K=s.default.isSimpleTerm(R)?E(R):R;if(typeof K=="string"){if(k[K])return k[K]}else if(Array.isArray(R))R=R.map(de=>Ie(de,k));else for(let de of Object.keys(R))R[de]=Ie(R[de],k);return R}function Ae(R,k){const K={type:"query",prefixes:{}},de=K;let ge;k===c.PROJECT?(K.queryType="SELECT",ge=R.variables):k===c.ASK?K.queryType="ASK":k===c.DESCRIBE&&(K.queryType="DESCRIBE",ge=R.terms);const Ue=f.extend,je=f.group,ze=f.aggregates,at=f.order;v(),f.project=!0;let fe=s.default.flatten([m(R.input)]);fe.length===1&&fe[0].type==="group"&&(fe=fe[0].patterns),K.where=fe;let Te={};for(let Me of f.aggregates)Te[E(Me.variable)]=T(Me);let qe={};for(let Me=f.extend.length-1;Me>=0;--Me){let st=f.extend[Me];qe[E(st.variable)]=Ie(T(st.expression),Te)}f.group.length>0&&(de.group=f.group.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return{expression:Me}})),f.order.length>0&&(de.order=f.order.map(m).map(Me=>Me.descending?Me:{expression:Me})),ge&&(de.variables=ge.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return Me}),de.variables.length===0&&(de.variables=[new i.Wildcard]));const it=Object.entries(qe);if(it.length>0){de.where=de.where||[];for(const[Me,st]of it)de.where.push({type:"bind",variable:(0,t.stringToTerm)(Me),expression:st})}if(K.where.length>0&&K.where[K.where.length-1].type==="filter"){const Me=K.where[K.where.length-1];be(Me,Object.keys(Te))&&(de.having=s.default.flatten([Ie(Me.expression,Te)]),K.where.splice(-1))}return f.extend=Ue,f.group=je,f.aggregates=ze,f.order=at,{type:"group",patterns:[de]}}function be(R,k){return s.default.isSimpleTerm(R)?k.indexOf(E(R))>=0:Array.isArray(R)?R.some(K=>be(K,k)):R===Object(R)?Object.keys(R).some(K=>be(R[K],k)):k.indexOf(R)>=0}function ee(R){let k=m(R.input);return k.patterns[0].reduced=!0,k}function _(R){let k=m(R.input);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),{type:"service",name:R.name,silent:R.silent,patterns:k}}function F(R){let k=m(R.input),K=k;return k.type&&k.type==="group"&&(K=k.patterns[0]),R.start!==0&&(K.offset=R.start),R.length!==void 0&&(K.limit=R.length),k}function D(R){return{type:"union",patterns:R.input.map(m).map(A)}}function L(R){return{type:"values",values:R.bindings.map(k=>{let K={};for(let de of R.variables){let ge=`?${de.value}`;k[ge]?K[ge]=k[ge]:K[ge]=void 0}return K})}}function Q(R){const k=R.input.map(w);return k.every(K=>"pathType"in K&&K.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(k.map(K=>K.items))}]}:{type:"path",pathType:"|",items:k}}function Y(R){if(R.path.type===c.NPS){const k=R.path.iris.map(K=>({type:"path",pathType:"^",items:[K]}));return k.length<=1?{type:"path",pathType:"!",items:k}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:k}]}}return{type:"path",pathType:"^",items:[w(R.path)]}}function $(R){return R.iri}function ue(R){return R.iris.length<=1?{type:"path",pathType:"!",items:R.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:R.iris}]}}function ne(R){return{type:"path",pathType:"+",items:[w(R.path)]}}function ce(R){return{type:"path",pathType:"/",items:R.input.map(w)}}function Se(R){return{type:"path",pathType:"*",items:[w(R.path)]}}function xe(R){return{type:"path",pathType:"?",items:[w(R.path)]}}function Ce(R){const k=R.updates.map(K=>m(K).updates[0]);return{prefixes:{},type:"update",updates:k}}function Ve(R){var k;let K=R.where,de;if(K&&K.type===c.FROM){let Ue=K;K=Ue.input,de={default:Ue.default,named:Ue.named}}const ge=[{updateType:"insertdelete",delete:Ne(R.delete||[]),insert:Ne(R.insert||[])}];if(de&&(ge[0].using=de),!K||K.type===c.BGP&&K.patterns.length===0)ge[0].where=[];else{const Ue=[];let je=m(Pe(K,Ue));if(je.type==="group"?ge[0].where=je.patterns:ge[0].where=[je],Ue.length>0){if(Ue.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((k=Ue[0])===null||k===void 0?void 0:k.value)!==""&&(ge[0].where=[{type:"graph",patterns:ge[0].where,name:Ue[0]}])}}return!R.delete&&!R.where?(ge[0].updateType="insert",delete ge[0].delete,delete ge[0].where):!R.insert&&!R.where?(delete ge[0].insert,delete ge[0].where,R.delete.some(Ue=>Ue.subject.termType==="Variable"||Ue.predicate.termType==="Variable"||Ue.object.termType==="Variable")?ge[0].updateType="deletewhere":ge[0].updateType="delete"):!R.insert&&R.where&&R.where.type==="bgp"&&(0,r.isomorphic)(R.delete,R.where.patterns)&&(delete ge[0].where,ge[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:ge}}function Ke(R){const k=[{type:"load",silent:!!R.silent,source:R.source}];return R.destination&&(k[0].destination=R.destination),{prefixes:{},type:"update",updates:k}}function Ye(R){return J(R,"clear")}function oe(R){return J(R,"create")}function X(R){return J(R,"drop")}function J(R,k){const K=[{type:k,silent:!!R.silent}];return R.source==="DEFAULT"?K[0].graph={default:!0}:R.source==="NAMED"?K[0].graph={named:!0}:R.source==="ALL"?K[0].graph={all:!0}:K[0].graph={type:"graph",name:R.source},{prefixes:{},type:"update",updates:K}}function he(R){return re(R,"add")}function ve(R){return re(R,"move")}function ye(R){return re(R,"copy")}function re(R,k){const K=[{type:k,silent:!!R.silent}];return K[0].source=R.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.source},K[0].destination=R.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.destination},{prefixes:{},type:"update",updates:K}}function Ne(R){if(!R)return[];const k={};return R.forEach(K=>{const de=K.graph.value;k[de]||(k[de]=[]),k[de].push(K)}),Object.keys(k).map(K=>K===""?{type:"bgp",triples:k[K].map(Oe)}:{type:"graph",triples:k[K].map(Oe),name:k[K][0].graph})}function Le(R){return Pe(R,[])}function Pe(R,k){if(Array.isArray(R))return R.map(je=>Pe(je,k));if(!R.type||R.type===c.DELETE_INSERT)return R;if((R.type===c.PATTERN||R.type===c.PATH)&&R.graph)return k.push(R.graph),R.graph.name!==""?R.type===c.PATTERN?p.createPattern(R.subject,R.predicate,R.object):p.createPath(R.subject,R.predicate,R.object):R;const K={},de={},ge={};for(let je of Object.keys(R)){const ze=[];if(K[je]=Pe(R[je],ze),ze.length>0){de[je]=ze;for(const at of ze)ge[at.value]=at}}const Ue=Object.keys(ge);if(Ue.length>0)if(Ue.length===1&&![c.PROJECT,c.SERVICE].includes(R.type))k.push(ge[Ue[0]]);else{if(R.type===c.BGP)return Fe(R,de.patterns);for(let je of Object.keys(de)){const ze=K[je];Array.isArray(ze)?K[je]=ze.map((at,fe)=>de[je][0].value===""?at:p.createGraph(at,de[je][fe])):de[je][0].value!==""&&(K[je]=p.createGraph(ze,de[je][0]))}}return K}function Fe(R,k){var K;const de={};for(let je=0;je<R.patterns.length;++je){const ze=R.patterns[je],at=k[je].value;de[at]=(K=de[at])!==null&&K!==void 0?K:{patterns:[],graph:k[je]},de[at].patterns.push(ze)}let ge=[];for(const[je,{patterns:ze,graph:at}]of Object.entries(de)){const fe=p.createBgp(ze);ge.push(je===""?fe:p.createGraph(fe,at))}let Ue=ge[0];for(let je=1;je<ge.length;++je)Ue=p.createJoin([Ue,ge[je]]);return Ue}return Ka}var Hme;function e7e(){return Hme||(Hme=1,(function(a){var e=io&&io.__createBinding||(Object.create?(function(c,d,f,p){p===void 0&&(p=f);var h=Object.getOwnPropertyDescriptor(d,f);(!h||("get"in h?!d.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(c,p,h)}):(function(c,d,f,p){p===void 0&&(p=f),c[p]=d[f]})),u=io&&io.__setModuleDefault||(Object.create?(function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}):function(c,d){c.default=d}),n=io&&io.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&e(d,c,f);return u(d,c),d},r=io&&io.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.toSparqlJs=a.toSparql=a.Factory=a.Algebra=a.translate=void 0;const t=r(JLe());a.translate=t.default;const i=n(iN());a.Algebra=i;const o=r(PP());a.Factory=o.default;const l=ZLe();Object.defineProperty(a,"toSparql",{enumerable:!0,get:function(){return l.toSparql}}),Object.defineProperty(a,"toSparqlJs",{enumerable:!0,get:function(){return l.toSparqlJs}});const s=r(vH());a.Util=s.default})(io)),io}var kme;function t7e(){if(kme)return $R;kme=1,Object.defineProperty($R,"__esModule",{value:!0}),$R.ActorExtractLinksSolidTypeIndex=void 0;const a=Tb(),e=aP(),u=lt(),n=CLe(),r=De(),t=KLe(),i=$t(),o=e7e();let l=class m7 extends e.ActorExtractLinks{constructor(c){super(c),this.queryEngine=new a.QueryEngineBase(c.actorInitQuery)}async test(c){return c.context.get(u.KeysInitQuery.query)?(0,r.passTestVoid)():(0,r.failTest)(`Actor ${this.name} can only work in the context of a query.`)}async run(c){const d=[...await this.extractTypeIndexLinks(c.metadata)],f=(await Promise.all(d.map(h=>this.dereferenceTypeIndex(h,c.context)))).reduce((h,g)=>{for(const[v,m]of Object.entries(g))h[v]||(h[v]=[]),h[v].push(...m);return h},{});if(Object.keys(f).length===0)return{links:[]};if(this.onlyMatchingTypes)return{links:await this.getLinksMatchingQuery(f,c.context.get(u.KeysInitQuery.query))};const p=[];for(const h of Object.values(f))p.push(...h);return{links:p}}extractTypeIndexLinks(c){return new Promise((d,f)=>{const p=new Set;c.on("error",f),c.on("data",h=>{this.typeIndexPredicates.includes(h.predicate.value)&&p.add(h.object.value)}),c.on("end",()=>{d(p)})})}async dereferenceTypeIndex(c,d){const f=await this.mediatorDereferenceRdf.mediate({url:c,context:d}),p=await(0,t.storeStream)(f.data),h=await(await this.queryEngine.queryBindings(`
        PREFIX solid: <http://www.w3.org/ns/solid/terms#>
        SELECT ?class ?instance WHERE {
          _:registration a solid:TypeRegistration;
            solid:forClass ?class;
            (solid:instance|solid:instanceContainer) ?instance.
        }`,{sources:[p],[u.KeysQuerySourceIdentify.traverse.name]:!1,[n.KeysRdfJoin.skipAdaptiveJoin.name]:!0,lenient:!0})).toArray(),g={};for(const v of h){const m=v.get("class").value;g[m]||(g[m]=[]),g[m].push({url:v.get("instance").value,metadata:{producedByActor:{name:this.name,onlyMatchingTypes:this.onlyMatchingTypes,inference:this.inference}}})}return g}async linkPredicateDomains(c,d){if(Object.keys(c).length>0){const f=await Promise.all(Object.keys(c).map(async h=>[h,await this.fetchPredicateDomains(h)])),p=Object.fromEntries(f);for(const[h,g]of Object.entries(c)){const v=p[h];if(v)for(const m of v)d[m]||(d[m]=[]),d[m].push(g)}}}async fetchPredicateDomains(c){const f=await(await this.queryEngine.queryBindings(`
        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
        SELECT * WHERE {
          <${c}> rdfs:domain ?domain.
        }`,{sources:[c],[u.KeysQuerySourceIdentify.traverse.name]:!1,[n.KeysRdfJoin.skipAdaptiveJoin.name]:!0,lenient:!0})).toArray(),p=[];for(const h of f)p.push(h.get("domain").value);return p}async getLinksMatchingQuery(c,d){const f=new Set,p={},h={};function g(m,T,w){if(["NamedNode","Literal","BlankNode"].includes(m.termType)&&f.add((0,i.termToString)(m)),T.value===m7.RDF_TYPE&&w.termType==="NamedNode"){const E=w.value;p[E]||(p[E]=[]),p[E].push(m)}T.value!==m7.RDF_TYPE&&(h[T.value]=m)}o.Util.recurseOperation(d,{pattern(m){return g(m.subject,m.predicate,m.object),!1},path(m){return o.Util.recurseOperation(m,{link(T){return g(m.subject,T.iri,m.object),!1},nps(T){for(const w of T.iris)g(m.subject,w,m.object);return!1}}),!1}}),this.inference&&await this.linkPredicateDomains(h,p);const v=[];for(const[m,T]of Object.entries(p)){const w=c[m];w&&v.push(...w);for(const E of T)f.delete((0,i.termToString)(E))}return f.size>0?Object.values(c).flat():v}};return $R.ActorExtractLinksSolidTypeIndex=l,l.RDF_TYPE="http://www.w3.org/1999/02/22-rdf-syntax-ns#type",$R}var zme;function _H(){return zme||(zme=1,(function(a){var e=_m&&_m.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=_m&&_m.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(t7e(),a)})(_m)),_m}var Em={},l6={},Gme;function r7e(){if(Gme)return l6;Gme=1,Object.defineProperty(l6,"__esModule",{value:!0}),l6.ActorQueryProcessExplainParsed=void 0;const a=DP(),e=lt(),u=De();let n=class extends a.ActorQueryProcess{constructor(t){super(t)}async test(t){return(t.context.get(e.KeysInitQuery.explain)??t.context.get(new u.ActionContextKey("explain")))!=="parsed"?(0,u.failTest)(`${this.name} can only explain in 'parsed' mode.`):(0,u.passTestVoid)()}async run(t){const{operation:i}=await this.queryProcessor.parse(t.query,t.context);return{result:{explain:!0,type:"parsed",data:i}}}};return l6.ActorQueryProcessExplainParsed=n,l6}var $me;function TH(){return $me||($me=1,(function(a){var e=Em&&Em.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Em&&Em.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(r7e(),a)})(Em)),Em}var Am={},d6={},Xme;function n7e(){if(Xme)return d6;Xme=1,Object.defineProperty(d6,"__esModule",{value:!0}),d6.ActorQueryProcessExplainLogical=void 0;const a=DP(),e=lt(),u=De();let n=class extends a.ActorQueryProcess{constructor(t){super(t)}async test(t){return(t.context.get(e.KeysInitQuery.explain)??t.context.get(new u.ActionContextKey("explain")))!=="logical"?(0,u.failTest)(`${this.name} can only explain in 'logical' mode.`):(0,u.passTestVoid)()}async run(t){let{operation:i,context:o}=await this.queryProcessor.parse(t.query,t.context);return{operation:i,context:o}=await this.queryProcessor.optimize(i,o),{result:{explain:!0,type:"logical",data:i}}}};return d6.ActorQueryProcessExplainLogical=n,d6}var Kme;function wH(){return Kme||(Kme=1,(function(a){var e=Am&&Am.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Am&&Am.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(n7e(),a)})(Am)),Am}var Om={},f6={},xm={},Jme;function Nwe(){if(Jme)return xm;Jme=1,Object.defineProperty(xm,"__esModule",{value:!0}),xm.numberToString=xm.MemoryPhysicalQueryPlanLogger=void 0;const a=$t();let e=class{constructor(){this.planNodes=new Map}logOperation(r,t,i,o,l,s){const c={actor:l,logicalOperator:r,physicalOperator:t,rawNode:i,children:[],metadata:s};if(this.planNodes.set(i,c),this.rootNode){if(!o)throw new Error("Detected more than one parent-less node");const d=this.planNodes.get(o);if(!d)throw new Error("Could not find parent node");d.children.push(c)}else{if(o)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=c}}stashChildren(r,t){const i=this.planNodes.get(r);if(!i)throw new Error("Could not find plan node");i.children=t?i.children.filter(t):[]}unstashChild(r,t){const i=this.planNodes.get(r);if(i){const o=this.planNodes.get(t);if(!o)throw new Error("Could not find plan parent node");o.children.push(i)}}appendMetadata(r,t){const i=this.planNodes.get(r);i&&(i.metadata={...i.metadata,...t})}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(r){const t={logical:r.logicalOperator,physical:r.physicalOperator,...this.getLogicalMetadata(r.rawNode),...this.compactMetadata(r.metadata)};if(r.children.length>0&&(t.children=r.children.map(i=>this.planNodeToJson(i))),t.physical==="bind"&&t.children){const i={};for(const l of t.children){const s=l.children?.at(-1)??l,c=this.getPlanHash(s).join(",");i[c]||(i[c]=[]),i[c].push(l)}const o=[];for(const l of Object.values(i))o.push({occurrences:l.length,firstOccurrence:l[0]});t.childrenCompact=o,delete t.children}return t}getPlanHash(r){let t=[`${r.logical}-${r.physical}`];return r.children?t=[...t,...r.children.flatMap(i=>this.getPlanHash(i))]:r.childrenCompact&&(t=[...t,...r.childrenCompact.flatMap(i=>this.getPlanHash(i.firstOccurrence))]),t}compactMetadata(r){return Object.fromEntries(Object.entries(r).map(([t,i])=>[t,this.compactMetadataValue(i)]))}compactMetadataValue(r){return r&&typeof r=="object"&&"termType"in r?this.getLogicalMetadata(r):r}getLogicalMetadata(r){const t={};if("type"in r){const i=r;switch(i.metadata?.scopedSource&&(t.source=i.metadata.scopedSource.source.toString()),i.type){case"pattern":t.pattern=this.quadToString(i);break;case"project":t.variables=i.variables.map(o=>o.value);break}}return t}quadToString(r){return`${(0,a.termToString)(r.subject)} ${(0,a.termToString)(r.predicate)} ${(0,a.termToString)(r.object)}${r.graph.termType==="DefaultGraph"?"":` ${(0,a.termToString)(r.graph)}`}`}toCompactString(){const r=this.toJson(),t=[],i=new Map;if("logical"in r?this.nodeToCompactString(t,i,"",r):t.push("Empty"),i.size>0){t.push(""),t.push("sources:");for(const[o,l]of i.entries())t.push(`  ${l}: ${o}`)}return t.join(`
`)}nodeToCompactString(r,t,i,o,l){let s;o.source&&(s=t.get(o.source),s===void 0&&(s=t.size,t.set(o.source,s))),r.push(`${i}${o.logical}${o.physical?`(${o.physical})`:""}${o.pattern?` (${o.pattern})`:""}${o.variables?` (${o.variables.join(",")})`:""}${o.bindOperation?` bindOperation:(${o.bindOperation.pattern}) bindCardEst:${o.bindOperationCardinality.type==="estimate"?"~":""}${u(o.bindOperationCardinality.value)}`:""}${o.cardinality?` cardEst:${o.cardinality.type==="estimate"?"~":""}${u(o.cardinality.value)}`:""}${o.source?` src:${s}`:""}${o.cardinalityReal?` cardReal:${o.cardinalityReal}`:""}${o.timeSelf?` timeSelf:${u(o.timeSelf)}ms`:""}${o.timeLife?` timeLife:${u(o.timeLife)}ms`:""}${l?` ${l}`:""}`);for(const c of o.children??[])this.nodeToCompactString(r,t,`${i}  `,c);for(const c of o.childrenCompact??[])this.nodeToCompactString(r,t,`${i}  `,c.firstOccurrence,`compacted-occurrences:${c.occurrences}`)}};xm.MemoryPhysicalQueryPlanLogger=e;function u(n){return n.toLocaleString("en-US",{minimumFractionDigits:0,maximumFractionDigits:3})}return xm.numberToString=u,xm}var Wme;function a7e(){if(Wme)return f6;Wme=1,Object.defineProperty(f6,"__esModule",{value:!0}),f6.ActorQueryProcessExplainPhysical=void 0;const a=DP(),e=lt(),u=De(),n=Nwe();let r=class extends a.ActorQueryProcess{constructor(i){super(i)}async test(i){const o=i.context.get(e.KeysInitQuery.explain)??i.context.get(new u.ActionContextKey("explain"));return o!=="physical"&&o!=="physical-json"?(0,u.failTest)(`${this.name} can only explain in 'physical' or 'physical-json' mode.`):(0,u.passTestVoid)()}async run(i){let{operation:o,context:l}=await this.queryProcessor.parse(i.query,i.context);({operation:o,context:l}=await this.queryProcessor.optimize(o,l));const s=new n.MemoryPhysicalQueryPlanLogger;l=l.set(e.KeysInitQuery.physicalQueryPlanLogger,s);const c=await this.queryProcessor.evaluate(o,l);switch(c.type){case"bindings":await c.bindingsStream.toArray();break;case"quads":await c.quadStream.toArray();break;case"boolean":await c.execute();break;case"void":await c.execute();break}const d=i.context.get(e.KeysInitQuery.explain)??i.context.getSafe(new u.ActionContextKey("explain"));return{result:{explain:!0,type:d,data:d==="physical"?s.toCompactString():s.toJson()}}}};return f6.ActorQueryProcessExplainPhysical=r,f6}var Yme;function SH(){return Yme||(Yme=1,(function(a){var e=Om&&Om.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Om&&Om.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(a7e(),a),u(Nwe(),a)})(Om)),Om}var Rm={},p6={},Zme;function i7e(){if(Zme)return p6;Zme=1,Object.defineProperty(p6,"__esModule",{value:!0}),p6.ActorOptimizeQueryOperationPruneEmptySourceOperations=void 0;const a=Vi(),e=lt(),u=De(),n=Zt(),r=Ut();let t=class J6 extends a.ActorOptimizeQueryOperation{constructor(o){super(o)}async test(o){return(0,n.getOperationSource)(o.operation)?(0,u.failTest)(`Actor ${this.name} does not work with top-level operation sources.`):(0,u.passTestVoid)()}async run(o){const l=o.context.getSafe(e.KeysInitQuery.dataFactory),s=new r.Factory(l);let c=o.operation;const d=[],f=this;r.Util.recurseOperation(c,{[r.Algebra.types.UNION](h){return f.collectMultiOperationInputs(h.input,d,r.Algebra.types.PATTERN),!0},[r.Algebra.types.ALT](h){return f.collectMultiOperationInputs(h.input,d,r.Algebra.types.LINK),!1},[r.Algebra.types.SERVICE](){return!1}});const p=new Set;return await Promise.all(d.map(async h=>{const g=h.type==="link"?s.createPattern(l.variable("s"),h.iri,l.variable("o")):h;await this.hasSourceResults(s,(0,n.getOperationSource)(h),g,o.context)||p.add(h)})),p.size>0&&(this.logDebug(o.context,`Pruning ${p.size} source-specific operations`),c=r.Util.mapOperation(c,{[r.Algebra.types.UNION](h,g){return f.mapMultiOperation(h,p,v=>g.createUnion(v))},[r.Algebra.types.ALT](h,g){return f.mapMultiOperation(h,p,v=>g.createAlt(v))}},s),c=r.Util.mapOperation(c,{[r.Algebra.types.PROJECT](h,g){return J6.hasEmptyOperation(h)?{recurse:!1,result:g.createUnion([])}:{recurse:!0,result:h}},[r.Algebra.types.LEFT_JOIN](h){return J6.hasEmptyOperation(h.input[1])?{recurse:!0,result:h.input[0]}:{recurse:!0,result:h}}},s)),{operation:c,context:o.context}}static hasEmptyOperation(o){let l=!1;return r.Util.recurseOperation(o,{[r.Algebra.types.UNION](s){return s.input.every(c=>J6.hasEmptyOperation(c))&&(l=!0),!1},[r.Algebra.types.ALT](s){return s.input.length===0&&(l=!0),!1},[r.Algebra.types.LEFT_JOIN](s){return J6.hasEmptyOperation(s.input[0])&&(l=!0),!1}}),l}collectMultiOperationInputs(o,l,s){for(const c of o)(0,n.getOperationSource)(c)&&c.type===s&&l.push(c)}mapMultiOperation(o,l,s){const c=o.input.filter(d=>!l.has(d));return c.length===o.input.length?{result:o,recurse:!0}:c.length===0?{result:s([]),recurse:!1}:c.length===1?{result:c[0],recurse:!0}:{result:s(c),recurse:!0}}async hasSourceResults(o,l,s,c){const d=l.context?c.merge(l.context):c,f=d.get(e.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(d.get(e.KeysQuerySourceIdentify.traverse))return!0;if(this.useAskIfSupported){const g=o.createAsk(s);if((0,n.doesShapeAcceptOperation)(await l.source.getSelectorShape(c),g,{wildcardAcceptAllExtensionFunctions:f}))return l.source.queryBoolean(g,d)}const p=l.source.queryBindings(s,d),h=await new Promise((g,v)=>{p.on("error",v),p.getProperty("metadata",m=>{p.destroy(),g(m.cardinality)})});if(h.type==="estimate"&&h.value>0){const g=o.createAsk(s);if((0,n.doesShapeAcceptOperation)(await l.source.getSelectorShape(c),g,{wildcardAcceptAllExtensionFunctions:f}))return l.source.queryBoolean(g,d)}return h.value>0}};return p6.ActorOptimizeQueryOperationPruneEmptySourceOperations=t,p6}var ebe;function EH(){return ebe||(ebe=1,(function(a){var e=Rm&&Rm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Rm&&Rm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(i7e(),a)})(Rm)),Rm}var Nm={},h6={},tbe;function u7e(){if(tbe)return h6;tbe=1,Object.defineProperty(h6,"__esModule",{value:!0}),h6.ActorHttpProxy=void 0;const a=sc(),e=lt(),u=De();let n=class extends a.ActorHttp{constructor(t){super(t)}async test(t){const i=t.context.get(e.KeysHttpProxy.httpProxyHandler);return i?await i.getProxy(t)?(0,u.passTest)({time:Number.POSITIVE_INFINITY}):(0,u.failTest)(`Actor ${this.name} could not determine a proxy for the given request.`):(0,u.failTest)(`Actor ${this.name} could not find a proxy handler in the context.`)}async run(t){const i=typeof t.input=="string"?t.input:t.input.url,o=t.context.get(e.KeysHttpProxy.httpProxyHandler),l=await this.mediatorHttp.mediate({...await o.getProxy(t),context:t.context.delete(e.KeysHttpProxy.httpProxyHandler)});return Object.defineProperty(l,"url",{configurable:!0,enumerable:!0,get:()=>l.headers.get("x-final-url")??i}),l}};return h6.ActorHttpProxy=n,h6}var y6={},rbe;function o7e(){if(rbe)return y6;rbe=1,Object.defineProperty(y6,"__esModule",{value:!0}),y6.ProxyHandlerStatic=void 0;let a=class{constructor(u){this.prefixUrl=u}async getProxy(u){return{init:u.init,input:this.modifyInput(u.input)}}modifyInput(u){return typeof u=="string"?this.prefixUrl+u:new Request(this.prefixUrl+u.url,u)}};return y6.ProxyHandlerStatic=a,y6}var nbe;function AH(){return nbe||(nbe=1,(function(a){var e=Nm&&Nm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Nm&&Nm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(u7e(),a),u(o7e(),a)})(Nm)),Nm}var Im={},m6={},abe;function s7e(){if(abe)return m6;abe=1,Object.defineProperty(m6,"__esModule",{value:!0}),m6.ActorRdfJoinMultiBindSource=void 0;const a=ki(),e=lt(),u=De(),n=Eb(),r=Zt(),t=zt(),i=Ut();let o=class extends a.ActorRdfJoin{constructor(s){super(s,{logicalType:"inner",physicalName:"bind-source",canHandleUndefs:!0})}async getOutput(s,c){const d=s.context.getSafe(e.KeysInitQuery.dataFactory),f=new i.Factory(d),p=c.entriesSorted;this.logDebug(s.context,"First entry for Bind Join Source: ",()=>({entry:p[0].operation,cardinality:p[0].metadata.cardinality,order:p[0].metadata.order,availableOrders:p[0].metadata.availableOrders}));for(const[S,N]of p.entries())S!==0&&N.output.bindingsStream.close();const h=p[0].output,g=p[0].metadata,v=[...p];v.splice(0,1);const m=(0,r.getOperationSource)(v[0].operation),T=this.createOperationFromEntries(f,v),w=new n.ChunkedIterator(h.bindingsStream,this.blockSize,{autoStart:!1});return{result:{type:"bindings",bindingsStream:new t.UnionIterator(w.map(S=>m.source.queryBindings(T,m.context?s.context.merge(m.context):s.context,{joinBindings:{bindings:S,metadata:g}}))),metadata:()=>this.constructResultMetadata(p,p.map(S=>S.metadata),s.context)},physicalPlanMetadata:{bindIndex:c.entriesUnsorted.indexOf(p[0])}}}async sortJoinEntries(s,c){const d=await a.ActorRdfJoin.sortJoinEntries(this.mediatorJoinEntriesSort,s,c);return d.isFailed()?d:(s=d.get(),s=s.sort((f,p)=>f.operationModified&&!p.operationModified?-1:0),(0,u.passTest)(s))}async getJoinCoefficients(s,c){let{metadatas:d}=c;const f=s.context.getSafe(e.KeysInitQuery.dataFactory),p=new i.Factory(f),h=s.entries.map((A,P)=>({...A,metadata:d[P]})),g=await this.sortJoinEntries(h,s.context);if(g.isFailed())return g;const v=g.get();d=v.map(A=>A.metadata);const m=a.ActorRdfJoin.getRequestInitialTimes(d),T=a.ActorRdfJoin.getRequestItemTimes(d),w=[...v];[...m],[...T],w.splice(0,1);const E=w.map(A=>(0,r.getOperationSource)(A.operation));if(E.some(A=>!A))return(0,u.failTest)(`Actor ${this.name} can not bind on remaining operations without source annotation`);if(E.some(A=>A!==E[0]))return(0,u.failTest)(`Actor ${this.name} can not bind on remaining operations with non-equal source annotation`);const S=E[0],N=this.createOperationFromEntries(p,w),j=await S.source.getSelectorShape(s.context),q=s.context.get(e.KeysInitQuery.extensionFunctionsAlwaysPushdown);if(!(0,r.doesShapeAcceptOperation)(j,N,{joinBindings:!0,wildcardAcceptAllExtensionFunctions:q}))return(0,u.failTest)(`Actor ${this.name} detected a source that can not handle passing down join bindings`);const O=await Promise.all(w.map(async A=>(await this.mediatorJoinSelectivity.mediate({entries:[v[0],A],context:s.context})).selectivity*this.selectivityModifier)),I=w.map((A,P)=>A.metadata.cardinality.value*O[P]).reduce((A,P)=>A+P,0);return(0,u.passTestWithSideData)({iterations:1,persistedItems:d[0].cardinality.value,blockingItems:d[0].cardinality.value,requestTime:m[0]+d[0].cardinality.value*T[0]+m[1]+I*T[1]},{...c,entriesUnsorted:h,entriesSorted:v})}createOperationFromEntries(s,c){return c.length===1?c[0].operation:s.createJoin(c.map(d=>d.operation),!0)}};return m6.ActorRdfJoinMultiBindSource=o,m6}var ibe;function OH(){return ibe||(ibe=1,(function(a){var e=Im&&Im.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Im&&Im.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(s7e(),a)})(Im)),Im}var Dm={},b6={},ube;function c7e(){if(ube)return b6;ube=1,Object.defineProperty(b6,"__esModule",{value:!0}),b6.ActorOptimizeQueryOperationJoinConnected=void 0;const a=Vi(),e=lt(),u=De(),n=Ut();let r=class uF extends a.ActorOptimizeQueryOperation{async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(e.KeysInitQuery.dataFactory),l=new n.Factory(o);return{operation:n.Util.mapOperation(i.operation,{join(c,d){return{recurse:!1,result:uF.cluster(c,d)}}},l),context:i.context}}static cluster(i,o){const l=i.input.map(f=>({inScopeVariables:Object.fromEntries(n.Util.inScopeVariables(f).map(p=>[p.value,!0])),entries:[f]}));let s,c=l;do s=c,c=uF.clusterIteration(s);while(s.length!==c.length);const d=c.map(f=>f.entries.length===1?f.entries[0]:o.createJoin(f.entries));return d.length===1?d[0]:o.createJoin(d,!1)}static clusterIteration(i){const o=[];for(const l of i){let s=!1;for(const c of o)if(uF.haveOverlappingVariables(l.inScopeVariables,c.inScopeVariables)){c.entries=[...c.entries,...l.entries],c.inScopeVariables={...c.inScopeVariables,...l.inScopeVariables},s=!0;break}s||o.push({inScopeVariables:l.inScopeVariables,entries:l.entries})}return o}static haveOverlappingVariables(i,o){for(const l of Object.keys(i))if(o[l])return!0;return!1}};return b6.ActorOptimizeQueryOperationJoinConnected=r,b6}var obe;function xH(){return obe||(obe=1,(function(a){var e=Dm&&Dm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Dm&&Dm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(c7e(),a)})(Dm)),Dm}var Fm={},g6={},sbe;function l7e(){if(sbe)return g6;sbe=1,Object.defineProperty(g6,"__esModule",{value:!0}),g6.ActorHttpRetry=void 0;const a=sc(),e=lt(),u=De();let n=class Jm extends a.ActorHttp{constructor(t){super(t),this.activeDelays={},this.httpInvalidator=t.httpInvalidator,this.httpInvalidator.addInvalidateListener(i=>this.handleHttpInvalidateEvent(i)),this.mediatorHttp=t.mediatorHttp}async test(t){if(t.context.has(Jm.keyWrapped))return(0,u.failTest)(`${this.name} can only wrap a request once`);const i=t.context.get(e.KeysHttp.httpRetryCount);return!i||i<1?(0,u.failTest)(`${this.name} requires a retry count greater than zero to function`):(0,u.passTest)({time:0})}async run(t){const i=a.ActorHttp.getInputUrl(t.input),o=t.context.getSafe(e.KeysHttp.httpRetryCount)+1,l=t.context.get(e.KeysHttp.httpRetryDelayFallback)??0,s=t.context.get(e.KeysHttp.httpRetryDelayLimit),c=t.context.get(e.KeysHttp.httpRetryStatusCodes);for(let d=1;d<=o;d++){const f=i.host in this.activeDelays?this.activeDelays[i.host].date.getTime()-Date.now():l;if(s&&f>s){this.logWarn(t.context,"Requested delay exceeds the limit",()=>({url:i.href,delay:f,delayDate:this.activeDelays[i.host].date.toISOString(),delayLimit:s,currentAttempt:`${d} / ${o}`}));break}else f>0&&d>1&&(this.logDebug(t.context,"Delaying request",()=>({url:i.href,delay:f,currentAttempt:`${d} / ${o}`})),await Jm.sleep(f));const p=await this.mediatorHttp.mediate({...t,context:t.context.set(Jm.keyWrapped,!0)});if(p.ok)return p;if(c&&c.includes(p.status)){this.logDebug(t.context,"Status code in force retry list, forcing retry",()=>({url:i.href,status:p.status,statusText:p.statusText,currentAttempt:`${d} / ${o}`}));continue}if(p.status===504){this.logDebug(t.context,"Received proxy timeout",()=>({url:i.href,status:p.status,statusText:p.statusText,currentAttempt:`${d} / ${o}`}));continue}if(p.status===429||p.status===503||p.status===405&&p.headers.has("retry-after")){const h=p.headers.get("retry-after");if(h){const g=Jm.parseRetryAfterHeader(h);g?(i.host in this.activeDelays&&clearTimeout(this.activeDelays[i.host].timeout),this.activeDelays[i.host]={date:g,timeout:setTimeout(()=>delete this.activeDelays[i.host],g.getTime()-Date.now())}):this.logDebug(t.context,"Invalid Retry-After header value from server",()=>({url:i.href,status:p.status,statusText:p.statusText,retryAfterHeader:h,currentAttempt:`${d} / ${o}`}))}this.logDebug(t.context,"Server temporarily unavailable",()=>({url:i.href,status:p.status,statusText:p.statusText,currentAttempt:`${d} / ${o}`}));continue}if(p.status>=400&&p.status<500){this.logDebug(t.context,"Server reported client-side error",()=>({url:i.href,status:p.status,statusText:p.statusText,currentAttempt:`${d} / ${o}`}));break}if(p.status>=500&&p.status<600){this.logDebug(t.context,"Server-side error encountered, terminating",()=>({url:i.href,status:p.status,statusText:p.statusText,currentAttempt:`${d} / ${o}`}));break}this.logDebug(t.context,"Request failed",()=>({url:i.href,status:p.status,statusText:p.statusText,currentAttempt:`${d} / ${o}`}))}throw new Error(`Request failed: ${i.href}`)}static async sleep(t){t>0&&await new Promise(i=>setTimeout(i,t))}static parseRetryAfterHeader(t){if(Jm.numberRegex.test(t))return new Date(Date.now()+Number.parseInt(t,10)*1e3);if(Jm.dateRegex.test(t))return new Date(t)}handleHttpInvalidateEvent(t){const i=t.url?new URL(t.url).host:void 0;for(const o of Object.keys(this.activeDelays))(!i||o===i)&&(clearTimeout(this.activeDelays[o].timeout),delete this.activeDelays[o])}};return g6.ActorHttpRetry=n,n.dateRegex=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), [0-9]{2} (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) [0-9]{4} [0-9]{2}:[0-9]{2}:[0-9]{2} GMT$/u,n.numberRegex=/^[0-9]+$/u,n.keyWrapped=new u.ActionContextKey("urn:comunica:actor-http-retry#wrapped"),g6}var cbe;function RH(){return cbe||(cbe=1,(function(a){var e=Fm&&Fm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Fm&&Fm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(l7e(),a)})(Fm)),Fm}var Pm={},v6={},lbe;function d7e(){if(lbe)return v6;lbe=1,Object.defineProperty(v6,"__esModule",{value:!0}),v6.ActorOptimizeQueryOperationBgpToJoin=void 0;const a=Vi(),e=lt(),u=De(),n=Ut();let r=class extends a.ActorOptimizeQueryOperation{async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(e.KeysInitQuery.dataFactory),l=new n.Factory(o);return{operation:n.Util.mapOperation(i.operation,{bgp(c,d){return{recurse:!1,result:d.createJoin(c.patterns)}}},l),context:i.context}}};return v6.ActorOptimizeQueryOperationBgpToJoin=r,v6}var dbe;function NH(){return dbe||(dbe=1,(function(a){var e=Pm&&Pm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Pm&&Pm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(d7e(),a)})(Pm)),Pm}var jm={},_6={},fbe;function f7e(){if(fbe)return _6;fbe=1,Object.defineProperty(_6,"__esModule",{value:!0}),_6.ActorOptimizeQueryOperationJoinBgp=void 0;const a=Vi(),e=lt(),u=De(),n=Ut();let r=class extends a.ActorOptimizeQueryOperation{async test(i){return(0,u.passTestVoid)()}async run(i){const o=i.context.getSafe(e.KeysInitQuery.dataFactory),l=new n.Factory(o);return{operation:n.Util.mapOperation(i.operation,{join(c,d){return c.input.every(f=>f.type==="bgp")?{recurse:!1,result:d.createBgp(c.input.flatMap(f=>f.patterns))}:{recurse:!1,result:c}}},l),context:i.context}}};return _6.ActorOptimizeQueryOperationJoinBgp=r,_6}var pbe;function IH(){return pbe||(pbe=1,(function(a){var e=jm&&jm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=jm&&jm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(f7e(),a)})(jm)),jm}var Mm={},T6={},hbe;function p7e(){if(hbe)return T6;hbe=1,Object.defineProperty(T6,"__esModule",{value:!0}),T6.ActorOptimizeQueryOperationAssignSourcesExhaustive=void 0;const a=Vi(),e=sU(),u=lt(),n=De(),r=Zt(),t=Ut();let i=class extends a.ActorOptimizeQueryOperation{constructor(l){super(l)}async test(l){return(0,n.passTestVoid)()}async run(l){const s=l.context.getSafe(u.KeysInitQuery.dataFactory),c=new t.Factory(s),d=l.context.get(u.KeysQueryOperation.querySources)??[];if(d.length===0)return{operation:l.operation,context:l.context};if(d.length===1){const f=d[0],p=l.context.get(u.KeysRdfUpdateQuads.destination);if(!p||f.source.referenceValue===(0,e.getDataDestinationValue)(p))try{const h=await f.source.getSelectorShape(l.context);if((0,r.doesShapeAcceptOperation)(h,l.operation))return{operation:(0,r.assignOperationSource)(l.operation,f),context:l.context}}catch{}}return{operation:this.assignExhaustive(c,l.operation,d),context:l.context.delete(u.KeysInitQuery.queryString)}}assignExhaustive(l,s,c){const d=this;return t.Util.mapOperation(s,{[t.Algebra.types.PATTERN](f,p){return c.length===1?{result:(0,r.assignOperationSource)(f,c[0]),recurse:!1}:{result:p.createUnion(c.map(h=>(0,r.assignOperationSource)(f,h))),recurse:!1}},[t.Algebra.types.LINK](f,p){return c.length===1?{result:(0,r.assignOperationSource)(f,c[0]),recurse:!1}:{result:p.createAlt(c.map(h=>(0,r.assignOperationSource)(f,h))),recurse:!1}},[t.Algebra.types.NPS](f,p){return c.length===1?{result:(0,r.assignOperationSource)(f,c[0]),recurse:!1}:{result:p.createAlt(c.map(h=>(0,r.assignOperationSource)(f,h))),recurse:!1}},[t.Algebra.types.SERVICE](f){return{result:f,recurse:!1}},[t.Algebra.types.CONSTRUCT](f,p){return{result:p.createConstruct(d.assignExhaustive(l,f.input,c),f.template),recurse:!1}},[t.Algebra.types.DELETE_INSERT](f,p){return{result:p.createDeleteInsert(f.delete,f.insert,f.where?d.assignExhaustive(l,f.where,c):void 0),recurse:!1}}},l)}};return T6.ActorOptimizeQueryOperationAssignSourcesExhaustive=i,T6}var ybe;function DH(){return ybe||(ybe=1,(function(a){var e=Mm&&Mm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Mm&&Mm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(p7e(),a)})(Mm)),Mm}var Cm={},w6={},uo={},hu={},l9={},mbe;function uN(){return mbe||(mbe=1,(function(a){Object.defineProperty(a,"__esModule",{value:!0}),a.expressionTypes=a.types=void 0,(function(e){e.ALT="alt",e.ASK="ask",e.BGP="bgp",e.CONSTRUCT="construct",e.DESCRIBE="describe",e.DISTINCT="distinct",e.EXPRESSION="expression",e.EXTEND="extend",e.FILTER="filter",e.FROM="from",e.GRAPH="graph",e.GROUP="group",e.INV="inv",e.JOIN="join",e.LEFT_JOIN="leftjoin",e.LINK="link",e.MINUS="minus",e.NOP="nop",e.NPS="nps",e.ONE_OR_MORE_PATH="OneOrMorePath",e.ORDER_BY="orderby",e.PATH="path",e.PATTERN="pattern",e.PROJECT="project",e.REDUCED="reduced",e.SEQ="seq",e.SERVICE="service",e.SLICE="slice",e.UNION="union",e.VALUES="values",e.ZERO_OR_MORE_PATH="ZeroOrMorePath",e.ZERO_OR_ONE_PATH="ZeroOrOnePath",e.COMPOSITE_UPDATE="compositeupdate",e.DELETE_INSERT="deleteinsert",e.LOAD="load",e.CLEAR="clear",e.CREATE="create",e.DROP="drop",e.ADD="add",e.MOVE="move",e.COPY="copy"})(a.types||(a.types={})),(function(e){e.AGGREGATE="aggregate",e.EXISTENCE="existence",e.NAMED="named",e.OPERATOR="operator",e.TERM="term",e.WILDCARD="wildcard"})(a.expressionTypes||(a.expressionTypes={}))})(l9)),l9}var Po={},bbe;function jP(){if(bbe)return Po;bbe=1;var a=Po&&Po.__createBinding||(Object.create?(function(l,s,c,d){d===void 0&&(d=c);var f=Object.getOwnPropertyDescriptor(s,c);(!f||("get"in f?!s.__esModule:f.writable||f.configurable))&&(f={enumerable:!0,get:function(){return s[c]}}),Object.defineProperty(l,d,f)}):(function(l,s,c,d){d===void 0&&(d=c),l[d]=s[c]})),e=Po&&Po.__setModuleDefault||(Object.create?(function(l,s){Object.defineProperty(l,"default",{enumerable:!0,value:s})}):function(l,s){l.default=s}),u=Po&&Po.__importStar||function(l){if(l&&l.__esModule)return l;var s={};if(l!=null)for(var c in l)c!=="default"&&Object.prototype.hasOwnProperty.call(l,c)&&a(s,l,c);return e(s,l),s};Object.defineProperty(Po,"__esModule",{value:!0});const n=u(uN()),r=Rr(),t=$t(),i=$n();class o{constructor(s){this.dataFactory=s||new r.DataFactory,this.stringType=this.createTerm("http://www.w3.org/2001/XMLSchema#string")}createAlt(s,c=!0){return this.flattenMulti({type:n.types.ALT,input:s},c)}createAsk(s){return{type:n.types.ASK,input:s}}createBoundAggregate(s,c,d,f,p){const h=this.createAggregateExpression(c,d,f,p);return h.variable=s,h}createBgp(s){return{type:n.types.BGP,patterns:s}}createConstruct(s,c){return{type:n.types.CONSTRUCT,input:s,template:c}}createDescribe(s,c){return{type:n.types.DESCRIBE,input:s,terms:c}}createDistinct(s){return{type:n.types.DISTINCT,input:s}}createExtend(s,c,d){return{type:n.types.EXTEND,input:s,variable:c,expression:d}}createFrom(s,c,d){return{type:n.types.FROM,input:s,default:c,named:d}}createFilter(s,c){return{type:n.types.FILTER,input:s,expression:c}}createGraph(s,c){return{type:n.types.GRAPH,input:s,name:c}}createGroup(s,c,d){return{type:n.types.GROUP,input:s,variables:c,aggregates:d}}createInv(s){return{type:n.types.INV,path:s}}createJoin(s,c=!0){return this.flattenMulti({type:n.types.JOIN,input:s},c)}createLeftJoin(s,c,d){return d?{type:n.types.LEFT_JOIN,input:[s,c],expression:d}:{type:n.types.LEFT_JOIN,input:[s,c]}}createLink(s){return{type:n.types.LINK,iri:s}}createMinus(s,c){return{type:n.types.MINUS,input:[s,c]}}createNop(){return{type:n.types.NOP}}createNps(s){return{type:n.types.NPS,iris:s}}createOneOrMorePath(s){return{type:n.types.ONE_OR_MORE_PATH,path:s}}createOrderBy(s,c){return{type:n.types.ORDER_BY,input:s,expressions:c}}createPath(s,c,d,f){return f?{type:n.types.PATH,subject:s,predicate:c,object:d,graph:f}:{type:n.types.PATH,subject:s,predicate:c,object:d,graph:this.dataFactory.defaultGraph()}}createPattern(s,c,d,f){const p=this.dataFactory.quad(s,c,d,f);return p.type=n.types.PATTERN,p}createProject(s,c){return{type:n.types.PROJECT,input:s,variables:c}}createReduced(s){return{type:n.types.REDUCED,input:s}}createSeq(s,c=!0){return this.flattenMulti({type:n.types.SEQ,input:s},c)}createService(s,c,d){return{type:n.types.SERVICE,input:s,name:c,silent:!!d}}createSlice(s,c,d){return c=c||0,d!==void 0?{type:n.types.SLICE,input:s,start:c,length:d}:{type:n.types.SLICE,input:s,start:c}}createUnion(s,c=!0){return this.flattenMulti({type:n.types.UNION,input:s},c)}createValues(s,c){return{type:n.types.VALUES,variables:s,bindings:c}}createZeroOrMorePath(s){return{type:n.types.ZERO_OR_MORE_PATH,path:s}}createZeroOrOnePath(s){return{type:n.types.ZERO_OR_ONE_PATH,path:s}}createAggregateExpression(s,c,d,f){return f?{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,separator:f,distinct:d}:{type:n.types.EXPRESSION,expressionType:n.expressionTypes.AGGREGATE,aggregator:s,expression:c,distinct:d}}createExistenceExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.EXISTENCE,not:s,input:c}}createNamedExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.NAMED,name:s,args:c}}createOperatorExpression(s,c){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.OPERATOR,operator:s,args:c}}createTermExpression(s){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.TERM,term:s}}createWildcardExpression(){return{type:n.types.EXPRESSION,expressionType:n.expressionTypes.WILDCARD,wildcard:new i.Wildcard}}createTerm(s){return s[0]==="$"&&(s=s.replace("$","?")),(0,t.stringToTerm)(s,this.dataFactory)}createCompositeUpdate(s){return{type:n.types.COMPOSITE_UPDATE,updates:s}}createDeleteInsert(s,c,d){const f={type:n.types.DELETE_INSERT};return s&&(f.delete=s),c&&(f.insert=c),d&&(f.where=d),f}createLoad(s,c,d){const f={type:n.types.LOAD,source:s};return c&&(f.destination=c),this.addSilent(f,!!d)}createClear(s,c){return this.addSilent({type:n.types.CLEAR,source:s},!!c)}createCreate(s,c){return this.addSilent({type:n.types.CREATE,source:s},!!c)}createDrop(s,c){return this.addSilent({type:n.types.DROP,source:s},!!c)}createAdd(s,c,d){return this.addSilent({type:n.types.ADD,source:s,destination:c},!!d)}createMove(s,c,d){return this.addSilent({type:n.types.MOVE,source:s,destination:c},!!d)}createCopy(s,c,d){return this.addSilent({type:n.types.COPY,source:s,destination:c},!!d)}addSilent(s,c){return c&&(s.silent=c),s}flattenMulti(s,c){if(!c)return s;const d=s.type,f=s.input;let p=[];for(const h of f)h.type===d?p.push(...h.input):p.push(h);return s.input=p,s}}return Po.default=o,Po}var wg={},gbe;function FH(){if(gbe)return wg;gbe=1;var a=wg&&wg.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wg,"__esModule",{value:!0});const e=uN(),u=a(jP()),n=Yr();class r{static flatten(i){return Array.prototype.concat(...i).filter(o=>o)}static objectify(i){if(i.termType){if(i.termType==="Quad")return{type:"pattern",termType:"Quad",subject:r.objectify(i.subject),predicate:r.objectify(i.predicate),object:r.objectify(i.object),graph:r.objectify(i.graph)};{let o={termType:i.termType,value:i.value};return i.language&&(o.language=i.language),i.datatype&&(o.datatype=r.objectify(i.datatype)),o}}if(Array.isArray(i))return i.map(o=>r.objectify(o));if(i===Object(i)){let o={};for(let l of Object.keys(i))o[l]=r.objectify(i[l]);return o}return i}static inScopeVariables(i){const o=[];function l(c){o.find(d=>c.value===d.value)||o.push(c)}function s(c){c.subject.termType==="Variable"&&l(c.subject),c.predicate.termType==="Variable"&&l(c.predicate),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.predicate.termType==="Quad"&&s(c.predicate),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph)}return r.recurseOperation(i,{[e.types.EXPRESSION]:c=>(c.expressionType===e.expressionTypes.AGGREGATE&&c.variable&&l(c.variable),!0),[e.types.EXTEND]:c=>(l(c.variable),!0),[e.types.GRAPH]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.GROUP]:c=>(c.variables.forEach(l),!0),[e.types.PATH]:c=>(c.subject.termType==="Variable"&&l(c.subject),c.object.termType==="Variable"&&l(c.object),c.graph.termType==="Variable"&&l(c.graph),c.subject.termType==="Quad"&&s(c.subject),c.object.termType==="Quad"&&s(c.object),c.graph.termType==="Quad"&&s(c.graph),!0),[e.types.PATTERN]:c=>(s(c),!0),[e.types.PROJECT]:c=>(c.variables.forEach(l),!1),[e.types.SERVICE]:c=>(c.name.termType==="Variable"&&l(c.name),!0),[e.types.VALUES]:c=>(c.variables.forEach(l),!0)}),o}static recurseOperation(i,o){let l=i,s=!0;const c=o[i.type];if(c&&(s=c(i)),!s)return;let d=f=>r.recurseOperation(f,o);switch(l.type){case e.types.ALT:l.input.map(d);break;case e.types.ASK:d(l.input);break;case e.types.BGP:l.patterns.forEach(d);break;case e.types.CONSTRUCT:d(l.input),l.template.map(d);break;case e.types.DESCRIBE:d(l.input);break;case e.types.DISTINCT:d(l.input);break;case e.types.EXPRESSION:l.expressionType===e.expressionTypes.EXISTENCE&&d(l.input);break;case e.types.EXTEND:d(l.input),d(l.expression);break;case e.types.FILTER:d(l.input),d(l.expression);break;case e.types.FROM:d(l.input);break;case e.types.GRAPH:d(l.input);break;case e.types.GROUP:d(l.input),l.aggregates.forEach(d);break;case e.types.INV:d(l.path);break;case e.types.JOIN:l.input.map(d);break;case e.types.LEFT_JOIN:l.input.map(d),l.expression&&d(l.expression);break;case e.types.LINK:break;case e.types.MINUS:l.input.map(d);break;case e.types.NOP:break;case e.types.NPS:break;case e.types.ONE_OR_MORE_PATH:d(l.path);break;case e.types.ORDER_BY:d(l.input),l.expressions.forEach(d);break;case e.types.PATH:d(l.predicate);break;case e.types.PATTERN:break;case e.types.PROJECT:d(l.input);break;case e.types.REDUCED:d(l.input);break;case e.types.SEQ:l.input.map(d);break;case e.types.SERVICE:d(l.input);break;case e.types.SLICE:d(l.input);break;case e.types.UNION:l.input.map(d);break;case e.types.VALUES:break;case e.types.ZERO_OR_MORE_PATH:d(l.path);break;case e.types.ZERO_OR_ONE_PATH:d(l.path);break;case e.types.COMPOSITE_UPDATE:l.updates.forEach(f=>d(f));break;case e.types.DELETE_INSERT:l.delete&&l.delete.forEach(f=>d(f)),l.insert&&l.insert.forEach(f=>d(f)),l.where&&d(l.where);break;case e.types.LOAD:break;case e.types.CLEAR:break;case e.types.CREATE:break;case e.types.DROP:break;case e.types.ADD:break;case e.types.MOVE:break;case e.types.COPY:break;default:throw new Error(`Unknown Operation type ${l.type}`)}}static mapOperation(i,o,l){let s=i,c=!0,d=!0;l=l||new u.default;const f=o[i.type];if(f){const g=f(i,l);s=g.result,c=g.recurse,d=g.copyMetadata!==!1}let p;if(d&&(s.metadata||i.metadata)&&(p={...s.metadata,...i.metadata}),!c)return p&&(s.metadata=p),s;let h=g=>r.mapOperation(g,o,l);switch(s.type){case e.types.ALT:s=l.createAlt(s.input.map(h));break;case e.types.ASK:s=l.createAsk(h(s.input));break;case e.types.BGP:s=l.createBgp(s.patterns.map(h));break;case e.types.CONSTRUCT:s=l.createConstruct(h(s.input),s.template.map(h));break;case e.types.DESCRIBE:s=l.createDescribe(h(s.input),s.terms);break;case e.types.DISTINCT:s=l.createDistinct(h(s.input));break;case e.types.EXPRESSION:s=r.mapExpression(s,o,l);break;case e.types.EXTEND:s=l.createExtend(h(s.input),s.variable,h(s.expression));break;case e.types.FILTER:s=l.createFilter(h(s.input),h(s.expression));break;case e.types.FROM:s=l.createFrom(h(s.input),[...s.default],[...s.named]);break;case e.types.GRAPH:s=l.createGraph(h(s.input),s.name);break;case e.types.GROUP:s=l.createGroup(h(s.input),[].concat(s.variables),s.aggregates.map(h));break;case e.types.INV:s=l.createInv(h(s.path));break;case e.types.JOIN:s=l.createJoin(s.input.map(h));break;case e.types.LEFT_JOIN:s=l.createLeftJoin(h(s.input[0]),h(s.input[1]),s.expression?h(s.expression):void 0);break;case e.types.LINK:s=l.createLink(s.iri);break;case e.types.MINUS:s=l.createMinus(h(s.input[0]),h(s.input[1]));break;case e.types.NOP:s=l.createNop();break;case e.types.NPS:s=l.createNps([].concat(s.iris));break;case e.types.ONE_OR_MORE_PATH:s=l.createOneOrMorePath(h(s.path));break;case e.types.ORDER_BY:s=l.createOrderBy(h(s.input),s.expressions.map(h));break;case e.types.PATH:s=l.createPath(s.subject,h(s.predicate),s.object,s.graph);break;case e.types.PATTERN:s=l.createPattern(s.subject,s.predicate,s.object,s.graph);break;case e.types.PROJECT:s=l.createProject(h(s.input),[...s.variables]);break;case e.types.REDUCED:s=l.createReduced(h(s.input));break;case e.types.SEQ:s=l.createSeq(s.input.map(h));break;case e.types.SERVICE:s=l.createService(h(s.input),s.name,s.silent);break;case e.types.SLICE:s=l.createSlice(h(s.input),s.start,s.length);break;case e.types.UNION:s=l.createUnion(s.input.map(h));break;case e.types.VALUES:s=l.createValues([].concat(s.variables),s.bindings.map(g=>Object.assign({},g)));break;case e.types.ZERO_OR_MORE_PATH:s=l.createZeroOrMorePath(h(s.path));break;case e.types.ZERO_OR_ONE_PATH:s=l.createZeroOrOnePath(h(s.path));break;case e.types.COMPOSITE_UPDATE:s=l.createCompositeUpdate(s.updates.map(h));break;case e.types.DELETE_INSERT:s=l.createDeleteInsert(s.delete?s.delete.map(h):void 0,s.insert?s.insert.map(h):void 0,s.where?h(s.where):void 0);break;case e.types.LOAD:s=l.createLoad(s.source,s.destination,s.silent);break;case e.types.CLEAR:s=l.createClear(s.source,s.silent);break;case e.types.CREATE:s=l.createCreate(s.source,s.silent);break;case e.types.DROP:s=l.createDrop(s.source,s.silent);break;case e.types.ADD:s=l.createAdd(s.source,s.destination);break;case e.types.MOVE:s=l.createMove(s.source,s.destination);break;case e.types.COPY:s=l.createCopy(s.source,s.destination);break;default:throw new Error(`Unknown Operation type ${s.type}`)}return p&&(s.metadata=p),s}static mapExpression(i,o,l){let s=i,c=!0;l=l||new u.default;const d=o[i.expressionType];if(d&&({result:s,recurse:c}=d(i,l)),!c)return s;let f=p=>r.mapOperation(p,o,l);switch(i.expressionType){case e.expressionTypes.AGGREGATE:return i.variable?l.createBoundAggregate(i.variable,i.aggregator,f(i.expression),i.distinct,i.separator):l.createAggregateExpression(i.aggregator,f(i.expression),i.distinct,i.separator);case e.expressionTypes.EXISTENCE:return l.createExistenceExpression(i.not,f(i.input));case e.expressionTypes.NAMED:return l.createNamedExpression(i.name,i.args.map(f));case e.expressionTypes.OPERATOR:return l.createOperatorExpression(i.operator,i.args.map(f));case e.expressionTypes.TERM:return l.createTermExpression(i.term);case e.expressionTypes.WILDCARD:return l.createWildcardExpression();default:throw new Error(`Unknown Expression type ${i.expressionType}`)}}static cloneOperation(i){return r.mapOperation(i,{})}static cloneExpression(i){return r.mapExpression(i,{})}static createUniqueVariable(i,o,l){let s=0,c=i;for(;o[c];)c=`${i}${s++}`;return l.variable(c)}static isSimpleTerm(i){return i.termType!==void 0&&i.termType!=="Quad"&&i.termType!=="Wildcard"}static isQuad(i){return i.termType==="Quad"}static hasQuadVariables(i){return(0,n.someTermsNested)(i,o=>o.termType==="Variable")}static isWildcard(i){return i.termType==="Wildcard"}}return wg.default=r,wg}var vbe;function h7e(){if(vbe)return hu;vbe=1;var a=hu&&hu.__createBinding||(Object.create?(function(_,F,D,L){L===void 0&&(L=D);var Q=Object.getOwnPropertyDescriptor(F,D);(!Q||("get"in Q?!F.__esModule:Q.writable||Q.configurable))&&(Q={enumerable:!0,get:function(){return F[D]}}),Object.defineProperty(_,L,Q)}):(function(_,F,D,L){L===void 0&&(L=D),_[L]=F[D]})),e=hu&&hu.__setModuleDefault||(Object.create?(function(_,F){Object.defineProperty(_,"default",{enumerable:!0,value:F})}):function(_,F){_.default=F}),u=hu&&hu.__importStar||function(_){if(_&&_.__esModule)return _;var F={};if(_!=null)for(var D in _)D!=="default"&&Object.prototype.hasOwnProperty.call(_,D)&&a(F,_,D);return e(F,_),F},n=hu&&hu.__importDefault||function(_){return _&&_.__esModule?_:{default:_}};Object.defineProperty(hu,"__esModule",{value:!0});const r=v1(),t=$t(),i=u(uN()),o=n(jP()),l=n(FH()),s=$n().Parser,c=i.types;let d=new Set,f=0,p=!1,h;function g(_,F){F=F||{},h=new o.default(F.dataFactory);let D;if(m(_)){let L=new s(F);L._resetBlanks(),D=L.parse(_)}else D=_;return v(D,F.quads,F.blankToVariable)}hu.default=g;function v(_,F,D){if(d=new Set,f=0,p=!!F,!_.type)return h.createNop();if(_.type!=="query"&&_.type!=="update")throw new Error("Translate only works on complete query or update objects.");let L;if(S(_),_.type==="query"){const Q={type:"group",patterns:_.where||[]};L=j(Q),L=W(_,L)}else _.type==="update"&&(L=pe(_));return D&&(L=ee(L)),L}function m(_){return typeof _=="string"}function T(_){return!!_?.termType}function w(_){return _.subject&&_.predicate&&_.object}function E(_){return _?.termType==="Variable"}function S(_){if(T(_))E(_)&&d.add(`?${_.value}`);else if(Array.isArray(_))for(const F of _)S(F);else if(_&&typeof _=="object")for(let F of Object.keys(_))F.startsWith("?")?d.add(F):F.startsWith("$")&&d.add(`?${F.slice(1)}`),S(_[F])}function N(_){let F={};if(w(_)){const D=[N(_.subject),N(_.predicate),N(_.object),_.graph?N(_.graph):{}];Object.assign(F,...D)}else if(T(_))E(_)&&(F[_.value]=_);else if(_.type==="bgp"){const D=_.triples;Object.assign(F,...D.map(N))}else if(_.type==="path")Object.assign(F,..._.items.map(N));else if(_.type==="group"||_.type==="union"||_.type==="optional")Object.assign(F,..._.patterns.map(N));else if(_.type==="service"||_.type==="graph")Object.assign(F,N(_.name)),Object.assign(F,..._.patterns.map(N));else if(_.type==="bind")Object.assign(F,N(_.variable));else if(_.type==="values"){if(_.values.length>0){const D=Object.keys(_.values[0]).map(L=>h.createTerm(L));Object.assign(F,...D.map(N))}}else if(_.type==="query"&&(_.queryType==="SELECT"||_.queryType==="DESCRIBE")){_.where&&_.variables.some(l.default.isWildcard)&&Object.assign(F,..._.where.map(N));for(const D of _.variables)E(D)?Object.assign(F,N(D)):D.variable&&Object.assign(F,N(D.variable));if(_.queryType==="SELECT"){if(_.group)for(const D of _.group)D.variable&&Object.assign(F,N(D.variable));if(_.values){const D={type:"values",values:_.values};Object.assign(F,N(D))}}}return F}function j(_){if(_.type==="bgp")return O(_);if(_.type==="union")return h.createUnion(_.patterns.map(F=>(F.type!=="group"&&(F={type:"group",patterns:[F]}),j(F))));if(_.type==="graph"){const F={type:"group",patterns:_.patterns};let D=j(F);return p?D=V(D,_.name):D=h.createGraph(D,_.name),D}if(_.type==="values")return ae(_);if(_.type==="query")return v(_,p,!1);if(_.type==="group"){let F=[],D=[];for(let Y of _.patterns)(Y.type==="filter"?F:D).push(Y);let L=D.reduce(G,h.createBgp([])),Q=F.map(Y=>q(Y.expression));return Q.length>0&&(L=h.createFilter(L,Q.reduce((Y,$)=>h.createOperatorExpression("&&",[Y,$])))),L}throw new Error(`Unexpected type: ${_.type}`)}function q(_){if(l.default.isSimpleTerm(_))return h.createTermExpression(_);if(l.default.isQuad(_))return l.default.hasQuadVariables(_)?h.createOperatorExpression("triple",[q(_.subject),q(_.predicate),q(_.object)]):h.createTermExpression(_);if(l.default.isWildcard(_))return h.createWildcardExpression();if("aggregation"in _)return h.createAggregateExpression(_.aggregation,q(_.expression),!!_.distinct,_.separator);if("function"in _)return h.createNamedExpression(_.function,_.args.map(q));if("operator"in _)return _.operator==="exists"||_.operator==="notexists"?h.createExistenceExpression(_.operator==="notexists",j(_.args[0])):((_.operator==="in"||_.operator==="notin")&&(_.args=[_.args[0]].concat(_.args[1])),h.createOperatorExpression(_.operator,_.args.map(q)));throw new Error(`Unknown expression: ${JSON.stringify(_)}`)}function O(_){let F=[],D=[];for(let L of _.triples)if("pathType"in L.predicate){let Q=I(L);for(let Y of Q)Y.type===c.PATH?(F.length>0&&D.push(h.createBgp(F)),F=[],D.push(Y)):F.push(Y)}else F.push(B(L));return F.length>0&&D.push(h.createBgp(F)),D.length===1?D[0]:h.createJoin(D)}function I(_){let F=_.subject,D=A(_.predicate),L=_.object;return P(F,D,L)}function A(_){if(l.default.isSimpleTerm(_)){if(_.termType==="NamedNode")return h.createLink(_);throw new Error(`Path predicate should be a NamedNode, got ${JSON.stringify(_)}`)}if(_.pathType==="^")return h.createInv(A(_.items[0]));if(_.pathType==="!"){let F=[],D=[],L;"pathType"in _.items[0]&&_.items[0].pathType==="|"?L=_.items[0].items:L=_.items;for(let $ of L)if(l.default.isSimpleTerm($))F.push($);else if($.pathType==="^")D.push($.items[0]);else throw new Error(`Unexpected item: ${JSON.stringify($)}`);let Q=h.createNps(F),Y=h.createInv(h.createNps(D));return D.length===0?Q:F.length===0?Y:h.createAlt([Q,Y])}if(_.pathType==="/")return h.createSeq(_.items.map(A));if(_.pathType==="|")return h.createAlt(_.items.map(A));if(_.pathType==="*")return h.createZeroOrMorePath(A(_.items[0]));if(_.pathType==="+")return h.createOneOrMorePath(A(_.items[0]));if(_.pathType==="?")return h.createZeroOrOnePath(A(_.items[0]));throw new Error(`Unable to translate path expression ${JSON.stringify(_)}`)}function P(_,F,D){if(F.type===c.LINK)return[h.createPattern(_,F.iri,D)];if(F.type===c.INV)return P(D,F.path,_);if(F.type===c.SEQ){let L=_;return l.default.flatten(F.input.map((Q,Y)=>{const $=Y===F.input.length-1?D:C(),ue=P(L,Q,$);return $.termType==="Variable"&&(L=$),ue}))}return[h.createPath(_,F,D)]}function C(){let _=`?var${f++}`;return d.has(_)?C():(d.add(_),h.createTerm(_))}function B(_){if("pathType"in _.predicate)throw new Error("Trying to translate property path to quad.");return h.createPattern(_.subject,_.predicate,_.object,_.graph)}let H=Object.values(c);function V(_,F,D){if(_.type===c.GRAPH){if(D)throw new Error("Recursing through nested GRAPH statements with a replacement is impossible.");_=V(_.input,_.name)}else if(_.type!==c.SERVICE)if(_.type===c.BGP)_.patterns=_.patterns.map(L=>(D&&(L.subject.equals(F)&&(L.subject=D),L.predicate.equals(F)&&(L.predicate=D),L.object.equals(F)&&(L.object=D)),L.graph.termType==="DefaultGraph"&&(L.graph=F),L));else if(_.type===c.PATH)D&&(_.subject.equals(F)&&(_.subject=D),_.object.equals(F)&&(_.object=D)),_.graph.termType==="DefaultGraph"&&(_.graph=F);else if(_.type===c.PROJECT&&!D)_.variables.some(L=>L.equals(F))||(D=C()),_.input=V(_.input,F,D);else if(_.type===c.EXTEND&&!D)_.variable.equals(F)&&(D=C()),_.input=V(_.input,F,D);else for(let L of Object.keys(_))Array.isArray(_[L])?_[L]=_[L].map(Q=>V(Q,F,D)):H.indexOf(_[L].type)>=0?_[L]=V(_[L],F,D):D&&E(_[L])&&_[L].equals(F)&&(_[L]=D);return _}function G(_,F){if(F.type==="optional"){const D=j({type:"group",patterns:F.patterns});D.type===c.FILTER?_=h.createLeftJoin(_,D.input,D.expression):_=h.createLeftJoin(_,D)}else if(F.type==="minus"){const D=j({type:"group",patterns:F.patterns});_=h.createMinus(_,D)}else if(F.type==="bind")_=h.createExtend(_,F.variable,q(F.expression));else if(F.type==="service"){const D={type:"group",patterns:F.patterns},L=h.createService(j(D),F.name,F.silent);_=Z(_,L)}else{const D=j(F);_=Z(_,D)}return _}function Z(_,F){return _.type===c.BGP&&F.type===c.BGP?_=h.createBgp([..._.patterns,...F.patterns]):_.type===c.BGP&&_.patterns.length===0?_=F:F.type===c.BGP&&F.patterns.length===0||(_=h.createJoin([_,F])),_}function ae(_){let F=(_.values.length===0?[]:Object.keys(_.values[0])).map(h.createTerm.bind(h)),D=_.values.map(L=>{let Q=Object.keys(L);Q=Q.filter($=>L[$]!==void 0);let Y={};for(let $ of Q)Y[$]=L[$];return Y});return h.createValues(F,D)}function W(_,F){const D=_,L=[],Q={};if(D.variables=D.variables&&D.variables.map($=>te($,Q)),D.having=D.having&&D.having.map($=>te($,Q)),D.order=D.order&&D.order.map($=>te($,Q)),D.group||Object.keys(Q).length>0){const $=Object.keys(Q).map(ne=>se(Q[ne],h.createTerm(ne))),ue=[];if(D.group)for(const ne of D.group)if(l.default.isSimpleTerm(ne.expression))ue.push(ne.expression);else{const ce="variable"in ne?ne.variable:C();F=h.createExtend(F,ce,q(ne.expression)),ue.push(ce)}F=h.createGroup(F,ue,$)}if(D.having)for(let $ of D.having)F=h.createFilter(F,q($));_.values&&(F=h.createJoin([F,ae(_)]));let Y=[];if(_.queryType==="SELECT"||_.queryType==="DESCRIBE")if(_.variables.some($=>$&&l.default.isWildcard($)))Y=Object.values(N(_)).sort(($,ue)=>$.value.localeCompare(ue.value));else for(let $ of _.variables)E($)||!("variable"in $)?Y.push($):$.variable&&(Y.push($.variable),L.push($));for(let $ of L)F=h.createExtend(F,$.variable,q($.expression));return D.order&&(F=h.createOrderBy(F,D.order.map($=>{let ue=q($.expression);return $.descending&&(ue=h.createOperatorExpression("desc",[ue])),ue}))),_.queryType==="SELECT"&&(F=h.createProject(F,Y)),D.distinct&&(F=h.createDistinct(F)),D.reduced&&(F=h.createReduced(F)),_.queryType==="CONSTRUCT"?F=h.createConstruct(F,(_.template||[]).map(B)):_.queryType==="ASK"?F=h.createAsk(F):_.queryType==="DESCRIBE"&&(F=h.createDescribe(F,Y)),(D.offset||D.limit)&&(F=h.createSlice(F,D.offset||0,D.limit)),D.from&&(F=h.createFrom(F,D.from.default,D.from.named)),F}function te(_,F){if("type"in _&&_.type==="aggregate"){let D=!1,L;for(let Q of Object.keys(F))if(r(F[Q],_)){L=h.createTerm(Q),D=!0;break}return D||(L=C(),F[(0,t.termToString)(L)]=_),L}return"expression"in _&&_.expression?{..._,expression:te(_.expression,F)}:"args"in _&&_.args?{..._,args:_.args.map(D=>te(D,F))}:_}function se(_,F){if(_.type!=="aggregate"||!_.aggregation)throw new Error(`Unexpected input: ${JSON.stringify(_)}`);const D=q(_);return D.variable=F,D}function pe(_){return _.updates.length===1?le(_.updates[0]):h.createCompositeUpdate(_.updates.map(le))}function le(_){if("type"in _){if(_.type==="load")return Ae(_);if(_.type==="clear"||_.type==="create"||_.type==="drop")return Ie(_);if(_.type==="add"||_.type==="copy"||_.type==="move")return be(_)}else if(_.updateType==="insertdelete"||_.updateType==="deletewhere"||_.updateType==="delete"||_.updateType==="insert")return Ee(_);throw new Error(`Unknown update type ${JSON.stringify(_)}`)}function Ee(_){if(!p)throw new Error("INSERT/DELETE operations are only supported with quads option enabled");let F=[],D=[],L;if(_.delete&&(F=l.default.flatten(_.delete.map(Q=>Oe(Q,_.graph)))),_.insert&&(D=l.default.flatten(_.insert.map(Q=>Oe(Q,_.graph)))),_.where&&_.where.length>0){L=j({type:"group",patterns:_.where});const Q=_.using;Q?L=h.createFrom(L,Q.default,Q.named):_.graph&&(L=V(L,_.graph))}else _.updateType==="deletewhere"&&F.length>0&&(L=h.createBgp(F));return h.createDeleteInsert(F.length>0?F:void 0,D.length>0?D:void 0,L)}function Oe(_,F){let D=F;_.type==="graph"&&(D=_.name);let L=_.triples;return D&&(L=L.map(Q=>Object.assign(Q,{graph:D}))),L.map(B)}function Ie(_){let F;switch(l.default.isSimpleTerm(_.graph)?F=_.graph:_.graph.all?F="ALL":_.graph.default?F="DEFAULT":_.graph.named?F="NAMED":F=_.graph.name,_.type){case"clear":return h.createClear(F,_.silent);case"create":return h.createCreate(F,_.silent);case"drop":return h.createDrop(F,_.silent)}}function Ae(_){return h.createLoad(_.source,_.destination,_.silent)}function be(_){const F=_.source.default?"DEFAULT":_.source.name,D=_.destination.default?"DEFAULT":_.destination.name;switch(_.type){case"copy":return h.createCopy(F,D,_.silent);case"move":return h.createMove(F,D,_.silent);case"add":return h.createAdd(F,D,_.silent)}}function ee(_){const F={},D=Array.from(d).reduce((Q,Y)=>(Q[Y]=!0,Q),{});return l.default.mapOperation(_,{[i.types.DELETE_INSERT]:Q=>({result:h.createDeleteInsert(Q.delete,Q.insert,Q.where&&ee(Q.where)),recurse:!1}),[i.types.PATH]:(Q,Y)=>({result:Y.createPath(L(Q.subject),Q.predicate,L(Q.object),L(Q.graph)),recurse:!1}),[i.types.PATTERN]:(Q,Y)=>({result:Y.createPattern(L(Q.subject),L(Q.predicate),L(Q.object),L(Q.graph)),recurse:!1}),[i.types.CONSTRUCT]:Q=>({result:h.createConstruct(ee(Q.input),Q.template),recurse:!1})});function L(Q){if(Q.termType==="BlankNode"){let Y=F[Q.value];return Y||(Y=l.default.createUniqueVariable(Q.value,D,h.dataFactory),D[Y.value]=!0,F[Q.value]=Y),Y}return Q}}return hu}var Ja={},Lm={},or={},_be;function y7e(){if(_be)return or;_be=1,Object.defineProperty(or,"__esModule",{value:!0}),or.isTermGrounded=or.termToSignature=or.quadToSignature=or.sha1hex=or.hashTerm=or.hashTerms=or.getGraphBlankNodes=or.uniqGraph=or.deindexGraph=or.indexGraph=or.getQuadsWithoutBlankNodes=or.getQuadsWithBlankNodes=or.hasValue=or.hashValues=or.getBijectionInner=or.getBijection=or.isomorphic=void 0;const a=ic(),e=$t(),u=Yr();function n(S,N){return!!r(S,N)}or.isomorphic=n;function r(S,N){const j=d(c(S)),q=d(c(N));if(Object.keys(j).length!==Object.keys(q).length)return null;for(const C in j)if(j[C]!==q[C])return null;const O=p(s(S)),I=p(s(N)),A=h(S),P=h(N);return t(O,I,A,P)}or.getBijection=r;function t(S,N,j,q,O,I){O||(O={}),I||(I={});const[A,P]=g(S,j,O),[C,B]=g(N,q,I);if(Object.keys(A).length!==Object.keys(C).length)return null;for(const V in A)if(!l(C,A[V]))return null;let H={};for(const V of j){const G=e.termToString(V),Z=P[G];for(const ae in B)if(B[ae]===Z){H[G]=ae,delete B[ae];break}}if(!i(Object.keys(H).sort(),j.map(e.termToString).sort())||!i(o(H).sort(),q.map(e.termToString).sort())){H=null;for(const V of j){const G=e.termToString(V);if(!A[G])for(const Z of q){const ae=e.termToString(Z);if(!C[ae]&&P[G]===B[ae]){const W=m(G);H=t(S,N,j,q,Object.assign(Object.assign({},A),{[G]:W}),Object.assign(Object.assign({},C),{[ae]:W}))}}}}return H}or.getBijectionInner=t;function i(S,N){if(S.length!==N.length)return!1;for(let j=S.length;j--;)if(S[j]!==N[j])return!1;return!0}function o(S){const N=[];for(const j in S)N.push(S[j]);return N}or.hashValues=o;function l(S,N){for(const j in S)if(S[j]===N)return!0;return!1}or.hasValue=l;function s(S){return S.filter(N=>u.someTerms(N,j=>j.termType==="BlankNode"||j.termType==="Quad"&&u.getTermsNested(j).some(q=>q.termType==="BlankNode")))}or.getQuadsWithBlankNodes=s;function c(S){return S.filter(N=>u.everyTerms(N,j=>j.termType!=="BlankNode"&&!(j.termType==="Quad"&&u.getTermsNested(j).some(q=>q.termType==="BlankNode"))))}or.getQuadsWithoutBlankNodes=c;function d(S){const N={};for(const j of S)N[JSON.stringify(e.quadToStringQuad(j))]=!0;return N}or.indexGraph=d;function f(S){return Object.keys(S).map(N=>e.stringQuadToQuad(JSON.parse(N)))}or.deindexGraph=f;function p(S){return f(d(S))}or.uniqGraph=p;function h(S){return u.uniqTerms(S.map(N=>u.getBlankNodes(u.getTermsNested(N))).reduce((N,j)=>N.concat(j),[]))}or.getGraphBlankNodes=h;function g(S,N,j){const q=Object.assign({},j),O={};let I=!0;for(;I;){const A=Object.keys(q).length;for(const C of N){const B=e.termToString(C);if(!q[B]){const[H,V]=v(C,S,q);H&&(q[B]=V),O[B]=V}}const P={};for(const C in O){const B=O[C];P[B]===void 0?P[B]=C:P[B]=!1}for(const C in P){const B=P[C];B&&(q[B]=C)}I=A!==Object.keys(q).length}return[q,O]}or.hashTerms=g;function v(S,N,j){const q=[];let O=!0;for(const A of N){const P=u.getTermsNested(A);if(P.some(C=>C.equals(S))){q.push(T(A,j,S));for(const C of P)!E(C,j)&&!C.equals(S)&&(O=!1)}}const I=m(q.sort().join(""));return[O,I]}or.hashTerm=v;function m(S){return a.sha1().update(S).digest("hex")}or.sha1hex=m;function T(S,N,j){return u.getTerms(S).map(q=>w(q,N,j)).join("|")}or.quadToSignature=T;function w(S,N,j){return S.equals(j)?"@self":S.termType==="BlankNode"?N[e.termToString(S)]||"@blank":S.termType==="Quad"?`<${T(S,N,j)}>`:e.termToString(S)}or.termToSignature=w;function E(S,N){return S.termType!=="BlankNode"&&!(S.termType==="Quad"&&u.getTermsNested(S).some(j=>!E(j,N)))||!!N[e.termToString(S)]}return or.isTermGrounded=E,or}var Tbe;function m7e(){return Tbe||(Tbe=1,(function(a){var e=Lm&&Lm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t),Object.defineProperty(n,i,{enumerable:!0,get:function(){return r[t]}})}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Lm&&Lm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(y7e(),a)})(Lm)),Lm}var wbe;function b7e(){if(wbe)return Ja;wbe=1;var a=Ja&&Ja.__createBinding||(Object.create?(function(R,k,K,de){de===void 0&&(de=K);var ge=Object.getOwnPropertyDescriptor(k,K);(!ge||("get"in ge?!k.__esModule:ge.writable||ge.configurable))&&(ge={enumerable:!0,get:function(){return k[K]}}),Object.defineProperty(R,de,ge)}):(function(R,k,K,de){de===void 0&&(de=K),R[de]=k[K]})),e=Ja&&Ja.__setModuleDefault||(Object.create?(function(R,k){Object.defineProperty(R,"default",{enumerable:!0,value:k})}):function(R,k){R.default=k}),u=Ja&&Ja.__importStar||function(R){if(R&&R.__esModule)return R;var k={};if(R!=null)for(var K in R)K!=="default"&&Object.prototype.hasOwnProperty.call(R,K)&&a(k,R,K);return e(k,R),k},n=Ja&&Ja.__importDefault||function(R){return R&&R.__esModule?R:{default:R}};Object.defineProperty(Ja,"__esModule",{value:!0}),Ja.toSparqlJs=Ja.toSparql=void 0;const r=m7e(),t=$t(),i=$n(),o=u(uN()),l=n(jP()),s=n(FH()),c=o.types,d=o.expressionTypes;let f;const p=new l.default;function h(R,k={}){return new i.Generator(k).stringify(g(R))}Ja.toSparql=h;function g(R){v(),R=Le(R);let k=m(R);return k.type==="group"?k.patterns[0]:k}Ja.toSparqlJs=g;function v(){f={project:!1,extend:[],group:[],aggregates:[],order:[]}}function m(R){switch(R.type!==c.EXTEND&&R.type!==c.ORDER_BY&&R.type!==c.GRAPH&&(f.project=!1),R.type){case c.EXPRESSION:return T(R);case c.ASK:return Ae(R,c.ASK);case c.BGP:return C(R);case c.CONSTRUCT:return B(R);case c.DESCRIBE:return Ae(R,c.DESCRIBE);case c.DISTINCT:return H(R);case c.EXTEND:return V(R);case c.FROM:return G(R);case c.FILTER:return Z(R);case c.GRAPH:return ae(R);case c.GROUP:return W(R);case c.JOIN:return te(R);case c.LEFT_JOIN:return se(R);case c.MINUS:return pe(R);case c.NOP:return{};case c.ORDER_BY:return le(R);case c.PATH:return Ee(R);case c.PATTERN:return Oe(R);case c.PROJECT:return Ae(R,c.PROJECT);case c.REDUCED:return ee(R);case c.SERVICE:return _(R);case c.SLICE:return F(R);case c.UNION:return D(R);case c.VALUES:return L(R);case c.COMPOSITE_UPDATE:return Ce(R);case c.DELETE_INSERT:return Ve(R);case c.LOAD:return Ke(R);case c.CLEAR:return Ye(R);case c.CREATE:return oe(R);case c.DROP:return X(R);case c.ADD:return he(R);case c.MOVE:return ve(R);case c.COPY:return ye(R)}throw new Error(`Unknown Operation type ${R.type}`)}function T(R){switch(R.expressionType){case d.AGGREGATE:return S(R);case d.EXISTENCE:return N(R);case d.NAMED:return j(R);case d.OPERATOR:return q(R);case d.TERM:return O(R);case d.WILDCARD:return I(R)}throw new Error(`Unknown Expression Operation type ${R.expressionType}`)}function w(R){switch(R.type){case c.ALT:return Q(R);case c.INV:return Y(R);case c.LINK:return $(R);case c.NPS:return ue(R);case c.ONE_OR_MORE_PATH:return ne(R);case c.SEQ:return ce(R);case c.ZERO_OR_MORE_PATH:return Se(R);case c.ZERO_OR_ONE_PATH:return xe(R)}throw new Error(`Unknown Path type ${R.type}`)}function E(R){return(0,t.termToString)(R)}function S(R){const k={expression:T(R.expression),type:"aggregate",aggregation:R.aggregator,distinct:R.distinct};return R.separator&&(k.separator=R.separator),k}function N(R){return{type:"operation",operator:R.not?"notexists":"exists",args:[{type:"group",patterns:s.default.flatten([m(R.input)])}]}}function j(R){return{type:"functionCall",function:R.name,args:R.args.map(T)}}function q(R){if(R.operator==="desc"){const K={expression:T(R.args[0])};return K.descending=!0,K}const k={type:"operation",operator:R.operator,args:R.args.map(T)};return(k.operator==="in"||k.operator==="notin")&&(k.args=[k.args[0]].concat([k.args.slice(1)])),k}function O(R){return R.term}function I(R){return R.wildcard}function A(R){return Array.isArray(R)?R.length===1?R[0]:{type:"group",patterns:R}:R}function P(R){return R}function C(R){let k=R.patterns.map(Oe);return k.length===0?null:{type:"bgp",triples:k}}function B(R){return{type:"query",prefixes:{},queryType:"CONSTRUCT",template:R.template.map(Oe),where:s.default.flatten([m(R.input)])}}function H(R){let k=m(R.input);return k.patterns[0].distinct=!0,k}function V(R){return f.project?(f.extend.push(R),m(R.input)):s.default.flatten([m(R.input),{type:"bind",variable:R.variable,expression:T(R.expression)}])}function G(R){const k=m(R.input);let K=k;return k.type==="group"&&(K=k.patterns[0]),K.from={default:R.default,named:R.named},k}function Z(R){return{type:"group",patterns:s.default.flatten([m(R.input),{type:"filter",expression:T(R.expression)}])}}function ae(R){return{type:"graph",patterns:s.default.flatten([m(R.input)]),name:R.name}}function W(R){const k=m(R.input),K=R.aggregates.map(P);return f.aggregates.push(...K),f.group.push(...R.variables),k}function te(R){return s.default.flatten(R.input.map(m)).reduce((K,de)=>(de.type!=="bgp"||K.length==0||K[K.length-1].type!=="bgp"?K.push(de):K[K.length-1].triples.push(...de.triples),K),[])}function se(R){const k={type:"optional",patterns:[m(R.input[1])]};return R.expression&&k.patterns.push({type:"filter",expression:T(R.expression)}),k.patterns=s.default.flatten(k.patterns),s.default.flatten([m(R.input[0]),k])}function pe(R){let k=m(R.input[1]);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),s.default.flatten([m(R.input[0]),{type:"minus",patterns:k}])}function le(R){return f.order.push(...R.expressions),m(R.input)}function Ee(R){return{type:"bgp",triples:[{subject:R.subject,predicate:w(R.predicate),object:R.object}]}}function Oe(R){return{subject:R.subject,predicate:R.predicate,object:R.object}}function Ie(R,k){let K=s.default.isSimpleTerm(R)?E(R):R;if(typeof K=="string"){if(k[K])return k[K]}else if(Array.isArray(R))R=R.map(de=>Ie(de,k));else for(let de of Object.keys(R))R[de]=Ie(R[de],k);return R}function Ae(R,k){const K={type:"query",prefixes:{}},de=K;let ge;k===c.PROJECT?(K.queryType="SELECT",ge=R.variables):k===c.ASK?K.queryType="ASK":k===c.DESCRIBE&&(K.queryType="DESCRIBE",ge=R.terms);const Ue=f.extend,je=f.group,ze=f.aggregates,at=f.order;v(),f.project=!0;let fe=s.default.flatten([m(R.input)]);fe.length===1&&fe[0].type==="group"&&(fe=fe[0].patterns),K.where=fe;let Te={};for(let Me of f.aggregates)Te[E(Me.variable)]=T(Me);let qe={};for(let Me=f.extend.length-1;Me>=0;--Me){let st=f.extend[Me];qe[E(st.variable)]=Ie(T(st.expression),Te)}f.group.length>0&&(de.group=f.group.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return{expression:Me}})),f.order.length>0&&(de.order=f.order.map(m).map(Me=>Me.descending?Me:{expression:Me})),ge&&(de.variables=ge.map(Me=>{let st=E(Me);if(qe[st]){let tt=qe[st];return delete qe[st],{variable:Me,expression:tt}}return Me}),de.variables.length===0&&(de.variables=[new i.Wildcard]));const it=Object.entries(qe);if(it.length>0){de.where=de.where||[];for(const[Me,st]of it)de.where.push({type:"bind",variable:(0,t.stringToTerm)(Me),expression:st})}if(K.where.length>0&&K.where[K.where.length-1].type==="filter"){const Me=K.where[K.where.length-1];be(Me,Object.keys(Te))&&(de.having=s.default.flatten([Ie(Me.expression,Te)]),K.where.splice(-1))}return f.extend=Ue,f.group=je,f.aggregates=ze,f.order=at,{type:"group",patterns:[de]}}function be(R,k){return s.default.isSimpleTerm(R)?k.indexOf(E(R))>=0:Array.isArray(R)?R.some(K=>be(K,k)):R===Object(R)?Object.keys(R).some(K=>be(R[K],k)):k.indexOf(R)>=0}function ee(R){let k=m(R.input);return k.patterns[0].reduced=!0,k}function _(R){let k=m(R.input);return k.type==="group"&&(k=k.patterns),Array.isArray(k)||(k=[k]),{type:"service",name:R.name,silent:R.silent,patterns:k}}function F(R){let k=m(R.input),K=k;return k.type&&k.type==="group"&&(K=k.patterns[0]),R.start!==0&&(K.offset=R.start),R.length!==void 0&&(K.limit=R.length),k}function D(R){return{type:"union",patterns:R.input.map(m).map(A)}}function L(R){return{type:"values",values:R.bindings.map(k=>{let K={};for(let de of R.variables){let ge=`?${de.value}`;k[ge]?K[ge]=k[ge]:K[ge]=void 0}return K})}}function Q(R){const k=R.input.map(w);return k.every(K=>"pathType"in K&&K.pathType==="!")?{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:s.default.flatten(k.map(K=>K.items))}]}:{type:"path",pathType:"|",items:k}}function Y(R){if(R.path.type===c.NPS){const k=R.path.iris.map(K=>({type:"path",pathType:"^",items:[K]}));return k.length<=1?{type:"path",pathType:"!",items:k}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:k}]}}return{type:"path",pathType:"^",items:[w(R.path)]}}function $(R){return R.iri}function ue(R){return R.iris.length<=1?{type:"path",pathType:"!",items:R.iris}:{type:"path",pathType:"!",items:[{type:"path",pathType:"|",items:R.iris}]}}function ne(R){return{type:"path",pathType:"+",items:[w(R.path)]}}function ce(R){return{type:"path",pathType:"/",items:R.input.map(w)}}function Se(R){return{type:"path",pathType:"*",items:[w(R.path)]}}function xe(R){return{type:"path",pathType:"?",items:[w(R.path)]}}function Ce(R){const k=R.updates.map(K=>m(K).updates[0]);return{prefixes:{},type:"update",updates:k}}function Ve(R){var k;let K=R.where,de;if(K&&K.type===c.FROM){let Ue=K;K=Ue.input,de={default:Ue.default,named:Ue.named}}const ge=[{updateType:"insertdelete",delete:Ne(R.delete||[]),insert:Ne(R.insert||[])}];if(de&&(ge[0].using=de),!K||K.type===c.BGP&&K.patterns.length===0)ge[0].where=[];else{const Ue=[];let je=m(Pe(K,Ue));if(je.type==="group"?ge[0].where=je.patterns:ge[0].where=[je],Ue.length>0){if(Ue.length!==1)throw new Error("This is unexpected and might indicate an error in graph handling for updates.");((k=Ue[0])===null||k===void 0?void 0:k.value)!==""&&(ge[0].where=[{type:"graph",patterns:ge[0].where,name:Ue[0]}])}}return!R.delete&&!R.where?(ge[0].updateType="insert",delete ge[0].delete,delete ge[0].where):!R.insert&&!R.where?(delete ge[0].insert,delete ge[0].where,R.delete.some(Ue=>Ue.subject.termType==="Variable"||Ue.predicate.termType==="Variable"||Ue.object.termType==="Variable")?ge[0].updateType="deletewhere":ge[0].updateType="delete"):!R.insert&&R.where&&R.where.type==="bgp"&&(0,r.isomorphic)(R.delete,R.where.patterns)&&(delete ge[0].where,ge[0].updateType="deletewhere"),{prefixes:{},type:"update",updates:ge}}function Ke(R){const k=[{type:"load",silent:!!R.silent,source:R.source}];return R.destination&&(k[0].destination=R.destination),{prefixes:{},type:"update",updates:k}}function Ye(R){return J(R,"clear")}function oe(R){return J(R,"create")}function X(R){return J(R,"drop")}function J(R,k){const K=[{type:k,silent:!!R.silent}];return R.source==="DEFAULT"?K[0].graph={default:!0}:R.source==="NAMED"?K[0].graph={named:!0}:R.source==="ALL"?K[0].graph={all:!0}:K[0].graph={type:"graph",name:R.source},{prefixes:{},type:"update",updates:K}}function he(R){return re(R,"add")}function ve(R){return re(R,"move")}function ye(R){return re(R,"copy")}function re(R,k){const K=[{type:k,silent:!!R.silent}];return K[0].source=R.source==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.source},K[0].destination=R.destination==="DEFAULT"?{type:"graph",default:!0}:{type:"graph",name:R.destination},{prefixes:{},type:"update",updates:K}}function Ne(R){if(!R)return[];const k={};return R.forEach(K=>{const de=K.graph.value;k[de]||(k[de]=[]),k[de].push(K)}),Object.keys(k).map(K=>K===""?{type:"bgp",triples:k[K].map(Oe)}:{type:"graph",triples:k[K].map(Oe),name:k[K][0].graph})}function Le(R){return Pe(R,[])}function Pe(R,k){if(Array.isArray(R))return R.map(je=>Pe(je,k));if(!R.type||R.type===c.DELETE_INSERT)return R;if((R.type===c.PATTERN||R.type===c.PATH)&&R.graph)return k.push(R.graph),R.graph.name!==""?R.type===c.PATTERN?p.createPattern(R.subject,R.predicate,R.object):p.createPath(R.subject,R.predicate,R.object):R;const K={},de={},ge={};for(let je of Object.keys(R)){const ze=[];if(K[je]=Pe(R[je],ze),ze.length>0){de[je]=ze;for(const at of ze)ge[at.value]=at}}const Ue=Object.keys(ge);if(Ue.length>0)if(Ue.length===1&&![c.PROJECT,c.SERVICE].includes(R.type))k.push(ge[Ue[0]]);else{if(R.type===c.BGP)return Fe(R,de.patterns);for(let je of Object.keys(de)){const ze=K[je];Array.isArray(ze)?K[je]=ze.map((at,fe)=>de[je][0].value===""?at:p.createGraph(at,de[je][fe])):de[je][0].value!==""&&(K[je]=p.createGraph(ze,de[je][0]))}}return K}function Fe(R,k){var K;const de={};for(let je=0;je<R.patterns.length;++je){const ze=R.patterns[je],at=k[je].value;de[at]=(K=de[at])!==null&&K!==void 0?K:{patterns:[],graph:k[je]},de[at].patterns.push(ze)}let ge=[];for(const[je,{patterns:ze,graph:at}]of Object.entries(de)){const fe=p.createBgp(ze);ge.push(je===""?fe:p.createGraph(fe,at))}let Ue=ge[0];for(let je=1;je<ge.length;++je)Ue=p.createJoin([Ue,ge[je]]);return Ue}return Ja}var Sbe;function g7e(){return Sbe||(Sbe=1,(function(a){var e=uo&&uo.__createBinding||(Object.create?(function(c,d,f,p){p===void 0&&(p=f);var h=Object.getOwnPropertyDescriptor(d,f);(!h||("get"in h?!d.__esModule:h.writable||h.configurable))&&(h={enumerable:!0,get:function(){return d[f]}}),Object.defineProperty(c,p,h)}):(function(c,d,f,p){p===void 0&&(p=f),c[p]=d[f]})),u=uo&&uo.__setModuleDefault||(Object.create?(function(c,d){Object.defineProperty(c,"default",{enumerable:!0,value:d})}):function(c,d){c.default=d}),n=uo&&uo.__importStar||function(c){if(c&&c.__esModule)return c;var d={};if(c!=null)for(var f in c)f!=="default"&&Object.prototype.hasOwnProperty.call(c,f)&&e(d,c,f);return u(d,c),d},r=uo&&uo.__importDefault||function(c){return c&&c.__esModule?c:{default:c}};Object.defineProperty(a,"__esModule",{value:!0}),a.Util=a.toSparqlJs=a.toSparql=a.Factory=a.Algebra=a.translate=void 0;const t=r(h7e());a.translate=t.default;const i=n(uN());a.Algebra=i;const o=r(jP());a.Factory=o.default;const l=b7e();Object.defineProperty(a,"toSparql",{enumerable:!0,get:function(){return l.toSparql}}),Object.defineProperty(a,"toSparqlJs",{enumerable:!0,get:function(){return l.toSparqlJs}});const s=r(FH());a.Util=s.default})(uo)),uo}var Ebe;function v7e(){if(Ebe)return w6;Ebe=1,Object.defineProperty(w6,"__esModule",{value:!0}),w6.ActorOptimizeQueryOperationSetSeedSourcesQuadpatternIris=void 0;const a=Vi(),e=lt(),u=De(),n=g7e();let r=class extends a.ActorOptimizeQueryOperation{constructor(i){super(i)}async test(i){return(0,u.passTestVoid)()}async run(i){let o=i.context.get(e.KeysQueryOperation.querySources);return(!o||o.length===0)&&(o=await Promise.all([...new Set(this.extractIrisFromOperation(i.operation))].map(async l=>{const s=l.indexOf("#");s>=0&&(l=l.slice(0,s));const c=i.context.get(e.KeysStatistics.discoveredLinks);return c&&c.updateStatistic({url:l,metadata:{seed:!0}},{url:"root"}),(await this.mediatorQuerySourceIdentify.mediate({querySourceUnidentified:{value:l,context:new u.ActionContext().set(e.KeysQuerySourceIdentify.traverse,!0)},context:i.context})).querySource})),i.context=i.context.set(e.KeysQueryOperation.querySources,o)),{...i,context:i.context}}extractIrisFromOperation(i){const o=[];return n.Util.recurseOperation(i,{[n.Algebra.types.PATH]:l=>(this.extractSubjects&&l.subject.termType==="NamedNode"&&o.push(l.subject.value),this.extractObjects&&l.object.termType==="NamedNode"&&o.push(l.object.value),this.extractGraphs&&l.graph.termType==="NamedNode"&&o.push(l.graph.value),!1),[n.Algebra.types.PATTERN]:l=>(this.extractSubjects&&l.subject.termType==="NamedNode"&&o.push(l.subject.value),this.extractPredicates&&l.predicate.termType==="NamedNode"&&o.push(l.predicate.value),this.extractObjects&&l.object.termType==="NamedNode"&&(this.extractVocabIris||l.predicate.value!=="http://www.w3.org/1999/02/22-rdf-syntax-ns#type")&&o.push(l.object.value),this.extractGraphs&&l.graph.termType==="NamedNode"&&o.push(l.graph.value),!1)}),o}};return w6.ActorOptimizeQueryOperationSetSeedSourcesQuadpatternIris=r,w6}var Abe;function PH(){return Abe||(Abe=1,(function(a){var e=Cm&&Cm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Cm&&Cm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(v7e(),a)})(Cm)),Cm}var qm={},S6={},Obe;function _7e(){if(Obe)return S6;Obe=1,Object.defineProperty(S6,"__esModule",{value:!0}),S6.ActorOptimizeQueryOperationDescribeToConstructsSubject=void 0;const a=Vi(),e=lt(),u=De(),n=Ut();let r=class extends a.ActorOptimizeQueryOperation{constructor(i){super(i)}async test(i){return i.operation.type!==n.Algebra.types.DESCRIBE?(0,u.failTest)(`Actor ${this.name} only supports describe operations, but got ${i.operation.type}`):(0,u.passTest)(!0)}async run(i){const o=i.context.getSafe(e.KeysInitQuery.dataFactory),l=new n.Factory(o),s=i.operation,c=s.terms.filter(f=>f.termType!=="Variable").map(f=>{const p=[o.quad(f,o.variable("__predicate"),o.variable("__object"))];return p.forEach(g=>g.type="pattern"),{input:{type:n.Algebra.types.BGP,patterns:p},template:p,type:"construct"}});if(c.length!==s.terms.length){let f=[];s.terms.filter(p=>p.termType==="Variable").forEach((p,h)=>{const g=[o.quad(p,o.variable(`__predicate${h}`),o.variable(`__object${h}`))];g.forEach(v=>v.type="pattern"),f=[...f,...g]}),c.push({input:{type:n.Algebra.types.JOIN,input:[s.input,{type:n.Algebra.types.BGP,patterns:f}]},template:f,type:n.Algebra.types.CONSTRUCT})}return{operation:l.createUnion(c,!1),context:i.context}}};return S6.ActorOptimizeQueryOperationDescribeToConstructsSubject=r,S6}var xbe;function jH(){return xbe||(xbe=1,(function(a){var e=qm&&qm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=qm&&qm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(_7e(),a)})(qm)),qm}var d9,Rbe;function T7e(){return Rbe||(Rbe=1,d9=function(a){const e=new(Sq()).LoggerVoid,u=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^4.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),n=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links-queue/^4.0.0/components/ActorRdfResolveHypermediaLinksQueue.jsonld#ActorRdfResolveHypermediaLinksQueue_default_bus"}),r=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-extract-links/^0.0.0/components/ActorExtractLinks.jsonld#ActorExtractLinks_default_bus"}),t=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^4.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),i=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^4.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),o=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^4.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),l=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^4.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),s=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^4.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),c=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^4.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),d=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify-hypermedia/^4.0.0/components/ActorQuerySourceIdentifyHypermedia.jsonld#ActorQuerySourceIdentifyHypermedia_default_bus"}),f=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference/^4.0.0/components/ActorDereference.jsonld#ActorDereference_default_bus"}),p=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^4.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus"}),h=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^4.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),g=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^4.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),v=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/^4.0.0/components/ActorRdfMetadata.jsonld#ActorRdfMetadata_default_bus"}),m=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^4.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),T=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/^4.0.0/components/ActorRdfMetadataExtract.jsonld#ActorRdfMetadataExtract_default_bus"}),w=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^4.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),E=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^4.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),S=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/^4.0.0/components/ActorRdfResolveHypermediaLinks.jsonld#ActorRdfResolveHypermediaLinks_default_bus"}),N=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^4.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus"}),j=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-hypermedia/^4.0.0/components/ActorRdfUpdateHypermedia.jsonld#ActorRdfUpdateHypermedia_default_bus"}),q=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^4.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),O=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-bindings-aggregator-factory/^4.0.0/components/ActorBindingsAggregatorFactory.jsonld#ActorBindingsAggregatorFactory_default_bus"}),I=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-expression-evaluator-factory/^4.0.0/components/ActorExpressionEvaluatorFactory.jsonld#ActorExpressionEvaluatorFactory_default_bus"}),A=new(Je()).BusFunctionFactory({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-function-factory/^4.0.0/components/ActorFunctionFactory.jsonld#ActorFunctionFactory_default_bus"}),P=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),C=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_fallback_bus"}),B=new(qr()).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^4.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),H=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^4.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),V=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^4.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),G=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^4.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),Z=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-term-comparator-factory/^4.0.0/components/ActorTermComparatorFactory.jsonld#ActorTermComparatorFactory_default_bus"}),ae=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^4.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),W=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^4.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"}),te=new(Dq()).ActorRdfResolveHypermediaLinksQueueFifo({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#fifo",bus:n,busFailMessage:"Link queue creation failed: none of the configured actors were able to create a link queue starting from ${action.firstUrl}"}),se=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/mediators#main",bus:n});new(Js()).ActorExtractLinksPredicates({checkSubject:!1,predicateRegexes:["http://www.w3.org/2000/01/rdf-schema#seeAlso","http://www.w3.org/2002/07/owl##sameAs","http://xmlns.com/foaf/0.1/isPrimaryTopicOf"],name:"urn:comunica:default:extract-links/actors#predicates-common",bus:r}),new(Js()).ActorExtractLinksPredicates({checkSubject:!0,predicateRegexes:["http://www.w3.org/ns/ldp#contains"],name:"urn:comunica:default:extract-links/actors#predicates-ldp",bus:r}),new(Fq()).ActorExtractLinksHeaders({headersRegexes:['rel="describedby"'],name:"urn:comunica:default:extract-links/actors#links-describedby",bus:r}),new(Js()).ActorExtractLinksPredicates({checkSubject:!0,predicateRegexes:["http://www.w3.org/ns/pim/space#storage"],name:"urn:comunica:default:extract-links/actors#predicates-solid",bus:r}),new(jq()).ActorExtractLinksQuadPatternQuery({onlyVariables:!0,name:"urn:comunica:default:extract-links/actors#quad-pattern-query",bus:r});const pe=new(Mq()).MediatorCombineArray({filterErrors:!0,fields:["links","linksConditional"],name:"urn:comunica:default:extract-links/mediators#main",bus:r});new(Cq()).ActorContextPreprocessConvertShortcuts({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",dataFactory:"@comunica/actor-init-query:dataFactory",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",fileBaseIRI:"@comunica/actor-init-query:fileBaseIRI",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelayFallback:"@comunica/bus-http:http-retry-delay-fallback",httpRetryDelayLimit:"@comunica/bus-http:http-retry-delay-limit",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",invalidateCache:"@comunica/actor-init-query:invalidateCache",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",queryTimestampHighResolution:"@comunica/actor-init-query:queryTimestampHighResolution",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:t,busFailMessage:"Context preprocessing failed"}),new(Lq()).ActorContextPreprocessSetDefaults({logger:e,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:t,busFailMessage:"Context preprocessing failed"}),new(qq()).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:t,busFailMessage:"Context preprocessing failed"});const le=new(uP()).ActorContextPreprocessQuerySourceSkolemize({name:"urn:comunica:default:context-preprocess/actors#query-source-skolemize",bus:t,busFailMessage:"Context preprocessing failed"});new(zq()).ActorContextPreprocessSetDefaultsLinkTraversal({name:"urn:comunica:default:context-preprocess/actors#set-defaults-link-traversal",bus:t,busFailMessage:"Context preprocessing failed"});const Ee=new(n1()).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:t});new(Gq()).ActorHashBindingsMurmur({name:"urn:comunica:default:hash-bindings/actors#murmur",bus:i,busFailMessage:"Failed to obtaining hash functions for bindings"});const Oe=new(jt()).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:i});new($q()).ActorHashQuadsMurmur({name:"urn:comunica:default:hash-quads/actors#murmur",bus:o,busFailMessage:"Failed to obtaining hash functions for quads"});const Ie=new(jt()).MediatorRace({name:"urn:comunica:default:hash-quads/mediators#main",bus:o});new(Xq()).ActorOptimizeQueryOperationRewriteCopy({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(Kq()).ActorOptimizeQueryOperationRewriteMove({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(Jq()).ActorOptimizeQueryOperationRewriteAdd({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const Ae=new(Wq()).ActorOptimizeQueryOperationGroupSources({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});new(Yq()).ActorOptimizeQueryOperationConstructDistinct({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const be=new(n1()).MediatorCombinePipeline({filterFailures:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:l});new(Zq()).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:s,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'}),new(sB()).ActorQueryParseGraphql({name:"urn:comunica:default:query-parse/actors#graphql",bus:s,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'});const ee=new(jt()).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:s});new(fB()).ActorQueryResultSerializeJson({mediaTypePriorities:{"application/json":1},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#json",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(pB()).ActorQueryResultSerializeSimple({mediaTypePriorities:{simple:.9},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"urn:comunica:default:query-result-serialize/actors#simple",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(hB()).ActorQueryResultSerializeSparqlCsv({mediaTypePriorities:{"text/csv":.75},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"urn:comunica:default:query-result-serialize/actors#csv",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(yB()).ActorQueryResultSerializeSparqlTsv({mediaTypePriorities:{"text/tab-separated-values":.75},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"urn:comunica:default:query-result-serialize/actors#sparql-tsv",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(mB()).ActorQueryResultSerializeSparqlXml({mediaTypePriorities:{"application/sparql-results+xml":.8},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"urn:comunica:default:query-result-serialize/actors#sparql-xml",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(bB()).ActorQueryResultSerializeTable({columnWidth:50,mediaTypePriorities:{table:.6},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"urn:comunica:default:query-result-serialize/actors#table",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(vB()).ActorQueryResultSerializeTree({mediaTypePriorities:{tree:.5},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"urn:comunica:default:query-result-serialize/actors#tree",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"});const _=new(jt()).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:c}),F=new(vn()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:c}),D=new(vn()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:c}),L=new(oa()).MediatorNumber({field:"filterFactor",type:"max",ignoreFailures:!0,name:"urn:comunica:default:query-source-identify-hypermedia/mediators#main",bus:d}),Q=new(wB()).ActorDereferenceFallback({name:"urn:comunica:default:dereference/actors#fallback",bus:f,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}"}),Y=new(jt()).MediatorRace({name:"urn:comunica:default:dereference/mediators#main",bus:f}),$=new(jt()).MediatorRace({name:"urn:comunica:default:dereference-rdf/mediators#main",bus:p});new(EB()).ActorRdfJoinEntriesSortTraversalZeroKnowledge({name:"urn:comunica:default:rdf-join-entries-sort/actors#traversal-zero-knowledge",bus:h,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"});const ue=new(oa()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:h});new(AB()).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:g,busFailMessage:"Determining join selectivity failed: none of the configured actors were able to calculate selectivities"});const ne=new(oa()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:g});new(OB()).ActorRdfMetadataPrimaryTopic({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:"urn:comunica:default:rdf-metadata/actors#primary-topic",bus:v,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"}),new(xB()).ActorRdfMetadataAll({name:"urn:comunica:default:rdf-metadata/actors#all",bus:v,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"});const ce=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-metadata/mediators#main",bus:v});new(NB()).ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:m,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(IB()).ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:m,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(DB()).ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:m,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"});const Se=new(vn()).MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:m});new(FB()).ActorRdfMetadataExtractHydraControls({name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-controls",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(PB()).ActorRdfMetadataExtractHydraCount({predicates:["http://www.w3.org/ns/hydra/core#totalItems","http://rdfs.org/ns/void#triples"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-count",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(jB()).ActorRdfMetadataExtractHydraPagesize({predicates:["http://www.w3.org/ns/hydra/core#itemsPerPage"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-pagesize",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(MB()).ActorRdfMetadataExtractRequestTime({name:"urn:comunica:default:rdf-metadata-extract/actors#request-time",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(CB()).ActorRdfMetadataExtractAllowHttpMethods({name:"urn:comunica:default:rdf-metadata-extract/actors#allow-http-methods",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(LB()).ActorRdfMetadataExtractPutAccepted({name:"urn:comunica:default:rdf-metadata-extract/actors#put-accepted",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(qB()).ActorRdfMetadataExtractPatchSparqlUpdate({name:"urn:comunica:default:rdf-metadata-extract/actors#patch-sparql-update",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(BB()).ActorRdfMetadataExtractSparqlService({inferHttpsEndpoint:!0,name:"urn:comunica:default:rdf-metadata-extract/actors#sparql-service",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"});const xe=new(vn()).MediatorCombineUnion({filterFailures:!0,field:"metadata",name:"urn:comunica:default:rdf-metadata-extract/mediators#main",bus:T});new(zB()).ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(GB()).ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(XB()).ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(KB()).ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"});const Ce=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:w}),Ve=new(vn()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:w});new(JB()).ActorRdfParseHtml({busRdfParseHtml:E,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(YB()).ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:E,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(ZB()).ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:E,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(eU()).ActorRdfResolveHypermediaLinksNext({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#next",bus:S,busFailMessage:"Hypermedia link resolution failed: none of the configured actors were able to resolve links from metadata"}),new(tU()).ActorRdfResolveHypermediaLinksTraverse({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#traverse",bus:S,busFailMessage:"Hypermedia link resolution failed: none of the configured actors were able to resolve links from metadata"});const Ke=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links/mediators#main",bus:S});new(nU()).ActorRdfSerializeN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},name:"urn:comunica:default:rdf-serialize/actors#n3",bus:N,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(iU()).ActorRdfSerializeJsonLd({jsonStringifyIndentSpaces:2,mediaTypePriorities:{"application/ld+json":1},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-serialize/actors#jsonld",bus:N,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(oU()).ActorRdfSerializeShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-serialize/actors#shaclc",bus:N,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"});const Ye=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-serialize/mediators#serialize",bus:N}),oe=new(vn()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-serialize/mediators#mediaType",bus:N}),X=new(vn()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat",bus:N}),J=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-update-hypermedia/mediators#main",bus:j});new(cU()).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:q,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const he=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:q}),ve=new(jt()).MediatorRace({name:"urn:comunica:default:bindings-aggregator-factory/mediators#main",bus:O}),ye=new(jt()).MediatorRace({name:"urn:comunica:default:expression-evaluator-factory/mediators#main",bus:I});new(lU()).ActorFunctionFactoryExpressionBnode({name:"urn:comunica:default:function-factory/actors#expression-function-bnode",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dU()).ActorFunctionFactoryExpressionBound({name:"urn:comunica:default:function-factory/actors#expression-function-bound",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fU()).ActorFunctionFactoryExpressionCoalesce({name:"urn:comunica:default:function-factory/actors#expression-function-coalesce",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pU()).ActorFunctionFactoryExpressionConcat({name:"urn:comunica:default:function-factory/actors#expression-function-concat",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hU()).ActorFunctionFactoryExpressionExtensions({name:"urn:comunica:default:function-factory/actors#expression-function-extensions",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yU()).ActorFunctionFactoryExpressionIf({name:"urn:comunica:default:function-factory/actors#expression-function-if",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mU()).ActorFunctionFactoryExpressionLogicalAnd({name:"urn:comunica:default:function-factory/actors#expression-function-logical-and",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bU()).ActorFunctionFactoryExpressionLogicalOr({name:"urn:comunica:default:function-factory/actors#expression-function-logical-or",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gU()).ActorFunctionFactoryExpressionSameTerm({name:"urn:comunica:default:function-factory/actors#expression-function-same-term",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vU()).ActorFunctionFactoryTermAbs({name:"urn:comunica:default:function-factory/actors#term-function-abs",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_U()).ActorFunctionFactoryTermAddition({name:"urn:comunica:default:function-factory/actors#term-function-addition",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(TU()).ActorFunctionFactoryTermCeil({name:"urn:comunica:default:function-factory/actors#term-function-ceil",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wU()).ActorFunctionFactoryTermContains({name:"urn:comunica:default:function-factory/actors#term-function-contains",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(SU()).ActorFunctionFactoryTermDatatype({name:"urn:comunica:default:function-factory/actors#term-function-datatype",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(EU()).ActorFunctionFactoryTermDay({name:"urn:comunica:default:function-factory/actors#term-function-day",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(AU()).ActorFunctionFactoryTermDivision({name:"urn:comunica:default:function-factory/actors#term-function-division",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(OU()).ActorFunctionFactoryTermEncodeForUri({name:"urn:comunica:default:function-factory/actors#term-function-encode-for-uri",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xU()).ActorFunctionFactoryTermEquality({name:"urn:comunica:default:function-factory/actors#term-function-equality",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(RU()).ActorFunctionFactoryTermFloor({name:"urn:comunica:default:function-factory/actors#term-function-floor",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NU()).ActorFunctionFactoryTermHours({name:"urn:comunica:default:function-factory/actors#term-function-hours",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(IU()).ActorFunctionFactoryTermIri({name:"urn:comunica:default:function-factory/actors#term-function-iri",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(DU()).ActorFunctionFactoryTermIsBlank({name:"urn:comunica:default:function-factory/actors#term-function-is-blank",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FU()).ActorFunctionFactoryTermIsIri({name:"urn:comunica:default:function-factory/actors#term-function-is-iri",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(PU()).ActorFunctionFactoryTermIsLiteral({name:"urn:comunica:default:function-factory/actors#term-function-is-literal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jU()).ActorFunctionFactoryTermIsNumeric({name:"urn:comunica:default:function-factory/actors#term-function-is-numeric",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(MU()).ActorFunctionFactoryTermIsTriple({name:"urn:comunica:default:function-factory/actors#term-function-is-triple",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(CU()).ActorFunctionFactoryTermLang({name:"urn:comunica:default:function-factory/actors#term-function-lang",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LU()).ActorFunctionFactoryTermLangmatches({name:"urn:comunica:default:function-factory/actors#term-function-langmatches",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(qU()).ActorFunctionFactoryTermLcase({name:"urn:comunica:default:function-factory/actors#term-function-lcase",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(BU()).ActorFunctionFactoryTermMd5({name:"urn:comunica:default:function-factory/actors#term-function-md5",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(UU()).ActorFunctionFactoryTermMinutes({name:"urn:comunica:default:function-factory/actors#term-function-minutes",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(QU()).ActorFunctionFactoryTermMonth({name:"urn:comunica:default:function-factory/actors#term-function-month",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(VU()).ActorFunctionFactoryTermMultiplication({name:"urn:comunica:default:function-factory/actors#term-function-multiplication",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(HU()).ActorFunctionFactoryTermNot({name:"urn:comunica:default:function-factory/actors#term-function-not",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kU()).ActorFunctionFactoryTermNow({name:"urn:comunica:default:function-factory/actors#term-function-now",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zU()).ActorFunctionFactoryTermObject({name:"urn:comunica:default:function-factory/actors#term-function-object",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(GU()).ActorFunctionFactoryTermPredicate({name:"urn:comunica:default:function-factory/actors#term-function-predicate",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($U()).ActorFunctionFactoryTermRand({name:"urn:comunica:default:function-factory/actors#term-function-rand",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wP()).ActorFunctionFactoryTermRegex({name:"urn:comunica:default:function-factory/actors#term-function-regex",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(XU()).ActorFunctionFactoryTermReplace({name:"urn:comunica:default:function-factory/actors#term-function-replace",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(KU()).ActorFunctionFactoryTermRound({name:"urn:comunica:default:function-factory/actors#term-function-round",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(JU()).ActorFunctionFactoryTermSeconds({name:"urn:comunica:default:function-factory/actors#term-function-seconds",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(WU()).ActorFunctionFactoryTermSha1({name:"urn:comunica:default:function-factory/actors#term-function-sha1",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(YU()).ActorFunctionFactoryTermSha256({name:"urn:comunica:default:function-factory/actors#term-function-sha256",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ZU()).ActorFunctionFactoryTermSha384({name:"urn:comunica:default:function-factory/actors#term-function-sha384",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eQ()).ActorFunctionFactoryTermSha512({name:"urn:comunica:default:function-factory/actors#term-function-sha512",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tQ()).ActorFunctionFactoryTermStrAfter({name:"urn:comunica:default:function-factory/actors#term-function-str-after",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rQ()).ActorFunctionFactoryTermStrBefore({name:"urn:comunica:default:function-factory/actors#term-function-str-before",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nQ()).ActorFunctionFactoryTermStrDt({name:"urn:comunica:default:function-factory/actors#term-function-str-dt",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aQ()).ActorFunctionFactoryTermStrEnds({name:"urn:comunica:default:function-factory/actors#term-function-str-ends",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iQ()).ActorFunctionFactoryTermStrLang({name:"urn:comunica:default:function-factory/actors#term-function-str-lang",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uQ()).ActorFunctionFactoryTermStrLen({name:"urn:comunica:default:function-factory/actors#term-function-str-len",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(oQ()).ActorFunctionFactoryTermStrStarts({name:"urn:comunica:default:function-factory/actors#term-function-str-starts",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cQ()).ActorFunctionFactoryTermStrUuid({name:"urn:comunica:default:function-factory/actors#term-function-str-uuid",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(lQ()).ActorFunctionFactoryTermStr({name:"urn:comunica:default:function-factory/actors#term-function-str",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dQ()).ActorFunctionFactoryTermSubStr({name:"urn:comunica:default:function-factory/actors#term-function-sub-str",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fQ()).ActorFunctionFactoryTermSubject({name:"urn:comunica:default:function-factory/actors#term-function-subject",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pQ()).ActorFunctionFactoryTermSubtraction({name:"urn:comunica:default:function-factory/actors#term-function-subtraction",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hQ()).ActorFunctionFactoryTermTimezone({name:"urn:comunica:default:function-factory/actors#term-function-timezone",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yQ()).ActorFunctionFactoryTermTriple({name:"urn:comunica:default:function-factory/actors#term-function-triple",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mQ()).ActorFunctionFactoryTermTz({name:"urn:comunica:default:function-factory/actors#term-function-tz",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bQ()).ActorFunctionFactoryTermUcase({name:"urn:comunica:default:function-factory/actors#term-function-ucase",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gQ()).ActorFunctionFactoryTermUnaryMinus({name:"urn:comunica:default:function-factory/actors#term-function-unary-minus",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vQ()).ActorFunctionFactoryTermUnaryPlus({name:"urn:comunica:default:function-factory/actors#term-function-unary-plus",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_Q()).ActorFunctionFactoryTermUuid({name:"urn:comunica:default:function-factory/actors#term-function-uuid",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(TQ()).ActorFunctionFactoryTermXsdToBoolean({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-boolean",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wQ()).ActorFunctionFactoryTermXsdToDate({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-date",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(SQ()).ActorFunctionFactoryTermXsdToDatetime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-datetime",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(EQ()).ActorFunctionFactoryTermXsdToDayTimeDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-day-time-duration",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(AQ()).ActorFunctionFactoryTermXsdToDecimal({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-decimal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(OQ()).ActorFunctionFactoryTermXsdToDouble({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-double",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xQ()).ActorFunctionFactoryTermXsdToDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-duration",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(RQ()).ActorFunctionFactoryTermXsdToFloat({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-float",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NQ()).ActorFunctionFactoryTermXsdToInteger({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-integer",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(IQ()).ActorFunctionFactoryTermXsdToString({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-string",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(DQ()).ActorFunctionFactoryTermXsdToTime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-time",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FQ()).ActorFunctionFactoryTermXsdToYearMonthDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-year-month-duration",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(PQ()).ActorFunctionFactoryTermYear({name:"urn:comunica:default:function-factory/actors#term-function-year",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"});const re=new(jt()).MediatorRace({name:"urn:comunica:default:function-factory/mediators#main",bus:A}),Ne=new(jQ()).ActorHttpFetch({agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:P,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),Le=new(oa()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#no-fallback",bus:P}),Pe=new(oa()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#main",bus:C});new(MQ()).ActorQueryOperationSource({name:"urn:comunica:default:query-operation/actors#source",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Fe=new(oa()).MediatorNumber({field:"httpRequests",type:"min",ignoreFailures:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:B}),R=new(jt()).MediatorRace({name:"urn:comunica:default:query-process/mediators#main",bus:H}),k=new(jt()).MediatorRace({name:"urn:comunica:default:query-source-identify/mediators#main",bus:V}),K=new(CQ()).MediatorJoinCoefficientsFixed({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:G}),de=new(jt()).MediatorRace({name:"urn:comunica:default:term-comparator-factory/mediators#main",bus:Z}),ge=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^4.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Ue=new(LQ()).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:ae}),je=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-update-quads-hypermedia/^4.0.0/components/ActorRdfUpdateQuadsHypermedia.jsonld#IActorRdfUpdateQuadsHypermediaArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),ze=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-retry/^4.0.0/components/ActorHttpRetry.jsonld#IActorHttpQueueArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),at=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-operation-service/^4.0.0/components/ActorQueryOperationService.jsonld#IActorQueryOperationServiceArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),fe=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Te=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),qe=new(vn()).MediatorCombineUnion({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:W});new(qQ()).ActorRdfMetadataExtractTraverse({mediatorExtractLinks:pe,name:"urn:comunica:default:rdf-metadata-extract/actors#traverse",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(BQ()).ActorRdfJoinSingle({mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const it=new(QQ()).ActorRdfJoinSymmetricHash({mediatorHashBindings:Oe,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),Me=new(VQ()).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(u1()).ActorRdfJoinMinusHash({canHandleUndefs:!1,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#minus-hash-def",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(u1()).ActorRdfJoinMinusHash({canHandleUndefs:!0,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(HQ()).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(kQ()).ActorDereferenceRdfParse({mediatorDereference:Y,mediatorParse:Ce,mediatorParseMediatypes:Ve,mediaMappings:{htm:"text/html",html:"text/html",json:"application/json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"},name:"urn:comunica:default:dereference-rdf/actors#parse",bus:p,busFailMessage:"RDF dereferencing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(zQ()).ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:Ve,mediatorRdfParseHandle:Ce,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:E,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(GQ()).ActorQueryResultSerializeRdf({mediatorRdfSerialize:Ye,mediatorMediaTypeCombiner:oe,mediatorMediaTypeFormatCombiner:X,name:"urn:comunica:default:query-result-serialize/actors#rdf",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new($Q()).ActorBindingsAggregatorFactoryCount({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#count",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(XQ()).ActorBindingsAggregatorFactoryGroupConcat({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#group-concat",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(KQ()).ActorBindingsAggregatorFactorySample({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#sample",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(JQ()).ActorBindingsAggregatorFactoryWildcardCount({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#wildcard-count",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(WQ()).ActorBindingsAggregatorFactoryAverage({mediatorFunctionFactory:re,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#average",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(YQ()).ActorBindingsAggregatorFactorySum({mediatorFunctionFactory:re,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#sum",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(ZQ()).ActorFunctionFactoryExpressionIn({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#expression-function-in",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eV()).ActorFunctionFactoryExpressionNotIn({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#expression-function-not-in",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tV()).ActorFunctionFactoryTermGreaterThanEqual({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#term-function-greater-than-equal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rV()).ActorFunctionFactoryTermGreaterThan({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#term-function-greater-than",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nV()).ActorFunctionFactoryTermInequality({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#term-function-inequality",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aV()).ActorFunctionFactoryTermLesserThan({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iV()).ActorFunctionFactoryTermLesserThanEqual({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than-equal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uV()).ActorHttpWayback({mediatorHttp:Le,name:"urn:comunica:default:http/actors#wayback",bus:C,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),new(cV()).ActorRdfParseJsonLd({mediatorHttp:Pe,mediaTypePriorities:{"application/json":.15,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(dV()).ActorRdfUpdateHypermediaPatchSparqlUpdate({mediatorHttp:Pe,name:"urn:comunica:default:rdf-update-hypermedia/actors#patch-sparql-update",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(fV()).ActorRdfUpdateHypermediaPutLdp({mediatorHttp:Pe,mediatorRdfSerializeMediatypes:oe,mediatorRdfSerialize:Ye,name:"urn:comunica:default:rdf-update-hypermedia/actors#put-ldp",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(yV()).ActorRdfUpdateHypermediaSparql({mediatorHttp:Pe,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,name:"urn:comunica:default:rdf-update-hypermedia/actors#sparql",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(mV()).ActorQueryOperationAsk({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#ask",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(bV()).ActorQueryOperationBgpJoin({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#bgp",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(xP()).ActorQueryOperationConstruct({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#construct",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(gV()).ActorQueryOperationDistinctHash({mediatorHashBindings:Oe,mediatorHashQuads:Ie,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#distinct",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(vV()).ActorQueryOperationExtend({mediatorExpressionEvaluatorFactory:ye,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#extend",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(_V()).ActorQueryOperationFilter({mediatorExpressionEvaluatorFactory:ye,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#filter",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(TV()).ActorQueryOperationFromQuad({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#from",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(wV()).ActorQueryOperationProject({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#project",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(SV()).ActorQueryOperationReducedHash({mediatorHashBindings:Oe,cacheSize:100,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#reduced",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(EV()).ActorQueryOperationSlice({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#slice",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(RP()).ActorQueryOperationUnion({mediatorRdfMetadataAccumulate:Se,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#union",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(AV()).ActorQueryOperationPathAlt({mediatorRdfMetadataAccumulate:Se,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-alt",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(OV()).ActorQueryOperationPathInv({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-inv",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(xV()).ActorQueryOperationPathLink({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-link",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(RV()).ActorQueryOperationPathNps({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-nps",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(NV()).ActorQueryOperationClear({mediatorUpdateQuads:he,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-clear",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(IV()).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-composite",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(DV()).ActorQueryOperationCreate({mediatorUpdateQuads:he,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-create",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(FV()).ActorQueryOperationDrop({mediatorUpdateQuads:he,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-drop",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(PV()).ActorQueryOperationLoad({mediatorUpdateQuads:he,mediatorQuerySourceIdentify:k,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-load",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(CV()).ActorQuerySourceIdentifySerialized({mediatorRdfParse:Ce,mediatorQuerySourceIdentify:k,name:"urn:comunica:default:query-source-identify/actors#serialized",bus:V,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(LV()).ActorQueryOperationJoin({mediatorJoin:K,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#join",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(qV()).ActorQueryOperationLeftJoin({mediatorJoin:K,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(BV()).ActorQueryOperationMinus({mediatorJoin:K,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#minus",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(UV()).ActorQueryOperationPathSeq({mediatorJoin:K,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-seq",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const st=new(QV()).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:ue,mediatorJoin:K,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(VV()).ActorBindingsAggregatorFactoryMax({mediatorTermComparatorFactory:de,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#max",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(HV()).ActorBindingsAggregatorFactoryMin({mediatorTermComparatorFactory:de,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#min",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(kV()).ActorQueryOperationOrderBy({mediatorExpressionEvaluatorFactory:ye,mediatorTermComparatorFactory:de,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#orderby",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(z3e()).ActorRdfResolveHypermediaLinksQueueWrapperLimitDepth({limit:3,mediatorRdfResolveHypermediaLinksQueue:se,name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#wrapper-limit-depth",bus:n,busFailMessage:"Link queue creation failed: none of the configured actors were able to create a link queue starting from ${action.firstUrl}",beforeActors:[te]});const tt=new(zV()).ActorOptimizeQueryOperationFilterPushdown({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Ae]});new(GV()).ActorDereferenceHttp({mediatorHttp:Pe,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,name:"urn:comunica:default:dereference/actors#http",bus:f,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}",beforeActors:[Q]});const Ot=new($V()).ActorHttpInruptSolidClientAuthn({mediatorHttp:Pe,name:"urn:comunica:default:http/actors#inrupt-solid-client-authn",bus:P,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[Ne]});new(XV()).ActorContextPreprocessQuerySourceIdentify({cacheSize:100,httpInvalidator:ge,mediatorQuerySourceIdentify:k,mediatorContextPreprocess:Ee,name:"urn:comunica:default:context-preprocess/actors#query-source-identify",bus:t,busFailMessage:"Context preprocessing failed",beforeActors:[le]});const yt=new(Tb()).ActorInitQuery({mediatorQueryProcess:R,mediatorQueryResultSerialize:_,mediatorQueryResultSerializeMediaTypeCombiner:F,mediatorQueryResultSerializeMediaTypeFormatCombiner:D,mediatorHttpInvalidate:Ue,defaultQueryInputFormat:"sparql",allowNoSources:!0,name:"urn:comunica:default:init/actors#query",bus:u,busFailMessage:"Initialization failed: none of the configured actors were to initialize"});new(KV()).ActorRdfUpdateQuadsHypermedia({cacheSize:100,httpInvalidator:je,mediatorDereferenceRdf:$,mediatorMetadata:ce,mediatorMetadataExtract:xe,mediatorRdfUpdateHypermedia:J,name:"urn:comunica:default:rdf-update-quads/actors#hypermedia",bus:q,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const bt=new(o1()).ActionObserverHttp({httpInvalidator:fe,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActorQueryResultSerializeSparqlJson.jsonld#ActorQueryResultSerializeSparqlJson_default_observer",bus:P}),Tt=new(s1()).ActionObserverHttp({httpInvalidator:Te,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer",bus:P});new(WV()).ActorQuerySourceIdentifyHypermediaQpf({mediatorMetadata:ce,mediatorMetadataExtract:xe,mediatorDereferenceRdf:$,mediatorMergeBindingsContext:qe,subjectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject",predicateUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate",objectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",graphUri:"http://www.w3.org/ns/sparql-service-description#graph",name:"urn:comunica:default:query-source-identify-hypermedia/actors#qpf",bus:d,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(YV()).ActorQuerySourceIdentifyHypermediaSparql({mediatorHttp:Pe,mediatorMergeBindingsContext:qe,checkUrlSuffix:!0,forceHttpGet:!1,cacheSize:1024,forceSourceType:!1,bindMethod:"values",countTimeout:3e3,cardinalityCountQueries:!0,cardinalityEstimateConstruction:!1,forceGetIfUrlLengthBelow:600,name:"urn:comunica:default:query-source-identify-hypermedia/actors#sparql",bus:d,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(tH()).ActorQuerySourceIdentifyHypermediaNone({mediatorMergeBindingsContext:qe,name:"urn:comunica:default:query-source-identify-hypermedia/actors#none",bus:d,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(rH()).ActorExpressionEvaluatorFactoryDefault({mediatorQueryOperation:Fe,mediatorFunctionFactory:re,mediatorMergeBindingsContext:qe,name:"urn:comunica:default:expression-evaluator-factory/actors#default",bus:I,busFailMessage:"Creation of Expression Evaluator failed"}),new(nH()).ActorQueryOperationGroup({mediatorMergeBindingsContext:qe,mediatorBindingsAggregatorFactory:ve,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#group",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(aH()).ActorQueryOperationNop({mediatorMergeBindingsContext:qe,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#nop",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(iH()).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorMergeBindingsContext:qe,mediatorQuerySourceIdentify:k,httpInvalidator:at,cacheSize:32,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#service",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(uH()).ActorQueryOperationValues({mediatorMergeBindingsContext:qe,name:"urn:comunica:default:query-operation/actors#values",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(oH()).ActorQueryOperationPathOneOrMore({mediatorMergeBindingsContext:qe,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(sH()).ActorQueryOperationPathZeroOrMore({mediatorMergeBindingsContext:qe,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(cH()).ActorQueryOperationPathZeroOrOne({mediatorMergeBindingsContext:qe,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(lH()).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:he,mediatorMergeBindingsContext:qe,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const xt=new(dH()).ActorQueryProcessSequential({mediatorContextPreprocess:Ee,mediatorQueryParse:ee,mediatorOptimizeQueryOperation:be,mediatorQueryOperation:Fe,mediatorMergeBindingsContext:qe,name:"urn:comunica:default:query-process/actors#sequential",bus:H,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'});new(pH()).ActorQuerySourceIdentifyHypermedia({cacheSize:2048,maxIterators:64,aggregateTraversalStore:!0,emitPartialCardinalities:!1,mediatorDereferenceRdf:$,mediatorMetadata:ce,mediatorMetadataExtract:xe,mediatorMetadataAccumulate:Se,mediatorQuerySourceIdentifyHypermedia:L,mediatorRdfResolveHypermediaLinks:Ke,mediatorRdfResolveHypermediaLinksQueue:se,mediatorMergeBindingsContext:qe,name:"urn:comunica:default:query-source-identify/actors#hypermedia",bus:V,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(nN()).ActorQuerySourceIdentifyRdfJs({mediatorMergeBindingsContext:qe,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:V,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(hH()).ActorRdfJoinNone({mediatorMergeBindingsContext:qe,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(yH()).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:Fe,mediatorMergeBindingsContext:qe,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(mH()).ActorTermComparatorFactoryExpressionEvaluator({mediatorQueryOperation:Fe,mediatorFunctionFactory:re,mediatorMergeBindingsContext:qe,name:"urn:comunica:default:term-comparator-factory/actors#expression-evaluator",bus:Z,busFailMessage:"Creation of term comparator failed"});const wt=new(FP()).ActorRdfJoinMultiBind({bindOrder:"breadth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:ue,mediatorQueryOperation:Fe,mediatorMergeBindingsContext:qe,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[st,it,Me]});new(bH()).ActorRdfJoinMultiSmallestFilterBindings({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:ue,mediatorJoin:K,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[st,it,Me]}),new(_H()).ActorExtractLinksSolidTypeIndex({typeIndexPredicates:["http://www.w3.org/ns/solid/terms#publicTypeIndex","http://www.w3.org/ns/solid/terms#privateTypeIndex"],onlyMatchingTypes:!0,inference:!1,actorInitQuery:yt,mediatorDereferenceRdf:$,name:"urn:comunica:default:extract-links/actors#solid-type-index",bus:r}),new(o1()).ActorQueryResultSerializeSparqlJson({emitMetadata:!0,httpObserver:bt,mediaTypePriorities:{"application/sparql-results+json":.8},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#sparql-json",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(s1()).ActorQueryResultSerializeStats({httpObserver:Tt,mediaTypePriorities:{stats:.5},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"urn:comunica:default:query-result-serialize/actors#stats",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(TH()).ActorQueryProcessExplainParsed({queryProcessor:xt,name:"urn:comunica:default:query-process/actors#explain-parsed",bus:H,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(wH()).ActorQueryProcessExplainLogical({queryProcessor:xt,name:"urn:comunica:default:query-process/actors#explain-logical",bus:H,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(SH()).ActorQueryProcessExplainPhysical({queryProcessor:xt,name:"urn:comunica:default:query-process/actors#explain-physical",bus:H,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'});const gt=new(EH()).ActorOptimizeQueryOperationPruneEmptySourceOperations({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[tt]}),lr=new(AH()).ActorHttpProxy({mediatorHttp:Pe,name:"urn:comunica:default:http/actors#proxy",bus:P,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[Ne,Ot]});new(OH()).ActorRdfJoinMultiBindSource({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:ue,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[st,wt,it,Me]});const ht=new(xH()).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[gt]});new(RH()).ActorHttpRetry({mediatorHttp:Pe,httpInvalidator:ze,name:"urn:comunica:default:http/actors#retry",bus:P,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[lr]});const Re=new(NH()).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ht]}),Qe=new(IH()).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Re]}),ke=new(DH()).ActorOptimizeQueryOperationAssignSourcesExhaustive({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Qe]});return new(PH()).ActorOptimizeQueryOperationSetSeedSourcesQuadpatternIris({mediatorQuerySourceIdentify:k,extractSubjects:!0,extractPredicates:!1,extractObjects:!0,extractGraphs:!0,extractVocabIris:!1,name:"urn:comunica:default:optimize-query-operation/actors#set-seed-sources-quadpattern-iris",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ke]}),new(jH()).ActorOptimizeQueryOperationDescribeToConstructsSubject({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ke]}),yt}),d9}var Nbe;function w7e(){if(Nbe)return Bv;Nbe=1,Object.defineProperty(Bv,"__esModule",{value:!0}),Bv.QueryEngine=void 0;const a=Tb(),e=T7e();class u extends a.QueryEngineBase{constructor(r=e()){super(r)}}return Bv.QueryEngine=u,Bv}var Ibe;function S7e(){return Ibe||(Ibe=1,(function(a){var e=od&&od.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=od&&od.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(w7e(),a)})(od)),od}var E7e=S7e(),Bm={},E6={},f9,Dbe;function A7e(){return Dbe||(Dbe=1,f9=function(a){const e=new(Sq()).LoggerVoid,u=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^4.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),n=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links-queue/^4.0.0/components/ActorRdfResolveHypermediaLinksQueue.jsonld#ActorRdfResolveHypermediaLinksQueue_default_bus"}),r=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-extract-links/^0.0.0/components/ActorExtractLinks.jsonld#ActorExtractLinks_default_bus"}),t=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^4.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),i=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^4.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),o=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^4.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),l=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^4.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),s=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^4.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),c=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^4.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),d=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify-hypermedia/^4.0.0/components/ActorQuerySourceIdentifyHypermedia.jsonld#ActorQuerySourceIdentifyHypermedia_default_bus"}),f=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference/^4.0.0/components/ActorDereference.jsonld#ActorDereference_default_bus"}),p=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^4.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus"}),h=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^4.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),g=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^4.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),v=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/^4.0.0/components/ActorRdfMetadata.jsonld#ActorRdfMetadata_default_bus"}),m=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^4.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),T=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/^4.0.0/components/ActorRdfMetadataExtract.jsonld#ActorRdfMetadataExtract_default_bus"}),w=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^4.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),E=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^4.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),S=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/^4.0.0/components/ActorRdfResolveHypermediaLinks.jsonld#ActorRdfResolveHypermediaLinks_default_bus"}),N=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^4.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus"}),j=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-hypermedia/^4.0.0/components/ActorRdfUpdateHypermedia.jsonld#ActorRdfUpdateHypermedia_default_bus"}),q=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^4.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),O=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-bindings-aggregator-factory/^4.0.0/components/ActorBindingsAggregatorFactory.jsonld#ActorBindingsAggregatorFactory_default_bus"}),I=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-expression-evaluator-factory/^4.0.0/components/ActorExpressionEvaluatorFactory.jsonld#ActorExpressionEvaluatorFactory_default_bus"}),A=new(Je()).BusFunctionFactory({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-function-factory/^4.0.0/components/ActorFunctionFactory.jsonld#ActorFunctionFactory_default_bus"}),P=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),C=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_fallback_bus"}),B=new(qr()).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^4.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),H=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^4.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),V=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^4.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),G=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^4.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),Z=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-term-comparator-factory/^4.0.0/components/ActorTermComparatorFactory.jsonld#ActorTermComparatorFactory_default_bus"}),ae=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^4.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),W=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^4.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"}),te=new(Dq()).ActorRdfResolveHypermediaLinksQueueFifo({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#fifo",bus:n,busFailMessage:"Link queue creation failed: none of the configured actors were able to create a link queue starting from ${action.firstUrl}"}),se=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/mediators#main",bus:n});new(Js()).ActorExtractLinksPredicates({checkSubject:!1,predicateRegexes:["http://www.w3.org/2000/01/rdf-schema#seeAlso","http://www.w3.org/2002/07/owl##sameAs","http://xmlns.com/foaf/0.1/isPrimaryTopicOf"],name:"urn:comunica:default:extract-links/actors#predicates-common",bus:r}),new(Js()).ActorExtractLinksPredicates({checkSubject:!0,predicateRegexes:["http://www.w3.org/ns/ldp#contains"],name:"urn:comunica:default:extract-links/actors#predicates-ldp",bus:r}),new(Fq()).ActorExtractLinksHeaders({headersRegexes:['rel="describedby"'],name:"urn:comunica:default:extract-links/actors#links-describedby",bus:r}),new(Js()).ActorExtractLinksPredicates({checkSubject:!0,predicateRegexes:["http://www.w3.org/ns/pim/space#storage"],name:"urn:comunica:default:extract-links/actors#predicates-solid",bus:r}),new(jq()).ActorExtractLinksQuadPatternQuery({onlyVariables:!0,name:"urn:comunica:default:extract-links/actors#quad-pattern-query",bus:r});const pe=new(Mq()).MediatorCombineArray({filterErrors:!0,fields:["links","linksConditional"],name:"urn:comunica:default:extract-links/mediators#main",bus:r});new(Cq()).ActorContextPreprocessConvertShortcuts({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",dataFactory:"@comunica/actor-init-query:dataFactory",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",fileBaseIRI:"@comunica/actor-init-query:fileBaseIRI",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelayFallback:"@comunica/bus-http:http-retry-delay-fallback",httpRetryDelayLimit:"@comunica/bus-http:http-retry-delay-limit",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",invalidateCache:"@comunica/actor-init-query:invalidateCache",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",queryTimestampHighResolution:"@comunica/actor-init-query:queryTimestampHighResolution",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:t,busFailMessage:"Context preprocessing failed"}),new(Lq()).ActorContextPreprocessSetDefaults({logger:e,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:t,busFailMessage:"Context preprocessing failed"}),new(qq()).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:t,busFailMessage:"Context preprocessing failed"});const le=new(uP()).ActorContextPreprocessQuerySourceSkolemize({name:"urn:comunica:default:context-preprocess/actors#query-source-skolemize",bus:t,busFailMessage:"Context preprocessing failed"});new(zq()).ActorContextPreprocessSetDefaultsLinkTraversal({name:"urn:comunica:default:context-preprocess/actors#set-defaults-link-traversal",bus:t,busFailMessage:"Context preprocessing failed"});const Ee=new(n1()).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:t});new(Gq()).ActorHashBindingsMurmur({name:"urn:comunica:default:hash-bindings/actors#murmur",bus:i,busFailMessage:"Failed to obtaining hash functions for bindings"});const Oe=new(jt()).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:i});new($q()).ActorHashQuadsMurmur({name:"urn:comunica:default:hash-quads/actors#murmur",bus:o,busFailMessage:"Failed to obtaining hash functions for quads"});const Ie=new(jt()).MediatorRace({name:"urn:comunica:default:hash-quads/mediators#main",bus:o});new(Xq()).ActorOptimizeQueryOperationRewriteCopy({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(Kq()).ActorOptimizeQueryOperationRewriteMove({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(Jq()).ActorOptimizeQueryOperationRewriteAdd({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const Ae=new(Wq()).ActorOptimizeQueryOperationGroupSources({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});new(Yq()).ActorOptimizeQueryOperationConstructDistinct({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const be=new(n1()).MediatorCombinePipeline({filterFailures:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:l});new(Zq()).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:s,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'}),new(sB()).ActorQueryParseGraphql({name:"urn:comunica:default:query-parse/actors#graphql",bus:s,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'});const ee=new(jt()).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:s});new(fB()).ActorQueryResultSerializeJson({mediaTypePriorities:{"application/json":1},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#json",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(pB()).ActorQueryResultSerializeSimple({mediaTypePriorities:{simple:.9},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"urn:comunica:default:query-result-serialize/actors#simple",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(hB()).ActorQueryResultSerializeSparqlCsv({mediaTypePriorities:{"text/csv":.75},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"urn:comunica:default:query-result-serialize/actors#csv",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(yB()).ActorQueryResultSerializeSparqlTsv({mediaTypePriorities:{"text/tab-separated-values":.75},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"urn:comunica:default:query-result-serialize/actors#sparql-tsv",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(mB()).ActorQueryResultSerializeSparqlXml({mediaTypePriorities:{"application/sparql-results+xml":.8},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"urn:comunica:default:query-result-serialize/actors#sparql-xml",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(bB()).ActorQueryResultSerializeTable({columnWidth:50,mediaTypePriorities:{table:.6},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"urn:comunica:default:query-result-serialize/actors#table",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(vB()).ActorQueryResultSerializeTree({mediaTypePriorities:{tree:.5},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"urn:comunica:default:query-result-serialize/actors#tree",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"});const _=new(jt()).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:c}),F=new(vn()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:c}),D=new(vn()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:c}),L=new(oa()).MediatorNumber({field:"filterFactor",type:"max",ignoreFailures:!0,name:"urn:comunica:default:query-source-identify-hypermedia/mediators#main",bus:d}),Q=new(wB()).ActorDereferenceFallback({name:"urn:comunica:default:dereference/actors#fallback",bus:f,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}"}),Y=new(jt()).MediatorRace({name:"urn:comunica:default:dereference/mediators#main",bus:f}),$=new(jt()).MediatorRace({name:"urn:comunica:default:dereference-rdf/mediators#main",bus:p});new(EB()).ActorRdfJoinEntriesSortTraversalZeroKnowledge({name:"urn:comunica:default:rdf-join-entries-sort/actors#traversal-zero-knowledge",bus:h,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"});const ue=new(oa()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:h});new(AB()).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:g,busFailMessage:"Determining join selectivity failed: none of the configured actors were able to calculate selectivities"});const ne=new(oa()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:g});new(OB()).ActorRdfMetadataPrimaryTopic({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:"urn:comunica:default:rdf-metadata/actors#primary-topic",bus:v,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"}),new(xB()).ActorRdfMetadataAll({name:"urn:comunica:default:rdf-metadata/actors#all",bus:v,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"});const ce=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-metadata/mediators#main",bus:v});new(NB()).ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:m,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(IB()).ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:m,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(DB()).ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:m,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"});const Se=new(vn()).MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:m});new(FB()).ActorRdfMetadataExtractHydraControls({name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-controls",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(PB()).ActorRdfMetadataExtractHydraCount({predicates:["http://www.w3.org/ns/hydra/core#totalItems","http://rdfs.org/ns/void#triples"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-count",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(jB()).ActorRdfMetadataExtractHydraPagesize({predicates:["http://www.w3.org/ns/hydra/core#itemsPerPage"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-pagesize",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(MB()).ActorRdfMetadataExtractRequestTime({name:"urn:comunica:default:rdf-metadata-extract/actors#request-time",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(CB()).ActorRdfMetadataExtractAllowHttpMethods({name:"urn:comunica:default:rdf-metadata-extract/actors#allow-http-methods",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(LB()).ActorRdfMetadataExtractPutAccepted({name:"urn:comunica:default:rdf-metadata-extract/actors#put-accepted",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(qB()).ActorRdfMetadataExtractPatchSparqlUpdate({name:"urn:comunica:default:rdf-metadata-extract/actors#patch-sparql-update",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(BB()).ActorRdfMetadataExtractSparqlService({inferHttpsEndpoint:!0,name:"urn:comunica:default:rdf-metadata-extract/actors#sparql-service",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"});const xe=new(vn()).MediatorCombineUnion({filterFailures:!0,field:"metadata",name:"urn:comunica:default:rdf-metadata-extract/mediators#main",bus:T});new(zB()).ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(GB()).ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(XB()).ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(KB()).ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"});const Ce=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:w}),Ve=new(vn()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:w});new(JB()).ActorRdfParseHtml({busRdfParseHtml:E,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(YB()).ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:E,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(ZB()).ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:E,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(eU()).ActorRdfResolveHypermediaLinksNext({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#next",bus:S,busFailMessage:"Hypermedia link resolution failed: none of the configured actors were able to resolve links from metadata"}),new(tU()).ActorRdfResolveHypermediaLinksTraverse({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#traverse",bus:S,busFailMessage:"Hypermedia link resolution failed: none of the configured actors were able to resolve links from metadata"});const Ke=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links/mediators#main",bus:S});new(nU()).ActorRdfSerializeN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},name:"urn:comunica:default:rdf-serialize/actors#n3",bus:N,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(iU()).ActorRdfSerializeJsonLd({jsonStringifyIndentSpaces:2,mediaTypePriorities:{"application/ld+json":1},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-serialize/actors#jsonld",bus:N,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(oU()).ActorRdfSerializeShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-serialize/actors#shaclc",bus:N,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"});const Ye=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-serialize/mediators#serialize",bus:N}),oe=new(vn()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-serialize/mediators#mediaType",bus:N}),X=new(vn()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat",bus:N}),J=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-update-hypermedia/mediators#main",bus:j});new(cU()).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:q,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const he=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:q}),ve=new(jt()).MediatorRace({name:"urn:comunica:default:bindings-aggregator-factory/mediators#main",bus:O}),ye=new(jt()).MediatorRace({name:"urn:comunica:default:expression-evaluator-factory/mediators#main",bus:I});new(lU()).ActorFunctionFactoryExpressionBnode({name:"urn:comunica:default:function-factory/actors#expression-function-bnode",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dU()).ActorFunctionFactoryExpressionBound({name:"urn:comunica:default:function-factory/actors#expression-function-bound",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fU()).ActorFunctionFactoryExpressionCoalesce({name:"urn:comunica:default:function-factory/actors#expression-function-coalesce",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pU()).ActorFunctionFactoryExpressionConcat({name:"urn:comunica:default:function-factory/actors#expression-function-concat",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hU()).ActorFunctionFactoryExpressionExtensions({name:"urn:comunica:default:function-factory/actors#expression-function-extensions",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yU()).ActorFunctionFactoryExpressionIf({name:"urn:comunica:default:function-factory/actors#expression-function-if",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mU()).ActorFunctionFactoryExpressionLogicalAnd({name:"urn:comunica:default:function-factory/actors#expression-function-logical-and",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bU()).ActorFunctionFactoryExpressionLogicalOr({name:"urn:comunica:default:function-factory/actors#expression-function-logical-or",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gU()).ActorFunctionFactoryExpressionSameTerm({name:"urn:comunica:default:function-factory/actors#expression-function-same-term",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vU()).ActorFunctionFactoryTermAbs({name:"urn:comunica:default:function-factory/actors#term-function-abs",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_U()).ActorFunctionFactoryTermAddition({name:"urn:comunica:default:function-factory/actors#term-function-addition",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(TU()).ActorFunctionFactoryTermCeil({name:"urn:comunica:default:function-factory/actors#term-function-ceil",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wU()).ActorFunctionFactoryTermContains({name:"urn:comunica:default:function-factory/actors#term-function-contains",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(SU()).ActorFunctionFactoryTermDatatype({name:"urn:comunica:default:function-factory/actors#term-function-datatype",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(EU()).ActorFunctionFactoryTermDay({name:"urn:comunica:default:function-factory/actors#term-function-day",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(AU()).ActorFunctionFactoryTermDivision({name:"urn:comunica:default:function-factory/actors#term-function-division",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(OU()).ActorFunctionFactoryTermEncodeForUri({name:"urn:comunica:default:function-factory/actors#term-function-encode-for-uri",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xU()).ActorFunctionFactoryTermEquality({name:"urn:comunica:default:function-factory/actors#term-function-equality",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(RU()).ActorFunctionFactoryTermFloor({name:"urn:comunica:default:function-factory/actors#term-function-floor",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NU()).ActorFunctionFactoryTermHours({name:"urn:comunica:default:function-factory/actors#term-function-hours",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(IU()).ActorFunctionFactoryTermIri({name:"urn:comunica:default:function-factory/actors#term-function-iri",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(DU()).ActorFunctionFactoryTermIsBlank({name:"urn:comunica:default:function-factory/actors#term-function-is-blank",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FU()).ActorFunctionFactoryTermIsIri({name:"urn:comunica:default:function-factory/actors#term-function-is-iri",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(PU()).ActorFunctionFactoryTermIsLiteral({name:"urn:comunica:default:function-factory/actors#term-function-is-literal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jU()).ActorFunctionFactoryTermIsNumeric({name:"urn:comunica:default:function-factory/actors#term-function-is-numeric",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(MU()).ActorFunctionFactoryTermIsTriple({name:"urn:comunica:default:function-factory/actors#term-function-is-triple",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(CU()).ActorFunctionFactoryTermLang({name:"urn:comunica:default:function-factory/actors#term-function-lang",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LU()).ActorFunctionFactoryTermLangmatches({name:"urn:comunica:default:function-factory/actors#term-function-langmatches",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(qU()).ActorFunctionFactoryTermLcase({name:"urn:comunica:default:function-factory/actors#term-function-lcase",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(BU()).ActorFunctionFactoryTermMd5({name:"urn:comunica:default:function-factory/actors#term-function-md5",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(UU()).ActorFunctionFactoryTermMinutes({name:"urn:comunica:default:function-factory/actors#term-function-minutes",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(QU()).ActorFunctionFactoryTermMonth({name:"urn:comunica:default:function-factory/actors#term-function-month",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(VU()).ActorFunctionFactoryTermMultiplication({name:"urn:comunica:default:function-factory/actors#term-function-multiplication",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(HU()).ActorFunctionFactoryTermNot({name:"urn:comunica:default:function-factory/actors#term-function-not",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kU()).ActorFunctionFactoryTermNow({name:"urn:comunica:default:function-factory/actors#term-function-now",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zU()).ActorFunctionFactoryTermObject({name:"urn:comunica:default:function-factory/actors#term-function-object",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(GU()).ActorFunctionFactoryTermPredicate({name:"urn:comunica:default:function-factory/actors#term-function-predicate",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($U()).ActorFunctionFactoryTermRand({name:"urn:comunica:default:function-factory/actors#term-function-rand",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wP()).ActorFunctionFactoryTermRegex({name:"urn:comunica:default:function-factory/actors#term-function-regex",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(XU()).ActorFunctionFactoryTermReplace({name:"urn:comunica:default:function-factory/actors#term-function-replace",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(KU()).ActorFunctionFactoryTermRound({name:"urn:comunica:default:function-factory/actors#term-function-round",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(JU()).ActorFunctionFactoryTermSeconds({name:"urn:comunica:default:function-factory/actors#term-function-seconds",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(WU()).ActorFunctionFactoryTermSha1({name:"urn:comunica:default:function-factory/actors#term-function-sha1",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(YU()).ActorFunctionFactoryTermSha256({name:"urn:comunica:default:function-factory/actors#term-function-sha256",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ZU()).ActorFunctionFactoryTermSha384({name:"urn:comunica:default:function-factory/actors#term-function-sha384",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eQ()).ActorFunctionFactoryTermSha512({name:"urn:comunica:default:function-factory/actors#term-function-sha512",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tQ()).ActorFunctionFactoryTermStrAfter({name:"urn:comunica:default:function-factory/actors#term-function-str-after",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rQ()).ActorFunctionFactoryTermStrBefore({name:"urn:comunica:default:function-factory/actors#term-function-str-before",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nQ()).ActorFunctionFactoryTermStrDt({name:"urn:comunica:default:function-factory/actors#term-function-str-dt",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aQ()).ActorFunctionFactoryTermStrEnds({name:"urn:comunica:default:function-factory/actors#term-function-str-ends",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iQ()).ActorFunctionFactoryTermStrLang({name:"urn:comunica:default:function-factory/actors#term-function-str-lang",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uQ()).ActorFunctionFactoryTermStrLen({name:"urn:comunica:default:function-factory/actors#term-function-str-len",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(oQ()).ActorFunctionFactoryTermStrStarts({name:"urn:comunica:default:function-factory/actors#term-function-str-starts",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cQ()).ActorFunctionFactoryTermStrUuid({name:"urn:comunica:default:function-factory/actors#term-function-str-uuid",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(lQ()).ActorFunctionFactoryTermStr({name:"urn:comunica:default:function-factory/actors#term-function-str",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dQ()).ActorFunctionFactoryTermSubStr({name:"urn:comunica:default:function-factory/actors#term-function-sub-str",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fQ()).ActorFunctionFactoryTermSubject({name:"urn:comunica:default:function-factory/actors#term-function-subject",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pQ()).ActorFunctionFactoryTermSubtraction({name:"urn:comunica:default:function-factory/actors#term-function-subtraction",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hQ()).ActorFunctionFactoryTermTimezone({name:"urn:comunica:default:function-factory/actors#term-function-timezone",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yQ()).ActorFunctionFactoryTermTriple({name:"urn:comunica:default:function-factory/actors#term-function-triple",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mQ()).ActorFunctionFactoryTermTz({name:"urn:comunica:default:function-factory/actors#term-function-tz",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bQ()).ActorFunctionFactoryTermUcase({name:"urn:comunica:default:function-factory/actors#term-function-ucase",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gQ()).ActorFunctionFactoryTermUnaryMinus({name:"urn:comunica:default:function-factory/actors#term-function-unary-minus",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vQ()).ActorFunctionFactoryTermUnaryPlus({name:"urn:comunica:default:function-factory/actors#term-function-unary-plus",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_Q()).ActorFunctionFactoryTermUuid({name:"urn:comunica:default:function-factory/actors#term-function-uuid",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(TQ()).ActorFunctionFactoryTermXsdToBoolean({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-boolean",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wQ()).ActorFunctionFactoryTermXsdToDate({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-date",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(SQ()).ActorFunctionFactoryTermXsdToDatetime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-datetime",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(EQ()).ActorFunctionFactoryTermXsdToDayTimeDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-day-time-duration",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(AQ()).ActorFunctionFactoryTermXsdToDecimal({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-decimal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(OQ()).ActorFunctionFactoryTermXsdToDouble({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-double",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xQ()).ActorFunctionFactoryTermXsdToDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-duration",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(RQ()).ActorFunctionFactoryTermXsdToFloat({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-float",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NQ()).ActorFunctionFactoryTermXsdToInteger({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-integer",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(IQ()).ActorFunctionFactoryTermXsdToString({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-string",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(DQ()).ActorFunctionFactoryTermXsdToTime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-time",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FQ()).ActorFunctionFactoryTermXsdToYearMonthDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-year-month-duration",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(PQ()).ActorFunctionFactoryTermYear({name:"urn:comunica:default:function-factory/actors#term-function-year",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"});const re=new(jt()).MediatorRace({name:"urn:comunica:default:function-factory/mediators#main",bus:A}),Ne=new(jQ()).ActorHttpFetch({agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:P,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),Le=new(oa()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#no-fallback",bus:P}),Pe=new(oa()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#main",bus:C});new(MQ()).ActorQueryOperationSource({name:"urn:comunica:default:query-operation/actors#source",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const Fe=new(oa()).MediatorNumber({field:"httpRequests",type:"min",ignoreFailures:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:B}),R=new(jt()).MediatorRace({name:"urn:comunica:default:query-process/mediators#main",bus:H}),k=new(jt()).MediatorRace({name:"urn:comunica:default:query-source-identify/mediators#main",bus:V}),K=new(CQ()).MediatorJoinCoefficientsFixed({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:G}),de=new(jt()).MediatorRace({name:"urn:comunica:default:term-comparator-factory/mediators#main",bus:Z}),ge=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^4.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Ue=new(LQ()).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:ae}),je=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-update-quads-hypermedia/^4.0.0/components/ActorRdfUpdateQuadsHypermedia.jsonld#IActorRdfUpdateQuadsHypermediaArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),ze=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-retry/^4.0.0/components/ActorHttpRetry.jsonld#IActorHttpQueueArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),at=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-operation-service/^4.0.0/components/ActorQueryOperationService.jsonld#IActorQueryOperationServiceArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),fe=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),Te=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),qe=new(vn()).MediatorCombineUnion({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:W});new(qQ()).ActorRdfMetadataExtractTraverse({mediatorExtractLinks:pe,name:"urn:comunica:default:rdf-metadata-extract/actors#traverse",bus:T,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(BQ()).ActorRdfJoinSingle({mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const it=new(QQ()).ActorRdfJoinSymmetricHash({mediatorHashBindings:Oe,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),Me=new(VQ()).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(u1()).ActorRdfJoinMinusHash({canHandleUndefs:!1,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#minus-hash-def",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(u1()).ActorRdfJoinMinusHash({canHandleUndefs:!0,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(HQ()).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(kQ()).ActorDereferenceRdfParse({mediatorDereference:Y,mediatorParse:Ce,mediatorParseMediatypes:Ve,mediaMappings:{htm:"text/html",html:"text/html",json:"application/json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"},name:"urn:comunica:default:dereference-rdf/actors#parse",bus:p,busFailMessage:"RDF dereferencing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(zQ()).ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:Ve,mediatorRdfParseHandle:Ce,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:E,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(GQ()).ActorQueryResultSerializeRdf({mediatorRdfSerialize:Ye,mediatorMediaTypeCombiner:oe,mediatorMediaTypeFormatCombiner:X,name:"urn:comunica:default:query-result-serialize/actors#rdf",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new($Q()).ActorBindingsAggregatorFactoryCount({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#count",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(XQ()).ActorBindingsAggregatorFactoryGroupConcat({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#group-concat",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(KQ()).ActorBindingsAggregatorFactorySample({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#sample",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(JQ()).ActorBindingsAggregatorFactoryWildcardCount({mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#wildcard-count",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(WQ()).ActorBindingsAggregatorFactoryAverage({mediatorFunctionFactory:re,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#average",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(YQ()).ActorBindingsAggregatorFactorySum({mediatorFunctionFactory:re,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#sum",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(ZQ()).ActorFunctionFactoryExpressionIn({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#expression-function-in",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eV()).ActorFunctionFactoryExpressionNotIn({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#expression-function-not-in",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tV()).ActorFunctionFactoryTermGreaterThanEqual({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#term-function-greater-than-equal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rV()).ActorFunctionFactoryTermGreaterThan({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#term-function-greater-than",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nV()).ActorFunctionFactoryTermInequality({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#term-function-inequality",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iV()).ActorFunctionFactoryTermLesserThanEqual({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than-equal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aV()).ActorFunctionFactoryTermLesserThan({mediatorFunctionFactory:re,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uV()).ActorHttpWayback({mediatorHttp:Le,name:"urn:comunica:default:http/actors#wayback",bus:C,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),new(cV()).ActorRdfParseJsonLd({mediatorHttp:Pe,mediaTypePriorities:{"application/json":.15,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:w,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(dV()).ActorRdfUpdateHypermediaPatchSparqlUpdate({mediatorHttp:Pe,name:"urn:comunica:default:rdf-update-hypermedia/actors#patch-sparql-update",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(fV()).ActorRdfUpdateHypermediaPutLdp({mediatorHttp:Pe,mediatorRdfSerializeMediatypes:oe,mediatorRdfSerialize:Ye,name:"urn:comunica:default:rdf-update-hypermedia/actors#put-ldp",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(yV()).ActorRdfUpdateHypermediaSparql({mediatorHttp:Pe,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,name:"urn:comunica:default:rdf-update-hypermedia/actors#sparql",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(mV()).ActorQueryOperationAsk({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#ask",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(bV()).ActorQueryOperationBgpJoin({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#bgp",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(xP()).ActorQueryOperationConstruct({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#construct",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(gV()).ActorQueryOperationDistinctHash({mediatorHashBindings:Oe,mediatorHashQuads:Ie,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#distinct",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(vV()).ActorQueryOperationExtend({mediatorExpressionEvaluatorFactory:ye,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#extend",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(_V()).ActorQueryOperationFilter({mediatorExpressionEvaluatorFactory:ye,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#filter",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(TV()).ActorQueryOperationFromQuad({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#from",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(wV()).ActorQueryOperationProject({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#project",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(SV()).ActorQueryOperationReducedHash({mediatorHashBindings:Oe,cacheSize:100,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#reduced",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(EV()).ActorQueryOperationSlice({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#slice",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(RP()).ActorQueryOperationUnion({mediatorRdfMetadataAccumulate:Se,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#union",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(AV()).ActorQueryOperationPathAlt({mediatorRdfMetadataAccumulate:Se,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-alt",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(OV()).ActorQueryOperationPathInv({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-inv",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(xV()).ActorQueryOperationPathLink({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-link",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(RV()).ActorQueryOperationPathNps({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-nps",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(NV()).ActorQueryOperationClear({mediatorUpdateQuads:he,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-clear",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(IV()).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-composite",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(DV()).ActorQueryOperationCreate({mediatorUpdateQuads:he,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-create",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(FV()).ActorQueryOperationDrop({mediatorUpdateQuads:he,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-drop",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(PV()).ActorQueryOperationLoad({mediatorUpdateQuads:he,mediatorQuerySourceIdentify:k,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-load",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(CV()).ActorQuerySourceIdentifySerialized({mediatorRdfParse:Ce,mediatorQuerySourceIdentify:k,name:"urn:comunica:default:query-source-identify/actors#serialized",bus:V,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(LV()).ActorQueryOperationJoin({mediatorJoin:K,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#join",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(qV()).ActorQueryOperationLeftJoin({mediatorJoin:K,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(BV()).ActorQueryOperationMinus({mediatorJoin:K,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#minus",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(UV()).ActorQueryOperationPathSeq({mediatorJoin:K,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-seq",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const st=new(QV()).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:ue,mediatorJoin:K,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(VV()).ActorBindingsAggregatorFactoryMax({mediatorTermComparatorFactory:de,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#max",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(HV()).ActorBindingsAggregatorFactoryMin({mediatorTermComparatorFactory:de,mediatorExpressionEvaluatorFactory:ye,name:"urn:comunica:default:bindings-aggregator-factory/actors#min",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(kV()).ActorQueryOperationOrderBy({mediatorExpressionEvaluatorFactory:ye,mediatorTermComparatorFactory:de,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#orderby",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(z3e()).ActorRdfResolveHypermediaLinksQueueWrapperLimitDepth({limit:3,mediatorRdfResolveHypermediaLinksQueue:se,name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#wrapper-limit-depth",bus:n,busFailMessage:"Link queue creation failed: none of the configured actors were able to create a link queue starting from ${action.firstUrl}",beforeActors:[te]});const tt=new(zV()).ActorOptimizeQueryOperationFilterPushdown({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Ae]});new(GV()).ActorDereferenceHttp({mediatorHttp:Pe,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,name:"urn:comunica:default:dereference/actors#http",bus:f,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}",beforeActors:[Q]});const Ot=new($V()).ActorHttpInruptSolidClientAuthn({mediatorHttp:Pe,name:"urn:comunica:default:http/actors#inrupt-solid-client-authn",bus:P,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[Ne]});new(XV()).ActorContextPreprocessQuerySourceIdentify({cacheSize:100,httpInvalidator:ge,mediatorQuerySourceIdentify:k,mediatorContextPreprocess:Ee,name:"urn:comunica:default:context-preprocess/actors#query-source-identify",bus:t,busFailMessage:"Context preprocessing failed",beforeActors:[le]});const yt=new(Tb()).ActorInitQuery({mediatorQueryProcess:R,mediatorQueryResultSerialize:_,mediatorQueryResultSerializeMediaTypeCombiner:F,mediatorQueryResultSerializeMediaTypeFormatCombiner:D,mediatorHttpInvalidate:Ue,defaultQueryInputFormat:"sparql",allowNoSources:!0,name:"urn:comunica:default:init/actors#query",bus:u,busFailMessage:"Initialization failed: none of the configured actors were to initialize"});new(KV()).ActorRdfUpdateQuadsHypermedia({cacheSize:100,httpInvalidator:je,mediatorDereferenceRdf:$,mediatorMetadata:ce,mediatorMetadataExtract:xe,mediatorRdfUpdateHypermedia:J,name:"urn:comunica:default:rdf-update-quads/actors#hypermedia",bus:q,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const bt=new(o1()).ActionObserverHttp({httpInvalidator:fe,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActorQueryResultSerializeSparqlJson.jsonld#ActorQueryResultSerializeSparqlJson_default_observer",bus:P}),Tt=new(s1()).ActionObserverHttp({httpInvalidator:Te,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer",bus:P});new(WV()).ActorQuerySourceIdentifyHypermediaQpf({mediatorMetadata:ce,mediatorMetadataExtract:xe,mediatorDereferenceRdf:$,mediatorMergeBindingsContext:qe,subjectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject",predicateUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate",objectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",graphUri:"http://www.w3.org/ns/sparql-service-description#graph",name:"urn:comunica:default:query-source-identify-hypermedia/actors#qpf",bus:d,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(YV()).ActorQuerySourceIdentifyHypermediaSparql({mediatorHttp:Pe,mediatorMergeBindingsContext:qe,checkUrlSuffix:!0,forceHttpGet:!1,cacheSize:1024,forceSourceType:!1,bindMethod:"values",countTimeout:3e3,cardinalityCountQueries:!0,cardinalityEstimateConstruction:!1,forceGetIfUrlLengthBelow:600,name:"urn:comunica:default:query-source-identify-hypermedia/actors#sparql",bus:d,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(tH()).ActorQuerySourceIdentifyHypermediaNone({mediatorMergeBindingsContext:qe,name:"urn:comunica:default:query-source-identify-hypermedia/actors#none",bus:d,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(rH()).ActorExpressionEvaluatorFactoryDefault({mediatorQueryOperation:Fe,mediatorFunctionFactory:re,mediatorMergeBindingsContext:qe,name:"urn:comunica:default:expression-evaluator-factory/actors#default",bus:I,busFailMessage:"Creation of Expression Evaluator failed"}),new(nH()).ActorQueryOperationGroup({mediatorMergeBindingsContext:qe,mediatorBindingsAggregatorFactory:ve,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#group",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(aH()).ActorQueryOperationNop({mediatorMergeBindingsContext:qe,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#nop",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(iH()).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorMergeBindingsContext:qe,mediatorQuerySourceIdentify:k,httpInvalidator:at,cacheSize:32,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#service",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(uH()).ActorQueryOperationValues({mediatorMergeBindingsContext:qe,name:"urn:comunica:default:query-operation/actors#values",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(oH()).ActorQueryOperationPathOneOrMore({mediatorMergeBindingsContext:qe,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(sH()).ActorQueryOperationPathZeroOrMore({mediatorMergeBindingsContext:qe,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(cH()).ActorQueryOperationPathZeroOrOne({mediatorMergeBindingsContext:qe,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(lH()).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:he,mediatorMergeBindingsContext:qe,mediatorQueryOperation:Fe,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:B,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const xt=new(dH()).ActorQueryProcessSequential({mediatorContextPreprocess:Ee,mediatorQueryParse:ee,mediatorOptimizeQueryOperation:be,mediatorQueryOperation:Fe,mediatorMergeBindingsContext:qe,name:"urn:comunica:default:query-process/actors#sequential",bus:H,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'});new(pH()).ActorQuerySourceIdentifyHypermedia({cacheSize:2048,maxIterators:64,aggregateTraversalStore:!0,emitPartialCardinalities:!1,mediatorDereferenceRdf:$,mediatorMetadata:ce,mediatorMetadataExtract:xe,mediatorMetadataAccumulate:Se,mediatorQuerySourceIdentifyHypermedia:L,mediatorRdfResolveHypermediaLinks:Ke,mediatorRdfResolveHypermediaLinksQueue:se,mediatorMergeBindingsContext:qe,name:"urn:comunica:default:query-source-identify/actors#hypermedia",bus:V,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(nN()).ActorQuerySourceIdentifyRdfJs({mediatorMergeBindingsContext:qe,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:V,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(hH()).ActorRdfJoinNone({mediatorMergeBindingsContext:qe,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(yH()).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:Fe,mediatorMergeBindingsContext:qe,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(mH()).ActorTermComparatorFactoryExpressionEvaluator({mediatorQueryOperation:Fe,mediatorFunctionFactory:re,mediatorMergeBindingsContext:qe,name:"urn:comunica:default:term-comparator-factory/actors#expression-evaluator",bus:Z,busFailMessage:"Creation of term comparator failed"});const wt=new(FP()).ActorRdfJoinMultiBind({bindOrder:"breadth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:ue,mediatorQueryOperation:Fe,mediatorMergeBindingsContext:qe,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[st,it,Me]});new(bH()).ActorRdfJoinMultiSmallestFilterBindings({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:ue,mediatorJoin:K,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[st,it,Me]}),new(_H()).ActorExtractLinksSolidTypeIndex({typeIndexPredicates:["http://www.w3.org/ns/solid/terms#publicTypeIndex","http://www.w3.org/ns/solid/terms#privateTypeIndex"],onlyMatchingTypes:!0,inference:!1,actorInitQuery:yt,mediatorDereferenceRdf:$,name:"urn:comunica:default:extract-links/actors#solid-type-index",bus:r}),new(o1()).ActorQueryResultSerializeSparqlJson({emitMetadata:!0,httpObserver:bt,mediaTypePriorities:{"application/sparql-results+json":.8},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#sparql-json",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(s1()).ActorQueryResultSerializeStats({httpObserver:Tt,mediaTypePriorities:{stats:.5},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"urn:comunica:default:query-result-serialize/actors#stats",bus:c,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(TH()).ActorQueryProcessExplainParsed({queryProcessor:xt,name:"urn:comunica:default:query-process/actors#explain-parsed",bus:H,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(wH()).ActorQueryProcessExplainLogical({queryProcessor:xt,name:"urn:comunica:default:query-process/actors#explain-logical",bus:H,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(SH()).ActorQueryProcessExplainPhysical({queryProcessor:xt,name:"urn:comunica:default:query-process/actors#explain-physical",bus:H,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'});const gt=new(EH()).ActorOptimizeQueryOperationPruneEmptySourceOperations({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[tt]}),lr=new(AH()).ActorHttpProxy({mediatorHttp:Pe,name:"urn:comunica:default:http/actors#proxy",bus:P,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[Ne,Ot]});new(OH()).ActorRdfJoinMultiBindSource({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:ue,mediatorJoinSelectivity:ne,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:G,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[st,wt,it,Me]});const ht=new(xH()).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[gt]});new(RH()).ActorHttpRetry({mediatorHttp:Pe,httpInvalidator:ze,name:"urn:comunica:default:http/actors#retry",bus:P,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[lr]});const Re=new(NH()).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ht]}),Qe=new(IH()).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Re]}),ke=new(DH()).ActorOptimizeQueryOperationAssignSourcesExhaustive({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Qe]});return new(PH()).ActorOptimizeQueryOperationSetSeedSourcesQuadpatternIris({mediatorQuerySourceIdentify:k,extractSubjects:!0,extractPredicates:!1,extractObjects:!0,extractGraphs:!0,extractVocabIris:!1,name:"urn:comunica:default:optimize-query-operation/actors#set-seed-sources-quadpattern-iris",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ke]}),new(jH()).ActorOptimizeQueryOperationDescribeToConstructsSubject({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:l,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ke]}),yt}),f9}var Fbe;function O7e(){if(Fbe)return E6;Fbe=1,Object.defineProperty(E6,"__esModule",{value:!0}),E6.QueryEngine=void 0;const a=Tb(),e=A7e();class u extends a.QueryEngineBase{constructor(r=e()){super(r)}}return E6.QueryEngine=u,E6}var Pbe;function x7e(){return Pbe||(Pbe=1,(function(a){var e=Bm&&Bm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Bm&&Bm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(O7e(),a)})(Bm)),Bm}var R7e=x7e(),Um={},A6={},p9,jbe;function N7e(){return jbe||(jbe=1,p9=function(a){const e=new(Sq()).LoggerVoid,u=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^4.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),n=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-extract-links/^0.0.0/components/ActorExtractLinks.jsonld#ActorExtractLinks_default_bus"}),r=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^4.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),t=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^4.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),i=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-quads/^4.0.0/components/ActorHashQuads.jsonld#ActorHashQuads_default_bus"}),o=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^4.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),l=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^4.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),s=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^4.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),c=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify-hypermedia/^4.0.0/components/ActorQuerySourceIdentifyHypermedia.jsonld#ActorQuerySourceIdentifyHypermedia_default_bus"}),d=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference/^4.0.0/components/ActorDereference.jsonld#ActorDereference_default_bus"}),f=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-dereference-rdf/^4.0.0/components/ActorDereferenceRdf.jsonld#ActorDereferenceRdf_default_bus"}),p=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^4.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),h=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^4.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),g=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata/^4.0.0/components/ActorRdfMetadata.jsonld#ActorRdfMetadata_default_bus"}),v=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-accumulate/^4.0.0/components/ActorRdfMetadataAccumulate.jsonld#ActorRdfMetadataAccumulate_default_bus"}),m=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-metadata-extract/^4.0.0/components/ActorRdfMetadataExtract.jsonld#ActorRdfMetadataExtract_default_bus"}),T=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse/^4.0.0/components/ActorRdfParse.jsonld#ActorRdfParse_default_bus"}),w=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-parse-html/^4.0.0/components/ActorRdfParseHtml.jsonld#ActorRdfParseHtml_default_bus"}),E=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links/^4.0.0/components/ActorRdfResolveHypermediaLinks.jsonld#ActorRdfResolveHypermediaLinks_default_bus"}),S=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-hypermedia-links-queue/^4.0.0/components/ActorRdfResolveHypermediaLinksQueue.jsonld#ActorRdfResolveHypermediaLinksQueue_default_bus"}),N=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^4.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus"}),j=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-hypermedia/^4.0.0/components/ActorRdfUpdateHypermedia.jsonld#ActorRdfUpdateHypermedia_default_bus"}),q=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^4.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),O=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-bindings-aggregator-factory/^4.0.0/components/ActorBindingsAggregatorFactory.jsonld#ActorBindingsAggregatorFactory_default_bus"}),I=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-expression-evaluator-factory/^4.0.0/components/ActorExpressionEvaluatorFactory.jsonld#ActorExpressionEvaluatorFactory_default_bus"}),A=new(Je()).BusFunctionFactory({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-function-factory/^4.0.0/components/ActorFunctionFactory.jsonld#ActorFunctionFactory_default_bus"}),P=new(qr()).BusQueryOperation({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^4.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),C=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-process/^4.0.0/components/ActorQueryProcess.jsonld#ActorQueryProcess_default_bus"}),B=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-source-identify/^4.0.0/components/ActorQuerySourceIdentify.jsonld#ActorQuerySourceIdentify_default_bus"}),H=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^4.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),V=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-term-comparator-factory/^4.0.0/components/ActorTermComparatorFactory.jsonld#ActorTermComparatorFactory_default_bus"}),G=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_fallback_bus"}),Z=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^4.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),ae=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^4.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),W=new(De()).Bus({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-merge-bindings-context/^4.0.0/components/ActorMergeBindingsContext.jsonld#ActorMergeBindingsContext_default_bus"});new(Js()).ActorExtractLinksPredicates({checkSubject:!1,predicateRegexes:["http://www.w3.org/2000/01/rdf-schema#seeAlso","http://www.w3.org/2002/07/owl##sameAs","http://xmlns.com/foaf/0.1/isPrimaryTopicOf"],name:"urn:comunica:default:extract-links/actors#predicates-common",bus:n}),new(Js()).ActorExtractLinksPredicates({checkSubject:!0,predicateRegexes:["http://www.w3.org/ns/ldp#contains"],name:"urn:comunica:default:extract-links/actors#predicates-ldp",bus:n}),new(Js()).ActorExtractLinksPredicates({checkSubject:!0,predicateRegexes:["http://www.w3.org/ns/pim/space#storage"],name:"urn:comunica:default:extract-links/actors#predicates-solid",bus:n}),new(Fq()).ActorExtractLinksHeaders({headersRegexes:['rel="describedby"'],name:"urn:comunica:default:extract-links/actors#links-describedby",bus:n}),new(jq()).ActorExtractLinksQuadPatternQuery({onlyVariables:!0,name:"urn:comunica:default:extract-links/actors#quad-pattern-query",bus:n});const te=new(Mq()).MediatorCombineArray({filterErrors:!0,fields:["links","linksConditional"],name:"urn:comunica:default:extract-links/mediators#main",bus:n});new(Cq()).ActorContextPreprocessConvertShortcuts({contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",dataFactory:"@comunica/actor-init-query:dataFactory",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",distinctConstruct:"@comunica/actor-init-query:distinctConstruct",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",functionArgumentsCache:"@comunica/actor-init-query:functionArgumentsCache",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpRetryCount:"@comunica/bus-http:http-retry-count",httpRetryDelayFallback:"@comunica/bus-http:http-retry-delay-fallback",httpRetryDelayLimit:"@comunica/bus-http:http-retry-delay-limit",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",invalidateCache:"@comunica/actor-init-query:invalidateCache",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",queryTimestampHighResolution:"@comunica/actor-init-query:queryTimestampHighResolution",readOnly:"@comunica/bus-query-operation:readOnly",recoverBrokenLinks:"@comunica/bus-http-wayback:recover-broken-links",sources:"@comunica/actor-init-query:querySourcesUnidentified",traverse:"@comunica/bus-query-source-identify:traverse",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:context-preprocess/actors#convert-shortcuts",bus:r,busFailMessage:"Context preprocessing failed"}),new(Lq()).ActorContextPreprocessSetDefaults({logger:e,name:"urn:comunica:default:context-preprocess/actors#set-defaults",bus:r,busFailMessage:"Context preprocessing failed"}),new(qq()).ActorContextPreprocessSourceToDestination({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:r,busFailMessage:"Context preprocessing failed"});const se=new(uP()).ActorContextPreprocessQuerySourceSkolemize({name:"urn:comunica:default:context-preprocess/actors#query-source-skolemize",bus:r,busFailMessage:"Context preprocessing failed"});new(zq()).ActorContextPreprocessSetDefaultsLinkTraversal({name:"urn:comunica:default:context-preprocess/actors#set-defaults-link-traversal",bus:r,busFailMessage:"Context preprocessing failed"});const pe=new(n1()).MediatorCombinePipeline({name:"urn:comunica:default:context-preprocess/mediators#main",bus:r});new(Gq()).ActorHashBindingsMurmur({name:"urn:comunica:default:hash-bindings/actors#murmur",bus:t,busFailMessage:"Failed to obtaining hash functions for bindings"});const le=new(jt()).MediatorRace({name:"urn:comunica:default:hash-bindings/mediators#main",bus:t});new($q()).ActorHashQuadsMurmur({name:"urn:comunica:default:hash-quads/actors#murmur",bus:i,busFailMessage:"Failed to obtaining hash functions for quads"});const Ee=new(jt()).MediatorRace({name:"urn:comunica:default:hash-quads/mediators#main",bus:i});new(Xq()).ActorOptimizeQueryOperationRewriteCopy({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-copy",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(Kq()).ActorOptimizeQueryOperationRewriteMove({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-move",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"}),new(Jq()).ActorOptimizeQueryOperationRewriteAdd({name:"urn:comunica:default:optimize-query-operation/actors#rewrite-add",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const Oe=new(Wq()).ActorOptimizeQueryOperationGroupSources({name:"urn:comunica:default:optimize-query-operation/actors#group-sources",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});new(Yq()).ActorOptimizeQueryOperationConstructDistinct({name:"urn:comunica:default:optimize-query-operation/actors#construct-distinct",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize"});const Ie=new(n1()).MediatorCombinePipeline({filterFailures:!0,name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:o});new(Zq()).ActorQueryParseSparql({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:l,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'}),new(sB()).ActorQueryParseGraphql({name:"urn:comunica:default:query-parse/actors#graphql",bus:l,busFailMessage:'Query parsing failed: none of the configured parsers were able to the query "${action.query}"'});const Ae=new(jt()).MediatorRace({name:"urn:comunica:default:query-parse/mediators#main",bus:l});new(fB()).ActorQueryResultSerializeJson({mediaTypePriorities:{"application/json":1},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#json",bus:s,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(pB()).ActorQueryResultSerializeSimple({mediaTypePriorities:{simple:.9},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"urn:comunica:default:query-result-serialize/actors#simple",bus:s,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(hB()).ActorQueryResultSerializeSparqlCsv({mediaTypePriorities:{"text/csv":.75},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"urn:comunica:default:query-result-serialize/actors#csv",bus:s,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(yB()).ActorQueryResultSerializeSparqlTsv({mediaTypePriorities:{"text/tab-separated-values":.75},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"urn:comunica:default:query-result-serialize/actors#sparql-tsv",bus:s,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(mB()).ActorQueryResultSerializeSparqlXml({mediaTypePriorities:{"application/sparql-results+xml":.8},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"urn:comunica:default:query-result-serialize/actors#sparql-xml",bus:s,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(bB()).ActorQueryResultSerializeTable({columnWidth:50,mediaTypePriorities:{table:.6},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"urn:comunica:default:query-result-serialize/actors#table",bus:s,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(vB()).ActorQueryResultSerializeTree({mediaTypePriorities:{tree:.5},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"urn:comunica:default:query-result-serialize/actors#tree",bus:s,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"});const be=new(jt()).MediatorRace({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:s}),ee=new(vn()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:s}),_=new(vn()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:s}),F=new(oa()).MediatorNumber({field:"filterFactor",type:"max",ignoreFailures:!0,name:"urn:comunica:default:query-source-identify-hypermedia/mediators#main",bus:c}),D=new(wB()).ActorDereferenceFallback({name:"urn:comunica:default:dereference/actors#fallback",bus:d,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}"}),L=new(jt()).MediatorRace({name:"urn:comunica:default:dereference/mediators#main",bus:d}),Q=new(jt()).MediatorRace({name:"urn:comunica:default:dereference-rdf/mediators#main",bus:f});new(EB()).ActorRdfJoinEntriesSortTraversalZeroKnowledge({name:"urn:comunica:default:rdf-join-entries-sort/actors#traversal-zero-knowledge",bus:p,busFailMessage:"Sorting join entries failed: none of the configured actors were able to sort"});const Y=new(oa()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:p});new(AB()).ActorRdfJoinSelectivityVariableCounting({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:h,busFailMessage:"Determining join selectivity failed: none of the configured actors were able to calculate selectivities"});const $=new(oa()).MediatorNumber({field:"accuracy",type:"max",ignoreFailures:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:h});new(OB()).ActorRdfMetadataPrimaryTopic({metadataToData:!1,dataToMetadataOnInvalidMetadataGraph:!0,name:"urn:comunica:default:rdf-metadata/actors#primary-topic",bus:g,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"}),new(xB()).ActorRdfMetadataAll({name:"urn:comunica:default:rdf-metadata/actors#all",bus:g,busFailMessage:"Metadata splicing failed: none of the configured actors were able to splice metadata from ${action.url}"});const ue=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-metadata/mediators#main",bus:g});new(NB()).ActorRdfMetadataAccumulateCardinality({name:"urn:comunica:default:rdf-metadata-accumulate/actors#cardinality",bus:v,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(IB()).ActorRdfMetadataAccumulatePageSize({name:"urn:comunica:default:rdf-metadata-accumulate/actors#pagesize",bus:v,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"}),new(DB()).ActorRdfMetadataAccumulateRequestTime({name:"urn:comunica:default:rdf-metadata-accumulate/actors#requesttime",bus:v,busFailMessage:"Metadata accumulation failed: none of the configured actors were able to accumulate metadata in mode ${action.mode}"});const ne=new(vn()).MediatorCombineUnion({field:"metadata",name:"urn:comunica:default:rdf-metadata-accumulate/mediators#main",bus:v});new(FB()).ActorRdfMetadataExtractHydraControls({name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-controls",bus:m,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(PB()).ActorRdfMetadataExtractHydraCount({predicates:["http://www.w3.org/ns/hydra/core#totalItems","http://rdfs.org/ns/void#triples"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-count",bus:m,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(jB()).ActorRdfMetadataExtractHydraPagesize({predicates:["http://www.w3.org/ns/hydra/core#itemsPerPage"],name:"urn:comunica:default:rdf-metadata-extract/actors#hydra-pagesize",bus:m,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(MB()).ActorRdfMetadataExtractRequestTime({name:"urn:comunica:default:rdf-metadata-extract/actors#request-time",bus:m,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(CB()).ActorRdfMetadataExtractAllowHttpMethods({name:"urn:comunica:default:rdf-metadata-extract/actors#allow-http-methods",bus:m,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(LB()).ActorRdfMetadataExtractPutAccepted({name:"urn:comunica:default:rdf-metadata-extract/actors#put-accepted",bus:m,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(qB()).ActorRdfMetadataExtractPatchSparqlUpdate({name:"urn:comunica:default:rdf-metadata-extract/actors#patch-sparql-update",bus:m,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(BB()).ActorRdfMetadataExtractSparqlService({inferHttpsEndpoint:!0,name:"urn:comunica:default:rdf-metadata-extract/actors#sparql-service",bus:m,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"});const ce=new(vn()).MediatorCombineUnion({filterFailures:!0,field:"metadata",name:"urn:comunica:default:rdf-metadata-extract/mediators#main",bus:m});new(zB()).ActorRdfParseN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},priorityScale:1,name:"urn:comunica:default:rdf-parse/actors#n3",bus:T,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(GB()).ActorRdfParseRdfXml({mediaTypePriorities:{"application/rdf+xml":1},mediaTypeFormats:{"application/rdf+xml":"http://www.w3.org/ns/formats/RDF_XML"},priorityScale:.5,name:"urn:comunica:default:rdf-parse/actors#rdfxml",bus:T,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(XB()).ActorRdfParseXmlRdfa({mediaTypePriorities:{"application/xml":1,"image/svg+xml":1,"text/xml":1},mediaTypeFormats:{"application/xml":"http://www.w3.org/ns/formats/RDFa","image/svg+xml":"http://www.w3.org/ns/formats/RDFa","text/xml":"http://www.w3.org/ns/formats/RDFa"},priorityScale:.3,name:"urn:comunica:default:rdf-parse/actors#xmlrdfa",bus:T,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(KB()).ActorRdfParseShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-parse/actors#shaclc",bus:T,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"});const Se=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-parse/mediators#parse",bus:T}),xe=new(vn()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-parse/mediators#mediaType",bus:T});new(JB()).ActorRdfParseHtml({busRdfParseHtml:w,mediaTypePriorities:{"application/xhtml+xml":.9,"text/html":1},mediaTypeFormats:{"application/xhtml+xml":"http://www.w3.org/ns/formats/HTML","text/html":"http://www.w3.org/ns/formats/HTML"},priorityScale:.2,name:"urn:comunica:default:rdf-parse/actors#html",bus:T,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(YB()).ActorRdfParseHtmlMicrodata({name:"urn:comunica:default:rdf-parse-html/actors#microdata",bus:w,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(ZB()).ActorRdfParseHtmlRdfa({name:"urn:comunica:default:rdf-parse-html/actors#rdfa",bus:w,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(eU()).ActorRdfResolveHypermediaLinksNext({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#next",bus:E,busFailMessage:"Hypermedia link resolution failed: none of the configured actors were able to resolve links from metadata"}),new(tU()).ActorRdfResolveHypermediaLinksTraverse({name:"urn:comunica:default:rdf-resolve-hypermedia-links/actors#traverse",bus:E,busFailMessage:"Hypermedia link resolution failed: none of the configured actors were able to resolve links from metadata"});const Ce=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links/mediators#main",bus:E});new(Dq()).ActorRdfResolveHypermediaLinksQueueFifo({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/actors#fifo",bus:S,busFailMessage:"Link queue creation failed: none of the configured actors were able to create a link queue starting from ${action.firstUrl}"});const Ve=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-resolve-hypermedia-links-queue/mediators#main",bus:S});new(nU()).ActorRdfSerializeN3({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},name:"urn:comunica:default:rdf-serialize/actors#n3",bus:N,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(iU()).ActorRdfSerializeJsonLd({jsonStringifyIndentSpaces:2,mediaTypePriorities:{"application/ld+json":1},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-serialize/actors#jsonld",bus:N,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"}),new(oU()).ActorRdfSerializeShaclc({mediaTypePriorities:{"text/shaclc":1,"text/shaclc-ext":.5},mediaTypeFormats:{"text/shaclc":"http://www.w3.org/ns/formats/Shaclc","text/shaclc-ext":"http://www.w3.org/ns/formats/ShaclcExtended"},priorityScale:.1,name:"urn:comunica:default:rdf-serialize/actors#shaclc",bus:N,busFailMessage:"RDF serialization failed: none of the configured serializers were able to handle media type ${action.handleMediaType}"});const Ke=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-serialize/mediators#serialize",bus:N}),Ye=new(vn()).MediatorCombineUnion({field:"mediaTypes",name:"urn:comunica:default:rdf-serialize/mediators#mediaType",bus:N}),oe=new(vn()).MediatorCombineUnion({field:"mediaTypeFormats",name:"urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat",bus:N}),X=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-update-hypermedia/mediators#main",bus:j});new(cU()).ActorRdfUpdateQuadsRdfJsStore({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:q,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const J=new(jt()).MediatorRace({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:q}),he=new(jt()).MediatorRace({name:"urn:comunica:default:bindings-aggregator-factory/mediators#main",bus:O}),ve=new(jt()).MediatorRace({name:"urn:comunica:default:expression-evaluator-factory/mediators#main",bus:I});new(lU()).ActorFunctionFactoryExpressionBnode({name:"urn:comunica:default:function-factory/actors#expression-function-bnode",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dU()).ActorFunctionFactoryExpressionBound({name:"urn:comunica:default:function-factory/actors#expression-function-bound",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fU()).ActorFunctionFactoryExpressionCoalesce({name:"urn:comunica:default:function-factory/actors#expression-function-coalesce",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pU()).ActorFunctionFactoryExpressionConcat({name:"urn:comunica:default:function-factory/actors#expression-function-concat",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hU()).ActorFunctionFactoryExpressionExtensions({name:"urn:comunica:default:function-factory/actors#expression-function-extensions",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yU()).ActorFunctionFactoryExpressionIf({name:"urn:comunica:default:function-factory/actors#expression-function-if",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mU()).ActorFunctionFactoryExpressionLogicalAnd({name:"urn:comunica:default:function-factory/actors#expression-function-logical-and",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bU()).ActorFunctionFactoryExpressionLogicalOr({name:"urn:comunica:default:function-factory/actors#expression-function-logical-or",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gU()).ActorFunctionFactoryExpressionSameTerm({name:"urn:comunica:default:function-factory/actors#expression-function-same-term",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vU()).ActorFunctionFactoryTermAbs({name:"urn:comunica:default:function-factory/actors#term-function-abs",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_U()).ActorFunctionFactoryTermAddition({name:"urn:comunica:default:function-factory/actors#term-function-addition",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(TU()).ActorFunctionFactoryTermCeil({name:"urn:comunica:default:function-factory/actors#term-function-ceil",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wU()).ActorFunctionFactoryTermContains({name:"urn:comunica:default:function-factory/actors#term-function-contains",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(SU()).ActorFunctionFactoryTermDatatype({name:"urn:comunica:default:function-factory/actors#term-function-datatype",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(EU()).ActorFunctionFactoryTermDay({name:"urn:comunica:default:function-factory/actors#term-function-day",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(AU()).ActorFunctionFactoryTermDivision({name:"urn:comunica:default:function-factory/actors#term-function-division",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(OU()).ActorFunctionFactoryTermEncodeForUri({name:"urn:comunica:default:function-factory/actors#term-function-encode-for-uri",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xU()).ActorFunctionFactoryTermEquality({name:"urn:comunica:default:function-factory/actors#term-function-equality",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(RU()).ActorFunctionFactoryTermFloor({name:"urn:comunica:default:function-factory/actors#term-function-floor",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NU()).ActorFunctionFactoryTermHours({name:"urn:comunica:default:function-factory/actors#term-function-hours",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(IU()).ActorFunctionFactoryTermIri({name:"urn:comunica:default:function-factory/actors#term-function-iri",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(DU()).ActorFunctionFactoryTermIsBlank({name:"urn:comunica:default:function-factory/actors#term-function-is-blank",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FU()).ActorFunctionFactoryTermIsIri({name:"urn:comunica:default:function-factory/actors#term-function-is-iri",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(PU()).ActorFunctionFactoryTermIsLiteral({name:"urn:comunica:default:function-factory/actors#term-function-is-literal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(jU()).ActorFunctionFactoryTermIsNumeric({name:"urn:comunica:default:function-factory/actors#term-function-is-numeric",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(MU()).ActorFunctionFactoryTermIsTriple({name:"urn:comunica:default:function-factory/actors#term-function-is-triple",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(CU()).ActorFunctionFactoryTermLang({name:"urn:comunica:default:function-factory/actors#term-function-lang",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(LU()).ActorFunctionFactoryTermLangmatches({name:"urn:comunica:default:function-factory/actors#term-function-langmatches",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(qU()).ActorFunctionFactoryTermLcase({name:"urn:comunica:default:function-factory/actors#term-function-lcase",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(BU()).ActorFunctionFactoryTermMd5({name:"urn:comunica:default:function-factory/actors#term-function-md5",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(UU()).ActorFunctionFactoryTermMinutes({name:"urn:comunica:default:function-factory/actors#term-function-minutes",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(QU()).ActorFunctionFactoryTermMonth({name:"urn:comunica:default:function-factory/actors#term-function-month",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(VU()).ActorFunctionFactoryTermMultiplication({name:"urn:comunica:default:function-factory/actors#term-function-multiplication",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(HU()).ActorFunctionFactoryTermNot({name:"urn:comunica:default:function-factory/actors#term-function-not",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(kU()).ActorFunctionFactoryTermNow({name:"urn:comunica:default:function-factory/actors#term-function-now",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(zU()).ActorFunctionFactoryTermObject({name:"urn:comunica:default:function-factory/actors#term-function-object",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(GU()).ActorFunctionFactoryTermPredicate({name:"urn:comunica:default:function-factory/actors#term-function-predicate",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wP()).ActorFunctionFactoryTermRegex({name:"urn:comunica:default:function-factory/actors#term-function-regex",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(XU()).ActorFunctionFactoryTermReplace({name:"urn:comunica:default:function-factory/actors#term-function-replace",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new($U()).ActorFunctionFactoryTermRand({name:"urn:comunica:default:function-factory/actors#term-function-rand",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(KU()).ActorFunctionFactoryTermRound({name:"urn:comunica:default:function-factory/actors#term-function-round",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(JU()).ActorFunctionFactoryTermSeconds({name:"urn:comunica:default:function-factory/actors#term-function-seconds",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(WU()).ActorFunctionFactoryTermSha1({name:"urn:comunica:default:function-factory/actors#term-function-sha1",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(YU()).ActorFunctionFactoryTermSha256({name:"urn:comunica:default:function-factory/actors#term-function-sha256",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(ZU()).ActorFunctionFactoryTermSha384({name:"urn:comunica:default:function-factory/actors#term-function-sha384",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eQ()).ActorFunctionFactoryTermSha512({name:"urn:comunica:default:function-factory/actors#term-function-sha512",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tQ()).ActorFunctionFactoryTermStrAfter({name:"urn:comunica:default:function-factory/actors#term-function-str-after",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rQ()).ActorFunctionFactoryTermStrBefore({name:"urn:comunica:default:function-factory/actors#term-function-str-before",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nQ()).ActorFunctionFactoryTermStrDt({name:"urn:comunica:default:function-factory/actors#term-function-str-dt",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aQ()).ActorFunctionFactoryTermStrEnds({name:"urn:comunica:default:function-factory/actors#term-function-str-ends",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iQ()).ActorFunctionFactoryTermStrLang({name:"urn:comunica:default:function-factory/actors#term-function-str-lang",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(uQ()).ActorFunctionFactoryTermStrLen({name:"urn:comunica:default:function-factory/actors#term-function-str-len",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(oQ()).ActorFunctionFactoryTermStrStarts({name:"urn:comunica:default:function-factory/actors#term-function-str-starts",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(cQ()).ActorFunctionFactoryTermStrUuid({name:"urn:comunica:default:function-factory/actors#term-function-str-uuid",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(lQ()).ActorFunctionFactoryTermStr({name:"urn:comunica:default:function-factory/actors#term-function-str",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(dQ()).ActorFunctionFactoryTermSubStr({name:"urn:comunica:default:function-factory/actors#term-function-sub-str",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(fQ()).ActorFunctionFactoryTermSubject({name:"urn:comunica:default:function-factory/actors#term-function-subject",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(pQ()).ActorFunctionFactoryTermSubtraction({name:"urn:comunica:default:function-factory/actors#term-function-subtraction",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(hQ()).ActorFunctionFactoryTermTimezone({name:"urn:comunica:default:function-factory/actors#term-function-timezone",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(yQ()).ActorFunctionFactoryTermTriple({name:"urn:comunica:default:function-factory/actors#term-function-triple",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mQ()).ActorFunctionFactoryTermTz({name:"urn:comunica:default:function-factory/actors#term-function-tz",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(bQ()).ActorFunctionFactoryTermUcase({name:"urn:comunica:default:function-factory/actors#term-function-ucase",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(gQ()).ActorFunctionFactoryTermUnaryMinus({name:"urn:comunica:default:function-factory/actors#term-function-unary-minus",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(vQ()).ActorFunctionFactoryTermUnaryPlus({name:"urn:comunica:default:function-factory/actors#term-function-unary-plus",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(_Q()).ActorFunctionFactoryTermUuid({name:"urn:comunica:default:function-factory/actors#term-function-uuid",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(TQ()).ActorFunctionFactoryTermXsdToBoolean({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-boolean",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(wQ()).ActorFunctionFactoryTermXsdToDate({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-date",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(SQ()).ActorFunctionFactoryTermXsdToDatetime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-datetime",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(EQ()).ActorFunctionFactoryTermXsdToDayTimeDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-day-time-duration",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(AQ()).ActorFunctionFactoryTermXsdToDecimal({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-decimal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(OQ()).ActorFunctionFactoryTermXsdToDouble({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-double",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(xQ()).ActorFunctionFactoryTermXsdToDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-duration",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(RQ()).ActorFunctionFactoryTermXsdToFloat({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-float",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(NQ()).ActorFunctionFactoryTermXsdToInteger({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-integer",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(IQ()).ActorFunctionFactoryTermXsdToString({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-string",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(DQ()).ActorFunctionFactoryTermXsdToTime({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-time",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(FQ()).ActorFunctionFactoryTermXsdToYearMonthDuration({name:"urn:comunica:default:function-factory/actors#term-function-xsd-to-year-month-duration",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(PQ()).ActorFunctionFactoryTermYear({name:"urn:comunica:default:function-factory/actors#term-function-year",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"});const ye=new(jt()).MediatorRace({name:"urn:comunica:default:function-factory/mediators#main",bus:A});new(MQ()).ActorQueryOperationSource({name:"urn:comunica:default:query-operation/actors#source",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const re=new(oa()).MediatorNumber({field:"httpRequests",type:"min",ignoreFailures:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:P}),Ne=new(jt()).MediatorRace({name:"urn:comunica:default:query-process/mediators#main",bus:C}),Le=new(jt()).MediatorRace({name:"urn:comunica:default:query-source-identify/mediators#main",bus:B}),Pe=new(CQ()).MediatorJoinCoefficientsFixed({cpuWeight:10,memoryWeight:1,timeWeight:2,ioWeight:10,name:"urn:comunica:default:rdf-join/mediators#main",bus:H}),Fe=new(jt()).MediatorRace({name:"urn:comunica:default:term-comparator-factory/mediators#main",bus:V}),R=new(oa()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#main",bus:G}),k=new(jQ()).ActorHttpFetch({agentOptions:{keepAlive:!0,maxSockets:5},name:"urn:comunica:default:http/actors#fetch",bus:Z,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"}),K=new(oa()).MediatorNumber({field:"time",type:"min",ignoreFailures:!0,name:"urn:comunica:default:http/mediators#no-fallback",bus:Z}),de=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-context-preprocess-query-source-identify/^4.0.0/components/ActorContextPreprocessQuerySourceIdentify.jsonld#IActorContextPreprocessQuerySourceIdentifyArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),ge=new(LQ()).MediatorAll({name:"urn:comunica:default:http-invalidate/mediators#main",bus:ae}),Ue=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-rdf-update-quads-hypermedia/^4.0.0/components/ActorRdfUpdateQuadsHypermedia.jsonld#IActorRdfUpdateQuadsHypermediaArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),je=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-http-retry/^4.0.0/components/ActorHttpRetry.jsonld#IActorHttpQueueArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),ze=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),at=new(Sa()).ActorHttpInvalidateListenable({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActionObserverHttp.jsonld#IActionObserverHttpArgs_default_invalidator",bus:ae,busFailMessage:"HTTP invalidation failed: none of the configured actors were able to invalidate ${action.url}"}),fe=new(vn()).MediatorCombineUnion({field:"mergeHandlers",name:"urn:comunica:default:merge-bindings-context/mediators#main",bus:W});new(qQ()).ActorRdfMetadataExtractTraverse({mediatorExtractLinks:te,name:"urn:comunica:default:rdf-metadata-extract/actors#traverse",bus:m,busFailMessage:"Metadata extraction failed: none of the configured actors were able to extract metadata from ${action.url}"}),new(BQ()).ActorRdfJoinSingle({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});const Te=new(QQ()).ActorRdfJoinSymmetricHash({mediatorHashBindings:le,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),qe=new(VQ()).ActorRdfJoinNestedLoop({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(u1()).ActorRdfJoinMinusHash({canHandleUndefs:!1,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#minus-hash-def",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(u1()).ActorRdfJoinMinusHash({canHandleUndefs:!0,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!1,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-nonblocking",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!1,blocking:!0,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#optional-hash-def-blocking",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!1,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-nonblocking",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(_u()).ActorRdfJoinOptionalHash({canHandleUndefs:!0,blocking:!0,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#optional-hash-undef-blocking",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(HQ()).ActorRdfJoinOptionalNestedLoop({mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(kQ()).ActorDereferenceRdfParse({mediatorDereference:L,mediatorParse:Se,mediatorParseMediatypes:xe,mediaMappings:{htm:"text/html",html:"text/html",json:"application/json",jsonld:"application/ld+json",n3:"text/n3",nq:"application/n-quads",nquads:"application/n-quads",nt:"application/n-triples",ntriples:"application/n-triples",owl:"application/rdf+xml",rdf:"application/rdf+xml",rdfxml:"application/rdf+xml",shaclc:"text/shaclc",shaclce:"text/shaclc-ext",shc:"text/shaclc",shce:"text/shaclc-ext",svg:"image/svg+xml",svgz:"image/svg+xml",trig:"application/trig",ttl:"text/turtle",turtle:"text/turtle",xht:"application/xhtml+xml",xhtml:"application/xhtml+xml",xml:"application/xml"},name:"urn:comunica:default:dereference-rdf/actors#parse",bus:f,busFailMessage:"RDF dereferencing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(zQ()).ActorRdfParseHtmlScript({mediatorRdfParseMediatypes:xe,mediatorRdfParseHandle:Se,name:"urn:comunica:default:rdf-parse-html/actors#script",bus:w,busFailMessage:"RDF HTML parsing failed: none of the configured parsers were able to parse RDF in HTML"}),new(GQ()).ActorQueryResultSerializeRdf({mediatorRdfSerialize:Ke,mediatorMediaTypeCombiner:Ye,mediatorMediaTypeFormatCombiner:oe,name:"urn:comunica:default:query-result-serialize/actors#rdf",bus:s,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new($Q()).ActorBindingsAggregatorFactoryCount({mediatorExpressionEvaluatorFactory:ve,name:"urn:comunica:default:bindings-aggregator-factory/actors#count",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(XQ()).ActorBindingsAggregatorFactoryGroupConcat({mediatorExpressionEvaluatorFactory:ve,name:"urn:comunica:default:bindings-aggregator-factory/actors#group-concat",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(KQ()).ActorBindingsAggregatorFactorySample({mediatorExpressionEvaluatorFactory:ve,name:"urn:comunica:default:bindings-aggregator-factory/actors#sample",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(JQ()).ActorBindingsAggregatorFactoryWildcardCount({mediatorExpressionEvaluatorFactory:ve,name:"urn:comunica:default:bindings-aggregator-factory/actors#wildcard-count",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(WQ()).ActorBindingsAggregatorFactoryAverage({mediatorFunctionFactory:ye,mediatorExpressionEvaluatorFactory:ve,name:"urn:comunica:default:bindings-aggregator-factory/actors#average",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(YQ()).ActorBindingsAggregatorFactorySum({mediatorFunctionFactory:ye,mediatorExpressionEvaluatorFactory:ve,name:"urn:comunica:default:bindings-aggregator-factory/actors#sum",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(ZQ()).ActorFunctionFactoryExpressionIn({mediatorFunctionFactory:ye,name:"urn:comunica:default:function-factory/actors#expression-function-in",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(eV()).ActorFunctionFactoryExpressionNotIn({mediatorFunctionFactory:ye,name:"urn:comunica:default:function-factory/actors#expression-function-not-in",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(tV()).ActorFunctionFactoryTermGreaterThanEqual({mediatorFunctionFactory:ye,name:"urn:comunica:default:function-factory/actors#term-function-greater-than-equal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(rV()).ActorFunctionFactoryTermGreaterThan({mediatorFunctionFactory:ye,name:"urn:comunica:default:function-factory/actors#term-function-greater-than",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(nV()).ActorFunctionFactoryTermInequality({mediatorFunctionFactory:ye,name:"urn:comunica:default:function-factory/actors#term-function-inequality",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(iV()).ActorFunctionFactoryTermLesserThanEqual({mediatorFunctionFactory:ye,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than-equal",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(aV()).ActorFunctionFactoryTermLesserThan({mediatorFunctionFactory:ye,name:"urn:comunica:default:function-factory/actors#term-function-lesser-than",bus:A,busFailMessage:"Creation of function evaluator failed: no configured actor was able to evaluate function ${action.functionName}"}),new(mV()).ActorQueryOperationAsk({mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#ask",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(bV()).ActorQueryOperationBgpJoin({mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#bgp",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(xP()).ActorQueryOperationConstruct({mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#construct",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(gV()).ActorQueryOperationDistinctHash({mediatorHashBindings:le,mediatorHashQuads:Ee,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#distinct",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(vV()).ActorQueryOperationExtend({mediatorExpressionEvaluatorFactory:ve,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#extend",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(_V()).ActorQueryOperationFilter({mediatorExpressionEvaluatorFactory:ve,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#filter",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(TV()).ActorQueryOperationFromQuad({mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#from",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(wV()).ActorQueryOperationProject({mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#project",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(SV()).ActorQueryOperationReducedHash({mediatorHashBindings:le,cacheSize:100,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#reduced",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(EV()).ActorQueryOperationSlice({mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#slice",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(RP()).ActorQueryOperationUnion({mediatorRdfMetadataAccumulate:ne,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#union",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(AV()).ActorQueryOperationPathAlt({mediatorRdfMetadataAccumulate:ne,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#path-alt",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(OV()).ActorQueryOperationPathInv({mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#path-inv",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(xV()).ActorQueryOperationPathLink({mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#path-link",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(RV()).ActorQueryOperationPathNps({mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#path-nps",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(NV()).ActorQueryOperationClear({mediatorUpdateQuads:J,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#update-clear",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(IV()).ActorQueryOperationUpdateCompositeUpdate({mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#update-composite",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(DV()).ActorQueryOperationCreate({mediatorUpdateQuads:J,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#update-create",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(FV()).ActorQueryOperationDrop({mediatorUpdateQuads:J,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#update-drop",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(PV()).ActorQueryOperationLoad({mediatorUpdateQuads:J,mediatorQuerySourceIdentify:Le,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#update-load",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(CV()).ActorQuerySourceIdentifySerialized({mediatorRdfParse:Se,mediatorQuerySourceIdentify:Le,name:"urn:comunica:default:query-source-identify/actors#serialized",bus:B,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(LV()).ActorQueryOperationJoin({mediatorJoin:Pe,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#join",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(qV()).ActorQueryOperationLeftJoin({mediatorJoin:Pe,mediatorExpressionEvaluatorFactory:ve,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(BV()).ActorQueryOperationMinus({mediatorJoin:Pe,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#minus",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(UV()).ActorQueryOperationPathSeq({mediatorJoin:Pe,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#path-seq",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const it=new(QV()).ActorRdfJoinMultiSmallest({mediatorJoinEntriesSort:Y,mediatorJoin:Pe,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"});new(VV()).ActorBindingsAggregatorFactoryMax({mediatorTermComparatorFactory:Fe,mediatorExpressionEvaluatorFactory:ve,name:"urn:comunica:default:bindings-aggregator-factory/actors#max",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(HV()).ActorBindingsAggregatorFactoryMin({mediatorTermComparatorFactory:Fe,mediatorExpressionEvaluatorFactory:ve,name:"urn:comunica:default:bindings-aggregator-factory/actors#min",bus:O,busFailMessage:"Creation of Aggregator failed: none of the configured actors were able to handle ${action.expr.aggregator}"}),new(kV()).ActorQueryOperationOrderBy({mediatorExpressionEvaluatorFactory:ve,mediatorTermComparatorFactory:Fe,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#orderby",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(cV()).ActorRdfParseJsonLd({mediatorHttp:R,mediaTypePriorities:{"application/json":.15,"application/ld+json":1},mediaTypeFormats:{"application/json":"http://www.w3.org/ns/formats/JSON-LD","application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-parse/actors#jsonld",bus:T,busFailMessage:"RDF parsing failed: none of the configured parsers were able to handle the media type ${action.handle.mediaType} for ${action.handle.url}"}),new(dV()).ActorRdfUpdateHypermediaPatchSparqlUpdate({mediatorHttp:R,name:"urn:comunica:default:rdf-update-hypermedia/actors#patch-sparql-update",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(fV()).ActorRdfUpdateHypermediaPutLdp({mediatorHttp:R,mediatorRdfSerializeMediatypes:Ye,mediatorRdfSerialize:Ke,name:"urn:comunica:default:rdf-update-hypermedia/actors#put-ldp",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(yV()).ActorRdfUpdateHypermediaSparql({mediatorHttp:R,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,name:"urn:comunica:default:rdf-update-hypermedia/actors#sparql",bus:j,busFailMessage:"RDF hypermedia updating failed: none of the configured actors were able to handle an update for ${action.url}"}),new(uV()).ActorHttpWayback({mediatorHttp:K,name:"urn:comunica:default:http/actors#wayback",bus:G,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}"});const Me=new(zV()).ActorOptimizeQueryOperationFilterPushdown({aggressivePushdown:!1,maxIterations:10,splitConjunctive:!0,mergeConjunctive:!0,pushIntoLeftJoins:!0,pushEqualityIntoPatterns:!0,name:"urn:comunica:default:optimize-query-operation/actors#filter-pushdown",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Oe]});new(GV()).ActorDereferenceHttp({mediatorHttp:R,maxAcceptHeaderLength:1024,maxAcceptHeaderLengthBrowser:128,name:"urn:comunica:default:dereference/actors#http",bus:d,busFailMessage:"Dereferencing failed: none of the configured actors were able to handle ${action.url}",beforeActors:[D]});const st=new($V()).ActorHttpInruptSolidClientAuthn({mediatorHttp:R,name:"urn:comunica:default:http/actors#inrupt-solid-client-authn",bus:Z,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[k]});new(XV()).ActorContextPreprocessQuerySourceIdentify({cacheSize:100,httpInvalidator:de,mediatorQuerySourceIdentify:Le,mediatorContextPreprocess:pe,name:"urn:comunica:default:context-preprocess/actors#query-source-identify",bus:r,busFailMessage:"Context preprocessing failed",beforeActors:[se]});const tt=new(Tb()).ActorInitQuery({mediatorQueryProcess:Ne,mediatorQueryResultSerialize:be,mediatorQueryResultSerializeMediaTypeCombiner:ee,mediatorQueryResultSerializeMediaTypeFormatCombiner:_,mediatorHttpInvalidate:ge,defaultQueryInputFormat:"sparql",allowNoSources:!0,name:"urn:comunica:default:init/actors#query",bus:u,busFailMessage:"Initialization failed: none of the configured actors were to initialize"});new(KV()).ActorRdfUpdateQuadsHypermedia({cacheSize:100,httpInvalidator:Ue,mediatorDereferenceRdf:Q,mediatorMetadata:ue,mediatorMetadataExtract:ce,mediatorRdfUpdateHypermedia:X,name:"urn:comunica:default:rdf-update-quads/actors#hypermedia",bus:q,busFailMessage:"RDF updating failed: none of the configured actors were able to handle an update"});const Ot=new(o1()).ActionObserverHttp({httpInvalidator:ze,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-sparql-json/^4.0.0/components/ActorQueryResultSerializeSparqlJson.jsonld#ActorQueryResultSerializeSparqlJson_default_observer",bus:Z}),yt=new(s1()).ActionObserverHttp({httpInvalidator:at,observedActors:["urn:comunica:default:http/actors#fetch"],name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^4.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer",bus:Z});new(WV()).ActorQuerySourceIdentifyHypermediaQpf({mediatorMetadata:ue,mediatorMetadataExtract:ce,mediatorDereferenceRdf:Q,mediatorMergeBindingsContext:fe,subjectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#subject",predicateUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#predicate",objectUri:"http://www.w3.org/1999/02/22-rdf-syntax-ns#object",graphUri:"http://www.w3.org/ns/sparql-service-description#graph",name:"urn:comunica:default:query-source-identify-hypermedia/actors#qpf",bus:c,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(YV()).ActorQuerySourceIdentifyHypermediaSparql({mediatorHttp:R,mediatorMergeBindingsContext:fe,checkUrlSuffix:!0,forceHttpGet:!1,cacheSize:1024,forceSourceType:!1,bindMethod:"values",countTimeout:3e3,cardinalityCountQueries:!0,cardinalityEstimateConstruction:!1,name:"urn:comunica:default:query-source-identify-hypermedia/actors#sparql",bus:c,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(tH()).ActorQuerySourceIdentifyHypermediaNone({mediatorMergeBindingsContext:fe,name:"urn:comunica:default:query-source-identify-hypermedia/actors#none",bus:c,busFailMessage:"Query source hypermedia identification failed: none of the configured actors were able to identify ${action.url}"}),new(rH()).ActorExpressionEvaluatorFactoryDefault({mediatorQueryOperation:re,mediatorFunctionFactory:ye,mediatorMergeBindingsContext:fe,name:"urn:comunica:default:expression-evaluator-factory/actors#default",bus:I,busFailMessage:"Creation of Expression Evaluator failed"}),new(nH()).ActorQueryOperationGroup({mediatorMergeBindingsContext:fe,mediatorBindingsAggregatorFactory:he,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#group",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(aH()).ActorQueryOperationNop({mediatorMergeBindingsContext:fe,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#nop",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(iH()).ActorQueryOperationService({forceSparqlEndpoint:!1,mediatorMergeBindingsContext:fe,mediatorQuerySourceIdentify:Le,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#service",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(uH()).ActorQueryOperationValues({mediatorMergeBindingsContext:fe,name:"urn:comunica:default:query-operation/actors#values",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(oH()).ActorQueryOperationPathOneOrMore({mediatorMergeBindingsContext:fe,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(sH()).ActorQueryOperationPathZeroOrMore({mediatorMergeBindingsContext:fe,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(cH()).ActorQueryOperationPathZeroOrOne({mediatorMergeBindingsContext:fe,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"}),new(lH()).ActorQueryOperationUpdateDeleteInsert({mediatorUpdateQuads:J,mediatorMergeBindingsContext:fe,mediatorQueryOperation:re,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:P,busFailMessage:"Query operation processing failed: none of the configured actors were able to handle the operation type ${action.operation.type}"});const bt=new(dH()).ActorQueryProcessSequential({mediatorContextPreprocess:pe,mediatorQueryParse:Ae,mediatorOptimizeQueryOperation:Ie,mediatorQueryOperation:re,mediatorMergeBindingsContext:fe,name:"urn:comunica:default:query-process/actors#sequential",bus:C,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'});new(pH()).ActorQuerySourceIdentifyHypermedia({cacheSize:2048,maxIterators:64,aggregateTraversalStore:!0,mediatorDereferenceRdf:Q,mediatorMetadata:ue,mediatorMetadataExtract:ce,mediatorMetadataAccumulate:ne,mediatorQuerySourceIdentifyHypermedia:F,mediatorRdfResolveHypermediaLinks:Ce,mediatorRdfResolveHypermediaLinksQueue:Ve,mediatorMergeBindingsContext:fe,name:"urn:comunica:default:query-source-identify/actors#hypermedia",bus:B,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(nN()).ActorQuerySourceIdentifyRdfJs({mediatorMergeBindingsContext:fe,name:"urn:comunica:default:query-source-identify/actors#rdfjs",bus:B,busFailMessage:"Query source identification failed: none of the configured actors were able to identify ${action.querySourceUnidentified.value}"}),new(hH()).ActorRdfJoinNone({mediatorMergeBindingsContext:fe,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(yH()).ActorRdfJoinOptionalBind({bindOrder:"depth-first",selectivityModifier:1e-6,mediatorQueryOperation:re,mediatorMergeBindingsContext:fe,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}"}),new(mH()).ActorTermComparatorFactoryExpressionEvaluator({mediatorQueryOperation:re,mediatorFunctionFactory:ye,mediatorMergeBindingsContext:fe,name:"urn:comunica:default:term-comparator-factory/actors#expression-evaluator",bus:V,busFailMessage:"Creation of term comparator failed"});const Tt=new(FP()).ActorRdfJoinMultiBind({bindOrder:"breadth-first",selectivityModifier:1e-4,minMaxCardinalityRatio:60,mediatorJoinEntriesSort:Y,mediatorQueryOperation:re,mediatorMergeBindingsContext:fe,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[it,Te,qe]});new(bH()).ActorRdfJoinMultiSmallestFilterBindings({selectivityModifier:1e-4,blockSize:64,mediatorJoinEntriesSort:Y,mediatorJoin:Pe,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest-filter-bindings",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[it,Te,qe]}),new(_H()).ActorExtractLinksSolidTypeIndex({typeIndexPredicates:["http://www.w3.org/ns/solid/terms#publicTypeIndex","http://www.w3.org/ns/solid/terms#privateTypeIndex"],onlyMatchingTypes:!0,inference:!1,actorInitQuery:tt,mediatorDereferenceRdf:Q,name:"urn:comunica:default:extract-links/actors#solid-type-index",bus:n}),new(o1()).ActorQueryResultSerializeSparqlJson({emitMetadata:!0,httpObserver:Ot,mediaTypePriorities:{"application/sparql-results+json":.8},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#sparql-json",bus:s,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(s1()).ActorQueryResultSerializeStats({httpObserver:yt,mediaTypePriorities:{stats:.5},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"urn:comunica:default:query-result-serialize/actors#stats",bus:s,busFailMessage:"Query result serialization failed: none of the configured actors were able to serialize for type ${action.handle.type}"}),new(TH()).ActorQueryProcessExplainParsed({queryProcessor:bt,name:"urn:comunica:default:query-process/actors#explain-parsed",bus:C,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(wH()).ActorQueryProcessExplainLogical({queryProcessor:bt,name:"urn:comunica:default:query-process/actors#explain-logical",bus:C,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'}),new(SH()).ActorQueryProcessExplainPhysical({queryProcessor:bt,name:"urn:comunica:default:query-process/actors#explain-physical",bus:C,busFailMessage:'Query processing failed: none of the configured actor were process to the query "${action.query}"'});const xt=new(EH()).ActorOptimizeQueryOperationPruneEmptySourceOperations({useAskIfSupported:!1,name:"urn:comunica:default:optimize-query-operation/actors#prune-empty-source-operations",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Me]}),wt=new(AH()).ActorHttpProxy({mediatorHttp:R,name:"urn:comunica:default:http/actors#proxy",bus:Z,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[k,st]});new(OH()).ActorRdfJoinMultiBindSource({selectivityModifier:1e-4,blockSize:16,mediatorJoinEntriesSort:Y,mediatorJoinSelectivity:$,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind-source",bus:H,busFailMessage:"RDF joining failed: none of the configured actors were able to handle the join type ${action.type}",beforeActors:[it,Tt,Te,qe]});const gt=new(xH()).ActorOptimizeQueryOperationJoinConnected({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[xt]});new(RH()).ActorHttpRetry({mediatorHttp:R,httpInvalidator:je,name:"urn:comunica:default:http/actors#retry",bus:Z,busFailMessage:"HTTP request failed: none of the configured actors were able to handle ${action.input}",beforeActors:[wt]});const lr=new(NH()).ActorOptimizeQueryOperationBgpToJoin({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[gt]}),ht=new(IH()).ActorOptimizeQueryOperationJoinBgp({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[lr]}),Re=new(DH()).ActorOptimizeQueryOperationAssignSourcesExhaustive({name:"urn:comunica:default:optimize-query-operation/actors#assign-sources-exhaustive",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[ht]});return new(PH()).ActorOptimizeQueryOperationSetSeedSourcesQuadpatternIris({mediatorQuerySourceIdentify:Le,extractSubjects:!0,extractPredicates:!1,extractObjects:!0,extractGraphs:!0,extractVocabIris:!1,name:"urn:comunica:default:optimize-query-operation/actors#set-seed-sources-quadpattern-iris",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Re]}),new(jH()).ActorOptimizeQueryOperationDescribeToConstructsSubject({name:"urn:comunica:default:optimize-query-operation/actors#describe-to-constructs-subject",bus:o,busFailMessage:"Query optimization failed: none of the configured actors were able to optimize",beforeActors:[Re]}),tt}),p9}var Mbe;function I7e(){if(Mbe)return A6;Mbe=1,Object.defineProperty(A6,"__esModule",{value:!0}),A6.QueryEngine=void 0;const a=Tb(),e=N7e();let u=class extends a.QueryEngineBase{constructor(r=e()){super(r)}};return A6.QueryEngine=u,A6}var Cbe;function D7e(){return Cbe||(Cbe=1,(function(a){var e=Um&&Um.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Um&&Um.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(I7e(),a)})(Um)),Um}var F7e=D7e();class P7e{engine;engineLimit2;engineLimit3;constructor(){this.engine=new F7e.QueryEngine,this.engineLimit2=new E7e.QueryEngine,this.engineLimit3=new R7e.QueryEngine}async query(e,u,n){if(!n)return await this.engine.queryBindings(e,u);if(n==2)return await this.engineLimit2.queryBindings(e,u);if(n==3)return await this.engineLimit3.queryBindings(e,u)}}class j7e extends JRe.Logger{onLogCallback;constructor(e,u){super(),this.onLogCallback=u}trace(e,u){this.log("trace",e,u)}debug(e,u){this.log("info",e,u)}info(e,u){this.log("info",e,u)}warn(e,u){this.log("warn",e,u)}error(e,u){this.log("error",e,u)}fatal(e,u){this.log("fatal",e,u)}log(e,u,n){this.onLogCallback({id:Date.now()+Math.random(),timestamp:new Date().toLocaleTimeString(),message:u,level:e})}}const M7e=new P7e,ib=async(a,e,u,n)=>{console.log(`Starting Link Traversal for query:
`,a);const r={idp:"void",lenient:!0,noCache:!0,invalidateCache:!0,...e};return M7e.query(a,r,u)},Iwe=We.createContext(void 0),C7e=({children:a})=>{const[e,u]=We.useState(null),n=t=>{u(t),console.log("Mock user logged in:",t.username)},r=()=>{u(null)};return Ge.jsx(Iwe.Provider,{value:{user:e,login:n,logout:r,isAuthenticated:!!e},children:a})},MH=()=>{const a=We.useContext(Iwe);if(!a)throw new Error("useAuth must be used within an AuthProvider");return a},L7e=`
  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
  PREFIX foaf: <http://xmlns.com/foaf/0.1/>
  PREFIX snvoc: <https://solidbench.linkeddatafragments.org/www.ldbc.eu/ldbc_socialnet/1.0/vocabulary/>
  SELECT ?firstName ?lastName ?cityName ?friendProfile ?id WHERE {
    TEMPLATE:ME rdf:type snvoc:Person;
      snvoc:knows ?friend.
    ?friend snvoc:hasPerson ?friendProfile.
    ?friendProfile rdf:type snvoc:Person;
      snvoc:id ?id;
      snvoc:firstName ?firstName;
      snvoc:lastName ?lastName;
      snvoc:isLocatedIn ?city.
    ?city foaf:name ?cityName.
  }
`,q7e=`
  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
  PREFIX foaf: <http://xmlns.com/foaf/0.1/>
  PREFIX snvoc: <https://solidbench.linkeddatafragments.org/www.ldbc.eu/ldbc_socialnet/1.0/vocabulary/>
  SELECT ?firstName ?lastName ?birthday ?locationIP ?cityName ?gender ?creationDate ?email ?interestName WHERE {
    TEMPLATE:ME rdf:type snvoc:Person;
      snvoc:firstName ?firstName;
      snvoc:lastName ?lastName;
      snvoc:gender ?gender;
      snvoc:birthday ?birthday;
      snvoc:creationDate ?creationDate;
      snvoc:locationIP ?locationIP;
      snvoc:isLocatedIn ?city;
      snvoc:email ?email;
      snvoc:hasInterest ?interest.
    ?interest foaf:name ?interestName.
    ?city foaf:name ?cityName.
  }
`,B7e=`
  PREFIX snvoc: <https://solidbench.linkeddatafragments.org/www.ldbc.eu/ldbc_socialnet/1.0/vocabulary/>
  SELECT DISTINCT ?forum ?forumId ?forumTitle WHERE {
    ?message snvoc:hasCreator TEMPLATE:ME.
    ?forum snvoc:containerOf ?message;
      snvoc:id ?forumId;
      snvoc:title ?forumTitle.
  }
`,Lbe=`
  PREFIX snvoc: <https://solidbench.linkeddatafragments.org/www.ldbc.eu/ldbc_socialnet/1.0/vocabulary/>
  SELECT (COUNT(?member) AS ?count) WHERE {
    <FORUM_IRI> snvoc:hasMember ?member.
  }
`,U7e=(a,e)=>{const u=a.get("email").value,n=a.get("interestName").value;if(!e)return{name:a.get("firstName").value,lastName:a.get("lastName").value,gender:a.get("gender").value,birthday:a.get("birthday").value,creationDate:new Date(a.get("creationDate").value),locationIP:a.get("locationIP").value,city:a.get("cityName").value,email:u,interests:[n]};const r=e.interests.includes(n)?e.interests:[...e.interests,n],t=e.email.includes(u)?e.email:`${e.email}, ${u}`;return{...e,interests:r,email:t}},Q7e=({setDebugQuery:a,logger:e,createTracker:u})=>{const n=We.useRef(null),{user:r,isAuthenticated:t}=MH(),i=kF(),[o,l]=We.useState(null),[s,c]=We.useState([]),[d,f]=We.useState([]),[p,h]=We.useState(null),[g,v]=We.useState(!1),m=()=>{n.current&&(n.current.destroy(),n.current=null),a("")};if(We.useEffect(()=>()=>m(),[]),!t||!r)return Ge.jsxs("div",{className:"card",style:{margin:"40px auto",maxWidth:"500px",textAlign:"center"},children:[Ge.jsx("h2",{children:"Access Denied"}),Ge.jsx("p",{children:"Please log in to view your profile."})]});const T=async()=>{m(),v(!0),h("info"),l(null);const S=q7e.replaceAll("TEMPLATE:ME",`<${r.username}>`);a(S);try{const N=u();let j={log:e};N&&(j={...j,[N.trackerDiscovery.key.name]:N.trackerDiscovery,[N.trackerDereference.key.name]:N.trackerDereference});const q=await ib(S,j,2);n.current=q,q.on("data",O=>{l(I=>U7e(O,I)),v(!1)}),q.on("end",()=>v(!1))}catch(N){console.error("Failed to load profile",N),v(!1)}},w=async()=>{m(),v(!0),h("forums"),c([]);const S=B7e.replaceAll("TEMPLATE:ME",`<${r.username}>`);a(S+`

`+Lbe);try{const N=u();let j={log:e};N&&(j={...j,[N.trackerDiscovery.key.name]:N.trackerDiscovery,[N.trackerDereference.key.name]:N.trackerDereference});const q=await ib(S,j,void 0);n.current=q,q.on("data",O=>{if(n.current!==q)return;const I=O.get("forum").value,A={uri:I,id:O.get("forumId").value,title:O.get("forumTitle").value,memberCount:-1};c(C=>C.some(B=>B.uri===I)?C:[...C,A]),v(!1);const P=Lbe.replace("FORUM_IRI",I);ib(P,{traverse:!1},2).then(C=>{C.on("data",B=>{const H=parseInt(B.get("count").value);c(V=>V.map(G=>G.uri===I?{...G,memberCount:H}:G))})})}),q.on("end",()=>{n.current===q&&v(!1)})}catch(N){console.error("Failed to load forums",N),v(!1)}},E=async()=>{m(),v(!0),h("friends"),f([]);const S=L7e.replaceAll("TEMPLATE:ME",`<${r.username}>`);a(S);try{const N=u();let j={log:e};N&&(j={...j,[N.trackerDiscovery.key.name]:N.trackerDiscovery,[N.trackerDereference.key.name]:N.trackerDereference});const q=await ib(S,j,2);n.current=q,q.on("data",O=>{const I=O.get("friendProfile").value,A={firstName:O.get("firstName").value,lastName:O.get("lastName").value,city:O.get("cityName").value,id:O.get("id").value,friendCard:I};f(P=>P.some(C=>C.friendCard===I)?P:[...P,A]),v(!1)}),q.on("end",()=>v(!1))}catch(N){console.error("Failed to load friends",N),v(!1)}};return Ge.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"40px 20px"},children:[Ge.jsxs("div",{className:"dashboard-header",children:[Ge.jsxs("h1",{className:"dashboard-title",children:["Welcome back, ",r.name," "]}),Ge.jsx("div",{className:"user-badge",children:Ge.jsxs("span",{children:["ID: ",r.username]})})]}),Ge.jsxs("div",{className:"action-bar",children:[Ge.jsx("button",{className:"btn-primary",onClick:T,disabled:g,children:g&&p==="info"?"Loading...":" My Profile"}),Ge.jsx("button",{className:"btn-primary",onClick:E,disabled:g,children:g&&p==="friends"?"Loading...":" Friends"}),Ge.jsx("button",{className:"btn-primary",onClick:w,disabled:g,children:g&&p==="forums"?"Loading...":" Forums"})]}),Ge.jsxs("div",{style:{minHeight:"300px"},children:[g&&Ge.jsx("div",{className:"card content-placeholder",children:Ge.jsxs("div",{className:"loading-pulse",children:[Ge.jsx("div",{className:"spinner"}),Ge.jsx("span",{children:"Traversing the decentralized web..."})]})}),!g&&p==="info"&&o&&Ge.jsxs("div",{className:"profile-container",children:[Ge.jsxs("div",{className:"card profile-column-left",children:[Ge.jsxs("div",{className:"profile-header",children:[Ge.jsx("div",{className:"avatar-circle",children:""}),Ge.jsxs("div",{children:[Ge.jsxs("h2",{style:{margin:0},children:[o.name," ",o.lastName]}),Ge.jsxs("p",{style:{color:"#666"},children:[" ",o.city]})]})]}),Ge.jsxs("div",{className:"metadata-grid",children:[Ge.jsxs("div",{children:[Ge.jsx("div",{className:"meta-label",children:"Gender"}),Ge.jsx("div",{className:"meta-value",children:o.gender})]}),Ge.jsxs("div",{children:[Ge.jsx("div",{className:"meta-label",children:"Birthday"}),Ge.jsx("div",{className:"meta-value",children:o.birthday})]}),Ge.jsxs("div",{children:[Ge.jsx("div",{className:"meta-label",children:"Member Since"}),Ge.jsx("div",{className:"meta-value",children:o.creationDate.toLocaleDateString()})]}),Ge.jsxs("div",{children:[Ge.jsx("div",{className:"meta-label",children:"IP Address"}),Ge.jsx("div",{className:"meta-value",children:o.locationIP})]}),Ge.jsxs("div",{style:{gridColumn:"1 / -1"},children:[Ge.jsx("div",{className:"meta-label",children:"Email"}),Ge.jsx("div",{className:"meta-value",children:o.email})]})]})]}),Ge.jsxs("div",{className:"card profile-column-right",children:[Ge.jsx("h3",{children:" Interests"}),Ge.jsx("div",{className:"scroll-area",children:o.interests.map((S,N)=>Ge.jsx("span",{className:"interest-chip",children:S},N))})]})]}),!g&&p==="forums"&&Ge.jsxs("div",{className:"card",children:[Ge.jsxs("h2",{children:["My Forums (",s.length,")"]}),Ge.jsx("div",{className:"friends-grid",children:s.map(S=>Ge.jsxs("div",{className:"friend-card",children:[Ge.jsx("div",{className:"friend-avatar-placeholder",style:{background:"#e0e7ff"},children:""}),Ge.jsx("h3",{className:"friend-name",children:S.title}),Ge.jsx("p",{className:"friend-city",children:S.memberCount===-1?" Counting...":` ${S.memberCount} Members`}),Ge.jsx("button",{className:"btn-outline-sm",onClick:()=>i(`/forums/${S.id}`,{state:{forumUri:S.uri}}),children:"View Forum"})]},S.uri))})]}),!g&&p==="friends"&&Ge.jsxs("div",{className:"card",children:[Ge.jsxs("h2",{children:["Friends Network (",d.length,")"]}),Ge.jsx("div",{className:"friends-grid",children:d.map(S=>Ge.jsxs("div",{className:"friend-card",children:[Ge.jsx("div",{className:"friend-avatar-placeholder",children:S.firstName.charAt(0)}),Ge.jsxs("h3",{className:"friend-name",children:[S.firstName," ",S.lastName]}),Ge.jsxs("p",{className:"friend-city",children:[" ",S.city]}),Ge.jsx("button",{className:"btn-outline-sm",onClick:()=>i(`/profiles/${S.id}`,{state:{personUri:S.friendCard}}),children:"View Profile"})]},S.friendCard))})]})]})]})},V7e=({setDebugQuery:a,logger:e,createTracker:u})=>{const n=nc(),r=kF(),t=n.state?.forumUri,i=We.useRef(null),[o,l]=We.useState(""),[s,c]=We.useState(""),[d,f]=We.useState({}),[p,h]=We.useState(!0);We.useEffect(()=>((async()=>{if(!t)return;const m=`
        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
        PREFIX snvoc: <https://solidbench.linkeddatafragments.org/www.ldbc.eu/ldbc_socialnet/1.0/vocabulary/>
        SELECT ?title ?fName ?lName ?mod  WHERE {
            <${t}> rdf:type snvoc:Forum;
                snvoc:title ?title;
            OPTIONAL {
                <${t}> snvoc:hasModerator ?mod.
                ?mod snvoc:firstName ?fName;
                    snvoc:lastName ?lName.
            }
        }`,T=`
        PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
        PREFIX snvoc: <https://solidbench.linkeddatafragments.org/www.ldbc.eu/ldbc_socialnet/1.0/vocabulary/>
        SELECT ?content ?file ?msg ?date ?person ?authorName ?authorLastName ?id WHERE {
          <${t}>  snvoc:containerOf ?msg.
          { ?msg snvoc:content ?content }
          UNION
          { ?msg snvoc:imageFile ?file }
          ?msg snvoc:creationDate ?date;
               snvoc:hasCreator ?person.
          ?person snvoc:firstName ?authorName;
                  snvoc:lastName ?authorLastName;
                  snvoc:id ?id.
        }`;a(m+`


`+T);try{(await ib(m,{traverse:"false",log:e},void 0)).on("data",j=>{j.has("title")&&l(j.get("title").value),j.has("fName")&&j.has("lName")&&c(`${j.get("fName").value} ${j.get("lName").value}`),h(!1)});const E=u();let S={log:e};E&&(S={...S,[E.trackerDiscovery.key.name]:E.trackerDiscovery,[E.trackerDereference.key.name]:E.trackerDereference});const N=await ib(T,S,2);i.current=N,N.on("data",j=>{const q=j.get("msg").value,O=j.has("content")?j.get("content").value:"",I=j.has("file")?j.get("file").value:"",A=new Date(j.get("date").value),P=j.get("person").value,C=`${j.get("authorName").value} ${j.get("authorLastName").value}`,B=`${j.get("id").value}`;f(H=>{const V=H[q]||{uri:q,content:"",imageFile:"",date:A,authorUri:P,authorName:C,authorid:B};return{...H,[q]:{...V,content:O||V.content,imageFile:I||V.imageFile}}}),h(!1)}),N.on("end",()=>h(!1))}catch(w){console.error("Forum query failed",w),h(!1)}})(),()=>{i.current&&i.current.destroy()}),[t,a]);const g=Object.values(d).sort((v,m)=>m.date.getTime()-v.date.getTime());return Ge.jsxs("div",{className:"container",style:{maxWidth:"800px",margin:"20px auto",padding:"0 20px"},children:[Ge.jsx("button",{className:"btn-primary",onClick:()=>r(-1),style:{marginBottom:"20px"},children:" Back to Profile"}),p&&g.length===0?Ge.jsx("div",{className:"card loading-pulse",children:"Searching for forum messages..."}):Ge.jsxs(Ge.Fragment,{children:[Ge.jsxs("div",{className:"card forum-header-card",children:[Ge.jsx("h1",{children:o||"Untitled Forum"}),Ge.jsxs("p",{className:"forum-mod",children:[" Moderator: ",Ge.jsx("strong",{children:s||"None"})]})]}),Ge.jsxs("div",{className:"message-list",children:[Ge.jsxs("h3",{children:["Recent Activity (",g.length,")"]}),g.map(v=>Ge.jsxs("div",{className:"card message-card",style:{marginBottom:"15px",padding:"20px",cursor:"pointer"},children:[Ge.jsxs("div",{className:"author-link",style:{fontWeight:"bold",color:"#2563eb",marginBottom:"8px",display:"inline-block"},onClick:()=>r(`/profiles/${v.authorid}`,{state:{personUri:v.authorUri}}),children:[" ",v.authorName]}),v.content&&Ge.jsx("div",{style:{marginBottom:"10px"},children:Ge.jsx("p",{style:{margin:0,fontSize:"1.1rem",color:"#1e293b"},children:v.content})}),v.imageFile&&Ge.jsxs("div",{className:"image-attachment-preview",children:[Ge.jsx("small",{children:" Image Attachment:"}),Ge.jsx("code",{children:v.imageFile})]}),Ge.jsx("div",{className:"message-footer",children:Ge.jsxs("small",{children:["Posted: ",v.date.toLocaleString()]})})]},v.uri))]})]})]})},H7e=`
  PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
  PREFIX foaf: <http://xmlns.com/foaf/0.1/>
  PREFIX snvoc: <https://solidbench.linkeddatafragments.org/www.ldbc.eu/ldbc_socialnet/1.0/vocabulary/>
  SELECT ?firstName ?lastName ?birthday ?locationIP ?cityName ?gender ?creationDate ?email ?interestName WHERE {
    <TEMPLATE:URI> rdf:type snvoc:Person;
      snvoc:firstName ?firstName;
      snvoc:lastName ?lastName;
      snvoc:gender ?gender;
      snvoc:birthday ?birthday;
      snvoc:creationDate ?creationDate;
      snvoc:locationIP ?locationIP;
      snvoc:isLocatedIn ?city;
      snvoc:email ?email;
      snvoc:hasInterest ?interest.
    ?interest foaf:name ?interestName.
    ?city foaf:name ?cityName.
  }
`,k7e=(a,e)=>{const u=a.get("email").value,n=a.get("interestName").value;if(!e)return{name:a.get("firstName").value,lastName:a.get("lastName").value,gender:a.get("gender").value,birthday:a.get("birthday").value,creationDate:new Date(a.get("creationDate").value),locationIP:a.get("locationIP").value,city:a.get("cityName").value,email:u,interests:[n]};const r=e.interests.includes(n)?e.interests:[...e.interests,n],t=e.email.includes(u)?e.email:`${e.email}, ${u}`;return{...e,interests:r,email:t}},z7e=({setDebugQuery:a,logger:e,createTracker:u})=>{const{id:n}=ROe(),r=nc(),t=kF(),i=We.useRef(null),{isAuthenticated:o}=MH(),[l,s]=We.useState(null),[c,d]=We.useState(!0),f=()=>{i.current&&(i.current.destroy(),i.current=null)};return We.useEffect(()=>((async()=>{if(!n)return;d(!0),f();let h=r.state?.personUri;if(!h){d(!1);return}const g=H7e.replace("TEMPLATE:URI",h);a(g);const v=u();try{let m={log:e};v&&(m={...m,[v.trackerDiscovery.key.name]:v.trackerDiscovery,[v.trackerDereference.key.name]:v.trackerDereference});const T=await ib(g,m,2);i.current=T,T.on("data",w=>{s(E=>k7e(w,E)),d(!1)}),T.on("end",()=>d(!1))}catch(m){console.error("Failed to load profile",m),d(!1)}})(),()=>f()),[n,r.state]),Ge.jsxs("div",{style:{maxWidth:"1000px",margin:"0 auto",padding:"40px 20px"},children:[Ge.jsx("button",{className:"btn-primary",onClick:()=>t(-1),style:{marginBottom:"20px"},children:" Back"}),c&&!l?Ge.jsx("div",{className:"card content-placeholder",children:Ge.jsxs("div",{className:"loading-pulse",children:[Ge.jsx("div",{className:"spinner"}),Ge.jsxs("span",{children:["Traversing pods to find ",n,"..."]})]})}):l?Ge.jsxs("div",{className:"profile-container",children:[Ge.jsxs("div",{className:"card profile-column-left",children:[Ge.jsxs("div",{className:"profile-header",children:[Ge.jsx("div",{className:"avatar-circle",style:{background:"#fef3c7",color:"#d97706"},children:""}),Ge.jsxs("div",{children:[Ge.jsxs("h2",{style:{margin:0},children:[l.name," ",l.lastName]}),Ge.jsxs("p",{style:{color:"#666"},children:[" ",l.city]}),Ge.jsxs("small",{style:{color:"#94a3b8"},children:["Solid ID: ",n]})]})]}),Ge.jsxs("div",{className:"metadata-grid",children:[Ge.jsxs("div",{children:[Ge.jsx("div",{className:"meta-label",children:"Gender"}),Ge.jsx("div",{className:"meta-value",children:l.gender})]}),Ge.jsxs("div",{children:[Ge.jsx("div",{className:"meta-label",children:"Birthday"}),Ge.jsx("div",{className:"meta-value",children:l.birthday})]}),Ge.jsxs("div",{children:[Ge.jsx("div",{className:"meta-label",children:"Member Since"}),Ge.jsx("div",{className:"meta-value",children:l.creationDate.toLocaleDateString()})]}),Ge.jsxs("div",{style:{gridColumn:"1 / -1"},children:[Ge.jsx("div",{className:"meta-label",children:"Email"}),Ge.jsx("div",{className:"meta-value",children:l.email})]})]})]}),Ge.jsxs("div",{className:"card profile-column-right",children:[Ge.jsx("h3",{children:" Interests"}),Ge.jsx("div",{className:"scroll-area",children:l.interests.map((p,h)=>Ge.jsx("span",{className:"interest-chip",style:{background:"#ecfdf5",color:"#059669",border:"1px solid #a7f3d0"},children:p},h))})]})]}):Ge.jsxs("div",{className:"card",children:[Ge.jsx("h2",{children:"User Not Found"}),Ge.jsxs("p",{children:['The profile for "',n,'" could not be resolved in the network.']})]})]})};function b7(a,e){(e==null||e>a.length)&&(e=a.length);for(var u=0,n=Array(e);u<e;u++)n[u]=a[u];return n}function G7e(a){if(Array.isArray(a))return a}function $7e(a){if(Array.isArray(a))return b7(a)}function Al(a,e){if(!(a instanceof e))throw new TypeError("Cannot call a class as a function")}function X7e(a,e){for(var u=0;u<e.length;u++){var n=e[u];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(a,Fwe(n.key),n)}}function Ol(a,e,u){return e&&X7e(a.prototype,e),Object.defineProperty(a,"prototype",{writable:!1}),a}function yi(a,e){var u=typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(!u){if(Array.isArray(a)||(u=CH(a))||e){u&&(a=u);var n=0,r=function(){};return{s:r,n:function(){return n>=a.length?{done:!0}:{done:!1,value:a[n++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var t,i=!0,o=!1;return{s:function(){u=u.call(a)},n:function(){var l=u.next();return i=l.done,l},e:function(l){o=!0,t=l},f:function(){try{i||u.return==null||u.return()}finally{if(o)throw t}}}}function Dwe(a,e,u){return(e=Fwe(e))in a?Object.defineProperty(a,e,{value:u,enumerable:!0,configurable:!0,writable:!0}):a[e]=u,a}function K7e(a){if(typeof Symbol<"u"&&a[Symbol.iterator]!=null||a["@@iterator"]!=null)return Array.from(a)}function J7e(a,e){var u=a==null?null:typeof Symbol<"u"&&a[Symbol.iterator]||a["@@iterator"];if(u!=null){var n,r,t,i,o=[],l=!0,s=!1;try{if(t=(u=u.call(a)).next,e===0){if(Object(u)!==u)return;l=!1}else for(;!(l=(n=t.call(u)).done)&&(o.push(n.value),o.length!==e);l=!0);}catch(c){s=!0,r=c}finally{try{if(!l&&u.return!=null&&(i=u.return(),Object(i)!==i))return}finally{if(s)throw r}}return o}}function W7e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Y7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zn(a,e){return G7e(a)||J7e(a,e)||CH(a,e)||W7e()}function RF(a){return $7e(a)||K7e(a)||CH(a)||Y7e()}function Z7e(a,e){if(typeof a!="object"||!a)return a;var u=a[Symbol.toPrimitive];if(u!==void 0){var n=u.call(a,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(a)}function Fwe(a){var e=Z7e(a,"string");return typeof e=="symbol"?e:e+""}function ta(a){"@babel/helpers - typeof";return ta=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},ta(a)}function CH(a,e){if(a){if(typeof a=="string")return b7(a,e);var u={}.toString.call(a).slice(8,-1);return u==="Object"&&a.constructor&&(u=a.constructor.name),u==="Map"||u==="Set"?Array.from(a):u==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(u)?b7(a,e):void 0}}var Zn=typeof window>"u"?null:window,qbe=Zn?Zn.navigator:null;Zn&&Zn.document;var eqe=ta(""),Pwe=ta({}),tqe=ta(function(){}),rqe=typeof HTMLElement>"u"?"undefined":ta(HTMLElement),oN=function(e){return e&&e.instanceString&&On(e.instanceString)?e.instanceString():null},Mt=function(e){return e!=null&&ta(e)==eqe},On=function(e){return e!=null&&ta(e)===tqe},Wr=function(e){return!Bi(e)&&(Array.isArray?Array.isArray(e):e!=null&&e instanceof Array)},_r=function(e){return e!=null&&ta(e)===Pwe&&!Wr(e)&&e.constructor===Object},nqe=function(e){return e!=null&&ta(e)===Pwe},At=function(e){return e!=null&&ta(e)===ta(1)&&!isNaN(e)},aqe=function(e){return At(e)&&Math.floor(e)===e},NF=function(e){if(rqe!=="undefined")return e!=null&&e instanceof HTMLElement},Bi=function(e){return sN(e)||jwe(e)},sN=function(e){return oN(e)==="collection"&&e._private.single},jwe=function(e){return oN(e)==="collection"&&!e._private.single},LH=function(e){return oN(e)==="core"},Mwe=function(e){return oN(e)==="stylesheet"},iqe=function(e){return oN(e)==="event"},dl=function(e){return e==null?!0:!!(e===""||e.match(/^\s+$/))},uqe=function(e){return typeof HTMLElement>"u"?!1:e instanceof HTMLElement},oqe=function(e){return _r(e)&&At(e.x1)&&At(e.x2)&&At(e.y1)&&At(e.y2)},sqe=function(e){return nqe(e)&&On(e.then)},cqe=function(){return qbe&&qbe.userAgent.match(/msie|trident|edge/i)},c1=function(e,u){u||(u=function(){if(arguments.length===1)return arguments[0];if(arguments.length===0)return"undefined";for(var t=[],i=0;i<arguments.length;i++)t.push(arguments[i]);return t.join("$")});var n=function(){var t=this,i=arguments,o,l=u.apply(t,i),s=n.cache;return(o=s[l])||(o=s[l]=e.apply(t,i)),o};return n.cache={},n},qH=c1(function(a){return a.replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}),MP=c1(function(a){return a.replace(/(-\w)/g,function(e){return e[1].toUpperCase()})}),Cwe=c1(function(a,e){return a+e[0].toUpperCase()+e.substring(1)},function(a,e){return a+"$"+e}),Bbe=function(e){return dl(e)?e:e.charAt(0).toUpperCase()+e.substring(1)},rl=function(e,u){return e.slice(-1*u.length)===u},ea="(?:[-+]?(?:(?:\\d+|\\d*\\.\\d+)(?:[Ee][+-]?\\d+)?))",lqe="rgb[a]?\\(("+ea+"[%]?)\\s*,\\s*("+ea+"[%]?)\\s*,\\s*("+ea+"[%]?)(?:\\s*,\\s*("+ea+"))?\\)",dqe="rgb[a]?\\((?:"+ea+"[%]?)\\s*,\\s*(?:"+ea+"[%]?)\\s*,\\s*(?:"+ea+"[%]?)(?:\\s*,\\s*(?:"+ea+"))?\\)",fqe="hsl[a]?\\(("+ea+")\\s*,\\s*("+ea+"[%])\\s*,\\s*("+ea+"[%])(?:\\s*,\\s*("+ea+"))?\\)",pqe="hsl[a]?\\((?:"+ea+")\\s*,\\s*(?:"+ea+"[%])\\s*,\\s*(?:"+ea+"[%])(?:\\s*,\\s*(?:"+ea+"))?\\)",hqe="\\#[0-9a-fA-F]{3}",yqe="\\#[0-9a-fA-F]{6}",Lwe=function(e,u){return e<u?-1:e>u?1:0},mqe=function(e,u){return-1*Lwe(e,u)},qt=Object.assign!=null?Object.assign.bind(Object):function(a){for(var e=arguments,u=1;u<e.length;u++){var n=e[u];if(n!=null)for(var r=Object.keys(n),t=0;t<r.length;t++){var i=r[t];a[i]=n[i]}}return a},bqe=function(e){if(!(!(e.length===4||e.length===7)||e[0]!=="#")){var u=e.length===4,n,r,t,i=16;return u?(n=parseInt(e[1]+e[1],i),r=parseInt(e[2]+e[2],i),t=parseInt(e[3]+e[3],i)):(n=parseInt(e[1]+e[2],i),r=parseInt(e[3]+e[4],i),t=parseInt(e[5]+e[6],i)),[n,r,t]}},gqe=function(e){var u,n,r,t,i,o,l,s;function c(h,g,v){return v<0&&(v+=1),v>1&&(v-=1),v<1/6?h+(g-h)*6*v:v<1/2?g:v<2/3?h+(g-h)*(2/3-v)*6:h}var d=new RegExp("^"+fqe+"$").exec(e);if(d){if(n=parseInt(d[1]),n<0?n=(360- -1*n%360)%360:n>360&&(n=n%360),n/=360,r=parseFloat(d[2]),r<0||r>100||(r=r/100,t=parseFloat(d[3]),t<0||t>100)||(t=t/100,i=d[4],i!==void 0&&(i=parseFloat(i),i<0||i>1)))return;if(r===0)o=l=s=Math.round(t*255);else{var f=t<.5?t*(1+r):t+r-t*r,p=2*t-f;o=Math.round(255*c(p,f,n+1/3)),l=Math.round(255*c(p,f,n)),s=Math.round(255*c(p,f,n-1/3))}u=[o,l,s,i]}return u},vqe=function(e){var u,n=new RegExp("^"+lqe+"$").exec(e);if(n){u=[];for(var r=[],t=1;t<=3;t++){var i=n[t];if(i[i.length-1]==="%"&&(r[t]=!0),i=parseFloat(i),r[t]&&(i=i/100*255),i<0||i>255)return;u.push(Math.floor(i))}var o=r[1]||r[2]||r[3],l=r[1]&&r[2]&&r[3];if(o&&!l)return;var s=n[4];if(s!==void 0){if(s=parseFloat(s),s<0||s>1)return;u.push(s)}}return u},_qe=function(e){return Tqe[e.toLowerCase()]},qwe=function(e){return(Wr(e)?e:null)||_qe(e)||bqe(e)||vqe(e)||gqe(e)},Tqe={transparent:[0,0,0,0],aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},Bwe=function(e){for(var u=e.map,n=e.keys,r=n.length,t=0;t<r;t++){var i=n[t];if(_r(i))throw Error("Tried to set map with object key");t<n.length-1?(u[i]==null&&(u[i]={}),u=u[i]):u[i]=e.value}},Uwe=function(e){for(var u=e.map,n=e.keys,r=n.length,t=0;t<r;t++){var i=n[t];if(_r(i))throw Error("Tried to get map with object key");if(u=u[i],u==null)return u}return u},DD=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cN(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var h9,Ube;function lN(){if(Ube)return h9;Ube=1;function a(e){var u=typeof e;return e!=null&&(u=="object"||u=="function")}return h9=a,h9}var y9,Qbe;function wqe(){if(Qbe)return y9;Qbe=1;var a=typeof DD=="object"&&DD&&DD.Object===Object&&DD;return y9=a,y9}var m9,Vbe;function CP(){if(Vbe)return m9;Vbe=1;var a=wqe(),e=typeof self=="object"&&self&&self.Object===Object&&self,u=a||e||Function("return this")();return m9=u,m9}var b9,Hbe;function Sqe(){if(Hbe)return b9;Hbe=1;var a=CP(),e=function(){return a.Date.now()};return b9=e,b9}var g9,kbe;function Eqe(){if(kbe)return g9;kbe=1;var a=/\s/;function e(u){for(var n=u.length;n--&&a.test(u.charAt(n)););return n}return g9=e,g9}var v9,zbe;function Aqe(){if(zbe)return v9;zbe=1;var a=Eqe(),e=/^\s+/;function u(n){return n&&n.slice(0,a(n)+1).replace(e,"")}return v9=u,v9}var _9,Gbe;function BH(){if(Gbe)return _9;Gbe=1;var a=CP(),e=a.Symbol;return _9=e,_9}var T9,$be;function Oqe(){if($be)return T9;$be=1;var a=BH(),e=Object.prototype,u=e.hasOwnProperty,n=e.toString,r=a?a.toStringTag:void 0;function t(i){var o=u.call(i,r),l=i[r];try{i[r]=void 0;var s=!0}catch{}var c=n.call(i);return s&&(o?i[r]=l:delete i[r]),c}return T9=t,T9}var w9,Xbe;function xqe(){if(Xbe)return w9;Xbe=1;var a=Object.prototype,e=a.toString;function u(n){return e.call(n)}return w9=u,w9}var S9,Kbe;function Qwe(){if(Kbe)return S9;Kbe=1;var a=BH(),e=Oqe(),u=xqe(),n="[object Null]",r="[object Undefined]",t=a?a.toStringTag:void 0;function i(o){return o==null?o===void 0?r:n:t&&t in Object(o)?e(o):u(o)}return S9=i,S9}var E9,Jbe;function Rqe(){if(Jbe)return E9;Jbe=1;function a(e){return e!=null&&typeof e=="object"}return E9=a,E9}var A9,Wbe;function dN(){if(Wbe)return A9;Wbe=1;var a=Qwe(),e=Rqe(),u="[object Symbol]";function n(r){return typeof r=="symbol"||e(r)&&a(r)==u}return A9=n,A9}var O9,Ybe;function Nqe(){if(Ybe)return O9;Ybe=1;var a=Aqe(),e=lN(),u=dN(),n=NaN,r=/^[-+]0x[0-9a-f]+$/i,t=/^0b[01]+$/i,i=/^0o[0-7]+$/i,o=parseInt;function l(s){if(typeof s=="number")return s;if(u(s))return n;if(e(s)){var c=typeof s.valueOf=="function"?s.valueOf():s;s=e(c)?c+"":c}if(typeof s!="string")return s===0?s:+s;s=a(s);var d=t.test(s);return d||i.test(s)?o(s.slice(2),d?2:8):r.test(s)?n:+s}return O9=l,O9}var x9,Zbe;function Iqe(){if(Zbe)return x9;Zbe=1;var a=lN(),e=Sqe(),u=Nqe(),n="Expected a function",r=Math.max,t=Math.min;function i(o,l,s){var c,d,f,p,h,g,v=0,m=!1,T=!1,w=!0;if(typeof o!="function")throw new TypeError(n);l=u(l)||0,a(s)&&(m=!!s.leading,T="maxWait"in s,f=T?r(u(s.maxWait)||0,l):f,w="trailing"in s?!!s.trailing:w);function E(C){var B=c,H=d;return c=d=void 0,v=C,p=o.apply(H,B),p}function S(C){return v=C,h=setTimeout(q,l),m?E(C):p}function N(C){var B=C-g,H=C-v,V=l-B;return T?t(V,f-H):V}function j(C){var B=C-g,H=C-v;return g===void 0||B>=l||B<0||T&&H>=f}function q(){var C=e();if(j(C))return O(C);h=setTimeout(q,N(C))}function O(C){return h=void 0,w&&c?E(C):(c=d=void 0,p)}function I(){h!==void 0&&clearTimeout(h),v=0,c=g=d=h=void 0}function A(){return h===void 0?p:O(e())}function P(){var C=e(),B=j(C);if(c=arguments,d=this,g=C,B){if(h===void 0)return S(g);if(T)return clearTimeout(h),h=setTimeout(q,l),E(g)}return h===void 0&&(h=setTimeout(q,l)),p}return P.cancel=I,P.flush=A,P}return x9=i,x9}var Dqe=Iqe(),fN=cN(Dqe),R9=Zn?Zn.performance:null,Vwe=R9&&R9.now?function(){return R9.now()}:function(){return Date.now()},Fqe=(function(){if(Zn){if(Zn.requestAnimationFrame)return function(a){Zn.requestAnimationFrame(a)};if(Zn.mozRequestAnimationFrame)return function(a){Zn.mozRequestAnimationFrame(a)};if(Zn.webkitRequestAnimationFrame)return function(a){Zn.webkitRequestAnimationFrame(a)};if(Zn.msRequestAnimationFrame)return function(a){Zn.msRequestAnimationFrame(a)}}return function(a){a&&setTimeout(function(){a(Vwe())},1e3/60)}})(),IF=function(e){return Fqe(e)},tc=Vwe,tb=9261,Hwe=65599,Cg=5381,kwe=function(e){for(var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tb,n=u,r;r=e.next(),!r.done;)n=n*Hwe+r.value|0;return n},b4=function(e){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:tb;return u*Hwe+e|0},g4=function(e){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Cg;return(u<<5)+u+e|0},Pqe=function(e,u){return e*2097152+u},Gc=function(e){return e[0]*2097152+e[1]},FD=function(e,u){return[b4(e[0],u[0]),g4(e[1],u[1])]},ege=function(e,u){var n={value:0,done:!1},r=0,t=e.length,i={next:function(){return r<t?n.value=e[r++]:n.done=!0,n}};return kwe(i,u)},cb=function(e,u){var n={value:0,done:!1},r=0,t=e.length,i={next:function(){return r<t?n.value=e.charCodeAt(r++):n.done=!0,n}};return kwe(i,u)},zwe=function(){return jqe(arguments)},jqe=function(e){for(var u,n=0;n<e.length;n++){var r=e[n];n===0?u=cb(r):u=cb(r,u)}return u};function Mqe(a,e,u,n,r){var t=r*Math.PI/180,i=Math.cos(t)*(a-u)-Math.sin(t)*(e-n)+u,o=Math.sin(t)*(a-u)+Math.cos(t)*(e-n)+n;return{x:i,y:o}}var Cqe=function(e,u,n,r,t,i){return{x:(e-n)*t+n,y:(u-r)*i+r}};function Lqe(a,e,u){if(u===0)return a;var n=(e.x1+e.x2)/2,r=(e.y1+e.y2)/2,t=e.w/e.h,i=1/t,o=Mqe(a.x,a.y,n,r,u),l=Cqe(o.x,o.y,n,r,t,i);return{x:l.x,y:l.y}}var tge=!0,qqe=console.warn!=null,Bqe=console.trace!=null,UH=Number.MAX_SAFE_INTEGER||9007199254740991,Gwe=function(){return!0},DF=function(){return!1},rge=function(){return 0},QH=function(){},_n=function(e){throw new Error(e)},$we=function(e){if(e!==void 0)tge=!!e;else return tge},Lr=function(e){$we()&&(qqe?console.warn(e):(console.log(e),Bqe&&console.trace()))},Uqe=function(e){return qt({},e)},Uo=function(e){return e==null?e:Wr(e)?e.slice():_r(e)?Uqe(e):e},Qqe=function(e){return e.slice()},Xwe=function(e,u){for(u=e="";e++<36;u+=e*51&52?(e^15?8^Math.random()*(e^20?16:4):4).toString(16):"-");return u},Vqe={},Kwe=function(){return Vqe},Ra=function(e){var u=Object.keys(e);return function(n){for(var r={},t=0;t<u.length;t++){var i=u[t],o=n?.[i];r[i]=o===void 0?e[i]:o}return r}},fl=function(e,u,n){for(var r=e.length-1;r>=0;r--)e[r]===u&&e.splice(r,1)},VH=function(e){e.splice(0,e.length)},Hqe=function(e,u){for(var n=0;n<u.length;n++){var r=u[n];e.push(r)}},pi=function(e,u,n){return n&&(u=Cwe(n,u)),e[u]},$s=function(e,u,n,r){n&&(u=Cwe(n,u)),e[u]=r},kqe=(function(){function a(){Al(this,a),this._obj={}}return Ol(a,[{key:"set",value:function(u,n){return this._obj[u]=n,this}},{key:"delete",value:function(u){return this._obj[u]=void 0,this}},{key:"clear",value:function(){this._obj={}}},{key:"has",value:function(u){return this._obj[u]!==void 0}},{key:"get",value:function(u){return this._obj[u]}}])})(),Xs=typeof Map<"u"?Map:kqe,zqe="undefined",Gqe=(function(){function a(e){if(Al(this,a),this._obj=Object.create(null),this.size=0,e!=null){var u;e.instanceString!=null&&e.instanceString()===this.instanceString()?u=e.toArray():u=e;for(var n=0;n<u.length;n++)this.add(u[n])}}return Ol(a,[{key:"instanceString",value:function(){return"set"}},{key:"add",value:function(u){var n=this._obj;n[u]!==1&&(n[u]=1,this.size++)}},{key:"delete",value:function(u){var n=this._obj;n[u]===1&&(n[u]=0,this.size--)}},{key:"clear",value:function(){this._obj=Object.create(null)}},{key:"has",value:function(u){return this._obj[u]===1}},{key:"toArray",value:function(){var u=this;return Object.keys(this._obj).filter(function(n){return u.has(n)})}},{key:"forEach",value:function(u,n){return this.toArray().forEach(u,n)}}])})(),x1=(typeof Set>"u"?"undefined":ta(Set))!==zqe?Set:Gqe,LP=function(e,u){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(e===void 0||u===void 0||!LH(e)){_n("An element must have a core reference and parameters set");return}var r=u.group;if(r==null&&(u.data&&u.data.source!=null&&u.data.target!=null?r="edges":r="nodes"),r!=="nodes"&&r!=="edges"){_n("An element must be of type `nodes` or `edges`; you specified `"+r+"`");return}this.length=1,this[0]=this;var t=this._private={cy:e,single:!0,data:u.data||{},position:u.position||{x:0,y:0},autoWidth:void 0,autoHeight:void 0,autoPadding:void 0,compoundBoundsClean:!1,listeners:[],group:r,style:{},rstyle:{},styleCxts:[],styleKeys:{},removed:!0,selected:!!u.selected,selectable:u.selectable===void 0?!0:!!u.selectable,locked:!!u.locked,grabbed:!1,grabbable:u.grabbable===void 0?!0:!!u.grabbable,pannable:u.pannable===void 0?r==="edges":!!u.pannable,active:!1,classes:new x1,animation:{current:[],queue:[]},rscratch:{},scratch:u.scratch||{},edges:[],children:[],parent:u.parent&&u.parent.isNode()?u.parent:null,traversalCache:{},backgrounding:!1,bbCache:null,bbCacheShift:{x:0,y:0},bodyBounds:null,overlayBounds:null,labelBounds:{all:null,source:null,target:null,main:null},arrowBounds:{source:null,target:null,"mid-source":null,"mid-target":null}};if(t.position.x==null&&(t.position.x=0),t.position.y==null&&(t.position.y=0),u.renderedPosition){var i=u.renderedPosition,o=e.pan(),l=e.zoom();t.position={x:(i.x-o.x)/l,y:(i.y-o.y)/l}}var s=[];Wr(u.classes)?s=u.classes:Mt(u.classes)&&(s=u.classes.split(/\s+/));for(var c=0,d=s.length;c<d;c++){var f=s[c];!f||f===""||t.classes.add(f)}this.createEmitter(),(n===void 0||n)&&this.restore();var p=u.style||u.css;p&&(Lr("Setting a `style` bypass at element creation should be done only when absolutely necessary.  Try to use the stylesheet instead."),this.style(p))},nge=function(e){return e={bfs:e.bfs||!e.dfs,dfs:e.dfs||!e.bfs},function(n,r,t){var i;_r(n)&&!Bi(n)&&(i=n,n=i.roots||i.root,r=i.visit,t=i.directed),t=arguments.length===2&&!On(r)?r:t,r=On(r)?r:function(){};for(var o=this._private.cy,l=n=Mt(n)?this.filter(n):n,s=[],c=[],d={},f={},p={},h=0,g,v=this.byGroup(),m=v.nodes,T=v.edges,w=0;w<l.length;w++){var E=l[w],S=E.id();E.isNode()&&(s.unshift(E),e.bfs&&(p[S]=!0,c.push(E)),f[S]=0)}for(var N=function(){var C=e.bfs?s.shift():s.pop(),B=C.id();if(e.dfs){if(p[B])return 0;p[B]=!0,c.push(C)}var H=f[B],V=d[B],G=V!=null?V.source():null,Z=V!=null?V.target():null,ae=V==null?void 0:C.same(G)?Z[0]:G[0],W;if(W=r(C,V,ae,h++,H),W===!0)return g=C,1;if(W===!1)return 1;for(var te=C.connectedEdges().filter(function(Oe){return(!t||Oe.source().same(C))&&T.has(Oe)}),se=0;se<te.length;se++){var pe=te[se],le=pe.connectedNodes().filter(function(Oe){return!Oe.same(C)&&m.has(Oe)}),Ee=le.id();le.length!==0&&!p[Ee]&&(le=le[0],s.push(le),e.bfs&&(p[Ee]=!0,c.push(le)),d[Ee]=pe,f[Ee]=f[B]+1)}},j;s.length!==0&&(j=N(),!(j!==0&&j===1)););for(var q=o.collection(),O=0;O<c.length;O++){var I=c[O],A=d[I.id()];A!=null&&q.push(A),q.push(I)}return{path:o.collection(q),found:o.collection(g)}}},v4={breadthFirstSearch:nge({bfs:!0}),depthFirstSearch:nge({dfs:!0})};v4.bfs=v4.breadthFirstSearch;v4.dfs=v4.depthFirstSearch;var oF={exports:{}},$qe=oF.exports,age;function Xqe(){return age||(age=1,(function(a,e){(function(){var u,n,r,t,i,o,l,s,c,d,f,p,h,g,v;r=Math.floor,d=Math.min,n=function(m,T){return m<T?-1:m>T?1:0},c=function(m,T,w,E,S){var N;if(w==null&&(w=0),S==null&&(S=n),w<0)throw new Error("lo must be non-negative");for(E==null&&(E=m.length);w<E;)N=r((w+E)/2),S(T,m[N])<0?E=N:w=N+1;return[].splice.apply(m,[w,w-w].concat(T)),T},o=function(m,T,w){return w==null&&(w=n),m.push(T),g(m,0,m.length-1,w)},i=function(m,T){var w,E;return T==null&&(T=n),w=m.pop(),m.length?(E=m[0],m[0]=w,v(m,0,T)):E=w,E},s=function(m,T,w){var E;return w==null&&(w=n),E=m[0],m[0]=T,v(m,0,w),E},l=function(m,T,w){var E;return w==null&&(w=n),m.length&&w(m[0],T)<0&&(E=[m[0],T],T=E[0],m[0]=E[1],v(m,0,w)),T},t=function(m,T){var w,E,S,N,j,q;for(T==null&&(T=n),N=(function(){q=[];for(var O=0,I=r(m.length/2);0<=I?O<I:O>I;0<=I?O++:O--)q.push(O);return q}).apply(this).reverse(),j=[],E=0,S=N.length;E<S;E++)w=N[E],j.push(v(m,w,T));return j},h=function(m,T,w){var E;if(w==null&&(w=n),E=m.indexOf(T),E!==-1)return g(m,0,E,w),v(m,E,w)},f=function(m,T,w){var E,S,N,j,q;if(w==null&&(w=n),S=m.slice(0,T),!S.length)return S;for(t(S,w),q=m.slice(T),N=0,j=q.length;N<j;N++)E=q[N],l(S,E,w);return S.sort(w).reverse()},p=function(m,T,w){var E,S,N,j,q,O,I,A,P;if(w==null&&(w=n),T*10<=m.length){if(N=m.slice(0,T).sort(w),!N.length)return N;for(S=N[N.length-1],I=m.slice(T),j=0,O=I.length;j<O;j++)E=I[j],w(E,S)<0&&(c(N,E,0,null,w),N.pop(),S=N[N.length-1]);return N}for(t(m,w),P=[],q=0,A=d(T,m.length);0<=A?q<A:q>A;0<=A?++q:--q)P.push(i(m,w));return P},g=function(m,T,w,E){var S,N,j;for(E==null&&(E=n),S=m[w];w>T;){if(j=w-1>>1,N=m[j],E(S,N)<0){m[w]=N,w=j;continue}break}return m[w]=S},v=function(m,T,w){var E,S,N,j,q;for(w==null&&(w=n),S=m.length,q=T,N=m[T],E=2*T+1;E<S;)j=E+1,j<S&&!(w(m[E],m[j])<0)&&(E=j),m[T]=m[E],T=E,E=2*T+1;return m[T]=N,g(m,q,T,w)},u=(function(){m.push=o,m.pop=i,m.replace=s,m.pushpop=l,m.heapify=t,m.updateItem=h,m.nlargest=f,m.nsmallest=p;function m(T){this.cmp=T??n,this.nodes=[]}return m.prototype.push=function(T){return o(this.nodes,T,this.cmp)},m.prototype.pop=function(){return i(this.nodes,this.cmp)},m.prototype.peek=function(){return this.nodes[0]},m.prototype.contains=function(T){return this.nodes.indexOf(T)!==-1},m.prototype.replace=function(T){return s(this.nodes,T,this.cmp)},m.prototype.pushpop=function(T){return l(this.nodes,T,this.cmp)},m.prototype.heapify=function(){return t(this.nodes,this.cmp)},m.prototype.updateItem=function(T){return h(this.nodes,T,this.cmp)},m.prototype.clear=function(){return this.nodes=[]},m.prototype.empty=function(){return this.nodes.length===0},m.prototype.size=function(){return this.nodes.length},m.prototype.clone=function(){var T;return T=new m,T.nodes=this.nodes.slice(0),T},m.prototype.toArray=function(){return this.nodes.slice(0)},m.prototype.insert=m.prototype.push,m.prototype.top=m.prototype.peek,m.prototype.front=m.prototype.peek,m.prototype.has=m.prototype.contains,m.prototype.copy=m.prototype.clone,m})(),(function(m,T){return a.exports=T()})(this,function(){return u})}).call($qe)})(oF)),oF.exports}var N9,ige;function Kqe(){return ige||(ige=1,N9=Xqe()),N9}var Jqe=Kqe(),pN=cN(Jqe),Wqe=Ra({root:null,weight:function(e){return 1},directed:!1}),Yqe={dijkstra:function(e){if(!_r(e)){var u=arguments;e={root:u[0],weight:u[1],directed:u[2]}}var n=Wqe(e),r=n.root,t=n.weight,i=n.directed,o=this,l=t,s=Mt(r)?this.filter(r)[0]:r[0],c={},d={},f={},p=this.byGroup(),h=p.nodes,g=p.edges;g.unmergeBy(function(H){return H.isLoop()});for(var v=function(V){return c[V.id()]},m=function(V,G){c[V.id()]=G,T.updateItem(V)},T=new pN(function(H,V){return v(H)-v(V)}),w=0;w<h.length;w++){var E=h[w];c[E.id()]=E.same(s)?0:1/0,T.push(E)}for(var S=function(V,G){for(var Z=(i?V.edgesTo(G):V.edgesWith(G)).intersect(g),ae=1/0,W,te=0;te<Z.length;te++){var se=Z[te],pe=l(se);(pe<ae||!W)&&(ae=pe,W=se)}return{edge:W,dist:ae}};T.size()>0;){var N=T.pop(),j=v(N),q=N.id();if(f[q]=j,j!==1/0)for(var O=N.neighborhood().intersect(h),I=0;I<O.length;I++){var A=O[I],P=A.id(),C=S(N,A),B=j+C.dist;B<v(A)&&(m(A,B),d[P]={node:N,edge:C.edge})}}return{distanceTo:function(V){var G=Mt(V)?h.filter(V)[0]:V[0];return f[G.id()]},pathTo:function(V){var G=Mt(V)?h.filter(V)[0]:V[0],Z=[],ae=G,W=ae.id();if(G.length>0)for(Z.unshift(G);d[W];){var te=d[W];Z.unshift(te.edge),Z.unshift(te.node),ae=te.node,W=ae.id()}return o.spawn(Z)}}}},Zqe={kruskal:function(e){e=e||function(w){return 1};for(var u=this.byGroup(),n=u.nodes,r=u.edges,t=n.length,i=new Array(t),o=n,l=function(E){for(var S=0;S<i.length;S++){var N=i[S];if(N.has(E))return S}},s=0;s<t;s++)i[s]=this.spawn(n[s]);for(var c=r.sort(function(w,E){return e(w)-e(E)}),d=0;d<c.length;d++){var f=c[d],p=f.source()[0],h=f.target()[0],g=l(p),v=l(h),m=i[g],T=i[v];g!==v&&(o.merge(f),m.merge(T),i.splice(v,1))}return o}},eBe=Ra({root:null,goal:null,weight:function(e){return 1},heuristic:function(e){return 0},directed:!1}),tBe={aStar:function(e){var u=this.cy(),n=eBe(e),r=n.root,t=n.goal,i=n.heuristic,o=n.directed,l=n.weight;r=u.collection(r)[0],t=u.collection(t)[0];var s=r.id(),c=t.id(),d={},f={},p={},h=new pN(function(W,te){return f[W.id()]-f[te.id()]}),g=new x1,v={},m={},T=function(te,se){h.push(te),g.add(se)},w,E,S=function(){w=h.pop(),E=w.id(),g.delete(E)},N=function(te){return g.has(te)};T(r,s),d[s]=0,f[s]=i(r);for(var j=0;h.size()>0;){if(S(),j++,E===c){for(var q=[],O=t,I=c,A=m[I];q.unshift(O),A!=null&&q.unshift(A),O=v[I],O!=null;)I=O.id(),A=m[I];return{found:!0,distance:d[E],path:this.spawn(q),steps:j}}p[E]=!0;for(var P=w._private.edges,C=0;C<P.length;C++){var B=P[C];if(this.hasElementWithId(B.id())&&!(o&&B.data("source")!==E)){var H=B.source(),V=B.target(),G=H.id()!==E?H:V,Z=G.id();if(this.hasElementWithId(Z)&&!p[Z]){var ae=d[E]+l(B);if(!N(Z)){d[Z]=ae,f[Z]=ae+i(G),T(G,Z),v[Z]=w,m[Z]=B;continue}ae<d[Z]&&(d[Z]=ae,f[Z]=ae+i(G),v[Z]=w,m[Z]=B)}}}}return{found:!1,distance:void 0,path:void 0,steps:j}}},rBe=Ra({weight:function(e){return 1},directed:!1}),nBe={floydWarshall:function(e){for(var u=this.cy(),n=rBe(e),r=n.weight,t=n.directed,i=r,o=this.byGroup(),l=o.nodes,s=o.edges,c=l.length,d=c*c,f=function(pe){return l.indexOf(pe)},p=function(pe){return l[pe]},h=new Array(d),g=0;g<d;g++){var v=g%c,m=(g-v)/c;m===v?h[g]=0:h[g]=1/0}for(var T=new Array(d),w=new Array(d),E=0;E<s.length;E++){var S=s[E],N=S.source()[0],j=S.target()[0];if(N!==j){var q=f(N),O=f(j),I=q*c+O,A=i(S);if(h[I]>A&&(h[I]=A,T[I]=O,w[I]=S),!t){var P=O*c+q;!t&&h[P]>A&&(h[P]=A,T[P]=q,w[P]=S)}}}for(var C=0;C<c;C++)for(var B=0;B<c;B++)for(var H=B*c+C,V=0;V<c;V++){var G=B*c+V,Z=C*c+V;h[H]+h[Z]<h[G]&&(h[G]=h[H]+h[Z],T[G]=T[H])}var ae=function(pe){return(Mt(pe)?u.filter(pe):pe)[0]},W=function(pe){return f(ae(pe))},te={distance:function(pe,le){var Ee=W(pe),Oe=W(le);return h[Ee*c+Oe]},path:function(pe,le){var Ee=W(pe),Oe=W(le),Ie=p(Ee);if(Ee===Oe)return Ie.collection();if(T[Ee*c+Oe]==null)return u.collection();var Ae=u.collection(),be=Ee,ee;for(Ae.merge(Ie);Ee!==Oe;)be=Ee,Ee=T[Ee*c+Oe],ee=w[be*c+Ee],Ae.merge(ee),Ae.merge(p(Ee));return Ae}};return te}},aBe=Ra({weight:function(e){return 1},directed:!1,root:null}),iBe={bellmanFord:function(e){var u=this,n=aBe(e),r=n.weight,t=n.directed,i=n.root,o=r,l=this,s=this.cy(),c=this.byGroup(),d=c.edges,f=c.nodes,p=f.length,h=new Xs,g=!1,v=[];i=s.collection(i)[0],d.unmergeBy(function($){return $.isLoop()});for(var m=d.length,T=function(ue){var ne=h.get(ue.id());return ne||(ne={},h.set(ue.id(),ne)),ne},w=function(ue){return(Mt(ue)?s.$(ue):ue)[0]},E=function(ue){return T(w(ue)).dist},S=function(ue){for(var ne=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i,ce=w(ue),Se=[],xe=ce;;){if(xe==null)return u.spawn();var Ce=T(xe),Ve=Ce.edge,Ke=Ce.pred;if(Se.unshift(xe[0]),xe.same(ne)&&Se.length>0)break;Ve!=null&&Se.unshift(Ve),xe=Ke}return l.spawn(Se)},N=0;N<p;N++){var j=f[N],q=T(j);j.same(i)?q.dist=0:q.dist=1/0,q.pred=null,q.edge=null}for(var O=!1,I=function(ue,ne,ce,Se,xe,Ce){var Ve=Se.dist+Ce;Ve<xe.dist&&!ce.same(Se.edge)&&(xe.dist=Ve,xe.pred=ue,xe.edge=ce,O=!0)},A=1;A<p;A++){O=!1;for(var P=0;P<m;P++){var C=d[P],B=C.source(),H=C.target(),V=o(C),G=T(B),Z=T(H);I(B,H,C,G,Z,V),t||I(H,B,C,Z,G,V)}if(!O)break}if(O)for(var ae=[],W=0;W<m;W++){var te=d[W],se=te.source(),pe=te.target(),le=o(te),Ee=T(se).dist,Oe=T(pe).dist;if(Ee+le<Oe||!t&&Oe+le<Ee)if(g||(Lr("Graph contains a negative weight cycle for Bellman-Ford"),g=!0),e.findNegativeWeightCycles!==!1){var Ie=[];Ee+le<Oe&&Ie.push(se),!t&&Oe+le<Ee&&Ie.push(pe);for(var Ae=Ie.length,be=0;be<Ae;be++){var ee=Ie[be],_=[ee];_.push(T(ee).edge);for(var F=T(ee).pred;_.indexOf(F)===-1;)_.push(F),_.push(T(F).edge),F=T(F).pred;_=_.slice(_.indexOf(F));for(var D=_[0].id(),L=0,Q=2;Q<_.length;Q+=2)_[Q].id()<D&&(D=_[Q].id(),L=Q);_=_.slice(L).concat(_.slice(0,L)),_.push(_[0]);var Y=_.map(function($){return $.id()}).join(",");ae.indexOf(Y)===-1&&(v.push(l.spawn(_)),ae.push(Y))}}else break}return{distanceTo:E,pathTo:S,hasNegativeWeightCycle:g,negativeWeightCycles:v}}},uBe=Math.sqrt(2),oBe=function(e,u,n){n.length===0&&_n("Karger-Stein must be run on a connected (sub)graph");for(var r=n[e],t=r[1],i=r[2],o=u[t],l=u[i],s=n,c=s.length-1;c>=0;c--){var d=s[c],f=d[1],p=d[2];(u[f]===o&&u[p]===l||u[f]===l&&u[p]===o)&&s.splice(c,1)}for(var h=0;h<s.length;h++){var g=s[h];g[1]===l?(s[h]=g.slice(),s[h][1]=o):g[2]===l&&(s[h]=g.slice(),s[h][2]=o)}for(var v=0;v<u.length;v++)u[v]===l&&(u[v]=o);return s},I9=function(e,u,n,r){for(;n>r;){var t=Math.floor(Math.random()*u.length);u=oBe(t,e,u),n--}return u},sBe={kargerStein:function(){var e=this,u=this.byGroup(),n=u.nodes,r=u.edges;r.unmergeBy(function(Z){return Z.isLoop()});var t=n.length,i=r.length,o=Math.ceil(Math.pow(Math.log(t)/Math.LN2,2)),l=Math.floor(t/uBe);if(t<2){_n("At least 2 nodes are required for Karger-Stein algorithm");return}for(var s=[],c=0;c<i;c++){var d=r[c];s.push([c,n.indexOf(d.source()),n.indexOf(d.target())])}for(var f=1/0,p=[],h=new Array(t),g=new Array(t),v=new Array(t),m=function(ae,W){for(var te=0;te<t;te++)W[te]=ae[te]},T=0;T<=o;T++){for(var w=0;w<t;w++)g[w]=w;var E=I9(g,s.slice(),t,l),S=E.slice();m(g,v);var N=I9(g,E,l,2),j=I9(v,S,l,2);N.length<=j.length&&N.length<f?(f=N.length,p=N,m(g,h)):j.length<=N.length&&j.length<f&&(f=j.length,p=j,m(v,h))}for(var q=this.spawn(p.map(function(Z){return r[Z[0]]})),O=this.spawn(),I=this.spawn(),A=h[0],P=0;P<h.length;P++){var C=h[P],B=n[P];C===A?O.merge(B):I.merge(B)}var H=function(ae){var W=e.spawn();return ae.forEach(function(te){W.merge(te),te.connectedEdges().forEach(function(se){e.contains(se)&&!q.contains(se)&&W.merge(se)})}),W},V=[H(O),H(I)],G={cut:q,components:V,partition1:O,partition2:I};return G}},D9,cBe=function(e){return{x:e.x,y:e.y}},qP=function(e,u,n){return{x:e.x*u+n.x,y:e.y*u+n.y}},Jwe=function(e,u,n){return{x:(e.x-n.x)/u,y:(e.y-n.y)/u}},qg=function(e){return{x:e[0],y:e[1]}},lBe=function(e){for(var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=1/0,t=u;t<n;t++){var i=e[t];isFinite(i)&&(r=Math.min(i,r))}return r},dBe=function(e){for(var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=-1/0,t=u;t<n;t++){var i=e[t];isFinite(i)&&(r=Math.max(i,r))}return r},fBe=function(e){for(var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=0,t=0,i=u;i<n;i++){var o=e[i];isFinite(o)&&(r+=o,t++)}return r/t},pBe=function(e){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:e.length,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,t=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0;r?e=e.slice(u,n):(n<e.length&&e.splice(n,e.length-n),u>0&&e.splice(0,u));for(var o=0,l=e.length-1;l>=0;l--){var s=e[l];i?isFinite(s)||(e[l]=-1/0,o++):e.splice(l,1)}t&&e.sort(function(f,p){return f-p});var c=e.length,d=Math.floor(c/2);return c%2!==0?e[d+1+o]:(e[d-1+o]+e[d+o])/2},hBe=function(e){return Math.PI*e/180},PD=function(e,u){return Math.atan2(u,e)-Math.PI/2},HH=Math.log2||function(a){return Math.log(a)/Math.log(2)},kH=function(e){return e>0?1:e<0?-1:0},lb=function(e,u){return Math.sqrt(Wm(e,u))},Wm=function(e,u){var n=u.x-e.x,r=u.y-e.y;return n*n+r*r},yBe=function(e){for(var u=e.length,n=0,r=0;r<u;r++)n+=e[r];for(var t=0;t<u;t++)e[t]=e[t]/n;return e},ua=function(e,u,n,r){return(1-r)*(1-r)*e+2*(1-r)*r*u+r*r*n},Vg=function(e,u,n,r){return{x:ua(e.x,u.x,n.x,r),y:ua(e.y,u.y,n.y,r)}},mBe=function(e,u,n,r){var t={x:u.x-e.x,y:u.y-e.y},i=lb(e,u),o={x:t.x/i,y:t.y/i};return n=n??0,r=r??n*i,{x:e.x+o.x*r,y:e.y+o.y*r}},_4=function(e,u,n){return Math.max(e,Math.min(n,u))},ei=function(e){if(e==null)return{x1:1/0,y1:1/0,x2:-1/0,y2:-1/0,w:0,h:0};if(e.x1!=null&&e.y1!=null){if(e.x2!=null&&e.y2!=null&&e.x2>=e.x1&&e.y2>=e.y1)return{x1:e.x1,y1:e.y1,x2:e.x2,y2:e.y2,w:e.x2-e.x1,h:e.y2-e.y1};if(e.w!=null&&e.h!=null&&e.w>=0&&e.h>=0)return{x1:e.x1,y1:e.y1,x2:e.x1+e.w,y2:e.y1+e.h,w:e.w,h:e.h}}},bBe=function(e){return{x1:e.x1,x2:e.x2,w:e.w,y1:e.y1,y2:e.y2,h:e.h}},gBe=function(e){e.x1=1/0,e.y1=1/0,e.x2=-1/0,e.y2=-1/0,e.w=0,e.h=0},vBe=function(e,u){e.x1=Math.min(e.x1,u.x1),e.x2=Math.max(e.x2,u.x2),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,u.y1),e.y2=Math.max(e.y2,u.y2),e.h=e.y2-e.y1},Wwe=function(e,u,n){e.x1=Math.min(e.x1,u),e.x2=Math.max(e.x2,u),e.w=e.x2-e.x1,e.y1=Math.min(e.y1,n),e.y2=Math.max(e.y2,n),e.h=e.y2-e.y1},sF=function(e){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return e.x1-=u,e.x2+=u,e.y1-=u,e.y2+=u,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},cF=function(e){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[0],n,r,t,i;if(u.length===1)n=r=t=i=u[0];else if(u.length===2)n=t=u[0],i=r=u[1];else if(u.length===4){var o=zn(u,4);n=o[0],r=o[1],t=o[2],i=o[3]}return e.x1-=i,e.x2+=r,e.y1-=n,e.y2+=t,e.w=e.x2-e.x1,e.h=e.y2-e.y1,e},uge=function(e,u){e.x1=u.x1,e.y1=u.y1,e.x2=u.x2,e.y2=u.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1},zH=function(e,u){return!(e.x1>u.x2||u.x1>e.x2||e.x2<u.x1||u.x2<e.x1||e.y2<u.y1||u.y2<e.y1||e.y1>u.y2||u.y1>e.y2)},nl=function(e,u,n){return e.x1<=u&&u<=e.x2&&e.y1<=n&&n<=e.y2},oge=function(e,u){return nl(e,u.x,u.y)},Ywe=function(e,u){return nl(e,u.x1,u.y1)&&nl(e,u.x2,u.y2)},_Be=(D9=Math.hypot)!==null&&D9!==void 0?D9:function(a,e){return Math.sqrt(a*a+e*e)};function TBe(a,e){if(a.length<3)throw new Error("Need at least 3 vertices");var u=function(q,O){return{x:q.x+O.x,y:q.y+O.y}},n=function(q,O){return{x:q.x-O.x,y:q.y-O.y}},r=function(q,O){return{x:q.x*O,y:q.y*O}},t=function(q,O){return q.x*O.y-q.y*O.x},i=function(q){var O=_Be(q.x,q.y);return O===0?{x:0,y:0}:{x:q.x/O,y:q.y/O}},o=function(q){for(var O=0,I=0;I<q.length;I++){var A=q[I],P=q[(I+1)%q.length];O+=A.x*P.y-P.x*A.y}return O/2},l=function(q,O,I,A){var P=n(O,q),C=n(A,I),B=t(P,C);if(Math.abs(B)<1e-9)return u(q,r(P,.5));var H=t(n(I,q),C)/B;return u(q,r(P,H))},s=a.map(function(j){return{x:j.x,y:j.y}});o(s)<0&&s.reverse();for(var c=s.length,d=[],f=0;f<c;f++){var p=s[f],h=s[(f+1)%c],g=n(h,p),v=i({x:g.y,y:-g.x});d.push(v)}for(var m=d.map(function(j,q){var O=u(s[q],r(j,e)),I=u(s[(q+1)%c],r(j,e));return{p1:O,p2:I}}),T=[],w=0;w<c;w++){var E=m[(w-1+c)%c],S=m[w],N=l(E.p1,E.p2,S.p1,S.p2);T.push(N)}return T}function wBe(a,e,u,n,r,t){var i=DBe(a,e,u,n,r),o=TBe(i,t),l=ei();return o.forEach(function(s){return Wwe(l,s.x,s.y)}),l}var Zwe=function(e,u,n,r,t,i,o){var l=arguments.length>7&&arguments[7]!==void 0?arguments[7]:"auto",s=l==="auto"?pl(t,i):l,c=t/2,d=i/2;s=Math.min(s,c,d);var f=s!==c,p=s!==d,h;if(f){var g=n-c+s-o,v=r-d-o,m=n+c-s+o,T=v;if(h=al(e,u,n,r,g,v,m,T,!1),h.length>0)return h}if(p){var w=n+c+o,E=r-d+s-o,S=w,N=r+d-s+o;if(h=al(e,u,n,r,w,E,S,N,!1),h.length>0)return h}if(f){var j=n-c+s-o,q=r+d+o,O=n+c-s+o,I=q;if(h=al(e,u,n,r,j,q,O,I,!1),h.length>0)return h}if(p){var A=n-c-o,P=r-d+s-o,C=A,B=r+d-s+o;if(h=al(e,u,n,r,A,P,C,B,!1),h.length>0)return h}var H;{var V=n-c+s,G=r-d+s;if(H=W6(e,u,n,r,V,G,s+o),H.length>0&&H[0]<=V&&H[1]<=G)return[H[0],H[1]]}{var Z=n+c-s,ae=r-d+s;if(H=W6(e,u,n,r,Z,ae,s+o),H.length>0&&H[0]>=Z&&H[1]<=ae)return[H[0],H[1]]}{var W=n+c-s,te=r+d-s;if(H=W6(e,u,n,r,W,te,s+o),H.length>0&&H[0]>=W&&H[1]>=te)return[H[0],H[1]]}{var se=n-c+s,pe=r+d-s;if(H=W6(e,u,n,r,se,pe,s+o),H.length>0&&H[0]<=se&&H[1]>=pe)return[H[0],H[1]]}return[]},SBe=function(e,u,n,r,t,i,o){var l=o,s=Math.min(n,t),c=Math.max(n,t),d=Math.min(r,i),f=Math.max(r,i);return s-l<=e&&e<=c+l&&d-l<=u&&u<=f+l},EBe=function(e,u,n,r,t,i,o,l,s){var c={x1:Math.min(n,o,t)-s,x2:Math.max(n,o,t)+s,y1:Math.min(r,l,i)-s,y2:Math.max(r,l,i)+s};return!(e<c.x1||e>c.x2||u<c.y1||u>c.y2)},ABe=function(e,u,n,r){n-=r;var t=u*u-4*e*n;if(t<0)return[];var i=Math.sqrt(t),o=2*e,l=(-u+i)/o,s=(-u-i)/o;return[l,s]},OBe=function(e,u,n,r,t){var i=1e-5;e===0&&(e=i),u/=e,n/=e,r/=e;var o,l,s,c,d,f,p,h;if(l=(3*n-u*u)/9,s=-(27*r)+u*(9*n-2*(u*u)),s/=54,o=l*l*l+s*s,t[1]=0,p=u/3,o>0){d=s+Math.sqrt(o),d=d<0?-Math.pow(-d,1/3):Math.pow(d,1/3),f=s-Math.sqrt(o),f=f<0?-Math.pow(-f,1/3):Math.pow(f,1/3),t[0]=-p+d+f,p+=(d+f)/2,t[4]=t[2]=-p,p=Math.sqrt(3)*(-f+d)/2,t[3]=p,t[5]=-p;return}if(t[5]=t[3]=0,o===0){h=s<0?-Math.pow(-s,1/3):Math.pow(s,1/3),t[0]=-p+2*h,t[4]=t[2]=-(h+p);return}l=-l,c=l*l*l,c=Math.acos(s/Math.sqrt(c)),h=2*Math.sqrt(l),t[0]=-p+h*Math.cos(c/3),t[2]=-p+h*Math.cos((c+2*Math.PI)/3),t[4]=-p+h*Math.cos((c+4*Math.PI)/3)},xBe=function(e,u,n,r,t,i,o,l){var s=1*n*n-4*n*t+2*n*o+4*t*t-4*t*o+o*o+r*r-4*r*i+2*r*l+4*i*i-4*i*l+l*l,c=9*n*t-3*n*n-3*n*o-6*t*t+3*t*o+9*r*i-3*r*r-3*r*l-6*i*i+3*i*l,d=3*n*n-6*n*t+n*o-n*e+2*t*t+2*t*e-o*e+3*r*r-6*r*i+r*l-r*u+2*i*i+2*i*u-l*u,f=1*n*t-n*n+n*e-t*e+r*i-r*r+r*u-i*u,p=[];OBe(s,c,d,f,p);for(var h=1e-7,g=[],v=0;v<6;v+=2)Math.abs(p[v+1])<h&&p[v]>=0&&p[v]<=1&&g.push(p[v]);g.push(1),g.push(0);for(var m=-1,T,w,E,S=0;S<g.length;S++)T=Math.pow(1-g[S],2)*n+2*(1-g[S])*g[S]*t+g[S]*g[S]*o,w=Math.pow(1-g[S],2)*r+2*(1-g[S])*g[S]*i+g[S]*g[S]*l,E=Math.pow(T-e,2)+Math.pow(w-u,2),m>=0?E<m&&(m=E):m=E;return m},RBe=function(e,u,n,r,t,i){var o=[e-n,u-r],l=[t-n,i-r],s=l[0]*l[0]+l[1]*l[1],c=o[0]*o[0]+o[1]*o[1],d=o[0]*l[0]+o[1]*l[1],f=d*d/s;return d<0?c:f>s?(e-t)*(e-t)+(u-i)*(u-i):c-f},hi=function(e,u,n){for(var r,t,i,o,l,s=0,c=0;c<n.length/2;c++)if(r=n[c*2],t=n[c*2+1],c+1<n.length/2?(i=n[(c+1)*2],o=n[(c+1)*2+1]):(i=n[(c+1-n.length/2)*2],o=n[(c+1-n.length/2)*2+1]),!(r==e&&i==e))if(r>=e&&e>=i||r<=e&&e<=i)l=(e-r)/(i-r)*(o-t)+t,l>u&&s++;else continue;return s%2!==0},rc=function(e,u,n,r,t,i,o,l,s){var c=new Array(n.length),d;l[0]!=null?(d=Math.atan(l[1]/l[0]),l[0]<0?d=d+Math.PI/2:d=-d-Math.PI/2):d=l;for(var f=Math.cos(-d),p=Math.sin(-d),h=0;h<c.length/2;h++)c[h*2]=i/2*(n[h*2]*f-n[h*2+1]*p),c[h*2+1]=o/2*(n[h*2+1]*f+n[h*2]*p),c[h*2]+=r,c[h*2+1]+=t;var g;if(s>0){var v=PF(c,-s);g=FF(v)}else g=c;return hi(e,u,g)},NBe=function(e,u,n,r,t,i,o,l){for(var s=new Array(n.length*2),c=0;c<l.length;c++){var d=l[c];s[c*4+0]=d.startX,s[c*4+1]=d.startY,s[c*4+2]=d.stopX,s[c*4+3]=d.stopY;var f=Math.pow(d.cx-e,2)+Math.pow(d.cy-u,2);if(f<=Math.pow(d.radius,2))return!0}return hi(e,u,s)},FF=function(e){for(var u=new Array(e.length/2),n,r,t,i,o,l,s,c,d=0;d<e.length/4;d++){n=e[d*4],r=e[d*4+1],t=e[d*4+2],i=e[d*4+3],d<e.length/4-1?(o=e[(d+1)*4],l=e[(d+1)*4+1],s=e[(d+1)*4+2],c=e[(d+1)*4+3]):(o=e[0],l=e[1],s=e[2],c=e[3]);var f=al(n,r,t,i,o,l,s,c,!0);u[d*2]=f[0],u[d*2+1]=f[1]}return u},PF=function(e,u){for(var n=new Array(e.length*2),r,t,i,o,l=0;l<e.length/2;l++){r=e[l*2],t=e[l*2+1],l<e.length/2-1?(i=e[(l+1)*2],o=e[(l+1)*2+1]):(i=e[0],o=e[1]);var s=o-t,c=-(i-r),d=Math.sqrt(s*s+c*c),f=s/d,p=c/d;n[l*4]=r+f*u,n[l*4+1]=t+p*u,n[l*4+2]=i+f*u,n[l*4+3]=o+p*u}return n},IBe=function(e,u,n,r,t,i){var o=n-e,l=r-u;o/=t,l/=i;var s=Math.sqrt(o*o+l*l),c=s-1;if(c<0)return[];var d=c/s;return[(n-e)*d+e,(r-u)*d+u]},ub=function(e,u,n,r,t,i,o){return e-=t,u-=i,e/=n/2+o,u/=r/2+o,e*e+u*u<=1},W6=function(e,u,n,r,t,i,o){var l=[n-e,r-u],s=[e-t,u-i],c=l[0]*l[0]+l[1]*l[1],d=2*(s[0]*l[0]+s[1]*l[1]),f=s[0]*s[0]+s[1]*s[1]-o*o,p=d*d-4*c*f;if(p<0)return[];var h=(-d+Math.sqrt(p))/(2*c),g=(-d-Math.sqrt(p))/(2*c),v=Math.min(h,g),m=Math.max(h,g),T=[];if(v>=0&&v<=1&&T.push(v),m>=0&&m<=1&&T.push(m),T.length===0)return[];var w=T[0]*l[0]+e,E=T[0]*l[1]+u;if(T.length>1){if(T[0]==T[1])return[w,E];var S=T[1]*l[0]+e,N=T[1]*l[1]+u;return[w,E,S,N]}else return[w,E]},F9=function(e,u,n){return u<=e&&e<=n||n<=e&&e<=u?e:e<=u&&u<=n||n<=u&&u<=e?u:n},al=function(e,u,n,r,t,i,o,l,s){var c=e-t,d=n-e,f=o-t,p=u-i,h=r-u,g=l-i,v=f*p-g*c,m=d*p-h*c,T=g*d-f*h;if(T!==0){var w=v/T,E=m/T,S=.001,N=0-S,j=1+S;return N<=w&&w<=j&&N<=E&&E<=j?[e+w*d,u+w*h]:s?[e+w*d,u+w*h]:[]}else return v===0||m===0?F9(e,n,o)===o?[o,l]:F9(e,n,t)===t?[t,i]:F9(t,o,n)===n?[n,r]:[]:[]},DBe=function(e,u,n,r,t){var i=[],o=r/2,l=t/2,s=u,c=n;i.push({x:s+o*e[0],y:c+l*e[1]});for(var d=1;d<e.length/2;d++)i.push({x:s+o*e[d*2],y:c+l*e[d*2+1]});return i},T4=function(e,u,n,r,t,i,o,l){var s=[],c,d=new Array(n.length),f=!0;i==null&&(f=!1);var p;if(f){for(var h=0;h<d.length/2;h++)d[h*2]=n[h*2]*i+r,d[h*2+1]=n[h*2+1]*o+t;if(l>0){var g=PF(d,-l);p=FF(g)}else p=d}else p=n;for(var v,m,T,w,E=0;E<p.length/2;E++)v=p[E*2],m=p[E*2+1],E<p.length/2-1?(T=p[(E+1)*2],w=p[(E+1)*2+1]):(T=p[0],w=p[1]),c=al(e,u,r,t,v,m,T,w),c.length!==0&&s.push(c[0],c[1]);return s},FBe=function(e,u,n,r,t,i,o,l,s){var c=[],d,f=new Array(n.length*2);s.forEach(function(T,w){w===0?(f[f.length-2]=T.startX,f[f.length-1]=T.startY):(f[w*4-2]=T.startX,f[w*4-1]=T.startY),f[w*4]=T.stopX,f[w*4+1]=T.stopY,d=W6(e,u,r,t,T.cx,T.cy,T.radius),d.length!==0&&c.push(d[0],d[1])});for(var p=0;p<f.length/4;p++)d=al(e,u,r,t,f[p*4],f[p*4+1],f[p*4+2],f[p*4+3],!1),d.length!==0&&c.push(d[0],d[1]);if(c.length>2){for(var h=[c[0],c[1]],g=Math.pow(h[0]-e,2)+Math.pow(h[1]-u,2),v=1;v<c.length/2;v++){var m=Math.pow(c[v*2]-e,2)+Math.pow(c[v*2+1]-u,2);m<=g&&(h[0]=c[v*2],h[1]=c[v*2+1],g=m)}return h}return c},jD=function(e,u,n){var r=[e[0]-u[0],e[1]-u[1]],t=Math.sqrt(r[0]*r[0]+r[1]*r[1]),i=(t-n)/t;return i<0&&(i=1e-5),[u[0]+i*r[0],u[1]+i*r[1]]},Wa=function(e,u){var n=g7(e,u);return n=eSe(n),n},eSe=function(e){for(var u,n,r=e.length/2,t=1/0,i=1/0,o=-1/0,l=-1/0,s=0;s<r;s++)u=e[2*s],n=e[2*s+1],t=Math.min(t,u),o=Math.max(o,u),i=Math.min(i,n),l=Math.max(l,n);for(var c=2/(o-t),d=2/(l-i),f=0;f<r;f++)u=e[2*f]=e[2*f]*c,n=e[2*f+1]=e[2*f+1]*d,t=Math.min(t,u),o=Math.max(o,u),i=Math.min(i,n),l=Math.max(l,n);if(i<-1)for(var p=0;p<r;p++)n=e[2*p+1]=e[2*p+1]+(-1-i);return e},g7=function(e,u){var n=1/e*2*Math.PI,r=e%2===0?Math.PI/2+n/2:Math.PI/2;r+=u;for(var t=new Array(e*2),i,o=0;o<e;o++)i=o*n+r,t[2*o]=Math.cos(i),t[2*o+1]=Math.sin(-i);return t},pl=function(e,u){return Math.min(e/4,u/4,8)},tSe=function(e,u){return Math.min(e/10,u/10,8)},GH=function(){return 8},PBe=function(e,u,n){return[e-2*u+n,2*(u-e),e]},v7=function(e,u){return{heightOffset:Math.min(15,.05*u),widthOffset:Math.min(100,.25*e),ctrlPtOffsetPct:.05}};function P9(a,e){function u(d){for(var f=[],p=0;p<d.length;p++){var h=d[p],g=d[(p+1)%d.length],v={x:g.x-h.x,y:g.y-h.y},m={x:-v.y,y:v.x},T=Math.sqrt(m.x*m.x+m.y*m.y);f.push({x:m.x/T,y:m.y/T})}return f}function n(d,f){var p=1/0,h=-1/0,g=yi(d),v;try{for(g.s();!(v=g.n()).done;){var m=v.value,T=m.x*f.x+m.y*f.y;p=Math.min(p,T),h=Math.max(h,T)}}catch(w){g.e(w)}finally{g.f()}return{min:p,max:h}}function r(d,f){return!(d.max<f.min||f.max<d.min)}var t=[].concat(RF(u(a)),RF(u(e))),i=yi(t),o;try{for(i.s();!(o=i.n()).done;){var l=o.value,s=n(a,l),c=n(e,l);if(!r(s,c))return!1}}catch(d){i.e(d)}finally{i.f()}return!0}var jBe=Ra({dampingFactor:.8,precision:1e-6,iterations:200,weight:function(e){return 1}}),MBe={pageRank:function(e){for(var u=jBe(e),n=u.dampingFactor,r=u.precision,t=u.iterations,i=u.weight,o=this._private.cy,l=this.byGroup(),s=l.nodes,c=l.edges,d=s.length,f=d*d,p=c.length,h=new Array(f),g=new Array(d),v=(1-n)/d,m=0;m<d;m++){for(var T=0;T<d;T++){var w=m*d+T;h[w]=0}g[m]=0}for(var E=0;E<p;E++){var S=c[E],N=S.data("source"),j=S.data("target");if(N!==j){var q=s.indexOfId(N),O=s.indexOfId(j),I=i(S),A=O*d+q;h[A]+=I,g[q]+=I}}for(var P=1/d+v,C=0;C<d;C++)if(g[C]===0)for(var B=0;B<d;B++){var H=B*d+C;h[H]=P}else for(var V=0;V<d;V++){var G=V*d+C;h[G]=h[G]/g[C]+v}for(var Z=new Array(d),ae=new Array(d),W,te=0;te<d;te++)Z[te]=1;for(var se=0;se<t;se++){for(var pe=0;pe<d;pe++)ae[pe]=0;for(var le=0;le<d;le++)for(var Ee=0;Ee<d;Ee++){var Oe=le*d+Ee;ae[le]+=h[Oe]*Z[Ee]}yBe(ae),W=Z,Z=ae,ae=W;for(var Ie=0,Ae=0;Ae<d;Ae++){var be=W[Ae]-Z[Ae];Ie+=be*be}if(Ie<r)break}var ee={rank:function(F){return F=o.collection(F)[0],Z[s.indexOf(F)]}};return ee}},sge=Ra({root:null,weight:function(e){return 1},directed:!1,alpha:0}),Hg={degreeCentralityNormalized:function(e){e=sge(e);var u=this.cy(),n=this.nodes(),r=n.length;if(e.directed){for(var c={},d={},f=0,p=0,h=0;h<r;h++){var g=n[h],v=g.id();e.root=g;var m=this.degreeCentrality(e);f<m.indegree&&(f=m.indegree),p<m.outdegree&&(p=m.outdegree),c[v]=m.indegree,d[v]=m.outdegree}return{indegree:function(w){return f==0?0:(Mt(w)&&(w=u.filter(w)),c[w.id()]/f)},outdegree:function(w){return p===0?0:(Mt(w)&&(w=u.filter(w)),d[w.id()]/p)}}}else{for(var t={},i=0,o=0;o<r;o++){var l=n[o];e.root=l;var s=this.degreeCentrality(e);i<s.degree&&(i=s.degree),t[l.id()]=s.degree}return{degree:function(w){return i===0?0:(Mt(w)&&(w=u.filter(w)),t[w.id()]/i)}}}},degreeCentrality:function(e){e=sge(e);var u=this.cy(),n=this,r=e,t=r.root,i=r.weight,o=r.directed,l=r.alpha;if(t=u.collection(t)[0],o){for(var p=t.connectedEdges(),h=p.filter(function(N){return N.target().same(t)&&n.has(N)}),g=p.filter(function(N){return N.source().same(t)&&n.has(N)}),v=h.length,m=g.length,T=0,w=0,E=0;E<h.length;E++)T+=i(h[E]);for(var S=0;S<g.length;S++)w+=i(g[S]);return{indegree:Math.pow(v,1-l)*Math.pow(T,l),outdegree:Math.pow(m,1-l)*Math.pow(w,l)}}else{for(var s=t.connectedEdges().intersection(n),c=s.length,d=0,f=0;f<s.length;f++)d+=i(s[f]);return{degree:Math.pow(c,1-l)*Math.pow(d,l)}}}};Hg.dc=Hg.degreeCentrality;Hg.dcn=Hg.degreeCentralityNormalised=Hg.degreeCentralityNormalized;var cge=Ra({harmonic:!0,weight:function(){return 1},directed:!1,root:null}),kg={closenessCentralityNormalized:function(e){for(var u=cge(e),n=u.harmonic,r=u.weight,t=u.directed,i=this.cy(),o={},l=0,s=this.nodes(),c=this.floydWarshall({weight:r,directed:t}),d=0;d<s.length;d++){for(var f=0,p=s[d],h=0;h<s.length;h++)if(d!==h){var g=c.distance(p,s[h]);n?f+=1/g:f+=g}n||(f=1/f),l<f&&(l=f),o[p.id()]=f}return{closeness:function(m){return l==0?0:(Mt(m)?m=i.filter(m)[0].id():m=m.id(),o[m]/l)}}},closenessCentrality:function(e){var u=cge(e),n=u.root,r=u.weight,t=u.directed,i=u.harmonic;n=this.filter(n)[0];for(var o=this.dijkstra({root:n,weight:r,directed:t}),l=0,s=this.nodes(),c=0;c<s.length;c++){var d=s[c];if(!d.same(n)){var f=o.distanceTo(d);i?l+=1/f:l+=f}}return i?l:1/l}};kg.cc=kg.closenessCentrality;kg.ccn=kg.closenessCentralityNormalised=kg.closenessCentralityNormalized;var CBe=Ra({weight:null,directed:!1}),_7={betweennessCentrality:function(e){for(var u=CBe(e),n=u.directed,r=u.weight,t=r!=null,i=this.cy(),o=this.nodes(),l={},s={},c=0,d={set:function(w,E){s[w]=E,E>c&&(c=E)},get:function(w){return s[w]}},f=0;f<o.length;f++){var p=o[f],h=p.id();n?l[h]=p.outgoers().nodes():l[h]=p.openNeighborhood().nodes(),d.set(h,0)}for(var g=function(){for(var w=o[v].id(),E=[],S={},N={},j={},q=new pN(function(le,Ee){return j[le]-j[Ee]}),O=0;O<o.length;O++){var I=o[O].id();S[I]=[],N[I]=0,j[I]=1/0}for(N[w]=1,j[w]=0,q.push(w);!q.empty();){var A=q.pop();if(E.push(A),t)for(var P=0;P<l[A].length;P++){var C=l[A][P],B=i.getElementById(A),H=void 0;B.edgesTo(C).length>0?H=B.edgesTo(C)[0]:H=C.edgesTo(B)[0];var V=r(H);C=C.id(),j[C]>j[A]+V&&(j[C]=j[A]+V,q.nodes.indexOf(C)<0?q.push(C):q.updateItem(C),N[C]=0,S[C]=[]),j[C]==j[A]+V&&(N[C]=N[C]+N[A],S[C].push(A))}else for(var G=0;G<l[A].length;G++){var Z=l[A][G].id();j[Z]==1/0&&(q.push(Z),j[Z]=j[A]+1),j[Z]==j[A]+1&&(N[Z]=N[Z]+N[A],S[Z].push(A))}}for(var ae={},W=0;W<o.length;W++)ae[o[W].id()]=0;for(;E.length>0;){for(var te=E.pop(),se=0;se<S[te].length;se++){var pe=S[te][se];ae[pe]=ae[pe]+N[pe]/N[te]*(1+ae[te])}te!=o[v].id()&&d.set(te,d.get(te)+ae[te])}},v=0;v<o.length;v++)g();var m={betweenness:function(w){var E=i.collection(w).id();return d.get(E)},betweennessNormalized:function(w){if(c==0)return 0;var E=i.collection(w).id();return d.get(E)/c}};return m.betweennessNormalised=m.betweennessNormalized,m}};_7.bc=_7.betweennessCentrality;var LBe=Ra({expandFactor:2,inflateFactor:2,multFactor:1,maxIterations:20,attributes:[function(a){return 1}]}),qBe=function(e){return LBe(e)},BBe=function(e,u){for(var n=0,r=0;r<u.length;r++)n+=u[r](e);return n},UBe=function(e,u,n){for(var r=0;r<u;r++)e[r*u+r]=n},rSe=function(e,u){for(var n,r=0;r<u;r++){n=0;for(var t=0;t<u;t++)n+=e[t*u+r];for(var i=0;i<u;i++)e[i*u+r]=e[i*u+r]/n}},QBe=function(e,u,n){for(var r=new Array(n*n),t=0;t<n;t++){for(var i=0;i<n;i++)r[t*n+i]=0;for(var o=0;o<n;o++)for(var l=0;l<n;l++)r[t*n+l]+=e[t*n+o]*u[o*n+l]}return r},VBe=function(e,u,n){for(var r=e.slice(0),t=1;t<n;t++)e=QBe(e,r,u);return e},HBe=function(e,u,n){for(var r=new Array(u*u),t=0;t<u*u;t++)r[t]=Math.pow(e[t],n);return rSe(r,u),r},kBe=function(e,u,n,r){for(var t=0;t<n;t++){var i=Math.round(e[t]*Math.pow(10,r))/Math.pow(10,r),o=Math.round(u[t]*Math.pow(10,r))/Math.pow(10,r);if(i!==o)return!1}return!0},zBe=function(e,u,n,r){for(var t=[],i=0;i<u;i++){for(var o=[],l=0;l<u;l++)Math.round(e[i*u+l]*1e3)/1e3>0&&o.push(n[l]);o.length!==0&&t.push(r.collection(o))}return t},GBe=function(e,u){for(var n=0;n<e.length;n++)if(!u[n]||e[n].id()!==u[n].id())return!1;return!0},$Be=function(e){for(var u=0;u<e.length;u++)for(var n=0;n<e.length;n++)u!=n&&GBe(e[u],e[n])&&e.splice(n,1);return e},lge=function(e){for(var u=this.nodes(),n=this.edges(),r=this.cy(),t=qBe(e),i={},o=0;o<u.length;o++)i[u[o].id()]=o;for(var l=u.length,s=l*l,c=new Array(s),d,f=0;f<s;f++)c[f]=0;for(var p=0;p<n.length;p++){var h=n[p],g=i[h.source().id()],v=i[h.target().id()],m=BBe(h,t.attributes);c[g*l+v]+=m,c[v*l+g]+=m}UBe(c,l,t.multFactor),rSe(c,l);for(var T=!0,w=0;T&&w<t.maxIterations;)T=!1,d=VBe(c,l,t.expandFactor),c=HBe(d,l,t.inflateFactor),kBe(c,d,s,4)||(T=!0),w++;var E=zBe(c,l,u,r);return E=$Be(E),E},XBe={markovClustering:lge,mcl:lge},KBe=function(e){return e},nSe=function(e,u){return Math.abs(u-e)},dge=function(e,u,n){return e+nSe(u,n)},fge=function(e,u,n){return e+Math.pow(n-u,2)},JBe=function(e){return Math.sqrt(e)},WBe=function(e,u,n){return Math.max(e,nSe(u,n))},O6=function(e,u,n,r,t){for(var i=arguments.length>5&&arguments[5]!==void 0?arguments[5]:KBe,o=r,l,s,c=0;c<e;c++)l=u(c),s=n(c),o=t(o,l,s);return i(o)},l1={euclidean:function(e,u,n){return e>=2?O6(e,u,n,0,fge,JBe):O6(e,u,n,0,dge)},squaredEuclidean:function(e,u,n){return O6(e,u,n,0,fge)},manhattan:function(e,u,n){return O6(e,u,n,0,dge)},max:function(e,u,n){return O6(e,u,n,-1/0,WBe)}};l1["squared-euclidean"]=l1.squaredEuclidean;l1.squaredeuclidean=l1.squaredEuclidean;function BP(a,e,u,n,r,t){var i;return On(a)?i=a:i=l1[a]||l1.euclidean,e===0&&On(a)?i(r,t):i(e,u,n,r,t)}var YBe=Ra({k:2,m:2,sensitivityThreshold:1e-4,distance:"euclidean",maxIterations:10,attributes:[],testMode:!1,testCentroids:null}),$H=function(e){return YBe(e)},jF=function(e,u,n,r,t){var i=t!=="kMedoids",o=i?function(d){return n[d]}:function(d){return r[d](n)},l=function(f){return r[f](u)},s=n,c=u;return BP(e,r.length,o,l,s,c)},j9=function(e,u,n){for(var r=n.length,t=new Array(r),i=new Array(r),o=new Array(u),l=null,s=0;s<r;s++)t[s]=e.min(n[s]).value,i[s]=e.max(n[s]).value;for(var c=0;c<u;c++){l=[];for(var d=0;d<r;d++)l[d]=Math.random()*(i[d]-t[d])+t[d];o[c]=l}return o},aSe=function(e,u,n,r,t){for(var i=1/0,o=0,l=0;l<u.length;l++){var s=jF(n,e,u[l],r,t);s<i&&(i=s,o=l)}return o},iSe=function(e,u,n){for(var r=[],t=null,i=0;i<u.length;i++)t=u[i],n[t.id()]===e&&r.push(t);return r},ZBe=function(e,u,n){return Math.abs(u-e)<=n},eUe=function(e,u,n){for(var r=0;r<e.length;r++)for(var t=0;t<e[r].length;t++){var i=Math.abs(e[r][t]-u[r][t]);if(i>n)return!1}return!0},tUe=function(e,u,n){for(var r=0;r<n;r++)if(e===u[r])return!0;return!1},pge=function(e,u){var n=new Array(u);if(e.length<50)for(var r=0;r<u;r++){for(var t=e[Math.floor(Math.random()*e.length)];tUe(t,n,r);)t=e[Math.floor(Math.random()*e.length)];n[r]=t}else for(var i=0;i<u;i++)n[i]=e[Math.floor(Math.random()*e.length)];return n},hge=function(e,u,n){for(var r=0,t=0;t<u.length;t++)r+=jF("manhattan",u[t],e,n,"kMedoids");return r},rUe=function(e){var u=this.cy(),n=this.nodes(),r=null,t=$H(e),i=new Array(t.k),o={},l;t.testMode?typeof t.testCentroids=="number"?(t.testCentroids,l=j9(n,t.k,t.attributes)):ta(t.testCentroids)==="object"?l=t.testCentroids:l=j9(n,t.k,t.attributes):l=j9(n,t.k,t.attributes);for(var s=!0,c=0;s&&c<t.maxIterations;){for(var d=0;d<n.length;d++)r=n[d],o[r.id()]=aSe(r,l,t.distance,t.attributes,"kMeans");s=!1;for(var f=0;f<t.k;f++){var p=iSe(f,n,o);if(p.length!==0){for(var h=t.attributes.length,g=l[f],v=new Array(h),m=new Array(h),T=0;T<h;T++){m[T]=0;for(var w=0;w<p.length;w++)r=p[w],m[T]+=t.attributes[T](r);v[T]=m[T]/p.length,ZBe(v[T],g[T],t.sensitivityThreshold)||(s=!0)}l[f]=v,i[f]=u.collection(p)}}c++}return i},nUe=function(e){var u=this.cy(),n=this.nodes(),r=null,t=$H(e),i=new Array(t.k),o,l={},s,c=new Array(t.k);t.testMode?typeof t.testCentroids=="number"||(ta(t.testCentroids)==="object"?o=t.testCentroids:o=pge(n,t.k)):o=pge(n,t.k);for(var d=!0,f=0;d&&f<t.maxIterations;){for(var p=0;p<n.length;p++)r=n[p],l[r.id()]=aSe(r,o,t.distance,t.attributes,"kMedoids");d=!1;for(var h=0;h<o.length;h++){var g=iSe(h,n,l);if(g.length!==0){c[h]=hge(o[h],g,t.attributes);for(var v=0;v<g.length;v++)s=hge(g[v],g,t.attributes),s<c[h]&&(c[h]=s,o[h]=g[v],d=!0);i[h]=u.collection(g)}}f++}return i},aUe=function(e,u,n,r,t){for(var i,o,l=0;l<u.length;l++)for(var s=0;s<e.length;s++)r[l][s]=Math.pow(n[l][s],t.m);for(var c=0;c<e.length;c++)for(var d=0;d<t.attributes.length;d++){i=0,o=0;for(var f=0;f<u.length;f++)i+=r[f][c]*t.attributes[d](u[f]),o+=r[f][c];e[c][d]=i/o}},iUe=function(e,u,n,r,t){for(var i=0;i<e.length;i++)u[i]=e[i].slice();for(var o,l,s,c=2/(t.m-1),d=0;d<n.length;d++)for(var f=0;f<r.length;f++){o=0;for(var p=0;p<n.length;p++)l=jF(t.distance,r[f],n[d],t.attributes,"cmeans"),s=jF(t.distance,r[f],n[p],t.attributes,"cmeans"),o+=Math.pow(l/s,c);e[f][d]=1/o}},uUe=function(e,u,n,r){for(var t=new Array(n.k),i=0;i<t.length;i++)t[i]=[];for(var o,l,s=0;s<u.length;s++){o=-1/0,l=-1;for(var c=0;c<u[0].length;c++)u[s][c]>o&&(o=u[s][c],l=c);t[l].push(e[s])}for(var d=0;d<t.length;d++)t[d]=r.collection(t[d]);return t},yge=function(e){var u=this.cy(),n=this.nodes(),r=$H(e),t,i,o,l,s;l=new Array(n.length);for(var c=0;c<n.length;c++)l[c]=new Array(r.k);o=new Array(n.length);for(var d=0;d<n.length;d++)o[d]=new Array(r.k);for(var f=0;f<n.length;f++){for(var p=0,h=0;h<r.k;h++)o[f][h]=Math.random(),p+=o[f][h];for(var g=0;g<r.k;g++)o[f][g]=o[f][g]/p}i=new Array(r.k);for(var v=0;v<r.k;v++)i[v]=new Array(r.attributes.length);s=new Array(n.length);for(var m=0;m<n.length;m++)s[m]=new Array(r.k);for(var T=!0,w=0;T&&w<r.maxIterations;)T=!1,aUe(i,n,o,s,r),iUe(o,l,i,n,r),eUe(o,l,r.sensitivityThreshold)||(T=!0),w++;return t=uUe(n,o,r,u),{clusters:t,degreeOfMembership:o}},oUe={kMeans:rUe,kMedoids:nUe,fuzzyCMeans:yge,fcm:yge},sUe=Ra({distance:"euclidean",linkage:"min",mode:"threshold",threshold:1/0,addDendrogram:!1,dendrogramDepth:0,attributes:[]}),cUe={single:"min",complete:"max"},lUe=function(e){var u=sUe(e),n=cUe[u.linkage];return n!=null&&(u.linkage=n),u},mge=function(e,u,n,r,t){for(var i=0,o=1/0,l,s=t.attributes,c=function(O,I){return BP(t.distance,s.length,function(A){return s[A](O)},function(A){return s[A](I)},O,I)},d=0;d<e.length;d++){var f=e[d].key,p=n[f][r[f]];p<o&&(i=f,o=p)}if(t.mode==="threshold"&&o>=t.threshold||t.mode==="dendrogram"&&e.length===1)return!1;var h=u[i],g=u[r[i]],v;t.mode==="dendrogram"?v={left:h,right:g,key:h.key}:v={value:h.value.concat(g.value),key:h.key},e[h.index]=v,e.splice(g.index,1),u[h.key]=v;for(var m=0;m<e.length;m++){var T=e[m];h.key===T.key?l=1/0:t.linkage==="min"?(l=n[h.key][T.key],n[h.key][T.key]>n[g.key][T.key]&&(l=n[g.key][T.key])):t.linkage==="max"?(l=n[h.key][T.key],n[h.key][T.key]<n[g.key][T.key]&&(l=n[g.key][T.key])):t.linkage==="mean"?l=(n[h.key][T.key]*h.size+n[g.key][T.key]*g.size)/(h.size+g.size):t.mode==="dendrogram"?l=c(T.value,h.value):l=c(T.value[0],h.value[0]),n[h.key][T.key]=n[T.key][h.key]=l}for(var w=0;w<e.length;w++){var E=e[w].key;if(r[E]===h.key||r[E]===g.key){for(var S=E,N=0;N<e.length;N++){var j=e[N].key;n[E][j]<n[E][S]&&(S=j)}r[E]=S}e[w].index=w}return h.key=g.key=h.index=g.index=null,!0},Bg=function(e,u,n){e&&(e.value?u.push(e.value):(e.left&&Bg(e.left,u),e.right&&Bg(e.right,u)))},T7=function(e,u){if(!e)return"";if(e.left&&e.right){var n=T7(e.left,u),r=T7(e.right,u),t=u.add({group:"nodes",data:{id:n+","+r}});return u.add({group:"edges",data:{source:n,target:t.id()}}),u.add({group:"edges",data:{source:r,target:t.id()}}),t.id()}else if(e.value)return e.value.id()},w7=function(e,u,n){if(!e)return[];var r=[],t=[],i=[];return u===0?(e.left&&Bg(e.left,r),e.right&&Bg(e.right,t),i=r.concat(t),[n.collection(i)]):u===1?e.value?[n.collection(e.value)]:(e.left&&Bg(e.left,r),e.right&&Bg(e.right,t),[n.collection(r),n.collection(t)]):e.value?[n.collection(e.value)]:(e.left&&(r=w7(e.left,u-1,n)),e.right&&(t=w7(e.right,u-1,n)),r.concat(t))},bge=function(e){for(var u=this.cy(),n=this.nodes(),r=lUe(e),t=r.attributes,i=function(w,E){return BP(r.distance,t.length,function(S){return t[S](w)},function(S){return t[S](E)},w,E)},o=[],l=[],s=[],c=[],d=0;d<n.length;d++){var f={value:r.mode==="dendrogram"?n[d]:[n[d]],key:d,index:d};o[d]=f,c[d]=f,l[d]=[],s[d]=0}for(var p=0;p<o.length;p++)for(var h=0;h<=p;h++){var g=void 0;r.mode==="dendrogram"?g=p===h?1/0:i(o[p].value,o[h].value):g=p===h?1/0:i(o[p].value[0],o[h].value[0]),l[p][h]=g,l[h][p]=g,g<l[p][s[p]]&&(s[p]=h)}for(var v=mge(o,c,l,s,r);v;)v=mge(o,c,l,s,r);var m;return r.mode==="dendrogram"?(m=w7(o[0],r.dendrogramDepth,u),r.addDendrogram&&T7(o[0],u)):(m=new Array(o.length),o.forEach(function(T,w){T.key=T.index=null,m[w]=u.collection(T.value)})),m},dUe={hierarchicalClustering:bge,hca:bge},fUe=Ra({distance:"euclidean",preference:"median",damping:.8,maxIterations:1e3,minIterations:100,attributes:[]}),pUe=function(e){var u=e.damping,n=e.preference;.5<=u&&u<1||_n("Damping must range on [0.5, 1).  Got: ".concat(u));var r=["median","mean","min","max"];return r.some(function(t){return t===n})||At(n)||_n("Preference must be one of [".concat(r.map(function(t){return"'".concat(t,"'")}).join(", "),"] or a number.  Got: ").concat(n)),fUe(e)},hUe=function(e,u,n,r){var t=function(o,l){return r[l](o)};return-BP(e,r.length,function(i){return t(u,i)},function(i){return t(n,i)},u,n)},yUe=function(e,u){var n=null;return u==="median"?n=pBe(e):u==="mean"?n=fBe(e):u==="min"?n=lBe(e):u==="max"?n=dBe(e):n=u,n},mUe=function(e,u,n){for(var r=[],t=0;t<e;t++)u[t*e+t]+n[t*e+t]>0&&r.push(t);return r},gge=function(e,u,n){for(var r=[],t=0;t<e;t++){for(var i=-1,o=-1/0,l=0;l<n.length;l++){var s=n[l];u[t*e+s]>o&&(i=s,o=u[t*e+s])}i>0&&r.push(i)}for(var c=0;c<n.length;c++)r[n[c]]=n[c];return r},bUe=function(e,u,n){for(var r=gge(e,u,n),t=0;t<n.length;t++){for(var i=[],o=0;o<r.length;o++)r[o]===n[t]&&i.push(o);for(var l=-1,s=-1/0,c=0;c<i.length;c++){for(var d=0,f=0;f<i.length;f++)d+=u[i[f]*e+i[c]];d>s&&(l=c,s=d)}n[t]=i[l]}return r=gge(e,u,n),r},vge=function(e){for(var u=this.cy(),n=this.nodes(),r=pUe(e),t={},i=0;i<n.length;i++)t[n[i].id()]=i;var o,l,s,c,d,f;o=n.length,l=o*o,s=new Array(l);for(var p=0;p<l;p++)s[p]=-1/0;for(var h=0;h<o;h++)for(var g=0;g<o;g++)h!==g&&(s[h*o+g]=hUe(r.distance,n[h],n[g],r.attributes));c=yUe(s,r.preference);for(var v=0;v<o;v++)s[v*o+v]=c;d=new Array(l);for(var m=0;m<l;m++)d[m]=0;f=new Array(l);for(var T=0;T<l;T++)f[T]=0;for(var w=new Array(o),E=new Array(o),S=new Array(o),N=0;N<o;N++)w[N]=0,E[N]=0,S[N]=0;for(var j=new Array(o*r.minIterations),q=0;q<j.length;q++)j[q]=0;var O;for(O=0;O<r.maxIterations;O++){for(var I=0;I<o;I++){for(var A=-1/0,P=-1/0,C=-1,B=0,H=0;H<o;H++)w[H]=d[I*o+H],B=f[I*o+H]+s[I*o+H],B>=A?(P=A,A=B,C=H):B>P&&(P=B);for(var V=0;V<o;V++)d[I*o+V]=(1-r.damping)*(s[I*o+V]-A)+r.damping*w[V];d[I*o+C]=(1-r.damping)*(s[I*o+C]-P)+r.damping*w[C]}for(var G=0;G<o;G++){for(var Z=0,ae=0;ae<o;ae++)w[ae]=f[ae*o+G],E[ae]=Math.max(0,d[ae*o+G]),Z+=E[ae];Z-=E[G],E[G]=d[G*o+G],Z+=E[G];for(var W=0;W<o;W++)f[W*o+G]=(1-r.damping)*Math.min(0,Z-E[W])+r.damping*w[W];f[G*o+G]=(1-r.damping)*(Z-E[G])+r.damping*w[G]}for(var te=0,se=0;se<o;se++){var pe=f[se*o+se]+d[se*o+se]>0?1:0;j[O%r.minIterations*o+se]=pe,te+=pe}if(te>0&&(O>=r.minIterations-1||O==r.maxIterations-1)){for(var le=0,Ee=0;Ee<o;Ee++){S[Ee]=0;for(var Oe=0;Oe<r.minIterations;Oe++)S[Ee]+=j[Oe*o+Ee];(S[Ee]===0||S[Ee]===r.minIterations)&&le++}if(le===o)break}}for(var Ie=mUe(o,d,f),Ae=bUe(o,s,Ie),be={},ee=0;ee<Ie.length;ee++)be[Ie[ee]]=[];for(var _=0;_<n.length;_++){var F=t[n[_].id()],D=Ae[F];D!=null&&be[D].push(n[_])}for(var L=new Array(Ie.length),Q=0;Q<Ie.length;Q++)L[Q]=u.collection(be[Ie[Q]]);return L},gUe={affinityPropagation:vge,ap:vge},vUe=Ra({root:void 0,directed:!1}),_Ue={hierholzer:function(e){if(!_r(e)){var u=arguments;e={root:u[0],directed:u[1]}}var n=vUe(e),r=n.root,t=n.directed,i=this,o=!1,l,s,c;r&&(c=Mt(r)?this.filter(r)[0].id():r[0].id());var d={},f={};t?i.forEach(function(T){var w=T.id();if(T.isNode()){var E=T.indegree(!0),S=T.outdegree(!0),N=E-S,j=S-E;N==1?l?o=!0:l=w:j==1?s?o=!0:s=w:(j>1||N>1)&&(o=!0),d[w]=[],T.outgoers().forEach(function(q){q.isEdge()&&d[w].push(q.id())})}else f[w]=[void 0,T.target().id()]}):i.forEach(function(T){var w=T.id();if(T.isNode()){var E=T.degree(!0);E%2&&(l?s?o=!0:s=w:l=w),d[w]=[],T.connectedEdges().forEach(function(S){return d[w].push(S.id())})}else f[w]=[T.source().id(),T.target().id()]});var p={found:!1,trail:void 0};if(o)return p;if(s&&l)if(t){if(c&&s!=c)return p;c=s}else{if(c&&s!=c&&l!=c)return p;c||(c=s)}else c||(c=i[0].id());var h=function(w){for(var E=w,S=[w],N,j,q;d[E].length;)N=d[E].shift(),j=f[N][0],q=f[N][1],E!=q?(d[q]=d[q].filter(function(O){return O!=N}),E=q):!t&&E!=j&&(d[j]=d[j].filter(function(O){return O!=N}),E=j),S.unshift(N),S.unshift(E);return S},g=[],v=[];for(v=h(c);v.length!=1;)d[v[0]].length==0?(g.unshift(i.getElementById(v.shift())),g.unshift(i.getElementById(v.shift()))):v=h(v.shift()).concat(v);g.unshift(i.getElementById(v.shift()));for(var m in d)if(d[m].length)return p;return p.found=!0,p.trail=this.spawn(g,!0),p}},MD=function(){var e=this,u={},n=0,r=0,t=[],i=[],o={},l=function(f,p){for(var h=i.length-1,g=[],v=e.spawn();i[h].x!=f||i[h].y!=p;)g.push(i.pop().edge),h--;g.push(i.pop().edge),g.forEach(function(m){var T=m.connectedNodes().intersection(e);v.merge(m),T.forEach(function(w){var E=w.id(),S=w.connectedEdges().intersection(e);v.merge(w),u[E].cutVertex?v.merge(S.filter(function(N){return N.isLoop()})):v.merge(S)})}),t.push(v)},s=function(f,p,h){f===h&&(r+=1),u[p]={id:n,low:n++,cutVertex:!1};var g=e.getElementById(p).connectedEdges().intersection(e);if(g.size()===0)t.push(e.spawn(e.getElementById(p)));else{var v,m,T,w;g.forEach(function(E){v=E.source().id(),m=E.target().id(),T=v===p?m:v,T!==h&&(w=E.id(),o[w]||(o[w]=!0,i.push({x:p,y:T,edge:E})),T in u?u[p].low=Math.min(u[p].low,u[T].id):(s(f,T,p),u[p].low=Math.min(u[p].low,u[T].low),u[p].id<=u[T].low&&(u[p].cutVertex=!0,l(p,T))))})}};e.forEach(function(d){if(d.isNode()){var f=d.id();f in u||(r=0,s(f,f),u[f].cutVertex=r>1)}});var c=Object.keys(u).filter(function(d){return u[d].cutVertex}).map(function(d){return e.getElementById(d)});return{cut:e.spawn(c),components:t}},TUe={hopcroftTarjanBiconnected:MD,htbc:MD,htb:MD,hopcroftTarjanBiconnectedComponents:MD},CD=function(){var e=this,u={},n=0,r=[],t=[],i=e.spawn(e),o=function(s){t.push(s),u[s]={index:n,low:n++,explored:!1};var c=e.getElementById(s).connectedEdges().intersection(e);if(c.forEach(function(g){var v=g.target().id();v!==s&&(v in u||o(v),u[v].explored||(u[s].low=Math.min(u[s].low,u[v].low)))}),u[s].index===u[s].low){for(var d=e.spawn();;){var f=t.pop();if(d.merge(e.getElementById(f)),u[f].low=u[s].index,u[f].explored=!0,f===s)break}var p=d.edgesWith(d),h=d.merge(p);r.push(h),i=i.difference(h)}};return e.forEach(function(l){if(l.isNode()){var s=l.id();s in u||o(s)}}),{cut:i,components:r}},wUe={tarjanStronglyConnected:CD,tsc:CD,tscc:CD,tarjanStronglyConnectedComponents:CD},uSe={};[v4,Yqe,Zqe,tBe,nBe,iBe,sBe,MBe,Hg,kg,_7,XBe,oUe,dUe,gUe,_Ue,TUe,wUe].forEach(function(a){qt(uSe,a)});var oSe=0,sSe=1,cSe=2,po=function(e){if(!(this instanceof po))return new po(e);this.id="Thenable/1.0.7",this.state=oSe,this.fulfillValue=void 0,this.rejectReason=void 0,this.onFulfilled=[],this.onRejected=[],this.proxy={then:this.then.bind(this)},typeof e=="function"&&e.call(this,this.fulfill.bind(this),this.reject.bind(this))};po.prototype={fulfill:function(e){return _ge(this,sSe,"fulfillValue",e)},reject:function(e){return _ge(this,cSe,"rejectReason",e)},then:function(e,u){var n=this,r=new po;return n.onFulfilled.push(wge(e,r,"fulfill")),n.onRejected.push(wge(u,r,"reject")),lSe(n),r.proxy}};var _ge=function(e,u,n,r){return e.state===oSe&&(e.state=u,e[n]=r,lSe(e)),e},lSe=function(e){e.state===sSe?Tge(e,"onFulfilled",e.fulfillValue):e.state===cSe&&Tge(e,"onRejected",e.rejectReason)},Tge=function(e,u,n){if(e[u].length!==0){var r=e[u];e[u]=[];var t=function(){for(var o=0;o<r.length;o++)r[o](n)};typeof setImmediate=="function"?setImmediate(t):setTimeout(t,0)}},wge=function(e,u,n){return function(r){if(typeof e!="function")u[n].call(u,r);else{var t;try{t=e(r)}catch(i){u.reject(i);return}dSe(u,t)}}},dSe=function(e,u){if(e===u||e.proxy===u){e.reject(new TypeError("cannot resolve promise with itself"));return}var n;if(ta(u)==="object"&&u!==null||typeof u=="function")try{n=u.then}catch(t){e.reject(t);return}if(typeof n=="function"){var r=!1;try{n.call(u,function(t){r||(r=!0,t===u?e.reject(new TypeError("circular thenable chain")):dSe(e,t))},function(t){r||(r=!0,e.reject(t))})}catch(t){r||e.reject(t)}return}e.fulfill(u)};po.all=function(a){return new po(function(e,u){for(var n=new Array(a.length),r=0,t=function(l,s){n[l]=s,r++,r===a.length&&e(n)},i=0;i<a.length;i++)(function(o){var l=a[o],s=l!=null&&l.then!=null;if(s)l.then(function(d){t(o,d)},function(d){u(d)});else{var c=l;t(o,c)}})(i)})};po.resolve=function(a){return new po(function(e,u){e(a)})};po.reject=function(a){return new po(function(e,u){u(a)})};var R1=typeof Promise<"u"?Promise:po,S7=function(e,u,n){var r=LH(e),t=!r,i=this._private=qt({duration:1e3},u,n);if(i.target=e,i.style=i.style||i.css,i.started=!1,i.playing=!1,i.hooked=!1,i.applying=!1,i.progress=0,i.completes=[],i.frames=[],i.complete&&On(i.complete)&&i.completes.push(i.complete),t){var o=e.position();i.startPosition=i.startPosition||{x:o.x,y:o.y},i.startStyle=i.startStyle||e.cy().style().getAnimationStartStyle(e,i.style)}if(r){var l=e.pan();i.startPan={x:l.x,y:l.y},i.startZoom=e.zoom()}this.length=1,this[0]=this},db=S7.prototype;qt(db,{instanceString:function(){return"animation"},hook:function(){var e=this._private;if(!e.hooked){var u,n=e.target._private.animation;e.queue?u=n.queue:u=n.current,u.push(this),Bi(e.target)&&e.target.cy().addToAnimationPool(e.target),e.hooked=!0}return this},play:function(){var e=this._private;return e.progress===1&&(e.progress=0),e.playing=!0,e.started=!1,e.stopped=!1,this.hook(),this},playing:function(){return this._private.playing},apply:function(){var e=this._private;return e.applying=!0,e.started=!1,e.stopped=!1,this.hook(),this},applying:function(){return this._private.applying},pause:function(){var e=this._private;return e.playing=!1,e.started=!1,this},stop:function(){var e=this._private;return e.playing=!1,e.started=!1,e.stopped=!0,this},rewind:function(){return this.progress(0)},fastforward:function(){return this.progress(1)},time:function(e){var u=this._private;return e===void 0?u.progress*u.duration:this.progress(e/u.duration)},progress:function(e){var u=this._private,n=u.playing;return e===void 0?u.progress:(n&&this.pause(),u.progress=e,u.started=!1,n&&this.play(),this)},completed:function(){return this._private.progress===1},reverse:function(){var e=this._private,u=e.playing;u&&this.pause(),e.progress=1-e.progress,e.started=!1;var n=function(s,c){var d=e[s];d!=null&&(e[s]=e[c],e[c]=d)};if(n("zoom","startZoom"),n("pan","startPan"),n("position","startPosition"),e.style)for(var r=0;r<e.style.length;r++){var t=e.style[r],i=t.name,o=e.startStyle[i];e.startStyle[i]=t,e.style[r]=o}return u&&this.play(),this},promise:function(e){var u=this._private,n;switch(e){case"frame":n=u.frames;break;default:case"complete":case"completed":n=u.completes}return new R1(function(r,t){n.push(function(){r()})})}});db.complete=db.completed;db.run=db.play;db.running=db.playing;var SUe={animated:function(){return function(){var u=this,n=u.length!==void 0,r=n?u:[u],t=this._private.cy||this;if(!t.styleEnabled())return!1;var i=r[0];if(i)return i._private.animation.current.length>0}},clearQueue:function(){return function(){var u=this,n=u.length!==void 0,r=n?u:[u],t=this._private.cy||this;if(!t.styleEnabled())return this;for(var i=0;i<r.length;i++){var o=r[i];o._private.animation.queue=[]}return this}},delay:function(){return function(u,n){var r=this._private.cy||this;return r.styleEnabled()?this.animate({delay:u,duration:u,complete:n}):this}},delayAnimation:function(){return function(u,n){var r=this._private.cy||this;return r.styleEnabled()?this.animation({delay:u,duration:u,complete:n}):this}},animation:function(){return function(u,n){var r=this,t=r.length!==void 0,i=t?r:[r],o=this._private.cy||this,l=!t,s=!l;if(!o.styleEnabled())return this;var c=o.style();u=qt({},u,n);var d=Object.keys(u).length===0;if(d)return new S7(i[0],u);switch(u.duration===void 0&&(u.duration=400),u.duration){case"slow":u.duration=600;break;case"fast":u.duration=200;break}if(s&&(u.style=c.getPropsList(u.style||u.css),u.css=void 0),s&&u.renderedPosition!=null){var f=u.renderedPosition,p=o.pan(),h=o.zoom();u.position=Jwe(f,h,p)}if(l&&u.panBy!=null){var g=u.panBy,v=o.pan();u.pan={x:v.x+g.x,y:v.y+g.y}}var m=u.center||u.centre;if(l&&m!=null){var T=o.getCenterPan(m.eles,u.zoom);T!=null&&(u.pan=T)}if(l&&u.fit!=null){var w=u.fit,E=o.getFitViewport(w.eles||w.boundingBox,w.padding);E!=null&&(u.pan=E.pan,u.zoom=E.zoom)}if(l&&_r(u.zoom)){var S=o.getZoomedViewport(u.zoom);S!=null?(S.zoomed&&(u.zoom=S.zoom),S.panned&&(u.pan=S.pan)):u.zoom=null}return new S7(i[0],u)}},animate:function(){return function(u,n){var r=this,t=r.length!==void 0,i=t?r:[r],o=this._private.cy||this;if(!o.styleEnabled())return this;n&&(u=qt({},u,n));for(var l=0;l<i.length;l++){var s=i[l],c=s.animated()&&(u.queue===void 0||u.queue),d=s.animation(u,c?{queue:!0}:void 0);d.play()}return this}},stop:function(){return function(u,n){var r=this,t=r.length!==void 0,i=t?r:[r],o=this._private.cy||this;if(!o.styleEnabled())return this;for(var l=0;l<i.length;l++){for(var s=i[l],c=s._private,d=c.animation.current,f=0;f<d.length;f++){var p=d[f],h=p._private;n&&(h.duration=0)}u&&(c.animation.queue=[]),n||(c.animation.current=[])}return o.notify("draw"),this}}},M9,Sge;function UP(){if(Sge)return M9;Sge=1;var a=Array.isArray;return M9=a,M9}var C9,Ege;function EUe(){if(Ege)return C9;Ege=1;var a=UP(),e=dN(),u=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,n=/^\w*$/;function r(t,i){if(a(t))return!1;var o=typeof t;return o=="number"||o=="symbol"||o=="boolean"||t==null||e(t)?!0:n.test(t)||!u.test(t)||i!=null&&t in Object(i)}return C9=r,C9}var L9,Age;function AUe(){if(Age)return L9;Age=1;var a=Qwe(),e=lN(),u="[object AsyncFunction]",n="[object Function]",r="[object GeneratorFunction]",t="[object Proxy]";function i(o){if(!e(o))return!1;var l=a(o);return l==n||l==r||l==u||l==t}return L9=i,L9}var q9,Oge;function OUe(){if(Oge)return q9;Oge=1;var a=CP(),e=a["__core-js_shared__"];return q9=e,q9}var B9,xge;function xUe(){if(xge)return B9;xge=1;var a=OUe(),e=(function(){var n=/[^.]+$/.exec(a&&a.keys&&a.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""})();function u(n){return!!e&&e in n}return B9=u,B9}var U9,Rge;function RUe(){if(Rge)return U9;Rge=1;var a=Function.prototype,e=a.toString;function u(n){if(n!=null){try{return e.call(n)}catch{}try{return n+""}catch{}}return""}return U9=u,U9}var Q9,Nge;function NUe(){if(Nge)return Q9;Nge=1;var a=AUe(),e=xUe(),u=lN(),n=RUe(),r=/[\\^$.*+?()[\]{}|]/g,t=/^\[object .+?Constructor\]$/,i=Function.prototype,o=Object.prototype,l=i.toString,s=o.hasOwnProperty,c=RegExp("^"+l.call(s).replace(r,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function d(f){if(!u(f)||e(f))return!1;var p=a(f)?c:t;return p.test(n(f))}return Q9=d,Q9}var V9,Ige;function IUe(){if(Ige)return V9;Ige=1;function a(e,u){return e?.[u]}return V9=a,V9}var H9,Dge;function XH(){if(Dge)return H9;Dge=1;var a=NUe(),e=IUe();function u(n,r){var t=e(n,r);return a(t)?t:void 0}return H9=u,H9}var k9,Fge;function QP(){if(Fge)return k9;Fge=1;var a=XH(),e=a(Object,"create");return k9=e,k9}var z9,Pge;function DUe(){if(Pge)return z9;Pge=1;var a=QP();function e(){this.__data__=a?a(null):{},this.size=0}return z9=e,z9}var G9,jge;function FUe(){if(jge)return G9;jge=1;function a(e){var u=this.has(e)&&delete this.__data__[e];return this.size-=u?1:0,u}return G9=a,G9}var $9,Mge;function PUe(){if(Mge)return $9;Mge=1;var a=QP(),e="__lodash_hash_undefined__",u=Object.prototype,n=u.hasOwnProperty;function r(t){var i=this.__data__;if(a){var o=i[t];return o===e?void 0:o}return n.call(i,t)?i[t]:void 0}return $9=r,$9}var X9,Cge;function jUe(){if(Cge)return X9;Cge=1;var a=QP(),e=Object.prototype,u=e.hasOwnProperty;function n(r){var t=this.__data__;return a?t[r]!==void 0:u.call(t,r)}return X9=n,X9}var K9,Lge;function MUe(){if(Lge)return K9;Lge=1;var a=QP(),e="__lodash_hash_undefined__";function u(n,r){var t=this.__data__;return this.size+=this.has(n)?0:1,t[n]=a&&r===void 0?e:r,this}return K9=u,K9}var J9,qge;function CUe(){if(qge)return J9;qge=1;var a=DUe(),e=FUe(),u=PUe(),n=jUe(),r=MUe();function t(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}return t.prototype.clear=a,t.prototype.delete=e,t.prototype.get=u,t.prototype.has=n,t.prototype.set=r,J9=t,J9}var W9,Bge;function LUe(){if(Bge)return W9;Bge=1;function a(){this.__data__=[],this.size=0}return W9=a,W9}var Y9,Uge;function fSe(){if(Uge)return Y9;Uge=1;function a(e,u){return e===u||e!==e&&u!==u}return Y9=a,Y9}var Z9,Qge;function VP(){if(Qge)return Z9;Qge=1;var a=fSe();function e(u,n){for(var r=u.length;r--;)if(a(u[r][0],n))return r;return-1}return Z9=e,Z9}var eL,Vge;function qUe(){if(Vge)return eL;Vge=1;var a=VP(),e=Array.prototype,u=e.splice;function n(r){var t=this.__data__,i=a(t,r);if(i<0)return!1;var o=t.length-1;return i==o?t.pop():u.call(t,i,1),--this.size,!0}return eL=n,eL}var tL,Hge;function BUe(){if(Hge)return tL;Hge=1;var a=VP();function e(u){var n=this.__data__,r=a(n,u);return r<0?void 0:n[r][1]}return tL=e,tL}var rL,kge;function UUe(){if(kge)return rL;kge=1;var a=VP();function e(u){return a(this.__data__,u)>-1}return rL=e,rL}var nL,zge;function QUe(){if(zge)return nL;zge=1;var a=VP();function e(u,n){var r=this.__data__,t=a(r,u);return t<0?(++this.size,r.push([u,n])):r[t][1]=n,this}return nL=e,nL}var aL,Gge;function VUe(){if(Gge)return aL;Gge=1;var a=LUe(),e=qUe(),u=BUe(),n=UUe(),r=QUe();function t(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}return t.prototype.clear=a,t.prototype.delete=e,t.prototype.get=u,t.prototype.has=n,t.prototype.set=r,aL=t,aL}var iL,$ge;function HUe(){if($ge)return iL;$ge=1;var a=XH(),e=CP(),u=a(e,"Map");return iL=u,iL}var uL,Xge;function kUe(){if(Xge)return uL;Xge=1;var a=CUe(),e=VUe(),u=HUe();function n(){this.size=0,this.__data__={hash:new a,map:new(u||e),string:new a}}return uL=n,uL}var oL,Kge;function zUe(){if(Kge)return oL;Kge=1;function a(e){var u=typeof e;return u=="string"||u=="number"||u=="symbol"||u=="boolean"?e!=="__proto__":e===null}return oL=a,oL}var sL,Jge;function HP(){if(Jge)return sL;Jge=1;var a=zUe();function e(u,n){var r=u.__data__;return a(n)?r[typeof n=="string"?"string":"hash"]:r.map}return sL=e,sL}var cL,Wge;function GUe(){if(Wge)return cL;Wge=1;var a=HP();function e(u){var n=a(this,u).delete(u);return this.size-=n?1:0,n}return cL=e,cL}var lL,Yge;function $Ue(){if(Yge)return lL;Yge=1;var a=HP();function e(u){return a(this,u).get(u)}return lL=e,lL}var dL,Zge;function XUe(){if(Zge)return dL;Zge=1;var a=HP();function e(u){return a(this,u).has(u)}return dL=e,dL}var fL,e1e;function KUe(){if(e1e)return fL;e1e=1;var a=HP();function e(u,n){var r=a(this,u),t=r.size;return r.set(u,n),this.size+=r.size==t?0:1,this}return fL=e,fL}var pL,t1e;function JUe(){if(t1e)return pL;t1e=1;var a=kUe(),e=GUe(),u=$Ue(),n=XUe(),r=KUe();function t(i){var o=-1,l=i==null?0:i.length;for(this.clear();++o<l;){var s=i[o];this.set(s[0],s[1])}}return t.prototype.clear=a,t.prototype.delete=e,t.prototype.get=u,t.prototype.has=n,t.prototype.set=r,pL=t,pL}var hL,r1e;function WUe(){if(r1e)return hL;r1e=1;var a=JUe(),e="Expected a function";function u(n,r){if(typeof n!="function"||r!=null&&typeof r!="function")throw new TypeError(e);var t=function(){var i=arguments,o=r?r.apply(this,i):i[0],l=t.cache;if(l.has(o))return l.get(o);var s=n.apply(this,i);return t.cache=l.set(o,s)||l,s};return t.cache=new(u.Cache||a),t}return u.Cache=a,hL=u,hL}var yL,n1e;function YUe(){if(n1e)return yL;n1e=1;var a=WUe(),e=500;function u(n){var r=a(n,function(i){return t.size===e&&t.clear(),i}),t=r.cache;return r}return yL=u,yL}var mL,a1e;function pSe(){if(a1e)return mL;a1e=1;var a=YUe(),e=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,u=/\\(\\)?/g,n=a(function(r){var t=[];return r.charCodeAt(0)===46&&t.push(""),r.replace(e,function(i,o,l,s){t.push(l?s.replace(u,"$1"):o||i)}),t});return mL=n,mL}var bL,i1e;function hSe(){if(i1e)return bL;i1e=1;function a(e,u){for(var n=-1,r=e==null?0:e.length,t=Array(r);++n<r;)t[n]=u(e[n],n,e);return t}return bL=a,bL}var gL,u1e;function ZUe(){if(u1e)return gL;u1e=1;var a=BH(),e=hSe(),u=UP(),n=dN(),r=a?a.prototype:void 0,t=r?r.toString:void 0;function i(o){if(typeof o=="string")return o;if(u(o))return e(o,i)+"";if(n(o))return t?t.call(o):"";var l=o+"";return l=="0"&&1/o==-1/0?"-0":l}return gL=i,gL}var vL,o1e;function ySe(){if(o1e)return vL;o1e=1;var a=ZUe();function e(u){return u==null?"":a(u)}return vL=e,vL}var _L,s1e;function mSe(){if(s1e)return _L;s1e=1;var a=UP(),e=EUe(),u=pSe(),n=ySe();function r(t,i){return a(t)?t:e(t,i)?[t]:u(n(t))}return _L=r,_L}var TL,c1e;function KH(){if(c1e)return TL;c1e=1;var a=dN();function e(u){if(typeof u=="string"||a(u))return u;var n=u+"";return n=="0"&&1/u==-1/0?"-0":n}return TL=e,TL}var wL,l1e;function eQe(){if(l1e)return wL;l1e=1;var a=mSe(),e=KH();function u(n,r){r=a(r,n);for(var t=0,i=r.length;n!=null&&t<i;)n=n[e(r[t++])];return t&&t==i?n:void 0}return wL=u,wL}var SL,d1e;function tQe(){if(d1e)return SL;d1e=1;var a=eQe();function e(u,n,r){var t=u==null?void 0:a(u,n);return t===void 0?r:t}return SL=e,SL}var rQe=tQe(),nQe=cN(rQe),EL,f1e;function aQe(){if(f1e)return EL;f1e=1;var a=XH(),e=(function(){try{var u=a(Object,"defineProperty");return u({},"",{}),u}catch{}})();return EL=e,EL}var AL,p1e;function iQe(){if(p1e)return AL;p1e=1;var a=aQe();function e(u,n,r){n=="__proto__"&&a?a(u,n,{configurable:!0,enumerable:!0,value:r,writable:!0}):u[n]=r}return AL=e,AL}var OL,h1e;function uQe(){if(h1e)return OL;h1e=1;var a=iQe(),e=fSe(),u=Object.prototype,n=u.hasOwnProperty;function r(t,i,o){var l=t[i];(!(n.call(t,i)&&e(l,o))||o===void 0&&!(i in t))&&a(t,i,o)}return OL=r,OL}var xL,y1e;function oQe(){if(y1e)return xL;y1e=1;var a=9007199254740991,e=/^(?:0|[1-9]\d*)$/;function u(n,r){var t=typeof n;return r=r??a,!!r&&(t=="number"||t!="symbol"&&e.test(n))&&n>-1&&n%1==0&&n<r}return xL=u,xL}var RL,m1e;function sQe(){if(m1e)return RL;m1e=1;var a=uQe(),e=mSe(),u=oQe(),n=lN(),r=KH();function t(i,o,l,s){if(!n(i))return i;o=e(o,i);for(var c=-1,d=o.length,f=d-1,p=i;p!=null&&++c<d;){var h=r(o[c]),g=l;if(h==="__proto__"||h==="constructor"||h==="prototype")return i;if(c!=f){var v=p[h];g=s?s(v,h,p):void 0,g===void 0&&(g=n(v)?v:u(o[c+1])?[]:{})}a(p,h,g),p=p[h]}return i}return RL=t,RL}var NL,b1e;function cQe(){if(b1e)return NL;b1e=1;var a=sQe();function e(u,n,r){return u==null?u:a(u,n,r)}return NL=e,NL}var lQe=cQe(),dQe=cN(lQe),IL,g1e;function fQe(){if(g1e)return IL;g1e=1;function a(e,u){var n=-1,r=e.length;for(u||(u=Array(r));++n<r;)u[n]=e[n];return u}return IL=a,IL}var DL,v1e;function pQe(){if(v1e)return DL;v1e=1;var a=hSe(),e=fQe(),u=UP(),n=dN(),r=pSe(),t=KH(),i=ySe();function o(l){return u(l)?a(l,t):n(l)?[l]:e(r(i(l)))}return DL=o,DL}var hQe=pQe(),yQe=cN(hQe),mQe={data:function(e){var u={field:"data",bindingEvent:"data",allowBinding:!1,allowSetting:!1,allowGetting:!1,settingEvent:"data",settingTriggersEvent:!1,triggerFnName:"trigger",immutableKeys:{},updateStyle:!1,beforeGet:function(r){},beforeSet:function(r,t){},onSet:function(r){},canSet:function(r){return!0}};return e=qt({},u,e),function(r,t){var i=e,o=this,l=o.length!==void 0,s=l?o:[o],c=l?o[0]:o;if(Mt(r)){var d=r.indexOf(".")!==-1,f=d&&yQe(r);if(i.allowGetting&&t===void 0){var p;return c&&(i.beforeGet(c),f&&c._private[i.field][r]===void 0?p=nQe(c._private[i.field],f):p=c._private[i.field][r]),p}else if(i.allowSetting&&t!==void 0){var h=!i.immutableKeys[r];if(h){var g=Dwe({},r,t);i.beforeSet(o,g);for(var v=0,m=s.length;v<m;v++){var T=s[v];i.canSet(T)&&(f&&c._private[i.field][r]===void 0?dQe(T._private[i.field],f,t):T._private[i.field][r]=t)}i.updateStyle&&o.updateStyle(),i.onSet(o),i.settingTriggersEvent&&o[i.triggerFnName](i.settingEvent)}}}else if(i.allowSetting&&_r(r)){var w=r,E,S,N=Object.keys(w);i.beforeSet(o,w);for(var j=0;j<N.length;j++){E=N[j],S=w[E];var q=!i.immutableKeys[E];if(q)for(var O=0;O<s.length;O++){var I=s[O];i.canSet(I)&&(I._private[i.field][E]=S)}}i.updateStyle&&o.updateStyle(),i.onSet(o),i.settingTriggersEvent&&o[i.triggerFnName](i.settingEvent)}else if(i.allowBinding&&On(r)){var A=r;o.on(i.bindingEvent,A)}else if(i.allowGetting&&r===void 0){var P;return c&&(i.beforeGet(c),P=c._private[i.field]),P}return o}},removeData:function(e){var u={field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!1,immutableKeys:{}};return e=qt({},u,e),function(r){var t=e,i=this,o=i.length!==void 0,l=o?i:[i];if(Mt(r)){for(var s=r.split(/\s+/),c=s.length,d=0;d<c;d++){var f=s[d];if(!dl(f)){var p=!t.immutableKeys[f];if(p)for(var h=0,g=l.length;h<g;h++)l[h]._private[t.field][f]=void 0}}t.triggerEvent&&i[t.triggerFnName](t.event)}else if(r===void 0){for(var v=0,m=l.length;v<m;v++)for(var T=l[v]._private[t.field],w=Object.keys(T),E=0;E<w.length;E++){var S=w[E],N=!t.immutableKeys[S];N&&(T[S]=void 0)}t.triggerEvent&&i[t.triggerFnName](t.event)}return i}}},bQe={eventAliasesOn:function(e){var u=e;u.addListener=u.listen=u.bind=u.on,u.unlisten=u.unbind=u.off=u.removeListener,u.trigger=u.emit,u.pon=u.promiseOn=function(n,r){var t=this,i=Array.prototype.slice.call(arguments,0);return new R1(function(o,l){var s=function(p){t.off.apply(t,d),o(p)},c=i.concat([s]),d=c.concat([]);t.on.apply(t,c)})}}},Cr={};[SUe,mQe,bQe].forEach(function(a){qt(Cr,a)});var gQe={animate:Cr.animate(),animation:Cr.animation(),animated:Cr.animated(),clearQueue:Cr.clearQueue(),delay:Cr.delay(),delayAnimation:Cr.delayAnimation(),stop:Cr.stop()},lF={classes:function(e){var u=this;if(e===void 0){var n=[];return u[0]._private.classes.forEach(function(h){return n.push(h)}),n}else Wr(e)||(e=(e||"").match(/\S+/g)||[]);for(var r=[],t=new x1(e),i=0;i<u.length;i++){for(var o=u[i],l=o._private,s=l.classes,c=!1,d=0;d<e.length;d++){var f=e[d],p=s.has(f);if(!p){c=!0;break}}c||(c=s.size!==e.length),c&&(l.classes=t,r.push(o))}return r.length>0&&this.spawn(r).updateStyle().emit("class"),u},addClass:function(e){return this.toggleClass(e,!0)},hasClass:function(e){var u=this[0];return u!=null&&u._private.classes.has(e)},toggleClass:function(e,u){Wr(e)||(e=e.match(/\S+/g)||[]);for(var n=this,r=u===void 0,t=[],i=0,o=n.length;i<o;i++)for(var l=n[i],s=l._private.classes,c=!1,d=0;d<e.length;d++){var f=e[d],p=s.has(f),h=!1;u||r&&!p?(s.add(f),h=!0):(!u||r&&p)&&(s.delete(f),h=!0),!c&&h&&(t.push(l),c=!0)}return t.length>0&&this.spawn(t).updateStyle().emit("class"),n},removeClass:function(e){return this.toggleClass(e,!1)},flashClass:function(e,u){var n=this;if(u==null)u=250;else if(u===0)return n;return n.addClass(e),setTimeout(function(){n.removeClass(e)},u),n}};lF.className=lF.classNames=lF.classes;var vr={metaChar:"[\\!\\\"\\#\\$\\%\\&\\'\\(\\)\\*\\+\\,\\.\\/\\:\\;\\<\\=\\>\\?\\@\\[\\]\\^\\`\\{\\|\\}\\~]",comparatorOp:"=|\\!=|>|>=|<|<=|\\$=|\\^=|\\*=",boolOp:"\\?|\\!|\\^",string:`"(?:\\\\"|[^"])*"|'(?:\\\\'|[^'])*'`,number:ea,meta:"degree|indegree|outdegree",separator:"\\s*,\\s*",descendant:"\\s+",child:"\\s+>\\s+",subject:"\\$",group:"node|edge|\\*",directedEdge:"\\s+->\\s+",undirectedEdge:"\\s+<->\\s+"};vr.variable="(?:[\\w-.]|(?:\\\\"+vr.metaChar+"))+";vr.className="(?:[\\w-]|(?:\\\\"+vr.metaChar+"))+";vr.value=vr.string+"|"+vr.number;vr.id=vr.variable;(function(){var a,e,u;for(a=vr.comparatorOp.split("|"),u=0;u<a.length;u++)e=a[u],vr.comparatorOp+="|@"+e;for(a=vr.comparatorOp.split("|"),u=0;u<a.length;u++)e=a[u],!(e.indexOf("!")>=0)&&e!=="="&&(vr.comparatorOp+="|\\!"+e)})();var Gr=function(){return{checks:[]}},Rt={GROUP:0,COLLECTION:1,FILTER:2,DATA_COMPARE:3,DATA_EXIST:4,DATA_BOOL:5,META_COMPARE:6,STATE:7,ID:8,CLASS:9,UNDIRECTED_EDGE:10,DIRECTED_EDGE:11,NODE_SOURCE:12,NODE_TARGET:13,NODE_NEIGHBOR:14,CHILD:15,DESCENDANT:16,PARENT:17,ANCESTOR:18,COMPOUND_SPLIT:19,TRUE:20},E7=[{selector:":selected",matches:function(e){return e.selected()}},{selector:":unselected",matches:function(e){return!e.selected()}},{selector:":selectable",matches:function(e){return e.selectable()}},{selector:":unselectable",matches:function(e){return!e.selectable()}},{selector:":locked",matches:function(e){return e.locked()}},{selector:":unlocked",matches:function(e){return!e.locked()}},{selector:":visible",matches:function(e){return e.visible()}},{selector:":hidden",matches:function(e){return!e.visible()}},{selector:":transparent",matches:function(e){return e.transparent()}},{selector:":grabbed",matches:function(e){return e.grabbed()}},{selector:":free",matches:function(e){return!e.grabbed()}},{selector:":removed",matches:function(e){return e.removed()}},{selector:":inside",matches:function(e){return!e.removed()}},{selector:":grabbable",matches:function(e){return e.grabbable()}},{selector:":ungrabbable",matches:function(e){return!e.grabbable()}},{selector:":animated",matches:function(e){return e.animated()}},{selector:":unanimated",matches:function(e){return!e.animated()}},{selector:":parent",matches:function(e){return e.isParent()}},{selector:":childless",matches:function(e){return e.isChildless()}},{selector:":child",matches:function(e){return e.isChild()}},{selector:":orphan",matches:function(e){return e.isOrphan()}},{selector:":nonorphan",matches:function(e){return e.isChild()}},{selector:":compound",matches:function(e){return e.isNode()?e.isParent():e.source().isParent()||e.target().isParent()}},{selector:":loop",matches:function(e){return e.isLoop()}},{selector:":simple",matches:function(e){return e.isSimple()}},{selector:":active",matches:function(e){return e.active()}},{selector:":inactive",matches:function(e){return!e.active()}},{selector:":backgrounding",matches:function(e){return e.backgrounding()}},{selector:":nonbackgrounding",matches:function(e){return!e.backgrounding()}}].sort(function(a,e){return mqe(a.selector,e.selector)}),vQe=(function(){for(var a={},e,u=0;u<E7.length;u++)e=E7[u],a[e.selector]=e.matches;return a})(),_Qe=function(e,u){return vQe[e](u)},TQe="("+E7.map(function(a){return a.selector}).join("|")+")",Sg=function(e){return e.replace(new RegExp("\\\\("+vr.metaChar+")","g"),function(u,n){return n})},$c=function(e,u,n){e[e.length-1]=n},A7=[{name:"group",query:!0,regex:"("+vr.group+")",populate:function(e,u,n){var r=zn(n,1),t=r[0];u.checks.push({type:Rt.GROUP,value:t==="*"?t:t+"s"})}},{name:"state",query:!0,regex:TQe,populate:function(e,u,n){var r=zn(n,1),t=r[0];u.checks.push({type:Rt.STATE,value:t})}},{name:"id",query:!0,regex:"\\#("+vr.id+")",populate:function(e,u,n){var r=zn(n,1),t=r[0];u.checks.push({type:Rt.ID,value:Sg(t)})}},{name:"className",query:!0,regex:"\\.("+vr.className+")",populate:function(e,u,n){var r=zn(n,1),t=r[0];u.checks.push({type:Rt.CLASS,value:Sg(t)})}},{name:"dataExists",query:!0,regex:"\\[\\s*("+vr.variable+")\\s*\\]",populate:function(e,u,n){var r=zn(n,1),t=r[0];u.checks.push({type:Rt.DATA_EXIST,field:Sg(t)})}},{name:"dataCompare",query:!0,regex:"\\[\\s*("+vr.variable+")\\s*("+vr.comparatorOp+")\\s*("+vr.value+")\\s*\\]",populate:function(e,u,n){var r=zn(n,3),t=r[0],i=r[1],o=r[2],l=new RegExp("^"+vr.string+"$").exec(o)!=null;l?o=o.substring(1,o.length-1):o=parseFloat(o),u.checks.push({type:Rt.DATA_COMPARE,field:Sg(t),operator:i,value:o})}},{name:"dataBool",query:!0,regex:"\\[\\s*("+vr.boolOp+")\\s*("+vr.variable+")\\s*\\]",populate:function(e,u,n){var r=zn(n,2),t=r[0],i=r[1];u.checks.push({type:Rt.DATA_BOOL,field:Sg(i),operator:t})}},{name:"metaCompare",query:!0,regex:"\\[\\[\\s*("+vr.meta+")\\s*("+vr.comparatorOp+")\\s*("+vr.number+")\\s*\\]\\]",populate:function(e,u,n){var r=zn(n,3),t=r[0],i=r[1],o=r[2];u.checks.push({type:Rt.META_COMPARE,field:Sg(t),operator:i,value:parseFloat(o)})}},{name:"nextQuery",separator:!0,regex:vr.separator,populate:function(e,u){var n=e.currentSubject,r=e.edgeCount,t=e.compoundCount,i=e[e.length-1];n!=null&&(i.subject=n,e.currentSubject=null),i.edgeCount=r,i.compoundCount=t,e.edgeCount=0,e.compoundCount=0;var o=e[e.length++]=Gr();return o}},{name:"directedEdge",separator:!0,regex:vr.directedEdge,populate:function(e,u){if(e.currentSubject==null){var n=Gr(),r=u,t=Gr();return n.checks.push({type:Rt.DIRECTED_EDGE,source:r,target:t}),$c(e,u,n),e.edgeCount++,t}else{var i=Gr(),o=u,l=Gr();return i.checks.push({type:Rt.NODE_SOURCE,source:o,target:l}),$c(e,u,i),e.edgeCount++,l}}},{name:"undirectedEdge",separator:!0,regex:vr.undirectedEdge,populate:function(e,u){if(e.currentSubject==null){var n=Gr(),r=u,t=Gr();return n.checks.push({type:Rt.UNDIRECTED_EDGE,nodes:[r,t]}),$c(e,u,n),e.edgeCount++,t}else{var i=Gr(),o=u,l=Gr();return i.checks.push({type:Rt.NODE_NEIGHBOR,node:o,neighbor:l}),$c(e,u,i),l}}},{name:"child",separator:!0,regex:vr.child,populate:function(e,u){if(e.currentSubject==null){var n=Gr(),r=Gr(),t=e[e.length-1];return n.checks.push({type:Rt.CHILD,parent:t,child:r}),$c(e,u,n),e.compoundCount++,r}else if(e.currentSubject===u){var i=Gr(),o=e[e.length-1],l=Gr(),s=Gr(),c=Gr(),d=Gr();return i.checks.push({type:Rt.COMPOUND_SPLIT,left:o,right:l,subject:s}),s.checks=u.checks,u.checks=[{type:Rt.TRUE}],d.checks.push({type:Rt.TRUE}),l.checks.push({type:Rt.PARENT,parent:d,child:c}),$c(e,o,i),e.currentSubject=s,e.compoundCount++,c}else{var f=Gr(),p=Gr(),h=[{type:Rt.PARENT,parent:f,child:p}];return f.checks=u.checks,u.checks=h,e.compoundCount++,p}}},{name:"descendant",separator:!0,regex:vr.descendant,populate:function(e,u){if(e.currentSubject==null){var n=Gr(),r=Gr(),t=e[e.length-1];return n.checks.push({type:Rt.DESCENDANT,ancestor:t,descendant:r}),$c(e,u,n),e.compoundCount++,r}else if(e.currentSubject===u){var i=Gr(),o=e[e.length-1],l=Gr(),s=Gr(),c=Gr(),d=Gr();return i.checks.push({type:Rt.COMPOUND_SPLIT,left:o,right:l,subject:s}),s.checks=u.checks,u.checks=[{type:Rt.TRUE}],d.checks.push({type:Rt.TRUE}),l.checks.push({type:Rt.ANCESTOR,ancestor:d,descendant:c}),$c(e,o,i),e.currentSubject=s,e.compoundCount++,c}else{var f=Gr(),p=Gr(),h=[{type:Rt.ANCESTOR,ancestor:f,descendant:p}];return f.checks=u.checks,u.checks=h,e.compoundCount++,p}}},{name:"subject",modifier:!0,regex:vr.subject,populate:function(e,u){if(e.currentSubject!=null&&e.currentSubject!==u)return Lr("Redefinition of subject in selector `"+e.toString()+"`"),!1;e.currentSubject=u;var n=e[e.length-1],r=n.checks[0],t=r==null?null:r.type;t===Rt.DIRECTED_EDGE?r.type=Rt.NODE_TARGET:t===Rt.UNDIRECTED_EDGE&&(r.type=Rt.NODE_NEIGHBOR,r.node=r.nodes[1],r.neighbor=r.nodes[0],r.nodes=null)}}];A7.forEach(function(a){return a.regexObj=new RegExp("^"+a.regex)});var wQe=function(e){for(var u,n,r,t=0;t<A7.length;t++){var i=A7[t],o=i.name,l=e.match(i.regexObj);if(l!=null){n=l,u=i,r=o;var s=l[0];e=e.substring(s.length);break}}return{expr:u,match:n,name:r,remaining:e}},SQe=function(e){var u=e.match(/^\s+/);if(u){var n=u[0];e=e.substring(n.length)}return e},EQe=function(e){var u=this,n=u.inputText=e,r=u[0]=Gr();for(u.length=1,n=SQe(n);;){var t=wQe(n);if(t.expr==null)return Lr("The selector `"+e+"`is invalid"),!1;var i=t.match.slice(1),o=t.expr.populate(u,r,i);if(o===!1)return!1;if(o!=null&&(r=o),n=t.remaining,n.match(/^\s*$/))break}var l=u[u.length-1];u.currentSubject!=null&&(l.subject=u.currentSubject),l.edgeCount=u.edgeCount,l.compoundCount=u.compoundCount;for(var s=0;s<u.length;s++){var c=u[s];if(c.compoundCount>0&&c.edgeCount>0)return Lr("The selector `"+e+"` is invalid because it uses both a compound selector and an edge selector"),!1;if(c.edgeCount>1)return Lr("The selector `"+e+"` is invalid because it uses multiple edge selectors"),!1;c.edgeCount===1&&Lr("The selector `"+e+"` is deprecated.  Edge selectors do not take effect on changes to source and target nodes after an edge is added, for performance reasons.  Use a class or data selector on edges instead, updating the class or data of an edge when your app detects a change in source or target nodes.")}return!0},AQe=function(){if(this.toStringCache!=null)return this.toStringCache;for(var e=function(c){return c??""},u=function(c){return Mt(c)?'"'+c+'"':e(c)},n=function(c){return" "+c+" "},r=function(c,d){var f=c.type,p=c.value;switch(f){case Rt.GROUP:{var h=e(p);return h.substring(0,h.length-1)}case Rt.DATA_COMPARE:{var g=c.field,v=c.operator;return"["+g+n(e(v))+u(p)+"]"}case Rt.DATA_BOOL:{var m=c.operator,T=c.field;return"["+e(m)+T+"]"}case Rt.DATA_EXIST:{var w=c.field;return"["+w+"]"}case Rt.META_COMPARE:{var E=c.operator,S=c.field;return"[["+S+n(e(E))+u(p)+"]]"}case Rt.STATE:return p;case Rt.ID:return"#"+p;case Rt.CLASS:return"."+p;case Rt.PARENT:case Rt.CHILD:return t(c.parent,d)+n(">")+t(c.child,d);case Rt.ANCESTOR:case Rt.DESCENDANT:return t(c.ancestor,d)+" "+t(c.descendant,d);case Rt.COMPOUND_SPLIT:{var N=t(c.left,d),j=t(c.subject,d),q=t(c.right,d);return N+(N.length>0?" ":"")+j+q}case Rt.TRUE:return""}},t=function(c,d){return c.checks.reduce(function(f,p,h){return f+(d===c&&h===0?"$":"")+r(p,d)},"")},i="",o=0;o<this.length;o++){var l=this[o];i+=t(l,l.subject),this.length>1&&o<this.length-1&&(i+=", ")}return this.toStringCache=i,i},OQe={parse:EQe,toString:AQe},bSe=function(e,u,n){var r,t=Mt(e),i=At(e),o=Mt(n),l,s,c=!1,d=!1,f=!1;switch(u.indexOf("!")>=0&&(u=u.replace("!",""),d=!0),u.indexOf("@")>=0&&(u=u.replace("@",""),c=!0),(t||o||c)&&(l=!t&&!i?"":""+e,s=""+n),c&&(e=l=l.toLowerCase(),n=s=s.toLowerCase()),u){case"*=":r=l.indexOf(s)>=0;break;case"$=":r=l.indexOf(s,l.length-s.length)>=0;break;case"^=":r=l.indexOf(s)===0;break;case"=":r=e===n;break;case">":f=!0,r=e>n;break;case">=":f=!0,r=e>=n;break;case"<":f=!0,r=e<n;break;case"<=":f=!0,r=e<=n;break;default:r=!1;break}return d&&(e!=null||!f)&&(r=!r),r},xQe=function(e,u){switch(u){case"?":return!!e;case"!":return!e;case"^":return e===void 0}},RQe=function(e){return e!==void 0},JH=function(e,u){return e.data(u)},NQe=function(e,u){return e[u]()},Fn=[],ln=function(e,u){return e.checks.every(function(n){return Fn[n.type](n,u)})};Fn[Rt.GROUP]=function(a,e){var u=a.value;return u==="*"||u===e.group()};Fn[Rt.STATE]=function(a,e){var u=a.value;return _Qe(u,e)};Fn[Rt.ID]=function(a,e){var u=a.value;return e.id()===u};Fn[Rt.CLASS]=function(a,e){var u=a.value;return e.hasClass(u)};Fn[Rt.META_COMPARE]=function(a,e){var u=a.field,n=a.operator,r=a.value;return bSe(NQe(e,u),n,r)};Fn[Rt.DATA_COMPARE]=function(a,e){var u=a.field,n=a.operator,r=a.value;return bSe(JH(e,u),n,r)};Fn[Rt.DATA_BOOL]=function(a,e){var u=a.field,n=a.operator;return xQe(JH(e,u),n)};Fn[Rt.DATA_EXIST]=function(a,e){var u=a.field;return a.operator,RQe(JH(e,u))};Fn[Rt.UNDIRECTED_EDGE]=function(a,e){var u=a.nodes[0],n=a.nodes[1],r=e.source(),t=e.target();return ln(u,r)&&ln(n,t)||ln(n,r)&&ln(u,t)};Fn[Rt.NODE_NEIGHBOR]=function(a,e){return ln(a.node,e)&&e.neighborhood().some(function(u){return u.isNode()&&ln(a.neighbor,u)})};Fn[Rt.DIRECTED_EDGE]=function(a,e){return ln(a.source,e.source())&&ln(a.target,e.target())};Fn[Rt.NODE_SOURCE]=function(a,e){return ln(a.source,e)&&e.outgoers().some(function(u){return u.isNode()&&ln(a.target,u)})};Fn[Rt.NODE_TARGET]=function(a,e){return ln(a.target,e)&&e.incomers().some(function(u){return u.isNode()&&ln(a.source,u)})};Fn[Rt.CHILD]=function(a,e){return ln(a.child,e)&&ln(a.parent,e.parent())};Fn[Rt.PARENT]=function(a,e){return ln(a.parent,e)&&e.children().some(function(u){return ln(a.child,u)})};Fn[Rt.DESCENDANT]=function(a,e){return ln(a.descendant,e)&&e.ancestors().some(function(u){return ln(a.ancestor,u)})};Fn[Rt.ANCESTOR]=function(a,e){return ln(a.ancestor,e)&&e.descendants().some(function(u){return ln(a.descendant,u)})};Fn[Rt.COMPOUND_SPLIT]=function(a,e){return ln(a.subject,e)&&ln(a.left,e)&&ln(a.right,e)};Fn[Rt.TRUE]=function(){return!0};Fn[Rt.COLLECTION]=function(a,e){var u=a.value;return u.has(e)};Fn[Rt.FILTER]=function(a,e){var u=a.value;return u(e)};var IQe=function(e){var u=this;if(u.length===1&&u[0].checks.length===1&&u[0].checks[0].type===Rt.ID)return e.getElementById(u[0].checks[0].value).collection();var n=function(t){for(var i=0;i<u.length;i++){var o=u[i];if(ln(o,t))return!0}return!1};return u.text()==null&&(n=function(){return!0}),e.filter(n)},DQe=function(e){for(var u=this,n=0;n<u.length;n++){var r=u[n];if(ln(r,e))return!0}return!1},FQe={matches:DQe,filter:IQe},hl=function(e){this.inputText=e,this.currentSubject=null,this.compoundCount=0,this.edgeCount=0,this.length=0,e==null||Mt(e)&&e.match(/^\s*$/)||(Bi(e)?this.addQuery({checks:[{type:Rt.COLLECTION,value:e.collection()}]}):On(e)?this.addQuery({checks:[{type:Rt.FILTER,value:e}]}):Mt(e)?this.parse(e)||(this.invalid=!0):_n("A selector must be created from a string; found "))},yl=hl.prototype;[OQe,FQe].forEach(function(a){return qt(yl,a)});yl.text=function(){return this.inputText};yl.size=function(){return this.length};yl.eq=function(a){return this[a]};yl.sameText=function(a){return!this.invalid&&!a.invalid&&this.text()===a.text()};yl.addQuery=function(a){this[this.length++]=a};yl.selector=yl.toString;var ul={allAre:function(e){var u=new hl(e);return this.every(function(n){return u.matches(n)})},is:function(e){var u=new hl(e);return this.some(function(n){return u.matches(n)})},some:function(e,u){for(var n=0;n<this.length;n++){var r=u?e.apply(u,[this[n],n,this]):e(this[n],n,this);if(r)return!0}return!1},every:function(e,u){for(var n=0;n<this.length;n++){var r=u?e.apply(u,[this[n],n,this]):e(this[n],n,this);if(!r)return!1}return!0},same:function(e){if(this===e)return!0;e=this.cy().collection(e);var u=this.length,n=e.length;return u!==n?!1:u===1?this[0]===e[0]:this.every(function(r){return e.hasElementWithId(r.id())})},anySame:function(e){return e=this.cy().collection(e),this.some(function(u){return e.hasElementWithId(u.id())})},allAreNeighbors:function(e){e=this.cy().collection(e);var u=this.neighborhood();return e.every(function(n){return u.hasElementWithId(n.id())})},contains:function(e){e=this.cy().collection(e);var u=this;return e.every(function(n){return u.hasElementWithId(n.id())})}};ul.allAreNeighbours=ul.allAreNeighbors;ul.has=ul.contains;ul.equal=ul.equals=ul.same;var Tu=function(e,u){return function(r,t,i,o){var l=r,s=this,c;if(l==null?c="":Bi(l)&&l.length===1&&(c=l.id()),s.length===1&&c){var d=s[0]._private,f=d.traversalCache=d.traversalCache||{},p=f[u]=f[u]||[],h=cb(c),g=p[h];return g||(p[h]=e.call(s,r,t,i,o))}else return e.call(s,r,t,i,o)}},d1={parent:function(e){var u=[];if(this.length===1){var n=this[0]._private.parent;if(n)return n}for(var r=0;r<this.length;r++){var t=this[r],i=t._private.parent;i&&u.push(i)}return this.spawn(u,!0).filter(e)},parents:function(e){for(var u=[],n=this.parent();n.nonempty();){for(var r=0;r<n.length;r++){var t=n[r];u.push(t)}n=n.parent()}return this.spawn(u,!0).filter(e)},commonAncestors:function(e){for(var u,n=0;n<this.length;n++){var r=this[n],t=r.parents();u=u||t,u=u.intersect(t)}return u.filter(e)},orphans:function(e){return this.stdFilter(function(u){return u.isOrphan()}).filter(e)},nonorphans:function(e){return this.stdFilter(function(u){return u.isChild()}).filter(e)},children:Tu(function(a){for(var e=[],u=0;u<this.length;u++)for(var n=this[u],r=n._private.children,t=0;t<r.length;t++)e.push(r[t]);return this.spawn(e,!0).filter(a)},"children"),siblings:function(e){return this.parent().children().not(this).filter(e)},isParent:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length!==0},isChildless:function(){var e=this[0];if(e)return e.isNode()&&e._private.children.length===0},isChild:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent!=null},isOrphan:function(){var e=this[0];if(e)return e.isNode()&&e._private.parent==null},descendants:function(e){var u=[];function n(r){for(var t=0;t<r.length;t++){var i=r[t];u.push(i),i.children().nonempty()&&n(i.children())}}return n(this.children()),this.spawn(u,!0).filter(e)}};function WH(a,e,u,n){for(var r=[],t=new x1,i=a.cy(),o=i.hasCompoundNodes(),l=0;l<a.length;l++){var s=a[l];u?r.push(s):o&&n(r,t,s)}for(;r.length>0;){var c=r.shift();e(c),t.add(c.id()),o&&n(r,t,c)}return a}function gSe(a,e,u){if(u.isParent())for(var n=u._private.children,r=0;r<n.length;r++){var t=n[r];e.has(t.id())||a.push(t)}}d1.forEachDown=function(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return WH(this,a,e,gSe)};function vSe(a,e,u){if(u.isChild()){var n=u._private.parent;e.has(n.id())||a.push(n)}}d1.forEachUp=function(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return WH(this,a,e,vSe)};function PQe(a,e,u){vSe(a,e,u),gSe(a,e,u)}d1.forEachUpAndDown=function(a){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return WH(this,a,e,PQe)};d1.ancestors=d1.parents;var w4,_Se;w4=_Se={data:Cr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),removeData:Cr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,immutableKeys:{id:!0,source:!0,target:!0,parent:!0},updateStyle:!0}),scratch:Cr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Cr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),rscratch:Cr.data({field:"rscratch",allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!0}),removeRscratch:Cr.removeData({field:"rscratch",triggerEvent:!1}),id:function(){var e=this[0];if(e)return e._private.data.id}};w4.attr=w4.data;w4.removeAttr=w4.removeData;var jQe=_Se,kP={};function FL(a){return function(e){var u=this;if(e===void 0&&(e=!0),u.length!==0)if(u.isNode()&&!u.removed()){for(var n=0,r=u[0],t=r._private.edges,i=0;i<t.length;i++){var o=t[i];!e&&o.isLoop()||(n+=a(r,o))}return n}else return}}qt(kP,{degree:FL(function(a,e){return e.source().same(e.target())?2:1}),indegree:FL(function(a,e){return e.target().same(a)?1:0}),outdegree:FL(function(a,e){return e.source().same(a)?1:0})});function Eg(a,e){return function(u){for(var n,r=this.nodes(),t=0;t<r.length;t++){var i=r[t],o=i[a](u);o!==void 0&&(n===void 0||e(o,n))&&(n=o)}return n}}qt(kP,{minDegree:Eg("degree",function(a,e){return a<e}),maxDegree:Eg("degree",function(a,e){return a>e}),minIndegree:Eg("indegree",function(a,e){return a<e}),maxIndegree:Eg("indegree",function(a,e){return a>e}),minOutdegree:Eg("outdegree",function(a,e){return a<e}),maxOutdegree:Eg("outdegree",function(a,e){return a>e})});qt(kP,{totalDegree:function(e){for(var u=0,n=this.nodes(),r=0;r<n.length;r++)u+=n[r].degree(e);return u}});var lo,TSe,wSe=function(e,u,n){for(var r=0;r<e.length;r++){var t=e[r];if(!t.locked()){var i=t._private.position,o={x:u.x!=null?u.x-i.x:0,y:u.y!=null?u.y-i.y:0};t.isParent()&&!(o.x===0&&o.y===0)&&t.children().shift(o,n),t.dirtyBoundingBoxCache()}}},_1e={field:"position",bindingEvent:"position",allowBinding:!0,allowSetting:!0,settingEvent:"position",settingTriggersEvent:!0,triggerFnName:"emitAndNotify",allowGetting:!0,validKeys:["x","y"],beforeGet:function(e){e.updateCompoundBounds()},beforeSet:function(e,u){wSe(e,u,!1)},onSet:function(e){e.dirtyCompoundBoundsCache()},canSet:function(e){return!e.locked()}};lo=TSe={position:Cr.data(_1e),silentPosition:Cr.data(qt({},_1e,{allowBinding:!1,allowSetting:!0,settingTriggersEvent:!1,allowGetting:!1,beforeSet:function(e,u){wSe(e,u,!0)},onSet:function(e){e.dirtyCompoundBoundsCache()}})),positions:function(e,u){if(_r(e))u?this.silentPosition(e):this.position(e);else if(On(e)){var n=e,r=this.cy();r.startBatch();for(var t=0;t<this.length;t++){var i=this[t],o=void 0;(o=n(i,t))&&(u?i.silentPosition(o):i.position(o))}r.endBatch()}return this},silentPositions:function(e){return this.positions(e,!0)},shift:function(e,u,n){var r;if(_r(e)?(r={x:At(e.x)?e.x:0,y:At(e.y)?e.y:0},n=u):Mt(e)&&At(u)&&(r={x:0,y:0},r[e]=u),r!=null){var t=this.cy();t.startBatch();for(var i=0;i<this.length;i++){var o=this[i];if(!(t.hasCompoundNodes()&&o.isChild()&&o.ancestors().anySame(this))){var l=o.position(),s={x:l.x+r.x,y:l.y+r.y};n?o.silentPosition(s):o.position(s)}}t.endBatch()}return this},silentShift:function(e,u){return _r(e)?this.shift(e,!0):Mt(e)&&At(u)&&this.shift(e,u,!0),this},renderedPosition:function(e,u){var n=this[0],r=this.cy(),t=r.zoom(),i=r.pan(),o=_r(e)?e:void 0,l=o!==void 0||u!==void 0&&Mt(e);if(n&&n.isNode())if(l)for(var s=0;s<this.length;s++){var c=this[s];u!==void 0?c.position(e,(u-i[e])/t):o!==void 0&&c.position(Jwe(o,t,i))}else{var d=n.position();return o=qP(d,t,i),e===void 0?o:o[e]}else if(!l)return;return this},relativePosition:function(e,u){var n=this[0],r=this.cy(),t=_r(e)?e:void 0,i=t!==void 0||u!==void 0&&Mt(e),o=r.hasCompoundNodes();if(n&&n.isNode())if(i)for(var l=0;l<this.length;l++){var s=this[l],c=o?s.parent():null,d=c&&c.length>0,f=d;d&&(c=c[0]);var p=f?c.position():{x:0,y:0};u!==void 0?s.position(e,u+p[e]):t!==void 0&&s.position({x:t.x+p.x,y:t.y+p.y})}else{var h=n.position(),g=o?n.parent():null,v=g&&g.length>0,m=v;v&&(g=g[0]);var T=m?g.position():{x:0,y:0};return t={x:h.x-T.x,y:h.y-T.y},e===void 0?t:t[e]}else if(!i)return;return this}};lo.modelPosition=lo.point=lo.position;lo.modelPositions=lo.points=lo.positions;lo.renderedPoint=lo.renderedPosition;lo.relativePoint=lo.relativePosition;var MQe=TSe,zg,xl;zg=xl={};xl.renderedBoundingBox=function(a){var e=this.boundingBox(a),u=this.cy(),n=u.zoom(),r=u.pan(),t=e.x1*n+r.x,i=e.x2*n+r.x,o=e.y1*n+r.y,l=e.y2*n+r.y;return{x1:t,x2:i,y1:o,y2:l,w:i-t,h:l-o}};xl.dirtyCompoundBoundsCache=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();return!e.styleEnabled()||!e.hasCompoundNodes()?this:(this.forEachUp(function(u){if(u.isParent()){var n=u._private;n.compoundBoundsClean=!1,n.bbCache=null,a||u.emitAndNotify("bounds")}}),this)};xl.updateCompoundBounds=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,e=this.cy();if(!e.styleEnabled()||!e.hasCompoundNodes())return this;if(!a&&e.batching())return this;function u(i){if(!i.isParent())return;var o=i._private,l=i.children(),s=i.pstyle("compound-sizing-wrt-labels").value==="include",c={width:{val:i.pstyle("min-width").pfValue,left:i.pstyle("min-width-bias-left"),right:i.pstyle("min-width-bias-right")},height:{val:i.pstyle("min-height").pfValue,top:i.pstyle("min-height-bias-top"),bottom:i.pstyle("min-height-bias-bottom")}},d=l.boundingBox({includeLabels:s,includeOverlays:!1,useCache:!1}),f=o.position;(d.w===0||d.h===0)&&(d={w:i.pstyle("width").pfValue,h:i.pstyle("height").pfValue},d.x1=f.x-d.w/2,d.x2=f.x+d.w/2,d.y1=f.y-d.h/2,d.y2=f.y+d.h/2);function p(O,I,A){var P=0,C=0,B=I+A;return O>0&&B>0&&(P=I/B*O,C=A/B*O),{biasDiff:P,biasComplementDiff:C}}function h(O,I,A,P){if(A.units==="%")switch(P){case"width":return O>0?A.pfValue*O:0;case"height":return I>0?A.pfValue*I:0;case"average":return O>0&&I>0?A.pfValue*(O+I)/2:0;case"min":return O>0&&I>0?O>I?A.pfValue*I:A.pfValue*O:0;case"max":return O>0&&I>0?O>I?A.pfValue*O:A.pfValue*I:0;default:return 0}else return A.units==="px"?A.pfValue:0}var g=c.width.left.value;c.width.left.units==="px"&&c.width.val>0&&(g=g*100/c.width.val);var v=c.width.right.value;c.width.right.units==="px"&&c.width.val>0&&(v=v*100/c.width.val);var m=c.height.top.value;c.height.top.units==="px"&&c.height.val>0&&(m=m*100/c.height.val);var T=c.height.bottom.value;c.height.bottom.units==="px"&&c.height.val>0&&(T=T*100/c.height.val);var w=p(c.width.val-d.w,g,v),E=w.biasDiff,S=w.biasComplementDiff,N=p(c.height.val-d.h,m,T),j=N.biasDiff,q=N.biasComplementDiff;o.autoPadding=h(d.w,d.h,i.pstyle("padding"),i.pstyle("padding-relative-to").value),o.autoWidth=Math.max(d.w,c.width.val),f.x=(-E+d.x1+d.x2+S)/2,o.autoHeight=Math.max(d.h,c.height.val),f.y=(-j+d.y1+d.y2+q)/2}for(var n=0;n<this.length;n++){var r=this[n],t=r._private;(!t.compoundBoundsClean||a)&&(u(r),e.batching()||(t.compoundBoundsClean=!0))}return this};var gu=function(e){return e===1/0||e===-1/0?0:e},so=function(e,u,n,r,t){r-u===0||t-n===0||u==null||n==null||r==null||t==null||(e.x1=u<e.x1?u:e.x1,e.x2=r>e.x2?r:e.x2,e.y1=n<e.y1?n:e.y1,e.y2=t>e.y2?t:e.y2,e.w=e.x2-e.x1,e.h=e.y2-e.y1)},el=function(e,u){return u==null?e:so(e,u.x1,u.y1,u.x2,u.y2)},x6=function(e,u,n){return pi(e,u,n)},LD=function(e,u,n){if(!u.cy().headless()){var r=u._private,t=r.rstyle,i=t.arrowWidth/2,o=u.pstyle(n+"-arrow-shape").value,l,s;if(o!=="none"){n==="source"?(l=t.srcX,s=t.srcY):n==="target"?(l=t.tgtX,s=t.tgtY):(l=t.midX,s=t.midY);var c=r.arrowBounds=r.arrowBounds||{},d=c[n]=c[n]||{};d.x1=l-i,d.y1=s-i,d.x2=l+i,d.y2=s+i,d.w=d.x2-d.x1,d.h=d.y2-d.y1,sF(d,1),so(e,d.x1,d.y1,d.x2,d.y2)}}},PL=function(e,u,n){if(!u.cy().headless()){var r;n?r=n+"-":r="";var t=u._private,i=t.rstyle,o=u.pstyle(r+"label").strValue;if(o){var l=u.pstyle("text-halign"),s=u.pstyle("text-valign"),c=x6(i,"labelWidth",n),d=x6(i,"labelHeight",n),f=x6(i,"labelX",n),p=x6(i,"labelY",n),h=u.pstyle(r+"text-margin-x").pfValue,g=u.pstyle(r+"text-margin-y").pfValue,v=u.isEdge(),m=u.pstyle(r+"text-rotation"),T=u.pstyle("text-outline-width").pfValue,w=u.pstyle("text-border-width").pfValue,E=w/2,S=u.pstyle("text-background-padding").pfValue,N=2,j=d,q=c,O=q/2,I=j/2,A,P,C,B;if(v)A=f-O,P=f+O,C=p-I,B=p+I;else{switch(l.value){case"left":A=f-q,P=f;break;case"center":A=f-O,P=f+O;break;case"right":A=f,P=f+q;break}switch(s.value){case"top":C=p-j,B=p;break;case"center":C=p-I,B=p+I;break;case"bottom":C=p,B=p+j;break}}var H=h-Math.max(T,E)-S-N,V=h+Math.max(T,E)+S+N,G=g-Math.max(T,E)-S-N,Z=g+Math.max(T,E)+S+N;A+=H,P+=V,C+=G,B+=Z;var ae=n||"main",W=t.labelBounds,te=W[ae]=W[ae]||{};te.x1=A,te.y1=C,te.x2=P,te.y2=B,te.w=P-A,te.h=B-C,te.leftPad=H,te.rightPad=V,te.topPad=G,te.botPad=Z;var se=v&&m.strValue==="autorotate",pe=m.pfValue!=null&&m.pfValue!==0;if(se||pe){var le=se?x6(t.rstyle,"labelAngle",n):m.pfValue,Ee=Math.cos(le),Oe=Math.sin(le),Ie=(A+P)/2,Ae=(C+B)/2;if(!v){switch(l.value){case"left":Ie=P;break;case"right":Ie=A;break}switch(s.value){case"top":Ae=B;break;case"bottom":Ae=C;break}}var be=function($,ue){return $=$-Ie,ue=ue-Ae,{x:$*Ee-ue*Oe+Ie,y:$*Oe+ue*Ee+Ae}},ee=be(A,C),_=be(A,B),F=be(P,C),D=be(P,B);A=Math.min(ee.x,_.x,F.x,D.x),P=Math.max(ee.x,_.x,F.x,D.x),C=Math.min(ee.y,_.y,F.y,D.y),B=Math.max(ee.y,_.y,F.y,D.y)}var L=ae+"Rot",Q=W[L]=W[L]||{};Q.x1=A,Q.y1=C,Q.x2=P,Q.y2=B,Q.w=P-A,Q.h=B-C,so(e,A,C,P,B),so(t.labelBounds.all,A,C,P,B)}return e}},T1e=function(e,u){if(!u.cy().headless()){var n=u.pstyle("outline-opacity").value,r=u.pstyle("outline-width").value,t=u.pstyle("outline-offset").value,i=r+t;SSe(e,u,n,i,"outside",i/2)}},SSe=function(e,u,n,r,t,i){if(!(n===0||r<=0||t==="inside")){var o=u.cy(),l=u.pstyle("shape").value,s=o.renderer().nodeShapes[l],c=u.position(),d=c.x,f=c.y,p=u.width(),h=u.height();if(s.hasMiterBounds){t==="center"&&(r/=2);var g=s.miterBounds(d,f,p,h,r);el(e,g)}else i!=null&&i>0&&cF(e,[i,i,i,i])}},CQe=function(e,u){if(!u.cy().headless()){var n=u.pstyle("border-opacity").value,r=u.pstyle("border-width").pfValue,t=u.pstyle("border-position").value;SSe(e,u,n,r,t)}},LQe=function(e,u){var n=e._private.cy,r=n.styleEnabled(),t=n.headless(),i=ei(),o=e._private,l=e.isNode(),s=e.isEdge(),c,d,f,p,h,g,v=o.rstyle,m=l&&r?e.pstyle("bounds-expansion").pfValue:[0],T=function(Y){return Y.pstyle("display").value!=="none"},w=!r||T(e)&&(!s||T(e.source())&&T(e.target()));if(w){var E=0,S=0;r&&u.includeOverlays&&(E=e.pstyle("overlay-opacity").value,E!==0&&(S=e.pstyle("overlay-padding").value));var N=0,j=0;r&&u.includeUnderlays&&(N=e.pstyle("underlay-opacity").value,N!==0&&(j=e.pstyle("underlay-padding").value));var q=Math.max(S,j),O=0,I=0;if(r&&(O=e.pstyle("width").pfValue,I=O/2),l&&u.includeNodes){var A=e.position();h=A.x,g=A.y;var P=e.outerWidth(),C=P/2,B=e.outerHeight(),H=B/2;c=h-C,d=h+C,f=g-H,p=g+H,so(i,c,f,d,p),r&&T1e(i,e),r&&u.includeOutlines&&!t&&T1e(i,e),r&&CQe(i,e)}else if(s&&u.includeEdges)if(r&&!t){var V=e.pstyle("curve-style").strValue;if(c=Math.min(v.srcX,v.midX,v.tgtX),d=Math.max(v.srcX,v.midX,v.tgtX),f=Math.min(v.srcY,v.midY,v.tgtY),p=Math.max(v.srcY,v.midY,v.tgtY),c-=I,d+=I,f-=I,p+=I,so(i,c,f,d,p),V==="haystack"){var G=v.haystackPts;if(G&&G.length===2){if(c=G[0].x,f=G[0].y,d=G[1].x,p=G[1].y,c>d){var Z=c;c=d,d=Z}if(f>p){var ae=f;f=p,p=ae}so(i,c-I,f-I,d+I,p+I)}}else if(V==="bezier"||V==="unbundled-bezier"||rl(V,"segments")||rl(V,"taxi")){var W;switch(V){case"bezier":case"unbundled-bezier":W=v.bezierPts;break;case"segments":case"taxi":case"round-segments":case"round-taxi":W=v.linePts;break}if(W!=null)for(var te=0;te<W.length;te++){var se=W[te];c=se.x-I,d=se.x+I,f=se.y-I,p=se.y+I,so(i,c,f,d,p)}}}else{var pe=e.source(),le=pe.position(),Ee=e.target(),Oe=Ee.position();if(c=le.x,d=Oe.x,f=le.y,p=Oe.y,c>d){var Ie=c;c=d,d=Ie}if(f>p){var Ae=f;f=p,p=Ae}c-=I,d+=I,f-=I,p+=I,so(i,c,f,d,p)}if(r&&u.includeEdges&&s&&(LD(i,e,"mid-source"),LD(i,e,"mid-target"),LD(i,e,"source"),LD(i,e,"target")),r){var be=e.pstyle("ghost").value==="yes";if(be){var ee=e.pstyle("ghost-offset-x").pfValue,_=e.pstyle("ghost-offset-y").pfValue;so(i,i.x1+ee,i.y1+_,i.x2+ee,i.y2+_)}}var F=o.bodyBounds=o.bodyBounds||{};uge(F,i),cF(F,m),sF(F,1),r&&(c=i.x1,d=i.x2,f=i.y1,p=i.y2,so(i,c-q,f-q,d+q,p+q));var D=o.overlayBounds=o.overlayBounds||{};uge(D,i),cF(D,m),sF(D,1);var L=o.labelBounds=o.labelBounds||{};L.all!=null?gBe(L.all):L.all=ei(),r&&u.includeLabels&&(u.includeMainLabels&&PL(i,e,null),s&&(u.includeSourceLabels&&PL(i,e,"source"),u.includeTargetLabels&&PL(i,e,"target")))}return i.x1=gu(i.x1),i.y1=gu(i.y1),i.x2=gu(i.x2),i.y2=gu(i.y2),i.w=gu(i.x2-i.x1),i.h=gu(i.y2-i.y1),i.w>0&&i.h>0&&w&&(cF(i,m),sF(i,1)),i},ESe=function(e){var u=0,n=function(i){return(i?1:0)<<u++},r=0;return r+=n(e.incudeNodes),r+=n(e.includeEdges),r+=n(e.includeLabels),r+=n(e.includeMainLabels),r+=n(e.includeSourceLabels),r+=n(e.includeTargetLabels),r+=n(e.includeOverlays),r+=n(e.includeOutlines),r},ASe=function(e){var u=function(o){return Math.round(o)};if(e.isEdge()){var n=e.source().position(),r=e.target().position();return ege([u(n.x),u(n.y),u(r.x),u(r.y)])}else{var t=e.position();return ege([u(t.x),u(t.y)])}},w1e=function(e,u){var n=e._private,r,t=e.isEdge(),i=u==null?S1e:ESe(u),o=i===S1e;if(n.bbCache==null?(r=LQe(e,S4),n.bbCache=r,n.bbCachePosKey=ASe(e)):r=n.bbCache,!o){var l=e.isNode();r=ei(),(u.includeNodes&&l||u.includeEdges&&!l)&&(u.includeOverlays?el(r,n.overlayBounds):el(r,n.bodyBounds)),u.includeLabels&&(u.includeMainLabels&&(!t||u.includeSourceLabels&&u.includeTargetLabels)?el(r,n.labelBounds.all):(u.includeMainLabels&&el(r,n.labelBounds.mainRot),u.includeSourceLabels&&el(r,n.labelBounds.sourceRot),u.includeTargetLabels&&el(r,n.labelBounds.targetRot))),r.w=r.x2-r.x1,r.h=r.y2-r.y1}return r},S4={includeNodes:!0,includeEdges:!0,includeLabels:!0,includeMainLabels:!0,includeSourceLabels:!0,includeTargetLabels:!0,includeOverlays:!0,includeUnderlays:!0,includeOutlines:!0,useCache:!0},S1e=ESe(S4),E1e=Ra(S4);xl.boundingBox=function(a){var e,u=a===void 0||a.useCache===void 0||a.useCache===!0,n=c1(function(c){var d=c._private;return d.bbCache==null||d.styleDirty||d.bbCachePosKey!==ASe(c)},function(c){return c.id()});if(u&&this.length===1&&!n(this[0]))a===void 0?a=S4:a=E1e(a),e=w1e(this[0],a);else{e=ei(),a=a||S4;var r=E1e(a),t=this,i=t.cy(),o=i.styleEnabled();this.edges().forEach(n),this.nodes().forEach(n),o&&this.recalculateRenderedStyle(u),this.updateCompoundBounds(!u);for(var l=0;l<t.length;l++){var s=t[l];n(s)&&s.dirtyBoundingBoxCache(),el(e,w1e(s,r))}}return e.x1=gu(e.x1),e.y1=gu(e.y1),e.x2=gu(e.x2),e.y2=gu(e.y2),e.w=gu(e.x2-e.x1),e.h=gu(e.y2-e.y1),e};xl.dirtyBoundingBoxCache=function(){for(var a=0;a<this.length;a++){var e=this[a]._private;e.bbCache=null,e.bbCachePosKey=null,e.bodyBounds=null,e.overlayBounds=null,e.labelBounds.all=null,e.labelBounds.source=null,e.labelBounds.target=null,e.labelBounds.main=null,e.labelBounds.sourceRot=null,e.labelBounds.targetRot=null,e.labelBounds.mainRot=null,e.arrowBounds.source=null,e.arrowBounds.target=null,e.arrowBounds["mid-source"]=null,e.arrowBounds["mid-target"]=null}return this.emitAndNotify("bounds"),this};xl.boundingBoxAt=function(a){var e=this.nodes(),u=this.cy(),n=u.hasCompoundNodes(),r=u.collection();if(n&&(r=e.filter(function(s){return s.isParent()}),e=e.not(r)),_r(a)){var t=a;a=function(){return t}}var i=function(c,d){return c._private.bbAtOldPos=a(c,d)},o=function(c){return c._private.bbAtOldPos};u.startBatch(),e.forEach(i).silentPositions(a),n&&(r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),r.updateCompoundBounds(!0));var l=bBe(this.boundingBox({useCache:!1}));return e.silentPositions(o),n&&(r.dirtyCompoundBoundsCache(),r.dirtyBoundingBoxCache(),r.updateCompoundBounds(!0)),u.endBatch(),l};zg.boundingbox=zg.bb=zg.boundingBox;zg.renderedBoundingbox=zg.renderedBoundingBox;var qQe=xl,Y6,hN;Y6=hN={};var OSe=function(e){e.uppercaseName=Bbe(e.name),e.autoName="auto"+e.uppercaseName,e.labelName="label"+e.uppercaseName,e.outerName="outer"+e.uppercaseName,e.uppercaseOuterName=Bbe(e.outerName),Y6[e.name]=function(){var n=this[0],r=n._private,t=r.cy,i=t._private.styleEnabled;if(n)if(i){if(n.isParent())return n.updateCompoundBounds(),r[e.autoName]||0;var o=n.pstyle(e.name);return o.strValue==="label"?(n.recalculateRenderedStyle(),r.rstyle[e.labelName]||0):o.pfValue}else return 1},Y6["outer"+e.uppercaseName]=function(){var n=this[0],r=n._private,t=r.cy,i=t._private.styleEnabled;if(n)if(i){var o=n[e.name](),l=n.pstyle("border-position").value,s;l==="center"?s=n.pstyle("border-width").pfValue:l==="outside"?s=2*n.pstyle("border-width").pfValue:s=0;var c=2*n.padding();return o+s+c}else return 1},Y6["rendered"+e.uppercaseName]=function(){var n=this[0];if(n){var r=n[e.name]();return r*this.cy().zoom()}},Y6["rendered"+e.uppercaseOuterName]=function(){var n=this[0];if(n){var r=n[e.outerName]();return r*this.cy().zoom()}}};OSe({name:"width"});OSe({name:"height"});hN.padding=function(){var a=this[0],e=a._private;return a.isParent()?(a.updateCompoundBounds(),e.autoPadding!==void 0?e.autoPadding:a.pstyle("padding").pfValue):a.pstyle("padding").pfValue};hN.paddedHeight=function(){var a=this[0];return a.height()+2*a.padding()};hN.paddedWidth=function(){var a=this[0];return a.width()+2*a.padding()};var BQe=hN,UQe=function(e,u){if(e.isEdge()&&e.takesUpSpace())return u(e)},QQe=function(e,u){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy();return qP(u(e),n.zoom(),n.pan())}},VQe=function(e,u){if(e.isEdge()&&e.takesUpSpace()){var n=e.cy(),r=n.pan(),t=n.zoom();return u(e).map(function(i){return qP(i,t,r)})}},HQe=function(e){return e.renderer().getControlPoints(e)},kQe=function(e){return e.renderer().getSegmentPoints(e)},zQe=function(e){return e.renderer().getSourceEndpoint(e)},GQe=function(e){return e.renderer().getTargetEndpoint(e)},$Qe=function(e){return e.renderer().getEdgeMidpoint(e)},A1e={controlPoints:{get:HQe,mult:!0},segmentPoints:{get:kQe,mult:!0},sourceEndpoint:{get:zQe},targetEndpoint:{get:GQe},midpoint:{get:$Qe}},XQe=function(e){return"rendered"+e[0].toUpperCase()+e.substr(1)},KQe=Object.keys(A1e).reduce(function(a,e){var u=A1e[e],n=XQe(e);return a[e]=function(){return UQe(this,u.get)},u.mult?a[n]=function(){return VQe(this,u.get)}:a[n]=function(){return QQe(this,u.get)},a},{}),JQe=qt({},MQe,qQe,BQe,KQe);var xSe=function(e,u){this.recycle(e,u)};function R6(){return!1}function qD(){return!0}xSe.prototype={instanceString:function(){return"event"},recycle:function(e,u){if(this.isImmediatePropagationStopped=this.isPropagationStopped=this.isDefaultPrevented=R6,e!=null&&e.preventDefault?(this.type=e.type,this.isDefaultPrevented=e.defaultPrevented?qD:R6):e!=null&&e.type?u=e:this.type=e,u!=null&&(this.originalEvent=u.originalEvent,this.type=u.type!=null?u.type:this.type,this.cy=u.cy,this.target=u.target,this.position=u.position,this.renderedPosition=u.renderedPosition,this.namespace=u.namespace,this.layout=u.layout),this.cy!=null&&this.position!=null&&this.renderedPosition==null){var n=this.position,r=this.cy.zoom(),t=this.cy.pan();this.renderedPosition={x:n.x*r+t.x,y:n.y*r+t.y}}this.timeStamp=e&&e.timeStamp||Date.now()},preventDefault:function(){this.isDefaultPrevented=qD;var e=this.originalEvent;e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){this.isPropagationStopped=qD;var e=this.originalEvent;e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){this.isImmediatePropagationStopped=qD,this.stopPropagation()},isDefaultPrevented:R6,isPropagationStopped:R6,isImmediatePropagationStopped:R6};var RSe=/^([^.]+)(\.(?:[^.]+))?$/,WQe=".*",NSe={qualifierCompare:function(e,u){return e===u},eventMatches:function(){return!0},addEventFields:function(){},callbackContext:function(e){return e},beforeEmit:function(){},afterEmit:function(){},bubble:function(){return!1},parent:function(){return null},context:null},O1e=Object.keys(NSe),YQe={};function zP(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:YQe,e=arguments.length>1?arguments[1]:void 0,u=0;u<O1e.length;u++){var n=O1e[u];this[n]=a[n]||NSe[n]}this.context=e||this.context,this.listeners=[],this.emitting=0}var ml=zP.prototype,ISe=function(e,u,n,r,t,i,o){On(r)&&(t=r,r=null),o&&(i==null?i=o:i=qt({},i,o));for(var l=Wr(n)?n:n.split(/\s+/),s=0;s<l.length;s++){var c=l[s];if(!dl(c)){var d=c.match(RSe);if(d){var f=d[1],p=d[2]?d[2]:null,h=u(e,c,f,p,r,t,i);if(h===!1)break}}}},x1e=function(e,u){return e.addEventFields(e.context,u),new xSe(u.type,u)},ZQe=function(e,u,n){if(iqe(n)){u(e,n);return}else if(_r(n)){u(e,x1e(e,n));return}for(var r=Wr(n)?n:n.split(/\s+/),t=0;t<r.length;t++){var i=r[t];if(!dl(i)){var o=i.match(RSe);if(o){var l=o[1],s=o[2]?o[2]:null,c=x1e(e,{type:l,namespace:s,target:e.context});u(e,c)}}}};ml.on=ml.addListener=function(a,e,u,n,r){return ISe(this,function(t,i,o,l,s,c,d){On(c)&&t.listeners.push({event:i,callback:c,type:o,namespace:l,qualifier:s,conf:d})},a,e,u,n,r),this};ml.one=function(a,e,u,n){return this.on(a,e,u,n,{one:!0})};ml.removeListener=ml.off=function(a,e,u,n){var r=this;this.emitting!==0&&(this.listeners=Qqe(this.listeners));for(var t=this.listeners,i=function(s){var c=t[s];ISe(r,function(d,f,p,h,g,v){if((c.type===p||a==="*")&&(!h&&c.namespace!==".*"||c.namespace===h)&&(!g||d.qualifierCompare(c.qualifier,g))&&(!v||c.callback===v))return t.splice(s,1),!1},a,e,u,n)},o=t.length-1;o>=0;o--)i(o);return this};ml.removeAllListeners=function(){return this.removeListener("*")};ml.emit=ml.trigger=function(a,e,u){var n=this.listeners,r=n.length;return this.emitting++,Wr(e)||(e=[e]),ZQe(this,function(t,i){u!=null&&(n=[{event:i.event,type:i.type,namespace:i.namespace,callback:u}],r=n.length);for(var o=function(){var c=n[l];if(c.type===i.type&&(!c.namespace||c.namespace===i.namespace||c.namespace===WQe)&&t.eventMatches(t.context,c,i)){var d=[i];e!=null&&Hqe(d,e),t.beforeEmit(t.context,c,i),c.conf&&c.conf.one&&(t.listeners=t.listeners.filter(function(h){return h!==c}));var f=t.callbackContext(t.context,c,i),p=c.callback.apply(f,d);t.afterEmit(t.context,c,i),p===!1&&(i.stopPropagation(),i.preventDefault())}},l=0;l<r;l++)o();t.bubble(t.context)&&!i.isPropagationStopped()&&t.parent(t.context).emit(i,e)},a),this.emitting--,this};var eVe={qualifierCompare:function(e,u){return e==null||u==null?e==null&&u==null:e.sameText(u)},eventMatches:function(e,u,n){var r=u.qualifier;return r!=null?e!==n.target&&sN(n.target)&&r.matches(n.target):!0},addEventFields:function(e,u){u.cy=e.cy(),u.target=e},callbackContext:function(e,u,n){return u.qualifier!=null?n.target:e},beforeEmit:function(e,u){u.conf&&u.conf.once&&u.conf.onceCollection.removeListener(u.event,u.qualifier,u.callback)},bubble:function(){return!0},parent:function(e){return e.isChild()?e.parent():e.cy()}},BD=function(e){return Mt(e)?new hl(e):e},DSe={createEmitter:function(){for(var e=0;e<this.length;e++){var u=this[e],n=u._private;n.emitter||(n.emitter=new zP(eVe,u))}return this},emitter:function(){return this._private.emitter},on:function(e,u,n){for(var r=BD(u),t=0;t<this.length;t++){var i=this[t];i.emitter().on(e,r,n)}return this},removeListener:function(e,u,n){for(var r=BD(u),t=0;t<this.length;t++){var i=this[t];i.emitter().removeListener(e,r,n)}return this},removeAllListeners:function(){for(var e=0;e<this.length;e++){var u=this[e];u.emitter().removeAllListeners()}return this},one:function(e,u,n){for(var r=BD(u),t=0;t<this.length;t++){var i=this[t];i.emitter().one(e,r,n)}return this},once:function(e,u,n){for(var r=BD(u),t=0;t<this.length;t++){var i=this[t];i.emitter().on(e,r,n,{once:!0,onceCollection:this})}},emit:function(e,u){for(var n=0;n<this.length;n++){var r=this[n];r.emitter().emit(e,u)}return this},emitAndNotify:function(e,u){if(this.length!==0)return this.cy().notify(e,this),this.emit(e,u),this}};Cr.eventAliasesOn(DSe);var FSe={nodes:function(e){return this.filter(function(u){return u.isNode()}).filter(e)},edges:function(e){return this.filter(function(u){return u.isEdge()}).filter(e)},byGroup:function(){for(var e=this.spawn(),u=this.spawn(),n=0;n<this.length;n++){var r=this[n];r.isNode()?e.push(r):u.push(r)}return{nodes:e,edges:u}},filter:function(e,u){if(e===void 0)return this;if(Mt(e)||Bi(e))return new hl(e).filter(this);if(On(e)){for(var n=this.spawn(),r=this,t=0;t<r.length;t++){var i=r[t],o=u?e.apply(u,[i,t,r]):e(i,t,r);o&&n.push(i)}return n}return this.spawn()},not:function(e){if(e){Mt(e)&&(e=this.filter(e));for(var u=this.spawn(),n=0;n<this.length;n++){var r=this[n],t=e.has(r);t||u.push(r)}return u}else return this},absoluteComplement:function(){var e=this.cy();return e.mutableElements().not(this)},intersect:function(e){if(Mt(e)){var u=e;return this.filter(u)}for(var n=this.spawn(),r=this,t=e,i=this.length<e.length,o=i?r:t,l=i?t:r,s=0;s<o.length;s++){var c=o[s];l.has(c)&&n.push(c)}return n},xor:function(e){var u=this._private.cy;Mt(e)&&(e=u.$(e));var n=this.spawn(),r=this,t=e,i=function(l,s){for(var c=0;c<l.length;c++){var d=l[c],f=d._private.data.id,p=s.hasElementWithId(f);p||n.push(d)}};return i(r,t),i(t,r),n},diff:function(e){var u=this._private.cy;Mt(e)&&(e=u.$(e));var n=this.spawn(),r=this.spawn(),t=this.spawn(),i=this,o=e,l=function(c,d,f){for(var p=0;p<c.length;p++){var h=c[p],g=h._private.data.id,v=d.hasElementWithId(g);v?t.merge(h):f.push(h)}};return l(i,o,n),l(o,i,r),{left:n,right:r,both:t}},add:function(e){var u=this._private.cy;if(!e)return this;if(Mt(e)){var n=e;e=u.mutableElements().filter(n)}for(var r=this.spawnSelf(),t=0;t<e.length;t++){var i=e[t],o=!this.has(i);o&&r.push(i)}return r},merge:function(e){var u=this._private,n=u.cy;if(!e)return this;if(e&&Mt(e)){var r=e;e=n.mutableElements().filter(r)}for(var t=u.map,i=0;i<e.length;i++){var o=e[i],l=o._private.data.id,s=!t.has(l);if(s){var c=this.length++;this[c]=o,t.set(l,{ele:o,index:c})}}return this},unmergeAt:function(e){var u=this[e],n=u.id(),r=this._private,t=r.map;this[e]=void 0,t.delete(n);var i=e===this.length-1;if(this.length>1&&!i){var o=this.length-1,l=this[o],s=l._private.data.id;this[o]=void 0,this[e]=l,t.set(s,{ele:l,index:e})}return this.length--,this},unmergeOne:function(e){e=e[0];var u=this._private,n=e._private.data.id,r=u.map,t=r.get(n);if(!t)return this;var i=t.index;return this.unmergeAt(i),this},unmerge:function(e){var u=this._private.cy;if(!e)return this;if(e&&Mt(e)){var n=e;e=u.mutableElements().filter(n)}for(var r=0;r<e.length;r++)this.unmergeOne(e[r]);return this},unmergeBy:function(e){for(var u=this.length-1;u>=0;u--){var n=this[u];e(n)&&this.unmergeAt(u)}return this},map:function(e,u){for(var n=[],r=this,t=0;t<r.length;t++){var i=r[t],o=u?e.apply(u,[i,t,r]):e(i,t,r);n.push(o)}return n},reduce:function(e,u){for(var n=u,r=this,t=0;t<r.length;t++)n=e(n,r[t],t,r);return n},max:function(e,u){for(var n=-1/0,r,t=this,i=0;i<t.length;i++){var o=t[i],l=u?e.apply(u,[o,i,t]):e(o,i,t);l>n&&(n=l,r=o)}return{value:n,ele:r}},min:function(e,u){for(var n=1/0,r,t=this,i=0;i<t.length;i++){var o=t[i],l=u?e.apply(u,[o,i,t]):e(o,i,t);l<n&&(n=l,r=o)}return{value:n,ele:r}}},Ar=FSe;Ar.u=Ar["|"]=Ar["+"]=Ar.union=Ar.or=Ar.add;Ar["\\"]=Ar["!"]=Ar["-"]=Ar.difference=Ar.relativeComplement=Ar.subtract=Ar.not;Ar.n=Ar["&"]=Ar["."]=Ar.and=Ar.intersection=Ar.intersect;Ar["^"]=Ar["(+)"]=Ar["(-)"]=Ar.symmetricDifference=Ar.symdiff=Ar.xor;Ar.fnFilter=Ar.filterFn=Ar.stdFilter=Ar.filter;Ar.complement=Ar.abscomp=Ar.absoluteComplement;var tVe={isNode:function(){return this.group()==="nodes"},isEdge:function(){return this.group()==="edges"},isLoop:function(){return this.isEdge()&&this.source()[0]===this.target()[0]},isSimple:function(){return this.isEdge()&&this.source()[0]!==this.target()[0]},group:function(){var e=this[0];if(e)return e._private.group}},PSe=function(e,u){var n=e.cy(),r=n.hasCompoundNodes();function t(c){var d=c.pstyle("z-compound-depth");return d.value==="auto"?r?c.zDepth():0:d.value==="bottom"?-1:d.value==="top"?UH:0}var i=t(e)-t(u);if(i!==0)return i;function o(c){var d=c.pstyle("z-index-compare");return d.value==="auto"&&c.isNode()?1:0}var l=o(e)-o(u);if(l!==0)return l;var s=e.pstyle("z-index").value-u.pstyle("z-index").value;return s!==0?s:e.poolIndex()-u.poolIndex()},MF={forEach:function(e,u){if(On(e))for(var n=this.length,r=0;r<n;r++){var t=this[r],i=u?e.apply(u,[t,r,this]):e(t,r,this);if(i===!1)break}return this},toArray:function(){for(var e=[],u=0;u<this.length;u++)e.push(this[u]);return e},slice:function(e,u){var n=[],r=this.length;u==null&&(u=r),e==null&&(e=0),e<0&&(e=r+e),u<0&&(u=r+u);for(var t=e;t>=0&&t<u&&t<r;t++)n.push(this[t]);return this.spawn(n)},size:function(){return this.length},eq:function(e){return this[e]||this.spawn()},first:function(){return this[0]||this.spawn()},last:function(){return this[this.length-1]||this.spawn()},empty:function(){return this.length===0},nonempty:function(){return!this.empty()},sort:function(e){if(!On(e))return this;var u=this.toArray().sort(e);return this.spawn(u)},sortByZIndex:function(){return this.sort(PSe)},zDepth:function(){var e=this[0];if(e){var u=e._private,n=u.group;if(n==="nodes"){var r=u.data.parent?e.parents().size():0;return e.isParent()?r:UH-1}else{var t=u.source,i=u.target,o=t.zDepth(),l=i.zDepth();return Math.max(o,l,0)}}}};MF.each=MF.forEach;var rVe=function(){var e="undefined",u=(typeof Symbol>"u"?"undefined":ta(Symbol))!=e&&ta(Symbol.iterator)!=e;u&&(MF[Symbol.iterator]=function(){var n=this,r={value:void 0,done:!1},t=0,i=this.length;return Dwe({next:function(){return t<i?r.value=n[t++]:(r.value=void 0,r.done=!0),r}},Symbol.iterator,function(){return this})})};rVe();var nVe=Ra({nodeDimensionsIncludeLabels:!1}),dF={layoutDimensions:function(e){e=nVe(e);var u;if(!this.takesUpSpace())u={w:0,h:0};else if(e.nodeDimensionsIncludeLabels){var n=this.boundingBox();u={w:n.w,h:n.h}}else u={w:this.outerWidth(),h:this.outerHeight()};return(u.w===0||u.h===0)&&(u.w=u.h=1),u},layoutPositions:function(e,u,n){var r=this.nodes().filter(function(S){return!S.isParent()}),t=this.cy(),i=u.eles,o=function(N){return N.id()},l=c1(n,o);e.emit({type:"layoutstart",layout:e}),e.animations=[];var s=function(N,j,q){var O={x:j.x1+j.w/2,y:j.y1+j.h/2},I={x:(q.x-O.x)*N,y:(q.y-O.y)*N};return{x:O.x+I.x,y:O.y+I.y}},c=u.spacingFactor&&u.spacingFactor!==1,d=function(){if(!c)return null;for(var N=ei(),j=0;j<r.length;j++){var q=r[j],O=l(q,j);Wwe(N,O.x,O.y)}return N},f=d(),p=c1(function(S,N){var j=l(S,N);if(c){var q=Math.abs(u.spacingFactor);j=s(q,f,j)}return u.transform!=null&&(j=u.transform(S,j)),j},o);if(u.animate){for(var h=0;h<r.length;h++){var g=r[h],v=p(g,h),m=u.animateFilter==null||u.animateFilter(g,h);if(m){var T=g.animation({position:v,duration:u.animationDuration,easing:u.animationEasing});e.animations.push(T)}else g.position(v)}if(u.fit){var w=t.animation({fit:{boundingBox:i.boundingBoxAt(p),padding:u.padding},duration:u.animationDuration,easing:u.animationEasing});e.animations.push(w)}else if(u.zoom!==void 0&&u.pan!==void 0){var E=t.animation({zoom:u.zoom,pan:u.pan,duration:u.animationDuration,easing:u.animationEasing});e.animations.push(E)}e.animations.forEach(function(S){return S.play()}),e.one("layoutready",u.ready),e.emit({type:"layoutready",layout:e}),R1.all(e.animations.map(function(S){return S.promise()})).then(function(){e.one("layoutstop",u.stop),e.emit({type:"layoutstop",layout:e})})}else r.positions(p),u.fit&&t.fit(u.eles,u.padding),u.zoom!=null&&t.zoom(u.zoom),u.pan&&t.pan(u.pan),e.one("layoutready",u.ready),e.emit({type:"layoutready",layout:e}),e.one("layoutstop",u.stop),e.emit({type:"layoutstop",layout:e});return this},layout:function(e){var u=this.cy();return u.makeLayout(qt({},e,{eles:this}))}};dF.createLayout=dF.makeLayout=dF.layout;function jSe(a,e,u){var n=u._private,r=n.styleCache=n.styleCache||[],t;return(t=r[a])!=null||(t=r[a]=e(u)),t}function GP(a,e){return a=cb(a),function(n){return jSe(a,e,n)}}function $P(a,e){a=cb(a);var u=function(r){return e.call(r)};return function(){var r=this[0];if(r)return jSe(a,u,r)}}var Aa={recalculateRenderedStyle:function(e){var u=this.cy(),n=u.renderer(),r=u.styleEnabled();return n&&r&&n.recalculateRenderedStyle(this,e),this},dirtyStyleCache:function(){var e=this.cy(),u=function(t){return t._private.styleCache=null};if(e.hasCompoundNodes()){var n;n=this.spawnSelf().merge(this.descendants()).merge(this.parents()),n.merge(n.connectedEdges()),n.forEach(u)}else this.forEach(function(r){u(r),r.connectedEdges().forEach(u)});return this},updateStyle:function(e){var u=this._private.cy;if(!u.styleEnabled())return this;if(u.batching()){var n=u._private.batchStyleEles;return n.merge(this),this}var r=u.hasCompoundNodes(),t=this;e=!!(e||e===void 0),r&&(t=this.spawnSelf().merge(this.descendants()).merge(this.parents()));var i=t;return e?i.emitAndNotify("style"):i.emit("style"),t.forEach(function(o){return o._private.styleDirty=!0}),this},cleanStyle:function(){var e=this.cy();if(e.styleEnabled())for(var u=0;u<this.length;u++){var n=this[u];n._private.styleDirty&&(n._private.styleDirty=!1,e.style().apply(n))}},parsedStyle:function(e){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=this[0],r=n.cy();if(r.styleEnabled()&&n){n._private.styleDirty&&(n._private.styleDirty=!1,r.style().apply(n));var t=n._private.style[e];return t??(u?r.style().getDefaultProperty(e):null)}},numericStyle:function(e){var u=this[0];if(u.cy().styleEnabled()&&u){var n=u.pstyle(e);return n.pfValue!==void 0?n.pfValue:n.value}},numericStyleUnits:function(e){var u=this[0];if(u.cy().styleEnabled()&&u)return u.pstyle(e).units},renderedStyle:function(e){var u=this.cy();if(!u.styleEnabled())return this;var n=this[0];if(n)return u.style().getRenderedStyle(n,e)},style:function(e,u){var n=this.cy();if(!n.styleEnabled())return this;var r=!1,t=n.style();if(_r(e)){var i=e;t.applyBypass(this,i,r),this.emitAndNotify("style")}else if(Mt(e))if(u===void 0){var o=this[0];return o?t.getStylePropertyValue(o,e):void 0}else t.applyBypass(this,e,u,r),this.emitAndNotify("style");else if(e===void 0){var l=this[0];return l?t.getRawStyle(l):void 0}return this},removeStyle:function(e){var u=this.cy();if(!u.styleEnabled())return this;var n=!1,r=u.style(),t=this;if(e===void 0)for(var i=0;i<t.length;i++){var o=t[i];r.removeAllBypasses(o,n)}else{e=e.split(/\s+/);for(var l=0;l<t.length;l++){var s=t[l];r.removeBypasses(s,e,n)}}return this.emitAndNotify("style"),this},show:function(){return this.css("display","element"),this},hide:function(){return this.css("display","none"),this},effectiveOpacity:function(){var e=this.cy();if(!e.styleEnabled())return 1;var u=e.hasCompoundNodes(),n=this[0];if(n){var r=n._private,t=n.pstyle("opacity").value;if(!u)return t;var i=r.data.parent?n.parents():null;if(i)for(var o=0;o<i.length;o++){var l=i[o],s=l.pstyle("opacity").value;t=s*t}return t}},transparent:function(){var e=this.cy();if(!e.styleEnabled())return!1;var u=this[0],n=u.cy().hasCompoundNodes();if(u)return n?u.effectiveOpacity()===0:u.pstyle("opacity").value===0},backgrounding:function(){var e=this.cy();if(!e.styleEnabled())return!1;var u=this[0];return!!u._private.backgrounding}};function jL(a,e){var u=a._private,n=u.data.parent?a.parents():null;if(n)for(var r=0;r<n.length;r++){var t=n[r];if(!e(t))return!1}return!0}function YH(a){var e=a.ok,u=a.edgeOkViaNode||a.ok,n=a.parentOk||a.ok;return function(){var r=this.cy();if(!r.styleEnabled())return!0;var t=this[0],i=r.hasCompoundNodes();if(t){var o=t._private;if(!e(t))return!1;if(t.isNode())return!i||jL(t,n);var l=o.source,s=o.target;return u(l)&&(!i||jL(l,u))&&(l===s||u(s)&&(!i||jL(s,u)))}}}var N1=GP("eleTakesUpSpace",function(a){return a.pstyle("display").value==="element"&&a.width()!==0&&(a.isNode()?a.height()!==0:!0)});Aa.takesUpSpace=$P("takesUpSpace",YH({ok:N1}));var aVe=GP("eleInteractive",function(a){return a.pstyle("events").value==="yes"&&a.pstyle("visibility").value==="visible"&&N1(a)}),iVe=GP("parentInteractive",function(a){return a.pstyle("visibility").value==="visible"&&N1(a)});Aa.interactive=$P("interactive",YH({ok:aVe,parentOk:iVe,edgeOkViaNode:N1}));Aa.noninteractive=function(){var a=this[0];if(a)return!a.interactive()};var uVe=GP("eleVisible",function(a){return a.pstyle("visibility").value==="visible"&&a.pstyle("opacity").pfValue!==0&&N1(a)}),oVe=N1;Aa.visible=$P("visible",YH({ok:uVe,edgeOkViaNode:oVe}));Aa.hidden=function(){var a=this[0];if(a)return!a.visible()};Aa.isBundledBezier=$P("isBundledBezier",function(){return this.cy().styleEnabled()?!this.removed()&&this.pstyle("curve-style").value==="bezier"&&this.takesUpSpace():!1});Aa.bypass=Aa.css=Aa.style;Aa.renderedCss=Aa.renderedStyle;Aa.removeBypass=Aa.removeCss=Aa.removeStyle;Aa.pstyle=Aa.parsedStyle;var ol={};function R1e(a){return function(){var e=arguments,u=[];if(e.length===2){var n=e[0],r=e[1];this.on(a.event,n,r)}else if(e.length===1&&On(e[0])){var t=e[0];this.on(a.event,t)}else if(e.length===0||e.length===1&&Wr(e[0])){for(var i=e.length===1?e[0]:null,o=0;o<this.length;o++){var l=this[o],s=!a.ableField||l._private[a.ableField],c=l._private[a.field]!=a.value;if(a.overrideAble){var d=a.overrideAble(l);if(d!==void 0&&(s=d,!d))return this}s&&(l._private[a.field]=a.value,c&&u.push(l))}var f=this.spawn(u);f.updateStyle(),f.emit(a.event),i&&f.emit(i)}return this}}function I1(a){ol[a.field]=function(){var e=this[0];if(e){if(a.overrideField){var u=a.overrideField(e);if(u!==void 0)return u}return e._private[a.field]}},ol[a.on]=R1e({event:a.on,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!0}),ol[a.off]=R1e({event:a.off,field:a.field,ableField:a.ableField,overrideAble:a.overrideAble,value:!1})}I1({field:"locked",overrideField:function(e){return e.cy().autolock()?!0:void 0},on:"lock",off:"unlock"});I1({field:"grabbable",overrideField:function(e){return e.cy().autoungrabify()||e.pannable()?!1:void 0},on:"grabify",off:"ungrabify"});I1({field:"selected",ableField:"selectable",overrideAble:function(e){return e.cy().autounselectify()?!1:void 0},on:"select",off:"unselect"});I1({field:"selectable",overrideField:function(e){return e.cy().autounselectify()?!1:void 0},on:"selectify",off:"unselectify"});ol.deselect=ol.unselect;ol.grabbed=function(){var a=this[0];if(a)return a._private.grabbed};I1({field:"active",on:"activate",off:"unactivate"});I1({field:"pannable",on:"panify",off:"unpanify"});ol.inactive=function(){var a=this[0];if(a)return!a._private.active};var qa={},N1e=function(e){return function(n){for(var r=this,t=[],i=0;i<r.length;i++){var o=r[i];if(o.isNode()){for(var l=!1,s=o.connectedEdges(),c=0;c<s.length;c++){var d=s[c],f=d.source(),p=d.target();if(e.noIncomingEdges&&p===o&&f!==o||e.noOutgoingEdges&&f===o&&p!==o){l=!0;break}}l||t.push(o)}}return this.spawn(t,!0).filter(n)}},I1e=function(e){return function(u){for(var n=this,r=[],t=0;t<n.length;t++){var i=n[t];if(i.isNode())for(var o=i.connectedEdges(),l=0;l<o.length;l++){var s=o[l],c=s.source(),d=s.target();e.outgoing&&c===i?(r.push(s),r.push(d)):e.incoming&&d===i&&(r.push(s),r.push(c))}}return this.spawn(r,!0).filter(u)}},D1e=function(e){return function(u){for(var n=this,r=[],t={};;){var i=e.outgoing?n.outgoers():n.incomers();if(i.length===0)break;for(var o=!1,l=0;l<i.length;l++){var s=i[l],c=s.id();t[c]||(t[c]=!0,r.push(s),o=!0)}if(!o)break;n=i}return this.spawn(r,!0).filter(u)}};qa.clearTraversalCache=function(){for(var a=0;a<this.length;a++)this[a]._private.traversalCache=null};qt(qa,{roots:N1e({noIncomingEdges:!0}),leaves:N1e({noOutgoingEdges:!0}),outgoers:Tu(I1e({outgoing:!0}),"outgoers"),successors:D1e({outgoing:!0}),incomers:Tu(I1e({incoming:!0}),"incomers"),predecessors:D1e({})});qt(qa,{neighborhood:Tu(function(a){for(var e=[],u=this.nodes(),n=0;n<u.length;n++)for(var r=u[n],t=r.connectedEdges(),i=0;i<t.length;i++){var o=t[i],l=o.source(),s=o.target(),c=r===l?s:l;c.length>0&&e.push(c[0]),e.push(o[0])}return this.spawn(e,!0).filter(a)},"neighborhood"),closedNeighborhood:function(e){return this.neighborhood().add(this).filter(e)},openNeighborhood:function(e){return this.neighborhood(e)}});qa.neighbourhood=qa.neighborhood;qa.closedNeighbourhood=qa.closedNeighborhood;qa.openNeighbourhood=qa.openNeighborhood;qt(qa,{source:Tu(function(e){var u=this[0],n;return u&&(n=u._private.source||u.cy().collection()),n&&e?n.filter(e):n},"source"),target:Tu(function(e){var u=this[0],n;return u&&(n=u._private.target||u.cy().collection()),n&&e?n.filter(e):n},"target"),sources:F1e({attr:"source"}),targets:F1e({attr:"target"})});function F1e(a){return function(u){for(var n=[],r=0;r<this.length;r++){var t=this[r],i=t._private[a.attr];i&&n.push(i)}return this.spawn(n,!0).filter(u)}}qt(qa,{edgesWith:Tu(P1e(),"edgesWith"),edgesTo:Tu(P1e({thisIsSrc:!0}),"edgesTo")});function P1e(a){return function(u){var n=[],r=this._private.cy,t=a||{};Mt(u)&&(u=r.$(u));for(var i=0;i<u.length;i++)for(var o=u[i]._private.edges,l=0;l<o.length;l++){var s=o[l],c=s._private.data,d=this.hasElementWithId(c.source)&&u.hasElementWithId(c.target),f=u.hasElementWithId(c.source)&&this.hasElementWithId(c.target),p=d||f;p&&((t.thisIsSrc||t.thisIsTgt)&&(t.thisIsSrc&&!d||t.thisIsTgt&&!f)||n.push(s))}return this.spawn(n,!0)}}qt(qa,{connectedEdges:Tu(function(a){for(var e=[],u=this,n=0;n<u.length;n++){var r=u[n];if(r.isNode())for(var t=r._private.edges,i=0;i<t.length;i++){var o=t[i];e.push(o)}}return this.spawn(e,!0).filter(a)},"connectedEdges"),connectedNodes:Tu(function(a){for(var e=[],u=this,n=0;n<u.length;n++){var r=u[n];r.isEdge()&&(e.push(r.source()[0]),e.push(r.target()[0]))}return this.spawn(e,!0).filter(a)},"connectedNodes"),parallelEdges:Tu(j1e(),"parallelEdges"),codirectedEdges:Tu(j1e({codirected:!0}),"codirectedEdges")});function j1e(a){var e={codirected:!1};return a=qt({},e,a),function(n){for(var r=[],t=this.edges(),i=a,o=0;o<t.length;o++)for(var l=t[o],s=l._private,c=s.source,d=c._private.data.id,f=s.data.target,p=c._private.edges,h=0;h<p.length;h++){var g=p[h],v=g._private.data,m=v.target,T=v.source,w=m===f&&T===d,E=d===m&&f===T;(i.codirected&&w||!i.codirected&&(w||E))&&r.push(g)}return this.spawn(r,!0).filter(n)}}qt(qa,{components:function(e){var u=this,n=u.cy(),r=n.collection(),t=e==null?u.nodes():e.nodes(),i=[];e!=null&&t.empty()&&(t=e.sources());var o=function(c,d){r.merge(c),t.unmerge(c),d.merge(c)};if(t.empty())return u.spawn();var l=function(){var c=n.collection();i.push(c);var d=t[0];o(d,c),u.bfs({directed:!1,roots:d,visit:function(p){return o(p,c)}}),c.forEach(function(f){f.connectedEdges().forEach(function(p){u.has(p)&&c.has(p.source())&&c.has(p.target())&&c.merge(p)})})};do l();while(t.length>0);return i},component:function(){var e=this[0];return e.cy().mutableElements().components(e)[0]}});qa.componentsOf=qa.components;var Oa=function(e,u){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(e===void 0){_n("A collection must have a reference to the core");return}var t=new Xs,i=!1;if(!u)u=[];else if(u.length>0&&_r(u[0])&&!sN(u[0])){i=!0;for(var o=[],l=new x1,s=0,c=u.length;s<c;s++){var d=u[s];d.data==null&&(d.data={});var f=d.data;if(f.id==null)f.id=Xwe();else if(e.hasElementWithId(f.id)||l.has(f.id))continue;var p=new LP(e,d,!1);o.push(p),l.add(f.id)}u=o}this.length=0;for(var h=0,g=u.length;h<g;h++){var v=u[h][0];if(v!=null){var m=v._private.data.id;(!n||!t.has(m))&&(n&&t.set(m,{index:this.length,ele:v}),this[this.length]=v,this.length++)}}this._private={eles:this,cy:e,get map(){return this.lazyMap==null&&this.rebuildMap(),this.lazyMap},set map(T){this.lazyMap=T},rebuildMap:function(){for(var w=this.lazyMap=new Xs,E=this.eles,S=0;S<E.length;S++){var N=E[S];w.set(N.id(),{index:S,ele:N})}}},n&&(this._private.map=t),i&&!r&&this.restore()},rn=LP.prototype=Oa.prototype=Object.create(Array.prototype);rn.instanceString=function(){return"collection"};rn.spawn=function(a,e){return new Oa(this.cy(),a,e)};rn.spawnSelf=function(){return this.spawn(this)};rn.cy=function(){return this._private.cy};rn.renderer=function(){return this._private.cy.renderer()};rn.element=function(){return this[0]};rn.collection=function(){return jwe(this)?this:new Oa(this._private.cy,[this])};rn.unique=function(){return new Oa(this._private.cy,this,!0)};rn.hasElementWithId=function(a){return a=""+a,this._private.map.has(a)};rn.getElementById=function(a){a=""+a;var e=this._private.cy,u=this._private.map.get(a);return u?u.ele:new Oa(e)};rn.$id=rn.getElementById;rn.poolIndex=function(){var a=this._private.cy,e=a._private.elements,u=this[0]._private.data.id;return e._private.map.get(u).index};rn.indexOf=function(a){var e=a[0]._private.data.id;return this._private.map.get(e).index};rn.indexOfId=function(a){return a=""+a,this._private.map.get(a).index};rn.json=function(a){var e=this.element(),u=this.cy();if(e==null&&a)return this;if(e!=null){var n=e._private;if(_r(a)){if(u.startBatch(),a.data){e.data(a.data);var r=n.data;if(e.isEdge()){var t=!1,i={},o=a.data.source,l=a.data.target;o!=null&&o!=r.source&&(i.source=""+o,t=!0),l!=null&&l!=r.target&&(i.target=""+l,t=!0),t&&(e=e.move(i))}else{var s="parent"in a.data,c=a.data.parent;s&&(c!=null||r.parent!=null)&&c!=r.parent&&(c===void 0&&(c=null),c!=null&&(c=""+c),e=e.move({parent:c}))}}a.position&&e.position(a.position);var d=function(g,v,m){var T=a[g];T!=null&&T!==n[g]&&(T?e[v]():e[m]())};return d("removed","remove","restore"),d("selected","select","unselect"),d("selectable","selectify","unselectify"),d("locked","lock","unlock"),d("grabbable","grabify","ungrabify"),d("pannable","panify","unpanify"),a.classes!=null&&e.classes(a.classes),u.endBatch(),this}else if(a===void 0){var f={data:Uo(n.data),position:Uo(n.position),group:n.group,removed:n.removed,selected:n.selected,selectable:n.selectable,locked:n.locked,grabbable:n.grabbable,pannable:n.pannable,classes:null};f.classes="";var p=0;return n.classes.forEach(function(h){return f.classes+=p++===0?h:" "+h}),f}}};rn.jsons=function(){for(var a=[],e=0;e<this.length;e++){var u=this[e],n=u.json();a.push(n)}return a};rn.clone=function(){for(var a=this.cy(),e=[],u=0;u<this.length;u++){var n=this[u],r=n.json(),t=new LP(a,r,!1);e.push(t)}return new Oa(a,e)};rn.copy=rn.clone;rn.restore=function(){for(var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,u=this,n=u.cy(),r=n._private,t=[],i=[],o,l=0,s=u.length;l<s;l++){var c=u[l];e&&!c.removed()||(c.isNode()?t.push(c):i.push(c))}o=t.concat(i);var d,f=function(){o.splice(d,1),d--};for(d=0;d<o.length;d++){var p=o[d],h=p._private,g=h.data;if(p.clearTraversalCache(),!(!e&&!h.removed)){if(g.id===void 0)g.id=Xwe();else if(At(g.id))g.id=""+g.id;else if(dl(g.id)||!Mt(g.id)){_n("Can not create element with invalid string ID `"+g.id+"`"),f();continue}else if(n.hasElementWithId(g.id)){_n("Can not create second element with ID `"+g.id+"`"),f();continue}}var v=g.id;if(p.isNode()){var m=h.position;m.x==null&&(m.x=0),m.y==null&&(m.y=0)}if(p.isEdge()){for(var T=p,w=["source","target"],E=w.length,S=!1,N=0;N<E;N++){var j=w[N],q=g[j];At(q)&&(q=g[j]=""+g[j]),q==null||q===""?(_n("Can not create edge `"+v+"` with unspecified "+j),S=!0):n.hasElementWithId(q)||(_n("Can not create edge `"+v+"` with nonexistant "+j+" `"+q+"`"),S=!0)}if(S){f();continue}var O=n.getElementById(g.source),I=n.getElementById(g.target);O.same(I)?O._private.edges.push(T):(O._private.edges.push(T),I._private.edges.push(T)),T._private.source=O,T._private.target=I}h.map=new Xs,h.map.set(v,{ele:p,index:0}),h.removed=!1,e&&n.addToPool(p)}for(var A=0;A<t.length;A++){var P=t[A],C=P._private.data;At(C.parent)&&(C.parent=""+C.parent);var B=C.parent,H=B!=null;if(H||P._private.parent){var V=P._private.parent?n.collection().merge(P._private.parent):n.getElementById(B);if(V.empty())C.parent=void 0;else if(V[0].removed())Lr("Node added with missing parent, reference to parent removed"),C.parent=void 0,P._private.parent=null;else{for(var G=!1,Z=V;!Z.empty();){if(P.same(Z)){G=!0,C.parent=void 0;break}Z=Z.parent()}G||(V[0]._private.children.push(P),P._private.parent=V[0],r.hasCompoundNodes=!0)}}}if(o.length>0){for(var ae=o.length===u.length?u:new Oa(n,o),W=0;W<ae.length;W++){var te=ae[W];te.isNode()||(te.parallelEdges().clearTraversalCache(),te.source().clearTraversalCache(),te.target().clearTraversalCache())}var se;r.hasCompoundNodes?se=n.collection().merge(ae).merge(ae.connectedNodes()).merge(ae.parent()):se=ae,se.dirtyCompoundBoundsCache().dirtyBoundingBoxCache().updateStyle(a),a?ae.emitAndNotify("add"):e&&ae.emit("add")}return u};rn.removed=function(){var a=this[0];return a&&a._private.removed};rn.inside=function(){var a=this[0];return a&&!a._private.removed};rn.remove=function(){var a=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0,e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,u=this,n=[],r={},t=u._private.cy;function i(B){for(var H=B._private.edges,V=0;V<H.length;V++)l(H[V])}function o(B){for(var H=B._private.children,V=0;V<H.length;V++)l(H[V])}function l(B){var H=r[B.id()];e&&B.removed()||H||(r[B.id()]=!0,B.isNode()?(n.push(B),i(B),o(B)):n.unshift(B))}for(var s=0,c=u.length;s<c;s++){var d=u[s];l(d)}function f(B,H){var V=B._private.edges;fl(V,H),B.clearTraversalCache()}function p(B){B.clearTraversalCache()}var h=[];h.ids={};function g(B,H){H=H[0],B=B[0];var V=B._private.children,G=B.id();fl(V,H),H._private.parent=null,h.ids[G]||(h.ids[G]=!0,h.push(B))}u.dirtyCompoundBoundsCache(),e&&t.removeFromPool(n);for(var v=0;v<n.length;v++){var m=n[v];if(m.isEdge()){var T=m.source()[0],w=m.target()[0];f(T,m),f(w,m);for(var E=m.parallelEdges(),S=0;S<E.length;S++){var N=E[S];p(N),N.isBundledBezier()&&N.dirtyBoundingBoxCache()}}else{var j=m.parent();j.length!==0&&g(j,m)}e&&(m._private.removed=!0)}var q=t._private.elements;t._private.hasCompoundNodes=!1;for(var O=0;O<q.length;O++){var I=q[O];if(I.isParent()){t._private.hasCompoundNodes=!0;break}}var A=new Oa(this.cy(),n);A.size()>0&&(a?A.emitAndNotify("remove"):e&&A.emit("remove"));for(var P=0;P<h.length;P++){var C=h[P];(!e||!C.removed())&&C.updateStyle()}return A};rn.move=function(a){var e=this._private.cy,u=this,n=!1,r=!1,t=function(h){return h==null?h:""+h};if(a.source!==void 0||a.target!==void 0){var i=t(a.source),o=t(a.target),l=i!=null&&e.hasElementWithId(i),s=o!=null&&e.hasElementWithId(o);(l||s)&&(e.batch(function(){u.remove(n,r),u.emitAndNotify("moveout");for(var p=0;p<u.length;p++){var h=u[p],g=h._private.data;h.isEdge()&&(l&&(g.source=i),s&&(g.target=o))}u.restore(n,r)}),u.emitAndNotify("move"))}else if(a.parent!==void 0){var c=t(a.parent),d=c===null||e.hasElementWithId(c);if(d){var f=c===null?void 0:c;e.batch(function(){var p=u.remove(n,r);p.emitAndNotify("moveout");for(var h=0;h<u.length;h++){var g=u[h],v=g._private.data;g.isNode()&&(v.parent=f)}p.restore(n,r)}),u.emitAndNotify("move")}}return this};[uSe,gQe,lF,ul,d1,jQe,kP,JQe,DSe,FSe,tVe,MF,dF,Aa,ol,qa].forEach(function(a){qt(rn,a)});var sVe={add:function(e){var u,n=this;if(Bi(e)){var r=e;if(r._private.cy===n)u=r.restore();else{for(var t=[],i=0;i<r.length;i++){var o=r[i];t.push(o.json())}u=new Oa(n,t)}}else if(Wr(e)){var l=e;u=new Oa(n,l)}else if(_r(e)&&(Wr(e.nodes)||Wr(e.edges))){for(var s=e,c=[],d=["nodes","edges"],f=0,p=d.length;f<p;f++){var h=d[f],g=s[h];if(Wr(g))for(var v=0,m=g.length;v<m;v++){var T=qt({group:h},g[v]);c.push(T)}}u=new Oa(n,c)}else{var w=e;u=new LP(n,w).collection()}return u},remove:function(e){if(!Bi(e)){if(Mt(e)){var u=e;e=this.$(u)}}return e.remove()}};function cVe(a,e,u,n){var r=4,t=.001,i=1e-7,o=10,l=11,s=1/(l-1),c=typeof Float32Array<"u";if(arguments.length!==4)return!1;for(var d=0;d<4;++d)if(typeof arguments[d]!="number"||isNaN(arguments[d])||!isFinite(arguments[d]))return!1;a=Math.min(a,1),u=Math.min(u,1),a=Math.max(a,0),u=Math.max(u,0);var f=c?new Float32Array(l):new Array(l);function p(I,A){return 1-3*A+3*I}function h(I,A){return 3*A-6*I}function g(I){return 3*I}function v(I,A,P){return((p(A,P)*I+h(A,P))*I+g(A))*I}function m(I,A,P){return 3*p(A,P)*I*I+2*h(A,P)*I+g(A)}function T(I,A){for(var P=0;P<r;++P){var C=m(A,a,u);if(C===0)return A;var B=v(A,a,u)-I;A-=B/C}return A}function w(){for(var I=0;I<l;++I)f[I]=v(I*s,a,u)}function E(I,A,P){var C,B,H=0;do B=A+(P-A)/2,C=v(B,a,u)-I,C>0?P=B:A=B;while(Math.abs(C)>i&&++H<o);return B}function S(I){for(var A=0,P=1,C=l-1;P!==C&&f[P]<=I;++P)A+=s;--P;var B=(I-f[P])/(f[P+1]-f[P]),H=A+B*s,V=m(H,a,u);return V>=t?T(I,H):V===0?H:E(I,A,A+s)}var N=!1;function j(){N=!0,(a!==e||u!==n)&&w()}var q=function(A){return N||j(),a===e&&u===n?A:A===0?0:A===1?1:v(S(A),e,n)};q.getControlPoints=function(){return[{x:a,y:e},{x:u,y:n}]};var O="generateBezier("+[a,e,u,n]+")";return q.toString=function(){return O},q}var lVe=(function(){function a(n){return-n.tension*n.x-n.friction*n.v}function e(n,r,t){var i={x:n.x+t.dx*r,v:n.v+t.dv*r,tension:n.tension,friction:n.friction};return{dx:i.v,dv:a(i)}}function u(n,r){var t={dx:n.v,dv:a(n)},i=e(n,r*.5,t),o=e(n,r*.5,i),l=e(n,r,o),s=1/6*(t.dx+2*(i.dx+o.dx)+l.dx),c=1/6*(t.dv+2*(i.dv+o.dv)+l.dv);return n.x=n.x+s*r,n.v=n.v+c*r,n}return function n(r,t,i){var o={x:-1,v:0,tension:null,friction:null},l=[0],s=0,c=1/1e4,d=16/1e3,f,p,h;for(r=parseFloat(r)||500,t=parseFloat(t)||20,i=i||null,o.tension=r,o.friction=t,f=i!==null,f?(s=n(r,t),p=s/i*d):p=d;h=u(h||o,p),l.push(1+h.x),s+=16,Math.abs(h.x)>c&&Math.abs(h.v)>c;);return f?function(g){return l[g*(l.length-1)|0]}:s}})(),Zr=function(e,u,n,r){var t=cVe(e,u,n,r);return function(i,o,l){return i+(o-i)*t(l)}},fF={linear:function(e,u,n){return e+(u-e)*n},ease:Zr(.25,.1,.25,1),"ease-in":Zr(.42,0,1,1),"ease-out":Zr(0,0,.58,1),"ease-in-out":Zr(.42,0,.58,1),"ease-in-sine":Zr(.47,0,.745,.715),"ease-out-sine":Zr(.39,.575,.565,1),"ease-in-out-sine":Zr(.445,.05,.55,.95),"ease-in-quad":Zr(.55,.085,.68,.53),"ease-out-quad":Zr(.25,.46,.45,.94),"ease-in-out-quad":Zr(.455,.03,.515,.955),"ease-in-cubic":Zr(.55,.055,.675,.19),"ease-out-cubic":Zr(.215,.61,.355,1),"ease-in-out-cubic":Zr(.645,.045,.355,1),"ease-in-quart":Zr(.895,.03,.685,.22),"ease-out-quart":Zr(.165,.84,.44,1),"ease-in-out-quart":Zr(.77,0,.175,1),"ease-in-quint":Zr(.755,.05,.855,.06),"ease-out-quint":Zr(.23,1,.32,1),"ease-in-out-quint":Zr(.86,0,.07,1),"ease-in-expo":Zr(.95,.05,.795,.035),"ease-out-expo":Zr(.19,1,.22,1),"ease-in-out-expo":Zr(1,0,0,1),"ease-in-circ":Zr(.6,.04,.98,.335),"ease-out-circ":Zr(.075,.82,.165,1),"ease-in-out-circ":Zr(.785,.135,.15,.86),spring:function(e,u,n){if(n===0)return fF.linear;var r=lVe(e,u,n);return function(t,i,o){return t+(i-t)*r(o)}},"cubic-bezier":Zr};function M1e(a,e,u,n,r){if(n===1||e===u)return u;var t=r(e,u,n);return a==null||((a.roundValue||a.color)&&(t=Math.round(t)),a.min!==void 0&&(t=Math.max(t,a.min)),a.max!==void 0&&(t=Math.min(t,a.max))),t}function C1e(a,e){return a.pfValue!=null||a.value!=null?a.pfValue!=null&&(e==null||e.type.units!=="%")?a.pfValue:a.value:a}function Ag(a,e,u,n,r){var t=r!=null?r.type:null;u<0?u=0:u>1&&(u=1);var i=C1e(a,r),o=C1e(e,r);if(At(i)&&At(o))return M1e(t,i,o,u,n);if(Wr(i)&&Wr(o)){for(var l=[],s=0;s<o.length;s++){var c=i[s],d=o[s];if(c!=null&&d!=null){var f=M1e(t,c,d,u,n);l.push(f)}else l.push(d)}return l}}function dVe(a,e,u,n){var r=!n,t=a._private,i=e._private,o=i.easing,l=i.startTime,s=n?a:a.cy(),c=s.style();if(!i.easingImpl)if(o==null)i.easingImpl=fF.linear;else{var d;if(Mt(o)){var f=c.parse("transition-timing-function",o);d=f.value}else d=o;var p,h;Mt(d)?(p=d,h=[]):(p=d[1],h=d.slice(2).map(function(ae){return+ae})),h.length>0?(p==="spring"&&h.push(i.duration),i.easingImpl=fF[p].apply(null,h)):i.easingImpl=fF[p]}var g=i.easingImpl,v;if(i.duration===0?v=1:v=(u-l)/i.duration,i.applying&&(v=i.progress),v<0?v=0:v>1&&(v=1),i.delay==null){var m=i.startPosition,T=i.position;if(T&&r&&!a.locked()){var w={};N6(m.x,T.x)&&(w.x=Ag(m.x,T.x,v,g)),N6(m.y,T.y)&&(w.y=Ag(m.y,T.y,v,g)),a.position(w)}var E=i.startPan,S=i.pan,N=t.pan,j=S!=null&&n;j&&(N6(E.x,S.x)&&(N.x=Ag(E.x,S.x,v,g)),N6(E.y,S.y)&&(N.y=Ag(E.y,S.y,v,g)),a.emit("pan"));var q=i.startZoom,O=i.zoom,I=O!=null&&n;I&&(N6(q,O)&&(t.zoom=_4(t.minZoom,Ag(q,O,v,g),t.maxZoom)),a.emit("zoom")),(j||I)&&a.emit("viewport");var A=i.style;if(A&&A.length>0&&r){for(var P=0;P<A.length;P++){var C=A[P],B=C.name,H=C,V=i.startStyle[B],G=c.properties[V.name],Z=Ag(V,H,v,g,G);c.overrideBypass(a,B,Z)}a.emit("style")}}return i.progress=v,v}function N6(a,e){return a==null||e==null?!1:At(a)&&At(e)?!0:!!(a&&e)}function fVe(a,e,u,n){var r=e._private;r.started=!0,r.startTime=u-r.progress*r.duration}function L1e(a,e){var u=e._private.aniEles,n=[];function r(c,d){var f=c._private,p=f.animation.current,h=f.animation.queue,g=!1;if(p.length===0){var v=h.shift();v&&p.push(v)}for(var m=function(N){for(var j=N.length-1;j>=0;j--){var q=N[j];q()}N.splice(0,N.length)},T=p.length-1;T>=0;T--){var w=p[T],E=w._private;if(E.stopped){p.splice(T,1),E.hooked=!1,E.playing=!1,E.started=!1,m(E.frames);continue}!E.playing&&!E.applying||(E.playing&&E.applying&&(E.applying=!1),E.started||fVe(c,w,a),dVe(c,w,a,d),E.applying&&(E.applying=!1),m(E.frames),E.step!=null&&E.step(a),w.completed()&&(p.splice(T,1),E.hooked=!1,E.playing=!1,E.started=!1,m(E.completes)),g=!0)}return!d&&p.length===0&&h.length===0&&n.push(c),g}for(var t=!1,i=0;i<u.length;i++){var o=u[i],l=r(o);t=t||l}var s=r(e,!0);(t||s)&&(u.length>0?e.notify("draw",u):e.notify("draw")),u.unmerge(n),e.emit("step")}var pVe={animate:Cr.animate(),animation:Cr.animation(),animated:Cr.animated(),clearQueue:Cr.clearQueue(),delay:Cr.delay(),delayAnimation:Cr.delayAnimation(),stop:Cr.stop(),addToAnimationPool:function(e){var u=this;u.styleEnabled()&&u._private.aniEles.merge(e)},stopAnimationLoop:function(){this._private.animationsRunning=!1},startAnimationLoop:function(){var e=this;if(e._private.animationsRunning=!0,!e.styleEnabled())return;function u(){e._private.animationsRunning&&IF(function(t){L1e(t,e),u()})}var n=e.renderer();n&&n.beforeRender?n.beforeRender(function(t,i){L1e(i,e)},n.beforeRenderPriorities.animations):u()}},hVe={qualifierCompare:function(e,u){return e==null||u==null?e==null&&u==null:e.sameText(u)},eventMatches:function(e,u,n){var r=u.qualifier;return r!=null?e!==n.target&&sN(n.target)&&r.matches(n.target):!0},addEventFields:function(e,u){u.cy=e,u.target=e},callbackContext:function(e,u,n){return u.qualifier!=null?n.target:e}},UD=function(e){return Mt(e)?new hl(e):e},MSe={createEmitter:function(){var e=this._private;return e.emitter||(e.emitter=new zP(hVe,this)),this},emitter:function(){return this._private.emitter},on:function(e,u,n){return this.emitter().on(e,UD(u),n),this},removeListener:function(e,u,n){return this.emitter().removeListener(e,UD(u),n),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},one:function(e,u,n){return this.emitter().one(e,UD(u),n),this},once:function(e,u,n){return this.emitter().one(e,UD(u),n),this},emit:function(e,u){return this.emitter().emit(e,u),this},emitAndNotify:function(e,u){return this.emit(e),this.notify(e,u),this}};Cr.eventAliasesOn(MSe);var O7={png:function(e){var u=this._private.renderer;return e=e||{},u.png(e)},jpg:function(e){var u=this._private.renderer;return e=e||{},e.bg=e.bg||"#fff",u.jpg(e)}};O7.jpeg=O7.jpg;var pF={layout:function(e){var u=this;if(e==null){_n("Layout options must be specified to make a layout");return}if(e.name==null){_n("A `name` must be specified to make a layout");return}var n=e.name,r=u.extension("layout",n);if(r==null){_n("No such layout `"+n+"` found.  Did you forget to import it and `cytoscape.use()` it?");return}var t;Mt(e.eles)?t=u.$(e.eles):t=e.eles!=null?e.eles:u.$();var i=new r(qt({},e,{cy:u,eles:t}));return i}};pF.createLayout=pF.makeLayout=pF.layout;var yVe={notify:function(e,u){var n=this._private;if(this.batching()){n.batchNotifications=n.batchNotifications||{};var r=n.batchNotifications[e]=n.batchNotifications[e]||this.collection();u!=null&&r.merge(u);return}if(n.notificationsEnabled){var t=this.renderer();this.destroyed()||!t||t.notify(e,u)}},notifications:function(e){var u=this._private;return e===void 0?u.notificationsEnabled:(u.notificationsEnabled=!!e,this)},noNotifications:function(e){this.notifications(!1),e(),this.notifications(!0)},batching:function(){return this._private.batchCount>0},startBatch:function(){var e=this._private;return e.batchCount==null&&(e.batchCount=0),e.batchCount===0&&(e.batchStyleEles=this.collection(),e.batchNotifications={}),e.batchCount++,this},endBatch:function(){var e=this._private;if(e.batchCount===0)return this;if(e.batchCount--,e.batchCount===0){e.batchStyleEles.updateStyle();var u=this.renderer();Object.keys(e.batchNotifications).forEach(function(n){var r=e.batchNotifications[n];r.empty()?u.notify(n):u.notify(n,r)})}return this},batch:function(e){return this.startBatch(),e(),this.endBatch(),this},batchData:function(e){var u=this;return this.batch(function(){for(var n=Object.keys(e),r=0;r<n.length;r++){var t=n[r],i=e[t],o=u.getElementById(t);o.data(i)}})}},mVe=Ra({hideEdgesOnViewport:!1,textureOnViewport:!1,motionBlur:!1,motionBlurOpacity:.05,pixelRatio:void 0,desktopTapThreshold:4,touchTapThreshold:8,wheelSensitivity:1,debug:!1,showFps:!1,webgl:!1,webglDebug:!1,webglDebugShowAtlases:!1,webglTexSize:2048,webglTexRows:36,webglTexRowsNodes:18,webglBatchSize:2048,webglTexPerBatch:14,webglBgColor:[255,255,255]}),x7={renderTo:function(e,u,n,r){var t=this._private.renderer;return t.renderTo(e,u,n,r),this},renderer:function(){return this._private.renderer},forceRender:function(){return this.notify("draw"),this},resize:function(){return this.invalidateSize(),this.emitAndNotify("resize"),this},initRenderer:function(e){var u=this,n=u.extension("renderer",e.name);if(n==null){_n("Can not initialise: No such renderer `".concat(e.name,"` found. Did you forget to import it and `cytoscape.use()` it?"));return}e.wheelSensitivity!==void 0&&Lr("You have set a custom wheel sensitivity.  This will make your app zoom unnaturally when using mainstream mice.  You should change this value from the default only if you can guarantee that all your users will use the same hardware and OS configuration as your current machine.");var r=mVe(e);r.cy=u,u._private.renderer=new n(r),this.notify("init")},destroyRenderer:function(){var e=this;e.notify("destroy");var u=e.container();if(u)for(u._cyreg=null;u.childNodes.length>0;)u.removeChild(u.childNodes[0]);e._private.renderer=null,e.mutableElements().forEach(function(n){var r=n._private;r.rscratch={},r.rstyle={},r.animation.current=[],r.animation.queue=[]})},onRender:function(e){return this.on("render",e)},offRender:function(e){return this.off("render",e)}};x7.invalidateDimensions=x7.resize;var hF={collection:function(e,u){return Mt(e)?this.$(e):Bi(e)?e.collection():Wr(e)?(u||(u={}),new Oa(this,e,u.unique,u.removed)):new Oa(this)},nodes:function(e){var u=this.$(function(n){return n.isNode()});return e?u.filter(e):u},edges:function(e){var u=this.$(function(n){return n.isEdge()});return e?u.filter(e):u},$:function(e){var u=this._private.elements;return e?u.filter(e):u.spawnSelf()},mutableElements:function(){return this._private.elements}};hF.elements=hF.filter=hF.$;var da={},n4="t",bVe="f";da.apply=function(a){for(var e=this,u=e._private,n=u.cy,r=n.collection(),t=0;t<a.length;t++){var i=a[t],o=e.getContextMeta(i);if(!o.empty){var l=e.getContextStyle(o),s=e.applyContextStyle(o,l,i);i._private.appliedInitStyle?e.updateTransitions(i,s.diffProps):i._private.appliedInitStyle=!0;var c=e.updateStyleHints(i);c&&r.push(i)}}return r};da.getPropertiesDiff=function(a,e){var u=this,n=u._private.propDiffs=u._private.propDiffs||{},r=a+"-"+e,t=n[r];if(t)return t;for(var i=[],o={},l=0;l<u.length;l++){var s=u[l],c=a[l]===n4,d=e[l]===n4,f=c!==d,p=s.mappedProperties.length>0;if(f||d&&p){var h=void 0;f&&p||f?h=s.properties:p&&(h=s.mappedProperties);for(var g=0;g<h.length;g++){for(var v=h[g],m=v.name,T=!1,w=l+1;w<u.length;w++){var E=u[w],S=e[w]===n4;if(S&&(T=E.properties[v.name]!=null,T))break}!o[m]&&!T&&(o[m]=!0,i.push(m))}}}return n[r]=i,i};da.getContextMeta=function(a){for(var e=this,u="",n,r=a._private.styleCxtKey||"",t=0;t<e.length;t++){var i=e[t],o=i.selector&&i.selector.matches(a);o?u+=n4:u+=bVe}return n=e.getPropertiesDiff(r,u),a._private.styleCxtKey=u,{key:u,diffPropNames:n,empty:n.length===0}};da.getContextStyle=function(a){var e=a.key,u=this,n=this._private.contextStyles=this._private.contextStyles||{};if(n[e])return n[e];for(var r={_private:{key:e}},t=0;t<u.length;t++){var i=u[t],o=e[t]===n4;if(o)for(var l=0;l<i.properties.length;l++){var s=i.properties[l];r[s.name]=s}}return n[e]=r,r};da.applyContextStyle=function(a,e,u){for(var n=this,r=a.diffPropNames,t={},i=n.types,o=0;o<r.length;o++){var l=r[o],s=e[l],c=u.pstyle(l);if(!s)if(c)c.bypass?s={name:l,deleteBypassed:!0}:s={name:l,delete:!0};else continue;if(c!==s){if(s.mapped===i.fn&&c!=null&&c.mapping!=null&&c.mapping.value===s.value){var d=c.mapping,f=d.fnValue=s.value(u);if(f===d.prevFnValue)continue}var p=t[l]={prev:c};n.applyParsedProperty(u,s),p.next=u.pstyle(l),p.next&&p.next.bypass&&(p.next=p.next.bypassed)}}return{diffProps:t}};da.updateStyleHints=function(a){var e=a._private,u=this,n=u.propertyGroupNames,r=u.propertyGroupKeys,t=function(F,D,L){return u.getPropertiesHash(F,D,L)},i=e.styleKey;if(a.removed())return!1;var o=e.group==="nodes",l=a._private.style;n=Object.keys(l);for(var s=0;s<r.length;s++){var c=r[s];e.styleKeys[c]=[tb,Cg]}for(var d=function(F,D){return e.styleKeys[D][0]=b4(F,e.styleKeys[D][0])},f=function(F,D){return e.styleKeys[D][1]=g4(F,e.styleKeys[D][1])},p=function(F,D){d(F,D),f(F,D)},h=function(F,D){for(var L=0;L<F.length;L++){var Q=F.charCodeAt(L);d(Q,D),f(Q,D)}},g=2e9,v=function(F){return-128<F&&F<128&&Math.floor(F)!==F?g-(F*1024|0):F},m=0;m<n.length;m++){var T=n[m],w=l[T];if(w!=null){var E=this.properties[T],S=E.type,N=E.groupKey,j=void 0;E.hashOverride!=null?j=E.hashOverride(a,w):w.pfValue!=null&&(j=w.pfValue);var q=E.enums==null?w.value:null,O=j!=null,I=q!=null,A=O||I,P=w.units;if(S.number&&A&&!S.multiple){var C=O?j:q;p(v(C),N),!O&&P!=null&&h(P,N)}else h(w.strValue,N)}}for(var B=[tb,Cg],H=0;H<r.length;H++){var V=r[H],G=e.styleKeys[V];B[0]=b4(G[0],B[0]),B[1]=g4(G[1],B[1])}e.styleKey=Pqe(B[0],B[1]);var Z=e.styleKeys;e.labelDimsKey=Gc(Z.labelDimensions);var ae=t(a,["label"],Z.labelDimensions);if(e.labelKey=Gc(ae),e.labelStyleKey=Gc(FD(Z.commonLabel,ae)),!o){var W=t(a,["source-label"],Z.labelDimensions);e.sourceLabelKey=Gc(W),e.sourceLabelStyleKey=Gc(FD(Z.commonLabel,W));var te=t(a,["target-label"],Z.labelDimensions);e.targetLabelKey=Gc(te),e.targetLabelStyleKey=Gc(FD(Z.commonLabel,te))}if(o){var se=e.styleKeys,pe=se.nodeBody,le=se.nodeBorder,Ee=se.nodeOutline,Oe=se.backgroundImage,Ie=se.compound,Ae=se.pie,be=se.stripe,ee=[pe,le,Ee,Oe,Ie,Ae,be].filter(function(_){return _!=null}).reduce(FD,[tb,Cg]);e.nodeKey=Gc(ee),e.hasPie=Ae!=null&&Ae[0]!==tb&&Ae[1]!==Cg,e.hasStripe=be!=null&&be[0]!==tb&&be[1]!==Cg}return i!==e.styleKey};da.clearStyleHints=function(a){var e=a._private;e.styleCxtKey="",e.styleKeys={},e.styleKey=null,e.labelKey=null,e.labelStyleKey=null,e.sourceLabelKey=null,e.sourceLabelStyleKey=null,e.targetLabelKey=null,e.targetLabelStyleKey=null,e.nodeKey=null,e.hasPie=null,e.hasStripe=null};da.applyParsedProperty=function(a,e){var u=this,n=e,r=a._private.style,t,i=u.types,o=u.properties[n.name].type,l=n.bypass,s=r[n.name],c=s&&s.bypass,d=a._private,f="mapping",p=function(pe){return pe==null?null:pe.pfValue!=null?pe.pfValue:pe.value},h=function(){var pe=p(s),le=p(n);u.checkTriggers(a,n.name,pe,le)};if(e.name==="curve-style"&&a.isEdge()&&(e.value!=="bezier"&&a.isLoop()||e.value==="haystack"&&(a.source().isParent()||a.target().isParent()))&&(n=e=this.parse(e.name,"bezier",l)),n.delete)return r[n.name]=void 0,h(),!0;if(n.deleteBypassed)return s?s.bypass?(s.bypassed=void 0,h(),!0):!1:(h(),!0);if(n.deleteBypass)return s?s.bypass?(r[n.name]=s.bypassed,h(),!0):!1:(h(),!0);var g=function(){Lr("Do not assign mappings to elements without corresponding data (i.e. ele `"+a.id()+"` has no mapping for property `"+n.name+"` with data field `"+n.field+"`); try a `["+n.field+"]` selector to limit scope to elements with `"+n.field+"` defined")};switch(n.mapped){case i.mapData:{for(var v=n.field.split("."),m=d.data,T=0;T<v.length&&m;T++){var w=v[T];m=m[w]}if(m==null)return g(),!1;var E;if(At(m)){var S=n.fieldMax-n.fieldMin;S===0?E=0:E=(m-n.fieldMin)/S}else return Lr("Do not use continuous mappers without specifying numeric data (i.e. `"+n.field+": "+m+"` for `"+a.id()+"` is non-numeric)"),!1;if(E<0?E=0:E>1&&(E=1),o.color){var N=n.valueMin[0],j=n.valueMax[0],q=n.valueMin[1],O=n.valueMax[1],I=n.valueMin[2],A=n.valueMax[2],P=n.valueMin[3]==null?1:n.valueMin[3],C=n.valueMax[3]==null?1:n.valueMax[3],B=[Math.round(N+(j-N)*E),Math.round(q+(O-q)*E),Math.round(I+(A-I)*E),Math.round(P+(C-P)*E)];t={bypass:n.bypass,name:n.name,value:B,strValue:"rgb("+B[0]+", "+B[1]+", "+B[2]+")"}}else if(o.number){var H=n.valueMin+(n.valueMax-n.valueMin)*E;t=this.parse(n.name,H,n.bypass,f)}else return!1;if(!t)return g(),!1;t.mapping=n,n=t;break}case i.data:{for(var V=n.field.split("."),G=d.data,Z=0;Z<V.length&&G;Z++){var ae=V[Z];G=G[ae]}if(G!=null&&(t=this.parse(n.name,G,n.bypass,f)),!t)return g(),!1;t.mapping=n,n=t;break}case i.fn:{var W=n.value,te=n.fnValue!=null?n.fnValue:W(a);if(n.prevFnValue=te,te==null)return Lr("Custom function mappers may not return null (i.e. `"+n.name+"` for ele `"+a.id()+"` is null)"),!1;if(t=this.parse(n.name,te,n.bypass,f),!t)return Lr("Custom function mappers may not return invalid values for the property type (i.e. `"+n.name+"` for ele `"+a.id()+"` is invalid)"),!1;t.mapping=Uo(n),n=t;break}case void 0:break;default:return!1}return l?(c?n.bypassed=s.bypassed:n.bypassed=s,r[n.name]=n):c?s.bypassed=n:r[n.name]=n,h(),!0};da.cleanElements=function(a,e){for(var u=0;u<a.length;u++){var n=a[u];if(this.clearStyleHints(n),n.dirtyCompoundBoundsCache(),n.dirtyBoundingBoxCache(),!e)n._private.style={};else for(var r=n._private.style,t=Object.keys(r),i=0;i<t.length;i++){var o=t[i],l=r[o];l!=null&&(l.bypass?l.bypassed=null:r[o]=null)}}};da.update=function(){var a=this._private.cy,e=a.mutableElements();e.updateStyle()};da.updateTransitions=function(a,e){var u=this,n=a._private,r=a.pstyle("transition-property").value,t=a.pstyle("transition-duration").pfValue,i=a.pstyle("transition-delay").pfValue;if(r.length>0&&t>0){for(var o={},l=!1,s=0;s<r.length;s++){var c=r[s],d=a.pstyle(c),f=e[c];if(f){var p=f.prev,h=p,g=f.next!=null?f.next:d,v=!1,m=void 0,T=1e-6;h&&(At(h.pfValue)&&At(g.pfValue)?(v=g.pfValue-h.pfValue,m=h.pfValue+T*v):At(h.value)&&At(g.value)?(v=g.value-h.value,m=h.value+T*v):Wr(h.value)&&Wr(g.value)&&(v=h.value[0]!==g.value[0]||h.value[1]!==g.value[1]||h.value[2]!==g.value[2],m=h.strValue),v&&(o[c]=g.strValue,this.applyBypass(a,c,m),l=!0))}}if(!l)return;n.transitioning=!0,new R1(function(w){i>0?a.delayAnimation(i).play().promise().then(w):w()}).then(function(){return a.animation({style:o,duration:t,easing:a.pstyle("transition-timing-function").value,queue:!1}).play().promise()}).then(function(){u.removeBypasses(a,r),a.emitAndNotify("style"),n.transitioning=!1})}else n.transitioning&&(this.removeBypasses(a,r),a.emitAndNotify("style"),n.transitioning=!1)};da.checkTrigger=function(a,e,u,n,r,t){var i=this.properties[e],o=r(i);a.removed()||o!=null&&o(u,n,a)&&t(i)};da.checkZOrderTrigger=function(a,e,u,n){var r=this;this.checkTrigger(a,e,u,n,function(t){return t.triggersZOrder},function(){r._private.cy.notify("zorder",a)})};da.checkBoundsTrigger=function(a,e,u,n){this.checkTrigger(a,e,u,n,function(r){return r.triggersBounds},function(r){a.dirtyCompoundBoundsCache(),a.dirtyBoundingBoxCache()})};da.checkConnectedEdgesBoundsTrigger=function(a,e,u,n){this.checkTrigger(a,e,u,n,function(r){return r.triggersBoundsOfConnectedEdges},function(r){a.connectedEdges().forEach(function(t){t.dirtyBoundingBoxCache()})})};da.checkParallelEdgesBoundsTrigger=function(a,e,u,n){this.checkTrigger(a,e,u,n,function(r){return r.triggersBoundsOfParallelEdges},function(r){a.parallelEdges().forEach(function(t){t.dirtyBoundingBoxCache()})})};da.checkTriggers=function(a,e,u,n){a.dirtyStyleCache(),this.checkZOrderTrigger(a,e,u,n),this.checkBoundsTrigger(a,e,u,n),this.checkConnectedEdgesBoundsTrigger(a,e,u,n),this.checkParallelEdgesBoundsTrigger(a,e,u,n)};var yN={};yN.applyBypass=function(a,e,u,n){var r=this,t=[],i=!0;if(e==="*"||e==="**"){if(u!==void 0)for(var o=0;o<r.properties.length;o++){var l=r.properties[o],s=l.name,c=this.parse(s,u,!0);c&&t.push(c)}}else if(Mt(e)){var d=this.parse(e,u,!0);d&&t.push(d)}else if(_r(e)){var f=e;n=u;for(var p=Object.keys(f),h=0;h<p.length;h++){var g=p[h],v=f[g];if(v===void 0&&(v=f[MP(g)]),v!==void 0){var m=this.parse(g,v,!0);m&&t.push(m)}}}else return!1;if(t.length===0)return!1;for(var T=!1,w=0;w<a.length;w++){for(var E=a[w],S={},N=void 0,j=0;j<t.length;j++){var q=t[j];if(n){var O=E.pstyle(q.name);N=S[q.name]={prev:O}}T=this.applyParsedProperty(E,Uo(q))||T,n&&(N.next=E.pstyle(q.name))}T&&this.updateStyleHints(E),n&&this.updateTransitions(E,S,i)}return T};yN.overrideBypass=function(a,e,u){e=qH(e);for(var n=0;n<a.length;n++){var r=a[n],t=r._private.style[e],i=this.properties[e].type,o=i.color,l=i.mutiple,s=t?t.pfValue!=null?t.pfValue:t.value:null;!t||!t.bypass?this.applyBypass(r,e,u):(t.value=u,t.pfValue!=null&&(t.pfValue=u),o?t.strValue="rgb("+u.join(",")+")":l?t.strValue=u.join(" "):t.strValue=""+u,this.updateStyleHints(r)),this.checkTriggers(r,e,s,u)}};yN.removeAllBypasses=function(a,e){return this.removeBypasses(a,this.propertyNames,e)};yN.removeBypasses=function(a,e,u){for(var n=!0,r=0;r<a.length;r++){for(var t=a[r],i={},o=0;o<e.length;o++){var l=e[o],s=this.properties[l],c=t.pstyle(s.name);if(!(!c||!c.bypass)){var d="",f=this.parse(l,d,!0),p=i[s.name]={prev:c};this.applyParsedProperty(t,f),p.next=t.pstyle(s.name)}}this.updateStyleHints(t),u&&this.updateTransitions(t,i,n)}};var ZH={};ZH.getEmSizeInPixels=function(){var a=this.containerCss("font-size");return a!=null?parseFloat(a):1};ZH.containerCss=function(a){var e=this._private.cy,u=e.container(),n=e.window();if(n&&u&&n.getComputedStyle)return n.getComputedStyle(u).getPropertyValue(a)};var Vo={};Vo.getRenderedStyle=function(a,e){return e?this.getStylePropertyValue(a,e,!0):this.getRawStyle(a,!0)};Vo.getRawStyle=function(a,e){var u=this;if(a=a[0],a){for(var n={},r=0;r<u.properties.length;r++){var t=u.properties[r],i=u.getStylePropertyValue(a,t.name,e);i!=null&&(n[t.name]=i,n[MP(t.name)]=i)}return n}};Vo.getIndexedStyle=function(a,e,u,n){var r=a.pstyle(e)[u][n];return r??a.cy().style().getDefaultProperty(e)[u][0]};Vo.getStylePropertyValue=function(a,e,u){var n=this;if(a=a[0],a){var r=n.properties[e];r.alias&&(r=r.pointsTo);var t=r.type,i=a.pstyle(r.name);if(i){var o=i.value,l=i.units,s=i.strValue;if(u&&t.number&&o!=null&&At(o)){var c=a.cy().zoom(),d=function(v){return v*c},f=function(v,m){return d(v)+m},p=Wr(o),h=p?l.every(function(g){return g!=null}):l!=null;return h?p?o.map(function(g,v){return f(g,l[v])}).join(" "):f(o,l):p?o.map(function(g){return Mt(g)?g:""+d(g)}).join(" "):""+d(o)}else if(s!=null)return s}return null}};Vo.getAnimationStartStyle=function(a,e){for(var u={},n=0;n<e.length;n++){var r=e[n],t=r.name,i=a.pstyle(t);i!==void 0&&(_r(i)?i=this.parse(t,i.strValue):i=this.parse(t,i)),i&&(u[t]=i)}return u};Vo.getPropsList=function(a){var e=this,u=[],n=a,r=e.properties;if(n)for(var t=Object.keys(n),i=0;i<t.length;i++){var o=t[i],l=n[o],s=r[o]||r[qH(o)],c=this.parse(s.name,l);c&&u.push(c)}return u};Vo.getNonDefaultPropertiesHash=function(a,e,u){var n=u.slice(),r,t,i,o,l,s;for(l=0;l<e.length;l++)if(r=e[l],t=a.pstyle(r,!1),t!=null)if(t.pfValue!=null)n[0]=b4(o,n[0]),n[1]=g4(o,n[1]);else for(i=t.strValue,s=0;s<i.length;s++)o=i.charCodeAt(s),n[0]=b4(o,n[0]),n[1]=g4(o,n[1]);return n};Vo.getPropertiesHash=Vo.getNonDefaultPropertiesHash;var XP={};XP.appendFromJson=function(a){for(var e=this,u=0;u<a.length;u++){var n=a[u],r=n.selector,t=n.style||n.css,i=Object.keys(t);e.selector(r);for(var o=0;o<i.length;o++){var l=i[o],s=t[l];e.css(l,s)}}return e};XP.fromJson=function(a){var e=this;return e.resetToDefault(),e.appendFromJson(a),e};XP.json=function(){for(var a=[],e=this.defaultLength;e<this.length;e++){for(var u=this[e],n=u.selector,r=u.properties,t={},i=0;i<r.length;i++){var o=r[i];t[o.name]=o.strValue}a.push({selector:n?n.toString():"core",style:t})}return a};var ek={};ek.appendFromString=function(a){var e=this,u=this,n=""+a,r,t,i;n=n.replace(/[/][*](\s|.)+?[*][/]/g,"");function o(){n.length>r.length?n=n.substr(r.length):n=""}function l(){t.length>i.length?t=t.substr(i.length):t=""}for(;;){var s=n.match(/^\s*$/);if(s)break;var c=n.match(/^\s*((?:.|\s)+?)\s*\{((?:.|\s)+?)\}/);if(!c){Lr("Halting stylesheet parsing: String stylesheet contains more to parse but no selector and block found in: "+n);break}r=c[0];var d=c[1];if(d!=="core"){var f=new hl(d);if(f.invalid){Lr("Skipping parsing of block: Invalid selector found in string stylesheet: "+d),o();continue}}var p=c[2],h=!1;t=p;for(var g=[];;){var v=t.match(/^\s*$/);if(v)break;var m=t.match(/^\s*(.+?)\s*:\s*(.+?)(?:\s*;|\s*$)/);if(!m){Lr("Skipping parsing of block: Invalid formatting of style property and value definitions found in:"+p),h=!0;break}i=m[0];var T=m[1],w=m[2],E=e.properties[T];if(!E){Lr("Skipping property: Invalid property name in: "+i),l();continue}var S=u.parse(T,w);if(!S){Lr("Skipping property: Invalid property definition in: "+i),l();continue}g.push({name:T,val:w}),l()}if(h){o();break}u.selector(d);for(var N=0;N<g.length;N++){var j=g[N];u.css(j.name,j.val)}o()}return u};ek.fromString=function(a){var e=this;return e.resetToDefault(),e.appendFromString(a),e};var kn={};(function(){var a=ea,e=dqe,u=pqe,n=hqe,r=yqe,t=function(_){return"^"+_+"\\s*\\(\\s*([\\w\\.]+)\\s*\\)$"},i=function(_){var F=a+"|\\w+|"+e+"|"+u+"|"+n+"|"+r;return"^"+_+"\\s*\\(([\\w\\.]+)\\s*\\,\\s*("+a+")\\s*\\,\\s*("+a+")\\s*,\\s*("+F+")\\s*\\,\\s*("+F+")\\)$"},o=[`^url\\s*\\(\\s*['"]?(.+?)['"]?\\s*\\)$`,"^(none)$","^(.+)$"];kn.types={time:{number:!0,min:0,units:"s|ms",implicitUnits:"ms"},percent:{number:!0,min:0,max:100,units:"%",implicitUnits:"%"},percentages:{number:!0,min:0,max:100,units:"%",implicitUnits:"%",multiple:!0},zeroOneNumber:{number:!0,min:0,max:1,unitless:!0},zeroOneNumbers:{number:!0,min:0,max:1,unitless:!0,multiple:!0},nOneOneNumber:{number:!0,min:-1,max:1,unitless:!0},nonNegativeInt:{number:!0,min:0,integer:!0,unitless:!0},nonNegativeNumber:{number:!0,min:0,unitless:!0},position:{enums:["parent","origin"]},nodeSize:{number:!0,min:0,enums:["label"]},number:{number:!0,unitless:!0},numbers:{number:!0,unitless:!0,multiple:!0},positiveNumber:{number:!0,unitless:!0,min:0,strictMin:!0},size:{number:!0,min:0},bidirectionalSize:{number:!0},bidirectionalSizeMaybePercent:{number:!0,allowPercent:!0},bidirectionalSizes:{number:!0,multiple:!0},sizeMaybePercent:{number:!0,min:0,allowPercent:!0},axisDirection:{enums:["horizontal","leftward","rightward","vertical","upward","downward","auto"]},axisDirectionExplicit:{enums:["leftward","rightward","upward","downward"]},axisDirectionPrimary:{enums:["horizontal","vertical"]},paddingRelativeTo:{enums:["width","height","average","min","max"]},bgWH:{number:!0,min:0,allowPercent:!0,enums:["auto"],multiple:!0},bgPos:{number:!0,allowPercent:!0,multiple:!0},bgRelativeTo:{enums:["inner","include-padding"],multiple:!0},bgRepeat:{enums:["repeat","repeat-x","repeat-y","no-repeat"],multiple:!0},bgFit:{enums:["none","contain","cover"],multiple:!0},bgCrossOrigin:{enums:["anonymous","use-credentials","null"],multiple:!0},bgClip:{enums:["none","node"],multiple:!0},bgContainment:{enums:["inside","over"],multiple:!0},boxSelection:{enums:["contain","overlap","none"]},color:{color:!0},colors:{color:!0,multiple:!0},fill:{enums:["solid","linear-gradient","radial-gradient"]},bool:{enums:["yes","no"]},bools:{enums:["yes","no"],multiple:!0},lineStyle:{enums:["solid","dotted","dashed"]},lineCap:{enums:["butt","round","square"]},linePosition:{enums:["center","inside","outside"]},lineJoin:{enums:["round","bevel","miter"]},borderStyle:{enums:["solid","dotted","dashed","double"]},curveStyle:{enums:["bezier","unbundled-bezier","haystack","segments","straight","straight-triangle","taxi","round-segments","round-taxi"]},radiusType:{enums:["arc-radius","influence-radius"],multiple:!0},fontFamily:{regex:'^([\\w- \\"]+(?:\\s*,\\s*[\\w- \\"]+)*)$'},fontStyle:{enums:["italic","normal","oblique"]},fontWeight:{enums:["normal","bold","bolder","lighter","100","200","300","400","500","600","800","900",100,200,300,400,500,600,700,800,900]},textDecoration:{enums:["none","underline","overline","line-through"]},textTransform:{enums:["none","uppercase","lowercase"]},textWrap:{enums:["none","wrap","ellipsis"]},textOverflowWrap:{enums:["whitespace","anywhere"]},textBackgroundShape:{enums:["rectangle","roundrectangle","round-rectangle","circle"]},nodeShape:{enums:["rectangle","roundrectangle","round-rectangle","cutrectangle","cut-rectangle","bottomroundrectangle","bottom-round-rectangle","barrel","ellipse","triangle","round-triangle","square","pentagon","round-pentagon","hexagon","round-hexagon","concavehexagon","concave-hexagon","heptagon","round-heptagon","octagon","round-octagon","tag","round-tag","star","diamond","round-diamond","vee","rhomboid","right-rhomboid","polygon"]},overlayShape:{enums:["roundrectangle","round-rectangle","ellipse"]},cornerRadius:{number:!0,min:0,units:"px|em",implicitUnits:"px",enums:["auto"]},compoundIncludeLabels:{enums:["include","exclude"]},arrowShape:{enums:["tee","triangle","triangle-tee","circle-triangle","triangle-cross","triangle-backcurve","vee","square","circle","diamond","chevron","none"]},arrowFill:{enums:["filled","hollow"]},arrowWidth:{number:!0,units:"%|px|em",implicitUnits:"px",enums:["match-line"]},display:{enums:["element","none"]},visibility:{enums:["hidden","visible"]},zCompoundDepth:{enums:["bottom","orphan","auto","top"]},zIndexCompare:{enums:["auto","manual"]},valign:{enums:["top","center","bottom"]},halign:{enums:["left","center","right"]},justification:{enums:["left","center","right","auto"]},text:{string:!0},data:{mapping:!0,regex:t("data")},layoutData:{mapping:!0,regex:t("layoutData")},scratch:{mapping:!0,regex:t("scratch")},mapData:{mapping:!0,regex:i("mapData")},mapLayoutData:{mapping:!0,regex:i("mapLayoutData")},mapScratch:{mapping:!0,regex:i("mapScratch")},fn:{mapping:!0,fn:!0},url:{regexes:o,singleRegexMatchValue:!0},urls:{regexes:o,singleRegexMatchValue:!0,multiple:!0},propList:{propList:!0},angle:{number:!0,units:"deg|rad",implicitUnits:"rad"},textRotation:{number:!0,units:"deg|rad",implicitUnits:"rad",enums:["none","autorotate"]},polygonPointList:{number:!0,multiple:!0,evenMultiple:!0,min:-1,max:1,unitless:!0},edgeDistances:{enums:["intersection","node-position","endpoints"]},edgeEndpoint:{number:!0,multiple:!0,units:"%|px|em|deg|rad",implicitUnits:"px",enums:["inside-to-node","outside-to-node","outside-to-node-or-label","outside-to-line","outside-to-line-or-label"],singleEnum:!0,validate:function(_,F){switch(_.length){case 2:return F[0]!=="deg"&&F[0]!=="rad"&&F[1]!=="deg"&&F[1]!=="rad";case 1:return Mt(_[0])||F[0]==="deg"||F[0]==="rad";default:return!1}}},easing:{regexes:["^(spring)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$","^(cubic-bezier)\\s*\\(\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*,\\s*("+a+")\\s*\\)$"],enums:["linear","ease","ease-in","ease-out","ease-in-out","ease-in-sine","ease-out-sine","ease-in-out-sine","ease-in-quad","ease-out-quad","ease-in-out-quad","ease-in-cubic","ease-out-cubic","ease-in-out-cubic","ease-in-quart","ease-out-quart","ease-in-out-quart","ease-in-quint","ease-out-quint","ease-in-out-quint","ease-in-expo","ease-out-expo","ease-in-out-expo","ease-in-circ","ease-out-circ","ease-in-out-circ"]},gradientDirection:{enums:["to-bottom","to-top","to-left","to-right","to-bottom-right","to-bottom-left","to-top-right","to-top-left","to-right-bottom","to-left-bottom","to-right-top","to-left-top"]},boundsExpansion:{number:!0,multiple:!0,min:0,validate:function(_){var F=_.length;return F===1||F===2||F===4}}};var l={zeroNonZero:function(_,F){return(_==null||F==null)&&_!==F||_==0&&F!=0?!0:_!=0&&F==0},any:function(_,F){return _!=F},emptyNonEmpty:function(_,F){var D=dl(_),L=dl(F);return D&&!L||!D&&L}},s=kn.types,c=[{name:"label",type:s.text,triggersBounds:l.any,triggersZOrder:l.emptyNonEmpty},{name:"text-rotation",type:s.textRotation,triggersBounds:l.any},{name:"text-margin-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"text-margin-y",type:s.bidirectionalSize,triggersBounds:l.any}],d=[{name:"source-label",type:s.text,triggersBounds:l.any},{name:"source-text-rotation",type:s.textRotation,triggersBounds:l.any},{name:"source-text-margin-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"source-text-margin-y",type:s.bidirectionalSize,triggersBounds:l.any},{name:"source-text-offset",type:s.size,triggersBounds:l.any}],f=[{name:"target-label",type:s.text,triggersBounds:l.any},{name:"target-text-rotation",type:s.textRotation,triggersBounds:l.any},{name:"target-text-margin-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"target-text-margin-y",type:s.bidirectionalSize,triggersBounds:l.any},{name:"target-text-offset",type:s.size,triggersBounds:l.any}],p=[{name:"font-family",type:s.fontFamily,triggersBounds:l.any},{name:"font-style",type:s.fontStyle,triggersBounds:l.any},{name:"font-weight",type:s.fontWeight,triggersBounds:l.any},{name:"font-size",type:s.size,triggersBounds:l.any},{name:"text-transform",type:s.textTransform,triggersBounds:l.any},{name:"text-wrap",type:s.textWrap,triggersBounds:l.any},{name:"text-overflow-wrap",type:s.textOverflowWrap,triggersBounds:l.any},{name:"text-max-width",type:s.size,triggersBounds:l.any},{name:"text-outline-width",type:s.size,triggersBounds:l.any},{name:"line-height",type:s.positiveNumber,triggersBounds:l.any}],h=[{name:"text-valign",type:s.valign,triggersBounds:l.any},{name:"text-halign",type:s.halign,triggersBounds:l.any},{name:"color",type:s.color},{name:"text-outline-color",type:s.color},{name:"text-outline-opacity",type:s.zeroOneNumber},{name:"text-background-color",type:s.color},{name:"text-background-opacity",type:s.zeroOneNumber},{name:"text-background-padding",type:s.size,triggersBounds:l.any},{name:"text-border-opacity",type:s.zeroOneNumber},{name:"text-border-color",type:s.color},{name:"text-border-width",type:s.size,triggersBounds:l.any},{name:"text-border-style",type:s.borderStyle,triggersBounds:l.any},{name:"text-background-shape",type:s.textBackgroundShape,triggersBounds:l.any},{name:"text-justification",type:s.justification},{name:"box-select-labels",type:s.bool,triggersBounds:l.any}],g=[{name:"events",type:s.bool,triggersZOrder:l.any},{name:"text-events",type:s.bool,triggersZOrder:l.any},{name:"box-selection",type:s.boxSelection,triggersZOrder:l.any}],v=[{name:"display",type:s.display,triggersZOrder:l.any,triggersBounds:l.any,triggersBoundsOfConnectedEdges:l.any,triggersBoundsOfParallelEdges:function(_,F,D){return _===F?!1:D.pstyle("curve-style").value==="bezier"}},{name:"visibility",type:s.visibility,triggersZOrder:l.any},{name:"opacity",type:s.zeroOneNumber,triggersZOrder:l.zeroNonZero},{name:"text-opacity",type:s.zeroOneNumber},{name:"min-zoomed-font-size",type:s.size},{name:"z-compound-depth",type:s.zCompoundDepth,triggersZOrder:l.any},{name:"z-index-compare",type:s.zIndexCompare,triggersZOrder:l.any},{name:"z-index",type:s.number,triggersZOrder:l.any}],m=[{name:"overlay-padding",type:s.size,triggersBounds:l.any},{name:"overlay-color",type:s.color},{name:"overlay-opacity",type:s.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"overlay-shape",type:s.overlayShape,triggersBounds:l.any},{name:"overlay-corner-radius",type:s.cornerRadius}],T=[{name:"underlay-padding",type:s.size,triggersBounds:l.any},{name:"underlay-color",type:s.color},{name:"underlay-opacity",type:s.zeroOneNumber,triggersBounds:l.zeroNonZero},{name:"underlay-shape",type:s.overlayShape,triggersBounds:l.any},{name:"underlay-corner-radius",type:s.cornerRadius}],w=[{name:"transition-property",type:s.propList},{name:"transition-duration",type:s.time},{name:"transition-delay",type:s.time},{name:"transition-timing-function",type:s.easing}],E=function(_,F){return F.value==="label"?-_.poolIndex():F.pfValue},S=[{name:"height",type:s.nodeSize,triggersBounds:l.any,hashOverride:E},{name:"width",type:s.nodeSize,triggersBounds:l.any,hashOverride:E},{name:"shape",type:s.nodeShape,triggersBounds:l.any},{name:"shape-polygon-points",type:s.polygonPointList,triggersBounds:l.any},{name:"corner-radius",type:s.cornerRadius},{name:"background-color",type:s.color},{name:"background-fill",type:s.fill},{name:"background-opacity",type:s.zeroOneNumber},{name:"background-blacken",type:s.nOneOneNumber},{name:"background-gradient-stop-colors",type:s.colors},{name:"background-gradient-stop-positions",type:s.percentages},{name:"background-gradient-direction",type:s.gradientDirection},{name:"padding",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"padding-relative-to",type:s.paddingRelativeTo,triggersBounds:l.any},{name:"bounds-expansion",type:s.boundsExpansion,triggersBounds:l.any}],N=[{name:"border-color",type:s.color},{name:"border-opacity",type:s.zeroOneNumber},{name:"border-width",type:s.size,triggersBounds:l.any},{name:"border-style",type:s.borderStyle},{name:"border-cap",type:s.lineCap},{name:"border-join",type:s.lineJoin},{name:"border-dash-pattern",type:s.numbers},{name:"border-dash-offset",type:s.number},{name:"border-position",type:s.linePosition}],j=[{name:"outline-color",type:s.color},{name:"outline-opacity",type:s.zeroOneNumber},{name:"outline-width",type:s.size,triggersBounds:l.any},{name:"outline-style",type:s.borderStyle},{name:"outline-offset",type:s.size,triggersBounds:l.any}],q=[{name:"background-image",type:s.urls},{name:"background-image-crossorigin",type:s.bgCrossOrigin},{name:"background-image-opacity",type:s.zeroOneNumbers},{name:"background-image-containment",type:s.bgContainment},{name:"background-image-smoothing",type:s.bools},{name:"background-position-x",type:s.bgPos},{name:"background-position-y",type:s.bgPos},{name:"background-width-relative-to",type:s.bgRelativeTo},{name:"background-height-relative-to",type:s.bgRelativeTo},{name:"background-repeat",type:s.bgRepeat},{name:"background-fit",type:s.bgFit},{name:"background-clip",type:s.bgClip},{name:"background-width",type:s.bgWH},{name:"background-height",type:s.bgWH},{name:"background-offset-x",type:s.bgPos},{name:"background-offset-y",type:s.bgPos}],O=[{name:"position",type:s.position,triggersBounds:l.any},{name:"compound-sizing-wrt-labels",type:s.compoundIncludeLabels,triggersBounds:l.any},{name:"min-width",type:s.size,triggersBounds:l.any},{name:"min-width-bias-left",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"min-width-bias-right",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"min-height",type:s.size,triggersBounds:l.any},{name:"min-height-bias-top",type:s.sizeMaybePercent,triggersBounds:l.any},{name:"min-height-bias-bottom",type:s.sizeMaybePercent,triggersBounds:l.any}],I=[{name:"line-style",type:s.lineStyle},{name:"line-color",type:s.color},{name:"line-fill",type:s.fill},{name:"line-cap",type:s.lineCap},{name:"line-opacity",type:s.zeroOneNumber},{name:"line-dash-pattern",type:s.numbers},{name:"line-dash-offset",type:s.number},{name:"line-outline-width",type:s.size},{name:"line-outline-color",type:s.color},{name:"line-gradient-stop-colors",type:s.colors},{name:"line-gradient-stop-positions",type:s.percentages},{name:"curve-style",type:s.curveStyle,triggersBounds:l.any,triggersBoundsOfParallelEdges:function(_,F){return _===F?!1:_==="bezier"||F==="bezier"}},{name:"haystack-radius",type:s.zeroOneNumber,triggersBounds:l.any},{name:"source-endpoint",type:s.edgeEndpoint,triggersBounds:l.any},{name:"target-endpoint",type:s.edgeEndpoint,triggersBounds:l.any},{name:"control-point-step-size",type:s.size,triggersBounds:l.any},{name:"control-point-distances",type:s.bidirectionalSizes,triggersBounds:l.any},{name:"control-point-weights",type:s.numbers,triggersBounds:l.any},{name:"segment-distances",type:s.bidirectionalSizes,triggersBounds:l.any},{name:"segment-weights",type:s.numbers,triggersBounds:l.any},{name:"segment-radii",type:s.numbers,triggersBounds:l.any},{name:"radius-type",type:s.radiusType,triggersBounds:l.any},{name:"taxi-turn",type:s.bidirectionalSizeMaybePercent,triggersBounds:l.any},{name:"taxi-turn-min-distance",type:s.size,triggersBounds:l.any},{name:"taxi-direction",type:s.axisDirection,triggersBounds:l.any},{name:"taxi-radius",type:s.number,triggersBounds:l.any},{name:"edge-distances",type:s.edgeDistances,triggersBounds:l.any},{name:"arrow-scale",type:s.positiveNumber,triggersBounds:l.any},{name:"loop-direction",type:s.angle,triggersBounds:l.any},{name:"loop-sweep",type:s.angle,triggersBounds:l.any},{name:"source-distance-from-node",type:s.size,triggersBounds:l.any},{name:"target-distance-from-node",type:s.size,triggersBounds:l.any}],A=[{name:"ghost",type:s.bool,triggersBounds:l.any},{name:"ghost-offset-x",type:s.bidirectionalSize,triggersBounds:l.any},{name:"ghost-offset-y",type:s.bidirectionalSize,triggersBounds:l.any},{name:"ghost-opacity",type:s.zeroOneNumber}],P=[{name:"selection-box-color",type:s.color},{name:"selection-box-opacity",type:s.zeroOneNumber},{name:"selection-box-border-color",type:s.color},{name:"selection-box-border-width",type:s.size},{name:"active-bg-color",type:s.color},{name:"active-bg-opacity",type:s.zeroOneNumber},{name:"active-bg-size",type:s.size},{name:"outside-texture-bg-color",type:s.color},{name:"outside-texture-bg-opacity",type:s.zeroOneNumber}],C=[];kn.pieBackgroundN=16,C.push({name:"pie-size",type:s.sizeMaybePercent}),C.push({name:"pie-hole",type:s.sizeMaybePercent}),C.push({name:"pie-start-angle",type:s.angle});for(var B=1;B<=kn.pieBackgroundN;B++)C.push({name:"pie-"+B+"-background-color",type:s.color}),C.push({name:"pie-"+B+"-background-size",type:s.percent}),C.push({name:"pie-"+B+"-background-opacity",type:s.zeroOneNumber});var H=[];kn.stripeBackgroundN=16,H.push({name:"stripe-size",type:s.sizeMaybePercent}),H.push({name:"stripe-direction",type:s.axisDirectionPrimary});for(var V=1;V<=kn.stripeBackgroundN;V++)H.push({name:"stripe-"+V+"-background-color",type:s.color}),H.push({name:"stripe-"+V+"-background-size",type:s.percent}),H.push({name:"stripe-"+V+"-background-opacity",type:s.zeroOneNumber});var G=[],Z=kn.arrowPrefixes=["source","mid-source","target","mid-target"];[{name:"arrow-shape",type:s.arrowShape,triggersBounds:l.any},{name:"arrow-color",type:s.color},{name:"arrow-fill",type:s.arrowFill},{name:"arrow-width",type:s.arrowWidth}].forEach(function(ee){Z.forEach(function(_){var F=_+"-"+ee.name,D=ee.type,L=ee.triggersBounds;G.push({name:F,type:D,triggersBounds:L})})},{});var ae=kn.properties=[].concat(g,w,v,m,T,A,h,p,c,d,f,S,N,j,q,C,H,O,I,G,P),W=kn.propertyGroups={behavior:g,transition:w,visibility:v,overlay:m,underlay:T,ghost:A,commonLabel:h,labelDimensions:p,mainLabel:c,sourceLabel:d,targetLabel:f,nodeBody:S,nodeBorder:N,nodeOutline:j,backgroundImage:q,pie:C,stripe:H,compound:O,edgeLine:I,edgeArrow:G,core:P},te=kn.propertyGroupNames={},se=kn.propertyGroupKeys=Object.keys(W);se.forEach(function(ee){te[ee]=W[ee].map(function(_){return _.name}),W[ee].forEach(function(_){return _.groupKey=ee})});var pe=kn.aliases=[{name:"content",pointsTo:"label"},{name:"control-point-distance",pointsTo:"control-point-distances"},{name:"control-point-weight",pointsTo:"control-point-weights"},{name:"segment-distance",pointsTo:"segment-distances"},{name:"segment-weight",pointsTo:"segment-weights"},{name:"segment-radius",pointsTo:"segment-radii"},{name:"edge-text-rotation",pointsTo:"text-rotation"},{name:"padding-left",pointsTo:"padding"},{name:"padding-right",pointsTo:"padding"},{name:"padding-top",pointsTo:"padding"},{name:"padding-bottom",pointsTo:"padding"}];kn.propertyNames=ae.map(function(ee){return ee.name});for(var le=0;le<ae.length;le++){var Ee=ae[le];ae[Ee.name]=Ee}for(var Oe=0;Oe<pe.length;Oe++){var Ie=pe[Oe],Ae=ae[Ie.pointsTo],be={name:Ie.name,alias:!0,pointsTo:Ae};ae.push(be),ae[Ie.name]=be}})();kn.getDefaultProperty=function(a){return this.getDefaultProperties()[a]};kn.getDefaultProperties=function(){var a=this._private;if(a.defaultProperties!=null)return a.defaultProperties;for(var e=qt({"selection-box-color":"#ddd","selection-box-opacity":.65,"selection-box-border-color":"#aaa","selection-box-border-width":1,"active-bg-color":"black","active-bg-opacity":.15,"active-bg-size":30,"outside-texture-bg-color":"#000","outside-texture-bg-opacity":.125,events:"yes","text-events":"no","text-valign":"top","text-halign":"center","text-justification":"auto","line-height":1,color:"#000","box-selection":"contain","text-outline-color":"#000","text-outline-width":0,"text-outline-opacity":1,"text-opacity":1,"text-decoration":"none","text-transform":"none","text-wrap":"none","text-overflow-wrap":"whitespace","text-max-width":9999,"text-background-color":"#000","text-background-opacity":0,"text-background-shape":"rectangle","text-background-padding":0,"text-border-opacity":0,"text-border-width":0,"text-border-style":"solid","text-border-color":"#000","font-family":"Helvetica Neue, Helvetica, sans-serif","font-style":"normal","font-weight":"normal","font-size":16,"min-zoomed-font-size":0,"text-rotation":"none","source-text-rotation":"none","target-text-rotation":"none",visibility:"visible",display:"element",opacity:1,"z-compound-depth":"auto","z-index-compare":"auto","z-index":0,label:"","text-margin-x":0,"text-margin-y":0,"source-label":"","source-text-offset":0,"source-text-margin-x":0,"source-text-margin-y":0,"target-label":"","target-text-offset":0,"target-text-margin-x":0,"target-text-margin-y":0,"overlay-opacity":0,"overlay-color":"#000","overlay-padding":10,"overlay-shape":"round-rectangle","overlay-corner-radius":"auto","underlay-opacity":0,"underlay-color":"#000","underlay-padding":10,"underlay-shape":"round-rectangle","underlay-corner-radius":"auto","transition-property":"none","transition-duration":0,"transition-delay":0,"transition-timing-function":"linear","box-select-labels":"no","background-blacken":0,"background-color":"#999","background-fill":"solid","background-opacity":1,"background-image":"none","background-image-crossorigin":"anonymous","background-image-opacity":1,"background-image-containment":"inside","background-image-smoothing":"yes","background-position-x":"50%","background-position-y":"50%","background-offset-x":0,"background-offset-y":0,"background-width-relative-to":"include-padding","background-height-relative-to":"include-padding","background-repeat":"no-repeat","background-fit":"none","background-clip":"node","background-width":"auto","background-height":"auto","border-color":"#000","border-opacity":1,"border-width":0,"border-style":"solid","border-dash-pattern":[4,2],"border-dash-offset":0,"border-cap":"butt","border-join":"miter","border-position":"center","outline-color":"#999","outline-opacity":1,"outline-width":0,"outline-offset":0,"outline-style":"solid",height:30,width:30,shape:"ellipse","shape-polygon-points":"-1, -1,   1, -1,   1, 1,   -1, 1","corner-radius":"auto","bounds-expansion":0,"background-gradient-direction":"to-bottom","background-gradient-stop-colors":"#999","background-gradient-stop-positions":"0%",ghost:"no","ghost-offset-y":0,"ghost-offset-x":0,"ghost-opacity":0,padding:0,"padding-relative-to":"width",position:"origin","compound-sizing-wrt-labels":"include","min-width":0,"min-width-bias-left":0,"min-width-bias-right":0,"min-height":0,"min-height-bias-top":0,"min-height-bias-bottom":0},{"pie-size":"100%","pie-hole":0,"pie-start-angle":"0deg"},[{name:"pie-{{i}}-background-color",value:"black"},{name:"pie-{{i}}-background-size",value:"0%"},{name:"pie-{{i}}-background-opacity",value:1}].reduce(function(l,s){for(var c=1;c<=kn.pieBackgroundN;c++){var d=s.name.replace("{{i}}",c),f=s.value;l[d]=f}return l},{}),{"stripe-size":"100%","stripe-direction":"horizontal"},[{name:"stripe-{{i}}-background-color",value:"black"},{name:"stripe-{{i}}-background-size",value:"0%"},{name:"stripe-{{i}}-background-opacity",value:1}].reduce(function(l,s){for(var c=1;c<=kn.stripeBackgroundN;c++){var d=s.name.replace("{{i}}",c),f=s.value;l[d]=f}return l},{}),{"line-style":"solid","line-color":"#999","line-fill":"solid","line-cap":"butt","line-opacity":1,"line-outline-width":0,"line-outline-color":"#000","line-gradient-stop-colors":"#999","line-gradient-stop-positions":"0%","control-point-step-size":40,"control-point-weights":.5,"segment-weights":.5,"segment-distances":20,"segment-radii":15,"radius-type":"arc-radius","taxi-turn":"50%","taxi-radius":15,"taxi-turn-min-distance":10,"taxi-direction":"auto","edge-distances":"intersection","curve-style":"haystack","haystack-radius":0,"arrow-scale":1,"loop-direction":"-45deg","loop-sweep":"-90deg","source-distance-from-node":0,"target-distance-from-node":0,"source-endpoint":"outside-to-node","target-endpoint":"outside-to-node","line-dash-pattern":[6,3],"line-dash-offset":0},[{name:"arrow-shape",value:"none"},{name:"arrow-color",value:"#999"},{name:"arrow-fill",value:"filled"},{name:"arrow-width",value:1}].reduce(function(l,s){return kn.arrowPrefixes.forEach(function(c){var d=c+"-"+s.name,f=s.value;l[d]=f}),l},{})),u={},n=0;n<this.properties.length;n++){var r=this.properties[n];if(!r.pointsTo){var t=r.name,i=e[t],o=this.parse(t,i);u[t]=o}}return a.defaultProperties=u,a.defaultProperties};kn.addDefaultStylesheet=function(){this.selector(":parent").css({shape:"rectangle",padding:10,"background-color":"#eee","border-color":"#ccc","border-width":1}).selector("edge").css({width:3}).selector(":loop").css({"curve-style":"bezier"}).selector("edge:compound").css({"curve-style":"bezier","source-endpoint":"outside-to-line","target-endpoint":"outside-to-line"}).selector(":selected").css({"background-color":"#0169D9","line-color":"#0169D9","source-arrow-color":"#0169D9","target-arrow-color":"#0169D9","mid-source-arrow-color":"#0169D9","mid-target-arrow-color":"#0169D9"}).selector(":parent:selected").css({"background-color":"#CCE1F9","border-color":"#aec8e5"}).selector(":active").css({"overlay-color":"black","overlay-padding":10,"overlay-opacity":.25}),this.defaultLength=this.length};var KP={};KP.parse=function(a,e,u,n){var r=this;if(On(e))return r.parseImplWarn(a,e,u,n);var t=n==="mapping"||n===!0||n===!1||n==null?"dontcare":n,i=u?"t":"f",o=""+e,l=zwe(a,o,i,t),s=r.propCache=r.propCache||[],c;return(c=s[l])||(c=s[l]=r.parseImplWarn(a,e,u,n)),(u||n==="mapping")&&(c=Uo(c),c&&(c.value=Uo(c.value))),c};KP.parseImplWarn=function(a,e,u,n){var r=this.parseImpl(a,e,u,n);return!r&&e!=null&&Lr("The style property `".concat(a,": ").concat(e,"` is invalid")),r&&(r.name==="width"||r.name==="height")&&e==="label"&&Lr("The style value of `label` is deprecated for `"+r.name+"`"),r};KP.parseImpl=function(a,e,u,n){var r=this;a=qH(a);var t=r.properties[a],i=e,o=r.types;if(!t||e===void 0)return null;t.alias&&(t=t.pointsTo,a=t.name);var l=Mt(e);l&&(e=e.trim());var s=t.type;if(!s)return null;if(u&&(e===""||e===null))return{name:a,value:e,bypass:!0,deleteBypass:!0};if(On(e))return{name:a,value:e,strValue:"fn",mapped:o.fn,bypass:u};var c,d;if(!(!l||n||e.length<7||e[1]!=="a")){if(e.length>=7&&e[0]==="d"&&(c=new RegExp(o.data.regex).exec(e))){if(u)return!1;var f=o.data;return{name:a,value:c,strValue:""+e,mapped:f,field:c[1],bypass:u}}else if(e.length>=10&&e[0]==="m"&&(d=new RegExp(o.mapData.regex).exec(e))){if(u||s.multiple)return!1;var p=o.mapData;if(!(s.color||s.number))return!1;var h=this.parse(a,d[4]);if(!h||h.mapped)return!1;var g=this.parse(a,d[5]);if(!g||g.mapped)return!1;if(h.pfValue===g.pfValue||h.strValue===g.strValue)return Lr("`"+a+": "+e+"` is not a valid mapper because the output range is zero; converting to `"+a+": "+h.strValue+"`"),this.parse(a,h.strValue);if(s.color){var v=h.value,m=g.value,T=v[0]===m[0]&&v[1]===m[1]&&v[2]===m[2]&&(v[3]===m[3]||(v[3]==null||v[3]===1)&&(m[3]==null||m[3]===1));if(T)return!1}return{name:a,value:d,strValue:""+e,mapped:p,field:d[1],fieldMin:parseFloat(d[2]),fieldMax:parseFloat(d[3]),valueMin:h.value,valueMax:g.value,bypass:u}}}if(s.multiple&&n!=="multiple"){var w;if(l?w=e.split(/\s+/):Wr(e)?w=e:w=[e],s.evenMultiple&&w.length%2!==0)return null;for(var E=[],S=[],N=[],j="",q=!1,O=0;O<w.length;O++){var I=r.parse(a,w[O],u,"multiple");q=q||Mt(I.value),E.push(I.value),N.push(I.pfValue!=null?I.pfValue:I.value),S.push(I.units),j+=(O>0?" ":"")+I.strValue}return s.validate&&!s.validate(E,S)?null:s.singleEnum&&q?E.length===1&&Mt(E[0])?{name:a,value:E[0],strValue:E[0],bypass:u}:null:{name:a,value:E,pfValue:N,strValue:j,bypass:u,units:S}}var A=function(){for(var be=0;be<s.enums.length;be++){var ee=s.enums[be];if(ee===e)return{name:a,value:e,strValue:""+e,bypass:u}}return null};if(s.number){var P,C="px";if(s.units&&(P=s.units),s.implicitUnits&&(C=s.implicitUnits),!s.unitless)if(l){var B="px|em"+(s.allowPercent?"|\\%":"");P&&(B=P);var H=e.match("^("+ea+")("+B+")?$");H&&(e=H[1],P=H[2]||C)}else(!P||s.implicitUnits)&&(P=C);if(e=parseFloat(e),isNaN(e)&&s.enums===void 0)return null;if(isNaN(e)&&s.enums!==void 0)return e=i,A();if(s.integer&&!aqe(e)||s.min!==void 0&&(e<s.min||s.strictMin&&e===s.min)||s.max!==void 0&&(e>s.max||s.strictMax&&e===s.max))return null;var V={name:a,value:e,strValue:""+e+(P||""),units:P,bypass:u};return s.unitless||P!=="px"&&P!=="em"?V.pfValue=e:V.pfValue=P==="px"||!P?e:this.getEmSizeInPixels()*e,(P==="ms"||P==="s")&&(V.pfValue=P==="ms"?e:1e3*e),(P==="deg"||P==="rad")&&(V.pfValue=P==="rad"?e:hBe(e)),P==="%"&&(V.pfValue=e/100),V}else if(s.propList){var G=[],Z=""+e;if(Z!=="none"){for(var ae=Z.split(/\s*,\s*|\s+/),W=0;W<ae.length;W++){var te=ae[W].trim();r.properties[te]?G.push(te):Lr("`"+te+"` is not a valid property name")}if(G.length===0)return null}return{name:a,value:G,strValue:G.length===0?"none":G.join(" "),bypass:u}}else if(s.color){var se=qwe(e);return se?{name:a,value:se,pfValue:se,strValue:"rgb("+se[0]+","+se[1]+","+se[2]+")",bypass:u}:null}else if(s.regex||s.regexes){if(s.enums){var pe=A();if(pe)return pe}for(var le=s.regexes?s.regexes:[s.regex],Ee=0;Ee<le.length;Ee++){var Oe=new RegExp(le[Ee]),Ie=Oe.exec(e);if(Ie)return{name:a,value:s.singleRegexMatchValue?Ie[1]:Ie,strValue:""+e,bypass:u}}return null}else return s.string?{name:a,value:""+e,strValue:""+e,bypass:u}:s.enums?A():null};var la=function(e){if(!(this instanceof la))return new la(e);if(!LH(e)){_n("A style must have a core reference");return}this._private={cy:e,coreStyle:{}},this.length=0,this.resetToDefault()},Ba=la.prototype;Ba.instanceString=function(){return"style"};Ba.clear=function(){for(var a=this._private,e=a.cy,u=e.elements(),n=0;n<this.length;n++)this[n]=void 0;return this.length=0,a.contextStyles={},a.propDiffs={},this.cleanElements(u,!0),u.forEach(function(r){var t=r[0]._private;t.styleDirty=!0,t.appliedInitStyle=!1}),this};Ba.resetToDefault=function(){return this.clear(),this.addDefaultStylesheet(),this};Ba.core=function(a){return this._private.coreStyle[a]||this.getDefaultProperty(a)};Ba.selector=function(a){var e=a==="core"?null:new hl(a),u=this.length++;return this[u]={selector:e,properties:[],mappedProperties:[],index:u},this};Ba.css=function(){var a=this,e=arguments;if(e.length===1)for(var u=e[0],n=0;n<a.properties.length;n++){var r=a.properties[n],t=u[r.name];t===void 0&&(t=u[MP(r.name)]),t!==void 0&&this.cssRule(r.name,t)}else e.length===2&&this.cssRule(e[0],e[1]);return this};Ba.style=Ba.css;Ba.cssRule=function(a,e){var u=this.parse(a,e);if(u){var n=this.length-1;this[n].properties.push(u),this[n].properties[u.name]=u,u.name.match(/pie-(\d+)-background-size/)&&u.value&&(this._private.hasPie=!0),u.name.match(/stripe-(\d+)-background-size/)&&u.value&&(this._private.hasStripe=!0),u.mapped&&this[n].mappedProperties.push(u);var r=!this[n].selector;r&&(this._private.coreStyle[u.name]=u)}return this};Ba.append=function(a){return Mwe(a)?a.appendToStyle(this):Wr(a)?this.appendFromJson(a):Mt(a)&&this.appendFromString(a),this};la.fromJson=function(a,e){var u=new la(a);return u.fromJson(e),u};la.fromString=function(a,e){return new la(a).fromString(e)};[da,yN,ZH,Vo,XP,ek,kn,KP].forEach(function(a){qt(Ba,a)});la.types=Ba.types;la.properties=Ba.properties;la.propertyGroups=Ba.propertyGroups;la.propertyGroupNames=Ba.propertyGroupNames;la.propertyGroupKeys=Ba.propertyGroupKeys;var gVe={style:function(e){if(e){var u=this.setStyle(e);u.update()}return this._private.style},setStyle:function(e){var u=this._private;return Mwe(e)?u.style=e.generateStyle(this):Wr(e)?u.style=la.fromJson(this,e):Mt(e)?u.style=la.fromString(this,e):u.style=la(this),u.style},updateStyle:function(){this.mutableElements().updateStyle()}},vVe="single",fb={autolock:function(e){if(e!==void 0)this._private.autolock=!!e;else return this._private.autolock;return this},autoungrabify:function(e){if(e!==void 0)this._private.autoungrabify=!!e;else return this._private.autoungrabify;return this},autounselectify:function(e){if(e!==void 0)this._private.autounselectify=!!e;else return this._private.autounselectify;return this},selectionType:function(e){var u=this._private;if(u.selectionType==null&&(u.selectionType=vVe),e!==void 0)(e==="additive"||e==="single")&&(u.selectionType=e);else return u.selectionType;return this},panningEnabled:function(e){if(e!==void 0)this._private.panningEnabled=!!e;else return this._private.panningEnabled;return this},userPanningEnabled:function(e){if(e!==void 0)this._private.userPanningEnabled=!!e;else return this._private.userPanningEnabled;return this},zoomingEnabled:function(e){if(e!==void 0)this._private.zoomingEnabled=!!e;else return this._private.zoomingEnabled;return this},userZoomingEnabled:function(e){if(e!==void 0)this._private.userZoomingEnabled=!!e;else return this._private.userZoomingEnabled;return this},boxSelectionEnabled:function(e){if(e!==void 0)this._private.boxSelectionEnabled=!!e;else return this._private.boxSelectionEnabled;return this},pan:function(){var e=arguments,u=this._private.pan,n,r,t,i,o;switch(e.length){case 0:return u;case 1:if(Mt(e[0]))return n=e[0],u[n];if(_r(e[0])){if(!this._private.panningEnabled)return this;t=e[0],i=t.x,o=t.y,At(i)&&(u.x=i),At(o)&&(u.y=o),this.emit("pan viewport")}break;case 2:if(!this._private.panningEnabled)return this;n=e[0],r=e[1],(n==="x"||n==="y")&&At(r)&&(u[n]=r),this.emit("pan viewport");break}return this.notify("viewport"),this},panBy:function(e,u){var n=arguments,r=this._private.pan,t,i,o,l,s;if(!this._private.panningEnabled)return this;switch(n.length){case 1:_r(e)&&(o=n[0],l=o.x,s=o.y,At(l)&&(r.x+=l),At(s)&&(r.y+=s),this.emit("pan viewport"));break;case 2:t=e,i=u,(t==="x"||t==="y")&&At(i)&&(r[t]+=i),this.emit("pan viewport");break}return this.notify("viewport"),this},gc:function(){this.notify("gc")},fit:function(e,u){var n=this.getFitViewport(e,u);if(n){var r=this._private;r.zoom=n.zoom,r.pan=n.pan,this.emit("pan zoom viewport"),this.notify("viewport")}return this},getFitViewport:function(e,u){if(At(e)&&u===void 0&&(u=e,e=void 0),!(!this._private.panningEnabled||!this._private.zoomingEnabled)){var n;if(Mt(e)){var r=e;e=this.$(r)}else if(oqe(e)){var t=e;n={x1:t.x1,y1:t.y1,x2:t.x2,y2:t.y2},n.w=n.x2-n.x1,n.h=n.y2-n.y1}else Bi(e)||(e=this.mutableElements());if(!(Bi(e)&&e.empty())){n=n||e.boundingBox();var i=this.width(),o=this.height(),l;if(u=At(u)?u:0,!isNaN(i)&&!isNaN(o)&&i>0&&o>0&&!isNaN(n.w)&&!isNaN(n.h)&&n.w>0&&n.h>0){l=Math.min((i-2*u)/n.w,(o-2*u)/n.h),l=l>this._private.maxZoom?this._private.maxZoom:l,l=l<this._private.minZoom?this._private.minZoom:l;var s={x:(i-l*(n.x1+n.x2))/2,y:(o-l*(n.y1+n.y2))/2};return{zoom:l,pan:s}}}}},zoomRange:function(e,u){var n=this._private;if(u==null){var r=e;e=r.min,u=r.max}return At(e)&&At(u)&&e<=u?(n.minZoom=e,n.maxZoom=u):At(e)&&u===void 0&&e<=n.maxZoom?n.minZoom=e:At(u)&&e===void 0&&u>=n.minZoom&&(n.maxZoom=u),this},minZoom:function(e){return e===void 0?this._private.minZoom:this.zoomRange({min:e})},maxZoom:function(e){return e===void 0?this._private.maxZoom:this.zoomRange({max:e})},getZoomedViewport:function(e){var u=this._private,n=u.pan,r=u.zoom,t,i,o=!1;if(u.zoomingEnabled||(o=!0),At(e)?i=e:_r(e)&&(i=e.level,e.position!=null?t=qP(e.position,r,n):e.renderedPosition!=null&&(t=e.renderedPosition),t!=null&&!u.panningEnabled&&(o=!0)),i=i>u.maxZoom?u.maxZoom:i,i=i<u.minZoom?u.minZoom:i,o||!At(i)||i===r||t!=null&&(!At(t.x)||!At(t.y)))return null;if(t!=null){var l=n,s=r,c=i,d={x:-c/s*(t.x-l.x)+t.x,y:-c/s*(t.y-l.y)+t.y};return{zoomed:!0,panned:!0,zoom:c,pan:d}}else return{zoomed:!0,panned:!1,zoom:i,pan:n}},zoom:function(e){if(e===void 0)return this._private.zoom;var u=this.getZoomedViewport(e),n=this._private;return u==null||!u.zoomed?this:(n.zoom=u.zoom,u.panned&&(n.pan.x=u.pan.x,n.pan.y=u.pan.y),this.emit("zoom"+(u.panned?" pan":"")+" viewport"),this.notify("viewport"),this)},viewport:function(e){var u=this._private,n=!0,r=!0,t=[],i=!1,o=!1;if(!e)return this;if(At(e.zoom)||(n=!1),_r(e.pan)||(r=!1),!n&&!r)return this;if(n){var l=e.zoom;l<u.minZoom||l>u.maxZoom||!u.zoomingEnabled?i=!0:(u.zoom=l,t.push("zoom"))}if(r&&(!i||!e.cancelOnFailedZoom)&&u.panningEnabled){var s=e.pan;At(s.x)&&(u.pan.x=s.x,o=!1),At(s.y)&&(u.pan.y=s.y,o=!1),o||t.push("pan")}return t.length>0&&(t.push("viewport"),this.emit(t.join(" ")),this.notify("viewport")),this},center:function(e){var u=this.getCenterPan(e);return u&&(this._private.pan=u,this.emit("pan viewport"),this.notify("viewport")),this},getCenterPan:function(e,u){if(this._private.panningEnabled){if(Mt(e)){var n=e;e=this.mutableElements().filter(n)}else Bi(e)||(e=this.mutableElements());if(e.length!==0){var r=e.boundingBox(),t=this.width(),i=this.height();u=u===void 0?this._private.zoom:u;var o={x:(t-u*(r.x1+r.x2))/2,y:(i-u*(r.y1+r.y2))/2};return o}}},reset:function(){return!this._private.panningEnabled||!this._private.zoomingEnabled?this:(this.viewport({pan:{x:0,y:0},zoom:1}),this)},invalidateSize:function(){this._private.sizeCache=null},size:function(){var e=this._private,u=e.container,n=this;return e.sizeCache=e.sizeCache||(u?(function(){var r=n.window().getComputedStyle(u),t=function(o){return parseFloat(r.getPropertyValue(o))};return{width:u.clientWidth-t("padding-left")-t("padding-right"),height:u.clientHeight-t("padding-top")-t("padding-bottom")}})():{width:1,height:1})},width:function(){return this.size().width},height:function(){return this.size().height},extent:function(){var e=this._private.pan,u=this._private.zoom,n=this.renderedExtent(),r={x1:(n.x1-e.x)/u,x2:(n.x2-e.x)/u,y1:(n.y1-e.y)/u,y2:(n.y2-e.y)/u};return r.w=r.x2-r.x1,r.h=r.y2-r.y1,r},renderedExtent:function(){var e=this.width(),u=this.height();return{x1:0,y1:0,x2:e,y2:u,w:e,h:u}},multiClickDebounceTime:function(e){if(e)this._private.multiClickDebounceTime=e;else return this._private.multiClickDebounceTime;return this}};fb.centre=fb.center;fb.autolockNodes=fb.autolock;fb.autoungrabifyNodes=fb.autoungrabify;var E4={data:Cr.data({field:"data",bindingEvent:"data",allowBinding:!0,allowSetting:!0,settingEvent:"data",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeData:Cr.removeData({field:"data",event:"data",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0}),scratch:Cr.data({field:"scratch",bindingEvent:"scratch",allowBinding:!0,allowSetting:!0,settingEvent:"scratch",settingTriggersEvent:!0,triggerFnName:"trigger",allowGetting:!0,updateStyle:!0}),removeScratch:Cr.removeData({field:"scratch",event:"scratch",triggerFnName:"trigger",triggerEvent:!0,updateStyle:!0})};E4.attr=E4.data;E4.removeAttr=E4.removeData;var A4=function(e){var u=this;e=qt({},e);var n=e.container;n&&!NF(n)&&NF(n[0])&&(n=n[0]);var r=n?n._cyreg:null;r=r||{},r&&r.cy&&(r.cy.destroy(),r={});var t=r.readies=r.readies||[];n&&(n._cyreg=r),r.cy=u;var i=Zn!==void 0&&n!==void 0&&!e.headless,o=e;o.layout=qt({name:i?"grid":"null"},o.layout),o.renderer=qt({name:i?"canvas":"null"},o.renderer);var l=function(h,g,v){return g!==void 0?g:v!==void 0?v:h},s=this._private={container:n,ready:!1,options:o,elements:new Oa(this),listeners:[],aniEles:new Oa(this),data:o.data||{},scratch:{},layout:null,renderer:null,destroyed:!1,notificationsEnabled:!0,minZoom:1e-50,maxZoom:1e50,zoomingEnabled:l(!0,o.zoomingEnabled),userZoomingEnabled:l(!0,o.userZoomingEnabled),panningEnabled:l(!0,o.panningEnabled),userPanningEnabled:l(!0,o.userPanningEnabled),boxSelectionEnabled:l(!0,o.boxSelectionEnabled),autolock:l(!1,o.autolock,o.autolockNodes),autoungrabify:l(!1,o.autoungrabify,o.autoungrabifyNodes),autounselectify:l(!1,o.autounselectify),styleEnabled:o.styleEnabled===void 0?i:o.styleEnabled,zoom:At(o.zoom)?o.zoom:1,pan:{x:_r(o.pan)&&At(o.pan.x)?o.pan.x:0,y:_r(o.pan)&&At(o.pan.y)?o.pan.y:0},animation:{current:[],queue:[]},hasCompoundNodes:!1,multiClickDebounceTime:l(250,o.multiClickDebounceTime)};this.createEmitter(),this.selectionType(o.selectionType),this.zoomRange({min:o.minZoom,max:o.maxZoom});var c=function(h,g){var v=h.some(sqe);if(v)return R1.all(h).then(g);g(h)};s.styleEnabled&&u.setStyle([]);var d=qt({},o,o.renderer);u.initRenderer(d);var f=function(h,g,v){u.notifications(!1);var m=u.mutableElements();m.length>0&&m.remove(),h!=null&&(_r(h)||Wr(h))&&u.add(h),u.one("layoutready",function(w){u.notifications(!0),u.emit(w),u.one("load",g),u.emitAndNotify("load")}).one("layoutstop",function(){u.one("done",v),u.emit("done")});var T=qt({},u._private.options.layout);T.eles=u.elements(),u.layout(T).run()};c([o.style,o.elements],function(p){var h=p[0],g=p[1];s.styleEnabled&&u.style().append(h),f(g,function(){u.startAnimationLoop(),s.ready=!0,On(o.ready)&&u.on("ready",o.ready);for(var v=0;v<t.length;v++){var m=t[v];u.on("ready",m)}r&&(r.readies=[]),u.emit("ready")},o.done)})},CF=A4.prototype;qt(CF,{instanceString:function(){return"core"},isReady:function(){return this._private.ready},destroyed:function(){return this._private.destroyed},ready:function(e){return this.isReady()?this.emitter().emit("ready",[],e):this.on("ready",e),this},destroy:function(){var e=this;if(!e.destroyed())return e.stopAnimationLoop(),e.destroyRenderer(),this.emit("destroy"),e._private.destroyed=!0,e},hasElementWithId:function(e){return this._private.elements.hasElementWithId(e)},getElementById:function(e){return this._private.elements.getElementById(e)},hasCompoundNodes:function(){return this._private.hasCompoundNodes},headless:function(){return this._private.renderer.isHeadless()},styleEnabled:function(){return this._private.styleEnabled},addToPool:function(e){return this._private.elements.merge(e),this},removeFromPool:function(e){return this._private.elements.unmerge(e),this},container:function(){return this._private.container||null},window:function(){var e=this._private.container;if(e==null)return Zn;var u=this._private.container.ownerDocument;return u===void 0||u==null?Zn:u.defaultView||Zn},mount:function(e){if(e!=null){var u=this,n=u._private,r=n.options;return!NF(e)&&NF(e[0])&&(e=e[0]),u.stopAnimationLoop(),u.destroyRenderer(),n.container=e,n.styleEnabled=!0,u.invalidateSize(),u.initRenderer(qt({},r,r.renderer,{name:r.renderer.name==="null"?"canvas":r.renderer.name})),u.startAnimationLoop(),u.style(r.style),u.emit("mount"),u}},unmount:function(){var e=this;return e.stopAnimationLoop(),e.destroyRenderer(),e.initRenderer({name:"null"}),e.emit("unmount"),e},options:function(){return Uo(this._private.options)},json:function(e){var u=this,n=u._private,r=u.mutableElements(),t=function(E){return u.getElementById(E.id())};if(_r(e)){if(u.startBatch(),e.elements){var i={},o=function(E,S){for(var N=[],j=[],q=0;q<E.length;q++){var O=E[q];if(!O.data.id){Lr("cy.json() cannot handle elements without an ID attribute");continue}var I=""+O.data.id,A=u.getElementById(I);i[I]=!0,A.length!==0?j.push({ele:A,json:O}):(S&&(O.group=S),N.push(O))}u.add(N);for(var P=0;P<j.length;P++){var C=j[P],B=C.ele,H=C.json;B.json(H)}};if(Wr(e.elements))o(e.elements);else for(var l=["nodes","edges"],s=0;s<l.length;s++){var c=l[s],d=e.elements[c];Wr(d)&&o(d,c)}var f=u.collection();r.filter(function(w){return!i[w.id()]}).forEach(function(w){w.isParent()?f.merge(w):w.remove()}),f.forEach(function(w){return w.children().move({parent:null})}),f.forEach(function(w){return t(w).remove()})}e.style&&u.style(e.style),e.zoom!=null&&e.zoom!==n.zoom&&u.zoom(e.zoom),e.pan&&(e.pan.x!==n.pan.x||e.pan.y!==n.pan.y)&&u.pan(e.pan),e.data&&u.data(e.data);for(var p=["minZoom","maxZoom","zoomingEnabled","userZoomingEnabled","panningEnabled","userPanningEnabled","boxSelectionEnabled","autolock","autoungrabify","autounselectify","multiClickDebounceTime"],h=0;h<p.length;h++){var g=p[h];e[g]!=null&&u[g](e[g])}return u.endBatch(),this}else{var v=!!e,m={};v?m.elements=this.elements().map(function(w){return w.json()}):(m.elements={},r.forEach(function(w){var E=w.group();m.elements[E]||(m.elements[E]=[]),m.elements[E].push(w.json())})),this._private.styleEnabled&&(m.style=u.style().json()),m.data=Uo(u.data());var T=n.options;return m.zoomingEnabled=n.zoomingEnabled,m.userZoomingEnabled=n.userZoomingEnabled,m.zoom=n.zoom,m.minZoom=n.minZoom,m.maxZoom=n.maxZoom,m.panningEnabled=n.panningEnabled,m.userPanningEnabled=n.userPanningEnabled,m.pan=Uo(n.pan),m.boxSelectionEnabled=n.boxSelectionEnabled,m.renderer=Uo(T.renderer),m.hideEdgesOnViewport=T.hideEdgesOnViewport,m.textureOnViewport=T.textureOnViewport,m.wheelSensitivity=T.wheelSensitivity,m.motionBlur=T.motionBlur,m.multiClickDebounceTime=T.multiClickDebounceTime,m}}});CF.$id=CF.getElementById;[sVe,pVe,MSe,O7,pF,yVe,x7,hF,gVe,fb,E4].forEach(function(a){qt(CF,a)});var _Ve={fit:!0,directed:!1,direction:"downward",padding:30,circle:!1,grid:!1,spacingFactor:1.75,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,roots:void 0,depthSort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,u){return!0},ready:void 0,stop:void 0,transform:function(e,u){return u}},TVe={maximal:!1,acyclic:!1},Og=function(e){return e.scratch("breadthfirst")},q1e=function(e,u){return e.scratch("breadthfirst",u)};function CSe(a){this.options=qt({},_Ve,TVe,a)}CSe.prototype.run=function(){var a=this.options,e=a.cy,u=a.eles,n=u.nodes().filter(function(ne){return ne.isChildless()}),r=u,t=a.directed,i=a.acyclic||a.maximal||a.maximalAdjustments>0,o=!!a.boundingBox,l=ei(o?a.boundingBox:structuredClone(e.extent())),s;if(Bi(a.roots))s=a.roots;else if(Wr(a.roots)){for(var c=[],d=0;d<a.roots.length;d++){var f=a.roots[d],p=e.getElementById(f);c.push(p)}s=e.collection(c)}else if(Mt(a.roots))s=e.$(a.roots);else if(t)s=n.roots();else{var h=u.components();s=e.collection();for(var g=function(){var ce=h[v],Se=ce.maxDegree(!1),xe=ce.filter(function(Ce){return Ce.degree(!1)===Se});s=s.add(xe)},v=0;v<h.length;v++)g()}var m=[],T={},w=function(ce,Se){m[Se]==null&&(m[Se]=[]);var xe=m[Se].length;m[Se].push(ce),q1e(ce,{index:xe,depth:Se})},E=function(ce,Se){var xe=Og(ce),Ce=xe.depth,Ve=xe.index;m[Ce][Ve]=null,ce.isChildless()&&w(ce,Se)};r.bfs({roots:s,directed:a.directed,visit:function(ce,Se,xe,Ce,Ve){var Ke=ce[0],Ye=Ke.id();Ke.isChildless()&&w(Ke,Ve),T[Ye]=!0}});for(var S=[],N=0;N<n.length;N++){var j=n[N];T[j.id()]||S.push(j)}var q=function(ce){for(var Se=m[ce],xe=0;xe<Se.length;xe++){var Ce=Se[xe];if(Ce==null){Se.splice(xe,1),xe--;continue}q1e(Ce,{depth:ce,index:xe})}},O=function(ce,Se){for(var xe=Og(ce),Ce=ce.incomers().filter(function(he){return he.isNode()&&u.has(he)}),Ve=-1,Ke=ce.id(),Ye=0;Ye<Ce.length;Ye++){var oe=Ce[Ye],X=Og(oe);Ve=Math.max(Ve,X.depth)}if(xe.depth<=Ve){if(!a.acyclic&&Se[Ke])return null;var J=Ve+1;return E(ce,J),Se[Ke]=J,!0}return!1};if(t&&i){var I=[],A={},P=function(ce){return I.push(ce)},C=function(){return I.shift()};for(n.forEach(function(ne){return I.push(ne)});I.length>0;){var B=C(),H=O(B,A);if(H)B.outgoers().filter(function(ne){return ne.isNode()&&u.has(ne)}).forEach(P);else if(H===null){Lr("Detected double maximal shift for node `"+B.id()+"`.  Bailing maximal adjustment due to cycle.  Use `options.maximal: true` only on DAGs.");break}}}var V=0;if(a.avoidOverlap)for(var G=0;G<n.length;G++){var Z=n[G],ae=Z.layoutDimensions(a),W=ae.w,te=ae.h;V=Math.max(V,W,te)}var se={},pe=function(ce){if(se[ce.id()])return se[ce.id()];for(var Se=Og(ce).depth,xe=ce.neighborhood(),Ce=0,Ve=0,Ke=0;Ke<xe.length;Ke++){var Ye=xe[Ke];if(!(Ye.isEdge()||Ye.isParent()||!n.has(Ye))){var oe=Og(Ye);if(oe!=null){var X=oe.index,J=oe.depth;if(!(X==null||J==null)){var he=m[J].length;J<Se&&(Ce+=X/he,Ve++)}}}}return Ve=Math.max(1,Ve),Ce=Ce/Ve,Ve===0&&(Ce=0),se[ce.id()]=Ce,Ce},le=function(ce,Se){var xe=pe(ce),Ce=pe(Se),Ve=xe-Ce;return Ve===0?Lwe(ce.id(),Se.id()):Ve};a.depthSort!==void 0&&(le=a.depthSort);for(var Ee=m.length,Oe=0;Oe<Ee;Oe++)m[Oe].sort(le),q(Oe);for(var Ie=[],Ae=0;Ae<S.length;Ae++)Ie.push(S[Ae]);var be=function(){for(var ce=0;ce<Ee;ce++)q(ce)};Ie.length&&(m.unshift(Ie),Ee=m.length,be());for(var ee=0,_=0;_<Ee;_++)ee=Math.max(m[_].length,ee);var F={x:l.x1+l.w/2,y:l.y1+l.h/2},D=n.reduce(function(ne,ce){return(function(Se){return{w:ne.w===-1?Se.w:(ne.w+Se.w)/2,h:ne.h===-1?Se.h:(ne.h+Se.h)/2}})(ce.boundingBox({includeLabels:a.nodeDimensionsIncludeLabels}))},{w:-1,h:-1}),L=Math.max(Ee===1?0:o?(l.h-a.padding*2-D.h)/(Ee-1):(l.h-a.padding*2-D.h)/(Ee+1),V),Q=m.reduce(function(ne,ce){return Math.max(ne,ce.length)},0),Y=function(ce){var Se=Og(ce),xe=Se.depth,Ce=Se.index;if(a.circle){var Ve=Math.min(l.w/2/Ee,l.h/2/Ee);Ve=Math.max(Ve,V);var Ke=Ve*xe+Ve-(Ee>0&&m[0].length<=3?Ve/2:0),Ye=2*Math.PI/m[xe].length*Ce;return xe===0&&m[0].length===1&&(Ke=1),{x:F.x+Ke*Math.cos(Ye),y:F.y+Ke*Math.sin(Ye)}}else{var oe=m[xe].length,X=Math.max(oe===1?0:o?(l.w-a.padding*2-D.w)/((a.grid?Q:oe)-1):(l.w-a.padding*2-D.w)/((a.grid?Q:oe)+1),V),J={x:F.x+(Ce+1-(oe+1)/2)*X,y:F.y+(xe+1-(Ee+1)/2)*L};return J}},$={downward:0,leftward:90,upward:180,rightward:-90};Object.keys($).indexOf(a.direction)===-1&&_n("Invalid direction '".concat(a.direction,"' specified for breadthfirst layout. Valid values are: ").concat(Object.keys($).join(", ")));var ue=function(ce){return Lqe(Y(ce),l,$[a.direction])};return u.nodes().layoutPositions(this,a,ue),this};var wVe={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,radius:void 0,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,u){return!0},ready:void 0,stop:void 0,transform:function(e,u){return u}};function LSe(a){this.options=qt({},wVe,a)}LSe.prototype.run=function(){var a=this.options,e=a,u=a.cy,n=e.eles,r=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,t=n.nodes().not(":parent");e.sort&&(t=t.sort(e.sort));for(var i=ei(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:u.width(),h:u.height()}),o={x:i.x1+i.w/2,y:i.y1+i.h/2},l=e.sweep===void 0?2*Math.PI-2*Math.PI/t.length:e.sweep,s=l/Math.max(1,t.length-1),c,d=0,f=0;f<t.length;f++){var p=t[f],h=p.layoutDimensions(e),g=h.w,v=h.h;d=Math.max(d,g,v)}if(At(e.radius)?c=e.radius:t.length<=1?c=0:c=Math.min(i.h,i.w)/2-d,t.length>1&&e.avoidOverlap){d*=1.75;var m=Math.cos(s)-Math.cos(0),T=Math.sin(s)-Math.sin(0),w=Math.sqrt(d*d/(m*m+T*T));c=Math.max(w,c)}var E=function(N,j){var q=e.startAngle+j*s*(r?1:-1),O=c*Math.cos(q),I=c*Math.sin(q),A={x:o.x+O,y:o.y+I};return A};return n.nodes().layoutPositions(this,e,E),this};var SVe={fit:!0,padding:30,startAngle:3/2*Math.PI,sweep:void 0,clockwise:!0,equidistant:!1,minNodeSpacing:10,boundingBox:void 0,avoidOverlap:!0,nodeDimensionsIncludeLabels:!1,height:void 0,width:void 0,spacingFactor:void 0,concentric:function(e){return e.degree()},levelWidth:function(e){return e.maxDegree()/4},animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,u){return!0},ready:void 0,stop:void 0,transform:function(e,u){return u}};function qSe(a){this.options=qt({},SVe,a)}qSe.prototype.run=function(){for(var a=this.options,e=a,u=e.counterclockwise!==void 0?!e.counterclockwise:e.clockwise,n=a.cy,r=e.eles,t=r.nodes().not(":parent"),i=ei(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:n.width(),h:n.height()}),o={x:i.x1+i.w/2,y:i.y1+i.h/2},l=[],s=0,c=0;c<t.length;c++){var d=t[c],f=void 0;f=e.concentric(d),l.push({value:f,node:d}),d._private.scratch.concentric=f}t.updateStyle();for(var p=0;p<t.length;p++){var h=t[p],g=h.layoutDimensions(e);s=Math.max(s,g.w,g.h)}l.sort(function(L,Q){return Q.value-L.value});for(var v=e.levelWidth(t),m=[[]],T=m[0],w=0;w<l.length;w++){var E=l[w];if(T.length>0){var S=Math.abs(T[0].value-E.value);S>=v&&(T=[],m.push(T))}T.push(E)}var N=s+e.minNodeSpacing;if(!e.avoidOverlap){var j=m.length>0&&m[0].length>1,q=Math.min(i.w,i.h)/2-N,O=q/(m.length+j?1:0);N=Math.min(N,O)}for(var I=0,A=0;A<m.length;A++){var P=m[A],C=e.sweep===void 0?2*Math.PI-2*Math.PI/P.length:e.sweep,B=P.dTheta=C/Math.max(1,P.length-1);if(P.length>1&&e.avoidOverlap){var H=Math.cos(B)-Math.cos(0),V=Math.sin(B)-Math.sin(0),G=Math.sqrt(N*N/(H*H+V*V));I=Math.max(G,I)}P.r=I,I+=N}if(e.equidistant){for(var Z=0,ae=0,W=0;W<m.length;W++){var te=m[W],se=te.r-ae;Z=Math.max(Z,se)}ae=0;for(var pe=0;pe<m.length;pe++){var le=m[pe];pe===0&&(ae=le.r),le.r=ae,ae+=Z}}for(var Ee={},Oe=0;Oe<m.length;Oe++)for(var Ie=m[Oe],Ae=Ie.dTheta,be=Ie.r,ee=0;ee<Ie.length;ee++){var _=Ie[ee],F=e.startAngle+(u?1:-1)*Ae*ee,D={x:o.x+be*Math.cos(F),y:o.y+be*Math.sin(F)};Ee[_.node.id()]=D}return r.nodes().layoutPositions(this,e,function(L){var Q=L.id();return Ee[Q]}),this};var ML,EVe={ready:function(){},stop:function(){},animate:!0,animationEasing:void 0,animationDuration:void 0,animateFilter:function(e,u){return!0},animationThreshold:250,refresh:20,fit:!0,padding:30,boundingBox:void 0,nodeDimensionsIncludeLabels:!1,randomize:!1,componentSpacing:40,nodeRepulsion:function(e){return 2048},nodeOverlap:4,idealEdgeLength:function(e){return 32},edgeElasticity:function(e){return 32},nestingFactor:1.2,gravity:1,numIter:1e3,initialTemp:1e3,coolingFactor:.99,minTemp:1};function JP(a){this.options=qt({},EVe,a),this.options.layout=this;var e=this.options.eles.nodes(),u=this.options.eles.edges(),n=u.filter(function(r){var t=r.source().data("id"),i=r.target().data("id"),o=e.some(function(s){return s.data("id")===t}),l=e.some(function(s){return s.data("id")===i});return!o||!l});this.options.eles=this.options.eles.not(n)}JP.prototype.run=function(){var a=this.options,e=a.cy,u=this;u.stopped=!1,(a.animate===!0||a.animate===!1)&&u.emit({type:"layoutstart",layout:u}),a.debug===!0?ML=!0:ML=!1;var n=AVe(e,u,a);ML&&xVe(n),a.randomize&&RVe(n);var r=tc(),t=function(){NVe(n,e,a),a.fit===!0&&e.fit(a.padding)},i=function(f){return!(u.stopped||f>=a.numIter||(IVe(n,a),n.temperature=n.temperature*a.coolingFactor,n.temperature<a.minTemp))},o=function(){if(a.animate===!0||a.animate===!1)t(),u.one("layoutstop",a.stop),u.emit({type:"layoutstop",layout:u});else{var f=a.eles.nodes(),p=USe(n,a,f);f.layoutPositions(u,a,p)}},l=0,s=!0;if(a.animate===!0){var c=function(){for(var f=0;s&&f<a.refresh;)s=i(l),l++,f++;if(!s)U1e(n,a),o();else{var p=tc();p-r>=a.animationThreshold&&t(),IF(c)}};c()}else{for(;s;)s=i(l),l++;U1e(n,a),o()}return this};JP.prototype.stop=function(){return this.stopped=!0,this.thread&&this.thread.stop(),this.emit("layoutstop"),this};JP.prototype.destroy=function(){return this.thread&&this.thread.stop(),this};var AVe=function(e,u,n){for(var r=n.eles.edges(),t=n.eles.nodes(),i=ei(n.boundingBox?n.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),o={isCompound:e.hasCompoundNodes(),layoutNodes:[],idToIndex:{},nodeSize:t.size(),graphSet:[],indexToGraph:[],layoutEdges:[],edgeSize:r.size(),temperature:n.initialTemp,clientWidth:i.w,clientHeight:i.h,boundingBox:i},l=n.eles.components(),s={},c=0;c<l.length;c++)for(var d=l[c],f=0;f<d.length;f++){var p=d[f];s[p.id()]=c}for(var c=0;c<o.nodeSize;c++){var h=t[c],g=h.layoutDimensions(n),v={};v.isLocked=h.locked(),v.id=h.data("id"),v.parentId=h.data("parent"),v.cmptId=s[h.id()],v.children=[],v.positionX=h.position("x"),v.positionY=h.position("y"),v.offsetX=0,v.offsetY=0,v.height=g.w,v.width=g.h,v.maxX=v.positionX+v.width/2,v.minX=v.positionX-v.width/2,v.maxY=v.positionY+v.height/2,v.minY=v.positionY-v.height/2,v.padLeft=parseFloat(h.style("padding")),v.padRight=parseFloat(h.style("padding")),v.padTop=parseFloat(h.style("padding")),v.padBottom=parseFloat(h.style("padding")),v.nodeRepulsion=On(n.nodeRepulsion)?n.nodeRepulsion(h):n.nodeRepulsion,o.layoutNodes.push(v),o.idToIndex[v.id]=c}for(var m=[],T=0,w=-1,E=[],c=0;c<o.nodeSize;c++){var h=o.layoutNodes[c],S=h.parentId;S!=null?o.layoutNodes[o.idToIndex[S]].children.push(h.id):(m[++w]=h.id,E.push(h.id))}for(o.graphSet.push(E);T<=w;){var N=m[T++],j=o.idToIndex[N],p=o.layoutNodes[j],q=p.children;if(q.length>0){o.graphSet.push(q);for(var c=0;c<q.length;c++)m[++w]=q[c]}}for(var c=0;c<o.graphSet.length;c++)for(var O=o.graphSet[c],f=0;f<O.length;f++){var I=o.idToIndex[O[f]];o.indexToGraph[I]=c}for(var c=0;c<o.edgeSize;c++){var A=r[c],P={};P.id=A.data("id"),P.sourceId=A.data("source"),P.targetId=A.data("target");var C=On(n.idealEdgeLength)?n.idealEdgeLength(A):n.idealEdgeLength,B=On(n.edgeElasticity)?n.edgeElasticity(A):n.edgeElasticity,H=o.idToIndex[P.sourceId],V=o.idToIndex[P.targetId],G=o.indexToGraph[H],Z=o.indexToGraph[V];if(G!=Z){for(var ae=OVe(P.sourceId,P.targetId,o),W=o.graphSet[ae],te=0,v=o.layoutNodes[H];W.indexOf(v.id)===-1;)v=o.layoutNodes[o.idToIndex[v.parentId]],te++;for(v=o.layoutNodes[V];W.indexOf(v.id)===-1;)v=o.layoutNodes[o.idToIndex[v.parentId]],te++;C*=te*n.nestingFactor}P.idealLength=C,P.elasticity=B,o.layoutEdges.push(P)}return o},OVe=function(e,u,n){var r=BSe(e,u,0,n);return 2>r.count?0:r.graph},BSe=function(e,u,n,r){var t=r.graphSet[n];if(-1<t.indexOf(e)&&-1<t.indexOf(u))return{count:2,graph:n};for(var i=0,o=0;o<t.length;o++){var l=t[o],s=r.idToIndex[l],c=r.layoutNodes[s].children;if(c.length!==0){var d=r.indexToGraph[r.idToIndex[c[0]]],f=BSe(e,u,d,r);if(f.count!==0)if(f.count===1){if(i++,i===2)break}else return f}}return{count:i,graph:n}},xVe,RVe=function(e,u){for(var n=e.clientWidth,r=e.clientHeight,t=0;t<e.nodeSize;t++){var i=e.layoutNodes[t];i.children.length===0&&!i.isLocked&&(i.positionX=Math.random()*n,i.positionY=Math.random()*r)}},USe=function(e,u,n){var r=e.boundingBox,t={x1:1/0,x2:-1/0,y1:1/0,y2:-1/0};return u.boundingBox&&(n.forEach(function(i){var o=e.layoutNodes[e.idToIndex[i.data("id")]];t.x1=Math.min(t.x1,o.positionX),t.x2=Math.max(t.x2,o.positionX),t.y1=Math.min(t.y1,o.positionY),t.y2=Math.max(t.y2,o.positionY)}),t.w=t.x2-t.x1,t.h=t.y2-t.y1),function(i,o){var l=e.layoutNodes[e.idToIndex[i.data("id")]];if(u.boundingBox){var s=t.w===0?.5:(l.positionX-t.x1)/t.w,c=t.h===0?.5:(l.positionY-t.y1)/t.h;return{x:r.x1+s*r.w,y:r.y1+c*r.h}}else return{x:l.positionX,y:l.positionY}}},NVe=function(e,u,n){var r=n.layout,t=n.eles.nodes(),i=USe(e,n,t);t.positions(i),e.ready!==!0&&(e.ready=!0,r.one("layoutready",n.ready),r.emit({type:"layoutready",layout:this}))},IVe=function(e,u,n){DVe(e,u),jVe(e),MVe(e,u),CVe(e),LVe(e)},DVe=function(e,u){for(var n=0;n<e.graphSet.length;n++)for(var r=e.graphSet[n],t=r.length,i=0;i<t;i++)for(var o=e.layoutNodes[e.idToIndex[r[i]]],l=i+1;l<t;l++){var s=e.layoutNodes[e.idToIndex[r[l]]];FVe(o,s,e,u)}},B1e=function(e){return-1+2*e*Math.random()},FVe=function(e,u,n,r){var t=e.cmptId,i=u.cmptId;if(!(t!==i&&!n.isCompound)){var o=u.positionX-e.positionX,l=u.positionY-e.positionY,s=1;o===0&&l===0&&(o=B1e(s),l=B1e(s));var c=PVe(e,u,o,l);if(c>0)var d=r.nodeOverlap*c,f=Math.sqrt(o*o+l*l),p=d*o/f,h=d*l/f;else var g=LF(e,o,l),v=LF(u,-1*o,-1*l),m=v.x-g.x,T=v.y-g.y,w=m*m+T*T,f=Math.sqrt(w),d=(e.nodeRepulsion+u.nodeRepulsion)/w,p=d*m/f,h=d*T/f;e.isLocked||(e.offsetX-=p,e.offsetY-=h),u.isLocked||(u.offsetX+=p,u.offsetY+=h)}},PVe=function(e,u,n,r){if(n>0)var t=e.maxX-u.minX;else var t=u.maxX-e.minX;if(r>0)var i=e.maxY-u.minY;else var i=u.maxY-e.minY;return t>=0&&i>=0?Math.sqrt(t*t+i*i):0},LF=function(e,u,n){var r=e.positionX,t=e.positionY,i=e.height||1,o=e.width||1,l=n/u,s=i/o,c={};return u===0&&0<n||u===0&&0>n?(c.x=r,c.y=t+i/2,c):0<u&&-1*s<=l&&l<=s?(c.x=r+o/2,c.y=t+o*n/2/u,c):0>u&&-1*s<=l&&l<=s?(c.x=r-o/2,c.y=t-o*n/2/u,c):0<n&&(l<=-1*s||l>=s)?(c.x=r+i*u/2/n,c.y=t+i/2,c):(0>n&&(l<=-1*s||l>=s)&&(c.x=r-i*u/2/n,c.y=t-i/2),c)},jVe=function(e,u){for(var n=0;n<e.edgeSize;n++){var r=e.layoutEdges[n],t=e.idToIndex[r.sourceId],i=e.layoutNodes[t],o=e.idToIndex[r.targetId],l=e.layoutNodes[o],s=l.positionX-i.positionX,c=l.positionY-i.positionY;if(!(s===0&&c===0)){var d=LF(i,s,c),f=LF(l,-1*s,-1*c),p=f.x-d.x,h=f.y-d.y,g=Math.sqrt(p*p+h*h),v=Math.pow(r.idealLength-g,2)/r.elasticity;if(g!==0)var m=v*p/g,T=v*h/g;else var m=0,T=0;i.isLocked||(i.offsetX+=m,i.offsetY+=T),l.isLocked||(l.offsetX-=m,l.offsetY-=T)}}},MVe=function(e,u){if(u.gravity!==0)for(var n=1,r=0;r<e.graphSet.length;r++){var t=e.graphSet[r],i=t.length;if(r===0)var o=e.clientHeight/2,l=e.clientWidth/2;else var s=e.layoutNodes[e.idToIndex[t[0]]],c=e.layoutNodes[e.idToIndex[s.parentId]],o=c.positionX,l=c.positionY;for(var d=0;d<i;d++){var f=e.layoutNodes[e.idToIndex[t[d]]];if(!f.isLocked){var p=o-f.positionX,h=l-f.positionY,g=Math.sqrt(p*p+h*h);if(g>n){var v=u.gravity*p/g,m=u.gravity*h/g;f.offsetX+=v,f.offsetY+=m}}}}},CVe=function(e,u){var n=[],r=0,t=-1;for(n.push.apply(n,e.graphSet[0]),t+=e.graphSet[0].length;r<=t;){var i=n[r++],o=e.idToIndex[i],l=e.layoutNodes[o],s=l.children;if(0<s.length&&!l.isLocked){for(var c=l.offsetX,d=l.offsetY,f=0;f<s.length;f++){var p=e.layoutNodes[e.idToIndex[s[f]]];p.offsetX+=c,p.offsetY+=d,n[++t]=s[f]}l.offsetX=0,l.offsetY=0}}},LVe=function(e,u){for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&(r.maxX=void 0,r.minX=void 0,r.maxY=void 0,r.minY=void 0)}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];if(!(0<r.children.length||r.isLocked)){var t=qVe(r.offsetX,r.offsetY,e.temperature);r.positionX+=t.x,r.positionY+=t.y,r.offsetX=0,r.offsetY=0,r.minX=r.positionX-r.width,r.maxX=r.positionX+r.width,r.minY=r.positionY-r.height,r.maxY=r.positionY+r.height,QSe(r,e)}}for(var n=0;n<e.nodeSize;n++){var r=e.layoutNodes[n];0<r.children.length&&!r.isLocked&&(r.positionX=(r.maxX+r.minX)/2,r.positionY=(r.maxY+r.minY)/2,r.width=r.maxX-r.minX,r.height=r.maxY-r.minY)}},qVe=function(e,u,n){var r=Math.sqrt(e*e+u*u);if(r>n)var t={x:n*e/r,y:n*u/r};else var t={x:e,y:u};return t},QSe=function(e,u){var n=e.parentId;if(n!=null){var r=u.layoutNodes[u.idToIndex[n]],t=!1;if((r.maxX==null||e.maxX+r.padRight>r.maxX)&&(r.maxX=e.maxX+r.padRight,t=!0),(r.minX==null||e.minX-r.padLeft<r.minX)&&(r.minX=e.minX-r.padLeft,t=!0),(r.maxY==null||e.maxY+r.padBottom>r.maxY)&&(r.maxY=e.maxY+r.padBottom,t=!0),(r.minY==null||e.minY-r.padTop<r.minY)&&(r.minY=e.minY-r.padTop,t=!0),t)return QSe(r,u)}},U1e=function(e,u){for(var n=e.layoutNodes,r=[],t=0;t<n.length;t++){var i=n[t],o=i.cmptId,l=r[o]=r[o]||[];l.push(i)}for(var s=0,t=0;t<r.length;t++){var c=r[t];if(c){c.x1=1/0,c.x2=-1/0,c.y1=1/0,c.y2=-1/0;for(var d=0;d<c.length;d++){var f=c[d];c.x1=Math.min(c.x1,f.positionX-f.width/2),c.x2=Math.max(c.x2,f.positionX+f.width/2),c.y1=Math.min(c.y1,f.positionY-f.height/2),c.y2=Math.max(c.y2,f.positionY+f.height/2)}c.w=c.x2-c.x1,c.h=c.y2-c.y1,s+=c.w*c.h}}r.sort(function(T,w){return w.w*w.h-T.w*T.h});for(var p=0,h=0,g=0,v=0,m=Math.sqrt(s)*e.clientWidth/e.clientHeight,t=0;t<r.length;t++){var c=r[t];if(c){for(var d=0;d<c.length;d++){var f=c[d];f.isLocked||(f.positionX+=p-c.x1,f.positionY+=h-c.y1)}p+=c.w+u.componentSpacing,g+=c.w+u.componentSpacing,v=Math.max(v,c.h),g>m&&(h+=v+u.componentSpacing,p=0,g=0,v=0)}}},BVe={fit:!0,padding:30,boundingBox:void 0,avoidOverlap:!0,avoidOverlapPadding:10,nodeDimensionsIncludeLabels:!1,spacingFactor:void 0,condense:!1,rows:void 0,cols:void 0,position:function(e){},sort:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,u){return!0},ready:void 0,stop:void 0,transform:function(e,u){return u}};function VSe(a){this.options=qt({},BVe,a)}VSe.prototype.run=function(){var a=this.options,e=a,u=a.cy,n=e.eles,r=n.nodes().not(":parent");e.sort&&(r=r.sort(e.sort));var t=ei(e.boundingBox?e.boundingBox:{x1:0,y1:0,w:u.width(),h:u.height()});if(t.h===0||t.w===0)n.nodes().layoutPositions(this,e,function(pe){return{x:t.x1,y:t.y1}});else{var i=r.size(),o=Math.sqrt(i*t.h/t.w),l=Math.round(o),s=Math.round(t.w/t.h*o),c=function(le){if(le==null)return Math.min(l,s);var Ee=Math.min(l,s);Ee==l?l=le:s=le},d=function(le){if(le==null)return Math.max(l,s);var Ee=Math.max(l,s);Ee==l?l=le:s=le},f=e.rows,p=e.cols!=null?e.cols:e.columns;if(f!=null&&p!=null)l=f,s=p;else if(f!=null&&p==null)l=f,s=Math.ceil(i/l);else if(f==null&&p!=null)s=p,l=Math.ceil(i/s);else if(s*l>i){var h=c(),g=d();(h-1)*g>=i?c(h-1):(g-1)*h>=i&&d(g-1)}else for(;s*l<i;){var v=c(),m=d();(m+1)*v>=i?d(m+1):c(v+1)}var T=t.w/s,w=t.h/l;if(e.condense&&(T=0,w=0),e.avoidOverlap)for(var E=0;E<r.length;E++){var S=r[E],N=S._private.position;(N.x==null||N.y==null)&&(N.x=0,N.y=0);var j=S.layoutDimensions(e),q=e.avoidOverlapPadding,O=j.w+q,I=j.h+q;T=Math.max(T,O),w=Math.max(w,I)}for(var A={},P=function(le,Ee){return!!A["c-"+le+"-"+Ee]},C=function(le,Ee){A["c-"+le+"-"+Ee]=!0},B=0,H=0,V=function(){H++,H>=s&&(H=0,B++)},G={},Z=0;Z<r.length;Z++){var ae=r[Z],W=e.position(ae);if(W&&(W.row!==void 0||W.col!==void 0)){var te={row:W.row,col:W.col};if(te.col===void 0)for(te.col=0;P(te.row,te.col);)te.col++;else if(te.row===void 0)for(te.row=0;P(te.row,te.col);)te.row++;G[ae.id()]=te,C(te.row,te.col)}}var se=function(le,Ee){var Oe,Ie;if(le.locked()||le.isParent())return!1;var Ae=G[le.id()];if(Ae)Oe=Ae.col*T+T/2+t.x1,Ie=Ae.row*w+w/2+t.y1;else{for(;P(B,H);)V();Oe=H*T+T/2+t.x1,Ie=B*w+w/2+t.y1,C(B,H),V()}return{x:Oe,y:Ie}};r.layoutPositions(this,e,se)}return this};var UVe={ready:function(){},stop:function(){}};function tk(a){this.options=qt({},UVe,a)}tk.prototype.run=function(){var a=this.options,e=a.eles,u=this;return a.cy,u.emit("layoutstart"),e.nodes().positions(function(){return{x:0,y:0}}),u.one("layoutready",a.ready),u.emit("layoutready"),u.one("layoutstop",a.stop),u.emit("layoutstop"),this};tk.prototype.stop=function(){return this};var QVe={positions:void 0,zoom:void 0,pan:void 0,fit:!0,padding:30,spacingFactor:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,u){return!0},ready:void 0,stop:void 0,transform:function(e,u){return u}};function HSe(a){this.options=qt({},QVe,a)}HSe.prototype.run=function(){var a=this.options,e=a.eles,u=e.nodes(),n=On(a.positions);function r(t){if(a.positions==null)return cBe(t.position());if(n)return a.positions(t);var i=a.positions[t._private.data.id];return i??null}return u.layoutPositions(this,a,function(t,i){var o=r(t);return t.locked()||o==null?!1:o}),this};var VVe={fit:!0,padding:30,boundingBox:void 0,animate:!1,animationDuration:500,animationEasing:void 0,animateFilter:function(e,u){return!0},ready:void 0,stop:void 0,transform:function(e,u){return u}};function kSe(a){this.options=qt({},VVe,a)}kSe.prototype.run=function(){var a=this.options,e=a.cy,u=a.eles,n=ei(a.boundingBox?a.boundingBox:{x1:0,y1:0,w:e.width(),h:e.height()}),r=function(i,o){return{x:n.x1+Math.round(Math.random()*n.w),y:n.y1+Math.round(Math.random()*n.h)}};return u.nodes().layoutPositions(this,a,r),this};var HVe=[{name:"breadthfirst",impl:CSe},{name:"circle",impl:LSe},{name:"concentric",impl:qSe},{name:"cose",impl:JP},{name:"grid",impl:VSe},{name:"null",impl:tk},{name:"preset",impl:HSe},{name:"random",impl:kSe}];function zSe(a){this.options=a,this.notifications=0}var Q1e=function(){},V1e=function(){throw new Error("A headless instance can not render images")};zSe.prototype={recalculateRenderedStyle:Q1e,notify:function(){this.notifications++},init:Q1e,isHeadless:function(){return!0},png:V1e,jpg:V1e};var rk={};rk.arrowShapeWidth=.3;rk.registerArrowShapes=function(){var a=this.arrowShapes={},e=this,u=function(s,c,d,f,p,h,g){var v=p.x-d/2-g,m=p.x+d/2+g,T=p.y-d/2-g,w=p.y+d/2+g,E=v<=s&&s<=m&&T<=c&&c<=w;return E},n=function(s,c,d,f,p){var h=s*Math.cos(f)-c*Math.sin(f),g=s*Math.sin(f)+c*Math.cos(f),v=h*d,m=g*d,T=v+p.x,w=m+p.y;return{x:T,y:w}},r=function(s,c,d,f){for(var p=[],h=0;h<s.length;h+=2){var g=s[h],v=s[h+1];p.push(n(g,v,c,d,f))}return p},t=function(s){for(var c=[],d=0;d<s.length;d++){var f=s[d];c.push(f.x,f.y)}return c},i=function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").pfValue*2},o=function(s,c){Mt(c)&&(c=a[c]),a[s]=qt({name:s,points:[-.15,-.3,.15,-.3,.15,.3,-.15,.3],collide:function(f,p,h,g,v,m){var T=t(r(this.points,h+2*m,g,v)),w=hi(f,p,T);return w},roughCollide:u,draw:function(f,p,h,g){var v=r(this.points,p,h,g);e.arrowShapeImpl("polygon")(f,v)},spacing:function(f){return 0},gap:i},c)};o("none",{collide:DF,roughCollide:DF,draw:QH,spacing:rge,gap:rge}),o("triangle",{points:[-.15,-.3,0,0,.15,-.3]}),o("arrow","triangle"),o("triangle-backcurve",{points:a.triangle.points,controlPoint:[0,-.15],roughCollide:u,draw:function(s,c,d,f,p){var h=r(this.points,c,d,f),g=this.controlPoint,v=n(g[0],g[1],c,d,f);e.arrowShapeImpl(this.name)(s,h,v)},gap:function(s){return i(s)*.8}}),o("triangle-tee",{points:[0,0,.15,-.3,-.15,-.3,0,0],pointsTee:[-.15,-.4,-.15,-.5,.15,-.5,.15,-.4],collide:function(s,c,d,f,p,h,g){var v=t(r(this.points,d+2*g,f,p)),m=t(r(this.pointsTee,d+2*g,f,p)),T=hi(s,c,v)||hi(s,c,m);return T},draw:function(s,c,d,f,p){var h=r(this.points,c,d,f),g=r(this.pointsTee,c,d,f);e.arrowShapeImpl(this.name)(s,h,g)}}),o("circle-triangle",{radius:.15,pointsTr:[0,-.15,.15,-.45,-.15,-.45,0,-.15],collide:function(s,c,d,f,p,h,g){var v=p,m=Math.pow(v.x-s,2)+Math.pow(v.y-c,2)<=Math.pow((d+2*g)*this.radius,2),T=t(r(this.points,d+2*g,f,p));return hi(s,c,T)||m},draw:function(s,c,d,f,p){var h=r(this.pointsTr,c,d,f);e.arrowShapeImpl(this.name)(s,h,f.x,f.y,this.radius*c)},spacing:function(s){return e.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),o("triangle-cross",{points:[0,0,.15,-.3,-.15,-.3,0,0],baseCrossLinePts:[-.15,-.4,-.15,-.4,.15,-.4,.15,-.4],crossLinePts:function(s,c){var d=this.baseCrossLinePts.slice(),f=c/s,p=3,h=5;return d[p]=d[p]-f,d[h]=d[h]-f,d},collide:function(s,c,d,f,p,h,g){var v=t(r(this.points,d+2*g,f,p)),m=t(r(this.crossLinePts(d,h),d+2*g,f,p)),T=hi(s,c,v)||hi(s,c,m);return T},draw:function(s,c,d,f,p){var h=r(this.points,c,d,f),g=r(this.crossLinePts(c,p),c,d,f);e.arrowShapeImpl(this.name)(s,h,g)}}),o("vee",{points:[-.15,-.3,0,0,.15,-.3,0,-.15],gap:function(s){return i(s)*.525}}),o("circle",{radius:.15,collide:function(s,c,d,f,p,h,g){var v=p,m=Math.pow(v.x-s,2)+Math.pow(v.y-c,2)<=Math.pow((d+2*g)*this.radius,2);return m},draw:function(s,c,d,f,p){e.arrowShapeImpl(this.name)(s,f.x,f.y,this.radius*c)},spacing:function(s){return e.getArrowWidth(s.pstyle("width").pfValue,s.pstyle("arrow-scale").value)*this.radius}}),o("tee",{points:[-.15,0,-.15,-.1,.15,-.1,.15,0],spacing:function(s){return 1},gap:function(s){return 1}}),o("square",{points:[-.15,0,.15,0,.15,-.3,-.15,-.3]}),o("diamond",{points:[-.15,-.15,0,-.3,.15,-.15,0,0],gap:function(s){return s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}}),o("chevron",{points:[0,0,-.15,-.15,-.1,-.2,0,-.1,.1,-.2,.15,-.15],gap:function(s){return .95*s.pstyle("width").pfValue*s.pstyle("arrow-scale").value}})};var Ob={};Ob.projectIntoViewport=function(a,e){var u=this.cy,n=this.findContainerClientCoords(),r=n[0],t=n[1],i=n[4],o=u.pan(),l=u.zoom(),s=((a-r)/i-o.x)/l,c=((e-t)/i-o.y)/l;return[s,c]};Ob.findContainerClientCoords=function(){if(this.containerBB)return this.containerBB;var a=this.container,e=a.getBoundingClientRect(),u=this.cy.window().getComputedStyle(a),n=function(m){return parseFloat(u.getPropertyValue(m))},r={left:n("padding-left"),right:n("padding-right"),top:n("padding-top"),bottom:n("padding-bottom")},t={left:n("border-left-width"),right:n("border-right-width"),top:n("border-top-width"),bottom:n("border-bottom-width")},i=a.clientWidth,o=a.clientHeight,l=r.left+r.right,s=r.top+r.bottom,c=t.left+t.right,d=e.width/(i+c),f=i-l,p=o-s,h=e.left+r.left+t.left,g=e.top+r.top+t.top;return this.containerBB=[h,g,f,p,d]};Ob.invalidateContainerClientCoordsCache=function(){this.containerBB=null};Ob.findNearestElement=function(a,e,u,n){return this.findNearestElements(a,e,u,n)[0]};Ob.findNearestElements=function(a,e,u,n){var r=this,t=this,i=t.getCachedZSortedEles(),o=[],l=t.cy.zoom(),s=t.cy.hasCompoundNodes(),c=(n?24:8)/l,d=(n?8:2)/l,f=(n?8:2)/l,p=1/0,h,g;u&&(i=i.interactive);function v(j,q){if(j.isNode()){if(g)return;g=j,o.push(j)}if(j.isEdge()&&(q==null||q<p))if(h){if(h.pstyle("z-compound-depth").value===j.pstyle("z-compound-depth").value&&h.pstyle("z-compound-depth").value===j.pstyle("z-compound-depth").value){for(var O=0;O<o.length;O++)if(o[O].isEdge()){o[O]=j,h=j,p=q??p;break}}}else o.push(j),h=j,p=q??p}function m(j){var q=j.outerWidth()+2*d,O=j.outerHeight()+2*d,I=q/2,A=O/2,P=j.position(),C=j.pstyle("corner-radius").value==="auto"?"auto":j.pstyle("corner-radius").pfValue,B=j._private.rscratch;if(P.x-I<=a&&a<=P.x+I&&P.y-A<=e&&e<=P.y+A){var H=t.nodeShapes[r.getNodeShape(j)];if(H.checkPoint(a,e,0,q,O,P.x,P.y,C,B))return v(j,0),!0}}function T(j){var q=j._private,O=q.rscratch,I=j.pstyle("width").pfValue,A=j.pstyle("arrow-scale").value,P=I/2+c,C=P*P,B=P*2,Z=q.source,ae=q.target,H;if(O.edgeType==="segments"||O.edgeType==="straight"||O.edgeType==="haystack"){for(var V=O.allpts,G=0;G+3<V.length;G+=2)if(SBe(a,e,V[G],V[G+1],V[G+2],V[G+3],B)&&C>(H=RBe(a,e,V[G],V[G+1],V[G+2],V[G+3])))return v(j,H),!0}else if(O.edgeType==="bezier"||O.edgeType==="multibezier"||O.edgeType==="self"||O.edgeType==="compound"){for(var V=O.allpts,G=0;G+5<O.allpts.length;G+=4)if(EBe(a,e,V[G],V[G+1],V[G+2],V[G+3],V[G+4],V[G+5],B)&&C>(H=xBe(a,e,V[G],V[G+1],V[G+2],V[G+3],V[G+4],V[G+5])))return v(j,H),!0}for(var Z=Z||q.source,ae=ae||q.target,W=r.getArrowWidth(I,A),te=[{name:"source",x:O.arrowStartX,y:O.arrowStartY,angle:O.srcArrowAngle},{name:"target",x:O.arrowEndX,y:O.arrowEndY,angle:O.tgtArrowAngle},{name:"mid-source",x:O.midX,y:O.midY,angle:O.midsrcArrowAngle},{name:"mid-target",x:O.midX,y:O.midY,angle:O.midtgtArrowAngle}],G=0;G<te.length;G++){var se=te[G],pe=t.arrowShapes[j.pstyle(se.name+"-arrow-shape").value],le=j.pstyle("width").pfValue;if(pe.roughCollide(a,e,W,se.angle,{x:se.x,y:se.y},le,c)&&pe.collide(a,e,W,se.angle,{x:se.x,y:se.y},le,c))return v(j),!0}s&&o.length>0&&(m(Z),m(ae))}function w(j,q,O){return pi(j,q,O)}function E(j,q){var O=j._private,I=f,A;q?A=q+"-":A="",j.boundingBox();var P=O.labelBounds[q||"main"],C=j.pstyle(A+"label").value,B=j.pstyle("text-events").strValue==="yes";if(!(!B||!C)){var H=w(O.rscratch,"labelX",q),V=w(O.rscratch,"labelY",q),G=w(O.rscratch,"labelAngle",q),Z=j.pstyle(A+"text-margin-x").pfValue,ae=j.pstyle(A+"text-margin-y").pfValue,W=P.x1-I-Z,te=P.x2+I-Z,se=P.y1-I-ae,pe=P.y2+I-ae;if(G){var le=Math.cos(G),Ee=Math.sin(G),Oe=function(D,L){return D=D-H,L=L-V,{x:D*le-L*Ee+H,y:D*Ee+L*le+V}},Ie=Oe(W,se),Ae=Oe(W,pe),be=Oe(te,se),ee=Oe(te,pe),_=[Ie.x+Z,Ie.y+ae,be.x+Z,be.y+ae,ee.x+Z,ee.y+ae,Ae.x+Z,Ae.y+ae];if(hi(a,e,_))return v(j),!0}else if(nl(P,a,e))return v(j),!0}}for(var S=i.length-1;S>=0;S--){var N=i[S];N.isNode()?m(N)||E(N):T(N)||E(N)||E(N,"source")||E(N,"target")}return o};Ob.getAllInBox=function(a,e,u,n){var r=this.getCachedZSortedEles().interactive,t=this.cy.zoom(),i=2/t,o=[],l=Math.min(a,u),s=Math.max(a,u),c=Math.min(e,n),d=Math.max(e,n);a=l,u=s,e=c,n=d;var f=ei({x1:a,y1:e,x2:u,y2:n}),p=[{x:f.x1,y:f.y1},{x:f.x2,y:f.y1},{x:f.x2,y:f.y2},{x:f.x1,y:f.y2}],h=[[p[0],p[1]],[p[1],p[2]],[p[2],p[3]],[p[3],p[0]]];function g(D,L,Q){return pi(D,L,Q)}function v(D,L){var Q=D._private,Y=i,$="";D.boundingBox();var ue=Q.labelBounds.main;if(!ue)return null;var ne=g(Q.rscratch,"labelX",L),ce=g(Q.rscratch,"labelY",L),Se=g(Q.rscratch,"labelAngle",L),xe=D.pstyle($+"text-margin-x").pfValue,Ce=D.pstyle($+"text-margin-y").pfValue,Ve=ue.x1-Y-xe,Ke=ue.x2+Y-xe,Ye=ue.y1-Y-Ce,oe=ue.y2+Y-Ce;if(Se){var X=Math.cos(Se),J=Math.sin(Se),he=function(ye,re){return ye=ye-ne,re=re-ce,{x:ye*X-re*J+ne,y:ye*J+re*X+ce}};return[he(Ve,Ye),he(Ke,Ye),he(Ke,oe),he(Ve,oe)]}else return[{x:Ve,y:Ye},{x:Ke,y:Ye},{x:Ke,y:oe},{x:Ve,y:oe}]}function m(D,L,Q,Y){function $(ue,ne,ce){return(ce.y-ue.y)*(ne.x-ue.x)>(ne.y-ue.y)*(ce.x-ue.x)}return $(D,Q,Y)!==$(L,Q,Y)&&$(D,L,Q)!==$(D,L,Y)}for(var T=0;T<r.length;T++){var w=r[T];if(w.isNode()){var E=w,S=E.pstyle("text-events").strValue==="yes",N=E.pstyle("box-selection").strValue,j=E.pstyle("box-select-labels").strValue==="yes";if(N==="none")continue;var q=(N==="overlap"||j)&&S,O=E.boundingBox({includeNodes:!0,includeEdges:!1,includeLabels:q});if(N==="contain"){var I=!1;if(j&&S){var A=v(E);A&&P9(A,p)&&(o.push(E),I=!0)}!I&&Ywe(f,O)&&o.push(E)}else if(N==="overlap"&&zH(f,O)){var P=E.boundingBox({includeNodes:!0,includeEdges:!0,includeLabels:!1,includeMainLabels:!1,includeSourceLabels:!1,includeTargetLabels:!1}),C=[{x:P.x1,y:P.y1},{x:P.x2,y:P.y1},{x:P.x2,y:P.y2},{x:P.x1,y:P.y2}];if(P9(C,p))o.push(E);else{var B=v(E);B&&P9(B,p)&&o.push(E)}}}else{var H=w,V=H._private,G=V.rscratch,Z=H.pstyle("box-selection").strValue;if(Z==="none")continue;if(Z==="contain"){if(G.startX!=null&&G.startY!=null&&!nl(f,G.startX,G.startY)||G.endX!=null&&G.endY!=null&&!nl(f,G.endX,G.endY))continue;if(G.edgeType==="bezier"||G.edgeType==="multibezier"||G.edgeType==="self"||G.edgeType==="compound"||G.edgeType==="segments"||G.edgeType==="haystack"){for(var ae=V.rstyle.bezierPts||V.rstyle.linePts||V.rstyle.haystackPts,W=!0,te=0;te<ae.length;te++)if(!oge(f,ae[te])){W=!1;break}W&&o.push(H)}else G.edgeType==="straight"&&o.push(H)}else if(Z==="overlap"){var se=!1;if(G.startX!=null&&G.startY!=null&&G.endX!=null&&G.endY!=null&&(nl(f,G.startX,G.startY)||nl(f,G.endX,G.endY)))o.push(H),se=!0;else if(!se&&G.edgeType==="haystack"){for(var pe=V.rstyle.haystackPts,le=0;le<pe.length;le++)if(oge(f,pe[le])){o.push(H),se=!0;break}}if(!se){var Ee=V.rstyle.bezierPts||V.rstyle.linePts||V.rstyle.haystackPts;if((!Ee||Ee.length<2)&&G.edgeType==="straight"&&G.startX!=null&&G.startY!=null&&G.endX!=null&&G.endY!=null&&(Ee=[{x:G.startX,y:G.startY},{x:G.endX,y:G.endY}]),!Ee||Ee.length<2)continue;for(var Oe=0;Oe<Ee.length-1;Oe++){for(var Ie=Ee[Oe],Ae=Ee[Oe+1],be=0;be<h.length;be++){var ee=zn(h[be],2),_=ee[0],F=ee[1];if(m(Ie,Ae,_,F)){o.push(H),se=!0;break}}if(se)break}}}}}return o};var qF={};qF.calculateArrowAngles=function(a){var e=a._private.rscratch,u=e.edgeType==="haystack",n=e.edgeType==="bezier",r=e.edgeType==="multibezier",t=e.edgeType==="segments",i=e.edgeType==="compound",o=e.edgeType==="self",l,s,c,d,f,p,m,T;if(u?(c=e.haystackPts[0],d=e.haystackPts[1],f=e.haystackPts[2],p=e.haystackPts[3]):(c=e.arrowStartX,d=e.arrowStartY,f=e.arrowEndX,p=e.arrowEndY),m=e.midX,T=e.midY,t)l=c-e.segpts[0],s=d-e.segpts[1];else if(r||i||o||n){var h=e.allpts,g=ua(h[0],h[2],h[4],.1),v=ua(h[1],h[3],h[5],.1);l=c-g,s=d-v}else l=c-m,s=d-T;e.srcArrowAngle=PD(l,s);var m=e.midX,T=e.midY;if(u&&(m=(c+f)/2,T=(d+p)/2),l=f-c,s=p-d,t){var h=e.allpts;if(h.length/2%2===0){var w=h.length/2,E=w-2;l=h[w]-h[E],s=h[w+1]-h[E+1]}else if(e.isRound)l=e.midVector[1],s=-e.midVector[0];else{var w=h.length/2-1,E=w-2;l=h[w]-h[E],s=h[w+1]-h[E+1]}}else if(r||i||o){var h=e.allpts,S=e.ctrlpts,N,j,q,O;if(S.length/2%2===0){var I=h.length/2-1,A=I+2,P=A+2;N=ua(h[I],h[A],h[P],0),j=ua(h[I+1],h[A+1],h[P+1],0),q=ua(h[I],h[A],h[P],1e-4),O=ua(h[I+1],h[A+1],h[P+1],1e-4)}else{var A=h.length/2-1,I=A-2,P=A+2;N=ua(h[I],h[A],h[P],.4999),j=ua(h[I+1],h[A+1],h[P+1],.4999),q=ua(h[I],h[A],h[P],.5),O=ua(h[I+1],h[A+1],h[P+1],.5)}l=q-N,s=O-j}if(e.midtgtArrowAngle=PD(l,s),e.midDispX=l,e.midDispY=s,l*=-1,s*=-1,t){var h=e.allpts;if(h.length/2%2!==0){if(!e.isRound){var w=h.length/2-1,C=w+2;l=-(h[C]-h[w]),s=-(h[C+1]-h[w+1])}}}if(e.midsrcArrowAngle=PD(l,s),t)l=f-e.segpts[e.segpts.length-2],s=p-e.segpts[e.segpts.length-1];else if(r||i||o||n){var h=e.allpts,B=h.length,g=ua(h[B-6],h[B-4],h[B-2],.9),v=ua(h[B-5],h[B-3],h[B-1],.9);l=f-g,s=p-v}else l=f-m,s=p-T;e.tgtArrowAngle=PD(l,s)};qF.getArrowWidth=qF.getArrowHeight=function(a,e){var u=this.arrowWidthCache=this.arrowWidthCache||{},n=u[a+", "+e];return n||(n=Math.max(Math.pow(a*13.37,.9),29)*e,u[a+", "+e]=n,n)};var R7,N7,Lo={},bu={},H1e,k1e,rb,yF,Vs,Qm,Ym,jo,xg,QD,GSe,$Se,I7,D7,z1e,G1e=function(e,u,n){n.x=u.x-e.x,n.y=u.y-e.y,n.len=Math.sqrt(n.x*n.x+n.y*n.y),n.nx=n.x/n.len,n.ny=n.y/n.len,n.ang=Math.atan2(n.ny,n.nx)},kVe=function(e,u){u.x=e.x*-1,u.y=e.y*-1,u.nx=e.nx*-1,u.ny=e.ny*-1,u.ang=e.ang>0?-(Math.PI-e.ang):Math.PI+e.ang},zVe=function(e,u,n,r,t){if(e!==z1e?G1e(u,e,Lo):kVe(bu,Lo),G1e(u,n,bu),H1e=Lo.nx*bu.ny-Lo.ny*bu.nx,k1e=Lo.nx*bu.nx-Lo.ny*-bu.ny,Vs=Math.asin(Math.max(-1,Math.min(1,H1e))),Math.abs(Vs)<1e-6){R7=u.x,N7=u.y,Ym=xg=0;return}rb=1,yF=!1,k1e<0?Vs<0?Vs=Math.PI+Vs:(Vs=Math.PI-Vs,rb=-1,yF=!0):Vs>0&&(rb=-1,yF=!0),u.radius!==void 0?xg=u.radius:xg=r,Qm=Vs/2,QD=Math.min(Lo.len/2,bu.len/2),t?(jo=Math.abs(Math.cos(Qm)*xg/Math.sin(Qm)),jo>QD?(jo=QD,Ym=Math.abs(jo*Math.sin(Qm)/Math.cos(Qm))):Ym=xg):(jo=Math.min(QD,xg),Ym=Math.abs(jo*Math.sin(Qm)/Math.cos(Qm))),I7=u.x+bu.nx*jo,D7=u.y+bu.ny*jo,R7=I7-bu.ny*Ym*rb,N7=D7+bu.nx*Ym*rb,GSe=u.x+Lo.nx*jo,$Se=u.y+Lo.ny*jo,z1e=u};function XSe(a,e){e.radius===0?a.lineTo(e.cx,e.cy):a.arc(e.cx,e.cy,e.radius,e.startAngle,e.endAngle,e.counterClockwise)}function nk(a,e,u,n){var r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0;return n===0||e.radius===0?{cx:e.x,cy:e.y,radius:0,startX:e.x,startY:e.y,stopX:e.x,stopY:e.y,startAngle:void 0,endAngle:void 0,counterClockwise:void 0}:(zVe(a,e,u,n,r),{cx:R7,cy:N7,radius:Ym,startX:GSe,startY:$Se,stopX:I7,stopY:D7,startAngle:Lo.ang+Math.PI/2*rb,endAngle:bu.ang-Math.PI/2*rb,counterClockwise:yF})}var O4=.01,GVe=Math.sqrt(2*O4),Qa={};Qa.findMidptPtsEtc=function(a,e){var u=e.posPts,n=e.intersectionPts,r=e.vectorNormInverse,t,i=a.pstyle("source-endpoint"),o=a.pstyle("target-endpoint"),l=i.units!=null&&o.units!=null,s=function(S,N,j,q){var O=q-N,I=j-S,A=Math.sqrt(I*I+O*O);return{x:-O/A,y:I/A}},c=a.pstyle("edge-distances").value;switch(c){case"node-position":t=u;break;case"intersection":t=n;break;case"endpoints":{if(l){var d=this.manualEndptToPx(a.source()[0],i),f=zn(d,2),p=f[0],h=f[1],g=this.manualEndptToPx(a.target()[0],o),v=zn(g,2),m=v[0],T=v[1],w={x1:p,y1:h,x2:m,y2:T};r=s(p,h,m,T),t=w}else Lr("Edge ".concat(a.id()," has edge-distances:endpoints specified without manual endpoints specified via source-endpoint and target-endpoint.  Falling back on edge-distances:intersection (default).")),t=n;break}}return{midptPts:t,vectorNormInverse:r}};Qa.findHaystackPoints=function(a){for(var e=0;e<a.length;e++){var u=a[e],n=u._private,r=n.rscratch;if(!r.haystack){var t=Math.random()*2*Math.PI;r.source={x:Math.cos(t),y:Math.sin(t)},t=Math.random()*2*Math.PI,r.target={x:Math.cos(t),y:Math.sin(t)}}var i=n.source,o=n.target,l=i.position(),s=o.position(),c=i.width(),d=o.width(),f=i.height(),p=o.height(),h=u.pstyle("haystack-radius").value,g=h/2;r.haystackPts=r.allpts=[r.source.x*c*g+l.x,r.source.y*f*g+l.y,r.target.x*d*g+s.x,r.target.y*p*g+s.y],r.midX=(r.allpts[0]+r.allpts[2])/2,r.midY=(r.allpts[1]+r.allpts[3])/2,r.edgeType="haystack",r.haystack=!0,this.storeEdgeProjections(u),this.calculateArrowAngles(u),this.recalculateEdgeLabelProjections(u),this.calculateLabelAngles(u)}};Qa.findSegmentsPoints=function(a,e){var u=a._private.rscratch,n=a.pstyle("segment-weights"),r=a.pstyle("segment-distances"),t=a.pstyle("segment-radii"),i=a.pstyle("radius-type"),o=Math.min(n.pfValue.length,r.pfValue.length),l=t.pfValue[t.pfValue.length-1],s=i.pfValue[i.pfValue.length-1];u.edgeType="segments",u.segpts=[],u.radii=[],u.isArcRadius=[];for(var c=0;c<o;c++){var d=n.pfValue[c],f=r.pfValue[c],p=1-d,h=d,g=this.findMidptPtsEtc(a,e),v=g.midptPts,m=g.vectorNormInverse,T={x:v.x1*p+v.x2*h,y:v.y1*p+v.y2*h};u.segpts.push(T.x+m.x*f,T.y+m.y*f),u.radii.push(t.pfValue[c]!==void 0?t.pfValue[c]:l),u.isArcRadius.push((i.pfValue[c]!==void 0?i.pfValue[c]:s)==="arc-radius")}};Qa.findLoopPoints=function(a,e,u,n){var r=a._private.rscratch,t=e.dirCounts,i=e.srcPos,o=a.pstyle("control-point-distances"),l=o?o.pfValue[0]:void 0,s=a.pstyle("loop-direction").pfValue,c=a.pstyle("loop-sweep").pfValue,d=a.pstyle("control-point-step-size").pfValue;r.edgeType="self";var f=u,p=d;n&&(f=0,p=l);var h=s-Math.PI/2,g=h-c/2,v=h+c/2,m=s+"_"+c;f=t[m]===void 0?t[m]=0:++t[m],r.ctrlpts=[i.x+Math.cos(g)*1.4*p*(f/3+1),i.y+Math.sin(g)*1.4*p*(f/3+1),i.x+Math.cos(v)*1.4*p*(f/3+1),i.y+Math.sin(v)*1.4*p*(f/3+1)]};Qa.findCompoundLoopPoints=function(a,e,u,n){var r=a._private.rscratch;r.edgeType="compound";var t=e.srcPos,i=e.tgtPos,o=e.srcW,l=e.srcH,s=e.tgtW,c=e.tgtH,d=a.pstyle("control-point-step-size").pfValue,f=a.pstyle("control-point-distances"),p=f?f.pfValue[0]:void 0,h=u,g=d;n&&(h=0,g=p);var v=50,m={x:t.x-o/2,y:t.y-l/2},T={x:i.x-s/2,y:i.y-c/2},w={x:Math.min(m.x,T.x),y:Math.min(m.y,T.y)},E=.5,S=Math.max(E,Math.log(o*O4)),N=Math.max(E,Math.log(s*O4));r.ctrlpts=[w.x,w.y-(1+Math.pow(v,1.12)/100)*g*(h/3+1)*S,w.x-(1+Math.pow(v,1.12)/100)*g*(h/3+1)*N,w.y]};Qa.findStraightEdgePoints=function(a){a._private.rscratch.edgeType="straight"};Qa.findBezierPoints=function(a,e,u,n,r){var t=a._private.rscratch,i=a.pstyle("control-point-step-size").pfValue,o=a.pstyle("control-point-distances"),l=a.pstyle("control-point-weights"),s=o&&l?Math.min(o.value.length,l.value.length):1,c=o?o.pfValue[0]:void 0,d=l.value[0],f=n;t.edgeType=f?"multibezier":"bezier",t.ctrlpts=[];for(var p=0;p<s;p++){var h=(.5-e.eles.length/2+u)*i*(r?-1:1),g=void 0,v=kH(h);f&&(c=o?o.pfValue[p]:i,d=l.value[p]),n?g=c:g=c!==void 0?v*c:void 0;var m=g!==void 0?g:h,T=1-d,w=d,E=this.findMidptPtsEtc(a,e),S=E.midptPts,N=E.vectorNormInverse,j={x:S.x1*T+S.x2*w,y:S.y1*T+S.y2*w};t.ctrlpts.push(j.x+N.x*m,j.y+N.y*m)}};Qa.findTaxiPoints=function(a,e){var u=a._private.rscratch;u.edgeType="segments";var n="vertical",r="horizontal",t="leftward",i="rightward",o="downward",l="upward",s="auto",c=e.posPts,d=e.srcW,f=e.srcH,p=e.tgtW,h=e.tgtH,g=a.pstyle("edge-distances").value,v=g!=="node-position",m=a.pstyle("taxi-direction").value,T=m,w=a.pstyle("taxi-turn"),E=w.units==="%",S=w.pfValue,N=S<0,j=a.pstyle("taxi-turn-min-distance").pfValue,q=v?(d+p)/2:0,O=v?(f+h)/2:0,I=c.x2-c.x1,A=c.y2-c.y1,P=function(re,Ne){return re>0?Math.max(re-Ne,0):Math.min(re+Ne,0)},C=P(I,q),B=P(A,O),H=!1;T===s?m=Math.abs(C)>Math.abs(B)?r:n:T===l||T===o?(m=n,H=!0):(T===t||T===i)&&(m=r,H=!0);var V=m===n,G=V?B:C,Z=V?A:I,ae=kH(Z),W=!1;!(H&&(E||N))&&(T===o&&Z<0||T===l&&Z>0||T===t&&Z>0||T===i&&Z<0)&&(ae*=-1,G=ae*Math.abs(G),W=!0);var te;if(E){var se=S<0?1+S:S;te=se*G}else{var pe=S<0?G:0;te=pe+S*ae}var le=function(re){return Math.abs(re)<j||Math.abs(re)>=Math.abs(G)},Ee=le(te),Oe=le(Math.abs(G)-Math.abs(te)),Ie=Ee||Oe;if(Ie&&!W)if(V){var Ae=Math.abs(Z)<=f/2,be=Math.abs(I)<=p/2;if(Ae){var ee=(c.x1+c.x2)/2,_=c.y1,F=c.y2;u.segpts=[ee,_,ee,F]}else if(be){var D=(c.y1+c.y2)/2,L=c.x1,Q=c.x2;u.segpts=[L,D,Q,D]}else u.segpts=[c.x1,c.y2]}else{var Y=Math.abs(Z)<=d/2,$=Math.abs(A)<=h/2;if(Y){var ue=(c.y1+c.y2)/2,ne=c.x1,ce=c.x2;u.segpts=[ne,ue,ce,ue]}else if($){var Se=(c.x1+c.x2)/2,xe=c.y1,Ce=c.y2;u.segpts=[Se,xe,Se,Ce]}else u.segpts=[c.x2,c.y1]}else if(V){var Ve=c.y1+te+(v?f/2*ae:0),Ke=c.x1,Ye=c.x2;u.segpts=[Ke,Ve,Ye,Ve]}else{var oe=c.x1+te+(v?d/2*ae:0),X=c.y1,J=c.y2;u.segpts=[oe,X,oe,J]}if(u.isRound){var he=a.pstyle("taxi-radius").value,ve=a.pstyle("radius-type").value[0]==="arc-radius";u.radii=new Array(u.segpts.length/2).fill(he),u.isArcRadius=new Array(u.segpts.length/2).fill(ve)}};Qa.tryToCorrectInvalidPoints=function(a,e){var u=a._private.rscratch;if(u.edgeType==="bezier"){var n=e.srcPos,r=e.tgtPos,t=e.srcW,i=e.srcH,o=e.tgtW,l=e.tgtH,s=e.srcShape,c=e.tgtShape,d=e.srcCornerRadius,f=e.tgtCornerRadius,p=e.srcRs,h=e.tgtRs,g=!At(u.startX)||!At(u.startY),v=!At(u.arrowStartX)||!At(u.arrowStartY),m=!At(u.endX)||!At(u.endY),T=!At(u.arrowEndX)||!At(u.arrowEndY),w=3,E=this.getArrowWidth(a.pstyle("width").pfValue,a.pstyle("arrow-scale").value)*this.arrowShapeWidth,S=w*E,N=lb({x:u.ctrlpts[0],y:u.ctrlpts[1]},{x:u.startX,y:u.startY}),j=N<S,q=lb({x:u.ctrlpts[0],y:u.ctrlpts[1]},{x:u.endX,y:u.endY}),O=q<S,I=!1;if(g||v||j){I=!0;var A={x:u.ctrlpts[0]-n.x,y:u.ctrlpts[1]-n.y},P=Math.sqrt(A.x*A.x+A.y*A.y),C={x:A.x/P,y:A.y/P},B=Math.max(t,i),H={x:u.ctrlpts[0]+C.x*2*B,y:u.ctrlpts[1]+C.y*2*B},V=s.intersectLine(n.x,n.y,t,i,H.x,H.y,0,d,p);j?(u.ctrlpts[0]=u.ctrlpts[0]+C.x*(S-N),u.ctrlpts[1]=u.ctrlpts[1]+C.y*(S-N)):(u.ctrlpts[0]=V[0]+C.x*S,u.ctrlpts[1]=V[1]+C.y*S)}if(m||T||O){I=!0;var G={x:u.ctrlpts[0]-r.x,y:u.ctrlpts[1]-r.y},Z=Math.sqrt(G.x*G.x+G.y*G.y),ae={x:G.x/Z,y:G.y/Z},W=Math.max(t,i),te={x:u.ctrlpts[0]+ae.x*2*W,y:u.ctrlpts[1]+ae.y*2*W},se=c.intersectLine(r.x,r.y,o,l,te.x,te.y,0,f,h);O?(u.ctrlpts[0]=u.ctrlpts[0]+ae.x*(S-q),u.ctrlpts[1]=u.ctrlpts[1]+ae.y*(S-q)):(u.ctrlpts[0]=se[0]+ae.x*S,u.ctrlpts[1]=se[1]+ae.y*S)}I&&this.findEndpoints(a)}};Qa.storeAllpts=function(a){var e=a._private.rscratch;if(e.edgeType==="multibezier"||e.edgeType==="bezier"||e.edgeType==="self"||e.edgeType==="compound"){e.allpts=[],e.allpts.push(e.startX,e.startY);for(var u=0;u+1<e.ctrlpts.length;u+=2)e.allpts.push(e.ctrlpts[u],e.ctrlpts[u+1]),u+3<e.ctrlpts.length&&e.allpts.push((e.ctrlpts[u]+e.ctrlpts[u+2])/2,(e.ctrlpts[u+1]+e.ctrlpts[u+3])/2);e.allpts.push(e.endX,e.endY);var n,r;e.ctrlpts.length/2%2===0?(n=e.allpts.length/2-1,e.midX=e.allpts[n],e.midY=e.allpts[n+1]):(n=e.allpts.length/2-3,r=.5,e.midX=ua(e.allpts[n],e.allpts[n+2],e.allpts[n+4],r),e.midY=ua(e.allpts[n+1],e.allpts[n+3],e.allpts[n+5],r))}else if(e.edgeType==="straight")e.allpts=[e.startX,e.startY,e.endX,e.endY],e.midX=(e.startX+e.endX+e.arrowStartX+e.arrowEndX)/4,e.midY=(e.startY+e.endY+e.arrowStartY+e.arrowEndY)/4;else if(e.edgeType==="segments"){if(e.allpts=[],e.allpts.push(e.startX,e.startY),e.allpts.push.apply(e.allpts,e.segpts),e.allpts.push(e.endX,e.endY),e.isRound){e.roundCorners=[];for(var t=2;t+3<e.allpts.length;t+=2){var i=e.radii[t/2-1],o=e.isArcRadius[t/2-1];e.roundCorners.push(nk({x:e.allpts[t-2],y:e.allpts[t-1]},{x:e.allpts[t],y:e.allpts[t+1],radius:i},{x:e.allpts[t+2],y:e.allpts[t+3]},i,o))}}if(e.segpts.length%4===0){var l=e.segpts.length/2,s=l-2;e.midX=(e.segpts[s]+e.segpts[l])/2,e.midY=(e.segpts[s+1]+e.segpts[l+1])/2}else{var c=e.segpts.length/2-1;if(!e.isRound)e.midX=e.segpts[c],e.midY=e.segpts[c+1];else{var d={x:e.segpts[c],y:e.segpts[c+1]},f=e.roundCorners[c/2];if(f.radius===0){var p={x:e.segpts[c+2],y:e.segpts[c+3]};e.midX=d.x,e.midY=d.y,e.midVector=[d.y-p.y,p.x-d.x]}else{var h=[d.x-f.cx,d.y-f.cy],g=f.radius/Math.sqrt(Math.pow(h[0],2)+Math.pow(h[1],2));h=h.map(function(v){return v*g}),e.midX=f.cx+h[0],e.midY=f.cy+h[1],e.midVector=h}}}}};Qa.checkForInvalidEdgeWarning=function(a){var e=a[0]._private.rscratch;e.nodesOverlap||At(e.startX)&&At(e.startY)&&At(e.endX)&&At(e.endY)?e.loggedErr=!1:e.loggedErr||(e.loggedErr=!0,Lr("Edge `"+a.id()+"` has invalid endpoints and so it is impossible to draw.  Adjust your edge style (e.g. control points) accordingly or use an alternative edge type.  This is expected behaviour when the source node and the target node overlap."))};Qa.findEdgeControlPoints=function(a){var e=this;if(!(!a||a.length===0)){for(var u=this,n=u.cy,r=n.hasCompoundNodes(),t=new Xs,i=function(O,I){return[].concat(RF(O),[I?1:0]).join("-")},o=[],l=[],s=0;s<a.length;s++){var c=a[s],d=c._private,f=c.pstyle("curve-style").value;if(!(c.removed()||!c.takesUpSpace())){if(f==="haystack"){l.push(c);continue}var p=f==="unbundled-bezier"||rl(f,"segments")||f==="straight"||f==="straight-triangle"||rl(f,"taxi"),h=f==="unbundled-bezier"||f==="bezier",g=d.source,v=d.target,m=g.poolIndex(),T=v.poolIndex(),w=[m,T].sort(),E=i(w,p),S=t.get(E);S==null&&(S={eles:[]},o.push({pairId:w,edgeIsUnbundled:p}),t.set(E,S)),S.eles.push(c),p&&(S.hasUnbundled=!0),h&&(S.hasBezier=!0)}}for(var N=function(){var O=o[j],I=O.pairId,A=O.edgeIsUnbundled,P=i(I,A),C=t.get(P),B;if(!C.hasUnbundled){var H=C.eles[0].parallelEdges().filter(function(ve){return ve.isBundledBezier()});VH(C.eles),H.forEach(function(ve){return C.eles.push(ve)}),C.eles.sort(function(ve,ye){return ve.poolIndex()-ye.poolIndex()})}var V=C.eles[0],G=V.source(),Z=V.target();if(G.poolIndex()>Z.poolIndex()){var ae=G;G=Z,Z=ae}var W=C.srcPos=G.position(),te=C.tgtPos=Z.position(),se=C.srcW=G.outerWidth(),pe=C.srcH=G.outerHeight(),le=C.tgtW=Z.outerWidth(),Ee=C.tgtH=Z.outerHeight(),Oe=C.srcShape=u.nodeShapes[e.getNodeShape(G)],Ie=C.tgtShape=u.nodeShapes[e.getNodeShape(Z)],Ae=C.srcCornerRadius=G.pstyle("corner-radius").value==="auto"?"auto":G.pstyle("corner-radius").pfValue,be=C.tgtCornerRadius=Z.pstyle("corner-radius").value==="auto"?"auto":Z.pstyle("corner-radius").pfValue,ee=C.tgtRs=Z._private.rscratch,_=C.srcRs=G._private.rscratch;C.dirCounts={north:0,west:0,south:0,east:0,northwest:0,southwest:0,northeast:0,southeast:0};for(var F=0;F<C.eles.length;F++){var D=C.eles[F],L=D[0]._private.rscratch,Q=D.pstyle("curve-style").value,Y=Q==="unbundled-bezier"||rl(Q,"segments")||rl(Q,"taxi"),$=!G.same(D.source());if(!C.calculatedIntersection&&G!==Z&&(C.hasBezier||C.hasUnbundled)){C.calculatedIntersection=!0;var ue=Oe.intersectLine(W.x,W.y,se,pe,te.x,te.y,0,Ae,_),ne=C.srcIntn=ue,ce=Ie.intersectLine(te.x,te.y,le,Ee,W.x,W.y,0,be,ee),Se=C.tgtIntn=ce,xe=C.intersectionPts={x1:ue[0],x2:ce[0],y1:ue[1],y2:ce[1]},Ce=C.posPts={x1:W.x,x2:te.x,y1:W.y,y2:te.y},Ve=ce[1]-ue[1],Ke=ce[0]-ue[0],Ye=Math.sqrt(Ke*Ke+Ve*Ve);At(Ye)&&Ye>=GVe||(Ye=Math.sqrt(Math.max(Ke*Ke,O4)+Math.max(Ve*Ve,O4)));var oe=C.vector={x:Ke,y:Ve},X=C.vectorNorm={x:oe.x/Ye,y:oe.y/Ye},J={x:-X.y,y:X.x};C.nodesOverlap=!At(Ye)||Ie.checkPoint(ue[0],ue[1],0,le,Ee,te.x,te.y,be,ee)||Oe.checkPoint(ce[0],ce[1],0,se,pe,W.x,W.y,Ae,_),C.vectorNormInverse=J,B={nodesOverlap:C.nodesOverlap,dirCounts:C.dirCounts,calculatedIntersection:!0,hasBezier:C.hasBezier,hasUnbundled:C.hasUnbundled,eles:C.eles,srcPos:te,srcRs:ee,tgtPos:W,tgtRs:_,srcW:le,srcH:Ee,tgtW:se,tgtH:pe,srcIntn:Se,tgtIntn:ne,srcShape:Ie,tgtShape:Oe,posPts:{x1:Ce.x2,y1:Ce.y2,x2:Ce.x1,y2:Ce.y1},intersectionPts:{x1:xe.x2,y1:xe.y2,x2:xe.x1,y2:xe.y1},vector:{x:-oe.x,y:-oe.y},vectorNorm:{x:-X.x,y:-X.y},vectorNormInverse:{x:-J.x,y:-J.y}}}var he=$?B:C;L.nodesOverlap=he.nodesOverlap,L.srcIntn=he.srcIntn,L.tgtIntn=he.tgtIntn,L.isRound=Q.startsWith("round"),r&&(G.isParent()||G.isChild()||Z.isParent()||Z.isChild())&&(G.parents().anySame(Z)||Z.parents().anySame(G)||G.same(Z)&&G.isParent())?e.findCompoundLoopPoints(D,he,F,Y):G===Z?e.findLoopPoints(D,he,F,Y):Q.endsWith("segments")?e.findSegmentsPoints(D,he):Q.endsWith("taxi")?e.findTaxiPoints(D,he):Q==="straight"||!Y&&C.eles.length%2===1&&F===Math.floor(C.eles.length/2)?e.findStraightEdgePoints(D):e.findBezierPoints(D,he,F,Y,$),e.findEndpoints(D),e.tryToCorrectInvalidPoints(D,he),e.checkForInvalidEdgeWarning(D),e.storeAllpts(D),e.storeEdgeProjections(D),e.calculateArrowAngles(D),e.recalculateEdgeLabelProjections(D),e.calculateLabelAngles(D)}},j=0;j<o.length;j++)N();this.findHaystackPoints(l)}};function KSe(a){var e=[];if(a!=null){for(var u=0;u<a.length;u+=2){var n=a[u],r=a[u+1];e.push({x:n,y:r})}return e}}Qa.getSegmentPoints=function(a){var e=a[0]._private.rscratch;this.recalculateRenderedStyle(a);var u=e.edgeType;if(u==="segments")return KSe(e.segpts)};Qa.getControlPoints=function(a){var e=a[0]._private.rscratch;this.recalculateRenderedStyle(a);var u=e.edgeType;if(u==="bezier"||u==="multibezier"||u==="self"||u==="compound")return KSe(e.ctrlpts)};Qa.getEdgeMidpoint=function(a){var e=a[0]._private.rscratch;return this.recalculateRenderedStyle(a),{x:e.midX,y:e.midY}};var mN={};mN.manualEndptToPx=function(a,e){var u=this,n=a.position(),r=a.outerWidth(),t=a.outerHeight(),i=a._private.rscratch;if(e.value.length===2){var o=[e.pfValue[0],e.pfValue[1]];return e.units[0]==="%"&&(o[0]=o[0]*r),e.units[1]==="%"&&(o[1]=o[1]*t),o[0]+=n.x,o[1]+=n.y,o}else{var l=e.pfValue[0];l=-Math.PI/2+l;var s=2*Math.max(r,t),c=[n.x+Math.cos(l)*s,n.y+Math.sin(l)*s];return u.nodeShapes[this.getNodeShape(a)].intersectLine(n.x,n.y,r,t,c[0],c[1],0,a.pstyle("corner-radius").value==="auto"?"auto":a.pstyle("corner-radius").pfValue,i)}};mN.findEndpoints=function(a){var e,u,n,r,t=this,i,o=a.source()[0],l=a.target()[0],s=o.position(),c=l.position(),d=a.pstyle("target-arrow-shape").value,f=a.pstyle("source-arrow-shape").value,p=a.pstyle("target-distance-from-node").pfValue,h=a.pstyle("source-distance-from-node").pfValue,g=o._private.rscratch,v=l._private.rscratch,m=a.pstyle("curve-style").value,T=a._private.rscratch,w=T.edgeType,E=rl(m,"taxi"),S=w==="self"||w==="compound",N=w==="bezier"||w==="multibezier"||S,j=w!=="bezier",q=w==="straight"||w==="segments",O=w==="segments",I=N||j||q,A=S||E,P=a.pstyle("source-endpoint"),C=A?"outside-to-node":P.value,B=o.pstyle("corner-radius").value==="auto"?"auto":o.pstyle("corner-radius").pfValue,H=a.pstyle("target-endpoint"),V=A?"outside-to-node":H.value,G=l.pstyle("corner-radius").value==="auto"?"auto":l.pstyle("corner-radius").pfValue;T.srcManEndpt=P,T.tgtManEndpt=H;var Z,ae,W,te,se=(e=(H==null||(u=H.pfValue)===null||u===void 0?void 0:u.length)===2?H.pfValue:null)!==null&&e!==void 0?e:[0,0],pe=(n=(P==null||(r=P.pfValue)===null||r===void 0?void 0:r.length)===2?P.pfValue:null)!==null&&n!==void 0?n:[0,0];if(N){var le=[T.ctrlpts[0],T.ctrlpts[1]],Ee=j?[T.ctrlpts[T.ctrlpts.length-2],T.ctrlpts[T.ctrlpts.length-1]]:le;Z=Ee,ae=le}else if(q){var Oe=O?T.segpts.slice(0,2):[c.x+se[0],c.y+se[1]],Ie=O?T.segpts.slice(T.segpts.length-2):[s.x+pe[0],s.y+pe[1]];Z=Ie,ae=Oe}if(V==="inside-to-node")i=[c.x,c.y];else if(H.units)i=this.manualEndptToPx(l,H);else if(V==="outside-to-line")i=T.tgtIntn;else if(V==="outside-to-node"||V==="outside-to-node-or-label"?W=Z:(V==="outside-to-line"||V==="outside-to-line-or-label")&&(W=[s.x,s.y]),i=t.nodeShapes[this.getNodeShape(l)].intersectLine(c.x,c.y,l.outerWidth(),l.outerHeight(),W[0],W[1],0,G,v),V==="outside-to-node-or-label"||V==="outside-to-line-or-label"){var Ae=l._private.rscratch,be=Ae.labelWidth,ee=Ae.labelHeight,_=Ae.labelX,F=Ae.labelY,D=be/2,L=ee/2,Q=l.pstyle("text-valign").value;Q==="top"?F-=L:Q==="bottom"&&(F+=L);var Y=l.pstyle("text-halign").value;Y==="left"?_-=D:Y==="right"&&(_+=D);var $=T4(W[0],W[1],[_-D,F-L,_+D,F-L,_+D,F+L,_-D,F+L],c.x,c.y);if($.length>0){var ue=s,ne=Wm(ue,qg(i)),ce=Wm(ue,qg($)),Se=ne;if(ce<ne&&(i=$,Se=ce),$.length>2){var xe=Wm(ue,{x:$[2],y:$[3]});xe<Se&&(i=[$[2],$[3]])}}}var Ce=jD(i,Z,t.arrowShapes[d].spacing(a)+p),Ve=jD(i,Z,t.arrowShapes[d].gap(a)+p);if(T.endX=Ve[0],T.endY=Ve[1],T.arrowEndX=Ce[0],T.arrowEndY=Ce[1],C==="inside-to-node")i=[s.x,s.y];else if(P.units)i=this.manualEndptToPx(o,P);else if(C==="outside-to-line")i=T.srcIntn;else if(C==="outside-to-node"||C==="outside-to-node-or-label"?te=ae:(C==="outside-to-line"||C==="outside-to-line-or-label")&&(te=[c.x,c.y]),i=t.nodeShapes[this.getNodeShape(o)].intersectLine(s.x,s.y,o.outerWidth(),o.outerHeight(),te[0],te[1],0,B,g),C==="outside-to-node-or-label"||C==="outside-to-line-or-label"){var Ke=o._private.rscratch,Ye=Ke.labelWidth,oe=Ke.labelHeight,X=Ke.labelX,J=Ke.labelY,he=Ye/2,ve=oe/2,ye=o.pstyle("text-valign").value;ye==="top"?J-=ve:ye==="bottom"&&(J+=ve);var re=o.pstyle("text-halign").value;re==="left"?X-=he:re==="right"&&(X+=he);var Ne=T4(te[0],te[1],[X-he,J-ve,X+he,J-ve,X+he,J+ve,X-he,J+ve],s.x,s.y);if(Ne.length>0){var Le=c,Pe=Wm(Le,qg(i)),Fe=Wm(Le,qg(Ne)),R=Pe;if(Fe<Pe&&(i=[Ne[0],Ne[1]],R=Fe),Ne.length>2){var k=Wm(Le,{x:Ne[2],y:Ne[3]});k<R&&(i=[Ne[2],Ne[3]])}}}var K=jD(i,ae,t.arrowShapes[f].spacing(a)+h),de=jD(i,ae,t.arrowShapes[f].gap(a)+h);T.startX=de[0],T.startY=de[1],T.arrowStartX=K[0],T.arrowStartY=K[1],I&&(!At(T.startX)||!At(T.startY)||!At(T.endX)||!At(T.endY)?T.badLine=!0:T.badLine=!1)};mN.getSourceEndpoint=function(a){var e=a[0]._private.rscratch;return this.recalculateRenderedStyle(a),e.edgeType==="haystack"?{x:e.haystackPts[0],y:e.haystackPts[1]}:{x:e.arrowStartX,y:e.arrowStartY}};mN.getTargetEndpoint=function(a){var e=a[0]._private.rscratch;return this.recalculateRenderedStyle(a),e.edgeType==="haystack"?{x:e.haystackPts[2],y:e.haystackPts[3]}:{x:e.arrowEndX,y:e.arrowEndY}};var ak={};function $Ve(a,e,u){for(var n=function(s,c,d,f){return ua(s,c,d,f)},r=e._private,t=r.rstyle.bezierPts,i=0;i<a.bezierProjPcts.length;i++){var o=a.bezierProjPcts[i];t.push({x:n(u[0],u[2],u[4],o),y:n(u[1],u[3],u[5],o)})}}ak.storeEdgeProjections=function(a){var e=a._private,u=e.rscratch,n=u.edgeType;if(e.rstyle.bezierPts=null,e.rstyle.linePts=null,e.rstyle.haystackPts=null,n==="multibezier"||n==="bezier"||n==="self"||n==="compound"){e.rstyle.bezierPts=[];for(var r=0;r+5<u.allpts.length;r+=4)$Ve(this,a,u.allpts.slice(r,r+6))}else if(n==="segments")for(var t=e.rstyle.linePts=[],r=0;r+1<u.allpts.length;r+=2)t.push({x:u.allpts[r],y:u.allpts[r+1]});else if(n==="haystack"){var i=u.haystackPts;e.rstyle.haystackPts=[{x:i[0],y:i[1]},{x:i[2],y:i[3]}]}e.rstyle.arrowWidth=this.getArrowWidth(a.pstyle("width").pfValue,a.pstyle("arrow-scale").value)*this.arrowShapeWidth};ak.recalculateEdgeProjections=function(a){this.findEdgeControlPoints(a)};var es={};es.recalculateNodeLabelProjection=function(a){var e=a.pstyle("label").strValue;if(!dl(e)){var u,n,r=a._private,t=a.width(),i=a.height(),o=a.padding(),l=a.position(),s=a.pstyle("text-halign").strValue,c=a.pstyle("text-valign").strValue,d=r.rscratch,f=r.rstyle;switch(s){case"left":u=l.x-t/2-o;break;case"right":u=l.x+t/2+o;break;default:u=l.x}switch(c){case"top":n=l.y-i/2-o;break;case"bottom":n=l.y+i/2+o;break;default:n=l.y}d.labelX=u,d.labelY=n,f.labelX=u,f.labelY=n,this.calculateLabelAngles(a),this.applyLabelDimensions(a)}};var JSe=function(e,u){var n=Math.atan(u/e);return e===0&&n<0&&(n=n*-1),n},WSe=function(e,u){var n=u.x-e.x,r=u.y-e.y;return JSe(n,r)},XVe=function(e,u,n,r){var t=_4(0,r-.001,1),i=_4(0,r+.001,1),o=Vg(e,u,n,t),l=Vg(e,u,n,i);return WSe(o,l)};es.recalculateEdgeLabelProjections=function(a){var e,u=a._private,n=u.rscratch,r=this,t={mid:a.pstyle("label").strValue,source:a.pstyle("source-label").strValue,target:a.pstyle("target-label").strValue};if(t.mid||t.source||t.target){e={x:n.midX,y:n.midY};var i=function(d,f,p){$s(u.rscratch,d,f,p),$s(u.rstyle,d,f,p)};i("labelX",null,e.x),i("labelY",null,e.y);var o=JSe(n.midDispX,n.midDispY);i("labelAutoAngle",null,o);var l=function(){if(l.cache)return l.cache;for(var d=[],f=0;f+5<n.allpts.length;f+=4){var p={x:n.allpts[f],y:n.allpts[f+1]},h={x:n.allpts[f+2],y:n.allpts[f+3]},g={x:n.allpts[f+4],y:n.allpts[f+5]};d.push({p0:p,p1:h,p2:g,startDist:0,length:0,segments:[]})}var v=u.rstyle.bezierPts,m=r.bezierProjPcts.length;function T(j,q,O,I,A){var P=lb(q,O),C=j.segments[j.segments.length-1],B={p0:q,p1:O,t0:I,t1:A,startDist:C?C.startDist+C.length:0,length:P};j.segments.push(B),j.length+=P}for(var w=0;w<d.length;w++){var E=d[w],S=d[w-1];S&&(E.startDist=S.startDist+S.length),T(E,E.p0,v[w*m],0,r.bezierProjPcts[0]);for(var N=0;N<m-1;N++)T(E,v[w*m+N],v[w*m+N+1],r.bezierProjPcts[N],r.bezierProjPcts[N+1]);T(E,v[w*m+m-1],E.p2,r.bezierProjPcts[m-1],1)}return l.cache=d},s=function(d){var f,p=d==="source";if(t[d]){var h=a.pstyle(d+"-text-offset").pfValue;switch(n.edgeType){case"self":case"compound":case"bezier":case"multibezier":{for(var g=l(),v,m=0,T=0,w=0;w<g.length;w++){for(var E=g[p?w:g.length-1-w],S=0;S<E.segments.length;S++){var N=E.segments[p?S:E.segments.length-1-S],j=w===g.length-1&&S===E.segments.length-1;if(m=T,T+=N.length,T>=h||j){v={cp:E,segment:N};break}}if(v)break}var q=v.cp,O=v.segment,I=(h-m)/O.length,A=O.t1-O.t0,P=p?O.t0+A*I:O.t1-A*I;P=_4(0,P,1),e=Vg(q.p0,q.p1,q.p2,P),f=XVe(q.p0,q.p1,q.p2,P);break}case"straight":case"segments":case"haystack":{for(var C=0,B,H,V,G,Z=n.allpts.length,ae=0;ae+3<Z&&(p?(V={x:n.allpts[ae],y:n.allpts[ae+1]},G={x:n.allpts[ae+2],y:n.allpts[ae+3]}):(V={x:n.allpts[Z-2-ae],y:n.allpts[Z-1-ae]},G={x:n.allpts[Z-4-ae],y:n.allpts[Z-3-ae]}),B=lb(V,G),H=C,C+=B,!(C>=h));ae+=2);var W=h-H,te=W/B;te=_4(0,te,1),e=mBe(V,G,te),f=WSe(V,G);break}}i("labelX",d,e.x),i("labelY",d,e.y),i("labelAutoAngle",d,f)}};s("source"),s("target"),this.applyLabelDimensions(a)}};es.applyLabelDimensions=function(a){this.applyPrefixedLabelDimensions(a),a.isEdge()&&(this.applyPrefixedLabelDimensions(a,"source"),this.applyPrefixedLabelDimensions(a,"target"))};es.applyPrefixedLabelDimensions=function(a,e){var u=a._private,n=this.getLabelText(a,e),r=cb(n,a._private.labelDimsKey);if(pi(u.rscratch,"prefixedLabelDimsKey",e)!==r){$s(u.rscratch,"prefixedLabelDimsKey",e,r);var t=this.calculateLabelDimensions(a,n),i=a.pstyle("line-height").pfValue,o=a.pstyle("text-wrap").strValue,l=pi(u.rscratch,"labelWrapCachedLines",e)||[],s=o!=="wrap"?1:Math.max(l.length,1),c=t.height/s,d=c*i,f=t.width,p=t.height+(s-1)*(i-1)*c;$s(u.rstyle,"labelWidth",e,f),$s(u.rscratch,"labelWidth",e,f),$s(u.rstyle,"labelHeight",e,p),$s(u.rscratch,"labelHeight",e,p),$s(u.rscratch,"labelLineHeight",e,d)}};es.getLabelText=function(a,e){var u=a._private,n=e?e+"-":"",r=a.pstyle(n+"label").strValue,t=a.pstyle("text-transform").value,i=function(pe,le){return le?($s(u.rscratch,pe,e,le),le):pi(u.rscratch,pe,e)};if(!r)return"";t=="none"||(t=="uppercase"?r=r.toUpperCase():t=="lowercase"&&(r=r.toLowerCase()));var o=a.pstyle("text-wrap").value;if(o==="wrap"){var l=i("labelKey");if(l!=null&&i("labelWrapKey")===l)return i("labelWrapCachedText");for(var s="",c=r.split(`
`),d=a.pstyle("text-max-width").pfValue,f=a.pstyle("text-overflow-wrap").value,p=f==="anywhere",h=[],g=/[\s\u200b]+|$/g,v=0;v<c.length;v++){var m=c[v],T=this.calculateLabelDimensions(a,m),w=T.width;if(p){var E=m.split("").join(s);m=E}if(w>d){var S=m.matchAll(g),N="",j=0,q=yi(S),O;try{for(q.s();!(O=q.n()).done;){var I=O.value,A=I[0],P=m.substring(j,I.index);j=I.index+A.length;var C=N.length===0?P:N+P+A,B=this.calculateLabelDimensions(a,C),H=B.width;H<=d?N+=P+A:(N&&h.push(N),N=P+A)}}catch(se){q.e(se)}finally{q.f()}N.match(/^[\s\u200b]+$/)||h.push(N)}else h.push(m)}i("labelWrapCachedLines",h),r=i("labelWrapCachedText",h.join(`
`)),i("labelWrapKey",l)}else if(o==="ellipsis"){var V=a.pstyle("text-max-width").pfValue,G="",Z="",ae=!1;if(this.calculateLabelDimensions(a,r).width<V)return r;for(var W=0;W<r.length;W++){var te=this.calculateLabelDimensions(a,G+r[W]+Z).width;if(te>V)break;G+=r[W],W===r.length-1&&(ae=!0)}return ae||(G+=Z),G}return r};es.getLabelJustification=function(a){var e=a.pstyle("text-justification").strValue,u=a.pstyle("text-halign").strValue;if(e==="auto")if(a.isNode())switch(u){case"left":return"right";case"right":return"left";default:return"center"}else return"center";else return e};es.calculateLabelDimensions=function(a,e){var u=this,n=u.cy.window(),r=n.document,t=0,i=a.pstyle("font-style").strValue,o=a.pstyle("font-size").pfValue,l=a.pstyle("font-family").strValue,s=a.pstyle("font-weight").strValue,c=this.labelCalcCanvas,d=this.labelCalcCanvasContext;if(!c){c=this.labelCalcCanvas=r.createElement("canvas"),d=this.labelCalcCanvasContext=c.getContext("2d");var f=c.style;f.position="absolute",f.left="-9999px",f.top="-9999px",f.zIndex="-1",f.visibility="hidden",f.pointerEvents="none"}d.font="".concat(i," ").concat(s," ").concat(o,"px ").concat(l);for(var p=0,h=0,g=e.split(`
`),v=0;v<g.length;v++){var m=g[v],T=d.measureText(m),w=Math.ceil(T.width),E=o;p=Math.max(w,p),h+=E}return p+=t,h+=t,{width:p,height:h}};es.calculateLabelAngle=function(a,e){var u=a._private,n=u.rscratch,r=a.isEdge(),t=e?e+"-":"",i=a.pstyle(t+"text-rotation"),o=i.strValue;return o==="none"?0:r&&o==="autorotate"?n.labelAutoAngle:o==="autorotate"?0:i.pfValue};es.calculateLabelAngles=function(a){var e=this,u=a.isEdge(),n=a._private,r=n.rscratch;r.labelAngle=e.calculateLabelAngle(a),u&&(r.sourceLabelAngle=e.calculateLabelAngle(a,"source"),r.targetLabelAngle=e.calculateLabelAngle(a,"target"))};var YSe={},$1e=28,X1e=!1;YSe.getNodeShape=function(a){var e=this,u=a.pstyle("shape").value;if(u==="cutrectangle"&&(a.width()<$1e||a.height()<$1e))return X1e||(Lr("The `cutrectangle` node shape can not be used at small sizes so `rectangle` is used instead"),X1e=!0),"rectangle";if(a.isParent())return u==="rectangle"||u==="roundrectangle"||u==="round-rectangle"||u==="cutrectangle"||u==="cut-rectangle"||u==="barrel"?u:"rectangle";if(u==="polygon"){var n=a.pstyle("shape-polygon-points").value;return e.nodeShapes.makePolygon(n).name}return u};var WP={};WP.registerCalculationListeners=function(){var a=this.cy,e=a.collection(),u=this,n=function(i){var o=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(e.merge(i),o)for(var l=0;l<i.length;l++){var s=i[l],c=s._private,d=c.rstyle;d.clean=!1,d.cleanConnected=!1}};u.binder(a).on("bounds.* dirty.*",function(i){var o=i.target;n(o)}).on("style.* background.*",function(i){var o=i.target;n(o,!1)});var r=function(i){if(i){var o=u.onUpdateEleCalcsFns;e.cleanStyle();for(var l=0;l<e.length;l++){var s=e[l],c=s._private.rstyle;s.isNode()&&!c.cleanConnected&&(n(s.connectedEdges()),c.cleanConnected=!0)}if(o)for(var d=0;d<o.length;d++){var f=o[d];f(i,e)}u.recalculateRenderedStyle(e),e=a.collection()}};u.flushRenderedStyleQueue=function(){r(!0)},u.beforeRender(r,u.beforeRenderPriorities.eleCalcs)};WP.onUpdateEleCalcs=function(a){var e=this.onUpdateEleCalcsFns=this.onUpdateEleCalcsFns||[];e.push(a)};WP.recalculateRenderedStyle=function(a,e){var u=function(E){return E._private.rstyle.cleanConnected};if(a.length!==0){var n=[],r=[];if(!this.destroyed){e===void 0&&(e=!0);for(var t=0;t<a.length;t++){var i=a[t],o=i._private,l=o.rstyle;i.isEdge()&&(!u(i.source())||!u(i.target()))&&(l.clean=!1),i.isEdge()&&i.isBundledBezier()&&i.parallelEdges().some(function(w){return!w._private.rstyle.clean&&w.isBundledBezier()})&&(l.clean=!1),!(e&&l.clean||i.removed())&&i.pstyle("display").value!=="none"&&(o.group==="nodes"?r.push(i):n.push(i),l.clean=!0)}for(var s=0;s<r.length;s++){var c=r[s],d=c._private,f=d.rstyle,p=c.position();this.recalculateNodeLabelProjection(c),f.nodeX=p.x,f.nodeY=p.y,f.nodeW=c.pstyle("width").pfValue,f.nodeH=c.pstyle("height").pfValue}this.recalculateEdgeProjections(n);for(var h=0;h<n.length;h++){var g=n[h],v=g._private,m=v.rstyle,T=v.rscratch;m.srcX=T.arrowStartX,m.srcY=T.arrowStartY,m.tgtX=T.arrowEndX,m.tgtY=T.arrowEndY,m.midX=T.midX,m.midY=T.midY,m.labelAngle=T.labelAngle,m.sourceLabelAngle=T.sourceLabelAngle,m.targetLabelAngle=T.targetLabelAngle}}}};var YP={};YP.updateCachedGrabbedEles=function(){var a=this.cachedZSortedEles;if(a){a.drag=[],a.nondrag=[];for(var e=[],u=0;u<a.length;u++){var n=a[u],r=n._private.rscratch;n.grabbed()&&!n.isParent()?e.push(n):r.inDragLayer?a.drag.push(n):a.nondrag.push(n)}for(var u=0;u<e.length;u++){var n=e[u];a.drag.push(n)}}};YP.invalidateCachedZSortedEles=function(){this.cachedZSortedEles=null};YP.getCachedZSortedEles=function(a){if(a||!this.cachedZSortedEles){var e=this.cy.mutableElements().toArray();e.sort(PSe),e.interactive=e.filter(function(u){return u.interactive()}),this.cachedZSortedEles=e,this.updateCachedGrabbedEles()}else e=this.cachedZSortedEles;return e};var ZSe={};[Ob,qF,Qa,mN,ak,es,YSe,WP,YP].forEach(function(a){qt(ZSe,a)});var eEe={};eEe.getCachedImage=function(a,e,u){var n=this,r=n.imageCache=n.imageCache||{},t=r[a];if(t)return t.image.complete||t.image.addEventListener("load",u),t.image;t=r[a]=r[a]||{};var i=t.image=new Image;i.addEventListener("load",u),i.addEventListener("error",function(){i.error=!0});var o="data:",l=a.substring(0,o.length).toLowerCase()===o;return l||(e=e==="null"?null:e,i.crossOrigin=e),i.src=a,i};var D1={};D1.registerBinding=function(a,e,u,n){var r=Array.prototype.slice.apply(arguments,[1]);if(Array.isArray(a)){for(var t=[],i=0;i<a.length;i++){var o=a[i];if(o!==void 0){var l=this.binder(o);t.push(l.on.apply(l,r))}}return t}var l=this.binder(a);return l.on.apply(l,r)};D1.binder=function(a){var e=this,u=e.cy.window(),n=a===u||a===u.document||a===u.document.body||uqe(a);if(e.supportsPassiveEvents==null){var r=!1;try{var t=Object.defineProperty({},"passive",{get:function(){return r=!0,!0}});u.addEventListener("test",null,t)}catch{}e.supportsPassiveEvents=r}var i=function(l,s,c){var d=Array.prototype.slice.call(arguments);return n&&e.supportsPassiveEvents&&(d[2]={capture:c??!1,passive:!1,once:!1}),e.bindings.push({target:a,args:d}),(a.addEventListener||a.on).apply(a,d),this};return{on:i,addEventListener:i,addListener:i,bind:i}};D1.nodeIsDraggable=function(a){return a&&a.isNode()&&!a.locked()&&a.grabbable()};D1.nodeIsGrabbable=function(a){return this.nodeIsDraggable(a)&&a.interactive()};D1.load=function(){var a=this,e=a.cy.window(),u=function(re){return re.selected()},n=function(re){var Ne=re.getRootNode();if(Ne&&Ne.nodeType===11&&Ne.host!==void 0)return Ne},r=function(re,Ne,Le,Pe){re==null&&(re=a.cy);for(var Fe=0;Fe<Ne.length;Fe++){var R=Ne[Fe];re.emit({originalEvent:Le,type:R,position:Pe})}},t=function(re){return re.shiftKey||re.metaKey||re.ctrlKey},i=function(re,Ne){var Le=!0;if(a.cy.hasCompoundNodes()&&re&&re.pannable())for(var Pe=0;Ne&&Pe<Ne.length;Pe++){var re=Ne[Pe];if(re.isNode()&&re.isParent()&&!re.pannable()){Le=!1;break}}else Le=!0;return Le},o=function(re){re[0]._private.grabbed=!0},l=function(re){re[0]._private.grabbed=!1},s=function(re){re[0]._private.rscratch.inDragLayer=!0},c=function(re){re[0]._private.rscratch.inDragLayer=!1},d=function(re){re[0]._private.rscratch.isGrabTarget=!0},f=function(re){re[0]._private.rscratch.isGrabTarget=!1},p=function(re,Ne){var Le=Ne.addToList,Pe=Le.has(re);!Pe&&re.grabbable()&&!re.locked()&&(Le.merge(re),o(re))},h=function(re,Ne){if(re.cy().hasCompoundNodes()&&!(Ne.inDragLayer==null&&Ne.addToList==null)){var Le=re.descendants();Ne.inDragLayer&&(Le.forEach(s),Le.connectedEdges().forEach(s)),Ne.addToList&&p(Le,Ne)}},g=function(re,Ne){Ne=Ne||{};var Le=re.cy().hasCompoundNodes();Ne.inDragLayer&&(re.forEach(s),re.neighborhood().stdFilter(function(Pe){return!Le||Pe.isEdge()}).forEach(s)),Ne.addToList&&re.forEach(function(Pe){p(Pe,Ne)}),h(re,Ne),T(re,{inDragLayer:Ne.inDragLayer}),a.updateCachedGrabbedEles()},v=g,m=function(re){re&&(a.getCachedZSortedEles().forEach(function(Ne){l(Ne),c(Ne),f(Ne)}),a.updateCachedGrabbedEles())},T=function(re,Ne){if(!(Ne.inDragLayer==null&&Ne.addToList==null)&&re.cy().hasCompoundNodes()){var Le=re.ancestors().orphans();if(!Le.same(re)){var Pe=Le.descendants().spawnSelf().merge(Le).unmerge(re).unmerge(re.descendants()),Fe=Pe.connectedEdges();Ne.inDragLayer&&(Fe.forEach(s),Pe.forEach(s)),Ne.addToList&&Pe.forEach(function(R){p(R,Ne)})}}},w=function(){document.activeElement!=null&&document.activeElement.blur!=null&&document.activeElement.blur()},E=typeof MutationObserver<"u",S=typeof ResizeObserver<"u";E?(a.removeObserver=new MutationObserver(function(ye){for(var re=0;re<ye.length;re++){var Ne=ye[re],Le=Ne.removedNodes;if(Le)for(var Pe=0;Pe<Le.length;Pe++){var Fe=Le[Pe];if(Fe===a.container){a.destroy();break}}}}),a.container.parentNode&&a.removeObserver.observe(a.container.parentNode,{childList:!0})):a.registerBinding(a.container,"DOMNodeRemoved",function(ye){a.destroy()});var N=fN(function(){a.cy.resize()},100);E&&(a.styleObserver=new MutationObserver(N),a.styleObserver.observe(a.container,{attributes:!0})),a.registerBinding(e,"resize",N),S&&(a.resizeObserver=new ResizeObserver(N),a.resizeObserver.observe(a.container));var j=function(re,Ne){for(;re!=null;)Ne(re),re=re.parentNode},q=function(){a.invalidateContainerClientCoordsCache()};j(a.container,function(ye){a.registerBinding(ye,"transitionend",q),a.registerBinding(ye,"animationend",q),a.registerBinding(ye,"scroll",q)}),a.registerBinding(a.container,"contextmenu",function(ye){ye.preventDefault()});var O=function(){return a.selection[4]!==0},I=function(re){for(var Ne=a.findContainerClientCoords(),Le=Ne[0],Pe=Ne[1],Fe=Ne[2],R=Ne[3],k=re.touches?re.touches:[re],K=!1,de=0;de<k.length;de++){var ge=k[de];if(Le<=ge.clientX&&ge.clientX<=Le+Fe&&Pe<=ge.clientY&&ge.clientY<=Pe+R){K=!0;break}}if(!K)return!1;for(var Ue=a.container,je=re.target,ze=je.parentNode,at=!1;ze;){if(ze===Ue){at=!0;break}ze=ze.parentNode}return!!at};a.registerBinding(a.container,"mousedown",function(re){if(I(re)&&!(a.hoverData.which===1&&re.which!==1)){re.preventDefault(),w(),a.hoverData.capture=!0,a.hoverData.which=re.which;var Ne=a.cy,Le=[re.clientX,re.clientY],Pe=a.projectIntoViewport(Le[0],Le[1]),Fe=a.selection,R=a.findNearestElements(Pe[0],Pe[1],!0,!1),k=R[0],K=a.dragData.possibleDragElements;a.hoverData.mdownPos=Pe,a.hoverData.mdownGPos=Le;var de=function(fe){return{originalEvent:re,type:fe,position:{x:Pe[0],y:Pe[1]}}},ge=function(){a.hoverData.tapholdCancelled=!1,clearTimeout(a.hoverData.tapholdTimeout),a.hoverData.tapholdTimeout=setTimeout(function(){if(!a.hoverData.tapholdCancelled){var fe=a.hoverData.down;fe?fe.emit(de("taphold")):Ne.emit(de("taphold"))}},a.tapholdDuration)};if(re.which==3){a.hoverData.cxtStarted=!0;var Ue={originalEvent:re,type:"cxttapstart",position:{x:Pe[0],y:Pe[1]}};k?(k.activate(),k.emit(Ue),a.hoverData.down=k):Ne.emit(Ue),a.hoverData.downTime=new Date().getTime(),a.hoverData.cxtDragged=!1}else if(re.which==1){k&&k.activate();{if(k!=null&&a.nodeIsGrabbable(k)){var je=function(fe){fe.emit(de("grab"))};if(d(k),!k.selected())K=a.dragData.possibleDragElements=Ne.collection(),v(k,{addToList:K}),k.emit(de("grabon")).emit(de("grab"));else{K=a.dragData.possibleDragElements=Ne.collection();var ze=Ne.$(function(at){return at.isNode()&&at.selected()&&a.nodeIsGrabbable(at)});g(ze,{addToList:K}),k.emit(de("grabon")),ze.forEach(je)}a.redrawHint("eles",!0),a.redrawHint("drag",!0)}a.hoverData.down=k,a.hoverData.downs=R,a.hoverData.downTime=new Date().getTime()}r(k,["mousedown","tapstart","vmousedown"],re,{x:Pe[0],y:Pe[1]}),k==null?(Fe[4]=1,a.data.bgActivePosistion={x:Pe[0],y:Pe[1]},a.redrawHint("select",!0),a.redraw()):k.pannable()&&(Fe[4]=1),ge()}Fe[0]=Fe[2]=Pe[0],Fe[1]=Fe[3]=Pe[1]}},!1);var A=n(a.container);a.registerBinding([e,A],"mousemove",function(re){var Ne=a.hoverData.capture;if(!(!Ne&&!I(re))){var Le=!1,Pe=a.cy,Fe=Pe.zoom(),R=[re.clientX,re.clientY],k=a.projectIntoViewport(R[0],R[1]),K=a.hoverData.mdownPos,de=a.hoverData.mdownGPos,ge=a.selection,Ue=null;!a.hoverData.draggingEles&&!a.hoverData.dragging&&!a.hoverData.selecting&&(Ue=a.findNearestElement(k[0],k[1],!0,!1));var je=a.hoverData.last,ze=a.hoverData.down,at=[k[0]-ge[2],k[1]-ge[3]],fe=a.dragData.possibleDragElements,Te;if(de){var qe=R[0]-de[0],it=qe*qe,Me=R[1]-de[1],st=Me*Me,tt=it+st;a.hoverData.isOverThresholdDrag=Te=tt>=a.desktopTapThreshold2}var Ot=t(re);Te&&(a.hoverData.tapholdCancelled=!0);var yt=function(){var vt=a.hoverData.dragDelta=a.hoverData.dragDelta||[];vt.length===0?(vt.push(at[0]),vt.push(at[1])):(vt[0]+=at[0],vt[1]+=at[1])};Le=!0,r(Ue,["mousemove","vmousemove","tapdrag"],re,{x:k[0],y:k[1]});var bt=function(vt){return{originalEvent:re,type:vt,position:{x:k[0],y:k[1]}}},Tt=function(){a.data.bgActivePosistion=void 0,a.hoverData.selecting||Pe.emit(bt("boxstart")),ge[4]=1,a.hoverData.selecting=!0,a.redrawHint("select",!0),a.redraw()};if(a.hoverData.which===3){if(Te){var xt=bt("cxtdrag");ze?ze.emit(xt):Pe.emit(xt),a.hoverData.cxtDragged=!0,(!a.hoverData.cxtOver||Ue!==a.hoverData.cxtOver)&&(a.hoverData.cxtOver&&a.hoverData.cxtOver.emit(bt("cxtdragout")),a.hoverData.cxtOver=Ue,Ue&&Ue.emit(bt("cxtdragover")))}}else if(a.hoverData.dragging){if(Le=!0,Pe.panningEnabled()&&Pe.userPanningEnabled()){var wt;if(a.hoverData.justStartedPan){var gt=a.hoverData.mdownPos;wt={x:(k[0]-gt[0])*Fe,y:(k[1]-gt[1])*Fe},a.hoverData.justStartedPan=!1}else wt={x:at[0]*Fe,y:at[1]*Fe};Pe.panBy(wt),Pe.emit(bt("dragpan")),a.hoverData.dragged=!0}k=a.projectIntoViewport(re.clientX,re.clientY)}else if(ge[4]==1&&(ze==null||ze.pannable())){if(Te){if(!a.hoverData.dragging&&Pe.boxSelectionEnabled()&&(Ot||!Pe.panningEnabled()||!Pe.userPanningEnabled()))Tt();else if(!a.hoverData.selecting&&Pe.panningEnabled()&&Pe.userPanningEnabled()){var lr=i(ze,a.hoverData.downs);lr&&(a.hoverData.dragging=!0,a.hoverData.justStartedPan=!0,ge[4]=0,a.data.bgActivePosistion=qg(K),a.redrawHint("select",!0),a.redraw())}ze&&ze.pannable()&&ze.active()&&ze.unactivate()}}else{if(ze&&ze.pannable()&&ze.active()&&ze.unactivate(),(!ze||!ze.grabbed())&&Ue!=je&&(je&&r(je,["mouseout","tapdragout"],re,{x:k[0],y:k[1]}),Ue&&r(Ue,["mouseover","tapdragover"],re,{x:k[0],y:k[1]}),a.hoverData.last=Ue),ze)if(Te){if(Pe.boxSelectionEnabled()&&Ot)ze&&ze.grabbed()&&(m(fe),ze.emit(bt("freeon")),fe.emit(bt("free")),a.dragData.didDrag&&(ze.emit(bt("dragfreeon")),fe.emit(bt("dragfree")))),Tt();else if(ze&&ze.grabbed()&&a.nodeIsDraggable(ze)){var ht=!a.dragData.didDrag;ht&&a.redrawHint("eles",!0),a.dragData.didDrag=!0,a.hoverData.draggingEles||g(fe,{inDragLayer:!0});var Re={x:0,y:0};if(At(at[0])&&At(at[1])&&(Re.x+=at[0],Re.y+=at[1],ht)){var Qe=a.hoverData.dragDelta;Qe&&At(Qe[0])&&At(Qe[1])&&(Re.x+=Qe[0],Re.y+=Qe[1])}a.hoverData.draggingEles=!0,fe.silentShift(Re).emit(bt("position")).emit(bt("drag")),a.redrawHint("drag",!0),a.redraw()}}else yt();Le=!0}if(ge[2]=k[0],ge[3]=k[1],Le)return re.stopPropagation&&re.stopPropagation(),re.preventDefault&&re.preventDefault(),!1}},!1);var P,C,B;a.registerBinding(e,"mouseup",function(re){if(!(a.hoverData.which===1&&re.which!==1&&a.hoverData.capture)){var Ne=a.hoverData.capture;if(Ne){a.hoverData.capture=!1;var Le=a.cy,Pe=a.projectIntoViewport(re.clientX,re.clientY),Fe=a.selection,R=a.findNearestElement(Pe[0],Pe[1],!0,!1),k=a.dragData.possibleDragElements,K=a.hoverData.down,de=t(re);a.data.bgActivePosistion&&(a.redrawHint("select",!0),a.redraw()),a.hoverData.tapholdCancelled=!0,a.data.bgActivePosistion=void 0,K&&K.unactivate();var ge=function(qe){return{originalEvent:re,type:qe,position:{x:Pe[0],y:Pe[1]}}};if(a.hoverData.which===3){var Ue=ge("cxttapend");if(K?K.emit(Ue):Le.emit(Ue),!a.hoverData.cxtDragged){var je=ge("cxttap");K?K.emit(je):Le.emit(je)}a.hoverData.cxtDragged=!1,a.hoverData.which=null}else if(a.hoverData.which===1){if(r(R,["mouseup","tapend","vmouseup"],re,{x:Pe[0],y:Pe[1]}),!a.dragData.didDrag&&!a.hoverData.dragged&&!a.hoverData.selecting&&!a.hoverData.isOverThresholdDrag&&(r(K,["click","tap","vclick"],re,{x:Pe[0],y:Pe[1]}),C=!1,re.timeStamp-B<=Le.multiClickDebounceTime()?(P&&clearTimeout(P),C=!0,B=null,r(K,["dblclick","dbltap","vdblclick"],re,{x:Pe[0],y:Pe[1]})):(P=setTimeout(function(){C||r(K,["oneclick","onetap","voneclick"],re,{x:Pe[0],y:Pe[1]})},Le.multiClickDebounceTime()),B=re.timeStamp)),K==null&&!a.dragData.didDrag&&!a.hoverData.selecting&&!a.hoverData.dragged&&!t(re)&&(Le.$(u).unselect(["tapunselect"]),k.length>0&&a.redrawHint("eles",!0),a.dragData.possibleDragElements=k=Le.collection()),R==K&&!a.dragData.didDrag&&!a.hoverData.selecting&&R!=null&&R._private.selectable&&(a.hoverData.dragging||(Le.selectionType()==="additive"||de?R.selected()?R.unselect(["tapunselect"]):R.select(["tapselect"]):de||(Le.$(u).unmerge(R).unselect(["tapunselect"]),R.select(["tapselect"]))),a.redrawHint("eles",!0)),a.hoverData.selecting){var ze=Le.collection(a.getAllInBox(Fe[0],Fe[1],Fe[2],Fe[3]));a.redrawHint("select",!0),ze.length>0&&a.redrawHint("eles",!0),Le.emit(ge("boxend"));var at=function(qe){return qe.selectable()&&!qe.selected()};Le.selectionType()==="additive"||de||Le.$(u).unmerge(ze).unselect(),ze.emit(ge("box")).stdFilter(at).select().emit(ge("boxselect")),a.redraw()}if(a.hoverData.dragging&&(a.hoverData.dragging=!1,a.redrawHint("select",!0),a.redrawHint("eles",!0),a.redraw()),!Fe[4]){a.redrawHint("drag",!0),a.redrawHint("eles",!0);var fe=K&&K.grabbed();m(k),fe&&(K.emit(ge("freeon")),k.emit(ge("free")),a.dragData.didDrag&&(K.emit(ge("dragfreeon")),k.emit(ge("dragfree"))))}}Fe[4]=0,a.hoverData.down=null,a.hoverData.cxtStarted=!1,a.hoverData.draggingEles=!1,a.hoverData.selecting=!1,a.hoverData.isOverThresholdDrag=!1,a.dragData.didDrag=!1,a.hoverData.dragged=!1,a.hoverData.dragDelta=[],a.hoverData.mdownPos=null,a.hoverData.mdownGPos=null,a.hoverData.which=null}}},!1);var H=[],V=4,G,Z=1e5,ae=function(re,Ne){for(var Le=0;Le<re.length;Le++)if(re[Le]%Ne!==0)return!1;return!0},W=function(re){for(var Ne=Math.abs(re[0]),Le=1;Le<re.length;Le++)if(Math.abs(re[Le])!==Ne)return!1;return!0},te=function(re){var Ne=!1,Le=re.deltaY;if(Le==null&&(re.wheelDeltaY!=null?Le=re.wheelDeltaY/4:re.wheelDelta!=null&&(Le=re.wheelDelta/4)),Le!==0){if(G==null)if(H.length>=V){var Pe=H;if(G=ae(Pe,5),!G){var Fe=Math.abs(Pe[0]);G=W(Pe)&&Fe>5}if(G)for(var R=0;R<Pe.length;R++)Z=Math.min(Math.abs(Pe[R]),Z)}else H.push(Le),Ne=!0;else G&&(Z=Math.min(Math.abs(Le),Z));if(!a.scrollingPage){var k=a.cy,K=k.zoom(),de=k.pan(),ge=a.projectIntoViewport(re.clientX,re.clientY),Ue=[ge[0]*K+de.x,ge[1]*K+de.y];if(a.hoverData.draggingEles||a.hoverData.dragging||a.hoverData.cxtStarted||O()){re.preventDefault();return}if(k.panningEnabled()&&k.userPanningEnabled()&&k.zoomingEnabled()&&k.userZoomingEnabled()){re.preventDefault(),a.data.wheelZooming=!0,clearTimeout(a.data.wheelTimeout),a.data.wheelTimeout=setTimeout(function(){a.data.wheelZooming=!1,a.redrawHint("eles",!0),a.redraw()},150);var je;Ne&&Math.abs(Le)>5&&(Le=kH(Le)*5),je=Le/-250,G&&(je/=Z,je*=3),je=je*a.wheelSensitivity;var ze=re.deltaMode===1;ze&&(je*=33);var at=k.zoom()*Math.pow(10,je);re.type==="gesturechange"&&(at=a.gestureStartZoom*re.scale),k.zoom({level:at,renderedPosition:{x:Ue[0],y:Ue[1]}}),k.emit({type:re.type==="gesturechange"?"pinchzoom":"scrollzoom",originalEvent:re,position:{x:ge[0],y:ge[1]}})}}}};a.registerBinding(a.container,"wheel",te,!0),a.registerBinding(e,"scroll",function(re){a.scrollingPage=!0,clearTimeout(a.scrollingPageTimeout),a.scrollingPageTimeout=setTimeout(function(){a.scrollingPage=!1},250)},!0),a.registerBinding(a.container,"gesturestart",function(re){a.gestureStartZoom=a.cy.zoom(),a.hasTouchStarted||re.preventDefault()},!0),a.registerBinding(a.container,"gesturechange",function(ye){a.hasTouchStarted||te(ye)},!0),a.registerBinding(a.container,"mouseout",function(re){var Ne=a.projectIntoViewport(re.clientX,re.clientY);a.cy.emit({originalEvent:re,type:"mouseout",position:{x:Ne[0],y:Ne[1]}})},!1),a.registerBinding(a.container,"mouseover",function(re){var Ne=a.projectIntoViewport(re.clientX,re.clientY);a.cy.emit({originalEvent:re,type:"mouseover",position:{x:Ne[0],y:Ne[1]}})},!1);var se,pe,le,Ee,Oe,Ie,Ae,be,ee,_,F,D,L,Q=function(re,Ne,Le,Pe){return Math.sqrt((Le-re)*(Le-re)+(Pe-Ne)*(Pe-Ne))},Y=function(re,Ne,Le,Pe){return(Le-re)*(Le-re)+(Pe-Ne)*(Pe-Ne)},$;a.registerBinding(a.container,"touchstart",$=function(re){if(a.hasTouchStarted=!0,!!I(re)){w(),a.touchData.capture=!0,a.data.bgActivePosistion=void 0;var Ne=a.cy,Le=a.touchData.now,Pe=a.touchData.earlier;if(re.touches[0]){var Fe=a.projectIntoViewport(re.touches[0].clientX,re.touches[0].clientY);Le[0]=Fe[0],Le[1]=Fe[1]}if(re.touches[1]){var Fe=a.projectIntoViewport(re.touches[1].clientX,re.touches[1].clientY);Le[2]=Fe[0],Le[3]=Fe[1]}if(re.touches[2]){var Fe=a.projectIntoViewport(re.touches[2].clientX,re.touches[2].clientY);Le[4]=Fe[0],Le[5]=Fe[1]}var R=function(Ot){return{originalEvent:re,type:Ot,position:{x:Le[0],y:Le[1]}}};if(re.touches[1]){a.touchData.singleTouchMoved=!0,m(a.dragData.touchDragEles);var k=a.findContainerClientCoords();ee=k[0],_=k[1],F=k[2],D=k[3],se=re.touches[0].clientX-ee,pe=re.touches[0].clientY-_,le=re.touches[1].clientX-ee,Ee=re.touches[1].clientY-_,L=0<=se&&se<=F&&0<=le&&le<=F&&0<=pe&&pe<=D&&0<=Ee&&Ee<=D;var K=Ne.pan(),de=Ne.zoom();Oe=Q(se,pe,le,Ee),Ie=Y(se,pe,le,Ee),Ae=[(se+le)/2,(pe+Ee)/2],be=[(Ae[0]-K.x)/de,(Ae[1]-K.y)/de];var ge=200,Ue=ge*ge;if(Ie<Ue&&!re.touches[2]){var je=a.findNearestElement(Le[0],Le[1],!0,!0),ze=a.findNearestElement(Le[2],Le[3],!0,!0);je&&je.isNode()?(je.activate().emit(R("cxttapstart")),a.touchData.start=je):ze&&ze.isNode()?(ze.activate().emit(R("cxttapstart")),a.touchData.start=ze):Ne.emit(R("cxttapstart")),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!0,a.touchData.cxtDragged=!1,a.data.bgActivePosistion=void 0,a.redraw();return}}if(re.touches[2])Ne.boxSelectionEnabled()&&re.preventDefault();else if(!re.touches[1]){if(re.touches[0]){var at=a.findNearestElements(Le[0],Le[1],!0,!0),fe=at[0];if(fe!=null&&(fe.activate(),a.touchData.start=fe,a.touchData.starts=at,a.nodeIsGrabbable(fe))){var Te=a.dragData.touchDragEles=Ne.collection(),qe=null;a.redrawHint("eles",!0),a.redrawHint("drag",!0),fe.selected()?(qe=Ne.$(function(tt){return tt.selected()&&a.nodeIsGrabbable(tt)}),g(qe,{addToList:Te})):v(fe,{addToList:Te}),d(fe),fe.emit(R("grabon")),qe?qe.forEach(function(tt){tt.emit(R("grab"))}):fe.emit(R("grab"))}r(fe,["touchstart","tapstart","vmousedown"],re,{x:Le[0],y:Le[1]}),fe==null&&(a.data.bgActivePosistion={x:Fe[0],y:Fe[1]},a.redrawHint("select",!0),a.redraw()),a.touchData.singleTouchMoved=!1,a.touchData.singleTouchStartTime=+new Date,clearTimeout(a.touchData.tapholdTimeout),a.touchData.tapholdTimeout=setTimeout(function(){a.touchData.singleTouchMoved===!1&&!a.pinching&&!a.touchData.selecting&&r(a.touchData.start,["taphold"],re,{x:Le[0],y:Le[1]})},a.tapholdDuration)}}if(re.touches.length>=1){for(var it=a.touchData.startPosition=[null,null,null,null,null,null],Me=0;Me<Le.length;Me++)it[Me]=Pe[Me]=Le[Me];var st=re.touches[0];a.touchData.startGPosition=[st.clientX,st.clientY]}}},!1);var ue;a.registerBinding(e,"touchmove",ue=function(re){var Ne=a.touchData.capture;if(!(!Ne&&!I(re))){var Le=a.selection,Pe=a.cy,Fe=a.touchData.now,R=a.touchData.earlier,k=Pe.zoom();if(re.touches[0]){var K=a.projectIntoViewport(re.touches[0].clientX,re.touches[0].clientY);Fe[0]=K[0],Fe[1]=K[1]}if(re.touches[1]){var K=a.projectIntoViewport(re.touches[1].clientX,re.touches[1].clientY);Fe[2]=K[0],Fe[3]=K[1]}if(re.touches[2]){var K=a.projectIntoViewport(re.touches[2].clientX,re.touches[2].clientY);Fe[4]=K[0],Fe[5]=K[1]}var de=function(zi){return{originalEvent:re,type:zi,position:{x:Fe[0],y:Fe[1]}}},ge=a.touchData.startGPosition,Ue;if(Ne&&re.touches[0]&&ge){for(var je=[],ze=0;ze<Fe.length;ze++)je[ze]=Fe[ze]-R[ze];var at=re.touches[0].clientX-ge[0],fe=at*at,Te=re.touches[0].clientY-ge[1],qe=Te*Te,it=fe+qe;Ue=it>=a.touchTapThreshold2}if(Ne&&a.touchData.cxt){re.preventDefault();var Me=re.touches[0].clientX-ee,st=re.touches[0].clientY-_,tt=re.touches[1].clientX-ee,Ot=re.touches[1].clientY-_,yt=Y(Me,st,tt,Ot),bt=yt/Ie,Tt=150,xt=Tt*Tt,wt=1.5,gt=wt*wt;if(bt>=gt||yt>=xt){a.touchData.cxt=!1,a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var lr=de("cxttapend");a.touchData.start?(a.touchData.start.unactivate().emit(lr),a.touchData.start=null):Pe.emit(lr)}}if(Ne&&a.touchData.cxt){var lr=de("cxtdrag");a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),a.touchData.start?a.touchData.start.emit(lr):Pe.emit(lr),a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxtDragged=!0;var ht=a.findNearestElement(Fe[0],Fe[1],!0,!0);(!a.touchData.cxtOver||ht!==a.touchData.cxtOver)&&(a.touchData.cxtOver&&a.touchData.cxtOver.emit(de("cxtdragout")),a.touchData.cxtOver=ht,ht&&ht.emit(de("cxtdragover")))}else if(Ne&&re.touches[2]&&Pe.boxSelectionEnabled())re.preventDefault(),a.data.bgActivePosistion=void 0,this.lastThreeTouch=+new Date,a.touchData.selecting||Pe.emit(de("boxstart")),a.touchData.selecting=!0,a.touchData.didSelect=!0,Le[4]=1,!Le||Le.length===0||Le[0]===void 0?(Le[0]=(Fe[0]+Fe[2]+Fe[4])/3,Le[1]=(Fe[1]+Fe[3]+Fe[5])/3,Le[2]=(Fe[0]+Fe[2]+Fe[4])/3+1,Le[3]=(Fe[1]+Fe[3]+Fe[5])/3+1):(Le[2]=(Fe[0]+Fe[2]+Fe[4])/3,Le[3]=(Fe[1]+Fe[3]+Fe[5])/3),a.redrawHint("select",!0),a.redraw();else if(Ne&&re.touches[1]&&!a.touchData.didSelect&&Pe.zoomingEnabled()&&Pe.panningEnabled()&&Pe.userZoomingEnabled()&&Pe.userPanningEnabled()){re.preventDefault(),a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var Re=a.dragData.touchDragEles;if(Re){a.redrawHint("drag",!0);for(var Qe=0;Qe<Re.length;Qe++){var ke=Re[Qe]._private;ke.grabbed=!1,ke.rscratch.inDragLayer=!1}}var vt=a.touchData.start,Me=re.touches[0].clientX-ee,st=re.touches[0].clientY-_,tt=re.touches[1].clientX-ee,Ot=re.touches[1].clientY-_,St=Q(Me,st,tt,Ot),Qt=St/Oe;if(L){var Tr=Me-se,pr=st-pe,aa=tt-le,hr=Ot-Ee,Ir=(Tr+aa)/2,fa=(pr+hr)/2,Or=Pe.zoom(),xn=Or*Qt,hn=Pe.pan(),_i=be[0]*Or+hn.x,Rn=be[1]*Or+hn.y,yo={x:-xn/Or*(_i-hn.x-Ir)+_i,y:-xn/Or*(Rn-hn.y-fa)+Rn};if(vt&&vt.active()){var Re=a.dragData.touchDragEles;m(Re),a.redrawHint("drag",!0),a.redrawHint("eles",!0),vt.unactivate().emit(de("freeon")),Re.emit(de("free")),a.dragData.didDrag&&(vt.emit(de("dragfreeon")),Re.emit(de("dragfree")))}Pe.viewport({zoom:xn,pan:yo,cancelOnFailedZoom:!0}),Pe.emit(de("pinchzoom")),Oe=St,se=Me,pe=st,le=tt,Ee=Ot,a.pinching=!0}if(re.touches[0]){var K=a.projectIntoViewport(re.touches[0].clientX,re.touches[0].clientY);Fe[0]=K[0],Fe[1]=K[1]}if(re.touches[1]){var K=a.projectIntoViewport(re.touches[1].clientX,re.touches[1].clientY);Fe[2]=K[0],Fe[3]=K[1]}if(re.touches[2]){var K=a.projectIntoViewport(re.touches[2].clientX,re.touches[2].clientY);Fe[4]=K[0],Fe[5]=K[1]}}else if(re.touches[0]&&!a.touchData.didSelect){var yn=a.touchData.start,Nn=a.touchData.last,ht;if(!a.hoverData.draggingEles&&!a.swipePanning&&(ht=a.findNearestElement(Fe[0],Fe[1],!0,!0)),Ne&&yn!=null&&re.preventDefault(),Ne&&yn!=null&&a.nodeIsDraggable(yn))if(Ue){var Re=a.dragData.touchDragEles,$r=!a.dragData.didDrag;$r&&g(Re,{inDragLayer:!0}),a.dragData.didDrag=!0;var mn={x:0,y:0};if(At(je[0])&&At(je[1])&&(mn.x+=je[0],mn.y+=je[1],$r)){a.redrawHint("eles",!0);var bn=a.touchData.dragDelta;bn&&At(bn[0])&&At(bn[1])&&(mn.x+=bn[0],mn.y+=bn[1])}a.hoverData.draggingEles=!0,Re.silentShift(mn).emit(de("position")).emit(de("drag")),a.redrawHint("drag",!0),a.touchData.startPosition[0]==R[0]&&a.touchData.startPosition[1]==R[1]&&a.redrawHint("eles",!0),a.redraw()}else{var bn=a.touchData.dragDelta=a.touchData.dragDelta||[];bn.length===0?(bn.push(je[0]),bn.push(je[1])):(bn[0]+=je[0],bn[1]+=je[1])}if(r(yn||ht,["touchmove","tapdrag","vmousemove"],re,{x:Fe[0],y:Fe[1]}),(!yn||!yn.grabbed())&&ht!=Nn&&(Nn&&Nn.emit(de("tapdragout")),ht&&ht.emit(de("tapdragover"))),a.touchData.last=ht,Ne)for(var Qe=0;Qe<Fe.length;Qe++)Fe[Qe]&&a.touchData.startPosition[Qe]&&Ue&&(a.touchData.singleTouchMoved=!0);if(Ne&&(yn==null||yn.pannable())&&Pe.panningEnabled()&&Pe.userPanningEnabled()){var Il=i(yn,a.touchData.starts);Il&&(re.preventDefault(),a.data.bgActivePosistion||(a.data.bgActivePosistion=qg(a.touchData.startPosition)),a.swipePanning?(Pe.panBy({x:je[0]*k,y:je[1]*k}),Pe.emit(de("dragpan"))):Ue&&(a.swipePanning=!0,Pe.panBy({x:at*k,y:Te*k}),Pe.emit(de("dragpan")),yn&&(yn.unactivate(),a.redrawHint("select",!0),a.touchData.start=null)));var K=a.projectIntoViewport(re.touches[0].clientX,re.touches[0].clientY);Fe[0]=K[0],Fe[1]=K[1]}}for(var ze=0;ze<Fe.length;ze++)R[ze]=Fe[ze];Ne&&re.touches.length>0&&!a.hoverData.draggingEles&&!a.swipePanning&&a.data.bgActivePosistion!=null&&(a.data.bgActivePosistion=void 0,a.redrawHint("select",!0),a.redraw())}},!1);var ne;a.registerBinding(e,"touchcancel",ne=function(re){var Ne=a.touchData.start;a.touchData.capture=!1,Ne&&Ne.unactivate()});var ce,Se,xe,Ce;if(a.registerBinding(e,"touchend",ce=function(re){var Ne=a.touchData.start,Le=a.touchData.capture;if(Le)re.touches.length===0&&(a.touchData.capture=!1),re.preventDefault();else return;var Pe=a.selection;a.swipePanning=!1,a.hoverData.draggingEles=!1;var Fe=a.cy,R=Fe.zoom(),k=a.touchData.now,K=a.touchData.earlier;if(re.touches[0]){var de=a.projectIntoViewport(re.touches[0].clientX,re.touches[0].clientY);k[0]=de[0],k[1]=de[1]}if(re.touches[1]){var de=a.projectIntoViewport(re.touches[1].clientX,re.touches[1].clientY);k[2]=de[0],k[3]=de[1]}if(re.touches[2]){var de=a.projectIntoViewport(re.touches[2].clientX,re.touches[2].clientY);k[4]=de[0],k[5]=de[1]}var ge=function(xt){return{originalEvent:re,type:xt,position:{x:k[0],y:k[1]}}};Ne&&Ne.unactivate();var Ue;if(a.touchData.cxt){if(Ue=ge("cxttapend"),Ne?Ne.emit(Ue):Fe.emit(Ue),!a.touchData.cxtDragged){var je=ge("cxttap");Ne?Ne.emit(je):Fe.emit(je)}a.touchData.start&&(a.touchData.start._private.grabbed=!1),a.touchData.cxt=!1,a.touchData.start=null,a.redraw();return}if(!re.touches[2]&&Fe.boxSelectionEnabled()&&a.touchData.selecting){a.touchData.selecting=!1;var ze=Fe.collection(a.getAllInBox(Pe[0],Pe[1],Pe[2],Pe[3]));Pe[0]=void 0,Pe[1]=void 0,Pe[2]=void 0,Pe[3]=void 0,Pe[4]=0,a.redrawHint("select",!0),Fe.emit(ge("boxend"));var at=function(xt){return xt.selectable()&&!xt.selected()};ze.emit(ge("box")).stdFilter(at).select().emit(ge("boxselect")),ze.nonempty()&&a.redrawHint("eles",!0),a.redraw()}if(Ne?.unactivate(),re.touches[2])a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);else if(!re.touches[1]){if(!re.touches[0]){if(!re.touches[0]){a.data.bgActivePosistion=void 0,a.redrawHint("select",!0);var fe=a.dragData.touchDragEles;if(Ne!=null){var Te=Ne._private.grabbed;m(fe),a.redrawHint("drag",!0),a.redrawHint("eles",!0),Te&&(Ne.emit(ge("freeon")),fe.emit(ge("free")),a.dragData.didDrag&&(Ne.emit(ge("dragfreeon")),fe.emit(ge("dragfree")))),r(Ne,["touchend","tapend","vmouseup","tapdragout"],re,{x:k[0],y:k[1]}),Ne.unactivate(),a.touchData.start=null}else{var qe=a.findNearestElement(k[0],k[1],!0,!0);r(qe,["touchend","tapend","vmouseup","tapdragout"],re,{x:k[0],y:k[1]})}var it=a.touchData.startPosition[0]-k[0],Me=it*it,st=a.touchData.startPosition[1]-k[1],tt=st*st,Ot=Me+tt,yt=Ot*R*R;a.touchData.singleTouchMoved||(Ne||Fe.$(":selected").unselect(["tapunselect"]),r(Ne,["tap","vclick"],re,{x:k[0],y:k[1]}),Se=!1,re.timeStamp-Ce<=Fe.multiClickDebounceTime()?(xe&&clearTimeout(xe),Se=!0,Ce=null,r(Ne,["dbltap","vdblclick"],re,{x:k[0],y:k[1]})):(xe=setTimeout(function(){Se||r(Ne,["onetap","voneclick"],re,{x:k[0],y:k[1]})},Fe.multiClickDebounceTime()),Ce=re.timeStamp)),Ne!=null&&!a.dragData.didDrag&&Ne._private.selectable&&yt<a.touchTapThreshold2&&!a.pinching&&(Fe.selectionType()==="single"?(Fe.$(u).unmerge(Ne).unselect(["tapunselect"]),Ne.select(["tapselect"])):Ne.selected()?Ne.unselect(["tapunselect"]):Ne.select(["tapselect"]),a.redrawHint("eles",!0)),a.touchData.singleTouchMoved=!0}}}for(var bt=0;bt<k.length;bt++)K[bt]=k[bt];a.dragData.didDrag=!1,re.touches.length===0&&(a.touchData.dragDelta=[],a.touchData.startPosition=[null,null,null,null,null,null],a.touchData.startGPosition=null,a.touchData.didSelect=!1),re.touches.length<2&&(re.touches.length===1&&(a.touchData.startGPosition=[re.touches[0].clientX,re.touches[0].clientY]),a.pinching=!1,a.redrawHint("eles",!0),a.redraw())},!1),typeof TouchEvent>"u"){var Ve=[],Ke=function(re){return{clientX:re.clientX,clientY:re.clientY,force:1,identifier:re.pointerId,pageX:re.pageX,pageY:re.pageY,radiusX:re.width/2,radiusY:re.height/2,screenX:re.screenX,screenY:re.screenY,target:re.target}},Ye=function(re){return{event:re,touch:Ke(re)}},oe=function(re){Ve.push(Ye(re))},X=function(re){for(var Ne=0;Ne<Ve.length;Ne++){var Le=Ve[Ne];if(Le.event.pointerId===re.pointerId){Ve.splice(Ne,1);return}}},J=function(re){var Ne=Ve.filter(function(Le){return Le.event.pointerId===re.pointerId})[0];Ne.event=re,Ne.touch=Ke(re)},he=function(re){re.touches=Ve.map(function(Ne){return Ne.touch})},ve=function(re){return re.pointerType==="mouse"||re.pointerType===4};a.registerBinding(a.container,"pointerdown",function(ye){ve(ye)||(ye.preventDefault(),oe(ye),he(ye),$(ye))}),a.registerBinding(a.container,"pointerup",function(ye){ve(ye)||(X(ye),he(ye),ce(ye))}),a.registerBinding(a.container,"pointercancel",function(ye){ve(ye)||(X(ye),he(ye),ne(ye))}),a.registerBinding(a.container,"pointermove",function(ye){ve(ye)||(ye.preventDefault(),J(ye),he(ye),ue(ye))})}};var cc={};cc.generatePolygon=function(a,e){return this.nodeShapes[a]={renderer:this,name:a,points:e,draw:function(n,r,t,i,o,l){this.renderer.nodeShapeImpl("polygon",n,r,t,i,o,this.points)},intersectLine:function(n,r,t,i,o,l,s,c){return T4(o,l,this.points,n,r,t/2,i/2,s)},checkPoint:function(n,r,t,i,o,l,s,c){return rc(n,r,this.points,l,s,i,o,[0,-1],t)},hasMiterBounds:a!=="rectangle",miterBounds:function(n,r,t,i,o,l){return wBe(this.points,n,r,t,i,o)}}};cc.generateEllipse=function(){return this.nodeShapes.ellipse={renderer:this,name:"ellipse",draw:function(e,u,n,r,t,i){this.renderer.nodeShapeImpl(this.name,e,u,n,r,t)},intersectLine:function(e,u,n,r,t,i,o,l){return IBe(t,i,e,u,n/2+o,r/2+o)},checkPoint:function(e,u,n,r,t,i,o,l){return ub(e,u,r,t,i,o,n)}}};cc.generateRoundPolygon=function(a,e){return this.nodeShapes[a]={renderer:this,name:a,points:e,getOrCreateCorners:function(n,r,t,i,o,l,s){if(l[s]!==void 0&&l[s+"-cx"]===n&&l[s+"-cy"]===r)return l[s];l[s]=new Array(e.length/2),l[s+"-cx"]=n,l[s+"-cy"]=r;var c=t/2,d=i/2;o=o==="auto"?tSe(t,i):o;for(var f=new Array(e.length/2),p=0;p<e.length/2;p++)f[p]={x:n+c*e[p*2],y:r+d*e[p*2+1]};var h,g,v,m,T=f.length;for(g=f[T-1],h=0;h<T;h++)v=f[h%T],m=f[(h+1)%T],l[s][h]=nk(g,v,m,o),g=v,v=m;return l[s]},draw:function(n,r,t,i,o,l,s){this.renderer.nodeShapeImpl("round-polygon",n,r,t,i,o,this.points,this.getOrCreateCorners(r,t,i,o,l,s,"drawCorners"))},intersectLine:function(n,r,t,i,o,l,s,c,d){return FBe(o,l,this.points,n,r,t,i,s,this.getOrCreateCorners(n,r,t,i,c,d,"corners"))},checkPoint:function(n,r,t,i,o,l,s,c,d){return NBe(n,r,this.points,l,s,i,o,this.getOrCreateCorners(l,s,i,o,c,d,"corners"))}}};cc.generateRoundRectangle=function(){return this.nodeShapes["round-rectangle"]=this.nodeShapes.roundrectangle={renderer:this,name:"round-rectangle",points:Wa(4,0),draw:function(e,u,n,r,t,i){this.renderer.nodeShapeImpl(this.name,e,u,n,r,t,this.points,i)},intersectLine:function(e,u,n,r,t,i,o,l){return Zwe(t,i,e,u,n,r,o,l)},checkPoint:function(e,u,n,r,t,i,o,l){var s=r/2,c=t/2;l=l==="auto"?pl(r,t):l,l=Math.min(s,c,l);var d=l*2;return!!(rc(e,u,this.points,i,o,r,t-d,[0,-1],n)||rc(e,u,this.points,i,o,r-d,t,[0,-1],n)||ub(e,u,d,d,i-s+l,o-c+l,n)||ub(e,u,d,d,i+s-l,o-c+l,n)||ub(e,u,d,d,i+s-l,o+c-l,n)||ub(e,u,d,d,i-s+l,o+c-l,n))}}};cc.generateCutRectangle=function(){return this.nodeShapes["cut-rectangle"]=this.nodeShapes.cutrectangle={renderer:this,name:"cut-rectangle",cornerLength:GH(),points:Wa(4,0),draw:function(e,u,n,r,t,i){this.renderer.nodeShapeImpl(this.name,e,u,n,r,t,null,i)},generateCutTrianglePts:function(e,u,n,r,t){var i=t==="auto"?this.cornerLength:t,o=u/2,l=e/2,s=n-l,c=n+l,d=r-o,f=r+o;return{topLeft:[s,d+i,s+i,d,s+i,d+i],topRight:[c-i,d,c,d+i,c-i,d+i],bottomRight:[c,f-i,c-i,f,c-i,f-i],bottomLeft:[s+i,f,s,f-i,s+i,f-i]}},intersectLine:function(e,u,n,r,t,i,o,l){var s=this.generateCutTrianglePts(n+2*o,r+2*o,e,u,l),c=[].concat.apply([],[s.topLeft.splice(0,4),s.topRight.splice(0,4),s.bottomRight.splice(0,4),s.bottomLeft.splice(0,4)]);return T4(t,i,c,e,u)},checkPoint:function(e,u,n,r,t,i,o,l){var s=l==="auto"?this.cornerLength:l;if(rc(e,u,this.points,i,o,r,t-2*s,[0,-1],n)||rc(e,u,this.points,i,o,r-2*s,t,[0,-1],n))return!0;var c=this.generateCutTrianglePts(r,t,i,o);return hi(e,u,c.topLeft)||hi(e,u,c.topRight)||hi(e,u,c.bottomRight)||hi(e,u,c.bottomLeft)}}};cc.generateBarrel=function(){return this.nodeShapes.barrel={renderer:this,name:"barrel",points:Wa(4,0),draw:function(e,u,n,r,t,i){this.renderer.nodeShapeImpl(this.name,e,u,n,r,t)},intersectLine:function(e,u,n,r,t,i,o,l){var s=.15,c=.5,d=.85,f=this.generateBarrelBezierPts(n+2*o,r+2*o,e,u),p=function(v){var m=Vg({x:v[0],y:v[1]},{x:v[2],y:v[3]},{x:v[4],y:v[5]},s),T=Vg({x:v[0],y:v[1]},{x:v[2],y:v[3]},{x:v[4],y:v[5]},c),w=Vg({x:v[0],y:v[1]},{x:v[2],y:v[3]},{x:v[4],y:v[5]},d);return[v[0],v[1],m.x,m.y,T.x,T.y,w.x,w.y,v[4],v[5]]},h=[].concat(p(f.topLeft),p(f.topRight),p(f.bottomRight),p(f.bottomLeft));return T4(t,i,h,e,u)},generateBarrelBezierPts:function(e,u,n,r){var t=u/2,i=e/2,o=n-i,l=n+i,s=r-t,c=r+t,d=v7(e,u),f=d.heightOffset,p=d.widthOffset,h=d.ctrlPtOffsetPct*e,g={topLeft:[o,s+f,o+h,s,o+p,s],topRight:[l-p,s,l-h,s,l,s+f],bottomRight:[l,c-f,l-h,c,l-p,c],bottomLeft:[o+p,c,o+h,c,o,c-f]};return g.topLeft.isTop=!0,g.topRight.isTop=!0,g.bottomLeft.isBottom=!0,g.bottomRight.isBottom=!0,g},checkPoint:function(e,u,n,r,t,i,o,l){var s=v7(r,t),c=s.heightOffset,d=s.widthOffset;if(rc(e,u,this.points,i,o,r,t-2*c,[0,-1],n)||rc(e,u,this.points,i,o,r-2*d,t,[0,-1],n))return!0;for(var f=this.generateBarrelBezierPts(r,t,i,o),p=function(q,O,I){var A=I[4],P=I[2],C=I[0],B=I[5],H=I[1],V=Math.min(A,C),G=Math.max(A,C),Z=Math.min(B,H),ae=Math.max(B,H);if(V<=q&&q<=G&&Z<=O&&O<=ae){var W=PBe(A,P,C),te=ABe(W[0],W[1],W[2],q),se=te.filter(function(pe){return 0<=pe&&pe<=1});if(se.length>0)return se[0]}return null},h=Object.keys(f),g=0;g<h.length;g++){var v=h[g],m=f[v],T=p(e,u,m);if(T!=null){var w=m[5],E=m[3],S=m[1],N=ua(w,E,S,T);if(m.isTop&&N<=u||m.isBottom&&u<=N)return!0}}return!1}}};cc.generateBottomRoundrectangle=function(){return this.nodeShapes["bottom-round-rectangle"]=this.nodeShapes.bottomroundrectangle={renderer:this,name:"bottom-round-rectangle",points:Wa(4,0),draw:function(e,u,n,r,t,i){this.renderer.nodeShapeImpl(this.name,e,u,n,r,t,this.points,i)},intersectLine:function(e,u,n,r,t,i,o,l){var s=e-(n/2+o),c=u-(r/2+o),d=c,f=e+(n/2+o),p=al(t,i,e,u,s,c,f,d,!1);return p.length>0?p:Zwe(t,i,e,u,n,r,o,l)},checkPoint:function(e,u,n,r,t,i,o,l){l=l==="auto"?pl(r,t):l;var s=2*l;if(rc(e,u,this.points,i,o,r,t-s,[0,-1],n)||rc(e,u,this.points,i,o,r-s,t,[0,-1],n))return!0;var c=r/2+2*n,d=t/2+2*n,f=[i-c,o-d,i-c,o,i+c,o,i+c,o-d];return!!(hi(e,u,f)||ub(e,u,s,s,i+r/2-l,o+t/2-l,n)||ub(e,u,s,s,i-r/2+l,o+t/2-l,n))}}};cc.registerNodeShapes=function(){var a=this.nodeShapes={},e=this;this.generateEllipse(),this.generatePolygon("triangle",Wa(3,0)),this.generateRoundPolygon("round-triangle",Wa(3,0)),this.generatePolygon("rectangle",Wa(4,0)),a.square=a.rectangle,this.generateRoundRectangle(),this.generateCutRectangle(),this.generateBarrel(),this.generateBottomRoundrectangle();{var u=[0,1,1,0,0,-1,-1,0];this.generatePolygon("diamond",u),this.generateRoundPolygon("round-diamond",u)}this.generatePolygon("pentagon",Wa(5,0)),this.generateRoundPolygon("round-pentagon",Wa(5,0)),this.generatePolygon("hexagon",Wa(6,0)),this.generateRoundPolygon("round-hexagon",Wa(6,0)),this.generatePolygon("heptagon",Wa(7,0)),this.generateRoundPolygon("round-heptagon",Wa(7,0)),this.generatePolygon("octagon",Wa(8,0)),this.generateRoundPolygon("round-octagon",Wa(8,0));var n=new Array(20);{var r=g7(5,0),t=g7(5,Math.PI/5),i=.5*(3-Math.sqrt(5));i*=1.57;for(var o=0;o<t.length/2;o++)t[o*2]*=i,t[o*2+1]*=i;for(var o=0;o<20/4;o++)n[o*4]=r[o*2],n[o*4+1]=r[o*2+1],n[o*4+2]=t[o*2],n[o*4+3]=t[o*2+1]}n=eSe(n),this.generatePolygon("star",n),this.generatePolygon("vee",[-1,-1,0,-.333,1,-1,0,1]),this.generatePolygon("rhomboid",[-1,-1,.333,-1,1,1,-.333,1]),this.generatePolygon("right-rhomboid",[-.333,-1,1,-1,.333,1,-1,1]),this.nodeShapes.concavehexagon=this.generatePolygon("concave-hexagon",[-1,-.95,-.75,0,-1,.95,1,.95,.75,0,1,-.95]);{var l=[-1,-1,.25,-1,1,0,.25,1,-1,1];this.generatePolygon("tag",l),this.generateRoundPolygon("round-tag",l)}a.makePolygon=function(s){var c=s.join("$"),d="polygon-"+c,f;return(f=this[d])?f:e.generatePolygon(d,s)}};var bN={};bN.timeToRender=function(){return this.redrawTotalTime/this.redrawCount};bN.redraw=function(a){a=a||Kwe();var e=this;e.averageRedrawTime===void 0&&(e.averageRedrawTime=0),e.lastRedrawTime===void 0&&(e.lastRedrawTime=0),e.lastDrawTime===void 0&&(e.lastDrawTime=0),e.requestedFrame=!0,e.renderOptions=a};bN.beforeRender=function(a,e){if(!this.destroyed){e==null&&_n("Priority is not optional for beforeRender");var u=this.beforeRenderCallbacks;u.push({fn:a,priority:e}),u.sort(function(n,r){return r.priority-n.priority})}};var K1e=function(e,u,n){for(var r=e.beforeRenderCallbacks,t=0;t<r.length;t++)r[t].fn(u,n)};bN.startRenderLoop=function(){var a=this,e=a.cy;if(!a.renderLoopStarted){a.renderLoopStarted=!0;var u=function(r){if(!a.destroyed){if(!e.batching())if(a.requestedFrame&&!a.skipFrame){K1e(a,!0,r);var t=tc();a.render(a.renderOptions);var i=a.lastDrawTime=tc();a.averageRedrawTime===void 0&&(a.averageRedrawTime=i-t),a.redrawCount===void 0&&(a.redrawCount=0),a.redrawCount++,a.redrawTotalTime===void 0&&(a.redrawTotalTime=0);var o=i-t;a.redrawTotalTime+=o,a.lastRedrawTime=o,a.averageRedrawTime=a.averageRedrawTime/2+o/2,a.requestedFrame=!1}else K1e(a,!1,r);a.skipFrame=!1,IF(u)}};IF(u)}};var KVe=function(e){this.init(e)},tEe=KVe,F1=tEe.prototype;F1.clientFunctions=["redrawHint","render","renderTo","matchCanvasSize","nodeShapeImpl","arrowShapeImpl"];F1.init=function(a){var e=this;e.options=a,e.cy=a.cy;var u=e.container=a.cy.container(),n=e.cy.window();if(n){var r=n.document,t=r.head,i="__________cytoscape_stylesheet",o="__________cytoscape_container",l=r.getElementById(i)!=null;if(u.className.indexOf(o)<0&&(u.className=(u.className||"")+" "+o),!l){var s=r.createElement("style");s.id=i,s.textContent="."+o+" { position: relative; }",t.insertBefore(s,t.children[0])}var c=n.getComputedStyle(u),d=c.getPropertyValue("position");d==="static"&&Lr("A Cytoscape container has style position:static and so can not use UI extensions properly")}e.selection=[void 0,void 0,void 0,void 0,0],e.bezierProjPcts=[.05,.225,.4,.5,.6,.775,.95],e.hoverData={down:null,last:null,downTime:null,triggerMode:null,dragging:!1,initialPan:[null,null],capture:!1},e.dragData={possibleDragElements:[]},e.touchData={start:null,capture:!1,startPosition:[null,null,null,null,null,null],singleTouchStartTime:null,singleTouchMoved:!0,now:[null,null,null,null,null,null],earlier:[null,null,null,null,null,null]},e.redraws=0,e.showFps=a.showFps,e.debug=a.debug,e.webgl=a.webgl,e.hideEdgesOnViewport=a.hideEdgesOnViewport,e.textureOnViewport=a.textureOnViewport,e.wheelSensitivity=a.wheelSensitivity,e.motionBlurEnabled=a.motionBlur,e.forcedPixelRatio=At(a.pixelRatio)?a.pixelRatio:null,e.motionBlur=a.motionBlur,e.motionBlurOpacity=a.motionBlurOpacity,e.motionBlurTransparency=1-e.motionBlurOpacity,e.motionBlurPxRatio=1,e.mbPxRBlurry=1,e.minMbLowQualFrames=4,e.fullQualityMb=!1,e.clearedForMotionBlur=[],e.desktopTapThreshold=a.desktopTapThreshold,e.desktopTapThreshold2=a.desktopTapThreshold*a.desktopTapThreshold,e.touchTapThreshold=a.touchTapThreshold,e.touchTapThreshold2=a.touchTapThreshold*a.touchTapThreshold,e.tapholdDuration=500,e.bindings=[],e.beforeRenderCallbacks=[],e.beforeRenderPriorities={animations:400,eleCalcs:300,eleTxrDeq:200,lyrTxrDeq:150,lyrTxrSkip:100},e.registerNodeShapes(),e.registerArrowShapes(),e.registerCalculationListeners()};F1.notify=function(a,e){var u=this,n=u.cy;if(!this.destroyed){if(a==="init"){u.load();return}if(a==="destroy"){u.destroy();return}(a==="add"||a==="remove"||a==="move"&&n.hasCompoundNodes()||a==="load"||a==="zorder"||a==="mount")&&u.invalidateCachedZSortedEles(),a==="viewport"&&u.redrawHint("select",!0),a==="gc"&&u.redrawHint("gc",!0),(a==="load"||a==="resize"||a==="mount")&&(u.invalidateContainerClientCoordsCache(),u.matchCanvasSize(u.container)),u.redrawHint("eles",!0),u.redrawHint("drag",!0),this.startRenderLoop(),this.redraw()}};F1.destroy=function(){var a=this;a.destroyed=!0,a.cy.stopAnimationLoop();for(var e=0;e<a.bindings.length;e++){var u=a.bindings[e],n=u,r=n.target;(r.off||r.removeEventListener).apply(r,n.args)}if(a.bindings=[],a.beforeRenderCallbacks=[],a.onUpdateEleCalcsFns=[],a.removeObserver&&a.removeObserver.disconnect(),a.styleObserver&&a.styleObserver.disconnect(),a.resizeObserver&&a.resizeObserver.disconnect(),a.labelCalcDiv)try{document.body.removeChild(a.labelCalcDiv)}catch{}};F1.isHeadless=function(){return!1};[rk,ZSe,eEe,D1,cc,bN].forEach(function(a){qt(F1,a)});var CL=1e3/60,rEe={setupDequeueing:function(e){return function(){var n=this,r=this.renderer;if(!n.dequeueingSetup){n.dequeueingSetup=!0;var t=fN(function(){r.redrawHint("eles",!0),r.redrawHint("drag",!0),r.redraw()},e.deqRedrawThreshold),i=function(s,c){var d=tc(),f=r.averageRedrawTime,p=r.lastRedrawTime,h=[],g=r.cy.extent(),v=r.getPixelRatio();for(s||r.flushRenderedStyleQueue();;){var m=tc(),T=m-d,w=m-c;if(p<CL){var E=CL-(s?f:0);if(w>=e.deqFastCost*E)break}else if(s){if(T>=e.deqCost*p||T>=e.deqAvgCost*f)break}else if(w>=e.deqNoDrawCost*CL)break;var S=e.deq(n,v,g);if(S.length>0)for(var N=0;N<S.length;N++)h.push(S[N]);else break}h.length>0&&(e.onDeqd(n,h),!s&&e.shouldRedraw(n,h,v,g)&&t())},o=e.priority||QH;r.beforeRender(i,o(n))}}}},JVe=(function(){function a(e){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:DF;Al(this,a),this.idsByKey=new Xs,this.keyForId=new Xs,this.cachesByLvl=new Xs,this.lvls=[],this.getKey=e,this.doesEleInvalidateKey=u}return Ol(a,[{key:"getIdsFor",value:function(u){u==null&&_n("Can not get id list for null key");var n=this.idsByKey,r=this.idsByKey.get(u);return r||(r=new x1,n.set(u,r)),r}},{key:"addIdForKey",value:function(u,n){u!=null&&this.getIdsFor(u).add(n)}},{key:"deleteIdForKey",value:function(u,n){u!=null&&this.getIdsFor(u).delete(n)}},{key:"getNumberOfIdsForKey",value:function(u){return u==null?0:this.getIdsFor(u).size}},{key:"updateKeyMappingFor",value:function(u){var n=u.id(),r=this.keyForId.get(n),t=this.getKey(u);this.deleteIdForKey(r,n),this.addIdForKey(t,n),this.keyForId.set(n,t)}},{key:"deleteKeyMappingFor",value:function(u){var n=u.id(),r=this.keyForId.get(n);this.deleteIdForKey(r,n),this.keyForId.delete(n)}},{key:"keyHasChangedFor",value:function(u){var n=u.id(),r=this.keyForId.get(n),t=this.getKey(u);return r!==t}},{key:"isInvalid",value:function(u){return this.keyHasChangedFor(u)||this.doesEleInvalidateKey(u)}},{key:"getCachesAt",value:function(u){var n=this.cachesByLvl,r=this.lvls,t=n.get(u);return t||(t=new Xs,n.set(u,t),r.push(u)),t}},{key:"getCache",value:function(u,n){return this.getCachesAt(n).get(u)}},{key:"get",value:function(u,n){var r=this.getKey(u),t=this.getCache(r,n);return t!=null&&this.updateKeyMappingFor(u),t}},{key:"getForCachedKey",value:function(u,n){var r=this.keyForId.get(u.id()),t=this.getCache(r,n);return t}},{key:"hasCache",value:function(u,n){return this.getCachesAt(n).has(u)}},{key:"has",value:function(u,n){var r=this.getKey(u);return this.hasCache(r,n)}},{key:"setCache",value:function(u,n,r){r.key=u,this.getCachesAt(n).set(u,r)}},{key:"set",value:function(u,n,r){var t=this.getKey(u);this.setCache(t,n,r),this.updateKeyMappingFor(u)}},{key:"deleteCache",value:function(u,n){this.getCachesAt(n).delete(u)}},{key:"delete",value:function(u,n){var r=this.getKey(u);this.deleteCache(r,n)}},{key:"invalidateKey",value:function(u){var n=this;this.lvls.forEach(function(r){return n.deleteCache(u,r)})}},{key:"invalidate",value:function(u){var n=u.id(),r=this.keyForId.get(n);this.deleteKeyMappingFor(u);var t=this.doesEleInvalidateKey(u);return t&&this.invalidateKey(r),t||this.getNumberOfIdsForKey(r)===0}}])})(),J1e=25,VD=50,mF=-4,F7=3,nEe=7.99,WVe=8,YVe=1024,ZVe=1024,eHe=1024,tHe=.2,rHe=.8,nHe=10,aHe=.15,iHe=.1,uHe=.9,oHe=.9,sHe=100,cHe=1,Ug={dequeue:"dequeue",downscale:"downscale",highQuality:"highQuality"},lHe=Ra({getKey:null,doesEleInvalidateKey:DF,drawElement:null,getBoundingBox:null,getRotationPoint:null,getRotationOffset:null,isVisible:Gwe,allowEdgeTxrCaching:!0,allowParentTxrCaching:!0}),Z6=function(e,u){var n=this;n.renderer=e,n.onDequeues=[];var r=lHe(u);qt(n,r),n.lookup=new JVe(r.getKey,r.doesEleInvalidateKey),n.setupDequeueing()},na=Z6.prototype;na.reasons=Ug;na.getTextureQueue=function(a){var e=this;return e.eleImgCaches=e.eleImgCaches||{},e.eleImgCaches[a]=e.eleImgCaches[a]||[]};na.getRetiredTextureQueue=function(a){var e=this,u=e.eleImgCaches.retired=e.eleImgCaches.retired||{},n=u[a]=u[a]||[];return n};na.getElementQueue=function(){var a=this,e=a.eleCacheQueue=a.eleCacheQueue||new pN(function(u,n){return n.reqs-u.reqs});return e};na.getElementKeyToQueue=function(){var a=this,e=a.eleKeyToCacheQueue=a.eleKeyToCacheQueue||{};return e};na.getElement=function(a,e,u,n,r){var t=this,i=this.renderer,o=i.cy.zoom(),l=this.lookup;if(!e||e.w===0||e.h===0||isNaN(e.w)||isNaN(e.h)||!a.visible()||a.removed()||!t.allowEdgeTxrCaching&&a.isEdge()||!t.allowParentTxrCaching&&a.isParent())return null;if(n==null&&(n=Math.ceil(HH(o*u))),n<mF)n=mF;else if(o>=nEe||n>F7)return null;var s=Math.pow(2,n),c=e.h*s,d=e.w*s,f=i.eleTextBiggerThanMin(a,s);if(!this.isVisible(a,f))return null;var p=l.get(a,n);if(p&&p.invalidated&&(p.invalidated=!1,p.texture.invalidatedWidth-=p.width),p)return p;var h;if(c<=J1e?h=J1e:c<=VD?h=VD:h=Math.ceil(c/VD)*VD,c>eHe||d>ZVe)return null;var g=t.getTextureQueue(h),v=g[g.length-2],m=function(){return t.recycleTexture(h,d)||t.addTexture(h,d)};v||(v=g[g.length-1]),v||(v=m()),v.width-v.usedWidth<d&&(v=m());for(var T=function(V){return V&&V.scaledLabelShown===f},w=r&&r===Ug.dequeue,E=r&&r===Ug.highQuality,S=r&&r===Ug.downscale,N,j=n+1;j<=F7;j++){var q=l.get(a,j);if(q){N=q;break}}var O=N&&N.level===n+1?N:null,I=function(){v.context.drawImage(O.texture.canvas,O.x,0,O.width,O.height,v.usedWidth,0,d,c)};if(v.context.setTransform(1,0,0,1,0,0),v.context.clearRect(v.usedWidth,0,d,h),T(O))I();else if(T(N))if(E){for(var A=N.level;A>n;A--)O=t.getElement(a,e,u,A,Ug.downscale);I()}else return t.queueElement(a,N.level-1),N;else{var P;if(!w&&!E&&!S)for(var C=n-1;C>=mF;C--){var B=l.get(a,C);if(B){P=B;break}}if(T(P))return t.queueElement(a,n),P;v.context.translate(v.usedWidth,0),v.context.scale(s,s),this.drawElement(v.context,a,e,f,!1),v.context.scale(1/s,1/s),v.context.translate(-v.usedWidth,0)}return p={x:v.usedWidth,texture:v,level:n,scale:s,width:d,height:c,scaledLabelShown:f},v.usedWidth+=Math.ceil(d+WVe),v.eleCaches.push(p),l.set(a,n,p),t.checkTextureFullness(v),p};na.invalidateElements=function(a){for(var e=0;e<a.length;e++)this.invalidateElement(a[e])};na.invalidateElement=function(a){var e=this,u=e.lookup,n=[],r=u.isInvalid(a);if(r){for(var t=mF;t<=F7;t++){var i=u.getForCachedKey(a,t);i&&n.push(i)}var o=u.invalidate(a);if(o)for(var l=0;l<n.length;l++){var s=n[l],c=s.texture;c.invalidatedWidth+=s.width,s.invalidated=!0,e.checkTextureUtility(c)}e.removeFromQueue(a)}};na.checkTextureUtility=function(a){a.invalidatedWidth>=tHe*a.width&&this.retireTexture(a)};na.checkTextureFullness=function(a){var e=this,u=e.getTextureQueue(a.height);a.usedWidth/a.width>rHe&&a.fullnessChecks>=nHe?fl(u,a):a.fullnessChecks++};na.retireTexture=function(a){var e=this,u=a.height,n=e.getTextureQueue(u),r=this.lookup;fl(n,a),a.retired=!0;for(var t=a.eleCaches,i=0;i<t.length;i++){var o=t[i];r.deleteCache(o.key,o.level)}VH(t);var l=e.getRetiredTextureQueue(u);l.push(a)};na.addTexture=function(a,e){var u=this,n=u.getTextureQueue(a),r={};return n.push(r),r.eleCaches=[],r.height=a,r.width=Math.max(YVe,e),r.usedWidth=0,r.invalidatedWidth=0,r.fullnessChecks=0,r.canvas=u.renderer.makeOffscreenCanvas(r.width,r.height),r.context=r.canvas.getContext("2d"),r};na.recycleTexture=function(a,e){for(var u=this,n=u.getTextureQueue(a),r=u.getRetiredTextureQueue(a),t=0;t<r.length;t++){var i=r[t];if(i.width>=e)return i.retired=!1,i.usedWidth=0,i.invalidatedWidth=0,i.fullnessChecks=0,VH(i.eleCaches),i.context.setTransform(1,0,0,1,0,0),i.context.clearRect(0,0,i.width,i.height),fl(r,i),n.push(i),i}};na.queueElement=function(a,e){var u=this,n=u.getElementQueue(),r=u.getElementKeyToQueue(),t=this.getKey(a),i=r[t];if(i)i.level=Math.max(i.level,e),i.eles.merge(a),i.reqs++,n.updateItem(i);else{var o={eles:a.spawn().merge(a),level:e,reqs:1,key:t};n.push(o),r[t]=o}};na.dequeue=function(a){for(var e=this,u=e.getElementQueue(),n=e.getElementKeyToQueue(),r=[],t=e.lookup,i=0;i<cHe&&u.size()>0;i++){var o=u.pop(),l=o.key,s=o.eles[0],c=t.hasCache(s,o.level);if(n[l]=null,c)continue;r.push(o);var d=e.getBoundingBox(s);e.getElement(s,d,a,o.level,Ug.dequeue)}return r};na.removeFromQueue=function(a){var e=this,u=e.getElementQueue(),n=e.getElementKeyToQueue(),r=this.getKey(a),t=n[r];t!=null&&(t.eles.length===1?(t.reqs=UH,u.updateItem(t),u.pop(),n[r]=null):t.eles.unmerge(a))};na.onDequeue=function(a){this.onDequeues.push(a)};na.offDequeue=function(a){fl(this.onDequeues,a)};na.setupDequeueing=rEe.setupDequeueing({deqRedrawThreshold:sHe,deqCost:aHe,deqAvgCost:iHe,deqNoDrawCost:uHe,deqFastCost:oHe,deq:function(e,u,n){return e.dequeue(u,n)},onDeqd:function(e,u){for(var n=0;n<e.onDequeues.length;n++){var r=e.onDequeues[n];r(u)}},shouldRedraw:function(e,u,n,r){for(var t=0;t<u.length;t++)for(var i=u[t].eles,o=0;o<i.length;o++){var l=i[o].boundingBox();if(zH(l,r))return!0}return!1},priority:function(e){return e.renderer.beforeRenderPriorities.eleTxrDeq}});var dHe=1,a4=-4,BF=2,fHe=3.99,pHe=50,hHe=50,yHe=.15,mHe=.1,bHe=.9,gHe=.9,vHe=1,W1e=250,_He=4e3*4e3,Y1e=32767,THe=!0,aEe=function(e){var u=this,n=u.renderer=e,r=n.cy;u.layersByLevel={},u.firstGet=!0,u.lastInvalidationTime=tc()-2*W1e,u.skipping=!1,u.eleTxrDeqs=r.collection(),u.scheduleElementRefinement=fN(function(){u.refineElementTextures(u.eleTxrDeqs),u.eleTxrDeqs.unmerge(u.eleTxrDeqs)},hHe),n.beforeRender(function(i,o){o-u.lastInvalidationTime<=W1e?u.skipping=!0:u.skipping=!1},n.beforeRenderPriorities.lyrTxrSkip);var t=function(o,l){return l.reqs-o.reqs};u.layersQueue=new pN(t),u.setupDequeueing()},Na=aEe.prototype,Z1e=0,wHe=Math.pow(2,53)-1;Na.makeLayer=function(a,e){var u=Math.pow(2,e),n=Math.ceil(a.w*u),r=Math.ceil(a.h*u),t=this.renderer.makeOffscreenCanvas(n,r),i={id:Z1e=++Z1e%wHe,bb:a,level:e,width:n,height:r,canvas:t,context:t.getContext("2d"),eles:[],elesQueue:[],reqs:0},o=i.context,l=-i.bb.x1,s=-i.bb.y1;return o.scale(u,u),o.translate(l,s),i};Na.getLayers=function(a,e,u){var n=this,r=n.renderer,t=r.cy,i=t.zoom(),o=n.firstGet;if(n.firstGet=!1,u==null){if(u=Math.ceil(HH(i*e)),u<a4)u=a4;else if(i>=fHe||u>BF)return null}n.validateLayersElesOrdering(u,a);var l=n.layersByLevel,s=Math.pow(2,u),c=l[u]=l[u]||[],d,f=n.levelIsComplete(u,a),p,h=function(){var I=function(H){if(n.validateLayersElesOrdering(H,a),n.levelIsComplete(H,a))return p=l[H],!0},A=function(H){if(!p)for(var V=u+H;a4<=V&&V<=BF&&!I(V);V+=H);};A(1),A(-1);for(var P=c.length-1;P>=0;P--){var C=c[P];C.invalid&&fl(c,C)}};if(!f)h();else return c;var g=function(){if(!d){d=ei();for(var I=0;I<a.length;I++)vBe(d,a[I].boundingBox())}return d},v=function(I){I=I||{};var A=I.after;g();var P=Math.ceil(d.w*s),C=Math.ceil(d.h*s);if(P>Y1e||C>Y1e)return null;var B=P*C;if(B>_He)return null;var H=n.makeLayer(d,u);if(A!=null){var V=c.indexOf(A)+1;c.splice(V,0,H)}else(I.insert===void 0||I.insert)&&c.unshift(H);return H};if(n.skipping&&!o)return null;for(var m=null,T=a.length/dHe,w=!o,E=0;E<a.length;E++){var S=a[E],N=S._private.rscratch,j=N.imgLayerCaches=N.imgLayerCaches||{},q=j[u];if(q){m=q;continue}if((!m||m.eles.length>=T||!Ywe(m.bb,S.boundingBox()))&&(m=v({insert:!0,after:m}),!m))return null;p||w?n.queueLayer(m,S):n.drawEleInLayer(m,S,u,e),m.eles.push(S),j[u]=m}return p||(w?null:c)};Na.getEleLevelForLayerLevel=function(a,e){return a};Na.drawEleInLayer=function(a,e,u,n){var r=this,t=this.renderer,i=a.context,o=e.boundingBox();o.w===0||o.h===0||!e.visible()||(u=r.getEleLevelForLayerLevel(u,n),t.setImgSmoothing(i,!1),t.drawCachedElement(i,e,null,null,u,THe),t.setImgSmoothing(i,!0))};Na.levelIsComplete=function(a,e){var u=this,n=u.layersByLevel[a];if(!n||n.length===0)return!1;for(var r=0,t=0;t<n.length;t++){var i=n[t];if(i.reqs>0||i.invalid)return!1;r+=i.eles.length}return r===e.length};Na.validateLayersElesOrdering=function(a,e){var u=this.layersByLevel[a];if(u)for(var n=0;n<u.length;n++){for(var r=u[n],t=-1,i=0;i<e.length;i++)if(r.eles[0]===e[i]){t=i;break}if(t<0){this.invalidateLayer(r);continue}for(var o=t,i=0;i<r.eles.length;i++)if(r.eles[i]!==e[o+i]){this.invalidateLayer(r);break}}};Na.updateElementsInLayers=function(a,e){for(var u=this,n=sN(a[0]),r=0;r<a.length;r++)for(var t=n?null:a[r],i=n?a[r]:a[r].ele,o=i._private.rscratch,l=o.imgLayerCaches=o.imgLayerCaches||{},s=a4;s<=BF;s++){var c=l[s];c&&(t&&u.getEleLevelForLayerLevel(c.level)!==t.level||e(c,i,t))}};Na.haveLayers=function(){for(var a=this,e=!1,u=a4;u<=BF;u++){var n=a.layersByLevel[u];if(n&&n.length>0){e=!0;break}}return e};Na.invalidateElements=function(a){var e=this;a.length!==0&&(e.lastInvalidationTime=tc(),!(a.length===0||!e.haveLayers())&&e.updateElementsInLayers(a,function(n,r,t){e.invalidateLayer(n)}))};Na.invalidateLayer=function(a){if(this.lastInvalidationTime=tc(),!a.invalid){var e=a.level,u=a.eles,n=this.layersByLevel[e];fl(n,a),a.elesQueue=[],a.invalid=!0,a.replacement&&(a.replacement.invalid=!0);for(var r=0;r<u.length;r++){var t=u[r]._private.rscratch.imgLayerCaches;t&&(t[e]=null)}}};Na.refineElementTextures=function(a){var e=this;e.updateElementsInLayers(a,function(n,r,t){var i=n.replacement;if(i||(i=n.replacement=e.makeLayer(n.bb,n.level),i.replaces=n,i.eles=n.eles),!i.reqs)for(var o=0;o<i.eles.length;o++)e.queueLayer(i,i.eles[o])})};Na.enqueueElementRefinement=function(a){this.eleTxrDeqs.merge(a),this.scheduleElementRefinement()};Na.queueLayer=function(a,e){var u=this,n=u.layersQueue,r=a.elesQueue,t=r.hasId=r.hasId||{};if(!a.replacement){if(e){if(t[e.id()])return;r.push(e),t[e.id()]=!0}a.reqs?(a.reqs++,n.updateItem(a)):(a.reqs=1,n.push(a))}};Na.dequeue=function(a){for(var e=this,u=e.layersQueue,n=[],r=0;r<vHe&&u.size()!==0;){var t=u.peek();if(t.replacement){u.pop();continue}if(t.replaces&&t!==t.replaces.replacement){u.pop();continue}if(t.invalid){u.pop();continue}var i=t.elesQueue.shift();i&&(e.drawEleInLayer(t,i,t.level,a),r++),n.length===0&&n.push(!0),t.elesQueue.length===0&&(u.pop(),t.reqs=0,t.replaces&&e.applyLayerReplacement(t),e.requestRedraw())}return n};Na.applyLayerReplacement=function(a){var e=this,u=e.layersByLevel[a.level],n=a.replaces,r=u.indexOf(n);if(!(r<0||n.invalid)){u[r]=a;for(var t=0;t<a.eles.length;t++){var i=a.eles[t]._private,o=i.imgLayerCaches=i.imgLayerCaches||{};o&&(o[a.level]=a)}e.requestRedraw()}};Na.requestRedraw=fN(function(){var a=this.renderer;a.redrawHint("eles",!0),a.redrawHint("drag",!0),a.redraw()},100);Na.setupDequeueing=rEe.setupDequeueing({deqRedrawThreshold:pHe,deqCost:yHe,deqAvgCost:mHe,deqNoDrawCost:bHe,deqFastCost:gHe,deq:function(e,u){return e.dequeue(u)},onDeqd:QH,shouldRedraw:Gwe,priority:function(e){return e.renderer.beforeRenderPriorities.lyrTxrDeq}});var iEe={},eve;function SHe(a,e){for(var u=0;u<e.length;u++){var n=e[u];a.lineTo(n.x,n.y)}}function EHe(a,e,u){for(var n,r=0;r<e.length;r++){var t=e[r];r===0&&(n=t),a.lineTo(t.x,t.y)}a.quadraticCurveTo(u.x,u.y,n.x,n.y)}function tve(a,e,u){a.beginPath&&a.beginPath();for(var n=e,r=0;r<n.length;r++){var t=n[r];a.lineTo(t.x,t.y)}var i=u,o=u[0];a.moveTo(o.x,o.y);for(var r=1;r<i.length;r++){var t=i[r];a.lineTo(t.x,t.y)}a.closePath&&a.closePath()}function AHe(a,e,u,n,r){a.beginPath&&a.beginPath(),a.arc(u,n,r,0,Math.PI*2,!1);var t=e,i=t[0];a.moveTo(i.x,i.y);for(var o=0;o<t.length;o++){var l=t[o];a.lineTo(l.x,l.y)}a.closePath&&a.closePath()}function OHe(a,e,u,n){a.arc(e,u,n,0,Math.PI*2,!1)}iEe.arrowShapeImpl=function(a){return(eve||(eve={polygon:SHe,"triangle-backcurve":EHe,"triangle-tee":tve,"circle-triangle":AHe,"triangle-cross":tve,circle:OHe}))[a]};var ts={};ts.drawElement=function(a,e,u,n,r,t){var i=this;e.isNode()?i.drawNode(a,e,u,n,r,t):i.drawEdge(a,e,u,n,r,t)};ts.drawElementOverlay=function(a,e){var u=this;e.isNode()?u.drawNodeOverlay(a,e):u.drawEdgeOverlay(a,e)};ts.drawElementUnderlay=function(a,e){var u=this;e.isNode()?u.drawNodeUnderlay(a,e):u.drawEdgeUnderlay(a,e)};ts.drawCachedElementPortion=function(a,e,u,n,r,t,i,o){var l=this,s=u.getBoundingBox(e);if(!(s.w===0||s.h===0)){var c=u.getElement(e,s,n,r,t);if(c!=null){var d=o(l,e);if(d===0)return;var f=i(l,e),p=s.x1,h=s.y1,g=s.w,v=s.h,m,T,w,E,S;if(f!==0){var N=u.getRotationPoint(e);w=N.x,E=N.y,a.translate(w,E),a.rotate(f),S=l.getImgSmoothing(a),S||l.setImgSmoothing(a,!0);var j=u.getRotationOffset(e);m=j.x,T=j.y}else m=p,T=h;var q;d!==1&&(q=a.globalAlpha,a.globalAlpha=q*d),a.drawImage(c.texture.canvas,c.x,0,c.width,c.height,m,T,g,v),d!==1&&(a.globalAlpha=q),f!==0&&(a.rotate(-f),a.translate(-w,-E),S||l.setImgSmoothing(a,!1))}else u.drawElement(a,e)}};var xHe=function(){return 0},RHe=function(e,u){return e.getTextAngle(u,null)},NHe=function(e,u){return e.getTextAngle(u,"source")},IHe=function(e,u){return e.getTextAngle(u,"target")},DHe=function(e,u){return u.effectiveOpacity()},LL=function(e,u){return u.pstyle("text-opacity").pfValue*u.effectiveOpacity()};ts.drawCachedElement=function(a,e,u,n,r,t){var i=this,o=i.data,l=o.eleTxrCache,s=o.lblTxrCache,c=o.slbTxrCache,d=o.tlbTxrCache,f=e.boundingBox(),p=t===!0?l.reasons.highQuality:null;if(!(f.w===0||f.h===0||!e.visible())&&(!n||zH(f,n))){var h=e.isEdge(),g=e.element()._private.rscratch.badLine;i.drawElementUnderlay(a,e),i.drawCachedElementPortion(a,e,l,u,r,p,xHe,DHe),(!h||!g)&&i.drawCachedElementPortion(a,e,s,u,r,p,RHe,LL),h&&!g&&(i.drawCachedElementPortion(a,e,c,u,r,p,NHe,LL),i.drawCachedElementPortion(a,e,d,u,r,p,IHe,LL)),i.drawElementOverlay(a,e)}};ts.drawElements=function(a,e){for(var u=this,n=0;n<e.length;n++){var r=e[n];u.drawElement(a,r)}};ts.drawCachedElements=function(a,e,u,n){for(var r=this,t=0;t<e.length;t++){var i=e[t];r.drawCachedElement(a,i,u,n)}};ts.drawCachedNodes=function(a,e,u,n){for(var r=this,t=0;t<e.length;t++){var i=e[t];i.isNode()&&r.drawCachedElement(a,i,u,n)}};ts.drawLayeredElements=function(a,e,u,n){var r=this,t=r.data.lyrTxrCache.getLayers(e,u);if(t)for(var i=0;i<t.length;i++){var o=t[i],l=o.bb;l.w===0||l.h===0||a.drawImage(o.canvas,l.x1,l.y1,l.w,l.h)}else r.drawCachedElements(a,e,u,n)};var lc={};lc.drawEdge=function(a,e,u){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this,o=e._private.rscratch;if(!(t&&!e.visible())&&!(o.badLine||o.allpts==null||isNaN(o.allpts[0]))){var l;u&&(l=u,a.translate(-l.x1,-l.y1));var s=t?e.pstyle("opacity").value:1,c=t?e.pstyle("line-opacity").value:1,d=e.pstyle("curve-style").value,f=e.pstyle("line-style").value,p=e.pstyle("width").pfValue,h=e.pstyle("line-cap").value,g=e.pstyle("line-outline-width").value,v=e.pstyle("line-outline-color").value,m=s*c,T=s*c,w=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;d==="straight-triangle"?(i.eleStrokeStyle(a,e,H),i.drawEdgeTrianglePath(e,a,o.allpts)):(a.lineWidth=p,a.lineCap=h,i.eleStrokeStyle(a,e,H),i.drawEdgePath(e,a,o.allpts,f),a.lineCap="butt")},E=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:m;if(a.lineWidth=p+g,a.lineCap=h,g>0)i.colorStrokeStyle(a,v[0],v[1],v[2],H);else{a.lineCap="butt";return}d==="straight-triangle"?i.drawEdgeTrianglePath(e,a,o.allpts):(i.drawEdgePath(e,a,o.allpts,f),a.lineCap="butt")},S=function(){r&&i.drawEdgeOverlay(a,e)},N=function(){r&&i.drawEdgeUnderlay(a,e)},j=function(){var H=arguments.length>0&&arguments[0]!==void 0?arguments[0]:T;i.drawArrowheads(a,e,H)},q=function(){i.drawElementText(a,e,null,n)};a.lineJoin="round";var O=e.pstyle("ghost").value==="yes";if(O){var I=e.pstyle("ghost-offset-x").pfValue,A=e.pstyle("ghost-offset-y").pfValue,P=e.pstyle("ghost-opacity").value,C=m*P;a.translate(I,A),w(C),j(C),a.translate(-I,-A)}else E();N(),w(),j(),S(),q(),u&&a.translate(l.x1,l.y1)}};var uEe=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(u,n){if(n.visible()){var r=n.pstyle("".concat(e,"-opacity")).value;if(r!==0){var t=this,i=t.usePaths(),o=n._private.rscratch,l=n.pstyle("".concat(e,"-padding")).pfValue,s=2*l,c=n.pstyle("".concat(e,"-color")).value;u.lineWidth=s,o.edgeType==="self"&&!i?u.lineCap="butt":u.lineCap="round",t.colorStrokeStyle(u,c[0],c[1],c[2],r),t.drawEdgePath(n,u,o.allpts,"solid")}}}};lc.drawEdgeOverlay=uEe("overlay");lc.drawEdgeUnderlay=uEe("underlay");lc.drawEdgePath=function(a,e,u,n){var r=a._private.rscratch,t=e,i,o=!1,l=this.usePaths(),s=a.pstyle("line-dash-pattern").pfValue,c=a.pstyle("line-dash-offset").pfValue;if(l){var d=u.join("$"),f=r.pathCacheKey&&r.pathCacheKey===d;f?(i=e=r.pathCache,o=!0):(i=e=new Path2D,r.pathCacheKey=d,r.pathCache=i)}if(t.setLineDash)switch(n){case"dotted":t.setLineDash([1,1]);break;case"dashed":t.setLineDash(s),t.lineDashOffset=c;break;case"solid":t.setLineDash([]);break}if(!o&&!r.badLine)switch(e.beginPath&&e.beginPath(),e.moveTo(u[0],u[1]),r.edgeType){case"bezier":case"self":case"compound":case"multibezier":for(var p=2;p+3<u.length;p+=4)e.quadraticCurveTo(u[p],u[p+1],u[p+2],u[p+3]);break;case"straight":case"haystack":for(var h=2;h+1<u.length;h+=2)e.lineTo(u[h],u[h+1]);break;case"segments":if(r.isRound){var g=yi(r.roundCorners),v;try{for(g.s();!(v=g.n()).done;){var m=v.value;XSe(e,m)}}catch(w){g.e(w)}finally{g.f()}e.lineTo(u[u.length-2],u[u.length-1])}else for(var T=2;T+1<u.length;T+=2)e.lineTo(u[T],u[T+1]);break}e=t,l?e.stroke(i):e.stroke(),e.setLineDash&&e.setLineDash([])};lc.drawEdgeTrianglePath=function(a,e,u){e.fillStyle=e.strokeStyle;for(var n=a.pstyle("width").pfValue,r=0;r+1<u.length;r+=2){var t=[u[r+2]-u[r],u[r+3]-u[r+1]],i=Math.sqrt(t[0]*t[0]+t[1]*t[1]),o=[t[1]/i,-t[0]/i],l=[o[0]*n/2,o[1]*n/2];e.beginPath(),e.moveTo(u[r]-l[0],u[r+1]-l[1]),e.lineTo(u[r]+l[0],u[r+1]+l[1]),e.lineTo(u[r+2],u[r+3]),e.closePath(),e.fill()}};lc.drawArrowheads=function(a,e,u){var n=e._private.rscratch,r=n.edgeType==="haystack";r||this.drawArrowhead(a,e,"source",n.arrowStartX,n.arrowStartY,n.srcArrowAngle,u),this.drawArrowhead(a,e,"mid-target",n.midX,n.midY,n.midtgtArrowAngle,u),this.drawArrowhead(a,e,"mid-source",n.midX,n.midY,n.midsrcArrowAngle,u),r||this.drawArrowhead(a,e,"target",n.arrowEndX,n.arrowEndY,n.tgtArrowAngle,u)};lc.drawArrowhead=function(a,e,u,n,r,t,i){if(!(isNaN(n)||n==null||isNaN(r)||r==null||isNaN(t)||t==null)){var o=this,l=e.pstyle(u+"-arrow-shape").value;if(l!=="none"){var s=e.pstyle(u+"-arrow-fill").value==="hollow"?"both":"filled",c=e.pstyle(u+"-arrow-fill").value,d=e.pstyle("width").pfValue,f=e.pstyle(u+"-arrow-width"),p=f.value==="match-line"?d:f.pfValue;f.units==="%"&&(p*=d);var h=e.pstyle("opacity").value;i===void 0&&(i=h);var g=a.globalCompositeOperation;(i!==1||c==="hollow")&&(a.globalCompositeOperation="destination-out",o.colorFillStyle(a,255,255,255,1),o.colorStrokeStyle(a,255,255,255,1),o.drawArrowShape(e,a,s,d,l,p,n,r,t),a.globalCompositeOperation=g);var v=e.pstyle(u+"-arrow-color").value;o.colorFillStyle(a,v[0],v[1],v[2],i),o.colorStrokeStyle(a,v[0],v[1],v[2],i),o.drawArrowShape(e,a,c,d,l,p,n,r,t)}}};lc.drawArrowShape=function(a,e,u,n,r,t,i,o,l){var s=this,c=this.usePaths()&&r!=="triangle-cross",d=!1,f,p=e,h={x:i,y:o},g=a.pstyle("arrow-scale").value,v=this.getArrowWidth(n,g),m=s.arrowShapes[r];if(c){var T=s.arrowPathCache=s.arrowPathCache||[],w=cb(r),E=T[w];E!=null?(f=e=E,d=!0):(f=e=new Path2D,T[w]=f)}d||(e.beginPath&&e.beginPath(),c?m.draw(e,1,0,{x:0,y:0},1):m.draw(e,v,l,h,n),e.closePath&&e.closePath()),e=p,c&&(e.translate(i,o),e.rotate(l),e.scale(v,v)),(u==="filled"||u==="both")&&(c?e.fill(f):e.fill()),(u==="hollow"||u==="both")&&(e.lineWidth=t/(c?v:1),e.lineJoin="miter",c?e.stroke(f):e.stroke()),c&&(e.scale(1/v,1/v),e.rotate(-l),e.translate(-i,-o))};var ik={};ik.safeDrawImage=function(a,e,u,n,r,t,i,o,l,s){if(!(r<=0||t<=0||l<=0||s<=0))try{a.drawImage(e,u,n,r,t,i,o,l,s)}catch(c){Lr(c)}};ik.drawInscribedImage=function(a,e,u,n,r){var t=this,i=u.position(),o=i.x,l=i.y,s=u.cy().style(),c=s.getIndexedStyle.bind(s),d=c(u,"background-fit","value",n),f=c(u,"background-repeat","value",n),p=u.width(),h=u.height(),g=u.padding()*2,v=p+(c(u,"background-width-relative-to","value",n)==="inner"?0:g),m=h+(c(u,"background-height-relative-to","value",n)==="inner"?0:g),T=u._private.rscratch,w=c(u,"background-clip","value",n),E=w==="node",S=c(u,"background-image-opacity","value",n)*r,N=c(u,"background-image-smoothing","value",n),j=u.pstyle("corner-radius").value;j!=="auto"&&(j=u.pstyle("corner-radius").pfValue);var q=e.width||e.cachedW,O=e.height||e.cachedH;(q==null||O==null)&&(document.body.appendChild(e),q=e.cachedW=e.width||e.offsetWidth,O=e.cachedH=e.height||e.offsetHeight,document.body.removeChild(e));var I=q,A=O;if(c(u,"background-width","value",n)!=="auto"&&(c(u,"background-width","units",n)==="%"?I=c(u,"background-width","pfValue",n)*v:I=c(u,"background-width","pfValue",n)),c(u,"background-height","value",n)!=="auto"&&(c(u,"background-height","units",n)==="%"?A=c(u,"background-height","pfValue",n)*m:A=c(u,"background-height","pfValue",n)),!(I===0||A===0)){if(d==="contain"){var P=Math.min(v/I,m/A);I*=P,A*=P}else if(d==="cover"){var P=Math.max(v/I,m/A);I*=P,A*=P}var C=o-v/2,B=c(u,"background-position-x","units",n),H=c(u,"background-position-x","pfValue",n);B==="%"?C+=(v-I)*H:C+=H;var V=c(u,"background-offset-x","units",n),G=c(u,"background-offset-x","pfValue",n);V==="%"?C+=(v-I)*G:C+=G;var Z=l-m/2,ae=c(u,"background-position-y","units",n),W=c(u,"background-position-y","pfValue",n);ae==="%"?Z+=(m-A)*W:Z+=W;var te=c(u,"background-offset-y","units",n),se=c(u,"background-offset-y","pfValue",n);te==="%"?Z+=(m-A)*se:Z+=se,T.pathCache&&(C-=o,Z-=l,o=0,l=0);var pe=a.globalAlpha;a.globalAlpha=S;var le=t.getImgSmoothing(a),Ee=!1;if(N==="no"&&le?(t.setImgSmoothing(a,!1),Ee=!0):N==="yes"&&!le&&(t.setImgSmoothing(a,!0),Ee=!0),f==="no-repeat")E&&(a.save(),T.pathCache?a.clip(T.pathCache):(t.nodeShapes[t.getNodeShape(u)].draw(a,o,l,v,m,j,T),a.clip())),t.safeDrawImage(a,e,0,0,q,O,C,Z,I,A),E&&a.restore();else{var Oe=a.createPattern(e,f);a.fillStyle=Oe,t.nodeShapes[t.getNodeShape(u)].draw(a,o,l,v,m,j,T),a.translate(C,Z),a.fill(),a.translate(-C,-Z)}a.globalAlpha=pe,Ee&&t.setImgSmoothing(a,le)}};var xb={};xb.eleTextBiggerThanMin=function(a,e){if(!e){var u=a.cy().zoom(),n=this.getPixelRatio(),r=Math.ceil(HH(u*n));e=Math.pow(2,r)}var t=a.pstyle("font-size").pfValue*e,i=a.pstyle("min-zoomed-font-size").pfValue;return!(t<i)};xb.drawElementText=function(a,e,u,n,r){var t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this;if(n==null){if(t&&!i.eleTextBiggerThanMin(e))return}else if(n===!1)return;if(e.isNode()){var o=e.pstyle("label");if(!o||!o.value)return;var l=i.getLabelJustification(e);a.textAlign=l,a.textBaseline="bottom"}else{var s=e.element()._private.rscratch.badLine,c=e.pstyle("label"),d=e.pstyle("source-label"),f=e.pstyle("target-label");if(s||(!c||!c.value)&&(!d||!d.value)&&(!f||!f.value))return;a.textAlign="center",a.textBaseline="bottom"}var p=!u,h;u&&(h=u,a.translate(-h.x1,-h.y1)),r==null?(i.drawText(a,e,null,p,t),e.isEdge()&&(i.drawText(a,e,"source",p,t),i.drawText(a,e,"target",p,t))):i.drawText(a,e,r,p,t),u&&a.translate(h.x1,h.y1)};xb.getFontCache=function(a){var e;this.fontCaches=this.fontCaches||[];for(var u=0;u<this.fontCaches.length;u++)if(e=this.fontCaches[u],e.context===a)return e;return e={context:a},this.fontCaches.push(e),e};xb.setupTextStyle=function(a,e){var u=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=e.pstyle("font-style").strValue,r=e.pstyle("font-size").pfValue+"px",t=e.pstyle("font-family").strValue,i=e.pstyle("font-weight").strValue,o=u?e.effectiveOpacity()*e.pstyle("text-opacity").value:1,l=e.pstyle("text-outline-opacity").value*o,s=e.pstyle("color").value,c=e.pstyle("text-outline-color").value;a.font=n+" "+i+" "+r+" "+t,a.lineJoin="round",this.colorFillStyle(a,s[0],s[1],s[2],o),this.colorStrokeStyle(a,c[0],c[1],c[2],l)};function FHe(a,e,u,n,r){var t=Math.min(n,r),i=t/2,o=e+n/2,l=u+r/2;a.beginPath(),a.arc(o,l,i,0,Math.PI*2),a.closePath()}function rve(a,e,u,n,r){var t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:5,i=Math.min(t,n/2,r/2);a.beginPath(),a.moveTo(e+i,u),a.lineTo(e+n-i,u),a.quadraticCurveTo(e+n,u,e+n,u+i),a.lineTo(e+n,u+r-i),a.quadraticCurveTo(e+n,u+r,e+n-i,u+r),a.lineTo(e+i,u+r),a.quadraticCurveTo(e,u+r,e,u+r-i),a.lineTo(e,u+i),a.quadraticCurveTo(e,u,e+i,u),a.closePath()}xb.getTextAngle=function(a,e){var u,n=a._private,r=n.rscratch,t=e?e+"-":"",i=a.pstyle(t+"text-rotation");if(i.strValue==="autorotate"){var o=pi(r,"labelAngle",e);u=a.isEdge()?o:0}else i.strValue==="none"?u=0:u=i.pfValue;return u};xb.drawText=function(a,e,u){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,t=e._private,i=t.rscratch,o=r?e.effectiveOpacity():1;if(!(r&&(o===0||e.pstyle("text-opacity").value===0))){u==="main"&&(u=null);var l=pi(i,"labelX",u),s=pi(i,"labelY",u),c,d,f=this.getLabelText(e,u);if(f!=null&&f!==""&&!isNaN(l)&&!isNaN(s)){this.setupTextStyle(a,e,r);var p=u?u+"-":"",h=pi(i,"labelWidth",u),g=pi(i,"labelHeight",u),v=e.pstyle(p+"text-margin-x").pfValue,m=e.pstyle(p+"text-margin-y").pfValue,T=e.isEdge(),w=e.pstyle("text-halign").value,E=e.pstyle("text-valign").value;T&&(w="center",E="center"),l+=v,s+=m;var S;switch(n?S=this.getTextAngle(e,u):S=0,S!==0&&(c=l,d=s,a.translate(c,d),a.rotate(S),l=0,s=0),E){case"top":break;case"center":s+=g/2;break;case"bottom":s+=g;break}var N=e.pstyle("text-background-opacity").value,j=e.pstyle("text-border-opacity").value,q=e.pstyle("text-border-width").pfValue,O=e.pstyle("text-background-padding").pfValue,I=e.pstyle("text-background-shape").strValue,A=I==="round-rectangle"||I==="roundrectangle",P=I==="circle",C=2;if(N>0||q>0&&j>0){var B=a.fillStyle,H=a.strokeStyle,V=a.lineWidth,G=e.pstyle("text-background-color").value,Z=e.pstyle("text-border-color").value,ae=e.pstyle("text-border-style").value,W=N>0,te=q>0&&j>0,se=l-O;switch(w){case"left":se-=h;break;case"center":se-=h/2;break}var pe=s-g-O,le=h+2*O,Ee=g+2*O;if(W&&(a.fillStyle="rgba(".concat(G[0],",").concat(G[1],",").concat(G[2],",").concat(N*o,")")),te&&(a.strokeStyle="rgba(".concat(Z[0],",").concat(Z[1],",").concat(Z[2],",").concat(j*o,")"),a.lineWidth=q,a.setLineDash))switch(ae){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"double":a.lineWidth=q/4,a.setLineDash([]);break;default:a.setLineDash([]);break}if(A?(a.beginPath(),rve(a,se,pe,le,Ee,C)):P?(a.beginPath(),FHe(a,se,pe,le,Ee)):(a.beginPath(),a.rect(se,pe,le,Ee)),W&&a.fill(),te&&a.stroke(),te&&ae==="double"){var Oe=q/2;a.beginPath(),A?rve(a,se+Oe,pe+Oe,le-2*Oe,Ee-2*Oe,C):a.rect(se+Oe,pe+Oe,le-2*Oe,Ee-2*Oe),a.stroke()}a.fillStyle=B,a.strokeStyle=H,a.lineWidth=V,a.setLineDash&&a.setLineDash([])}var Ie=2*e.pstyle("text-outline-width").pfValue;if(Ie>0&&(a.lineWidth=Ie),e.pstyle("text-wrap").value==="wrap"){var Ae=pi(i,"labelWrapCachedLines",u),be=pi(i,"labelLineHeight",u),ee=h/2,_=this.getLabelJustification(e);switch(_==="auto"||(w==="left"?_==="left"?l+=-h:_==="center"&&(l+=-ee):w==="center"?_==="left"?l+=-ee:_==="right"&&(l+=ee):w==="right"&&(_==="center"?l+=ee:_==="right"&&(l+=h))),E){case"top":s-=(Ae.length-1)*be;break;case"center":case"bottom":s-=(Ae.length-1)*be;break}for(var F=0;F<Ae.length;F++)Ie>0&&a.strokeText(Ae[F],l,s),a.fillText(Ae[F],l,s),s+=be}else Ie>0&&a.strokeText(f,l,s),a.fillText(f,l,s);S!==0&&(a.rotate(-S),a.translate(-c,-d))}}};var Rl={};Rl.drawNode=function(a,e,u){var n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,r=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,t=arguments.length>5&&arguments[5]!==void 0?arguments[5]:!0,i=this,o,l,s=e._private,c=s.rscratch,d=e.position();if(!(!At(d.x)||!At(d.y))&&!(t&&!e.visible())){var f=t?e.effectiveOpacity():1,p=i.usePaths(),h,g=!1,v=e.padding();o=e.width()+2*v,l=e.height()+2*v;var m;u&&(m=u,a.translate(-m.x1,-m.y1));for(var T=e.pstyle("background-image"),w=T.value,E=new Array(w.length),S=new Array(w.length),N=0,j=0;j<w.length;j++){var q=w[j],O=E[j]=q!=null&&q!=="none";if(O){var I=e.cy().style().getIndexedStyle(e,"background-image-crossorigin","value",j);N++,S[j]=i.getCachedImage(q,I,function(){s.backgroundTimestamp=Date.now(),e.emitAndNotify("background")})}}var A=e.pstyle("background-blacken").value,P=e.pstyle("border-width").pfValue,C=e.pstyle("background-opacity").value*f,B=e.pstyle("border-color").value,H=e.pstyle("border-style").value,V=e.pstyle("border-join").value,G=e.pstyle("border-cap").value,Z=e.pstyle("border-position").value,ae=e.pstyle("border-dash-pattern").pfValue,W=e.pstyle("border-dash-offset").pfValue,te=e.pstyle("border-opacity").value*f,se=e.pstyle("outline-width").pfValue,pe=e.pstyle("outline-color").value,le=e.pstyle("outline-style").value,Ee=e.pstyle("outline-opacity").value*f,Oe=e.pstyle("outline-offset").value,Ie=e.pstyle("corner-radius").value;Ie!=="auto"&&(Ie=e.pstyle("corner-radius").pfValue);var Ae=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:C;i.eleFillStyle(a,e,ve)},be=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:te;i.colorStrokeStyle(a,B[0],B[1],B[2],ve)},ee=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ee;i.colorStrokeStyle(a,pe[0],pe[1],pe[2],ve)},_=function(ve,ye,re,Ne){var Le=i.nodePathCache=i.nodePathCache||[],Pe=zwe(re==="polygon"?re+","+Ne.join(","):re,""+ye,""+ve,""+Ie),Fe=Le[Pe],R,k=!1;return Fe!=null?(R=Fe,k=!0,c.pathCache=R):(R=new Path2D,Le[Pe]=c.pathCache=R),{path:R,cacheHit:k}},F=e.pstyle("shape").strValue,D=e.pstyle("shape-polygon-points").pfValue;if(p){a.translate(d.x,d.y);var L=_(o,l,F,D);h=L.path,g=L.cacheHit}var Q=function(){if(!g){var ve=d;p&&(ve={x:0,y:0}),i.nodeShapes[i.getNodeShape(e)].draw(h||a,ve.x,ve.y,o,l,Ie,c)}p?a.fill(h):a.fill()},Y=function(){for(var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,re=s.backgrounding,Ne=0,Le=0;Le<S.length;Le++){var Pe=e.cy().style().getIndexedStyle(e,"background-image-containment","value",Le);if(ye&&Pe==="over"||!ye&&Pe==="inside"){Ne++;continue}E[Le]&&S[Le].complete&&!S[Le].error&&(Ne++,i.drawInscribedImage(a,S[Le],e,Le,ve))}s.backgrounding=Ne!==N,re!==s.backgrounding&&e.updateStyle(!1)},$=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f;i.hasPie(e)&&(i.drawPie(a,e,ye),ve&&(p||i.nodeShapes[i.getNodeShape(e)].draw(a,d.x,d.y,o,l,Ie,c)))},ue=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1,ye=arguments.length>1&&arguments[1]!==void 0?arguments[1]:f;i.hasStripe(e)&&(a.save(),p?a.clip(c.pathCache):(i.nodeShapes[i.getNodeShape(e)].draw(a,d.x,d.y,o,l,Ie,c),a.clip()),i.drawStripe(a,e,ye),a.restore(),ve&&(p||i.nodeShapes[i.getNodeShape(e)].draw(a,d.x,d.y,o,l,Ie,c)))},ne=function(){var ve=arguments.length>0&&arguments[0]!==void 0?arguments[0]:f,ye=(A>0?A:-A)*ve,re=A>0?0:255;A!==0&&(i.colorFillStyle(a,re,re,re,ye),p?a.fill(h):a.fill())},ce=function(){if(P>0){if(a.lineWidth=P,a.lineCap=G,a.lineJoin=V,a.setLineDash)switch(H){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash(ae),a.lineDashOffset=W;break;case"solid":case"double":a.setLineDash([]);break}if(Z!=="center"){if(a.save(),a.lineWidth*=2,Z==="inside")p?a.clip(h):a.clip();else{var ve=new Path2D;ve.rect(-o/2-P,-l/2-P,o+2*P,l+2*P),ve.addPath(h),a.clip(ve,"evenodd")}p?a.stroke(h):a.stroke(),a.restore()}else p?a.stroke(h):a.stroke();if(H==="double"){a.lineWidth=P/3;var ye=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",p?a.stroke(h):a.stroke(),a.globalCompositeOperation=ye}a.setLineDash&&a.setLineDash([])}},Se=function(){if(se>0){if(a.lineWidth=se,a.lineCap="butt",a.setLineDash)switch(le){case"dotted":a.setLineDash([1,1]);break;case"dashed":a.setLineDash([4,2]);break;case"solid":case"double":a.setLineDash([]);break}var ve=d;p&&(ve={x:0,y:0});var ye=i.getNodeShape(e),re=P;Z==="inside"&&(re=0),Z==="outside"&&(re*=2);var Ne=(o+re+(se+Oe))/o,Le=(l+re+(se+Oe))/l,Pe=o*Ne,Fe=l*Le,R=i.nodeShapes[ye].points,k;if(p){var K=_(Pe,Fe,ye,R);k=K.path}if(ye==="ellipse")i.drawEllipsePath(k||a,ve.x,ve.y,Pe,Fe);else if(["round-diamond","round-heptagon","round-hexagon","round-octagon","round-pentagon","round-polygon","round-triangle","round-tag"].includes(ye)){var de=0,ge=0,Ue=0;ye==="round-diamond"?de=(re+Oe+se)*1.4:ye==="round-heptagon"?(de=(re+Oe+se)*1.075,Ue=-(re/2+Oe+se)/35):ye==="round-hexagon"?de=(re+Oe+se)*1.12:ye==="round-pentagon"?(de=(re+Oe+se)*1.13,Ue=-(re/2+Oe+se)/15):ye==="round-tag"?(de=(re+Oe+se)*1.12,ge=(re/2+se+Oe)*.07):ye==="round-triangle"&&(de=(re+Oe+se)*(Math.PI/2),Ue=-(re+Oe/2+se)/Math.PI),de!==0&&(Ne=(o+de)/o,Pe=o*Ne,["round-hexagon","round-tag"].includes(ye)||(Le=(l+de)/l,Fe=l*Le)),Ie=Ie==="auto"?tSe(Pe,Fe):Ie;for(var je=Pe/2,ze=Fe/2,at=Ie+(re+se+Oe)/2,fe=new Array(R.length/2),Te=new Array(R.length/2),qe=0;qe<R.length/2;qe++)fe[qe]={x:ve.x+ge+je*R[qe*2],y:ve.y+Ue+ze*R[qe*2+1]};var it,Me,st,tt,Ot=fe.length;for(Me=fe[Ot-1],it=0;it<Ot;it++)st=fe[it%Ot],tt=fe[(it+1)%Ot],Te[it]=nk(Me,st,tt,at),Me=st,st=tt;i.drawRoundPolygonPath(k||a,ve.x+ge,ve.y+Ue,o*Ne,l*Le,R,Te)}else if(["roundrectangle","round-rectangle"].includes(ye))Ie=Ie==="auto"?pl(Pe,Fe):Ie,i.drawRoundRectanglePath(k||a,ve.x,ve.y,Pe,Fe,Ie+(re+se+Oe)/2);else if(["cutrectangle","cut-rectangle"].includes(ye))Ie=Ie==="auto"?GH():Ie,i.drawCutRectanglePath(k||a,ve.x,ve.y,Pe,Fe,null,Ie+(re+se+Oe)/4);else if(["bottomroundrectangle","bottom-round-rectangle"].includes(ye))Ie=Ie==="auto"?pl(Pe,Fe):Ie,i.drawBottomRoundRectanglePath(k||a,ve.x,ve.y,Pe,Fe,Ie+(re+se+Oe)/2);else if(ye==="barrel")i.drawBarrelPath(k||a,ve.x,ve.y,Pe,Fe);else if(ye.startsWith("polygon")||["rhomboid","right-rhomboid","round-tag","tag","vee"].includes(ye)){var yt=(re+se+Oe)/o;R=FF(PF(R,yt)),i.drawPolygonPath(k||a,ve.x,ve.y,o,l,R)}else{var bt=(re+se+Oe)/o;R=FF(PF(R,-bt)),i.drawPolygonPath(k||a,ve.x,ve.y,o,l,R)}if(p?a.stroke(k):a.stroke(),le==="double"){a.lineWidth=re/3;var Tt=a.globalCompositeOperation;a.globalCompositeOperation="destination-out",p?a.stroke(k):a.stroke(),a.globalCompositeOperation=Tt}a.setLineDash&&a.setLineDash([])}},xe=function(){r&&i.drawNodeOverlay(a,e,d,o,l)},Ce=function(){r&&i.drawNodeUnderlay(a,e,d,o,l)},Ve=function(){i.drawElementText(a,e,null,n)},Ke=e.pstyle("ghost").value==="yes";if(Ke){var Ye=e.pstyle("ghost-offset-x").pfValue,oe=e.pstyle("ghost-offset-y").pfValue,X=e.pstyle("ghost-opacity").value,J=X*f;a.translate(Ye,oe),ee(),Se(),Ae(X*C),Q(),Y(J,!0),be(X*te),ce(),$(A!==0||P!==0),ue(A!==0||P!==0),Y(J,!1),ne(J),a.translate(-Ye,-oe)}p&&a.translate(-d.x,-d.y),Ce(),p&&a.translate(d.x,d.y),ee(),Se(),Ae(),Q(),Y(f,!0),be(),ce(),$(A!==0||P!==0),ue(A!==0||P!==0),Y(f,!1),ne(),p&&a.translate(-d.x,-d.y),Ve(),xe(),u&&a.translate(m.x1,m.y1)}};var oEe=function(e){if(!["overlay","underlay"].includes(e))throw new Error("Invalid state");return function(u,n,r,t,i){var o=this;if(n.visible()){var l=n.pstyle("".concat(e,"-padding")).pfValue,s=n.pstyle("".concat(e,"-opacity")).value,c=n.pstyle("".concat(e,"-color")).value,d=n.pstyle("".concat(e,"-shape")).value,f=n.pstyle("".concat(e,"-corner-radius")).value;if(s>0){if(r=r||n.position(),t==null||i==null){var p=n.padding();t=n.width()+2*p,i=n.height()+2*p}o.colorFillStyle(u,c[0],c[1],c[2],s),o.nodeShapes[d].draw(u,r.x,r.y,t+l*2,i+l*2,f),u.fill()}}}};Rl.drawNodeOverlay=oEe("overlay");Rl.drawNodeUnderlay=oEe("underlay");Rl.hasPie=function(a){return a=a[0],a._private.hasPie};Rl.hasStripe=function(a){return a=a[0],a._private.hasStripe};Rl.drawPie=function(a,e,u,n){e=e[0],n=n||e.position();var r=e.cy().style(),t=e.pstyle("pie-size"),i=e.pstyle("pie-hole"),o=e.pstyle("pie-start-angle").pfValue,l=n.x,s=n.y,c=e.width(),d=e.height(),f=Math.min(c,d)/2,p,h=0,g=this.usePaths();if(g&&(l=0,s=0),t.units==="%"?f=f*t.pfValue:t.pfValue!==void 0&&(f=t.pfValue/2),i.units==="%"?p=f*i.pfValue:i.pfValue!==void 0&&(p=i.pfValue/2),!(p>=f))for(var v=1;v<=r.pieBackgroundN;v++){var m=e.pstyle("pie-"+v+"-background-size").value,T=e.pstyle("pie-"+v+"-background-color").value,w=e.pstyle("pie-"+v+"-background-opacity").value*u,E=m/100;E+h>1&&(E=1-h);var S=1.5*Math.PI+2*Math.PI*h;S+=o;var N=2*Math.PI*E,j=S+N;m===0||h>=1||h+E>1||(p===0?(a.beginPath(),a.moveTo(l,s),a.arc(l,s,f,S,j),a.closePath()):(a.beginPath(),a.arc(l,s,f,S,j),a.arc(l,s,p,j,S,!0),a.closePath()),this.colorFillStyle(a,T[0],T[1],T[2],w),a.fill(),h+=E)}};Rl.drawStripe=function(a,e,u,n){e=e[0],n=n||e.position();var r=e.cy().style(),t=n.x,i=n.y,o=e.width(),l=e.height(),s=0,c=this.usePaths();a.save();var d=e.pstyle("stripe-direction").value,f=e.pstyle("stripe-size");switch(d){case"vertical":break;case"righward":a.rotate(-Math.PI/2);break}var p=o,h=l;f.units==="%"?(p=p*f.pfValue,h=h*f.pfValue):f.pfValue!==void 0&&(p=f.pfValue,h=f.pfValue),c&&(t=0,i=0),i-=p/2,t-=h/2;for(var g=1;g<=r.stripeBackgroundN;g++){var v=e.pstyle("stripe-"+g+"-background-size").value,m=e.pstyle("stripe-"+g+"-background-color").value,T=e.pstyle("stripe-"+g+"-background-opacity").value*u,w=v/100;w+s>1&&(w=1-s),!(v===0||s>=1||s+w>1)&&(a.beginPath(),a.rect(t,i+h*s,p,h*w),a.closePath(),this.colorFillStyle(a,m[0],m[1],m[2],T),a.fill(),s+=w)}a.restore()};var ri={},PHe=100;ri.getPixelRatio=function(){var a=this.data.contexts[0];if(this.forcedPixelRatio!=null)return this.forcedPixelRatio;var e=this.cy.window(),u=a.backingStorePixelRatio||a.webkitBackingStorePixelRatio||a.mozBackingStorePixelRatio||a.msBackingStorePixelRatio||a.oBackingStorePixelRatio||a.backingStorePixelRatio||1;return(e.devicePixelRatio||1)/u};ri.paintCache=function(a){for(var e=this.paintCaches=this.paintCaches||[],u=!0,n,r=0;r<e.length;r++)if(n=e[r],n.context===a){u=!1;break}return u&&(n={context:a},e.push(n)),n};ri.createGradientStyleFor=function(a,e,u,n,r){var t,i=this.usePaths(),o=u.pstyle(e+"-gradient-stop-colors").value,l=u.pstyle(e+"-gradient-stop-positions").pfValue;if(n==="radial-gradient")if(u.isEdge()){var s=u.sourceEndpoint(),c=u.targetEndpoint(),d=u.midpoint(),f=lb(s,d),p=lb(c,d);t=a.createRadialGradient(d.x,d.y,0,d.x,d.y,Math.max(f,p))}else{var h=i?{x:0,y:0}:u.position(),g=u.paddedWidth(),v=u.paddedHeight();t=a.createRadialGradient(h.x,h.y,0,h.x,h.y,Math.max(g,v))}else if(u.isEdge()){var m=u.sourceEndpoint(),T=u.targetEndpoint();t=a.createLinearGradient(m.x,m.y,T.x,T.y)}else{var w=i?{x:0,y:0}:u.position(),E=u.paddedWidth(),S=u.paddedHeight(),N=E/2,j=S/2,q=u.pstyle("background-gradient-direction").value;switch(q){case"to-bottom":t=a.createLinearGradient(w.x,w.y-j,w.x,w.y+j);break;case"to-top":t=a.createLinearGradient(w.x,w.y+j,w.x,w.y-j);break;case"to-left":t=a.createLinearGradient(w.x+N,w.y,w.x-N,w.y);break;case"to-right":t=a.createLinearGradient(w.x-N,w.y,w.x+N,w.y);break;case"to-bottom-right":case"to-right-bottom":t=a.createLinearGradient(w.x-N,w.y-j,w.x+N,w.y+j);break;case"to-top-right":case"to-right-top":t=a.createLinearGradient(w.x-N,w.y+j,w.x+N,w.y-j);break;case"to-bottom-left":case"to-left-bottom":t=a.createLinearGradient(w.x+N,w.y-j,w.x-N,w.y+j);break;case"to-top-left":case"to-left-top":t=a.createLinearGradient(w.x+N,w.y+j,w.x-N,w.y-j);break}}if(!t)return null;for(var O=l.length===o.length,I=o.length,A=0;A<I;A++)t.addColorStop(O?l[A]:A/(I-1),"rgba("+o[A][0]+","+o[A][1]+","+o[A][2]+","+r+")");return t};ri.gradientFillStyle=function(a,e,u,n){var r=this.createGradientStyleFor(a,"background",e,u,n);if(!r)return null;a.fillStyle=r};ri.colorFillStyle=function(a,e,u,n,r){a.fillStyle="rgba("+e+","+u+","+n+","+r+")"};ri.eleFillStyle=function(a,e,u){var n=e.pstyle("background-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientFillStyle(a,e,n,u);else{var r=e.pstyle("background-color").value;this.colorFillStyle(a,r[0],r[1],r[2],u)}};ri.gradientStrokeStyle=function(a,e,u,n){var r=this.createGradientStyleFor(a,"line",e,u,n);if(!r)return null;a.strokeStyle=r};ri.colorStrokeStyle=function(a,e,u,n,r){a.strokeStyle="rgba("+e+","+u+","+n+","+r+")"};ri.eleStrokeStyle=function(a,e,u){var n=e.pstyle("line-fill").value;if(n==="linear-gradient"||n==="radial-gradient")this.gradientStrokeStyle(a,e,n,u);else{var r=e.pstyle("line-color").value;this.colorStrokeStyle(a,r[0],r[1],r[2],u)}};ri.matchCanvasSize=function(a){var e=this,u=e.data,n=e.findContainerClientCoords(),r=n[2],t=n[3],i=e.getPixelRatio(),o=e.motionBlurPxRatio;(a===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE]||a===e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG])&&(i=o);var l=r*i,s=t*i,c;if(!(l===e.canvasWidth&&s===e.canvasHeight)){e.fontCaches=null;var d=u.canvasContainer;d.style.width=r+"px",d.style.height=t+"px";for(var f=0;f<e.CANVAS_LAYERS;f++)c=u.canvases[f],c.width=l,c.height=s,c.style.width=r+"px",c.style.height=t+"px";for(var f=0;f<e.BUFFER_COUNT;f++)c=u.bufferCanvases[f],c.width=l,c.height=s,c.style.width=r+"px",c.style.height=t+"px";e.textureMult=1,i<=1&&(c=u.bufferCanvases[e.TEXTURE_BUFFER],e.textureMult=2,c.width=l*e.textureMult,c.height=s*e.textureMult),e.canvasWidth=l,e.canvasHeight=s,e.pixelRatio=i}};ri.renderTo=function(a,e,u,n){this.render({forcedContext:a,forcedZoom:e,forcedPan:u,drawAllLayers:!0,forcedPxRatio:n})};ri.clearCanvas=function(){var a=this,e=a.data;function u(n){n.clearRect(0,0,a.canvasWidth,a.canvasHeight)}u(e.contexts[a.NODE]),u(e.contexts[a.DRAG])};ri.render=function(a){var e=this;a=a||Kwe();var u=e.cy,n=a.forcedContext,r=a.drawAllLayers,t=a.drawOnlyNodeLayer,i=a.forcedZoom,o=a.forcedPan,l=a.forcedPxRatio===void 0?this.getPixelRatio():a.forcedPxRatio,s=e.data,c=s.canvasNeedsRedraw,d=e.textureOnViewport&&!n&&(e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming),f=a.motionBlur!==void 0?a.motionBlur:e.motionBlur,p=e.motionBlurPxRatio,h=u.hasCompoundNodes(),g=e.hoverData.draggingEles,v=!!(e.hoverData.selecting||e.touchData.selecting);f=f&&!n&&e.motionBlurEnabled&&!v;var m=f;n||(e.prevPxRatio!==l&&(e.invalidateContainerClientCoordsCache(),e.matchCanvasSize(e.container),e.redrawHint("eles",!0),e.redrawHint("drag",!0)),e.prevPxRatio=l),!n&&e.motionBlurTimeout&&clearTimeout(e.motionBlurTimeout),f&&(e.mbFrames==null&&(e.mbFrames=0),e.mbFrames++,e.mbFrames<3&&(m=!1),e.mbFrames>e.minMbLowQualFrames&&(e.motionBlurPxRatio=e.mbPxRBlurry)),e.clearingMotionBlur&&(e.motionBlurPxRatio=1),e.textureDrawLastFrame&&!d&&(c[e.NODE]=!0,c[e.SELECT_BOX]=!0);var T=u.style(),w=u.zoom(),E=i!==void 0?i:w,S=u.pan(),N={x:S.x,y:S.y},j={zoom:w,pan:{x:S.x,y:S.y}},q=e.prevViewport,O=q===void 0||j.zoom!==q.zoom||j.pan.x!==q.pan.x||j.pan.y!==q.pan.y;!O&&!(g&&!h)&&(e.motionBlurPxRatio=1),o&&(N=o),E*=l,N.x*=l,N.y*=l;var I=e.getCachedZSortedEles();function A(be,ee,_,F,D){var L=be.globalCompositeOperation;be.globalCompositeOperation="destination-out",e.colorFillStyle(be,255,255,255,e.motionBlurTransparency),be.fillRect(ee,_,F,D),be.globalCompositeOperation=L}function P(be,ee){var _,F,D,L;!e.clearingMotionBlur&&(be===s.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]||be===s.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG])?(_={x:S.x*p,y:S.y*p},F=w*p,D=e.canvasWidth*p,L=e.canvasHeight*p):(_=N,F=E,D=e.canvasWidth,L=e.canvasHeight),be.setTransform(1,0,0,1,0,0),ee==="motionBlur"?A(be,0,0,D,L):!n&&(ee===void 0||ee)&&be.clearRect(0,0,D,L),r||(be.translate(_.x,_.y),be.scale(F,F)),o&&be.translate(o.x,o.y),i&&be.scale(i,i)}if(d||(e.textureDrawLastFrame=!1),d){if(e.textureDrawLastFrame=!0,!e.textureCache){e.textureCache={},e.textureCache.bb=u.mutableElements().boundingBox(),e.textureCache.texture=e.data.bufferCanvases[e.TEXTURE_BUFFER];var C=e.data.bufferContexts[e.TEXTURE_BUFFER];C.setTransform(1,0,0,1,0,0),C.clearRect(0,0,e.canvasWidth*e.textureMult,e.canvasHeight*e.textureMult),e.render({forcedContext:C,drawOnlyNodeLayer:!0,forcedPxRatio:l*e.textureMult});var j=e.textureCache.viewport={zoom:u.zoom(),pan:u.pan(),width:e.canvasWidth,height:e.canvasHeight};j.mpan={x:(0-j.pan.x)/j.zoom,y:(0-j.pan.y)/j.zoom}}c[e.DRAG]=!1,c[e.NODE]=!1;var B=s.contexts[e.NODE],H=e.textureCache.texture,j=e.textureCache.viewport;B.setTransform(1,0,0,1,0,0),f?A(B,0,0,j.width,j.height):B.clearRect(0,0,j.width,j.height);var V=T.core("outside-texture-bg-color").value,G=T.core("outside-texture-bg-opacity").value;e.colorFillStyle(B,V[0],V[1],V[2],G),B.fillRect(0,0,j.width,j.height);var w=u.zoom();P(B,!1),B.clearRect(j.mpan.x,j.mpan.y,j.width/j.zoom/l,j.height/j.zoom/l),B.drawImage(H,j.mpan.x,j.mpan.y,j.width/j.zoom/l,j.height/j.zoom/l)}else e.textureOnViewport&&!n&&(e.textureCache=null);var Z=u.extent(),ae=e.pinching||e.hoverData.dragging||e.swipePanning||e.data.wheelZooming||e.hoverData.draggingEles||e.cy.animated(),W=e.hideEdgesOnViewport&&ae,te=[];if(te[e.NODE]=!c[e.NODE]&&f&&!e.clearedForMotionBlur[e.NODE]||e.clearingMotionBlur,te[e.NODE]&&(e.clearedForMotionBlur[e.NODE]=!0),te[e.DRAG]=!c[e.DRAG]&&f&&!e.clearedForMotionBlur[e.DRAG]||e.clearingMotionBlur,te[e.DRAG]&&(e.clearedForMotionBlur[e.DRAG]=!0),c[e.NODE]||r||t||te[e.NODE]){var se=f&&!te[e.NODE]&&p!==1,B=n||(se?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_NODE]:s.contexts[e.NODE]),pe=f&&!se?"motionBlur":void 0;P(B,pe),W?e.drawCachedNodes(B,I.nondrag,l,Z):e.drawLayeredElements(B,I.nondrag,l,Z),e.debug&&e.drawDebugPoints(B,I.nondrag),!r&&!f&&(c[e.NODE]=!1)}if(!t&&(c[e.DRAG]||r||te[e.DRAG])){var se=f&&!te[e.DRAG]&&p!==1,B=n||(se?e.data.bufferContexts[e.MOTIONBLUR_BUFFER_DRAG]:s.contexts[e.DRAG]);P(B,f&&!se?"motionBlur":void 0),W?e.drawCachedNodes(B,I.drag,l,Z):e.drawCachedElements(B,I.drag,l,Z),e.debug&&e.drawDebugPoints(B,I.drag),!r&&!f&&(c[e.DRAG]=!1)}if(this.drawSelectionRectangle(a,P),f&&p!==1){var le=s.contexts[e.NODE],Ee=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_NODE],Oe=s.contexts[e.DRAG],Ie=e.data.bufferCanvases[e.MOTIONBLUR_BUFFER_DRAG],Ae=function(ee,_,F){ee.setTransform(1,0,0,1,0,0),F||!m?ee.clearRect(0,0,e.canvasWidth,e.canvasHeight):A(ee,0,0,e.canvasWidth,e.canvasHeight);var D=p;ee.drawImage(_,0,0,e.canvasWidth*D,e.canvasHeight*D,0,0,e.canvasWidth,e.canvasHeight)};(c[e.NODE]||te[e.NODE])&&(Ae(le,Ee,te[e.NODE]),c[e.NODE]=!1),(c[e.DRAG]||te[e.DRAG])&&(Ae(Oe,Ie,te[e.DRAG]),c[e.DRAG]=!1)}e.prevViewport=j,e.clearingMotionBlur&&(e.clearingMotionBlur=!1,e.motionBlurCleared=!0,e.motionBlur=!0),f&&(e.motionBlurTimeout=setTimeout(function(){e.motionBlurTimeout=null,e.clearedForMotionBlur[e.NODE]=!1,e.clearedForMotionBlur[e.DRAG]=!1,e.motionBlur=!1,e.clearingMotionBlur=!d,e.mbFrames=0,c[e.NODE]=!0,c[e.DRAG]=!0,e.redraw()},PHe)),n||u.emit("render")};var I6;ri.drawSelectionRectangle=function(a,e){var u=this,n=u.cy,r=u.data,t=n.style(),i=a.drawOnlyNodeLayer,o=a.drawAllLayers,l=r.canvasNeedsRedraw,s=a.forcedContext;if(u.showFps||!i&&l[u.SELECT_BOX]&&!o){var c=s||r.contexts[u.SELECT_BOX];if(e(c),u.selection[4]==1&&(u.hoverData.selecting||u.touchData.selecting)){var d=u.cy.zoom(),f=t.core("selection-box-border-width").value/d;c.lineWidth=f,c.fillStyle="rgba("+t.core("selection-box-color").value[0]+","+t.core("selection-box-color").value[1]+","+t.core("selection-box-color").value[2]+","+t.core("selection-box-opacity").value+")",c.fillRect(u.selection[0],u.selection[1],u.selection[2]-u.selection[0],u.selection[3]-u.selection[1]),f>0&&(c.strokeStyle="rgba("+t.core("selection-box-border-color").value[0]+","+t.core("selection-box-border-color").value[1]+","+t.core("selection-box-border-color").value[2]+","+t.core("selection-box-opacity").value+")",c.strokeRect(u.selection[0],u.selection[1],u.selection[2]-u.selection[0],u.selection[3]-u.selection[1]))}if(r.bgActivePosistion&&!u.hoverData.selecting){var d=u.cy.zoom(),p=r.bgActivePosistion;c.fillStyle="rgba("+t.core("active-bg-color").value[0]+","+t.core("active-bg-color").value[1]+","+t.core("active-bg-color").value[2]+","+t.core("active-bg-opacity").value+")",c.beginPath(),c.arc(p.x,p.y,t.core("active-bg-size").pfValue/d,0,2*Math.PI),c.fill()}var h=u.lastRedrawTime;if(u.showFps&&h){h=Math.round(h);var g=Math.round(1e3/h),v="1 frame = "+h+" ms = "+g+" fps";if(c.setTransform(1,0,0,1,0,0),c.fillStyle="rgba(255, 0, 0, 0.75)",c.strokeStyle="rgba(255, 0, 0, 0.75)",c.font="30px Arial",!I6){var m=c.measureText(v);I6=m.actualBoundingBoxAscent}c.fillText(v,0,I6);var T=60;c.strokeRect(0,I6+10,250,20),c.fillRect(0,I6+10,250*Math.min(g/T,1),20)}o||(l[u.SELECT_BOX]=!1)}};function nve(a,e,u){var n=a.createShader(e);if(a.shaderSource(n,u),a.compileShader(n),!a.getShaderParameter(n,a.COMPILE_STATUS))throw new Error(a.getShaderInfoLog(n));return n}function jHe(a,e,u){var n=nve(a,a.VERTEX_SHADER,e),r=nve(a,a.FRAGMENT_SHADER,u),t=a.createProgram();if(a.attachShader(t,n),a.attachShader(t,r),a.linkProgram(t),!a.getProgramParameter(t,a.LINK_STATUS))throw new Error("Could not initialize shaders");return t}function MHe(a,e,u){u===void 0&&(u=e);var n=a.makeOffscreenCanvas(e,u),r=n.context=n.getContext("2d");return n.clear=function(){return r.clearRect(0,0,n.width,n.height)},n.clear(),n}function uk(a){var e=a.pixelRatio,u=a.cy.zoom(),n=a.cy.pan();return{zoom:u*e,pan:{x:n.x*e,y:n.y*e}}}function CHe(a){var e=a.pixelRatio,u=a.cy.zoom();return u*e}function LHe(a,e,u,n,r){var t=n*u+e.x,i=r*u+e.y;return i=Math.round(a.canvasHeight-i),[t,i]}function qHe(a){return a.pstyle("background-fill").value!=="solid"||a.pstyle("background-image").strValue!=="none"?!1:a.pstyle("border-width").value===0||a.pstyle("border-opacity").value===0?!0:a.pstyle("border-style").value==="solid"}function BHe(a,e){if(a.length!==e.length)return!1;for(var u=0;u<a.length;u++)if(a[u]!==e[u])return!1;return!0}function Vm(a,e,u){var n=a[0]/255,r=a[1]/255,t=a[2]/255,i=e,o=u||new Array(4);return o[0]=n*i,o[1]=r*i,o[2]=t*i,o[3]=i,o}function Rg(a,e){var u=e||new Array(4);return u[0]=(a>>0&255)/255,u[1]=(a>>8&255)/255,u[2]=(a>>16&255)/255,u[3]=(a>>24&255)/255,u}function UHe(a){return a[0]+(a[1]<<8)+(a[2]<<16)+(a[3]<<24)}function QHe(a,e){var u=a.createTexture();return u.buffer=function(n){a.bindTexture(a.TEXTURE_2D,u),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MAG_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR_MIPMAP_NEAREST),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!0),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,a.RGBA,a.UNSIGNED_BYTE,n),a.generateMipmap(a.TEXTURE_2D),a.bindTexture(a.TEXTURE_2D,null)},u.deleteTexture=function(){a.deleteTexture(u)},u}function sEe(a,e){switch(e){case"float":return[1,a.FLOAT,4];case"vec2":return[2,a.FLOAT,4];case"vec3":return[3,a.FLOAT,4];case"vec4":return[4,a.FLOAT,4];case"int":return[1,a.INT,4];case"ivec2":return[2,a.INT,4]}}function cEe(a,e,u){switch(e){case a.FLOAT:return new Float32Array(u);case a.INT:return new Int32Array(u)}}function VHe(a,e,u,n,r,t){switch(e){case a.FLOAT:return new Float32Array(u.buffer,t*n,r);case a.INT:return new Int32Array(u.buffer,t*n,r)}}function HHe(a,e,u,n){var r=sEe(a,e),t=zn(r,2),i=t[0],o=t[1],l=cEe(a,o,n),s=a.createBuffer();return a.bindBuffer(a.ARRAY_BUFFER,s),a.bufferData(a.ARRAY_BUFFER,l,a.STATIC_DRAW),o===a.FLOAT?a.vertexAttribPointer(u,i,o,!1,0,0):o===a.INT&&a.vertexAttribIPointer(u,i,o,0,0),a.enableVertexAttribArray(u),a.bindBuffer(a.ARRAY_BUFFER,null),s}function Mo(a,e,u,n){var r=sEe(a,u),t=zn(r,3),i=t[0],o=t[1],l=t[2],s=cEe(a,o,e*i),c=i*l,d=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,d),a.bufferData(a.ARRAY_BUFFER,e*c,a.DYNAMIC_DRAW),a.enableVertexAttribArray(n),o===a.FLOAT?a.vertexAttribPointer(n,i,o,!1,c,0):o===a.INT&&a.vertexAttribIPointer(n,i,o,c,0),a.vertexAttribDivisor(n,1),a.bindBuffer(a.ARRAY_BUFFER,null);for(var f=new Array(e),p=0;p<e;p++)f[p]=VHe(a,o,s,c,i,p);return d.dataArray=s,d.stride=c,d.size=i,d.getView=function(h){return f[h]},d.setPoint=function(h,g,v){var m=f[h];m[0]=g,m[1]=v},d.bufferSubData=function(h){a.bindBuffer(a.ARRAY_BUFFER,d),h?a.bufferSubData(a.ARRAY_BUFFER,0,s,0,h*i):a.bufferSubData(a.ARRAY_BUFFER,0,s)},d}function kHe(a,e,u){for(var n=9,r=new Float32Array(e*n),t=new Array(e),i=0;i<e;i++){var o=i*n*4;t[i]=new Float32Array(r.buffer,o,n)}var l=a.createBuffer();a.bindBuffer(a.ARRAY_BUFFER,l),a.bufferData(a.ARRAY_BUFFER,r.byteLength,a.DYNAMIC_DRAW);for(var s=0;s<3;s++){var c=u+s;a.enableVertexAttribArray(c),a.vertexAttribPointer(c,3,a.FLOAT,!1,36,s*12),a.vertexAttribDivisor(c,1)}return a.bindBuffer(a.ARRAY_BUFFER,null),l.getMatrixView=function(d){return t[d]},l.setData=function(d,f){t[f].set(d,0)},l.bufferSubData=function(){a.bindBuffer(a.ARRAY_BUFFER,l),a.bufferSubData(a.ARRAY_BUFFER,0,r)},l}function zHe(a){var e=a.createFramebuffer();a.bindFramebuffer(a.FRAMEBUFFER,e);var u=a.createTexture();return a.bindTexture(a.TEXTURE_2D,u),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_MIN_FILTER,a.LINEAR),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_S,a.CLAMP_TO_EDGE),a.texParameteri(a.TEXTURE_2D,a.TEXTURE_WRAP_T,a.CLAMP_TO_EDGE),a.framebufferTexture2D(a.FRAMEBUFFER,a.COLOR_ATTACHMENT0,a.TEXTURE_2D,u,0),a.bindFramebuffer(a.FRAMEBUFFER,null),e.setFramebufferAttachmentSizes=function(n,r){a.bindTexture(a.TEXTURE_2D,u),a.texImage2D(a.TEXTURE_2D,0,a.RGBA,n,r,0,a.RGBA,a.UNSIGNED_BYTE,null)},e}var ave=typeof Float32Array<"u"?Float32Array:Array;Math.hypot||(Math.hypot=function(){for(var a=0,e=arguments.length;e--;)a+=arguments[e]*arguments[e];return Math.sqrt(a)});function qL(){var a=new ave(9);return ave!=Float32Array&&(a[1]=0,a[2]=0,a[3]=0,a[5]=0,a[6]=0,a[7]=0),a[0]=1,a[4]=1,a[8]=1,a}function ive(a){return a[0]=1,a[1]=0,a[2]=0,a[3]=0,a[4]=1,a[5]=0,a[6]=0,a[7]=0,a[8]=1,a}function GHe(a,e,u){var n=e[0],r=e[1],t=e[2],i=e[3],o=e[4],l=e[5],s=e[6],c=e[7],d=e[8],f=u[0],p=u[1],h=u[2],g=u[3],v=u[4],m=u[5],T=u[6],w=u[7],E=u[8];return a[0]=f*n+p*i+h*s,a[1]=f*r+p*o+h*c,a[2]=f*t+p*l+h*d,a[3]=g*n+v*i+m*s,a[4]=g*r+v*o+m*c,a[5]=g*t+v*l+m*d,a[6]=T*n+w*i+E*s,a[7]=T*r+w*o+E*c,a[8]=T*t+w*l+E*d,a}function bF(a,e,u){var n=e[0],r=e[1],t=e[2],i=e[3],o=e[4],l=e[5],s=e[6],c=e[7],d=e[8],f=u[0],p=u[1];return a[0]=n,a[1]=r,a[2]=t,a[3]=i,a[4]=o,a[5]=l,a[6]=f*n+p*i+s,a[7]=f*r+p*o+c,a[8]=f*t+p*l+d,a}function uve(a,e,u){var n=e[0],r=e[1],t=e[2],i=e[3],o=e[4],l=e[5],s=e[6],c=e[7],d=e[8],f=Math.sin(u),p=Math.cos(u);return a[0]=p*n+f*i,a[1]=p*r+f*o,a[2]=p*t+f*l,a[3]=p*i-f*n,a[4]=p*o-f*r,a[5]=p*l-f*t,a[6]=s,a[7]=c,a[8]=d,a}function P7(a,e,u){var n=u[0],r=u[1];return a[0]=n*e[0],a[1]=n*e[1],a[2]=n*e[2],a[3]=r*e[3],a[4]=r*e[4],a[5]=r*e[5],a[6]=e[6],a[7]=e[7],a[8]=e[8],a}function $He(a,e,u){return a[0]=2/e,a[1]=0,a[2]=0,a[3]=0,a[4]=-2/u,a[5]=0,a[6]=-1,a[7]=1,a[8]=1,a}var XHe=(function(){function a(e,u,n,r){Al(this,a),this.debugID=Math.floor(Math.random()*1e4),this.r=e,this.texSize=u,this.texRows=n,this.texHeight=Math.floor(u/n),this.enableWrapping=!0,this.locked=!1,this.texture=null,this.needsBuffer=!0,this.freePointer={x:0,row:0},this.keyToLocation=new Map,this.canvas=r(e,u,u),this.scratch=r(e,u,this.texHeight,"scratch")}return Ol(a,[{key:"lock",value:function(){this.locked=!0}},{key:"getKeys",value:function(){return new Set(this.keyToLocation.keys())}},{key:"getScale",value:function(u){var n=u.w,r=u.h,t=this.texHeight,i=this.texSize,o=t/r,l=n*o,s=r*o;return l>i&&(o=i/n,l=n*o,s=r*o),{scale:o,texW:l,texH:s}}},{key:"draw",value:function(u,n,r){var t=this;if(this.locked)throw new Error("can't draw, atlas is locked");var i=this.texSize,o=this.texRows,l=this.texHeight,s=this.getScale(n),c=s.scale,d=s.texW,f=s.texH,p=function(w,E){if(r&&E){var S=E.context,N=w.x,j=w.row,q=N,O=l*j;S.save(),S.translate(q,O),S.scale(c,c),r(S,n),S.restore()}},h=[null,null],g=function(){p(t.freePointer,t.canvas),h[0]={x:t.freePointer.x,y:t.freePointer.row*l,w:d,h:f},h[1]={x:t.freePointer.x+d,y:t.freePointer.row*l,w:0,h:f},t.freePointer.x+=d,t.freePointer.x==i&&(t.freePointer.x=0,t.freePointer.row++)},v=function(){var w=t.scratch,E=t.canvas;w.clear(),p({x:0,row:0},w);var S=i-t.freePointer.x,N=d-S,j=l;{var q=t.freePointer.x,O=t.freePointer.row*l,I=S;E.context.drawImage(w,0,0,I,j,q,O,I,j),h[0]={x:q,y:O,w:I,h:f}}{var A=S,P=(t.freePointer.row+1)*l,C=N;E&&E.context.drawImage(w,A,0,C,j,0,P,C,j),h[1]={x:0,y:P,w:C,h:f}}t.freePointer.x=N,t.freePointer.row++},m=function(){t.freePointer.x=0,t.freePointer.row++};if(this.freePointer.x+d<=i)g();else{if(this.freePointer.row>=o-1)return!1;this.freePointer.x===i?(m(),g()):this.enableWrapping?v():(m(),g())}return this.keyToLocation.set(u,h),this.needsBuffer=!0,h}},{key:"getOffsets",value:function(u){return this.keyToLocation.get(u)}},{key:"isEmpty",value:function(){return this.freePointer.x===0&&this.freePointer.row===0}},{key:"canFit",value:function(u){if(this.locked)return!1;var n=this.texSize,r=this.texRows,t=this.getScale(u),i=t.texW;return this.freePointer.x+i>n?this.freePointer.row<r-1:!0}},{key:"bufferIfNeeded",value:function(u){this.texture||(this.texture=QHe(u,this.debugID)),this.needsBuffer&&(this.texture.buffer(this.canvas),this.needsBuffer=!1,this.locked&&(this.canvas=null,this.scratch=null))}},{key:"dispose",value:function(){this.texture&&(this.texture.deleteTexture(),this.texture=null),this.canvas=null,this.scratch=null,this.locked=!0}}])})(),KHe=(function(){function a(e,u,n,r){Al(this,a),this.r=e,this.texSize=u,this.texRows=n,this.createTextureCanvas=r,this.atlases=[],this.styleKeyToAtlas=new Map,this.markedKeys=new Set}return Ol(a,[{key:"getKeys",value:function(){return new Set(this.styleKeyToAtlas.keys())}},{key:"_createAtlas",value:function(){var u=this.r,n=this.texSize,r=this.texRows,t=this.createTextureCanvas;return new XHe(u,n,r,t)}},{key:"_getScratchCanvas",value:function(){if(!this.scratch){var u=this.r,n=this.texSize,r=this.texRows,t=this.createTextureCanvas,i=Math.floor(n/r);this.scratch=t(u,n,i,"scratch")}return this.scratch}},{key:"draw",value:function(u,n,r){var t=this.styleKeyToAtlas.get(u);return t||(t=this.atlases[this.atlases.length-1],(!t||!t.canFit(n))&&(t&&t.lock(),t=this._createAtlas(),this.atlases.push(t)),t.draw(u,n,r),this.styleKeyToAtlas.set(u,t)),t}},{key:"getAtlas",value:function(u){return this.styleKeyToAtlas.get(u)}},{key:"hasAtlas",value:function(u){return this.styleKeyToAtlas.has(u)}},{key:"markKeyForGC",value:function(u){this.markedKeys.add(u)}},{key:"gc",value:function(){var u=this,n=this.markedKeys;if(n.size===0){console.log("nothing to garbage collect");return}var r=[],t=new Map,i=null,o=yi(this.atlases),l;try{var s=function(){var d=l.value,f=d.getKeys(),p=JHe(n,f);if(p.size===0)return r.push(d),f.forEach(function(S){return t.set(S,d)}),1;i||(i=u._createAtlas(),r.push(i));var h=yi(f),g;try{for(h.s();!(g=h.n()).done;){var v=g.value;if(!p.has(v)){var m=d.getOffsets(v),T=zn(m,2),w=T[0],E=T[1];i.canFit({w:w.w+E.w,h:w.h})||(i.lock(),i=u._createAtlas(),r.push(i)),d.canvas&&(u._copyTextureToNewAtlas(v,d,i),t.set(v,i))}}}catch(S){h.e(S)}finally{h.f()}d.dispose()};for(o.s();!(l=o.n()).done;)s()}catch(c){o.e(c)}finally{o.f()}this.atlases=r,this.styleKeyToAtlas=t,this.markedKeys=new Set}},{key:"_copyTextureToNewAtlas",value:function(u,n,r){var t=n.getOffsets(u),i=zn(t,2),o=i[0],l=i[1];if(l.w===0)r.draw(u,o,function(f){f.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h)});else{var s=this._getScratchCanvas();s.clear(),s.context.drawImage(n.canvas,o.x,o.y,o.w,o.h,0,0,o.w,o.h),s.context.drawImage(n.canvas,l.x,l.y,l.w,l.h,o.w,0,l.w,l.h);var c=o.w+l.w,d=o.h;r.draw(u,{w:c,h:d},function(f){f.drawImage(s,0,0,c,d,0,0,c,d)})}}},{key:"getCounts",value:function(){return{keyCount:this.styleKeyToAtlas.size,atlasCount:new Set(this.styleKeyToAtlas.values()).size}}}])})();function JHe(a,e){return a.intersection?a.intersection(e):new Set(RF(a).filter(function(u){return e.has(u)}))}var WHe=(function(){function a(e,u){Al(this,a),this.r=e,this.globalOptions=u,this.atlasSize=u.webglTexSize,this.maxAtlasesPerBatch=u.webglTexPerBatch,this.renderTypes=new Map,this.collections=new Map,this.typeAndIdToKey=new Map}return Ol(a,[{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"addAtlasCollection",value:function(u,n){var r=this.globalOptions,t=r.webglTexSize,i=r.createTextureCanvas,o=n.texRows,l=this._cacheScratchCanvas(i),s=new KHe(this.r,t,o,l);this.collections.set(u,s)}},{key:"addRenderType",value:function(u,n){var r=n.collection;if(!this.collections.has(r))throw new Error("invalid atlas collection name '".concat(r,"'"));var t=this.collections.get(r),i=qt({type:u,atlasCollection:t},n);this.renderTypes.set(u,i)}},{key:"getRenderTypeOpts",value:function(u){return this.renderTypes.get(u)}},{key:"getAtlasCollection",value:function(u){return this.collections.get(u)}},{key:"_cacheScratchCanvas",value:function(u){var n=-1,r=-1,t=null;return function(i,o,l,s){return s?((!t||o!=n||l!=r)&&(n=o,r=l,t=u(i,o,l)),t):u(i,o,l)}}},{key:"_key",value:function(u,n){return"".concat(u,"-").concat(n)}},{key:"invalidate",value:function(u){var n=this,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=r.forceRedraw,i=t===void 0?!1:t,o=r.filterEle,l=o===void 0?function(){return!0}:o,s=r.filterType,c=s===void 0?function(){return!0}:s,d=!1,f=!1,p=yi(u),h;try{for(p.s();!(h=p.n()).done;){var g=h.value;if(l(g)){var v=yi(this.renderTypes.values()),m;try{var T=function(){var E=m.value,S=E.type;if(c(S)){var N=n.collections.get(E.collection),j=E.getKey(g),q=Array.isArray(j)?j:[j];if(i)q.forEach(function(P){return N.markKeyForGC(P)}),f=!0;else{var O=E.getID?E.getID(g):g.id(),I=n._key(S,O),A=n.typeAndIdToKey.get(I);A!==void 0&&!BHe(q,A)&&(d=!0,n.typeAndIdToKey.delete(I),A.forEach(function(P){return N.markKeyForGC(P)}))}}};for(v.s();!(m=v.n()).done;)T()}catch(w){v.e(w)}finally{v.f()}}}}catch(w){p.e(w)}finally{p.f()}return f&&(this.gc(),d=!1),d}},{key:"gc",value:function(){var u=yi(this.collections.values()),n;try{for(u.s();!(n=u.n()).done;){var r=n.value;r.gc()}}catch(t){u.e(t)}finally{u.f()}}},{key:"getOrCreateAtlas",value:function(u,n,r,t){var i=this.renderTypes.get(n),o=this.collections.get(i.collection),l=!1,s=o.draw(t,r,function(f){i.drawClipped?(f.save(),f.beginPath(),f.rect(0,0,r.w,r.h),f.clip(),i.drawElement(f,u,r,!0,!0),f.restore()):i.drawElement(f,u,r,!0,!0),l=!0});if(l){var c=i.getID?i.getID(u):u.id(),d=this._key(n,c);this.typeAndIdToKey.has(d)?this.typeAndIdToKey.get(d).push(t):this.typeAndIdToKey.set(d,[t])}return s}},{key:"getAtlasInfo",value:function(u,n){var r=this,t=this.renderTypes.get(n),i=t.getKey(u),o=Array.isArray(i)?i:[i];return o.map(function(l){var s=t.getBoundingBox(u,l),c=r.getOrCreateAtlas(u,n,s,l),d=c.getOffsets(l),f=zn(d,2),p=f[0],h=f[1];return{atlas:c,tex:p,tex1:p,tex2:h,bb:s}})}},{key:"getDebugInfo",value:function(){var u=[],n=yi(this.collections),r;try{for(n.s();!(r=n.n()).done;){var t=zn(r.value,2),i=t[0],o=t[1],l=o.getCounts(),s=l.keyCount,c=l.atlasCount;u.push({type:i,keyCount:s,atlasCount:c})}}catch(d){n.e(d)}finally{n.f()}return u}}])})(),YHe=(function(){function a(e){Al(this,a),this.globalOptions=e,this.atlasSize=e.webglTexSize,this.maxAtlasesPerBatch=e.webglTexPerBatch,this.batchAtlases=[]}return Ol(a,[{key:"getMaxAtlasesPerBatch",value:function(){return this.maxAtlasesPerBatch}},{key:"getAtlasSize",value:function(){return this.atlasSize}},{key:"getIndexArray",value:function(){return Array.from({length:this.maxAtlasesPerBatch},function(u,n){return n})}},{key:"startBatch",value:function(){this.batchAtlases=[]}},{key:"getAtlasCount",value:function(){return this.batchAtlases.length}},{key:"getAtlases",value:function(){return this.batchAtlases}},{key:"canAddToCurrentBatch",value:function(u){return this.batchAtlases.length===this.maxAtlasesPerBatch?this.batchAtlases.includes(u):!0}},{key:"getAtlasIndexForBatch",value:function(u){var n=this.batchAtlases.indexOf(u);if(n<0){if(this.batchAtlases.length===this.maxAtlasesPerBatch)throw new Error("cannot add more atlases to batch");this.batchAtlases.push(u),n=this.batchAtlases.length-1}return n}}])})(),ZHe=`
  float circleSD(vec2 p, float r) {
    return distance(vec2(0), p) - r; // signed distance
  }
`,eke=`
  float rectangleSD(vec2 p, vec2 b) {
    vec2 d = abs(p)-b;
    return distance(vec2(0),max(d,0.0)) + min(max(d.x,d.y),0.0);
  }
`,tke=`
  float roundRectangleSD(vec2 p, vec2 b, vec4 cr) {
    cr.xy = (p.x > 0.0) ? cr.xy : cr.zw;
    cr.x  = (p.y > 0.0) ? cr.x  : cr.y;
    vec2 q = abs(p) - b + cr.x;
    return min(max(q.x, q.y), 0.0) + distance(vec2(0), max(q, 0.0)) - cr.x;
  }
`,rke=`
  float ellipseSD(vec2 p, vec2 ab) {
    p = abs( p ); // symmetry

    // find root with Newton solver
    vec2 q = ab*(p-ab);
    float w = (q.x<q.y)? 1.570796327 : 0.0;
    for( int i=0; i<5; i++ ) {
      vec2 cs = vec2(cos(w),sin(w));
      vec2 u = ab*vec2( cs.x,cs.y);
      vec2 v = ab*vec2(-cs.y,cs.x);
      w = w + dot(p-u,v)/(dot(p-u,u)+dot(v,v));
    }
    
    // compute final point and distance
    float d = length(p-ab*vec2(cos(w),sin(w)));
    
    // return signed distance
    return (dot(p/ab,p/ab)>1.0) ? d : -d;
  }
`,i4={SCREEN:{name:"screen",screen:!0},PICKING:{name:"picking",picking:!0}},UF={IGNORE:1,USE_BB:2},BL=0,ove=1,sve=2,UL=3,Ng=4,HD=5,D6=6,F6=7,nke=(function(){function a(e,u,n){Al(this,a),this.r=e,this.gl=u,this.maxInstances=n.webglBatchSize,this.atlasSize=n.webglTexSize,this.bgColor=n.bgColor,this.debug=n.webglDebug,this.batchDebugInfo=[],n.enableWrapping=!0,n.createTextureCanvas=MHe,this.atlasManager=new WHe(e,n),this.batchManager=new YHe(n),this.simpleShapeOptions=new Map,this.program=this._createShaderProgram(i4.SCREEN),this.pickingProgram=this._createShaderProgram(i4.PICKING),this.vao=this._createVAO()}return Ol(a,[{key:"addAtlasCollection",value:function(u,n){this.atlasManager.addAtlasCollection(u,n)}},{key:"addTextureAtlasRenderType",value:function(u,n){this.atlasManager.addRenderType(u,n)}},{key:"addSimpleShapeRenderType",value:function(u,n){this.simpleShapeOptions.set(u,n)}},{key:"invalidate",value:function(u){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},r=n.type,t=this.atlasManager;return r?t.invalidate(u,{filterType:function(o){return o===r},forceRedraw:!0}):t.invalidate(u)}},{key:"gc",value:function(){this.atlasManager.gc()}},{key:"_createShaderProgram",value:function(u){var n=this.gl,r=`#version 300 es
      precision highp float;

      uniform mat3 uPanZoomMatrix;
      uniform int  uAtlasSize;
      
      // instanced
      in vec2 aPosition; // a vertex from the unit square
      
      in mat3 aTransform; // used to transform verticies, eg into a bounding box
      in int aVertType; // the type of thing we are rendering

      // the z-index that is output when using picking mode
      in vec4 aIndex;
      
      // For textures
      in int aAtlasId; // which shader unit/atlas to use
      in vec4 aTex; // x/y/w/h of texture in atlas

      // for edges
      in vec4 aPointAPointB;
      in vec4 aPointCPointD;
      in vec2 aLineWidth; // also used for node border width

      // simple shapes
      in vec4 aCornerRadius; // for round-rectangle [top-right, bottom-right, top-left, bottom-left]
      in vec4 aColor; // also used for edges
      in vec4 aBorderColor; // aLineWidth is used for border width

      // output values passed to the fragment shader
      out vec2 vTexCoord;
      out vec4 vColor;
      out vec2 vPosition;
      // flat values are not interpolated
      flat out int vAtlasId; 
      flat out int vVertType;
      flat out vec2 vTopRight;
      flat out vec2 vBotLeft;
      flat out vec4 vCornerRadius;
      flat out vec4 vBorderColor;
      flat out vec2 vBorderWidth;
      flat out vec4 vIndex;
      
      void main(void) {
        int vid = gl_VertexID;
        vec2 position = aPosition; // TODO make this a vec3, simplifies some code below

        if(aVertType == `.concat(BL,`) {
          float texX = aTex.x; // texture coordinates
          float texY = aTex.y;
          float texW = aTex.z;
          float texH = aTex.w;

          if(vid == 1 || vid == 2 || vid == 4) {
            texX += texW;
          }
          if(vid == 2 || vid == 4 || vid == 5) {
            texY += texH;
          }

          float d = float(uAtlasSize);
          vTexCoord = vec2(texX / d, texY / d); // tex coords must be between 0 and 1

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(Ng," || aVertType == ").concat(F6,` 
             || aVertType == `).concat(HD," || aVertType == ").concat(D6,`) { // simple shapes

          // the bounding box is needed by the fragment shader
          vBotLeft  = (aTransform * vec3(0, 0, 1)).xy; // flat
          vTopRight = (aTransform * vec3(1, 1, 1)).xy; // flat
          vPosition = (aTransform * vec3(position, 1)).xy; // will be interpolated

          // calculations are done in the fragment shader, just pass these along
          vColor = aColor;
          vCornerRadius = aCornerRadius;
          vBorderColor = aBorderColor;
          vBorderWidth = aLineWidth;

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
        }
        else if(aVertType == `).concat(ove,`) {
          vec2 source = aPointAPointB.xy;
          vec2 target = aPointAPointB.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          // stretch the unit square into a long skinny rectangle
          vec2 xBasis = target - source;
          vec2 yBasis = normalize(vec2(-xBasis.y, xBasis.x));
          vec2 point = source + xBasis * position.x + yBasis * aLineWidth[0] * position.y;

          gl_Position = vec4(uPanZoomMatrix * vec3(point, 1.0), 1.0);
          vColor = aColor;
        } 
        else if(aVertType == `).concat(sve,`) {
          vec2 pointA = aPointAPointB.xy;
          vec2 pointB = aPointAPointB.zw;
          vec2 pointC = aPointCPointD.xy;
          vec2 pointD = aPointCPointD.zw;

          // adjust the geometry so that the line is centered on the edge
          position.y = position.y - 0.5;

          vec2 p0, p1, p2, pos;
          if(position.x == 0.0) { // The left side of the unit square
            p0 = pointA;
            p1 = pointB;
            p2 = pointC;
            pos = position;
          } else { // The right side of the unit square, use same approach but flip the geometry upside down
            p0 = pointD;
            p1 = pointC;
            p2 = pointB;
            pos = vec2(0.0, -position.y);
          }

          vec2 p01 = p1 - p0;
          vec2 p12 = p2 - p1;
          vec2 p21 = p1 - p2;

          // Find the normal vector.
          vec2 tangent = normalize(normalize(p12) + normalize(p01));
          vec2 normal = vec2(-tangent.y, tangent.x);

          // Find the vector perpendicular to p0 -> p1.
          vec2 p01Norm = normalize(vec2(-p01.y, p01.x));

          // Determine the bend direction.
          float sigma = sign(dot(p01 + p21, normal));
          float width = aLineWidth[0];

          if(sign(pos.y) == -sigma) {
            // This is an intersecting vertex. Adjust the position so that there's no overlap.
            vec2 point = 0.5 * width * normal * -sigma / dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          } else {
            // This is a non-intersecting vertex. Treat it like a mitre join.
            vec2 point = 0.5 * width * normal * sigma * dot(normal, p01Norm);
            gl_Position = vec4(uPanZoomMatrix * vec3(p1 + point, 1.0), 1.0);
          }

          vColor = aColor;
        } 
        else if(aVertType == `).concat(UL,` && vid < 3) {
          // massage the first triangle into an edge arrow
          if(vid == 0)
            position = vec2(-0.15, -0.3);
          if(vid == 1)
            position = vec2(  0.0,  0.0);
          if(vid == 2)
            position = vec2( 0.15, -0.3);

          gl_Position = vec4(uPanZoomMatrix * aTransform * vec3(position, 1.0), 1.0);
          vColor = aColor;
        }
        else {
          gl_Position = vec4(2.0, 0.0, 0.0, 1.0); // discard vertex by putting it outside webgl clip space
        }

        vAtlasId = aAtlasId;
        vVertType = aVertType;
        vIndex = aIndex;
      }
    `),t=this.batchManager.getIndexArray(),i=`#version 300 es
      precision highp float;

      // declare texture unit for each texture atlas in the batch
      `.concat(t.map(function(s){return"uniform sampler2D uTexture".concat(s,";")}).join(`
	`),`

      uniform vec4 uBGColor;
      uniform float uZoom;

      in vec2 vTexCoord;
      in vec4 vColor;
      in vec2 vPosition; // model coordinates

      flat in int vAtlasId;
      flat in vec4 vIndex;
      flat in int vVertType;
      flat in vec2 vTopRight;
      flat in vec2 vBotLeft;
      flat in vec4 vCornerRadius;
      flat in vec4 vBorderColor;
      flat in vec2 vBorderWidth;

      out vec4 outColor;

      `).concat(ZHe,`
      `).concat(eke,`
      `).concat(tke,`
      `).concat(rke,`

      vec4 blend(vec4 top, vec4 bot) { // blend colors with premultiplied alpha
        return vec4( 
          top.rgb + (bot.rgb * (1.0 - top.a)),
          top.a   + (bot.a   * (1.0 - top.a)) 
        );
      }

      vec4 distInterp(vec4 cA, vec4 cB, float d) { // interpolate color using Signed Distance
        // scale to the zoom level so that borders don't look blurry when zoomed in
        // note 1.5 is an aribitrary value chosen because it looks good
        return mix(cA, cB, 1.0 - smoothstep(0.0, 1.5 / uZoom, abs(d))); 
      }

      void main(void) {
        if(vVertType == `).concat(BL,`) {
          // look up the texel from the texture unit
          `).concat(t.map(function(s){return"if(vAtlasId == ".concat(s,") outColor = texture(uTexture").concat(s,", vTexCoord);")}).join(`
	else `),`
        } 
        else if(vVertType == `).concat(UL,`) {
          // mimics how canvas renderer uses context.globalCompositeOperation = 'destination-out';
          outColor = blend(vColor, uBGColor);
          outColor.a = 1.0; // make opaque, masks out line under arrow
        }
        else if(vVertType == `).concat(Ng,` && vBorderWidth == vec2(0.0)) { // simple rectangle with no border
          outColor = vColor; // unit square is already transformed to the rectangle, nothing else needs to be done
        }
        else if(vVertType == `).concat(Ng," || vVertType == ").concat(F6,` 
          || vVertType == `).concat(HD," || vVertType == ").concat(D6,`) { // use SDF

          float outerBorder = vBorderWidth[0];
          float innerBorder = vBorderWidth[1];
          float borderPadding = outerBorder * 2.0;
          float w = vTopRight.x - vBotLeft.x - borderPadding;
          float h = vTopRight.y - vBotLeft.y - borderPadding;
          vec2 b = vec2(w/2.0, h/2.0); // half width, half height
          vec2 p = vPosition - vec2(vTopRight.x - b[0] - outerBorder, vTopRight.y - b[1] - outerBorder); // translate to center

          float d; // signed distance
          if(vVertType == `).concat(Ng,`) {
            d = rectangleSD(p, b);
          } else if(vVertType == `).concat(F6,` && w == h) {
            d = circleSD(p, b.x); // faster than ellipse
          } else if(vVertType == `).concat(F6,`) {
            d = ellipseSD(p, b);
          } else {
            d = roundRectangleSD(p, b, vCornerRadius.wzyx);
          }

          // use the distance to interpolate a color to smooth the edges of the shape, doesn't need multisampling
          // we must smooth colors inwards, because we can't change pixels outside the shape's bounding box
          if(d > 0.0) {
            if(d > outerBorder) {
              discard;
            } else {
              outColor = distInterp(vBorderColor, vec4(0), d - outerBorder);
            }
          } else {
            if(d > innerBorder) {
              vec4 outerColor = outerBorder == 0.0 ? vec4(0) : vBorderColor;
              vec4 innerBorderColor = blend(vBorderColor, vColor);
              outColor = distInterp(innerBorderColor, outerColor, d);
            } 
            else {
              vec4 outerColor;
              if(innerBorder == 0.0 && outerBorder == 0.0) {
                outerColor = vec4(0);
              } else if(innerBorder == 0.0) {
                outerColor = vBorderColor;
              } else {
                outerColor = blend(vBorderColor, vColor);
              }
              outColor = distInterp(vColor, outerColor, d - innerBorder);
            }
          }
        }
        else {
          outColor = vColor;
        }

        `).concat(u.picking?`if(outColor.a == 0.0) discard;
             else outColor = vIndex;`:"",`
      }
    `),o=jHe(n,r,i);o.aPosition=n.getAttribLocation(o,"aPosition"),o.aIndex=n.getAttribLocation(o,"aIndex"),o.aVertType=n.getAttribLocation(o,"aVertType"),o.aTransform=n.getAttribLocation(o,"aTransform"),o.aAtlasId=n.getAttribLocation(o,"aAtlasId"),o.aTex=n.getAttribLocation(o,"aTex"),o.aPointAPointB=n.getAttribLocation(o,"aPointAPointB"),o.aPointCPointD=n.getAttribLocation(o,"aPointCPointD"),o.aLineWidth=n.getAttribLocation(o,"aLineWidth"),o.aColor=n.getAttribLocation(o,"aColor"),o.aCornerRadius=n.getAttribLocation(o,"aCornerRadius"),o.aBorderColor=n.getAttribLocation(o,"aBorderColor"),o.uPanZoomMatrix=n.getUniformLocation(o,"uPanZoomMatrix"),o.uAtlasSize=n.getUniformLocation(o,"uAtlasSize"),o.uBGColor=n.getUniformLocation(o,"uBGColor"),o.uZoom=n.getUniformLocation(o,"uZoom"),o.uTextures=[];for(var l=0;l<this.batchManager.getMaxAtlasesPerBatch();l++)o.uTextures.push(n.getUniformLocation(o,"uTexture".concat(l)));return o}},{key:"_createVAO",value:function(){var u=[0,0,1,0,1,1,0,0,1,1,0,1];this.vertexCount=u.length/2;var n=this.maxInstances,r=this.gl,t=this.program,i=r.createVertexArray();return r.bindVertexArray(i),HHe(r,"vec2",t.aPosition,u),this.transformBuffer=kHe(r,n,t.aTransform),this.indexBuffer=Mo(r,n,"vec4",t.aIndex),this.vertTypeBuffer=Mo(r,n,"int",t.aVertType),this.atlasIdBuffer=Mo(r,n,"int",t.aAtlasId),this.texBuffer=Mo(r,n,"vec4",t.aTex),this.pointAPointBBuffer=Mo(r,n,"vec4",t.aPointAPointB),this.pointCPointDBuffer=Mo(r,n,"vec4",t.aPointCPointD),this.lineWidthBuffer=Mo(r,n,"vec2",t.aLineWidth),this.colorBuffer=Mo(r,n,"vec4",t.aColor),this.cornerRadiusBuffer=Mo(r,n,"vec4",t.aCornerRadius),this.borderColorBuffer=Mo(r,n,"vec4",t.aBorderColor),r.bindVertexArray(null),i}},{key:"buffers",get:function(){var u=this;return this._buffers||(this._buffers=Object.keys(this).filter(function(n){return rl(n,"Buffer")}).map(function(n){return u[n]})),this._buffers}},{key:"startFrame",value:function(u){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:i4.SCREEN;this.panZoomMatrix=u,this.renderTarget=n,this.batchDebugInfo=[],this.wrappedCount=0,this.simpleCount=0,this.startBatch()}},{key:"startBatch",value:function(){this.instanceCount=0,this.batchManager.startBatch()}},{key:"endFrame",value:function(){this.endBatch()}},{key:"_isVisible",value:function(u,n){return u.visible()?n&&n.isVisible?n.isVisible(u):!0:!1}},{key:"drawTexture",value:function(u,n,r){var t=this.atlasManager,i=this.batchManager,o=t.getRenderTypeOpts(r);if(this._isVisible(u,o)&&!(u.isEdge()&&!this._isValidEdge(u))){if(this.renderTarget.picking&&o.getTexPickingMode){var l=o.getTexPickingMode(u);if(l===UF.IGNORE)return;if(l==UF.USE_BB){this.drawPickingRectangle(u,n,r);return}}var s=t.getAtlasInfo(u,r),c=yi(s),d;try{for(c.s();!(d=c.n()).done;){var f=d.value,p=f.atlas,h=f.tex1,g=f.tex2;i.canAddToCurrentBatch(p)||this.endBatch();for(var v=i.getAtlasIndexForBatch(p),m=0,T=[[h,!0],[g,!1]];m<T.length;m++){var w=zn(T[m],2),E=w[0],S=w[1];if(E.w!=0){var N=this.instanceCount;this.vertTypeBuffer.getView(N)[0]=BL;var j=this.indexBuffer.getView(N);Rg(n,j);var q=this.atlasIdBuffer.getView(N);q[0]=v;var O=this.texBuffer.getView(N);O[0]=E.x,O[1]=E.y,O[2]=E.w,O[3]=E.h;var I=this.transformBuffer.getMatrixView(N);this.setTransformMatrix(u,I,o,f,S),this.instanceCount++,S||this.wrappedCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}catch(A){c.e(A)}finally{c.f()}}}},{key:"setTransformMatrix",value:function(u,n,r,t){var i=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!0,o=0;if(r.shapeProps&&r.shapeProps.padding&&(o=u.pstyle(r.shapeProps.padding).pfValue),t){var l=t.bb,s=t.tex1,c=t.tex2,d=s.w/(s.w+c.w);i||(d=1-d);var f=this._getAdjustedBB(l,o,i,d);this._applyTransformMatrix(n,f,r,u)}else{var p=r.getBoundingBox(u),h=this._getAdjustedBB(p,o,!0,1);this._applyTransformMatrix(n,h,r,u)}}},{key:"_applyTransformMatrix",value:function(u,n,r,t){var i,o;ive(u);var l=r.getRotation?r.getRotation(t):0;if(l!==0){var s=r.getRotationPoint(t),c=s.x,d=s.y;bF(u,u,[c,d]),uve(u,u,l);var f=r.getRotationOffset(t);i=f.x+(n.xOffset||0),o=f.y+(n.yOffset||0)}else i=n.x1,o=n.y1;bF(u,u,[i,o]),P7(u,u,[n.w,n.h])}},{key:"_getAdjustedBB",value:function(u,n,r,t){var i=u.x1,o=u.y1,l=u.w,s=u.h,c=u.yOffset;n&&(i-=n,o-=n,l+=2*n,s+=2*n);var d=0,f=l*t;return r&&t<1?l=f:!r&&t<1&&(d=l-f,i+=d,l=f),{x1:i,y1:o,w:l,h:s,xOffset:d,yOffset:c}}},{key:"drawPickingRectangle",value:function(u,n,r){var t=this.atlasManager.getRenderTypeOpts(r),i=this.instanceCount;this.vertTypeBuffer.getView(i)[0]=Ng;var o=this.indexBuffer.getView(i);Rg(n,o);var l=this.colorBuffer.getView(i);Vm([0,0,0],1,l);var s=this.transformBuffer.getMatrixView(i);this.setTransformMatrix(u,s,t),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}},{key:"drawNode",value:function(u,n,r){var t=this.simpleShapeOptions.get(r);if(this._isVisible(u,t)){var i=t.shapeProps,o=this._getVertTypeForShape(u,i.shape);if(o===void 0||t.isSimple&&!t.isSimple(u)){this.drawTexture(u,n,r);return}var l=this.instanceCount;if(this.vertTypeBuffer.getView(l)[0]=o,o===HD||o===D6){var s=t.getBoundingBox(u),c=this._getCornerRadius(u,i.radius,s),d=this.cornerRadiusBuffer.getView(l);d[0]=c,d[1]=c,d[2]=c,d[3]=c,o===D6&&(d[0]=0,d[2]=0)}var f=this.indexBuffer.getView(l);Rg(n,f);var p=u.pstyle(i.color).value,h=u.pstyle(i.opacity).value,g=this.colorBuffer.getView(l);Vm(p,h,g);var v=this.lineWidthBuffer.getView(l);if(v[0]=0,v[1]=0,i.border){var m=u.pstyle("border-width").value;if(m>0){var T=u.pstyle("border-color").value,w=u.pstyle("border-opacity").value,E=this.borderColorBuffer.getView(l);Vm(T,w,E);var S=u.pstyle("border-position").value;if(S==="inside")v[0]=0,v[1]=-m;else if(S==="outside")v[0]=m,v[1]=0;else{var N=m/2;v[0]=N,v[1]=-N}}}var j=this.transformBuffer.getMatrixView(l);this.setTransformMatrix(u,j,t),this.simpleCount++,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}},{key:"_getVertTypeForShape",value:function(u,n){var r=u.pstyle(n).value;switch(r){case"rectangle":return Ng;case"ellipse":return F6;case"roundrectangle":case"round-rectangle":return HD;case"bottom-round-rectangle":return D6;default:return}}},{key:"_getCornerRadius",value:function(u,n,r){var t=r.w,i=r.h;if(u.pstyle(n).value==="auto")return pl(t,i);var o=u.pstyle(n).pfValue,l=t/2,s=i/2;return Math.min(o,s,l)}},{key:"drawEdgeArrow",value:function(u,n,r){if(u.visible()){var t=u._private.rscratch,i,o,l;if(r==="source"?(i=t.arrowStartX,o=t.arrowStartY,l=t.srcArrowAngle):(i=t.arrowEndX,o=t.arrowEndY,l=t.tgtArrowAngle),!(isNaN(i)||i==null||isNaN(o)||o==null||isNaN(l)||l==null)){var s=u.pstyle(r+"-arrow-shape").value;if(s!=="none"){var c=u.pstyle(r+"-arrow-color").value,d=u.pstyle("opacity").value,f=u.pstyle("line-opacity").value,p=d*f,h=u.pstyle("width").pfValue,g=u.pstyle("arrow-scale").value,v=this.r.getArrowWidth(h,g),m=this.instanceCount,T=this.transformBuffer.getMatrixView(m);ive(T),bF(T,T,[i,o]),P7(T,T,[v,v]),uve(T,T,l),this.vertTypeBuffer.getView(m)[0]=UL;var w=this.indexBuffer.getView(m);Rg(n,w);var E=this.colorBuffer.getView(m);Vm(c,p,E),this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"drawEdgeLine",value:function(u,n){if(u.visible()){var r=this._getEdgePoints(u);if(r){var t=u.pstyle("opacity").value,i=u.pstyle("line-opacity").value,o=u.pstyle("width").pfValue,l=u.pstyle("line-color").value,s=t*i;if(r.length/2+this.instanceCount>this.maxInstances&&this.endBatch(),r.length==4){var c=this.instanceCount;this.vertTypeBuffer.getView(c)[0]=ove;var d=this.indexBuffer.getView(c);Rg(n,d);var f=this.colorBuffer.getView(c);Vm(l,s,f);var p=this.lineWidthBuffer.getView(c);p[0]=o;var h=this.pointAPointBBuffer.getView(c);h[0]=r[0],h[1]=r[1],h[2]=r[2],h[3]=r[3],this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}else for(var g=0;g<r.length-2;g+=2){var v=this.instanceCount;this.vertTypeBuffer.getView(v)[0]=sve;var m=this.indexBuffer.getView(v);Rg(n,m);var T=this.colorBuffer.getView(v);Vm(l,s,T);var w=this.lineWidthBuffer.getView(v);w[0]=o;var E=r[g-2],S=r[g-1],N=r[g],j=r[g+1],q=r[g+2],O=r[g+3],I=r[g+4],A=r[g+5];g==0&&(E=2*N-q+.001,S=2*j-O+.001),g==r.length-4&&(I=2*q-N+.001,A=2*O-j+.001);var P=this.pointAPointBBuffer.getView(v);P[0]=E,P[1]=S,P[2]=N,P[3]=j;var C=this.pointCPointDBuffer.getView(v);C[0]=q,C[1]=O,C[2]=I,C[3]=A,this.instanceCount++,this.instanceCount>=this.maxInstances&&this.endBatch()}}}}},{key:"_isValidEdge",value:function(u){var n=u._private.rscratch;return!(n.badLine||n.allpts==null||isNaN(n.allpts[0]))}},{key:"_getEdgePoints",value:function(u){var n=u._private.rscratch;if(this._isValidEdge(u)){var r=n.allpts;if(r.length==4)return r;var t=this._getNumSegments(u);return this._getCurveSegmentPoints(r,t)}}},{key:"_getNumSegments",value:function(u){var n=15;return Math.min(Math.max(n,5),this.maxInstances)}},{key:"_getCurveSegmentPoints",value:function(u,n){if(u.length==4)return u;for(var r=Array((n+1)*2),t=0;t<=n;t++)if(t==0)r[0]=u[0],r[1]=u[1];else if(t==n)r[t*2]=u[u.length-2],r[t*2+1]=u[u.length-1];else{var i=t/n;this._setCurvePoint(u,i,r,t*2)}return r}},{key:"_setCurvePoint",value:function(u,n,r,t){if(u.length<=2)r[t]=u[0],r[t+1]=u[1];else{for(var i=Array(u.length-2),o=0;o<i.length;o+=2){var l=(1-n)*u[o]+n*u[o+2],s=(1-n)*u[o+1]+n*u[o+3];i[o]=l,i[o+1]=s}return this._setCurvePoint(i,n,r,t)}}},{key:"endBatch",value:function(){var u=this.gl,n=this.vao,r=this.vertexCount,t=this.instanceCount;if(t!==0){var i=this.renderTarget.picking?this.pickingProgram:this.program;u.useProgram(i),u.bindVertexArray(n);var o=yi(this.buffers),l;try{for(o.s();!(l=o.n()).done;){var s=l.value;s.bufferSubData(t)}}catch(h){o.e(h)}finally{o.f()}for(var c=this.batchManager.getAtlases(),d=0;d<c.length;d++)c[d].bufferIfNeeded(u);for(var f=0;f<c.length;f++)u.activeTexture(u.TEXTURE0+f),u.bindTexture(u.TEXTURE_2D,c[f].texture),u.uniform1i(i.uTextures[f],f);u.uniform1f(i.uZoom,CHe(this.r)),u.uniformMatrix3fv(i.uPanZoomMatrix,!1,this.panZoomMatrix),u.uniform1i(i.uAtlasSize,this.batchManager.getAtlasSize());var p=Vm(this.bgColor,1);u.uniform4fv(i.uBGColor,p),u.drawArraysInstanced(u.TRIANGLES,0,r,t),u.bindVertexArray(null),u.bindTexture(u.TEXTURE_2D,null),this.debug&&this.batchDebugInfo.push({count:t,atlasCount:c.length}),this.startBatch()}}},{key:"getDebugInfo",value:function(){var u=this.atlasManager.getDebugInfo(),n=u.reduce(function(i,o){return i+o.atlasCount},0),r=this.batchDebugInfo,t=r.reduce(function(i,o){return i+o.count},0);return{atlasInfo:u,totalAtlases:n,wrappedCount:this.wrappedCount,simpleCount:this.simpleCount,batchCount:r.length,batchInfo:r,totalInstances:t}}}])})(),lEe={};lEe.initWebgl=function(a,e){var u=this,n=u.data.contexts[u.WEBGL];a.bgColor=ake(u),a.webglTexSize=Math.min(a.webglTexSize,n.getParameter(n.MAX_TEXTURE_SIZE)),a.webglTexRows=Math.min(a.webglTexRows,54),a.webglTexRowsNodes=Math.min(a.webglTexRowsNodes,54),a.webglBatchSize=Math.min(a.webglBatchSize,16384),a.webglTexPerBatch=Math.min(a.webglTexPerBatch,n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS)),u.webglDebug=a.webglDebug,u.webglDebugShowAtlases=a.webglDebugShowAtlases,u.pickingFrameBuffer=zHe(n),u.pickingFrameBuffer.needsDraw=!0,u.drawing=new nke(u,n,a);var r=function(d){return function(f){return u.getTextAngle(f,d)}},t=function(d){return function(f){var p=f.pstyle(d);return p&&p.value}},i=function(d){return function(f){return f.pstyle("".concat(d,"-opacity")).value>0}},o=function(d){var f=d.pstyle("text-events").strValue==="yes";return f?UF.USE_BB:UF.IGNORE},l=function(d){var f=d.position(),p=f.x,h=f.y,g=d.outerWidth(),v=d.outerHeight();return{w:g,h:v,x1:p-g/2,y1:h-v/2}};u.drawing.addAtlasCollection("node",{texRows:a.webglTexRowsNodes}),u.drawing.addAtlasCollection("label",{texRows:a.webglTexRows}),u.drawing.addTextureAtlasRenderType("node-body",{collection:"node",getKey:e.getStyleKey,getBoundingBox:e.getElementBox,drawElement:e.drawElement}),u.drawing.addSimpleShapeRenderType("node-body",{getBoundingBox:l,isSimple:qHe,shapeProps:{shape:"shape",color:"background-color",opacity:"background-opacity",radius:"corner-radius",border:!0}}),u.drawing.addSimpleShapeRenderType("node-overlay",{getBoundingBox:l,isVisible:i("overlay"),shapeProps:{shape:"overlay-shape",color:"overlay-color",opacity:"overlay-opacity",padding:"overlay-padding",radius:"overlay-corner-radius"}}),u.drawing.addSimpleShapeRenderType("node-underlay",{getBoundingBox:l,isVisible:i("underlay"),shapeProps:{shape:"underlay-shape",color:"underlay-color",opacity:"underlay-opacity",padding:"underlay-padding",radius:"underlay-corner-radius"}}),u.drawing.addTextureAtlasRenderType("label",{collection:"label",getTexPickingMode:o,getKey:QL(e.getLabelKey,null),getBoundingBox:VL(e.getLabelBox,null),drawClipped:!0,drawElement:e.drawLabel,getRotation:r(null),getRotationPoint:e.getLabelRotationPoint,getRotationOffset:e.getLabelRotationOffset,isVisible:t("label")}),u.drawing.addTextureAtlasRenderType("edge-source-label",{collection:"label",getTexPickingMode:o,getKey:QL(e.getSourceLabelKey,"source"),getBoundingBox:VL(e.getSourceLabelBox,"source"),drawClipped:!0,drawElement:e.drawSourceLabel,getRotation:r("source"),getRotationPoint:e.getSourceLabelRotationPoint,getRotationOffset:e.getSourceLabelRotationOffset,isVisible:t("source-label")}),u.drawing.addTextureAtlasRenderType("edge-target-label",{collection:"label",getTexPickingMode:o,getKey:QL(e.getTargetLabelKey,"target"),getBoundingBox:VL(e.getTargetLabelBox,"target"),drawClipped:!0,drawElement:e.drawTargetLabel,getRotation:r("target"),getRotationPoint:e.getTargetLabelRotationPoint,getRotationOffset:e.getTargetLabelRotationOffset,isVisible:t("target-label")});var s=fN(function(){console.log("garbage collect flag set"),u.data.gc=!0},1e4);u.onUpdateEleCalcs(function(c,d){var f=!1;d&&d.length>0&&(f|=u.drawing.invalidate(d)),f&&s()}),ike(u)};function ake(a){var e=a.cy.container(),u=e&&e.style&&e.style.backgroundColor||"white";return qwe(u)}function dEe(a,e){var u=a._private.rscratch;return pi(u,"labelWrapCachedLines",e)||[]}var QL=function(e,u){return function(n){var r=e(n),t=dEe(n,u);return t.length>1?t.map(function(i,o){return"".concat(r,"_").concat(o)}):r}},VL=function(e,u){return function(n,r){var t=e(n);if(typeof r=="string"){var i=r.indexOf("_");if(i>0){var o=Number(r.substring(i+1)),l=dEe(n,u),s=t.h/l.length,c=s*o,d=t.y1+c;return{x1:t.x1,w:t.w,y1:d,h:s,yOffset:c}}}return t}};function ike(a){{var e=a.render;a.render=function(t){t=t||{};var i=a.cy;a.webgl&&(i.zoom()>nEe?(uke(a),e.call(a,t)):(oke(a),pEe(a,t,i4.SCREEN)))}}{var u=a.matchCanvasSize;a.matchCanvasSize=function(t){u.call(a,t),a.pickingFrameBuffer.setFramebufferAttachmentSizes(a.canvasWidth,a.canvasHeight),a.pickingFrameBuffer.needsDraw=!0}}a.findNearestElements=function(t,i,o,l){return pke(a,t,i)};{var n=a.invalidateCachedZSortedEles;a.invalidateCachedZSortedEles=function(){n.call(a),a.pickingFrameBuffer.needsDraw=!0}}{var r=a.notify;a.notify=function(t,i){r.call(a,t,i),t==="viewport"||t==="bounds"?a.pickingFrameBuffer.needsDraw=!0:t==="background"&&a.drawing.invalidate(i,{type:"node-body"})}}}function uke(a){var e=a.data.contexts[a.WEBGL];e.clear(e.COLOR_BUFFER_BIT|e.DEPTH_BUFFER_BIT)}function oke(a){var e=function(n){n.save(),n.setTransform(1,0,0,1,0,0),n.clearRect(0,0,a.canvasWidth,a.canvasHeight),n.restore()};e(a.data.contexts[a.NODE]),e(a.data.contexts[a.DRAG])}function ske(a){var e=a.canvasWidth,u=a.canvasHeight,n=uk(a),r=n.pan,t=n.zoom,i=qL();bF(i,i,[r.x,r.y]),P7(i,i,[t,t]);var o=qL();$He(o,e,u);var l=qL();return GHe(l,o,i),l}function fEe(a,e){var u=a.canvasWidth,n=a.canvasHeight,r=uk(a),t=r.pan,i=r.zoom;e.setTransform(1,0,0,1,0,0),e.clearRect(0,0,u,n),e.translate(t.x,t.y),e.scale(i,i)}function cke(a,e){a.drawSelectionRectangle(e,function(u){return fEe(a,u)})}function lke(a){var e=a.data.contexts[a.NODE];e.save(),fEe(a,e),e.strokeStyle="rgba(0, 0, 0, 0.3)",e.beginPath(),e.moveTo(-1e3,0),e.lineTo(1e3,0),e.stroke(),e.beginPath(),e.moveTo(0,-1e3),e.lineTo(0,1e3),e.stroke(),e.restore()}function dke(a){var e=function(r,t,i){for(var o=r.atlasManager.getAtlasCollection(t),l=a.data.contexts[a.NODE],s=o.atlases,c=0;c<s.length;c++){var d=s[c],f=d.canvas;if(f){var p=f.width,h=f.height,g=p*c,v=f.height*i,m=.4;l.save(),l.scale(m,m),l.drawImage(f,g,v),l.strokeStyle="black",l.rect(g,v,p,h),l.stroke(),l.restore()}}},u=0;e(a.drawing,"node",u++),e(a.drawing,"label",u++)}function fke(a,e,u,n,r){var t,i,o,l,s=uk(a),c=s.pan,d=s.zoom;{var f=LHe(a,c,d,e,u),p=zn(f,2),h=p[0],g=p[1],v=6;t=h-v/2,i=g-v/2,o=v,l=v}if(o===0||l===0)return[];var m=a.data.contexts[a.WEBGL];m.bindFramebuffer(m.FRAMEBUFFER,a.pickingFrameBuffer),a.pickingFrameBuffer.needsDraw&&(m.viewport(0,0,m.canvas.width,m.canvas.height),pEe(a,null,i4.PICKING),a.pickingFrameBuffer.needsDraw=!1);var T=o*l,w=new Uint8Array(T*4);m.readPixels(t,i,o,l,m.RGBA,m.UNSIGNED_BYTE,w),m.bindFramebuffer(m.FRAMEBUFFER,null);for(var E=new Set,S=0;S<T;S++){var N=w.slice(S*4,S*4+4),j=UHe(N)-1;j>=0&&E.add(j)}return E}function pke(a,e,u){var n=fke(a,e,u),r=a.getCachedZSortedEles(),t,i,o=yi(n),l;try{for(o.s();!(l=o.n()).done;){var s=l.value,c=r[s];if(!t&&c.isNode()&&(t=c),!i&&c.isEdge()&&(i=c),t&&i)break}}catch(d){o.e(d)}finally{o.f()}return[t,i].filter(Boolean)}function HL(a,e,u){var n=a.drawing;e+=1,u.isNode()?(n.drawNode(u,e,"node-underlay"),n.drawNode(u,e,"node-body"),n.drawTexture(u,e,"label"),n.drawNode(u,e,"node-overlay")):(n.drawEdgeLine(u,e),n.drawEdgeArrow(u,e,"source"),n.drawEdgeArrow(u,e,"target"),n.drawTexture(u,e,"label"),n.drawTexture(u,e,"edge-source-label"),n.drawTexture(u,e,"edge-target-label"))}function pEe(a,e,u){var n;a.webglDebug&&(n=performance.now());var r=a.drawing,t=0;if(u.screen&&a.data.canvasNeedsRedraw[a.SELECT_BOX]&&cke(a,e),a.data.canvasNeedsRedraw[a.NODE]||u.picking){var i=a.data.contexts[a.WEBGL];u.screen?(i.clearColor(0,0,0,0),i.enable(i.BLEND),i.blendFunc(i.ONE,i.ONE_MINUS_SRC_ALPHA)):i.disable(i.BLEND),i.clear(i.COLOR_BUFFER_BIT|i.DEPTH_BUFFER_BIT),i.viewport(0,0,i.canvas.width,i.canvas.height);var o=ske(a),l=a.getCachedZSortedEles();if(t=l.length,r.startFrame(o,u),u.screen){for(var s=0;s<l.nondrag.length;s++)HL(a,s,l.nondrag[s]);for(var c=0;c<l.drag.length;c++)HL(a,c,l.drag[c])}else if(u.picking)for(var d=0;d<l.length;d++)HL(a,d,l[d]);r.endFrame(),u.screen&&a.webglDebugShowAtlases&&(lke(a),dke(a)),a.data.canvasNeedsRedraw[a.NODE]=!1,a.data.canvasNeedsRedraw[a.DRAG]=!1}if(a.webglDebug){var f=performance.now(),p=!1,h=Math.ceil(f-n),g=r.getDebugInfo(),v=["".concat(t," elements"),"".concat(g.totalInstances," instances"),"".concat(g.batchCount," batches"),"".concat(g.totalAtlases," atlases"),"".concat(g.wrappedCount," wrapped textures"),"".concat(g.simpleCount," simple shapes")].join(", ");if(p)console.log("WebGL (".concat(u.name,") - time ").concat(h,"ms, ").concat(v));else{console.log("WebGL (".concat(u.name,") - frame time ").concat(h,"ms")),console.log("Totals:"),console.log("  ".concat(v)),console.log("Texture Atlases Used:");var m=g.atlasInfo,T=yi(m),w;try{for(T.s();!(w=T.n()).done;){var E=w.value;console.log("  ".concat(E.type,": ").concat(E.keyCount," keys, ").concat(E.atlasCount," atlases"))}}catch(S){T.e(S)}finally{T.f()}console.log("")}}a.data.gc&&(console.log("Garbage Collect!"),a.data.gc=!1,r.gc())}var Nl={};Nl.drawPolygonPath=function(a,e,u,n,r,t){var i=n/2,o=r/2;a.beginPath&&a.beginPath(),a.moveTo(e+i*t[0],u+o*t[1]);for(var l=1;l<t.length/2;l++)a.lineTo(e+i*t[l*2],u+o*t[l*2+1]);a.closePath()};Nl.drawRoundPolygonPath=function(a,e,u,n,r,t,i){i.forEach(function(o){return XSe(a,o)}),a.closePath()};Nl.drawRoundRectanglePath=function(a,e,u,n,r,t){var i=n/2,o=r/2,l=t==="auto"?pl(n,r):Math.min(t,o,i);a.beginPath&&a.beginPath(),a.moveTo(e,u-o),a.arcTo(e+i,u-o,e+i,u,l),a.arcTo(e+i,u+o,e,u+o,l),a.arcTo(e-i,u+o,e-i,u,l),a.arcTo(e-i,u-o,e,u-o,l),a.lineTo(e,u-o),a.closePath()};Nl.drawBottomRoundRectanglePath=function(a,e,u,n,r,t){var i=n/2,o=r/2,l=t==="auto"?pl(n,r):t;a.beginPath&&a.beginPath(),a.moveTo(e,u-o),a.lineTo(e+i,u-o),a.lineTo(e+i,u),a.arcTo(e+i,u+o,e,u+o,l),a.arcTo(e-i,u+o,e-i,u,l),a.lineTo(e-i,u-o),a.lineTo(e,u-o),a.closePath()};Nl.drawCutRectanglePath=function(a,e,u,n,r,t,i){var o=n/2,l=r/2,s=i==="auto"?GH():i;a.beginPath&&a.beginPath(),a.moveTo(e-o+s,u-l),a.lineTo(e+o-s,u-l),a.lineTo(e+o,u-l+s),a.lineTo(e+o,u+l-s),a.lineTo(e+o-s,u+l),a.lineTo(e-o+s,u+l),a.lineTo(e-o,u+l-s),a.lineTo(e-o,u-l+s),a.closePath()};Nl.drawBarrelPath=function(a,e,u,n,r){var t=n/2,i=r/2,o=e-t,l=e+t,s=u-i,c=u+i,d=v7(n,r),f=d.widthOffset,p=d.heightOffset,h=d.ctrlPtOffsetPct*f;a.beginPath&&a.beginPath(),a.moveTo(o,s+p),a.lineTo(o,c-p),a.quadraticCurveTo(o+h,c,o+f,c),a.lineTo(l-f,c),a.quadraticCurveTo(l-h,c,l,c-p),a.lineTo(l,s+p),a.quadraticCurveTo(l-h,s,l-f,s),a.lineTo(o+f,s),a.quadraticCurveTo(o+h,s,o,s+p),a.closePath()};var cve=Math.sin(0),lve=Math.cos(0),j7={},M7={},hEe=Math.PI/40;for(var Ig=0*Math.PI;Ig<2*Math.PI;Ig+=hEe)j7[Ig]=Math.sin(Ig),M7[Ig]=Math.cos(Ig);Nl.drawEllipsePath=function(a,e,u,n,r){if(a.beginPath&&a.beginPath(),a.ellipse)a.ellipse(e,u,n/2,r/2,0,0,2*Math.PI);else for(var t,i,o=n/2,l=r/2,s=0*Math.PI;s<2*Math.PI;s+=hEe)t=e-o*j7[s]*cve+o*M7[s]*lve,i=u+l*M7[s]*cve+l*j7[s]*lve,s===0?a.moveTo(t,i):a.lineTo(t,i);a.closePath()};var gN={};gN.createBuffer=function(a,e){var u=document.createElement("canvas");return u.width=a,u.height=e,[u,u.getContext("2d")]};gN.bufferCanvasImage=function(a){var e=this.cy,u=e.mutableElements(),n=u.boundingBox(),r=this.findContainerClientCoords(),t=a.full?Math.ceil(n.w):r[2],i=a.full?Math.ceil(n.h):r[3],o=At(a.maxWidth)||At(a.maxHeight),l=this.getPixelRatio(),s=1;if(a.scale!==void 0)t*=a.scale,i*=a.scale,s=a.scale;else if(o){var c=1/0,d=1/0;At(a.maxWidth)&&(c=s*a.maxWidth/t),At(a.maxHeight)&&(d=s*a.maxHeight/i),s=Math.min(c,d),t*=s,i*=s}o||(t*=l,i*=l,s*=l);var f=document.createElement("canvas");f.width=t,f.height=i,f.style.width=t+"px",f.style.height=i+"px";var p=f.getContext("2d");if(t>0&&i>0){p.clearRect(0,0,t,i),p.globalCompositeOperation="source-over";var h=this.getCachedZSortedEles();if(a.full)p.translate(-n.x1*s,-n.y1*s),p.scale(s,s),this.drawElements(p,h),p.scale(1/s,1/s),p.translate(n.x1*s,n.y1*s);else{var g=e.pan(),v={x:g.x*s,y:g.y*s};s*=e.zoom(),p.translate(v.x,v.y),p.scale(s,s),this.drawElements(p,h),p.scale(1/s,1/s),p.translate(-v.x,-v.y)}a.bg&&(p.globalCompositeOperation="destination-over",p.fillStyle=a.bg,p.rect(0,0,t,i),p.fill())}return f};function hke(a,e){for(var u=atob(a),n=new ArrayBuffer(u.length),r=new Uint8Array(n),t=0;t<u.length;t++)r[t]=u.charCodeAt(t);return new Blob([n],{type:e})}function dve(a){var e=a.indexOf(",");return a.substr(e+1)}function yEe(a,e,u){var n=function(){return e.toDataURL(u,a.quality)};switch(a.output){case"blob-promise":return new R1(function(r,t){try{e.toBlob(function(i){i!=null?r(i):t(new Error("`canvas.toBlob()` sent a null value in its callback"))},u,a.quality)}catch(i){t(i)}});case"blob":return hke(dve(n()),u);case"base64":return dve(n());default:return n()}}gN.png=function(a){return yEe(a,this.bufferCanvasImage(a),"image/png")};gN.jpg=function(a){return yEe(a,this.bufferCanvasImage(a),"image/jpeg")};var mEe={};mEe.nodeShapeImpl=function(a,e,u,n,r,t,i,o){switch(a){case"ellipse":return this.drawEllipsePath(e,u,n,r,t);case"polygon":return this.drawPolygonPath(e,u,n,r,t,i);case"round-polygon":return this.drawRoundPolygonPath(e,u,n,r,t,i,o);case"roundrectangle":case"round-rectangle":return this.drawRoundRectanglePath(e,u,n,r,t,o);case"cutrectangle":case"cut-rectangle":return this.drawCutRectanglePath(e,u,n,r,t,i,o);case"bottomroundrectangle":case"bottom-round-rectangle":return this.drawBottomRoundRectanglePath(e,u,n,r,t,o);case"barrel":return this.drawBarrelPath(e,u,n,r,t)}};var yke=bEe,er=bEe.prototype;er.CANVAS_LAYERS=3;er.SELECT_BOX=0;er.DRAG=1;er.NODE=2;er.WEBGL=3;er.CANVAS_TYPES=["2d","2d","2d","webgl2"];er.BUFFER_COUNT=3;er.TEXTURE_BUFFER=0;er.MOTIONBLUR_BUFFER_NODE=1;er.MOTIONBLUR_BUFFER_DRAG=2;function bEe(a){var e=this,u=e.cy.window(),n=u.document;a.webgl&&(er.CANVAS_LAYERS=e.CANVAS_LAYERS=4,console.log("webgl rendering enabled")),e.data={canvases:new Array(er.CANVAS_LAYERS),contexts:new Array(er.CANVAS_LAYERS),canvasNeedsRedraw:new Array(er.CANVAS_LAYERS),bufferCanvases:new Array(er.BUFFER_COUNT),bufferContexts:new Array(er.CANVAS_LAYERS)};var r="-webkit-tap-highlight-color",t="rgba(0,0,0,0)";e.data.canvasContainer=n.createElement("div");var i=e.data.canvasContainer.style;e.data.canvasContainer.style[r]=t,i.position="relative",i.zIndex="0",i.overflow="hidden";var o=a.cy.container();o.appendChild(e.data.canvasContainer),o.style[r]=t;var l={"-webkit-user-select":"none","-moz-user-select":"-moz-none","user-select":"none","-webkit-tap-highlight-color":"rgba(0,0,0,0)","outline-style":"none"};cqe()&&(l["-ms-touch-action"]="none",l["touch-action"]="none");for(var s=0;s<er.CANVAS_LAYERS;s++){var c=e.data.canvases[s]=n.createElement("canvas"),d=er.CANVAS_TYPES[s];e.data.contexts[s]=c.getContext(d),e.data.contexts[s]||_n("Could not create canvas of type "+d),Object.keys(l).forEach(function(be){c.style[be]=l[be]}),c.style.position="absolute",c.setAttribute("data-id","layer"+s),c.style.zIndex=String(er.CANVAS_LAYERS-s),e.data.canvasContainer.appendChild(c),e.data.canvasNeedsRedraw[s]=!1}e.data.topCanvas=e.data.canvases[0],e.data.canvases[er.NODE].setAttribute("data-id","layer"+er.NODE+"-node"),e.data.canvases[er.SELECT_BOX].setAttribute("data-id","layer"+er.SELECT_BOX+"-selectbox"),e.data.canvases[er.DRAG].setAttribute("data-id","layer"+er.DRAG+"-drag"),e.data.canvases[er.WEBGL]&&e.data.canvases[er.WEBGL].setAttribute("data-id","layer"+er.WEBGL+"-webgl");for(var s=0;s<er.BUFFER_COUNT;s++)e.data.bufferCanvases[s]=n.createElement("canvas"),e.data.bufferContexts[s]=e.data.bufferCanvases[s].getContext("2d"),e.data.bufferCanvases[s].style.position="absolute",e.data.bufferCanvases[s].setAttribute("data-id","buffer"+s),e.data.bufferCanvases[s].style.zIndex=String(-s-1),e.data.bufferCanvases[s].style.visibility="hidden";e.pathsEnabled=!0;var f=ei(),p=function(ee){return{x:(ee.x1+ee.x2)/2,y:(ee.y1+ee.y2)/2}},h=function(ee){return{x:-ee.w/2,y:-ee.h/2}},g=function(ee){var _=ee[0]._private,F=_.oldBackgroundTimestamp===_.backgroundTimestamp;return!F},v=function(ee){return ee[0]._private.nodeKey},m=function(ee){return ee[0]._private.labelStyleKey},T=function(ee){return ee[0]._private.sourceLabelStyleKey},w=function(ee){return ee[0]._private.targetLabelStyleKey},E=function(ee,_,F,D,L){return e.drawElement(ee,_,F,!1,!1,L)},S=function(ee,_,F,D,L){return e.drawElementText(ee,_,F,D,"main",L)},N=function(ee,_,F,D,L){return e.drawElementText(ee,_,F,D,"source",L)},j=function(ee,_,F,D,L){return e.drawElementText(ee,_,F,D,"target",L)},q=function(ee){return ee.boundingBox(),ee[0]._private.bodyBounds},O=function(ee){return ee.boundingBox(),ee[0]._private.labelBounds.main||f},I=function(ee){return ee.boundingBox(),ee[0]._private.labelBounds.source||f},A=function(ee){return ee.boundingBox(),ee[0]._private.labelBounds.target||f},P=function(ee,_){return _},C=function(ee){return p(q(ee))},B=function(ee,_,F){var D=ee?ee+"-":"";return{x:_.x+F.pstyle(D+"text-margin-x").pfValue,y:_.y+F.pstyle(D+"text-margin-y").pfValue}},H=function(ee,_,F){var D=ee[0]._private.rscratch;return{x:D[_],y:D[F]}},V=function(ee){return B("",H(ee,"labelX","labelY"),ee)},G=function(ee){return B("source",H(ee,"sourceLabelX","sourceLabelY"),ee)},Z=function(ee){return B("target",H(ee,"targetLabelX","targetLabelY"),ee)},ae=function(ee){return h(q(ee))},W=function(ee){return h(I(ee))},te=function(ee){return h(A(ee))},se=function(ee){var _=O(ee),F=h(O(ee));if(ee.isNode()){switch(ee.pstyle("text-halign").value){case"left":F.x=-_.w-(_.leftPad||0);break;case"right":F.x=-(_.rightPad||0);break}switch(ee.pstyle("text-valign").value){case"top":F.y=-_.h-(_.topPad||0);break;case"bottom":F.y=-(_.botPad||0);break}}return F},pe=e.data.eleTxrCache=new Z6(e,{getKey:v,doesEleInvalidateKey:g,drawElement:E,getBoundingBox:q,getRotationPoint:C,getRotationOffset:ae,allowEdgeTxrCaching:!1,allowParentTxrCaching:!1}),le=e.data.lblTxrCache=new Z6(e,{getKey:m,drawElement:S,getBoundingBox:O,getRotationPoint:V,getRotationOffset:se,isVisible:P}),Ee=e.data.slbTxrCache=new Z6(e,{getKey:T,drawElement:N,getBoundingBox:I,getRotationPoint:G,getRotationOffset:W,isVisible:P}),Oe=e.data.tlbTxrCache=new Z6(e,{getKey:w,drawElement:j,getBoundingBox:A,getRotationPoint:Z,getRotationOffset:te,isVisible:P}),Ie=e.data.lyrTxrCache=new aEe(e);e.onUpdateEleCalcs(function(ee,_){pe.invalidateElements(_),le.invalidateElements(_),Ee.invalidateElements(_),Oe.invalidateElements(_),Ie.invalidateElements(_);for(var F=0;F<_.length;F++){var D=_[F]._private;D.oldBackgroundTimestamp=D.backgroundTimestamp}});var Ae=function(ee){for(var _=0;_<ee.length;_++)Ie.enqueueElementRefinement(ee[_].ele)};pe.onDequeue(Ae),le.onDequeue(Ae),Ee.onDequeue(Ae),Oe.onDequeue(Ae),a.webgl&&e.initWebgl(a,{getStyleKey:v,getLabelKey:m,getSourceLabelKey:T,getTargetLabelKey:w,drawElement:E,drawLabel:S,drawSourceLabel:N,drawTargetLabel:j,getElementBox:q,getLabelBox:O,getSourceLabelBox:I,getTargetLabelBox:A,getElementRotationPoint:C,getElementRotationOffset:ae,getLabelRotationPoint:V,getSourceLabelRotationPoint:G,getTargetLabelRotationPoint:Z,getLabelRotationOffset:se,getSourceLabelRotationOffset:W,getTargetLabelRotationOffset:te})}er.redrawHint=function(a,e){var u=this;switch(a){case"eles":u.data.canvasNeedsRedraw[er.NODE]=e;break;case"drag":u.data.canvasNeedsRedraw[er.DRAG]=e;break;case"select":u.data.canvasNeedsRedraw[er.SELECT_BOX]=e;break;case"gc":u.data.gc=!0;break}};var mke=typeof Path2D<"u";er.path2dEnabled=function(a){if(a===void 0)return this.pathsEnabled;this.pathsEnabled=!!a};er.usePaths=function(){return mke&&this.pathsEnabled};er.setImgSmoothing=function(a,e){a.imageSmoothingEnabled!=null?a.imageSmoothingEnabled=e:(a.webkitImageSmoothingEnabled=e,a.mozImageSmoothingEnabled=e,a.msImageSmoothingEnabled=e)};er.getImgSmoothing=function(a){return a.imageSmoothingEnabled!=null?a.imageSmoothingEnabled:a.webkitImageSmoothingEnabled||a.mozImageSmoothingEnabled||a.msImageSmoothingEnabled};er.makeOffscreenCanvas=function(a,e){var u;if((typeof OffscreenCanvas>"u"?"undefined":ta(OffscreenCanvas))!=="undefined")u=new OffscreenCanvas(a,e);else{var n=this.cy.window(),r=n.document;u=r.createElement("canvas"),u.width=a,u.height=e}return u};[iEe,ts,lc,ik,xb,Rl,ri,lEe,Nl,gN,mEe].forEach(function(a){qt(er,a)});var bke=[{name:"null",impl:zSe},{name:"base",impl:tEe},{name:"canvas",impl:yke}],gke=[{type:"layout",extensions:HVe},{type:"renderer",extensions:bke}],gEe={},vEe={};function _Ee(a,e,u){var n=u,r=function(q){Lr("Can not register `"+e+"` for `"+a+"` since `"+q+"` already exists in the prototype and can not be overridden")};if(a==="core"){if(A4.prototype[e])return r(e);A4.prototype[e]=u}else if(a==="collection"){if(Oa.prototype[e])return r(e);Oa.prototype[e]=u}else if(a==="layout"){for(var t=function(q){this.options=q,u.call(this,q),_r(this._private)||(this._private={}),this._private.cy=q.cy,this._private.listeners=[],this.createEmitter()},i=t.prototype=Object.create(u.prototype),o=[],l=0;l<o.length;l++){var s=o[l];i[s]=i[s]||function(){return this}}i.start&&!i.run?i.run=function(){return this.start(),this}:!i.start&&i.run&&(i.start=function(){return this.run(),this});var c=u.prototype.stop;i.stop=function(){var j=this.options;if(j&&j.animate){var q=this.animations;if(q)for(var O=0;O<q.length;O++)q[O].stop()}return c?c.call(this):this.emit("layoutstop"),this},i.destroy||(i.destroy=function(){return this}),i.cy=function(){return this._private.cy};var d=function(q){return q._private.cy},f={addEventFields:function(q,O){O.layout=q,O.cy=d(q),O.target=q},bubble:function(){return!0},parent:function(q){return d(q)}};qt(i,{createEmitter:function(){return this._private.emitter=new zP(f,this),this},emitter:function(){return this._private.emitter},on:function(q,O){return this.emitter().on(q,O),this},one:function(q,O){return this.emitter().one(q,O),this},once:function(q,O){return this.emitter().one(q,O),this},removeListener:function(q,O){return this.emitter().removeListener(q,O),this},removeAllListeners:function(){return this.emitter().removeAllListeners(),this},emit:function(q,O){return this.emitter().emit(q,O),this}}),Cr.eventAliasesOn(i),n=t}else if(a==="renderer"&&e!=="null"&&e!=="base"){var p=TEe("renderer","base"),h=p.prototype,g=u,v=u.prototype,m=function(){p.apply(this,arguments),g.apply(this,arguments)},T=m.prototype;for(var w in h){var E=h[w],S=v[w]!=null;if(S)return r(w);T[w]=E}for(var N in v)T[N]=v[N];h.clientFunctions.forEach(function(j){T[j]=T[j]||function(){_n("Renderer does not implement `renderer."+j+"()` on its prototype")}}),n=m}else if(a==="__proto__"||a==="constructor"||a==="prototype")return _n(a+" is an illegal type to be registered, possibly lead to prototype pollutions");return Bwe({map:gEe,keys:[a,e],value:n})}function TEe(a,e){return Uwe({map:gEe,keys:[a,e]})}function vke(a,e,u,n,r){return Bwe({map:vEe,keys:[a,e,u,n],value:r})}function _ke(a,e,u,n){return Uwe({map:vEe,keys:[a,e,u,n]})}var C7=function(){if(arguments.length===2)return TEe.apply(null,arguments);if(arguments.length===3)return _Ee.apply(null,arguments);if(arguments.length===4)return _ke.apply(null,arguments);if(arguments.length===5)return vke.apply(null,arguments);_n("Invalid extension access syntax")};A4.prototype.extension=C7;gke.forEach(function(a){a.extensions.forEach(function(e){_Ee(a.type,e.name,e.impl)})});var QF=function(){if(!(this instanceof QF))return new QF;this.length=0},pb=QF.prototype;pb.instanceString=function(){return"stylesheet"};pb.selector=function(a){var e=this.length++;return this[e]={selector:a,properties:[]},this};pb.css=function(a,e){var u=this.length-1;if(Mt(a))this[u].properties.push({name:a,value:e});else if(_r(a))for(var n=a,r=Object.keys(n),t=0;t<r.length;t++){var i=r[t],o=n[i];if(o!=null){var l=la.properties[i]||la.properties[MP(i)];if(l!=null){var s=l.name,c=o;this[u].properties.push({name:s,value:c})}}}return this};pb.style=pb.css;pb.generateStyle=function(a){var e=new la(a);return this.appendToStyle(e)};pb.appendToStyle=function(a){for(var e=0;e<this.length;e++){var u=this[e],n=u.selector,r=u.properties;a.selector(n);for(var t=0;t<r.length;t++){var i=r[t];a.css(i.name,i.value)}}return a};var Tke="3.33.1",hb=function(e){if(e===void 0&&(e={}),_r(e))return new A4(e);if(Mt(e))return C7.apply(C7,arguments)};hb.use=function(a){var e=Array.prototype.slice.call(arguments,1);return e.unshift(hb),a.apply(null,e),this};hb.warnings=function(a){return $we(a)};hb.version=Tke;hb.stylesheet=hb.Stylesheet=QF;const wke=({processor:a})=>{const e=We.useRef(null),u=We.useRef(null),n=We.useRef(null);return We.useEffect(()=>{if(!e.current||!a)return;const r=a.viewportCache||{zoom:1,pan:{x:0,y:0}},t=hb({container:e.current,zoom:r.zoom,pan:r.pan,minZoom:.1,maxZoom:3,textureOnViewport:!0,hideEdgesOnViewport:!0,pixelRatio:1,style:[{selector:"node",style:{"background-color":"#64748b",label:"data(shortLabel)",width:20,height:20,"text-opacity":0}},{selector:".root",style:{"background-color":"#f59e0b",width:40,height:40,"text-opacity":1}},{selector:".dereferenced",style:{"background-color":"#10b981"}},{selector:".hovered",style:{"text-opacity":1,"z-index":9999,"text-background-color":"#fff","text-background-opacity":.8}},{selector:".clicked",style:{"text-opacity":1,"z-index":9999,"text-background-color":"#fff","text-background-opacity":.8,"border-width":2,"border-color":"#333",width:30,height:30,"font-size":"24px","font-weight":"bold"}},{selector:"edge",style:{width:2,"line-color":"#94a3b8","curve-style":"straight","target-arrow-shape":"triangle","target-arrow-color":"#64748b"}}],layout:{name:"preset"}});t.on("mouseover","node",o=>o.target.addClass("hovered")),t.on("mouseout","node",o=>o.target.removeClass("hovered")),t.on("tap","node",o=>o.target.toggleClass("clicked")),t.on("tap",o=>{o.target===t&&t.nodes().removeClass("clicked")}),u.current=t;const i=a.subscribe(o=>{let l=!0;if(t.batch(()=>{if(o.mode==="replace"&&t.elements().remove(),o.nodes.length>0&&t.add(o.nodes.map(s=>{const c=a.positionCache.get(s.id);c||(l=!1);const f=a.clickedNodeIds.has(s.id)?`${s.type} clicked`:s.type;return{group:"nodes",data:{id:s.id,label:s.label,shortLabel:s.shortLabel},classes:f,position:c||Ske(s.id)}})),o.edges.length>0){const s=o.edges.filter(c=>o.mode==="replace"||t.getElementById(c.id).empty()).map(c=>({group:"edges",data:{id:c.id,source:c.source,target:c.target}}));t.add(s)}o.statuses.forEach(s=>{const c=t.getElementById(s.id);c.nonempty()&&c.addClass(s.status)})}),!(o.nodes.length>0&&l)){if(o.nodes.length>0){if(o.mode==="append"){const s=new Set(o.nodes.map(c=>c.id));t.nodes().filter(c=>!s.has(c.id())).lock()}t.layout({name:"cose",animate:!1,nodeRepulsion:1e5,idealEdgeLength:300,gravity:.1,initialTemp:1e3,fit:!0,randomize:!1}).run()}n.current&&clearTimeout(n.current),n.current=window.setTimeout(()=>{t.destroyed()||(t.nodes().unlock(),t.layout({name:"cose",animate:!1,randomize:!1,initialTemp:200,nodeRepulsion:1e5,idealEdgeLength:300,gravity:.1,fit:!0,numIter:1e3}).run())},1e3)}});return()=>{a&&t&&!t.destroyed()&&(t.nodes().forEach(o=>{a.positionCache.set(o.id(),o.position())}),a.viewportCache={zoom:t.zoom(),pan:t.pan()},a.clickedNodeIds=new Set(t.nodes(".clicked").map(o=>o.id()))),i(),t.destroy(),n.current&&clearTimeout(n.current)}},[a]),Ge.jsx("div",{ref:e,style:{width:"100%",height:"100%"}})},Ske=a=>{let e=0;for(let u=0;u<a.length;u++)e=(e<<5)-e+a.charCodeAt(u),e|=0;return{x:e%1e3,y:e*31%1e3}},Eke=a=>{if(!a)return"";const e=a.split(`
`),u=e.filter(o=>o.trim().length>0).map(o=>o.search(/\S/)).filter(o=>o!==-1),n=u.length>0?Math.min(...u):0,r=e.map(o=>(o.length>=n?o.slice(n):o).trimEnd()).filter((o,l,s)=>!(l===0&&o==="")&&!(l===s.length-1&&o===""));return r.length>0&&(r[0]="	"+r[0].trimStart()),r.join(`
`).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\b(SELECT|WHERE|PREFIX|OPTIONAL|FILTER|LIMIT|OFFSET|ORDER BY|DISTINCT|GRAPH|UNION|CONSTRUCT|ASK|DESCRIBE)\b/gi,'<span style="color: #c678dd; font-weight: bold;">$1</span>').replace(/(\?[a-zA-Z0-9_]+)/g,'<span style="color: #d19a66;">$1</span>').replace(/(&lt;https?:\/\/[^&]+&gt;)/g,'<span style="color: #98c379;">$1</span>').replace(/\b([a-zA-Z0-9_-]+:[a-zA-Z0-9_-]+)\b/g,'<span style="color: #61afef;">$1</span>')},Ake=({isOpen:a,onClose:e,currentQuery:u,logs:n,topology:r,processor:t,isTrackingEnabled:i=!0})=>{const o=We.useRef(null),[l,s]=We.useState(220),[c,d]=We.useState(!1),[f,p]=We.useState(0),[h,g]=We.useState({nodes:0,edges:0});We.useEffect(()=>{if(!t){g({nodes:0,edges:0});return}g(t.getCounts());const P=t.subscribe(()=>{g(t.getCounts())});return()=>P()},[t]);const[v,m]=We.useState(()=>localStorage.getItem("debugger_view_mode")==="graph"?"graph":"stats");We.useEffect(()=>{localStorage.setItem("debugger_view_mode",v)},[v]);const[T,w]=We.useState(()=>JSON.parse(localStorage.getItem("debugger_filter_traverse")||"true")),[E,S]=We.useState(()=>JSON.parse(localStorage.getItem("debugger_filter_planning")||"true"));We.useEffect(()=>{localStorage.setItem("debugger_filter_traverse",JSON.stringify(T))},[T]),We.useEffect(()=>{localStorage.setItem("debugger_filter_planning",JSON.stringify(E))},[E]);const N=We.useMemo(()=>n.filter(P=>{const C=P.message.trim(),B=/^(Identified|Requesting)/i.test(C)||C.includes("Identified as"),H=/^(Determined)/i.test(C);return!(B&&!T||H&&!E)}),[n,T,E]),j=We.useCallback(P=>{P.preventDefault(),d(!0)},[]),q=We.useCallback(()=>d(!1),[]),O=We.useCallback(P=>{if(c&&o.current){const C=o.current.getBoundingClientRect(),B=P.clientY-C.top-120;B>80&&B<C.height*.8&&s(B)}},[c]);We.useEffect(()=>(c&&(window.addEventListener("mousemove",O),window.addEventListener("mouseup",q)),()=>{window.removeEventListener("mousemove",O),window.removeEventListener("mouseup",q)}),[c,O,q]);const I=We.useMemo(()=>Eke(u),[u]),A=()=>{m("graph"),p(P=>P+1)};return a?Ge.jsx("div",{ref:o,style:{...Er.sidebarContainer,userSelect:c?"none":"auto",cursor:c?"row-resize":"auto"},children:Ge.jsxs("div",{style:Er.content,children:[Ge.jsxs("div",{style:Er.toolbar,children:[Ge.jsx("div",{style:{...Er.statusBadge,backgroundColor:i?"#f0fdf4":"#fef2f2",color:i?"#16a34a":"#dc2626",borderColor:i?"#bbf7d0":"#fecaca"},children:i?" TRACKING ACTIVE":" TRACKING PAUSED"}),Ge.jsxs("div",{style:Er.filterGroup,children:[Ge.jsxs("label",{style:Er.filterLabel,children:[Ge.jsx("input",{type:"checkbox",checked:T,onChange:P=>w(P.target.checked)})," Traverse"]}),Ge.jsxs("label",{style:Er.filterLabel,children:[Ge.jsx("input",{type:"checkbox",checked:E,onChange:P=>S(P.target.checked)})," Planning"]})]})]}),(r||t)&&Ge.jsxs("div",{style:Er.viewToggle,children:[Ge.jsx("button",{onClick:()=>m("stats"),style:v==="stats"?Er.activeTab:Er.tab,title:"Show Logs and Query",children:" Query & Logs"}),Ge.jsx("button",{onClick:A,style:v==="graph"?Er.activeTab:Er.tab,title:"Show Full Screen Topology (Click to Reset)",children:" Topology Graph"})]}),v==="graph"&&t?Ge.jsx("div",{style:Er.fullGraphContainer,children:Ge.jsx(wke,{processor:t},`${u}-${f}`)}):Ge.jsxs(Ge.Fragment,{children:[t&&Ge.jsxs("div",{style:Er.topologyDashboard,children:[Ge.jsxs("div",{style:Er.statBox,children:[Ge.jsx("span",{style:Er.statLabel,children:"Total Nodes"}),Ge.jsx("span",{style:Er.statValue,children:h.nodes})]}),Ge.jsxs("div",{style:Er.statBox,children:[Ge.jsx("span",{style:Er.statLabel,children:"Total Edges"}),Ge.jsx("span",{style:Er.statValue,children:h.edges})]})]}),Ge.jsxs("section",{style:{...Er.querySection,height:l},children:[Ge.jsx("h3",{style:Er.sectionTitle,children:"SPARQL Query"}),Ge.jsx("div",{style:Er.codeWrapper,children:Ge.jsx("pre",{style:Er.codeBlock,dangerouslySetInnerHTML:{__html:I}})})]}),Ge.jsx("div",{onMouseDown:j,style:{...Er.resizer,backgroundColor:c?"#3b82f6":"transparent"},children:Ge.jsx("div",{style:Er.resizerHandle})}),Ge.jsxs("section",{style:Er.logSection,children:[Ge.jsxs("h3",{style:Er.sectionTitle,children:["Engine Logs (",N.length,")"]}),Ge.jsx("div",{style:Er.logWindow,children:N.length>0?N.map(P=>Ge.jsxs("div",{style:Er.logLine,children:[Ge.jsx("span",{style:Er.timestamp,children:P.timestamp}),Ge.jsx("span",{style:{color:P.level==="error"?"#f87171":P.level==="warn"?"#fbbf24":"#e2e8f0",wordBreak:"break-word"},children:P.message})]},P.id)):Ge.jsx("div",{style:Er.emptyLogs,children:"No logs match active filters..."})})]})]})]})}):null},Er={sidebarContainer:{display:"flex",flexDirection:"column",height:"100%",width:"100%",background:"#ffffff",borderLeft:"1px solid #e2e8f0",overflow:"hidden"},content:{padding:"1rem",display:"flex",flexDirection:"column",flex:1,overflow:"hidden"},toolbar:{display:"flex",alignItems:"center",gap:"1.5rem",marginBottom:"1rem"},statusBadge:{padding:"6px 10px",borderRadius:"4px",fontSize:"0.65rem",fontWeight:800,border:"1px solid",letterSpacing:"0.05em"},filterGroup:{display:"flex",gap:"0.8rem"},filterLabel:{fontSize:"0.7rem",display:"flex",alignItems:"center",gap:"4px",color:"#64748b",fontWeight:700,textTransform:"uppercase"},viewToggle:{display:"flex",gap:"8px",marginBottom:"8px",flexShrink:0},tab:{background:"none",border:"1px solid #e2e8f0",padding:"6px 14px",borderRadius:"4px",fontSize:"0.75rem",cursor:"pointer",color:"#64748b"},activeTab:{background:"#f1f5f9",border:"1px solid #cbd5e1",padding:"6px 14px",borderRadius:"4px",fontSize:"0.75rem",cursor:"pointer",color:"#1e293b",fontWeight:"bold",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},fullGraphContainer:{flex:1,background:"#f8fafc",borderRadius:"6px",border:"1px solid #e2e8f0",overflow:"hidden",minHeight:0},topologyDashboard:{display:"flex",gap:"1rem",background:"#f8fafc",padding:"12px",borderRadius:"6px",border:"1px solid #e2e8f0",marginBottom:"1rem",flexShrink:0},statBox:{display:"flex",flexDirection:"column"},statLabel:{fontSize:"0.6rem",color:"#94a3b8",textTransform:"uppercase",fontWeight:800},statValue:{fontSize:"1.1rem",fontWeight:800,fontFamily:"monospace",color:"#1e293b"},querySection:{display:"flex",flexDirection:"column",gap:"0.4rem",flexShrink:0,overflow:"hidden"},sectionTitle:{fontSize:"0.7rem",textTransform:"uppercase",color:"#94a3b8",fontWeight:700},codeWrapper:{background:"#1e293b",borderRadius:"6px",padding:"12px",border:"1px solid #0f172a",height:"100%",overflowY:"auto"},codeBlock:{color:"#cbd5e1",fontSize:"0.8rem",margin:0,fontFamily:"monospace",lineHeight:"1.6",whiteSpace:"pre-wrap",paddingLeft:"1.5rem",textIndent:"-1.5rem"},resizer:{height:"10px",margin:"4px 0",cursor:"row-resize",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0},resizerHandle:{width:"30px",height:"3px",borderRadius:"2px",background:"#e2e8f0"},logSection:{display:"flex",flexDirection:"column",gap:"0.5rem",flex:1,minHeight:0},logWindow:{flex:1,background:"#0f172a",color:"#94a3b8",padding:"12px",borderRadius:"6px",fontSize:"0.75rem",overflowY:"auto",fontFamily:"monospace"},logLine:{margin:"4px 0",display:"flex",gap:"10px",borderBottom:"1px solid #1e293b",paddingBottom:"2px"},timestamp:{color:"#475569",fontSize:"0.6rem",flexShrink:0},emptyLogs:{opacity:.5,padding:"20px",textAlign:"center",fontSize:"0.8rem"}};var Hm={},P6={},fve;function Oke(){if(fve)return P6;fve=1,Object.defineProperty(P6,"__esModule",{value:!0}),P6.StatisticLinkDiscovery=void 0;const a=lt(),e=wq();let u=class extends e.StatisticBase{constructor(){super(),this.count=0,this.metadata={},this.key=a.KeysStatistics.discoveredLinks}updateStatistic(r,t){const i={...r.metadata,discoveredTimestamp:performance.now(),discoverOrder:this.count};return this.metadata[r.url]=this.metadata[r.url]?[...this.metadata[r.url],i]:[i],this.emit({edge:[t.url,r.url],metadataChild:this.metadata[r.url],metadataParent:this.metadata[t.url]}),this.count++,!0}};return P6.StatisticLinkDiscovery=u,P6}var pve;function xke(){return pve||(pve=1,(function(a){var e=Hm&&Hm.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=Hm&&Hm.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Oke(),a)})(Hm)),Hm}var Rke=xke(),km={},j6={},hve;function Nke(){if(hve)return j6;hve=1,Object.defineProperty(j6,"__esModule",{value:!0}),j6.StatisticLinkDereference=void 0;const a=lt(),e=wq();let u=class extends e.StatisticBase{constructor(){super(),this.count=0,this.key=a.KeysStatistics.dereferencedLinks}updateStatistic(r,t){return this.emit({url:r.url,metadata:{type:t.constructor.name,dereferencedTimestamp:performance.now(),dereferenceOrder:this.count,...r.metadata},context:r.context,transform:r.transform}),this.count++,!0}};return j6.StatisticLinkDereference=u,j6}var yve;function Ike(){return yve||(yve=1,(function(a){var e=km&&km.__createBinding||(Object.create?(function(n,r,t,i){i===void 0&&(i=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(n,i,o)}):(function(n,r,t,i){i===void 0&&(i=t),n[i]=r[t]})),u=km&&km.__exportStar||function(n,r){for(var t in n)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&e(r,n,t)};Object.defineProperty(a,"__esModule",{value:!0}),u(Nke(),a)})(km)),km}var Dke=Ike();const Fke=200;class Pke{topologyEmitter;knownNodes=new Map;knownEdges=new Map;knownNodesFull=new Set;nEdges=0;knownStatuses=new Map;positionCache=new Map;viewportCache=null;clickedNodeIds=new Set;pendingDiff=this.createEmptyPayload("append");flushTimer=null;BATCH_MS=100;subscribers=new Set;constructor(e){this.topologyEmitter=e,this.topologyEmitter.on(u=>this.ingestData(u))}subscribe(e){this.subscribers.add(e);const u={mode:"replace",nodes:Array.from(this.knownNodes.values()),edges:Array.from(this.knownEdges.values()),statuses:Array.from(this.knownStatuses.entries()).map(([n,r])=>({id:n,status:r}))};return u.nodes.length>0&&e(u),()=>this.subscribers.delete(e)}ingestData(e){let u=0;for(const i in e.adjacencyListIn)u+=e.adjacencyListIn[i].length;for(const i in e.adjacencyListOut)u+=e.adjacencyListOut[i].length;this.nEdges=u,this.knownNodesFull=new Set(Array.from(Object.keys(e.nodeToIndexDict)));const n=this.knownNodes.size>=Fke,r=new Set(e.dereferenceOrder);let t=!1;n||Object.entries(e.indexToNodeDict).forEach(([i,o])=>{if(o.endsWith(".meta"))return;const l=parseInt(i);if(!this.knownNodes.has(i)){const s=!e.adjacencyListIn[l]||e.adjacencyListIn[l].length===0,c={id:i,label:o,shortLabel:this.shortenLabel(o),type:s?"root":"node"};this.knownNodes.set(i,c),this.pendingDiff.nodes.push(c),t=!0}}),n||Object.entries(e.adjacencyListOut).forEach(([i,o])=>{this.knownNodes.has(i)&&o.forEach(l=>{const s=l.toString();if(e.indexToNodeDict[l]?.endsWith(".meta")||!this.knownNodes.has(s))return;const c=`${i}->${s}`;if(!this.knownEdges.has(c)){const d={id:c,source:i,target:s};this.knownEdges.set(c,d),this.pendingDiff.edges.push(d),t=!0}})}),this.knownNodes.forEach((i,o)=>{const l=parseInt(o);r.has(l)&&this.knownStatuses.get(o)!=="dereferenced"&&(this.knownStatuses.set(o,"dereferenced"),this.pendingDiff.statuses.push({id:o,status:"dereferenced"}),t=!0)}),t&&!this.flushTimer&&(this.flushTimer=setTimeout(()=>this.flush(),this.BATCH_MS))}flush(){(this.pendingDiff.nodes.length>0||this.pendingDiff.edges.length>0||this.pendingDiff.statuses.length>0)&&this.notifySubscribers(this.pendingDiff),this.pendingDiff=this.createEmptyPayload("append"),this.flushTimer=null}notifySubscribers(e){this.subscribers.forEach(u=>u(e))}createEmptyPayload(e){return{mode:e,nodes:[],edges:[],statuses:[]}}shortenLabel(e){try{const u=new URL(e);let n=u.pathname+u.search+u.hash;return n==="/"||n===""?u.hostname:decodeURIComponent(n)}catch{return e}}getCounts(){return{nodes:this.knownNodesFull.size,edges:this.nEdges}}}const jke=()=>{const{user:a,login:e,logout:u}=MH();return a?Ge.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"10px"},children:[Ge.jsxs("span",{style:{fontSize:"0.9rem"},children:["Welcome, ",Ge.jsx("strong",{children:a.name})]}),Ge.jsx("button",{onClick:u,style:{fontSize:"0.75rem",padding:"2px 8px",cursor:"pointer"},children:"Logout"})]}):Ge.jsx("button",{onClick:()=>e({id:"1",username:"https://solidbench.linkeddatafragments.org/pods/00000000000000000933/profile/card#me",name:"Solid Developer Test"}),style:{background:"#4CAF50",color:"white",border:"none",padding:"5px 15px",borderRadius:"4px",cursor:"pointer"},children:"Fake Login"})},Mke=()=>{const[a,e]=We.useState(()=>{const m=localStorage.getItem("solidlab_debug_sidebar_open");return m!==null?JSON.parse(m):!1});We.useEffect(()=>{localStorage.setItem("solidlab_debug_sidebar_open",JSON.stringify(a))},[a]);const[u,n]=We.useState("No query executed yet."),[r,t]=We.useState([]),[i,o]=We.useState(()=>{const m=localStorage.getItem("solidlab_tracking_enabled");return m!==null?JSON.parse(m):!0});We.useEffect(()=>{localStorage.setItem("solidlab_tracking_enabled",JSON.stringify(i))},[i]);const l=We.useRef(i);We.useEffect(()=>{l.current=i,i||t([])},[i]);const s=We.useCallback(m=>{l.current&&t(T=>[...T.slice(-5e3),m])},[]),c=We.useMemo(()=>new j7e("debug",s),[s]),[d,f]=We.useState(null),[p,h]=We.useState(null),g=We.useCallback(m=>{n(m),t([]),f(null),h(null)},[]),v=We.useCallback(()=>{if(!i)return null;const m=new Rke.StatisticLinkDiscovery,T=new Dke.StatisticLinkDereference,w=new RRe.StatisticTraversalTopology(m,T),E=new Pke(w);h(E);let S=0;return w.on(N=>{const j=Date.now();j-S>200&&(f(N),S=j)}),{trackerDiscovery:m,trackerDereference:T}},[i]);return Ge.jsx(C7e,{children:Ge.jsxs(fxe,{children:[Ge.jsxs("nav",{style:{padding:"0.75rem 2rem",background:"#fff",display:"flex",justifyContent:"space-between",alignItems:"center",boxShadow:"0 2px 4px rgba(0,0,0,0.05)",position:"sticky",top:0,zIndex:100},children:[Ge.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[Ge.jsx(vF,{to:"/",style:{fontWeight:"bold",color:"#2563eb",textDecoration:"none",fontSize:"1.2rem"},children:" SolidLab"}),Ge.jsx(vF,{to:"/profile",style:{textDecoration:"none",color:"#444",fontSize:"0.9rem"},children:"My Profile"})]}),Ge.jsxs("div",{style:{display:"flex",gap:"20px",alignItems:"center"},children:[Ge.jsxs("label",{style:{display:"flex",alignItems:"center",gap:"8px",cursor:"pointer",fontSize:"0.85rem",color:"#64748b"},children:[Ge.jsx("input",{type:"checkbox",checked:i,onChange:()=>o(!i)}),i?" Tracking Active":" Tracking Paused"]}),Ge.jsx(jke,{}),Ge.jsx("button",{style:{background:a?"#475569":"#ef4444",color:"white",border:"none",padding:"6px 14px",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",gap:"8px",transition:"background 0.2s"},onClick:()=>e(!a),children:a?" Hide Traversal":" Show Traversal"})]})]}),Ge.jsxs("div",{style:{display:"flex",height:"calc(100vh - 65px)",overflow:"hidden"},children:[Ge.jsx("main",{style:{flex:a?4:1,background:"#f8fafc",overflowY:"auto",transition:"flex 0.4s ease-in-out",borderRight:a?"1px solid #e2e8f0":"none",minWidth:a?"300px":"100%"},children:Ge.jsxs(HOe,{children:[Ge.jsx(M6,{path:"/profile",element:Ge.jsx(Q7e,{setDebugQuery:g,logger:i?c:void 0,createTracker:v})}),Ge.jsx(M6,{path:"/forums/:id",element:Ge.jsx(V7e,{setDebugQuery:g,logger:i?c:void 0,createTracker:v})}),Ge.jsx(M6,{path:"/profiles/:id",element:Ge.jsx(z7e,{setDebugQuery:g,logger:i?c:void 0,createTracker:v})}),Ge.jsx(M6,{path:"*",element:Ge.jsx("div",{style:{padding:"2rem"},children:Ge.jsx("h2",{children:"404"})})})]})}),Ge.jsx("aside",{style:{flex:a?6:0,display:"flex",flexDirection:"column",background:"#fff",transition:"flex 0.4s ease-in-out",overflow:"hidden",visibility:a?"visible":"hidden"},children:Ge.jsx("div",{style:{minWidth:"50vw",height:"100%"},children:Ge.jsx(Ake,{isOpen:a,onClose:()=>e(!1),currentQuery:u,isTrackingEnabled:i,topology:d,processor:p,logs:r})})})]})]})})};JAe.createRoot(document.getElementById("root")).render(Ge.jsx(VAe.StrictMode,{children:Ge.jsx(Mke,{})}));
